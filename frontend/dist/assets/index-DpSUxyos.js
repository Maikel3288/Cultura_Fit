function _mergeNamespaces(t,e){for(var r=0;r<e.length;r++){const u=e[r];if(typeof u!="string"&&!Array.isArray(u)){for(const d in u)if(d!=="default"&&!(d in t)){const m=Object.getOwnPropertyDescriptor(u,d);m&&Object.defineProperty(t,d,m.get?m:{enumerable:!0,get:()=>u[d]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const c of m.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function r(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(d){if(d.ep)return;d.ep=!0;const m=r(d);fetch(d.href,m)}})();var commonjsGlobal$4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function u(){var d=!1;try{d=this instanceof u}catch{}return d?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(u){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(r,u,d.get?d:{enumerable:!0,get:function(){return t[u]}})}),r}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),c=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),o=Symbol.for("react.suspense"),s=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.iterator;function E(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=v&&Ce[v]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,w={};function I(Ce,je,Fe){this.props=Ce,this.context=je,this.refs=w,this.updater=Fe||y}I.prototype.isReactComponent={},I.prototype.setState=function(Ce,je){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,je,"setState")},I.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function _(){}_.prototype=I.prototype;function S(Ce,je,Fe){this.props=Ce,this.context=je,this.refs=w,this.updater=Fe||y}var j=S.prototype=new _;j.constructor=S,A(j,I.prototype),j.isPureReactComponent=!0;var K=Array.isArray,J=Object.prototype.hasOwnProperty,H={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function P(Ce,je,Fe){var Ve,Ge={},Le=null,Be=null;if(je!=null)for(Ve in je.ref!==void 0&&(Be=je.ref),je.key!==void 0&&(Le=""+je.key),je)J.call(je,Ve)&&!U.hasOwnProperty(Ve)&&(Ge[Ve]=je[Ve]);var $e=arguments.length-2;if($e===1)Ge.children=Fe;else if(1<$e){for(var he=Array($e),p=0;p<$e;p++)he[p]=arguments[p+2];Ge.children=he}if(Ce&&Ce.defaultProps)for(Ve in $e=Ce.defaultProps,$e)Ge[Ve]===void 0&&(Ge[Ve]=$e[Ve]);return{$$typeof:t,type:Ce,key:Le,ref:Be,props:Ge,_owner:H.current}}function Z(Ce,je){return{$$typeof:t,type:Ce.type,key:je,ref:Ce.ref,props:Ce.props,_owner:Ce._owner}}function ie(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===t}function ue(Ce){var je={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(Fe){return je[Fe]})}var le=/\/+/g;function ne(Ce,je){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?ue(""+Ce.key):je.toString(36)}function ye(Ce,je,Fe,Ve,Ge){var Le=typeof Ce;(Le==="undefined"||Le==="boolean")&&(Ce=null);var Be=!1;if(Ce===null)Be=!0;else switch(Le){case"string":case"number":Be=!0;break;case"object":switch(Ce.$$typeof){case t:case e:Be=!0}}if(Be)return Be=Ce,Ge=Ge(Be),Ce=Ve===""?"."+ne(Be,0):Ve,K(Ge)?(Fe="",Ce!=null&&(Fe=Ce.replace(le,"$&/")+"/"),ye(Ge,je,Fe,"",function(p){return p})):Ge!=null&&(ie(Ge)&&(Ge=Z(Ge,Fe+(!Ge.key||Be&&Be.key===Ge.key?"":(""+Ge.key).replace(le,"$&/")+"/")+Ce)),je.push(Ge)),1;if(Be=0,Ve=Ve===""?".":Ve+":",K(Ce))for(var $e=0;$e<Ce.length;$e++){Le=Ce[$e];var he=Ve+ne(Le,$e);Be+=ye(Le,je,Fe,he,Ge)}else if(he=E(Ce),typeof he=="function")for(Ce=he.call(Ce),$e=0;!(Le=Ce.next()).done;)Le=Le.value,he=Ve+ne(Le,$e++),Be+=ye(Le,je,Fe,he,Ge);else if(Le==="object")throw je=String(Ce),Error("Objects are not valid as a React child (found: "+(je==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":je)+"). If you meant to render a collection of children, use an array instead.");return Be}function fe(Ce,je,Fe){if(Ce==null)return Ce;var Ve=[],Ge=0;return ye(Ce,Ve,"","",function(Le){return je.call(Fe,Le,Ge++)}),Ve}function Te(Ce){if(Ce._status===-1){var je=Ce._result;je=je(),je.then(function(Fe){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=Fe)},function(Fe){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=Fe)}),Ce._status===-1&&(Ce._status=0,Ce._result=je)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var Ae={current:null},Se={transition:null},be={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:Se,ReactCurrentOwner:H};function we(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:fe,forEach:function(Ce,je,Fe){fe(Ce,function(){je.apply(this,arguments)},Fe)},count:function(Ce){var je=0;return fe(Ce,function(){je++}),je},toArray:function(Ce){return fe(Ce,function(je){return je})||[]},only:function(Ce){if(!ie(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}},react_production_min.Component=I,react_production_min.Fragment=r,react_production_min.Profiler=d,react_production_min.PureComponent=S,react_production_min.StrictMode=u,react_production_min.Suspense=o,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=be,react_production_min.act=we,react_production_min.cloneElement=function(Ce,je,Fe){if(Ce==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ce+".");var Ve=A({},Ce.props),Ge=Ce.key,Le=Ce.ref,Be=Ce._owner;if(je!=null){if(je.ref!==void 0&&(Le=je.ref,Be=H.current),je.key!==void 0&&(Ge=""+je.key),Ce.type&&Ce.type.defaultProps)var $e=Ce.type.defaultProps;for(he in je)J.call(je,he)&&!U.hasOwnProperty(he)&&(Ve[he]=je[he]===void 0&&$e!==void 0?$e[he]:je[he])}var he=arguments.length-2;if(he===1)Ve.children=Fe;else if(1<he){$e=Array(he);for(var p=0;p<he;p++)$e[p]=arguments[p+2];Ve.children=$e}return{$$typeof:t,type:Ce.type,key:Ge,ref:Le,props:Ve,_owner:Be}},react_production_min.createContext=function(Ce){return Ce={$$typeof:c,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ce.Provider={$$typeof:m,_context:Ce},Ce.Consumer=Ce},react_production_min.createElement=P,react_production_min.createFactory=function(Ce){var je=P.bind(null,Ce);return je.type=Ce,je},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Ce){return{$$typeof:a,render:Ce}},react_production_min.isValidElement=ie,react_production_min.lazy=function(Ce){return{$$typeof:h,_payload:{_status:-1,_result:Ce},_init:Te}},react_production_min.memo=function(Ce,je){return{$$typeof:s,type:Ce,compare:je===void 0?null:je}},react_production_min.startTransition=function(Ce){var je=Se.transition;Se.transition={};try{Ce()}finally{Se.transition=je}},react_production_min.unstable_act=we,react_production_min.useCallback=function(Ce,je){return Ae.current.useCallback(Ce,je)},react_production_min.useContext=function(Ce){return Ae.current.useContext(Ce)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Ce){return Ae.current.useDeferredValue(Ce)},react_production_min.useEffect=function(Ce,je){return Ae.current.useEffect(Ce,je)},react_production_min.useId=function(){return Ae.current.useId()},react_production_min.useImperativeHandle=function(Ce,je,Fe){return Ae.current.useImperativeHandle(Ce,je,Fe)},react_production_min.useInsertionEffect=function(Ce,je){return Ae.current.useInsertionEffect(Ce,je)},react_production_min.useLayoutEffect=function(Ce,je){return Ae.current.useLayoutEffect(Ce,je)},react_production_min.useMemo=function(Ce,je){return Ae.current.useMemo(Ce,je)},react_production_min.useReducer=function(Ce,je,Fe){return Ae.current.useReducer(Ce,je,Fe)},react_production_min.useRef=function(Ce){return Ae.current.useRef(Ce)},react_production_min.useState=function(Ce){return Ae.current.useState(Ce)},react_production_min.useSyncExternalStore=function(Ce,je,Fe){return Ae.current.useSyncExternalStore(Ce,je,Fe)},react_production_min.useTransition=function(){return Ae.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,d=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function c(a,o,s){var h,v={},E=null,y=null;s!==void 0&&(E=""+s),o.key!==void 0&&(E=""+o.key),o.ref!==void 0&&(y=o.ref);for(h in o)u.call(o,h)&&!m.hasOwnProperty(h)&&(v[h]=o[h]);if(a&&a.defaultProps)for(h in o=a.defaultProps,o)v[h]===void 0&&(v[h]=o[h]);return{$$typeof:e,type:a,key:E,ref:y,props:v,_owner:d.current}}return reactJsxRuntime_production_min.Fragment=r,reactJsxRuntime_production_min.jsx=c,reactJsxRuntime_production_min.jsxs=c,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const index$1=getDefaultExportFromCjs(reactExports),React=_mergeNamespaces({__proto__:null,default:index$1},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(t){function e(Se,be){var we=Se.length;Se.push(be);e:for(;0<we;){var Ce=we-1>>>1,je=Se[Ce];if(0<d(je,be))Se[Ce]=be,Se[we]=je,we=Ce;else break e}}function r(Se){return Se.length===0?null:Se[0]}function u(Se){if(Se.length===0)return null;var be=Se[0],we=Se.pop();if(we!==be){Se[0]=we;e:for(var Ce=0,je=Se.length,Fe=je>>>1;Ce<Fe;){var Ve=2*(Ce+1)-1,Ge=Se[Ve],Le=Ve+1,Be=Se[Le];if(0>d(Ge,we))Le<je&&0>d(Be,Ge)?(Se[Ce]=Be,Se[Le]=we,Ce=Le):(Se[Ce]=Ge,Se[Ve]=we,Ce=Ve);else if(Le<je&&0>d(Be,we))Se[Ce]=Be,Se[Le]=we,Ce=Le;else break e}}return be}function d(Se,be){var we=Se.sortIndex-be.sortIndex;return we!==0?we:Se.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;t.unstable_now=function(){return m.now()}}else{var c=Date,a=c.now();t.unstable_now=function(){return c.now()-a}}var o=[],s=[],h=1,v=null,E=3,y=!1,A=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Se){for(var be=r(s);be!==null;){if(be.callback===null)u(s);else if(be.startTime<=Se)u(s),be.sortIndex=be.expirationTime,e(o,be);else break;be=r(s)}}function K(Se){if(w=!1,j(Se),!A)if(r(o)!==null)A=!0,Te(J);else{var be=r(s);be!==null&&Ae(K,be.startTime-Se)}}function J(Se,be){A=!1,w&&(w=!1,_(P),P=-1),y=!0;var we=E;try{for(j(be),v=r(o);v!==null&&(!(v.expirationTime>be)||Se&&!ue());){var Ce=v.callback;if(typeof Ce=="function"){v.callback=null,E=v.priorityLevel;var je=Ce(v.expirationTime<=be);be=t.unstable_now(),typeof je=="function"?v.callback=je:v===r(o)&&u(o),j(be)}else u(o);v=r(o)}if(v!==null)var Fe=!0;else{var Ve=r(s);Ve!==null&&Ae(K,Ve.startTime-be),Fe=!1}return Fe}finally{v=null,E=we,y=!1}}var H=!1,U=null,P=-1,Z=5,ie=-1;function ue(){return!(t.unstable_now()-ie<Z)}function le(){if(U!==null){var Se=t.unstable_now();ie=Se;var be=!0;try{be=U(!0,Se)}finally{be?ne():(H=!1,U=null)}}else H=!1}var ne;if(typeof S=="function")ne=function(){S(le)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,fe=ye.port2;ye.port1.onmessage=le,ne=function(){fe.postMessage(null)}}else ne=function(){I(le,0)};function Te(Se){U=Se,H||(H=!0,ne())}function Ae(Se,be){P=I(function(){Se(t.unstable_now())},be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Se){Se.callback=null},t.unstable_continueExecution=function(){A||y||(A=!0,Te(J))},t.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<Se?Math.floor(1e3/Se):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(Se){switch(E){case 1:case 2:case 3:var be=3;break;default:be=E}var we=E;E=be;try{return Se()}finally{E=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Se,be){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var we=E;E=Se;try{return be()}finally{E=we}},t.unstable_scheduleCallback=function(Se,be,we){var Ce=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ce+we:Ce):we=Ce,Se){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=we+je,Se={id:h++,callback:be,priorityLevel:Se,startTime:we,expirationTime:je,sortIndex:-1},we>Ce?(Se.sortIndex=we,e(s,Se),r(o)===null&&Se===r(s)&&(w?(_(P),P=-1):w=!0,Ae(K,we-Ce))):(Se.sortIndex=je,e(o,Se),A||y||(A=!0,Te(J))),Se},t.unstable_shouldYield=ue,t.unstable_wrapCallback=function(Se){var be=E;return function(){var we=E;E=be;try{return Se.apply(this,arguments)}finally{E=we}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),e=requireScheduler();function r(D){for(var W="https://reactjs.org/docs/error-decoder.html?invariant="+D,de=1;de<arguments.length;de++)W+="&args[]="+encodeURIComponent(arguments[de]);return"Minified React error #"+D+"; visit "+W+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,d={};function m(D,W){c(D,W),c(D+"Capture",W)}function c(D,W){for(d[D]=W,D=0;D<W.length;D++)u.add(W[D])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),o=Object.prototype.hasOwnProperty,s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},v={};function E(D){return o.call(v,D)?!0:o.call(h,D)?!1:s.test(D)?v[D]=!0:(h[D]=!0,!1)}function y(D,W,de,ve){if(de!==null&&de.type===0)return!1;switch(typeof W){case"function":case"symbol":return!0;case"boolean":return ve?!1:de!==null?!de.acceptsBooleans:(D=D.toLowerCase().slice(0,5),D!=="data-"&&D!=="aria-");default:return!1}}function A(D,W,de,ve){if(W===null||typeof W>"u"||y(D,W,de,ve))return!0;if(ve)return!1;if(de!==null)switch(de.type){case 3:return!W;case 4:return W===!1;case 5:return isNaN(W);case 6:return isNaN(W)||1>W}return!1}function w(D,W,de,ve,Ie,xe,Je){this.acceptsBooleans=W===2||W===3||W===4,this.attributeName=ve,this.attributeNamespace=Ie,this.mustUseProperty=de,this.propertyName=D,this.type=W,this.sanitizeURL=xe,this.removeEmptyString=Je}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(D){I[D]=new w(D,0,!1,D,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(D){var W=D[0];I[W]=new w(W,1,!1,D[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(D){I[D]=new w(D,2,!1,D.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(D){I[D]=new w(D,2,!1,D,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(D){I[D]=new w(D,3,!1,D.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(D){I[D]=new w(D,3,!0,D,null,!1,!1)}),["capture","download"].forEach(function(D){I[D]=new w(D,4,!1,D,null,!1,!1)}),["cols","rows","size","span"].forEach(function(D){I[D]=new w(D,6,!1,D,null,!1,!1)}),["rowSpan","start"].forEach(function(D){I[D]=new w(D,5,!1,D.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function S(D){return D[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(D){var W=D.replace(_,S);I[W]=new w(W,1,!1,D,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(D){var W=D.replace(_,S);I[W]=new w(W,1,!1,D,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(D){var W=D.replace(_,S);I[W]=new w(W,1,!1,D,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(D){I[D]=new w(D,1,!1,D.toLowerCase(),null,!1,!1)}),I.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(D){I[D]=new w(D,1,!1,D.toLowerCase(),null,!0,!0)});function j(D,W,de,ve){var Ie=I.hasOwnProperty(W)?I[W]:null;(Ie!==null?Ie.type!==0:ve||!(2<W.length)||W[0]!=="o"&&W[0]!=="O"||W[1]!=="n"&&W[1]!=="N")&&(A(W,de,Ie,ve)&&(de=null),ve||Ie===null?E(W)&&(de===null?D.removeAttribute(W):D.setAttribute(W,""+de)):Ie.mustUseProperty?D[Ie.propertyName]=de===null?Ie.type===3?!1:"":de:(W=Ie.attributeName,ve=Ie.attributeNamespace,de===null?D.removeAttribute(W):(Ie=Ie.type,de=Ie===3||Ie===4&&de===!0?"":""+de,ve?D.setAttributeNS(ve,W,de):D.setAttribute(W,de))))}var K=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),H=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),ue=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),Se=Symbol.iterator;function be(D){return D===null||typeof D!="object"?null:(D=Se&&D[Se]||D["@@iterator"],typeof D=="function"?D:null)}var we=Object.assign,Ce;function je(D){if(Ce===void 0)try{throw Error()}catch(de){var W=de.stack.trim().match(/\n( *(at )?)/);Ce=W&&W[1]||""}return`
`+Ce+D}var Fe=!1;function Ve(D,W){if(!D||Fe)return"";Fe=!0;var de=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(W)if(W=function(){throw Error()},Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(Wt){var ve=Wt}Reflect.construct(D,[],W)}else{try{W.call()}catch(Wt){ve=Wt}D.call(W.prototype)}else{try{throw Error()}catch(Wt){ve=Wt}D()}}catch(Wt){if(Wt&&ve&&typeof Wt.stack=="string"){for(var Ie=Wt.stack.split(`
`),xe=ve.stack.split(`
`),Je=Ie.length-1,rt=xe.length-1;1<=Je&&0<=rt&&Ie[Je]!==xe[rt];)rt--;for(;1<=Je&&0<=rt;Je--,rt--)if(Ie[Je]!==xe[rt]){if(Je!==1||rt!==1)do if(Je--,rt--,0>rt||Ie[Je]!==xe[rt]){var vt=`
`+Ie[Je].replace(" at new "," at ");return D.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",D.displayName)),vt}while(1<=Je&&0<=rt);break}}}finally{Fe=!1,Error.prepareStackTrace=de}return(D=D?D.displayName||D.name:"")?je(D):""}function Ge(D){switch(D.tag){case 5:return je(D.type);case 16:return je("Lazy");case 13:return je("Suspense");case 19:return je("SuspenseList");case 0:case 2:case 15:return D=Ve(D.type,!1),D;case 11:return D=Ve(D.type.render,!1),D;case 1:return D=Ve(D.type,!0),D;default:return""}}function Le(D){if(D==null)return null;if(typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case U:return"Fragment";case H:return"Portal";case Z:return"Profiler";case P:return"StrictMode";case ne:return"Suspense";case ye:return"SuspenseList"}if(typeof D=="object")switch(D.$$typeof){case ue:return(D.displayName||"Context")+".Consumer";case ie:return(D._context.displayName||"Context")+".Provider";case le:var W=D.render;return D=D.displayName,D||(D=W.displayName||W.name||"",D=D!==""?"ForwardRef("+D+")":"ForwardRef"),D;case fe:return W=D.displayName||null,W!==null?W:Le(D.type)||"Memo";case Te:W=D._payload,D=D._init;try{return Le(D(W))}catch{}}return null}function Be(D){var W=D.type;switch(D.tag){case 24:return"Cache";case 9:return(W.displayName||"Context")+".Consumer";case 10:return(W._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return D=W.render,D=D.displayName||D.name||"",W.displayName||(D!==""?"ForwardRef("+D+")":"ForwardRef");case 7:return"Fragment";case 5:return W;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(W);case 8:return W===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof W=="function")return W.displayName||W.name||null;if(typeof W=="string")return W}return null}function $e(D){switch(typeof D){case"boolean":case"number":case"string":case"undefined":return D;case"object":return D;default:return""}}function he(D){var W=D.type;return(D=D.nodeName)&&D.toLowerCase()==="input"&&(W==="checkbox"||W==="radio")}function p(D){var W=he(D)?"checked":"value",de=Object.getOwnPropertyDescriptor(D.constructor.prototype,W),ve=""+D[W];if(!D.hasOwnProperty(W)&&typeof de<"u"&&typeof de.get=="function"&&typeof de.set=="function"){var Ie=de.get,xe=de.set;return Object.defineProperty(D,W,{configurable:!0,get:function(){return Ie.call(this)},set:function(Je){ve=""+Je,xe.call(this,Je)}}),Object.defineProperty(D,W,{enumerable:de.enumerable}),{getValue:function(){return ve},setValue:function(Je){ve=""+Je},stopTracking:function(){D._valueTracker=null,delete D[W]}}}}function V(D){D._valueTracker||(D._valueTracker=p(D))}function R(D){if(!D)return!1;var W=D._valueTracker;if(!W)return!0;var de=W.getValue(),ve="";return D&&(ve=he(D)?D.checked?"true":"false":D.value),D=ve,D!==de?(W.setValue(D),!0):!1}function ce(D){if(D=D||(typeof document<"u"?document:void 0),typeof D>"u")return null;try{return D.activeElement||D.body}catch{return D.body}}function Re(D,W){var de=W.checked;return we({},W,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:de??D._wrapperState.initialChecked})}function ke(D,W){var de=W.defaultValue==null?"":W.defaultValue,ve=W.checked!=null?W.checked:W.defaultChecked;de=$e(W.value!=null?W.value:de),D._wrapperState={initialChecked:ve,initialValue:de,controlled:W.type==="checkbox"||W.type==="radio"?W.checked!=null:W.value!=null}}function qe(D,W){W=W.checked,W!=null&&j(D,"checked",W,!1)}function g(D,W){qe(D,W);var de=$e(W.value),ve=W.type;if(de!=null)ve==="number"?(de===0&&D.value===""||D.value!=de)&&(D.value=""+de):D.value!==""+de&&(D.value=""+de);else if(ve==="submit"||ve==="reset"){D.removeAttribute("value");return}W.hasOwnProperty("value")?ae(D,W.type,de):W.hasOwnProperty("defaultValue")&&ae(D,W.type,$e(W.defaultValue)),W.checked==null&&W.defaultChecked!=null&&(D.defaultChecked=!!W.defaultChecked)}function ee(D,W,de){if(W.hasOwnProperty("value")||W.hasOwnProperty("defaultValue")){var ve=W.type;if(!(ve!=="submit"&&ve!=="reset"||W.value!==void 0&&W.value!==null))return;W=""+D._wrapperState.initialValue,de||W===D.value||(D.value=W),D.defaultValue=W}de=D.name,de!==""&&(D.name=""),D.defaultChecked=!!D._wrapperState.initialChecked,de!==""&&(D.name=de)}function ae(D,W,de){(W!=="number"||ce(D.ownerDocument)!==D)&&(de==null?D.defaultValue=""+D._wrapperState.initialValue:D.defaultValue!==""+de&&(D.defaultValue=""+de))}var l=Array.isArray;function X(D,W,de,ve){if(D=D.options,W){W={};for(var Ie=0;Ie<de.length;Ie++)W["$"+de[Ie]]=!0;for(de=0;de<D.length;de++)Ie=W.hasOwnProperty("$"+D[de].value),D[de].selected!==Ie&&(D[de].selected=Ie),Ie&&ve&&(D[de].defaultSelected=!0)}else{for(de=""+$e(de),W=null,Ie=0;Ie<D.length;Ie++){if(D[Ie].value===de){D[Ie].selected=!0,ve&&(D[Ie].defaultSelected=!0);return}W!==null||D[Ie].disabled||(W=D[Ie])}W!==null&&(W.selected=!0)}}function oe(D,W){if(W.dangerouslySetInnerHTML!=null)throw Error(r(91));return we({},W,{value:void 0,defaultValue:void 0,children:""+D._wrapperState.initialValue})}function _e(D,W){var de=W.value;if(de==null){if(de=W.children,W=W.defaultValue,de!=null){if(W!=null)throw Error(r(92));if(l(de)){if(1<de.length)throw Error(r(93));de=de[0]}W=de}W==null&&(W=""),de=W}D._wrapperState={initialValue:$e(de)}}function He(D,W){var de=$e(W.value),ve=$e(W.defaultValue);de!=null&&(de=""+de,de!==D.value&&(D.value=de),W.defaultValue==null&&D.defaultValue!==de&&(D.defaultValue=de)),ve!=null&&(D.defaultValue=""+ve)}function nt(D){var W=D.textContent;W===D._wrapperState.initialValue&&W!==""&&W!==null&&(D.value=W)}function It(D){switch(D){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(D,W){return D==null||D==="http://www.w3.org/1999/xhtml"?It(W):D==="http://www.w3.org/2000/svg"&&W==="foreignObject"?"http://www.w3.org/1999/xhtml":D}var ir,_r=function(D){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(W,de,ve,Ie){MSApp.execUnsafeLocalFunction(function(){return D(W,de,ve,Ie)})}:D}(function(D,W){if(D.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in D)D.innerHTML=W;else{for(ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+W.valueOf().toString()+"</svg>",W=ir.firstChild;D.firstChild;)D.removeChild(D.firstChild);for(;W.firstChild;)D.appendChild(W.firstChild)}});function Rr(D,W){if(W){var de=D.firstChild;if(de&&de===D.lastChild&&de.nodeType===3){de.nodeValue=W;return}}D.textContent=W}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vr=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(D){Vr.forEach(function(W){W=W+D.charAt(0).toUpperCase()+D.substring(1),Hr[W]=Hr[D]})});function Tr(D,W,de){return W==null||typeof W=="boolean"||W===""?"":de||typeof W!="number"||W===0||Hr.hasOwnProperty(D)&&Hr[D]?(""+W).trim():W+"px"}function $t(D,W){D=D.style;for(var de in W)if(W.hasOwnProperty(de)){var ve=de.indexOf("--")===0,Ie=Tr(de,W[de],ve);de==="float"&&(de="cssFloat"),ve?D.setProperty(de,Ie):D[de]=Ie}}var qt=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kt(D,W){if(W){if(qt[D]&&(W.children!=null||W.dangerouslySetInnerHTML!=null))throw Error(r(137,D));if(W.dangerouslySetInnerHTML!=null){if(W.children!=null)throw Error(r(60));if(typeof W.dangerouslySetInnerHTML!="object"||!("__html"in W.dangerouslySetInnerHTML))throw Error(r(61))}if(W.style!=null&&typeof W.style!="object")throw Error(r(62))}}function nr(D,W){if(D.indexOf("-")===-1)return typeof W.is=="string";switch(D){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=null;function Er(D){return D=D.target||D.srcElement||window,D.correspondingUseElement&&(D=D.correspondingUseElement),D.nodeType===3?D.parentNode:D}var Mr=null,jr=null,xr=null;function kn(D){if(D=el(D)){if(typeof Mr!="function")throw Error(r(280));var W=D.stateNode;W&&(W=rl(W),Mr(D.stateNode,D.type,W))}}function gn(D){jr?xr?xr.push(D):xr=[D]:jr=D}function bn(){if(jr){var D=jr,W=xr;if(xr=jr=null,kn(D),W)for(D=0;D<W.length;D++)kn(W[D])}}function Tn(D,W){return D(W)}function yn(){}var Xr=!1;function Rn(D,W,de){if(Xr)return D(W,de);Xr=!0;try{return Tn(D,W,de)}finally{Xr=!1,(jr!==null||xr!==null)&&(yn(),bn())}}function yr(D,W){var de=D.stateNode;if(de===null)return null;var ve=rl(de);if(ve===null)return null;de=ve[W];e:switch(W){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ve=!ve.disabled)||(D=D.type,ve=!(D==="button"||D==="input"||D==="select"||D==="textarea")),D=!ve;break e;default:D=!1}if(D)return null;if(de&&typeof de!="function")throw Error(r(231,W,typeof de));return de}var Wr=!1;if(a)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Wr=!1}function vn(D,W,de,ve,Ie,xe,Je,rt,vt){var Wt=Array.prototype.slice.call(arguments,3);try{W.apply(de,Wt)}catch(or){this.onError(or)}}var Ur=!1,Zr=null,Fr=!1,tt=null,et={onError:function(D){Ur=!0,Zr=D}};function dt(D,W,de,ve,Ie,xe,Je,rt,vt){Ur=!1,Zr=null,vn.apply(et,arguments)}function Bt(D,W,de,ve,Ie,xe,Je,rt,vt){if(dt.apply(this,arguments),Ur){if(Ur){var Wt=Zr;Ur=!1,Zr=null}else throw Error(r(198));Fr||(Fr=!0,tt=Wt)}}function Ct(D){var W=D,de=D;if(D.alternate)for(;W.return;)W=W.return;else{D=W;do W=D,(W.flags&4098)!==0&&(de=W.return),D=W.return;while(D)}return W.tag===3?de:null}function pr(D){if(D.tag===13){var W=D.memoizedState;if(W===null&&(D=D.alternate,D!==null&&(W=D.memoizedState)),W!==null)return W.dehydrated}return null}function Sr(D){if(Ct(D)!==D)throw Error(r(188))}function un(D){var W=D.alternate;if(!W){if(W=Ct(D),W===null)throw Error(r(188));return W!==D?null:D}for(var de=D,ve=W;;){var Ie=de.return;if(Ie===null)break;var xe=Ie.alternate;if(xe===null){if(ve=Ie.return,ve!==null){de=ve;continue}break}if(Ie.child===xe.child){for(xe=Ie.child;xe;){if(xe===de)return Sr(Ie),D;if(xe===ve)return Sr(Ie),W;xe=xe.sibling}throw Error(r(188))}if(de.return!==ve.return)de=Ie,ve=xe;else{for(var Je=!1,rt=Ie.child;rt;){if(rt===de){Je=!0,de=Ie,ve=xe;break}if(rt===ve){Je=!0,ve=Ie,de=xe;break}rt=rt.sibling}if(!Je){for(rt=xe.child;rt;){if(rt===de){Je=!0,de=xe,ve=Ie;break}if(rt===ve){Je=!0,ve=xe,de=Ie;break}rt=rt.sibling}if(!Je)throw Error(r(189))}}if(de.alternate!==ve)throw Error(r(190))}if(de.tag!==3)throw Error(r(188));return de.stateNode.current===de?D:W}function Ln(D){return D=un(D),D!==null?In(D):null}function In(D){if(D.tag===5||D.tag===6)return D;for(D=D.child;D!==null;){var W=In(D);if(W!==null)return W;D=D.sibling}return null}var Un=e.unstable_scheduleCallback,Pr=e.unstable_cancelCallback,Ir=e.unstable_shouldYield,si=e.unstable_requestPaint,Dr=e.unstable_now,Bn=e.unstable_getCurrentPriorityLevel,ai=e.unstable_ImmediatePriority,xn=e.unstable_UserBlockingPriority,mn=e.unstable_NormalPriority,Wn=e.unstable_LowPriority,Yn=e.unstable_IdlePriority,Ai=null,Ue=null;function We(D){if(Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Ai,D,void 0,(D.current.flags&128)===128)}catch{}}var ze=Math.clz32?Math.clz32:er,yt=Math.log,tr=Math.LN2;function er(D){return D>>>=0,D===0?32:31-(yt(D)/tr|0)|0}var fr=64,sr=4194304;function Qr(D){switch(D&-D){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return D&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return D&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return D}}function Pn(D,W){var de=D.pendingLanes;if(de===0)return 0;var ve=0,Ie=D.suspendedLanes,xe=D.pingedLanes,Je=de&268435455;if(Je!==0){var rt=Je&~Ie;rt!==0?ve=Qr(rt):(xe&=Je,xe!==0&&(ve=Qr(xe)))}else Je=de&~Ie,Je!==0?ve=Qr(Je):xe!==0&&(ve=Qr(xe));if(ve===0)return 0;if(W!==0&&W!==ve&&(W&Ie)===0&&(Ie=ve&-ve,xe=W&-W,Ie>=xe||Ie===16&&(xe&4194240)!==0))return W;if((ve&4)!==0&&(ve|=de&16),W=D.entangledLanes,W!==0)for(D=D.entanglements,W&=ve;0<W;)de=31-ze(W),Ie=1<<de,ve|=D[de],W&=~Ie;return ve}function Qn(D,W){switch(D){case 1:case 2:case 4:return W+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return W+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sn(D,W){for(var de=D.suspendedLanes,ve=D.pingedLanes,Ie=D.expirationTimes,xe=D.pendingLanes;0<xe;){var Je=31-ze(xe),rt=1<<Je,vt=Ie[Je];vt===-1?((rt&de)===0||(rt&ve)!==0)&&(Ie[Je]=Qn(rt,W)):vt<=W&&(D.expiredLanes|=rt),xe&=~rt}}function dn(D){return D=D.pendingLanes&-1073741825,D!==0?D:D&1073741824?1073741824:0}function $n(){var D=fr;return fr<<=1,(fr&4194240)===0&&(fr=64),D}function On(D){for(var W=[],de=0;31>de;de++)W.push(D);return W}function qn(D,W,de){D.pendingLanes|=W,W!==536870912&&(D.suspendedLanes=0,D.pingedLanes=0),D=D.eventTimes,W=31-ze(W),D[W]=de}function vr(D,W){var de=D.pendingLanes&~W;D.pendingLanes=W,D.suspendedLanes=0,D.pingedLanes=0,D.expiredLanes&=W,D.mutableReadLanes&=W,D.entangledLanes&=W,W=D.entanglements;var ve=D.eventTimes;for(D=D.expirationTimes;0<de;){var Ie=31-ze(de),xe=1<<Ie;W[Ie]=0,ve[Ie]=-1,D[Ie]=-1,de&=~xe}}function Dn(D,W){var de=D.entangledLanes|=W;for(D=D.entanglements;de;){var ve=31-ze(de),Ie=1<<ve;Ie&W|D[ve]&W&&(D[ve]|=W),de&=~Ie}}var Lr=0;function mi(D){return D&=-D,1<D?4<D?(D&268435455)!==0?16:536870912:4:1}var bi,zi,$i,Ao,ki,ji=!1,yi=[],Cn=null,ni=null,Oi=null,Li=new Map,Xn=new Map,vi=[],Oo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lo(D,W){switch(D){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":Li.delete(W.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(W.pointerId)}}function Gn(D,W,de,ve,Ie,xe){return D===null||D.nativeEvent!==xe?(D={blockedOn:W,domEventName:de,eventSystemFlags:ve,nativeEvent:xe,targetContainers:[Ie]},W!==null&&(W=el(W),W!==null&&zi(W)),D):(D.eventSystemFlags|=ve,W=D.targetContainers,Ie!==null&&W.indexOf(Ie)===-1&&W.push(Ie),D)}function yo(D,W,de,ve,Ie){switch(W){case"focusin":return Cn=Gn(Cn,D,W,de,ve,Ie),!0;case"dragenter":return ni=Gn(ni,D,W,de,ve,Ie),!0;case"mouseover":return Oi=Gn(Oi,D,W,de,ve,Ie),!0;case"pointerover":var xe=Ie.pointerId;return Li.set(xe,Gn(Li.get(xe)||null,D,W,de,ve,Ie)),!0;case"gotpointercapture":return xe=Ie.pointerId,Xn.set(xe,Gn(Xn.get(xe)||null,D,W,de,ve,Ie)),!0}return!1}function wo(D){var W=Ea(D.target);if(W!==null){var de=Ct(W);if(de!==null){if(W=de.tag,W===13){if(W=pr(de),W!==null){D.blockedOn=W,ki(D.priority,function(){$i(de)});return}}else if(W===3&&de.stateNode.current.memoizedState.isDehydrated){D.blockedOn=de.tag===3?de.stateNode.containerInfo:null;return}}}D.blockedOn=null}function Zn(D){if(D.blockedOn!==null)return!1;for(var W=D.targetContainers;0<W.length;){var de=di(D.domEventName,D.eventSystemFlags,W[0],D.nativeEvent);if(de===null){de=D.nativeEvent;var ve=new de.constructor(de.type,de);dr=ve,de.target.dispatchEvent(ve),dr=null}else return W=el(de),W!==null&&zi(W),D.blockedOn=de,!1;W.shift()}return!0}function qi(D,W,de){Zn(D)&&de.delete(W)}function Ci(){ji=!1,Cn!==null&&Zn(Cn)&&(Cn=null),ni!==null&&Zn(ni)&&(ni=null),Oi!==null&&Zn(Oi)&&(Oi=null),Li.forEach(qi),Xn.forEach(qi)}function li(D,W){D.blockedOn===W&&(D.blockedOn=null,ji||(ji=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ci)))}function ui(D){function W(Ie){return li(Ie,D)}if(0<yi.length){li(yi[0],D);for(var de=1;de<yi.length;de++){var ve=yi[de];ve.blockedOn===D&&(ve.blockedOn=null)}}for(Cn!==null&&li(Cn,D),ni!==null&&li(ni,D),Oi!==null&&li(Oi,D),Li.forEach(W),Xn.forEach(W),de=0;de<vi.length;de++)ve=vi[de],ve.blockedOn===D&&(ve.blockedOn=null);for(;0<vi.length&&(de=vi[0],de.blockedOn===null);)wo(de),de.blockedOn===null&&vi.shift()}var Qe=K.ReactCurrentBatchConfig,Nt=!0;function Dt(D,W,de,ve){var Ie=Lr,xe=Qe.transition;Qe.transition=null;try{Lr=1,Hn(D,W,de,ve)}finally{Lr=Ie,Qe.transition=xe}}function Ar(D,W,de,ve){var Ie=Lr,xe=Qe.transition;Qe.transition=null;try{Lr=4,Hn(D,W,de,ve)}finally{Lr=Ie,Qe.transition=xe}}function Hn(D,W,de,ve){if(Nt){var Ie=di(D,W,de,ve);if(Ie===null)Hi(D,W,ve,Jn,de),lo(D,ve);else if(yo(Ie,D,W,de,ve))ve.stopPropagation();else if(lo(D,ve),W&4&&-1<Oo.indexOf(D)){for(;Ie!==null;){var xe=el(Ie);if(xe!==null&&bi(xe),xe=di(D,W,de,ve),xe===null&&Hi(D,W,ve,Jn,de),xe===Ie)break;Ie=xe}Ie!==null&&ve.stopPropagation()}else Hi(D,W,ve,null,de)}}var Jn=null;function di(D,W,de,ve){if(Jn=null,D=Er(ve),D=Ea(D),D!==null)if(W=Ct(D),W===null)D=null;else if(de=W.tag,de===13){if(D=pr(W),D!==null)return D;D=null}else if(de===3){if(W.stateNode.current.memoizedState.isDehydrated)return W.tag===3?W.stateNode.containerInfo:null;D=null}else W!==D&&(D=null);return Jn=D,null}function ei(D){switch(D){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bn()){case ai:return 1;case xn:return 4;case mn:case Wn:return 16;case Yn:return 536870912;default:return 16}default:return 16}}var n=null,b=null,T=null;function Ne(){if(T)return T;var D,W=b,de=W.length,ve,Ie="value"in n?n.value:n.textContent,xe=Ie.length;for(D=0;D<de&&W[D]===Ie[D];D++);var Je=de-D;for(ve=1;ve<=Je&&W[de-ve]===Ie[xe-ve];ve++);return T=Ie.slice(D,1<ve?1-ve:void 0)}function ur(D){var W=D.keyCode;return"charCode"in D?(D=D.charCode,D===0&&W===13&&(D=13)):D=W,D===10&&(D=13),32<=D||D===13?D:0}function Pi(){return!0}function Co(){return!1}function Fi(D){function W(de,ve,Ie,xe,Je){this._reactName=de,this._targetInst=Ie,this.type=ve,this.nativeEvent=xe,this.target=Je,this.currentTarget=null;for(var rt in D)D.hasOwnProperty(rt)&&(de=D[rt],this[rt]=de?de(xe):xe[rt]);return this.isDefaultPrevented=(xe.defaultPrevented!=null?xe.defaultPrevented:xe.returnValue===!1)?Pi:Co,this.isPropagationStopped=Co,this}return we(W.prototype,{preventDefault:function(){this.defaultPrevented=!0;var de=this.nativeEvent;de&&(de.preventDefault?de.preventDefault():typeof de.returnValue!="unknown"&&(de.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var de=this.nativeEvent;de&&(de.stopPropagation?de.stopPropagation():typeof de.cancelBubble!="unknown"&&(de.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),W}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(D){return D.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=Fi(uo),eo=we({},uo,{view:0,detail:0}),ql=Fi(eo),Xo,Mi,Uo,ds=we({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ge,button:0,buttons:0,relatedTarget:function(D){return D.relatedTarget===void 0?D.fromElement===D.srcElement?D.toElement:D.fromElement:D.relatedTarget},movementX:function(D){return"movementX"in D?D.movementX:(D!==Uo&&(Uo&&D.type==="mousemove"?(Xo=D.screenX-Uo.screenX,Mi=D.screenY-Uo.screenY):Mi=Xo=0,Uo=D),Xo)},movementY:function(D){return"movementY"in D?D.movementY:Mi}}),ps=Fi(ds),fs=we({},ds,{dataTransfer:0}),ha=Fi(fs),os=we({},eo,{relatedTarget:0}),Ns=Fi(os),Hs=we({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),Gi=Fi(Hs),ii=we({},uo,{clipboardData:function(D){return"clipboardData"in D?D.clipboardData:window.clipboardData}}),Ks=Fi(ii),Ws=we({},uo,{data:0}),xs=Fi(Ws),Vi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},to={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ga={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zo(D){var W=this.nativeEvent;return W.getModifierState?W.getModifierState(D):(D=ga[D])?!!W[D]:!1}function ge(){return Zo}var se=we({},eo,{key:function(D){if(D.key){var W=Vi[D.key]||D.key;if(W!=="Unidentified")return W}return D.type==="keypress"?(D=ur(D),D===13?"Enter":String.fromCharCode(D)):D.type==="keydown"||D.type==="keyup"?to[D.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ge,charCode:function(D){return D.type==="keypress"?ur(D):0},keyCode:function(D){return D.type==="keydown"||D.type==="keyup"?D.keyCode:0},which:function(D){return D.type==="keypress"?ur(D):D.type==="keydown"||D.type==="keyup"?D.keyCode:0}}),me=Fi(se),Oe=we({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Me=Fi(Oe),Xe=we({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ge}),pt=Fi(Xe),ar=we({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),pn=Fi(ar),Kr=we({},ds,{deltaX:function(D){return"deltaX"in D?D.deltaX:"wheelDeltaX"in D?-D.wheelDeltaX:0},deltaY:function(D){return"deltaY"in D?D.deltaY:"wheelDeltaY"in D?-D.wheelDeltaY:"wheelDelta"in D?-D.wheelDelta:0},deltaZ:0,deltaMode:0}),Jr=Fi(Kr),Nn=[9,13,27,32],ci=a&&"CompositionEvent"in window,Ti=null;a&&"documentMode"in document&&(Ti=document.documentMode);var Ni=a&&"TextEvent"in window&&!Ti,es=a&&(!ci||Ti&&8<Ti&&11>=Ti),ma=" ",kc=!1;function Kd(D,W){switch(D){case"keyup":return Nn.indexOf(W.keyCode)!==-1;case"keydown":return W.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wd(D){return D=D.detail,typeof D=="object"&&"data"in D?D.data:null}var Js=!1;function Jd(D,W){switch(D){case"compositionend":return Wd(W);case"keypress":return W.which!==32?null:(kc=!0,ma);case"textInput":return D=W.data,D===ma&&kc?null:D;default:return null}}function zs(D,W){if(Js)return D==="compositionend"||!ci&&Kd(D,W)?(D=Ne(),T=b=n=null,Js=!1,D):null;switch(D){case"paste":return null;case"keypress":if(!(W.ctrlKey||W.altKey||W.metaKey)||W.ctrlKey&&W.altKey){if(W.char&&1<W.char.length)return W.char;if(W.which)return String.fromCharCode(W.which)}return null;case"compositionend":return es&&W.locale!=="ko"?null:W.data;default:return null}}var Wp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jc(D){var W=D&&D.nodeName&&D.nodeName.toLowerCase();return W==="input"?!!Wp[D.type]:W==="textarea"}function zd(D,W,de,ve){gn(ve),W=Qa(W,"onChange"),0<W.length&&(de=new Ps("onChange","change",null,de,ve),D.push({event:de,listeners:W}))}var $a=null,Ga=null;function Jp(D){Kc(D,0)}function Nu(D){var W=tl(D);if(R(W))return D}function Yd(D,W){if(D==="change")return W}var xu=!1;if(a){var Du;if(a){var Fl="oninput"in document;if(!Fl){var ku=document.createElement("div");ku.setAttribute("oninput","return;"),Fl=typeof ku.oninput=="function"}Du=Fl}else Du=!1;xu=Du&&(!document.documentMode||9<document.documentMode)}function Qd(){$a&&($a.detachEvent("onpropertychange",Xd),Ga=$a=null)}function Xd(D){if(D.propertyName==="value"&&Nu(Ga)){var W=[];zd(W,Ga,D,Er(D)),Rn(Jp,W)}}function Lc(D,W,de){D==="focusin"?(Qd(),$a=W,Ga=de,$a.attachEvent("onpropertychange",Xd)):D==="focusout"&&Qd()}function zp(D){if(D==="selectionchange"||D==="keyup"||D==="keydown")return Nu(Ga)}function Yp(D,W){if(D==="click")return Nu(W)}function Qp(D,W){if(D==="input"||D==="change")return Nu(W)}function hs(D,W){return D===W&&(D!==0||1/D===1/W)||D!==D&&W!==W}var Po=typeof Object.is=="function"?Object.is:hs;function Ml(D,W){if(Po(D,W))return!0;if(typeof D!="object"||D===null||typeof W!="object"||W===null)return!1;var de=Object.keys(D),ve=Object.keys(W);if(de.length!==ve.length)return!1;for(ve=0;ve<de.length;ve++){var Ie=de[ve];if(!o.call(W,Ie)||!Po(D[Ie],W[Ie]))return!1}return!0}function Zd(D){for(;D&&D.firstChild;)D=D.firstChild;return D}function ep(D,W){var de=Zd(D);D=0;for(var ve;de;){if(de.nodeType===3){if(ve=D+de.textContent.length,D<=W&&ve>=W)return{node:de,offset:W-D};D=ve}e:{for(;de;){if(de.nextSibling){de=de.nextSibling;break e}de=de.parentNode}de=void 0}de=Zd(de)}}function tp(D,W){return D&&W?D===W?!0:D&&D.nodeType===3?!1:W&&W.nodeType===3?tp(D,W.parentNode):"contains"in D?D.contains(W):D.compareDocumentPosition?!!(D.compareDocumentPosition(W)&16):!1:!1}function ju(){for(var D=window,W=ce();W instanceof D.HTMLIFrameElement;){try{var de=typeof W.contentWindow.location.href=="string"}catch{de=!1}if(de)D=W.contentWindow;else break;W=ce(D.document)}return W}function Lu(D){var W=D&&D.nodeName&&D.nodeName.toLowerCase();return W&&(W==="input"&&(D.type==="text"||D.type==="search"||D.type==="tel"||D.type==="url"||D.type==="password")||W==="textarea"||D.contentEditable==="true")}function Xp(D){var W=ju(),de=D.focusedElem,ve=D.selectionRange;if(W!==de&&de&&de.ownerDocument&&tp(de.ownerDocument.documentElement,de)){if(ve!==null&&Lu(de)){if(W=ve.start,D=ve.end,D===void 0&&(D=W),"selectionStart"in de)de.selectionStart=W,de.selectionEnd=Math.min(D,de.value.length);else if(D=(W=de.ownerDocument||document)&&W.defaultView||window,D.getSelection){D=D.getSelection();var Ie=de.textContent.length,xe=Math.min(ve.start,Ie);ve=ve.end===void 0?xe:Math.min(ve.end,Ie),!D.extend&&xe>ve&&(Ie=ve,ve=xe,xe=Ie),Ie=ep(de,xe);var Je=ep(de,ve);Ie&&Je&&(D.rangeCount!==1||D.anchorNode!==Ie.node||D.anchorOffset!==Ie.offset||D.focusNode!==Je.node||D.focusOffset!==Je.offset)&&(W=W.createRange(),W.setStart(Ie.node,Ie.offset),D.removeAllRanges(),xe>ve?(D.addRange(W),D.extend(Je.node,Je.offset)):(W.setEnd(Je.node,Je.offset),D.addRange(W)))}}for(W=[],D=de;D=D.parentNode;)D.nodeType===1&&W.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<W.length;de++)D=W[de],D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}var Zp=a&&"documentMode"in document&&11>=document.documentMode,Ha=null,bt=null,Ka=null,qc=!1;function Wa(D,W,de){var ve=de.window===de?de.document:de.nodeType===9?de:de.ownerDocument;qc||Ha==null||Ha!==ce(ve)||(ve=Ha,"selectionStart"in ve&&Lu(ve)?ve={start:ve.selectionStart,end:ve.selectionEnd}:(ve=(ve.ownerDocument&&ve.ownerDocument.defaultView||window).getSelection(),ve={anchorNode:ve.anchorNode,anchorOffset:ve.anchorOffset,focusNode:ve.focusNode,focusOffset:ve.focusOffset}),Ka&&Ml(Ka,ve)||(Ka=ve,ve=Qa(bt,"onSelect"),0<ve.length&&(W=new Ps("onSelect","select",null,W,de),D.push({event:W,listeners:ve}),W.target=Ha)))}function qu(D,W){var de={};return de[D.toLowerCase()]=W.toLowerCase(),de["Webkit"+D]="webkit"+W,de["Moz"+D]="moz"+W,de}var Ja={animationend:qu("Animation","AnimationEnd"),animationiteration:qu("Animation","AnimationIteration"),animationstart:qu("Animation","AnimationStart"),transitionend:qu("Transition","TransitionEnd")},za={},Fc={};a&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Vl(D){if(za[D])return za[D];if(!Ja[D])return D;var W=Ja[D],de;for(de in W)if(W.hasOwnProperty(de)&&de in Fc)return za[D]=W[de];return D}var Mc=Vl("animationend"),Vc=Vl("animationiteration"),Uc=Vl("animationstart"),Bc=Vl("transitionend"),$c=new Map,Fu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(D,W){$c.set(D,W),m(W,[D])}for(var Mu=0;Mu<Fu.length;Mu++){var Gc=Fu[Mu],ef=Gc.toLowerCase(),rp=Gc[0].toUpperCase()+Gc.slice(1);Ds(ef,"on"+rp)}Ds(Mc,"onAnimationEnd"),Ds(Vc,"onAnimationIteration"),Ds(Uc,"onAnimationStart"),Ds("dblclick","onDoubleClick"),Ds("focusin","onFocus"),Ds("focusout","onBlur"),Ds(Bc,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function ya(D,W,de){var ve=D.type||"unknown-event";D.currentTarget=de,Bt(ve,W,void 0,D),D.currentTarget=null}function Kc(D,W){W=(W&4)!==0;for(var de=0;de<D.length;de++){var ve=D[de],Ie=ve.event;ve=ve.listeners;e:{var xe=void 0;if(W)for(var Je=ve.length-1;0<=Je;Je--){var rt=ve[Je],vt=rt.instance,Wt=rt.currentTarget;if(rt=rt.listener,vt!==xe&&Ie.isPropagationStopped())break e;ya(Ie,rt,Wt),xe=vt}else for(Je=0;Je<ve.length;Je++){if(rt=ve[Je],vt=rt.instance,Wt=rt.currentTarget,rt=rt.listener,vt!==xe&&Ie.isPropagationStopped())break e;ya(Ie,rt,Wt),xe=vt}}}if(Fr)throw D=tt,Fr=!1,tt=null,D}function _i(D,W){var de=W[Yc];de===void 0&&(de=W[Yc]=new Set);var ve=D+"__bubble";de.has(ve)||(Wc(W,D,2,!1),de.add(ve))}function va(D,W,de){var ve=0;W&&(ve|=4),Wc(de,D,ve,W)}var gs="_reactListening"+Math.random().toString(36).slice(2);function Ya(D){if(!D[gs]){D[gs]=!0,u.forEach(function(de){de!=="selectionchange"&&(Hc.has(de)||va(de,!1,D),va(de,!0,D))});var W=D.nodeType===9?D:D.ownerDocument;W===null||W[gs]||(W[gs]=!0,va("selectionchange",!1,W))}}function Wc(D,W,de,ve){switch(ei(W)){case 1:var Ie=Dt;break;case 4:Ie=Ar;break;default:Ie=Hn}de=Ie.bind(null,W,de,D),Ie=void 0,!Wr||W!=="touchstart"&&W!=="touchmove"&&W!=="wheel"||(Ie=!0),ve?Ie!==void 0?D.addEventListener(W,de,{capture:!0,passive:Ie}):D.addEventListener(W,de,!0):Ie!==void 0?D.addEventListener(W,de,{passive:Ie}):D.addEventListener(W,de,!1)}function Hi(D,W,de,ve,Ie){var xe=ve;if((W&1)===0&&(W&2)===0&&ve!==null)e:for(;;){if(ve===null)return;var Je=ve.tag;if(Je===3||Je===4){var rt=ve.stateNode.containerInfo;if(rt===Ie||rt.nodeType===8&&rt.parentNode===Ie)break;if(Je===4)for(Je=ve.return;Je!==null;){var vt=Je.tag;if((vt===3||vt===4)&&(vt=Je.stateNode.containerInfo,vt===Ie||vt.nodeType===8&&vt.parentNode===Ie))return;Je=Je.return}for(;rt!==null;){if(Je=Ea(rt),Je===null)return;if(vt=Je.tag,vt===5||vt===6){ve=xe=Je;continue e}rt=rt.parentNode}}ve=ve.return}Rn(function(){var Wt=xe,or=Er(de),hr=[];e:{var lr=$c.get(D);if(lr!==void 0){var Or=Ps,Nr=D;switch(D){case"keypress":if(ur(de)===0)break e;case"keydown":case"keyup":Or=me;break;case"focusin":Nr="focus",Or=Ns;break;case"focusout":Nr="blur",Or=Ns;break;case"beforeblur":case"afterblur":Or=Ns;break;case"click":if(de.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Or=ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Or=ha;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Or=pt;break;case Mc:case Vc:case Uc:Or=Gi;break;case Bc:Or=pn;break;case"scroll":Or=ql;break;case"wheel":Or=Jr;break;case"copy":case"cut":case"paste":Or=Ks;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Or=Me}var kr=(W&4)!==0,Bi=!kr&&D==="scroll",kt=kr?lr!==null?lr+"Capture":null:lr;kr=[];for(var St=Wt,Ut;St!==null;){Ut=St;var mr=Ut.stateNode;if(Ut.tag===5&&mr!==null&&(Ut=mr,kt!==null&&(mr=yr(St,kt),mr!=null&&kr.push(ks(St,mr,Ut)))),Bi)break;St=St.return}0<kr.length&&(lr=new Or(lr,Nr,null,de,or),hr.push({event:lr,listeners:kr}))}}if((W&7)===0){e:{if(lr=D==="mouseover"||D==="pointerover",Or=D==="mouseout"||D==="pointerout",lr&&de!==dr&&(Nr=de.relatedTarget||de.fromElement)&&(Ea(Nr)||Nr[No]))break e;if((Or||lr)&&(lr=or.window===or?or:(lr=or.ownerDocument)?lr.defaultView||lr.parentWindow:window,Or?(Nr=de.relatedTarget||de.toElement,Or=Wt,Nr=Nr?Ea(Nr):null,Nr!==null&&(Bi=Ct(Nr),Nr!==Bi||Nr.tag!==5&&Nr.tag!==6)&&(Nr=null)):(Or=null,Nr=Wt),Or!==Nr)){if(kr=ps,mr="onMouseLeave",kt="onMouseEnter",St="mouse",(D==="pointerout"||D==="pointerover")&&(kr=Me,mr="onPointerLeave",kt="onPointerEnter",St="pointer"),Bi=Or==null?lr:tl(Or),Ut=Nr==null?lr:tl(Nr),lr=new kr(mr,St+"leave",Or,de,or),lr.target=Bi,lr.relatedTarget=Ut,mr=null,Ea(or)===Wt&&(kr=new kr(kt,St+"enter",Nr,de,or),kr.target=Ut,kr.relatedTarget=Bi,mr=kr),Bi=mr,Or&&Nr)t:{for(kr=Or,kt=Nr,St=0,Ut=kr;Ut;Ut=Ro(Ut))St++;for(Ut=0,mr=kt;mr;mr=Ro(mr))Ut++;for(;0<St-Ut;)kr=Ro(kr),St--;for(;0<Ut-St;)kt=Ro(kt),Ut--;for(;St--;){if(kr===kt||kt!==null&&kr===kt.alternate)break t;kr=Ro(kr),kt=Ro(kt)}kr=null}else kr=null;Or!==null&&co(hr,lr,Or,kr,!1),Nr!==null&&Bi!==null&&co(hr,Bi,Nr,kr,!0)}}e:{if(lr=Wt?tl(Wt):window,Or=lr.nodeName&&lr.nodeName.toLowerCase(),Or==="select"||Or==="input"&&lr.type==="file")var qr=Yd;else if(jc(lr))if(xu)qr=Qp;else{qr=zp;var Gr=Lc}else(Or=lr.nodeName)&&Or.toLowerCase()==="input"&&(lr.type==="checkbox"||lr.type==="radio")&&(qr=Yp);if(qr&&(qr=qr(D,Wt))){zd(hr,qr,de,or);break e}Gr&&Gr(D,lr,Wt),D==="focusout"&&(Gr=lr._wrapperState)&&Gr.controlled&&lr.type==="number"&&ae(lr,"number",lr.value)}switch(Gr=Wt?tl(Wt):window,D){case"focusin":(jc(Gr)||Gr.contentEditable==="true")&&(Ha=Gr,bt=Wt,Ka=null);break;case"focusout":Ka=bt=Ha=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,Wa(hr,de,or);break;case"selectionchange":if(Zp)break;case"keydown":case"keyup":Wa(hr,de,or)}var Br;if(ci)e:{switch(D){case"compositionstart":var fn="onCompositionStart";break e;case"compositionend":fn="onCompositionEnd";break e;case"compositionupdate":fn="onCompositionUpdate";break e}fn=void 0}else Js?Kd(D,de)&&(fn="onCompositionEnd"):D==="keydown"&&de.keyCode===229&&(fn="onCompositionStart");fn&&(es&&de.locale!=="ko"&&(Js||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&Js&&(Br=Ne()):(n=or,b="value"in n?n.value:n.textContent,Js=!0)),Gr=Qa(Wt,fn),0<Gr.length&&(fn=new xs(fn,D,null,de,or),hr.push({event:fn,listeners:Gr}),Br?fn.data=Br:(Br=Wd(de),Br!==null&&(fn.data=Br)))),(Br=Ni?Jd(D,de):zs(D,de))&&(Wt=Qa(Wt,"onBeforeInput"),0<Wt.length&&(or=new xs("onBeforeInput","beforeinput",null,de,or),hr.push({event:or,listeners:Wt}),or.data=Br))}Kc(hr,W)})}function ks(D,W,de){return{instance:D,listener:W,currentTarget:de}}function Qa(D,W){for(var de=W+"Capture",ve=[];D!==null;){var Ie=D,xe=Ie.stateNode;Ie.tag===5&&xe!==null&&(Ie=xe,xe=yr(D,de),xe!=null&&ve.unshift(ks(D,xe,Ie)),xe=yr(D,W),xe!=null&&ve.push(ks(D,xe,Ie))),D=D.return}return ve}function Ro(D){if(D===null)return null;do D=D.return;while(D&&D.tag!==5);return D||null}function co(D,W,de,ve,Ie){for(var xe=W._reactName,Je=[];de!==null&&de!==ve;){var rt=de,vt=rt.alternate,Wt=rt.stateNode;if(vt!==null&&vt===ve)break;rt.tag===5&&Wt!==null&&(rt=Wt,Ie?(vt=yr(de,xe),vt!=null&&Je.unshift(ks(de,vt,rt))):Ie||(vt=yr(de,xe),vt!=null&&Je.push(ks(de,vt,rt)))),de=de.return}Je.length!==0&&D.push({event:W,listeners:Je})}var tf=/\r\n?/g,Vu=/\u0000|\uFFFD/g;function np(D){return(typeof D=="string"?D:""+D).replace(tf,`
`).replace(Vu,"")}function as(D,W,de){if(W=np(W),np(D)!==W&&de)throw Error(r(425))}function ts(){}var js=null,Jc=null;function _a(D,W){return D==="textarea"||D==="noscript"||typeof W.children=="string"||typeof W.children=="number"||typeof W.dangerouslySetInnerHTML=="object"&&W.dangerouslySetInnerHTML!==null&&W.dangerouslySetInnerHTML.__html!=null}var Ul=typeof setTimeout=="function"?setTimeout:void 0,ip=typeof clearTimeout=="function"?clearTimeout:void 0,Yi=typeof Promise=="function"?Promise:void 0,op=typeof queueMicrotask=="function"?queueMicrotask:typeof Yi<"u"?function(D){return Yi.resolve(null).then(D).catch(rf)}:Ul;function rf(D){setTimeout(function(){throw D})}function zc(D,W){var de=W,ve=0;do{var Ie=de.nextSibling;if(D.removeChild(de),Ie&&Ie.nodeType===8)if(de=Ie.data,de==="/$"){if(ve===0){D.removeChild(Ie),ui(W);return}ve--}else de!=="$"&&de!=="$?"&&de!=="$!"||ve++;de=Ie}while(de);ui(W)}function Ys(D){for(;D!=null;D=D.nextSibling){var W=D.nodeType;if(W===1||W===3)break;if(W===8){if(W=D.data,W==="$"||W==="$!"||W==="$?")break;if(W==="/$")return null}}return D}function sp(D){D=D.previousSibling;for(var W=0;D;){if(D.nodeType===8){var de=D.data;if(de==="$"||de==="$!"||de==="$?"){if(W===0)return D;W--}else de==="/$"&&W++}D=D.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),ys="__reactFiber$"+Xa,Za="__reactProps$"+Xa,No="__reactContainer$"+Xa,Yc="__reactEvents$"+Xa,Bl="__reactListeners$"+Xa,ap="__reactHandles$"+Xa;function Ea(D){var W=D[ys];if(W)return W;for(var de=D.parentNode;de;){if(W=de[No]||de[ys]){if(de=W.alternate,W.child!==null||de!==null&&de.child!==null)for(D=sp(D);D!==null;){if(de=D[ys])return de;D=sp(D)}return W}D=de,de=D.parentNode}return null}function el(D){return D=D[ys]||D[No],!D||D.tag!==5&&D.tag!==6&&D.tag!==13&&D.tag!==3?null:D}function tl(D){if(D.tag===5||D.tag===6)return D.stateNode;throw Error(r(33))}function rl(D){return D[Za]||null}var $l=[],Qs=-1;function Xs(D){return{current:D}}function pi(D){0>Qs||(D.current=$l[Qs],$l[Qs]=null,Qs--)}function fi(D,W){Qs++,$l[Qs]=D.current,D.current=W}var Zs={},vo=Xs(Zs),ro=Xs(!1),ba=Zs;function po(D,W){var de=D.type.contextTypes;if(!de)return Zs;var ve=D.stateNode;if(ve&&ve.__reactInternalMemoizedUnmaskedChildContext===W)return ve.__reactInternalMemoizedMaskedChildContext;var Ie={},xe;for(xe in de)Ie[xe]=W[xe];return ve&&(D=D.stateNode,D.__reactInternalMemoizedUnmaskedChildContext=W,D.__reactInternalMemoizedMaskedChildContext=Ie),Ie}function xo(D){return D=D.childContextTypes,D!=null}function Uu(){pi(ro),pi(vo)}function Ta(D,W,de){if(vo.current!==Zs)throw Error(r(168));fi(vo,W),fi(ro,de)}function lp(D,W,de){var ve=D.stateNode;if(W=W.childContextTypes,typeof ve.getChildContext!="function")return de;ve=ve.getChildContext();for(var Ie in ve)if(!(Ie in W))throw Error(r(108,Be(D)||"Unknown",Ie));return we({},de,ve)}function Gl(D){return D=(D=D.stateNode)&&D.__reactInternalMemoizedMergedChildContext||Zs,ba=vo.current,fi(vo,D),fi(ro,ro.current),!0}function up(D,W,de){var ve=D.stateNode;if(!ve)throw Error(r(169));de?(D=lp(D,W,ba),ve.__reactInternalMemoizedMergedChildContext=D,pi(ro),pi(vo),fi(vo,D)):pi(ro),fi(ro,de)}var Ls=null,Bu=!1,$u=!1;function Qc(D){Ls===null?Ls=[D]:Ls.push(D)}function cp(D){Bu=!0,Qc(D)}function ea(){if(!$u&&Ls!==null){$u=!0;var D=0,W=Lr;try{var de=Ls;for(Lr=1;D<de.length;D++){var ve=de[D];do ve=ve(!0);while(ve!==null)}Ls=null,Bu=!1}catch(Ie){throw Ls!==null&&(Ls=Ls.slice(D+1)),Un(ai,ea),Ie}finally{Lr=W,$u=!1}}return null}var nl=[],il=0,Gu=null,Hu=0,Bo=[],$o=0,Sa=null,qs=1,Fs="";function Do(D,W){nl[il++]=Hu,nl[il++]=Gu,Gu=D,Hu=W}function Ku(D,W,de){Bo[$o++]=qs,Bo[$o++]=Fs,Bo[$o++]=Sa,Sa=D;var ve=qs;D=Fs;var Ie=32-ze(ve)-1;ve&=~(1<<Ie),de+=1;var xe=32-ze(W)+Ie;if(30<xe){var Je=Ie-Ie%5;xe=(ve&(1<<Je)-1).toString(32),ve>>=Je,Ie-=Je,qs=1<<32-ze(W)+Ie|de<<Ie|ve,Fs=xe+D}else qs=1<<xe|de<<Ie|ve,Fs=D}function ta(D){D.return!==null&&(Do(D,1),Ku(D,1,0))}function Xc(D){for(;D===Gu;)Gu=nl[--il],nl[il]=null,Hu=nl[--il],nl[il]=null;for(;D===Sa;)Sa=Bo[--$o],Bo[$o]=null,Fs=Bo[--$o],Bo[$o]=null,qs=Bo[--$o],Bo[$o]=null}var Go=null,Ho=null,wi=!1,Ko=null;function Zc(D,W){var de=Mo(5,null,null,0);de.elementType="DELETED",de.stateNode=W,de.return=D,W=D.deletions,W===null?(D.deletions=[de],D.flags|=16):W.push(de)}function dp(D,W){switch(D.tag){case 5:var de=D.type;return W=W.nodeType!==1||de.toLowerCase()!==W.nodeName.toLowerCase()?null:W,W!==null?(D.stateNode=W,Go=D,Ho=Ys(W.firstChild),!0):!1;case 6:return W=D.pendingProps===""||W.nodeType!==3?null:W,W!==null?(D.stateNode=W,Go=D,Ho=null,!0):!1;case 13:return W=W.nodeType!==8?null:W,W!==null?(de=Sa!==null?{id:qs,overflow:Fs}:null,D.memoizedState={dehydrated:W,treeContext:de,retryLane:1073741824},de=Mo(18,null,null,0),de.stateNode=W,de.return=D,D.child=de,Go=D,Ho=null,!0):!1;default:return!1}}function Wu(D){return(D.mode&1)!==0&&(D.flags&128)===0}function ed(D){if(wi){var W=Ho;if(W){var de=W;if(!dp(D,W)){if(Wu(D))throw Error(r(418));W=Ys(de.nextSibling);var ve=Go;W&&dp(D,W)?Zc(ve,de):(D.flags=D.flags&-4097|2,wi=!1,Go=D)}}else{if(Wu(D))throw Error(r(418));D.flags=D.flags&-4097|2,wi=!1,Go=D}}}function td(D){for(D=D.return;D!==null&&D.tag!==5&&D.tag!==3&&D.tag!==13;)D=D.return;Go=D}function Hl(D){if(D!==Go)return!1;if(!wi)return td(D),wi=!0,!1;var W;if((W=D.tag!==3)&&!(W=D.tag!==5)&&(W=D.type,W=W!=="head"&&W!=="body"&&!_a(D.type,D.memoizedProps)),W&&(W=Ho)){if(Wu(D))throw rd(),Error(r(418));for(;W;)Zc(D,W),W=Ys(W.nextSibling)}if(td(D),D.tag===13){if(D=D.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));e:{for(D=D.nextSibling,W=0;D;){if(D.nodeType===8){var de=D.data;if(de==="/$"){if(W===0){Ho=Ys(D.nextSibling);break e}W--}else de!=="$"&&de!=="$!"&&de!=="$?"||W++}D=D.nextSibling}Ho=null}}else Ho=Go?Ys(D.stateNode.nextSibling):null;return!0}function rd(){for(var D=Ho;D;)D=Ys(D.nextSibling)}function Aa(){Ho=Go=null,wi=!1}function nd(D){Ko===null?Ko=[D]:Ko.push(D)}var nf=K.ReactCurrentBatchConfig;function ol(D,W,de){if(D=de.ref,D!==null&&typeof D!="function"&&typeof D!="object"){if(de._owner){if(de=de._owner,de){if(de.tag!==1)throw Error(r(309));var ve=de.stateNode}if(!ve)throw Error(r(147,D));var Ie=ve,xe=""+D;return W!==null&&W.ref!==null&&typeof W.ref=="function"&&W.ref._stringRef===xe?W.ref:(W=function(Je){var rt=Ie.refs;Je===null?delete rt[xe]:rt[xe]=Je},W._stringRef=xe,W)}if(typeof D!="string")throw Error(r(284));if(!de._owner)throw Error(r(290,D))}return D}function Kl(D,W){throw D=Object.prototype.toString.call(W),Error(r(31,D==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":D))}function Wl(D){var W=D._init;return W(D._payload)}function id(D){function W(kt,St){if(D){var Ut=kt.deletions;Ut===null?(kt.deletions=[St],kt.flags|=16):Ut.push(St)}}function de(kt,St){if(!D)return null;for(;St!==null;)W(kt,St),St=St.sibling;return null}function ve(kt,St){for(kt=new Map;St!==null;)St.key!==null?kt.set(St.key,St):kt.set(St.index,St),St=St.sibling;return kt}function Ie(kt,St){return kt=$s(kt,St),kt.index=0,kt.sibling=null,kt}function xe(kt,St,Ut){return kt.index=Ut,D?(Ut=kt.alternate,Ut!==null?(Ut=Ut.index,Ut<St?(kt.flags|=2,St):Ut):(kt.flags|=2,St)):(kt.flags|=1048576,St)}function Je(kt){return D&&kt.alternate===null&&(kt.flags|=2),kt}function rt(kt,St,Ut,mr){return St===null||St.tag!==6?(St=Au(Ut,kt.mode,mr),St.return=kt,St):(St=Ie(St,Ut),St.return=kt,St)}function vt(kt,St,Ut,mr){var qr=Ut.type;return qr===U?or(kt,St,Ut.props.children,mr,Ut.key):St!==null&&(St.elementType===qr||typeof qr=="object"&&qr!==null&&qr.$$typeof===Te&&Wl(qr)===St.type)?(mr=Ie(St,Ut.props),mr.ref=ol(kt,St,Ut),mr.return=kt,mr):(mr=Tc(Ut.type,Ut.key,Ut.props,null,kt.mode,mr),mr.ref=ol(kt,St,Ut),mr.return=kt,mr)}function Wt(kt,St,Ut,mr){return St===null||St.tag!==4||St.stateNode.containerInfo!==Ut.containerInfo||St.stateNode.implementation!==Ut.implementation?(St=Ou(Ut,kt.mode,mr),St.return=kt,St):(St=Ie(St,Ut.children||[]),St.return=kt,St)}function or(kt,St,Ut,mr,qr){return St===null||St.tag!==7?(St=Ma(Ut,kt.mode,mr,qr),St.return=kt,St):(St=Ie(St,Ut),St.return=kt,St)}function hr(kt,St,Ut){if(typeof St=="string"&&St!==""||typeof St=="number")return St=Au(""+St,kt.mode,Ut),St.return=kt,St;if(typeof St=="object"&&St!==null){switch(St.$$typeof){case J:return Ut=Tc(St.type,St.key,St.props,null,kt.mode,Ut),Ut.ref=ol(kt,null,St),Ut.return=kt,Ut;case H:return St=Ou(St,kt.mode,Ut),St.return=kt,St;case Te:var mr=St._init;return hr(kt,mr(St._payload),Ut)}if(l(St)||be(St))return St=Ma(St,kt.mode,Ut,null),St.return=kt,St;Kl(kt,St)}return null}function lr(kt,St,Ut,mr){var qr=St!==null?St.key:null;if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number")return qr!==null?null:rt(kt,St,""+Ut,mr);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case J:return Ut.key===qr?vt(kt,St,Ut,mr):null;case H:return Ut.key===qr?Wt(kt,St,Ut,mr):null;case Te:return qr=Ut._init,lr(kt,St,qr(Ut._payload),mr)}if(l(Ut)||be(Ut))return qr!==null?null:or(kt,St,Ut,mr,null);Kl(kt,Ut)}return null}function Or(kt,St,Ut,mr,qr){if(typeof mr=="string"&&mr!==""||typeof mr=="number")return kt=kt.get(Ut)||null,rt(St,kt,""+mr,qr);if(typeof mr=="object"&&mr!==null){switch(mr.$$typeof){case J:return kt=kt.get(mr.key===null?Ut:mr.key)||null,vt(St,kt,mr,qr);case H:return kt=kt.get(mr.key===null?Ut:mr.key)||null,Wt(St,kt,mr,qr);case Te:var Gr=mr._init;return Or(kt,St,Ut,Gr(mr._payload),qr)}if(l(mr)||be(mr))return kt=kt.get(Ut)||null,or(St,kt,mr,qr,null);Kl(St,mr)}return null}function Nr(kt,St,Ut,mr){for(var qr=null,Gr=null,Br=St,fn=St=0,Ji=null;Br!==null&&fn<Ut.length;fn++){Br.index>fn?(Ji=Br,Br=null):Ji=Br.sibling;var zn=lr(kt,Br,Ut[fn],mr);if(zn===null){Br===null&&(Br=Ji);break}D&&Br&&zn.alternate===null&&W(kt,Br),St=xe(zn,St,fn),Gr===null?qr=zn:Gr.sibling=zn,Gr=zn,Br=Ji}if(fn===Ut.length)return de(kt,Br),wi&&Do(kt,fn),qr;if(Br===null){for(;fn<Ut.length;fn++)Br=hr(kt,Ut[fn],mr),Br!==null&&(St=xe(Br,St,fn),Gr===null?qr=Br:Gr.sibling=Br,Gr=Br);return wi&&Do(kt,fn),qr}for(Br=ve(kt,Br);fn<Ut.length;fn++)Ji=Or(Br,kt,fn,Ut[fn],mr),Ji!==null&&(D&&Ji.alternate!==null&&Br.delete(Ji.key===null?fn:Ji.key),St=xe(Ji,St,fn),Gr===null?qr=Ji:Gr.sibling=Ji,Gr=Ji);return D&&Br.forEach(function(fa){return W(kt,fa)}),wi&&Do(kt,fn),qr}function kr(kt,St,Ut,mr){var qr=be(Ut);if(typeof qr!="function")throw Error(r(150));if(Ut=qr.call(Ut),Ut==null)throw Error(r(151));for(var Gr=qr=null,Br=St,fn=St=0,Ji=null,zn=Ut.next();Br!==null&&!zn.done;fn++,zn=Ut.next()){Br.index>fn?(Ji=Br,Br=null):Ji=Br.sibling;var fa=lr(kt,Br,zn.value,mr);if(fa===null){Br===null&&(Br=Ji);break}D&&Br&&fa.alternate===null&&W(kt,Br),St=xe(fa,St,fn),Gr===null?qr=fa:Gr.sibling=fa,Gr=fa,Br=Ji}if(zn.done)return de(kt,Br),wi&&Do(kt,fn),qr;if(Br===null){for(;!zn.done;fn++,zn=Ut.next())zn=hr(kt,zn.value,mr),zn!==null&&(St=xe(zn,St,fn),Gr===null?qr=zn:Gr.sibling=zn,Gr=zn);return wi&&Do(kt,fn),qr}for(Br=ve(kt,Br);!zn.done;fn++,zn=Ut.next())zn=Or(Br,kt,fn,zn.value,mr),zn!==null&&(D&&zn.alternate!==null&&Br.delete(zn.key===null?fn:zn.key),St=xe(zn,St,fn),Gr===null?qr=zn:Gr.sibling=zn,Gr=zn);return D&&Br.forEach(function(mf){return W(kt,mf)}),wi&&Do(kt,fn),qr}function Bi(kt,St,Ut,mr){if(typeof Ut=="object"&&Ut!==null&&Ut.type===U&&Ut.key===null&&(Ut=Ut.props.children),typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case J:e:{for(var qr=Ut.key,Gr=St;Gr!==null;){if(Gr.key===qr){if(qr=Ut.type,qr===U){if(Gr.tag===7){de(kt,Gr.sibling),St=Ie(Gr,Ut.props.children),St.return=kt,kt=St;break e}}else if(Gr.elementType===qr||typeof qr=="object"&&qr!==null&&qr.$$typeof===Te&&Wl(qr)===Gr.type){de(kt,Gr.sibling),St=Ie(Gr,Ut.props),St.ref=ol(kt,Gr,Ut),St.return=kt,kt=St;break e}de(kt,Gr);break}else W(kt,Gr);Gr=Gr.sibling}Ut.type===U?(St=Ma(Ut.props.children,kt.mode,mr,Ut.key),St.return=kt,kt=St):(mr=Tc(Ut.type,Ut.key,Ut.props,null,kt.mode,mr),mr.ref=ol(kt,St,Ut),mr.return=kt,kt=mr)}return Je(kt);case H:e:{for(Gr=Ut.key;St!==null;){if(St.key===Gr)if(St.tag===4&&St.stateNode.containerInfo===Ut.containerInfo&&St.stateNode.implementation===Ut.implementation){de(kt,St.sibling),St=Ie(St,Ut.children||[]),St.return=kt,kt=St;break e}else{de(kt,St);break}else W(kt,St);St=St.sibling}St=Ou(Ut,kt.mode,mr),St.return=kt,kt=St}return Je(kt);case Te:return Gr=Ut._init,Bi(kt,St,Gr(Ut._payload),mr)}if(l(Ut))return Nr(kt,St,Ut,mr);if(be(Ut))return kr(kt,St,Ut,mr);Kl(kt,Ut)}return typeof Ut=="string"&&Ut!==""||typeof Ut=="number"?(Ut=""+Ut,St!==null&&St.tag===6?(de(kt,St.sibling),St=Ie(St,Ut),St.return=kt,kt=St):(de(kt,St),St=Au(Ut,kt.mode,mr),St.return=kt,kt=St),Je(kt)):de(kt,St)}return Bi}var Oa=id(!0),ti=id(!1),Fn=Xs(null),wn=null,Wo=null,oi=null;function Jl(){oi=Wo=wn=null}function od(D){var W=Fn.current;pi(Fn),D._currentValue=W}function wa(D,W,de){for(;D!==null;){var ve=D.alternate;if((D.childLanes&W)!==W?(D.childLanes|=W,ve!==null&&(ve.childLanes|=W)):ve!==null&&(ve.childLanes&W)!==W&&(ve.childLanes|=W),D===de)break;D=D.return}}function Ra(D,W){wn=D,oi=Wo=null,D=D.dependencies,D!==null&&D.firstContext!==null&&((D.lanes&W)!==0&&(Xi=!0),D.firstContext=null)}function Mn(D){var W=D._currentValue;if(oi!==D)if(D={context:D,memoizedValue:W,next:null},Wo===null){if(wn===null)throw Error(r(308));Wo=D,wn.dependencies={lanes:0,firstContext:D}}else Wo=Wo.next=D;return W}var En=null;function fo(D){En===null?En=[D]:En.push(D)}function pp(D,W,de,ve){var Ie=W.interleaved;return Ie===null?(de.next=de,fo(W)):(de.next=Ie.next,Ie.next=de),W.interleaved=de,ls(D,ve)}function ls(D,W){D.lanes|=W;var de=D.alternate;for(de!==null&&(de.lanes|=W),de=D,D=D.return;D!==null;)D.childLanes|=W,de=D.alternate,de!==null&&(de.childLanes|=W),de=D,D=D.return;return de.tag===3?de.stateNode:null}var Qi=!1;function sd(D){D.updateQueue={baseState:D.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fp(D,W){D=D.updateQueue,W.updateQueue===D&&(W.updateQueue={baseState:D.baseState,firstBaseUpdate:D.firstBaseUpdate,lastBaseUpdate:D.lastBaseUpdate,shared:D.shared,effects:D.effects})}function Ms(D,W){return{eventTime:D,lane:W,tag:0,payload:null,callback:null,next:null}}function Vs(D,W,de){var ve=D.updateQueue;if(ve===null)return null;if(ve=ve.shared,(Kn&2)!==0){var Ie=ve.pending;return Ie===null?W.next=W:(W.next=Ie.next,Ie.next=W),ve.pending=W,ls(D,de)}return Ie=ve.interleaved,Ie===null?(W.next=W,fo(ve)):(W.next=Ie.next,Ie.next=W),ve.interleaved=W,ls(D,de)}function vs(D,W,de){if(W=W.updateQueue,W!==null&&(W=W.shared,(de&4194240)!==0)){var ve=W.lanes;ve&=D.pendingLanes,de|=ve,W.lanes=de,Dn(D,de)}}function Ju(D,W){var de=D.updateQueue,ve=D.alternate;if(ve!==null&&(ve=ve.updateQueue,de===ve)){var Ie=null,xe=null;if(de=de.firstBaseUpdate,de!==null){do{var Je={eventTime:de.eventTime,lane:de.lane,tag:de.tag,payload:de.payload,callback:de.callback,next:null};xe===null?Ie=xe=Je:xe=xe.next=Je,de=de.next}while(de!==null);xe===null?Ie=xe=W:xe=xe.next=W}else Ie=xe=W;de={baseState:ve.baseState,firstBaseUpdate:Ie,lastBaseUpdate:xe,shared:ve.shared,effects:ve.effects},D.updateQueue=de;return}D=de.lastBaseUpdate,D===null?de.firstBaseUpdate=W:D.next=W,de.lastBaseUpdate=W}function ra(D,W,de,ve){var Ie=D.updateQueue;Qi=!1;var xe=Ie.firstBaseUpdate,Je=Ie.lastBaseUpdate,rt=Ie.shared.pending;if(rt!==null){Ie.shared.pending=null;var vt=rt,Wt=vt.next;vt.next=null,Je===null?xe=Wt:Je.next=Wt,Je=vt;var or=D.alternate;or!==null&&(or=or.updateQueue,rt=or.lastBaseUpdate,rt!==Je&&(rt===null?or.firstBaseUpdate=Wt:rt.next=Wt,or.lastBaseUpdate=vt))}if(xe!==null){var hr=Ie.baseState;Je=0,or=Wt=vt=null,rt=xe;do{var lr=rt.lane,Or=rt.eventTime;if((ve&lr)===lr){or!==null&&(or=or.next={eventTime:Or,lane:0,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null});e:{var Nr=D,kr=rt;switch(lr=W,Or=de,kr.tag){case 1:if(Nr=kr.payload,typeof Nr=="function"){hr=Nr.call(Or,hr,lr);break e}hr=Nr;break e;case 3:Nr.flags=Nr.flags&-65537|128;case 0:if(Nr=kr.payload,lr=typeof Nr=="function"?Nr.call(Or,hr,lr):Nr,lr==null)break e;hr=we({},hr,lr);break e;case 2:Qi=!0}}rt.callback!==null&&rt.lane!==0&&(D.flags|=64,lr=Ie.effects,lr===null?Ie.effects=[rt]:lr.push(rt))}else Or={eventTime:Or,lane:lr,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},or===null?(Wt=or=Or,vt=hr):or=or.next=Or,Je|=lr;if(rt=rt.next,rt===null){if(rt=Ie.shared.pending,rt===null)break;lr=rt,rt=lr.next,lr.next=null,Ie.lastBaseUpdate=lr,Ie.shared.pending=null}}while(!0);if(or===null&&(vt=hr),Ie.baseState=vt,Ie.firstBaseUpdate=Wt,Ie.lastBaseUpdate=or,W=Ie.shared.interleaved,W!==null){Ie=W;do Je|=Ie.lane,Ie=Ie.next;while(Ie!==W)}else xe===null&&(Ie.shared.lanes=0);Da|=Je,D.lanes=Je,D.memoizedState=hr}}function hp(D,W,de){if(D=W.effects,W.effects=null,D!==null)for(W=0;W<D.length;W++){var ve=D[W],Ie=ve.callback;if(Ie!==null){if(ve.callback=null,ve=de,typeof Ie!="function")throw Error(r(191,Ie));Ie.call(ve)}}}var sl={},_s=Xs(sl),zl=Xs(sl),Yl=Xs(sl);function na(D){if(D===sl)throw Error(r(174));return D}function ko(D,W){switch(fi(Yl,W),fi(zl,D),fi(_s,sl),D=W.nodeType,D){case 9:case 11:W=(W=W.documentElement)?W.namespaceURI:wt(null,"");break;default:D=D===8?W.parentNode:W,W=D.namespaceURI||null,D=D.tagName,W=wt(W,D)}pi(_s),fi(_s,W)}function An(){pi(_s),pi(zl),pi(Yl)}function Ql(D){na(Yl.current);var W=na(_s.current),de=wt(W,D.type);W!==de&&(fi(zl,D),fi(_s,de))}function al(D){zl.current===D&&(pi(_s),pi(zl))}var Ri=Xs(0);function Jo(D){for(var W=D;W!==null;){if(W.tag===13){var de=W.memoizedState;if(de!==null&&(de=de.dehydrated,de===null||de.data==="$?"||de.data==="$!"))return W}else if(W.tag===19&&W.memoizedProps.revealOrder!==void 0){if((W.flags&128)!==0)return W}else if(W.child!==null){W.child.return=W,W=W.child;continue}if(W===D)break;for(;W.sibling===null;){if(W.return===null||W.return===D)return null;W=W.return}W.sibling.return=W.return,W=W.sibling}return null}var ll=[];function Ki(){for(var D=0;D<ll.length;D++)ll[D]._workInProgressVersionPrimary=null;ll.length=0}var zu=K.ReactCurrentDispatcher,_o=K.ReactCurrentBatchConfig,Ia=0,Si=null,Ui=null,no=null,Xl=!1,ul=!1,cl=0,io=0;function ho(){throw Error(r(321))}function Yu(D,W){if(W===null)return!1;for(var de=0;de<W.length&&de<D.length;de++)if(!Po(D[de],W[de]))return!1;return!0}function ad(D,W,de,ve,Ie,xe){if(Ia=xe,Si=W,W.memoizedState=null,W.updateQueue=null,W.lanes=0,zu.current=D===null||D.memoizedState===null?Tp:rc,D=de(ve,Ie),ul){xe=0;do{if(ul=!1,cl=0,25<=xe)throw Error(r(301));xe+=1,no=Ui=null,W.updateQueue=null,zu.current=af,D=de(ve,Ie)}while(ul)}if(zu.current=ru,W=Ui!==null&&Ui.next!==null,Ia=0,no=Ui=Si=null,Xl=!1,W)throw Error(r(300));return D}function ld(){var D=cl!==0;return cl=0,D}function Es(){var D={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return no===null?Si.memoizedState=no=D:no=no.next=D,no}function jn(){if(Ui===null){var D=Si.alternate;D=D!==null?D.memoizedState:null}else D=Ui.next;var W=no===null?Si.memoizedState:no.next;if(W!==null)no=W,Ui=D;else{if(D===null)throw Error(r(310));Ui=D,D={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},no===null?Si.memoizedState=no=D:no=no.next=D}return no}function Zl(D,W){return typeof W=="function"?W(D):W}function ud(D){var W=jn(),de=W.queue;if(de===null)throw Error(r(311));de.lastRenderedReducer=D;var ve=Ui,Ie=ve.baseQueue,xe=de.pending;if(xe!==null){if(Ie!==null){var Je=Ie.next;Ie.next=xe.next,xe.next=Je}ve.baseQueue=Ie=xe,de.pending=null}if(Ie!==null){xe=Ie.next,ve=ve.baseState;var rt=Je=null,vt=null,Wt=xe;do{var or=Wt.lane;if((Ia&or)===or)vt!==null&&(vt=vt.next={lane:0,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null}),ve=Wt.hasEagerState?Wt.eagerState:D(ve,Wt.action);else{var hr={lane:or,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null};vt===null?(rt=vt=hr,Je=ve):vt=vt.next=hr,Si.lanes|=or,Da|=or}Wt=Wt.next}while(Wt!==null&&Wt!==xe);vt===null?Je=ve:vt.next=rt,Po(ve,W.memoizedState)||(Xi=!0),W.memoizedState=ve,W.baseState=Je,W.baseQueue=vt,de.lastRenderedState=ve}if(D=de.interleaved,D!==null){Ie=D;do xe=Ie.lane,Si.lanes|=xe,Da|=xe,Ie=Ie.next;while(Ie!==D)}else Ie===null&&(de.lanes=0);return[W.memoizedState,de.dispatch]}function dl(D){var W=jn(),de=W.queue;if(de===null)throw Error(r(311));de.lastRenderedReducer=D;var ve=de.dispatch,Ie=de.pending,xe=W.memoizedState;if(Ie!==null){de.pending=null;var Je=Ie=Ie.next;do xe=D(xe,Je.action),Je=Je.next;while(Je!==Ie);Po(xe,W.memoizedState)||(Xi=!0),W.memoizedState=xe,W.baseQueue===null&&(W.baseState=xe),de.lastRenderedState=xe}return[xe,ve]}function Qu(){}function Ca(D,W){var de=Si,ve=jn(),Ie=W(),xe=!Po(ve.memoizedState,Ie);if(xe&&(ve.memoizedState=Ie,Xi=!0),ve=ve.queue,ia(zr.bind(null,de,ve,D),[D]),ve.getSnapshot!==W||xe||no!==null&&no.memoizedState.tag&1){if(de.flags|=2048,hi(9,pl.bind(null,de,ve,Ie,W),void 0,null),so===null)throw Error(r(349));(Ia&30)!==0||bs(de,W,Ie)}return Ie}function bs(D,W,de){D.flags|=16384,D={getSnapshot:W,value:de},W=Si.updateQueue,W===null?(W={lastEffect:null,stores:null},Si.updateQueue=W,W.stores=[D]):(de=W.stores,de===null?W.stores=[D]:de.push(D))}function pl(D,W,de,ve){W.value=de,W.getSnapshot=ve,gp(W)&&fl(D)}function zr(D,W,de){return de(function(){gp(W)&&fl(D)})}function gp(D){var W=D.getSnapshot;D=D.value;try{var de=W();return!Po(D,de)}catch{return!0}}function fl(D){var W=ls(D,1);W!==null&&qo(W,D,1,-1)}function mp(D){var W=Es();return typeof D=="function"&&(D=D()),W.memoizedState=W.baseState=D,D={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:D},W.queue=D,D=D.dispatch=sf.bind(null,Si,D),[W.memoizedState,D]}function hi(D,W,de,ve){return D={tag:D,create:W,destroy:de,deps:ve,next:null},W=Si.updateQueue,W===null?(W={lastEffect:null,stores:null},Si.updateQueue=W,W.lastEffect=D.next=D):(de=W.lastEffect,de===null?W.lastEffect=D.next=D:(ve=de.next,de.next=D,D.next=ve,W.lastEffect=D)),D}function Xu(){return jn().memoizedState}function Zu(D,W,de,ve){var Ie=Es();Si.flags|=D,Ie.memoizedState=hi(1|W,de,void 0,ve===void 0?null:ve)}function hl(D,W,de,ve){var Ie=jn();ve=ve===void 0?null:ve;var xe=void 0;if(Ui!==null){var Je=Ui.memoizedState;if(xe=Je.destroy,ve!==null&&Yu(ve,Je.deps)){Ie.memoizedState=hi(W,de,xe,ve);return}}Si.flags|=D,Ie.memoizedState=hi(1|W,de,xe,ve)}function cd(D,W){return Zu(8390656,8,D,W)}function ia(D,W){return hl(2048,8,D,W)}function gl(D,W){return hl(4,2,D,W)}function ml(D,W){return hl(4,4,D,W)}function yp(D,W){if(typeof W=="function")return D=D(),W(D),function(){W(null)};if(W!=null)return D=D(),W.current=D,function(){W.current=null}}function ec(D,W,de){return de=de!=null?de.concat([D]):null,hl(4,4,yp.bind(null,W,D),de)}function Pa(){}function vp(D,W){var de=jn();W=W===void 0?null:W;var ve=de.memoizedState;return ve!==null&&W!==null&&Yu(W,ve[1])?ve[0]:(de.memoizedState=[D,W],D)}function eu(D,W){var de=jn();W=W===void 0?null:W;var ve=de.memoizedState;return ve!==null&&W!==null&&Yu(W,ve[1])?ve[0]:(D=D(),de.memoizedState=[D,W],D)}function _p(D,W,de){return(Ia&21)===0?(D.baseState&&(D.baseState=!1,Xi=!0),D.memoizedState=de):(Po(de,W)||(de=$n(),Si.lanes|=de,Da|=de,D.baseState=!0),W)}function of(D,W){var de=Lr;Lr=de!==0&&4>de?de:4,D(!0);var ve=_o.transition;_o.transition={};try{D(!1),W()}finally{Lr=de,_o.transition=ve}}function Ep(){return jn().memoizedState}function dd(D,W,de){var ve=cs(D);if(de={lane:ve,action:de,hasEagerState:!1,eagerState:null,next:null},tc(D))bp(W,de);else if(de=pp(D,W,de,ve),de!==null){var Ie=Di();qo(de,D,ve,Ie),tu(de,W,ve)}}function sf(D,W,de){var ve=cs(D),Ie={lane:ve,action:de,hasEagerState:!1,eagerState:null,next:null};if(tc(D))bp(W,Ie);else{var xe=D.alternate;if(D.lanes===0&&(xe===null||xe.lanes===0)&&(xe=W.lastRenderedReducer,xe!==null))try{var Je=W.lastRenderedState,rt=xe(Je,de);if(Ie.hasEagerState=!0,Ie.eagerState=rt,Po(rt,Je)){var vt=W.interleaved;vt===null?(Ie.next=Ie,fo(W)):(Ie.next=vt.next,vt.next=Ie),W.interleaved=Ie;return}}catch{}finally{}de=pp(D,W,Ie,ve),de!==null&&(Ie=Di(),qo(de,D,ve,Ie),tu(de,W,ve))}}function tc(D){var W=D.alternate;return D===Si||W!==null&&W===Si}function bp(D,W){ul=Xl=!0;var de=D.pending;de===null?W.next=W:(W.next=de.next,de.next=W),D.pending=W}function tu(D,W,de){if((de&4194240)!==0){var ve=W.lanes;ve&=D.pendingLanes,de|=ve,W.lanes=de,Dn(D,de)}}var ru={readContext:Mn,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},Tp={readContext:Mn,useCallback:function(D,W){return Es().memoizedState=[D,W===void 0?null:W],D},useContext:Mn,useEffect:cd,useImperativeHandle:function(D,W,de){return de=de!=null?de.concat([D]):null,Zu(4194308,4,yp.bind(null,W,D),de)},useLayoutEffect:function(D,W){return Zu(4194308,4,D,W)},useInsertionEffect:function(D,W){return Zu(4,2,D,W)},useMemo:function(D,W){var de=Es();return W=W===void 0?null:W,D=D(),de.memoizedState=[D,W],D},useReducer:function(D,W,de){var ve=Es();return W=de!==void 0?de(W):W,ve.memoizedState=ve.baseState=W,D={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:W},ve.queue=D,D=D.dispatch=dd.bind(null,Si,D),[ve.memoizedState,D]},useRef:function(D){var W=Es();return D={current:D},W.memoizedState=D},useState:mp,useDebugValue:Pa,useDeferredValue:function(D){return Es().memoizedState=D},useTransition:function(){var D=mp(!1),W=D[0];return D=of.bind(null,D[1]),Es().memoizedState=D,[W,D]},useMutableSource:function(){},useSyncExternalStore:function(D,W,de){var ve=Si,Ie=Es();if(wi){if(de===void 0)throw Error(r(407));de=de()}else{if(de=W(),so===null)throw Error(r(349));(Ia&30)!==0||bs(ve,W,de)}Ie.memoizedState=de;var xe={value:de,getSnapshot:W};return Ie.queue=xe,cd(zr.bind(null,ve,xe,D),[D]),ve.flags|=2048,hi(9,pl.bind(null,ve,xe,de,W),void 0,null),de},useId:function(){var D=Es(),W=so.identifierPrefix;if(wi){var de=Fs,ve=qs;de=(ve&~(1<<32-ze(ve)-1)).toString(32)+de,W=":"+W+"R"+de,de=cl++,0<de&&(W+="H"+de.toString(32)),W+=":"}else de=io++,W=":"+W+"r"+de.toString(32)+":";return D.memoizedState=W},unstable_isNewReconciler:!1},rc={readContext:Mn,useCallback:vp,useContext:Mn,useEffect:ia,useImperativeHandle:ec,useInsertionEffect:gl,useLayoutEffect:ml,useMemo:eu,useReducer:ud,useRef:Xu,useState:function(){return ud(Zl)},useDebugValue:Pa,useDeferredValue:function(D){var W=jn();return _p(W,Ui.memoizedState,D)},useTransition:function(){var D=ud(Zl)[0],W=jn().memoizedState;return[D,W]},useMutableSource:Qu,useSyncExternalStore:Ca,useId:Ep,unstable_isNewReconciler:!1},af={readContext:Mn,useCallback:vp,useContext:Mn,useEffect:ia,useImperativeHandle:ec,useInsertionEffect:gl,useLayoutEffect:ml,useMemo:eu,useReducer:dl,useRef:Xu,useState:function(){return dl(Zl)},useDebugValue:Pa,useDeferredValue:function(D){var W=jn();return Ui===null?W.memoizedState=D:_p(W,Ui.memoizedState,D)},useTransition:function(){var D=dl(Zl)[0],W=jn().memoizedState;return[D,W]},useMutableSource:Qu,useSyncExternalStore:Ca,useId:Ep,unstable_isNewReconciler:!1};function jo(D,W){if(D&&D.defaultProps){W=we({},W),D=D.defaultProps;for(var de in D)W[de]===void 0&&(W[de]=D[de]);return W}return W}function oa(D,W,de,ve){W=D.memoizedState,de=de(ve,W),de=de==null?W:we({},W,de),D.memoizedState=de,D.lanes===0&&(D.updateQueue.baseState=de)}var yl={isMounted:function(D){return(D=D._reactInternals)?Ct(D)===D:!1},enqueueSetState:function(D,W,de){D=D._reactInternals;var ve=Di(),Ie=cs(D),xe=Ms(ve,Ie);xe.payload=W,de!=null&&(xe.callback=de),W=Vs(D,xe,Ie),W!==null&&(qo(W,D,Ie,ve),vs(W,D,Ie))},enqueueReplaceState:function(D,W,de){D=D._reactInternals;var ve=Di(),Ie=cs(D),xe=Ms(ve,Ie);xe.tag=1,xe.payload=W,de!=null&&(xe.callback=de),W=Vs(D,xe,Ie),W!==null&&(qo(W,D,Ie,ve),vs(W,D,Ie))},enqueueForceUpdate:function(D,W){D=D._reactInternals;var de=Di(),ve=cs(D),Ie=Ms(de,ve);Ie.tag=2,W!=null&&(Ie.callback=W),W=Vs(D,Ie,ve),W!==null&&(qo(W,D,ve,de),vs(W,D,ve))}};function nc(D,W,de,ve,Ie,xe,Je){return D=D.stateNode,typeof D.shouldComponentUpdate=="function"?D.shouldComponentUpdate(ve,xe,Je):W.prototype&&W.prototype.isPureReactComponent?!Ml(de,ve)||!Ml(Ie,xe):!0}function Sp(D,W,de){var ve=!1,Ie=Zs,xe=W.contextType;return typeof xe=="object"&&xe!==null?xe=Mn(xe):(Ie=xo(W)?ba:vo.current,ve=W.contextTypes,xe=(ve=ve!=null)?po(D,Ie):Zs),W=new W(de,xe),D.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=yl,D.stateNode=W,W._reactInternals=D,ve&&(D=D.stateNode,D.__reactInternalMemoizedUnmaskedChildContext=Ie,D.__reactInternalMemoizedMaskedChildContext=xe),W}function Ap(D,W,de,ve){D=W.state,typeof W.componentWillReceiveProps=="function"&&W.componentWillReceiveProps(de,ve),typeof W.UNSAFE_componentWillReceiveProps=="function"&&W.UNSAFE_componentWillReceiveProps(de,ve),W.state!==D&&yl.enqueueReplaceState(W,W.state,null)}function ic(D,W,de,ve){var Ie=D.stateNode;Ie.props=de,Ie.state=D.memoizedState,Ie.refs={},sd(D);var xe=W.contextType;typeof xe=="object"&&xe!==null?Ie.context=Mn(xe):(xe=xo(W)?ba:vo.current,Ie.context=po(D,xe)),Ie.state=D.memoizedState,xe=W.getDerivedStateFromProps,typeof xe=="function"&&(oa(D,W,xe,de),Ie.state=D.memoizedState),typeof W.getDerivedStateFromProps=="function"||typeof Ie.getSnapshotBeforeUpdate=="function"||typeof Ie.UNSAFE_componentWillMount!="function"&&typeof Ie.componentWillMount!="function"||(W=Ie.state,typeof Ie.componentWillMount=="function"&&Ie.componentWillMount(),typeof Ie.UNSAFE_componentWillMount=="function"&&Ie.UNSAFE_componentWillMount(),W!==Ie.state&&yl.enqueueReplaceState(Ie,Ie.state,null),ra(D,de,Ie,ve),Ie.state=D.memoizedState),typeof Ie.componentDidMount=="function"&&(D.flags|=4194308)}function vl(D,W){try{var de="",ve=W;do de+=Ge(ve),ve=ve.return;while(ve);var Ie=de}catch(xe){Ie=`
Error generating stack: `+xe.message+`
`+xe.stack}return{value:D,source:W,stack:Ie,digest:null}}function pd(D,W,de){return{value:D,source:null,stack:de??null,digest:W??null}}function fd(D,W){try{console.error(W.value)}catch(de){setTimeout(function(){throw de})}}var us=typeof WeakMap=="function"?WeakMap:Map;function oc(D,W,de){de=Ms(-1,de),de.tag=3,de.payload={element:null};var ve=W.value;return de.callback=function(){yc||(yc=!0,Ad=ve),fd(D,W)},de}function sc(D,W,de){de=Ms(-1,de),de.tag=3;var ve=D.type.getDerivedStateFromError;if(typeof ve=="function"){var Ie=W.value;de.payload=function(){return ve(Ie)},de.callback=function(){fd(D,W)}}var xe=D.stateNode;return xe!==null&&typeof xe.componentDidCatch=="function"&&(de.callback=function(){fd(D,W),typeof ve!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var Je=W.stack;this.componentDidCatch(W.value,{componentStack:Je!==null?Je:""})}),de}function ac(D,W,de){var ve=D.pingCache;if(ve===null){ve=D.pingCache=new us;var Ie=new Set;ve.set(W,Ie)}else Ie=ve.get(W),Ie===void 0&&(Ie=new Set,ve.set(W,Ie));Ie.has(de)||(Ie.add(de),D=Nd.bind(null,D,W,de),W.then(D,D))}function nu(D){do{var W;if((W=D.tag===13)&&(W=D.memoizedState,W=W!==null?W.dehydrated!==null:!0),W)return D;D=D.return}while(D!==null);return null}function _l(D,W,de,ve,Ie){return(D.mode&1)===0?(D===W?D.flags|=65536:(D.flags|=128,de.flags|=131072,de.flags&=-52805,de.tag===1&&(de.alternate===null?de.tag=17:(W=Ms(-1,1),W.tag=2,Vs(de,W,1))),de.lanes|=1),D):(D.flags|=65536,D.lanes=Ie,D)}var Na=K.ReactCurrentOwner,Xi=!1;function xi(D,W,de,ve){W.child=D===null?ti(W,null,de,ve):Oa(W,D.child,de,ve)}function Op(D,W,de,ve,Ie){de=de.render;var xe=W.ref;return Ra(W,Ie),ve=ad(D,W,de,ve,xe,Ie),de=ld(),D!==null&&!Xi?(W.updateQueue=D.updateQueue,W.flags&=-2053,D.lanes&=~Ie,Eo(D,W,Ie)):(wi&&de&&ta(W),W.flags|=1,xi(D,W,ve,Ie),W.child)}function wp(D,W,de,ve,Ie){if(D===null){var xe=de.type;return typeof xe=="function"&&!Tu(xe)&&xe.defaultProps===void 0&&de.compare===null&&de.defaultProps===void 0?(W.tag=15,W.type=xe,El(D,W,xe,ve,Ie)):(D=Tc(de.type,null,ve,W,W.mode,Ie),D.ref=W.ref,D.return=W,W.child=D)}if(xe=D.child,(D.lanes&Ie)===0){var Je=xe.memoizedProps;if(de=de.compare,de=de!==null?de:Ml,de(Je,ve)&&D.ref===W.ref)return Eo(D,W,Ie)}return W.flags|=1,D=$s(xe,ve),D.ref=W.ref,D.return=W,W.child=D}function El(D,W,de,ve,Ie){if(D!==null){var xe=D.memoizedProps;if(Ml(xe,ve)&&D.ref===W.ref)if(Xi=!1,W.pendingProps=ve=xe,(D.lanes&Ie)!==0)(D.flags&131072)!==0&&(Xi=!0);else return W.lanes=D.lanes,Eo(D,W,Ie)}return bl(D,W,de,ve,Ie)}function Rp(D,W,de){var ve=W.pendingProps,Ie=ve.children,xe=D!==null?D.memoizedState:null;if(ve.mode==="hidden")if((W.mode&1)===0)W.memoizedState={baseLanes:0,cachePool:null,transitions:null},fi(Ol,Qo),Qo|=de;else{if((de&1073741824)===0)return D=xe!==null?xe.baseLanes|de:de,W.lanes=W.childLanes=1073741824,W.memoizedState={baseLanes:D,cachePool:null,transitions:null},W.updateQueue=null,fi(Ol,Qo),Qo|=D,null;W.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve=xe!==null?xe.baseLanes:de,fi(Ol,Qo),Qo|=ve}else xe!==null?(ve=xe.baseLanes|de,W.memoizedState=null):ve=de,fi(Ol,Qo),Qo|=ve;return xi(D,W,Ie,de),W.child}function Ip(D,W){var de=W.ref;(D===null&&de!==null||D!==null&&D.ref!==de)&&(W.flags|=512,W.flags|=2097152)}function bl(D,W,de,ve,Ie){var xe=xo(de)?ba:vo.current;return xe=po(W,xe),Ra(W,Ie),de=ad(D,W,de,ve,xe,Ie),ve=ld(),D!==null&&!Xi?(W.updateQueue=D.updateQueue,W.flags&=-2053,D.lanes&=~Ie,Eo(D,W,Ie)):(wi&&ve&&ta(W),W.flags|=1,xi(D,W,de,Ie),W.child)}function Tl(D,W,de,ve,Ie){if(xo(de)){var xe=!0;Gl(W)}else xe=!1;if(Ra(W,Ie),W.stateNode===null)au(D,W),Sp(W,de,ve),ic(W,de,ve,Ie),ve=!0;else if(D===null){var Je=W.stateNode,rt=W.memoizedProps;Je.props=rt;var vt=Je.context,Wt=de.contextType;typeof Wt=="object"&&Wt!==null?Wt=Mn(Wt):(Wt=xo(de)?ba:vo.current,Wt=po(W,Wt));var or=de.getDerivedStateFromProps,hr=typeof or=="function"||typeof Je.getSnapshotBeforeUpdate=="function";hr||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(rt!==ve||vt!==Wt)&&Ap(W,Je,ve,Wt),Qi=!1;var lr=W.memoizedState;Je.state=lr,ra(W,ve,Je,Ie),vt=W.memoizedState,rt!==ve||lr!==vt||ro.current||Qi?(typeof or=="function"&&(oa(W,de,or,ve),vt=W.memoizedState),(rt=Qi||nc(W,de,rt,ve,lr,vt,Wt))?(hr||typeof Je.UNSAFE_componentWillMount!="function"&&typeof Je.componentWillMount!="function"||(typeof Je.componentWillMount=="function"&&Je.componentWillMount(),typeof Je.UNSAFE_componentWillMount=="function"&&Je.UNSAFE_componentWillMount()),typeof Je.componentDidMount=="function"&&(W.flags|=4194308)):(typeof Je.componentDidMount=="function"&&(W.flags|=4194308),W.memoizedProps=ve,W.memoizedState=vt),Je.props=ve,Je.state=vt,Je.context=Wt,ve=rt):(typeof Je.componentDidMount=="function"&&(W.flags|=4194308),ve=!1)}else{Je=W.stateNode,fp(D,W),rt=W.memoizedProps,Wt=W.type===W.elementType?rt:jo(W.type,rt),Je.props=Wt,hr=W.pendingProps,lr=Je.context,vt=de.contextType,typeof vt=="object"&&vt!==null?vt=Mn(vt):(vt=xo(de)?ba:vo.current,vt=po(W,vt));var Or=de.getDerivedStateFromProps;(or=typeof Or=="function"||typeof Je.getSnapshotBeforeUpdate=="function")||typeof Je.UNSAFE_componentWillReceiveProps!="function"&&typeof Je.componentWillReceiveProps!="function"||(rt!==hr||lr!==vt)&&Ap(W,Je,ve,vt),Qi=!1,lr=W.memoizedState,Je.state=lr,ra(W,ve,Je,Ie);var Nr=W.memoizedState;rt!==hr||lr!==Nr||ro.current||Qi?(typeof Or=="function"&&(oa(W,de,Or,ve),Nr=W.memoizedState),(Wt=Qi||nc(W,de,Wt,ve,lr,Nr,vt)||!1)?(or||typeof Je.UNSAFE_componentWillUpdate!="function"&&typeof Je.componentWillUpdate!="function"||(typeof Je.componentWillUpdate=="function"&&Je.componentWillUpdate(ve,Nr,vt),typeof Je.UNSAFE_componentWillUpdate=="function"&&Je.UNSAFE_componentWillUpdate(ve,Nr,vt)),typeof Je.componentDidUpdate=="function"&&(W.flags|=4),typeof Je.getSnapshotBeforeUpdate=="function"&&(W.flags|=1024)):(typeof Je.componentDidUpdate!="function"||rt===D.memoizedProps&&lr===D.memoizedState||(W.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||rt===D.memoizedProps&&lr===D.memoizedState||(W.flags|=1024),W.memoizedProps=ve,W.memoizedState=Nr),Je.props=ve,Je.state=Nr,Je.context=vt,ve=Wt):(typeof Je.componentDidUpdate!="function"||rt===D.memoizedProps&&lr===D.memoizedState||(W.flags|=4),typeof Je.getSnapshotBeforeUpdate!="function"||rt===D.memoizedProps&&lr===D.memoizedState||(W.flags|=1024),ve=!1)}return lc(D,W,de,ve,xe,Ie)}function lc(D,W,de,ve,Ie,xe){Ip(D,W);var Je=(W.flags&128)!==0;if(!ve&&!Je)return Ie&&up(W,de,!1),Eo(D,W,xe);ve=W.stateNode,Na.current=W;var rt=Je&&typeof de.getDerivedStateFromError!="function"?null:ve.render();return W.flags|=1,D!==null&&Je?(W.child=Oa(W,D.child,null,xe),W.child=Oa(W,null,rt,xe)):xi(D,W,rt,xe),W.memoizedState=ve.state,Ie&&up(W,de,!0),W.child}function iu(D){var W=D.stateNode;W.pendingContext?Ta(D,W.pendingContext,W.pendingContext!==W.context):W.context&&Ta(D,W.context,!1),ko(D,W.containerInfo)}function sa(D,W,de,ve,Ie){return Aa(),nd(Ie),W.flags|=256,xi(D,W,de,ve),W.child}var ou={dehydrated:null,treeContext:null,retryLane:0};function hd(D){return{baseLanes:D,cachePool:null,transitions:null}}function gi(D,W,de){var ve=W.pendingProps,Ie=Ri.current,xe=!1,Je=(W.flags&128)!==0,rt;if((rt=Je)||(rt=D!==null&&D.memoizedState===null?!1:(Ie&2)!==0),rt?(xe=!0,W.flags&=-129):(D===null||D.memoizedState!==null)&&(Ie|=1),fi(Ri,Ie&1),D===null)return ed(W),D=W.memoizedState,D!==null&&(D=D.dehydrated,D!==null)?((W.mode&1)===0?W.lanes=1:D.data==="$!"?W.lanes=8:W.lanes=1073741824,null):(Je=ve.children,D=ve.fallback,xe?(ve=W.mode,xe=W.child,Je={mode:"hidden",children:Je},(ve&1)===0&&xe!==null?(xe.childLanes=0,xe.pendingProps=Je):xe=Su(Je,ve,0,null),D=Ma(D,ve,de,null),xe.return=W,D.return=W,xe.sibling=D,W.child=xe,W.child.memoizedState=hd(de),W.memoizedState=ou,D):zo(W,Je));if(Ie=D.memoizedState,Ie!==null&&(rt=Ie.dehydrated,rt!==null))return gd(D,W,Je,ve,rt,Ie,de);if(xe){xe=ve.fallback,Je=W.mode,Ie=D.child,rt=Ie.sibling;var vt={mode:"hidden",children:ve.children};return(Je&1)===0&&W.child!==Ie?(ve=W.child,ve.childLanes=0,ve.pendingProps=vt,W.deletions=null):(ve=$s(Ie,vt),ve.subtreeFlags=Ie.subtreeFlags&14680064),rt!==null?xe=$s(rt,xe):(xe=Ma(xe,Je,de,null),xe.flags|=2),xe.return=W,ve.return=W,ve.sibling=xe,W.child=ve,ve=xe,xe=W.child,Je=D.child.memoizedState,Je=Je===null?hd(de):{baseLanes:Je.baseLanes|de,cachePool:null,transitions:Je.transitions},xe.memoizedState=Je,xe.childLanes=D.childLanes&~de,W.memoizedState=ou,ve}return xe=D.child,D=xe.sibling,ve=$s(xe,{mode:"visible",children:ve.children}),(W.mode&1)===0&&(ve.lanes=de),ve.return=W,ve.sibling=null,D!==null&&(de=W.deletions,de===null?(W.deletions=[D],W.flags|=16):de.push(D)),W.child=ve,W.memoizedState=null,ve}function zo(D,W){return W=Su({mode:"visible",children:W},D.mode,0,null),W.return=D,D.child=W}function aa(D,W,de,ve){return ve!==null&&nd(ve),Oa(W,D.child,null,de),D=zo(W,W.pendingProps.children),D.flags|=2,W.memoizedState=null,D}function gd(D,W,de,ve,Ie,xe,Je){if(de)return W.flags&256?(W.flags&=-257,ve=pd(Error(r(422))),aa(D,W,Je,ve)):W.memoizedState!==null?(W.child=D.child,W.flags|=128,null):(xe=ve.fallback,Ie=W.mode,ve=Su({mode:"visible",children:ve.children},Ie,0,null),xe=Ma(xe,Ie,Je,null),xe.flags|=2,ve.return=W,xe.return=W,ve.sibling=xe,W.child=ve,(W.mode&1)!==0&&Oa(W,D.child,null,Je),W.child.memoizedState=hd(Je),W.memoizedState=ou,xe);if((W.mode&1)===0)return aa(D,W,Je,null);if(Ie.data==="$!"){if(ve=Ie.nextSibling&&Ie.nextSibling.dataset,ve)var rt=ve.dgst;return ve=rt,xe=Error(r(419)),ve=pd(xe,ve,void 0),aa(D,W,Je,ve)}if(rt=(Je&D.childLanes)!==0,Xi||rt){if(ve=so,ve!==null){switch(Je&-Je){case 4:Ie=2;break;case 16:Ie=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ie=32;break;case 536870912:Ie=268435456;break;default:Ie=0}Ie=(Ie&(ve.suspendedLanes|Je))!==0?0:Ie,Ie!==0&&Ie!==xe.retryLane&&(xe.retryLane=Ie,ls(D,Ie),qo(ve,D,Ie,-1))}return Cd(),ve=pd(Error(r(421))),aa(D,W,Je,ve)}return Ie.data==="$?"?(W.flags|=128,W.child=D.child,W=ff.bind(null,D),Ie._reactRetry=W,null):(D=xe.treeContext,Ho=Ys(Ie.nextSibling),Go=W,wi=!0,Ko=null,D!==null&&(Bo[$o++]=qs,Bo[$o++]=Fs,Bo[$o++]=Sa,qs=D.id,Fs=D.overflow,Sa=W),W=zo(W,ve.children),W.flags|=4096,W)}function yd(D,W,de){D.lanes|=W;var ve=D.alternate;ve!==null&&(ve.lanes|=W),wa(D.return,W,de)}function su(D,W,de,ve,Ie){var xe=D.memoizedState;xe===null?D.memoizedState={isBackwards:W,rendering:null,renderingStartTime:0,last:ve,tail:de,tailMode:Ie}:(xe.isBackwards=W,xe.rendering=null,xe.renderingStartTime=0,xe.last=ve,xe.tail=de,xe.tailMode=Ie)}function la(D,W,de){var ve=W.pendingProps,Ie=ve.revealOrder,xe=ve.tail;if(xi(D,W,ve.children,de),ve=Ri.current,(ve&2)!==0)ve=ve&1|2,W.flags|=128;else{if(D!==null&&(D.flags&128)!==0)e:for(D=W.child;D!==null;){if(D.tag===13)D.memoizedState!==null&&yd(D,de,W);else if(D.tag===19)yd(D,de,W);else if(D.child!==null){D.child.return=D,D=D.child;continue}if(D===W)break e;for(;D.sibling===null;){if(D.return===null||D.return===W)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}ve&=1}if(fi(Ri,ve),(W.mode&1)===0)W.memoizedState=null;else switch(Ie){case"forwards":for(de=W.child,Ie=null;de!==null;)D=de.alternate,D!==null&&Jo(D)===null&&(Ie=de),de=de.sibling;de=Ie,de===null?(Ie=W.child,W.child=null):(Ie=de.sibling,de.sibling=null),su(W,!1,Ie,de,xe);break;case"backwards":for(de=null,Ie=W.child,W.child=null;Ie!==null;){if(D=Ie.alternate,D!==null&&Jo(D)===null){W.child=Ie;break}D=Ie.sibling,Ie.sibling=de,de=Ie,Ie=D}su(W,!0,de,null,xe);break;case"together":su(W,!1,null,null,void 0);break;default:W.memoizedState=null}return W.child}function au(D,W){(W.mode&1)===0&&D!==null&&(D.alternate=null,W.alternate=null,W.flags|=2)}function Eo(D,W,de){if(D!==null&&(W.dependencies=D.dependencies),Da|=W.lanes,(de&W.childLanes)===0)return null;if(D!==null&&W.child!==D.child)throw Error(r(153));if(W.child!==null){for(D=W.child,de=$s(D,D.pendingProps),W.child=de,de.return=W;D.sibling!==null;)D=D.sibling,de=de.sibling=$s(D,D.pendingProps),de.return=W;de.sibling=null}return W.child}function vd(D,W,de){switch(W.tag){case 3:iu(W),Aa();break;case 5:Ql(W);break;case 1:xo(W.type)&&Gl(W);break;case 4:ko(W,W.stateNode.containerInfo);break;case 10:var ve=W.type._context,Ie=W.memoizedProps.value;fi(Fn,ve._currentValue),ve._currentValue=Ie;break;case 13:if(ve=W.memoizedState,ve!==null)return ve.dehydrated!==null?(fi(Ri,Ri.current&1),W.flags|=128,null):(de&W.child.childLanes)!==0?gi(D,W,de):(fi(Ri,Ri.current&1),D=Eo(D,W,de),D!==null?D.sibling:null);fi(Ri,Ri.current&1);break;case 19:if(ve=(de&W.childLanes)!==0,(D.flags&128)!==0){if(ve)return la(D,W,de);W.flags|=128}if(Ie=W.memoizedState,Ie!==null&&(Ie.rendering=null,Ie.tail=null,Ie.lastEffect=null),fi(Ri,Ri.current),ve)break;return null;case 22:case 23:return W.lanes=0,Rp(D,W,de)}return Eo(D,W,de)}var xa,uc,lu,Cp;xa=function(D,W){for(var de=W.child;de!==null;){if(de.tag===5||de.tag===6)D.appendChild(de.stateNode);else if(de.tag!==4&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===W)break;for(;de.sibling===null;){if(de.return===null||de.return===W)return;de=de.return}de.sibling.return=de.return,de=de.sibling}},uc=function(){},lu=function(D,W,de,ve){var Ie=D.memoizedProps;if(Ie!==ve){D=W.stateNode,na(_s.current);var xe=null;switch(de){case"input":Ie=Re(D,Ie),ve=Re(D,ve),xe=[];break;case"select":Ie=we({},Ie,{value:void 0}),ve=we({},ve,{value:void 0}),xe=[];break;case"textarea":Ie=oe(D,Ie),ve=oe(D,ve),xe=[];break;default:typeof Ie.onClick!="function"&&typeof ve.onClick=="function"&&(D.onclick=ts)}Kt(de,ve);var Je;de=null;for(Wt in Ie)if(!ve.hasOwnProperty(Wt)&&Ie.hasOwnProperty(Wt)&&Ie[Wt]!=null)if(Wt==="style"){var rt=Ie[Wt];for(Je in rt)rt.hasOwnProperty(Je)&&(de||(de={}),de[Je]="")}else Wt!=="dangerouslySetInnerHTML"&&Wt!=="children"&&Wt!=="suppressContentEditableWarning"&&Wt!=="suppressHydrationWarning"&&Wt!=="autoFocus"&&(d.hasOwnProperty(Wt)?xe||(xe=[]):(xe=xe||[]).push(Wt,null));for(Wt in ve){var vt=ve[Wt];if(rt=Ie?.[Wt],ve.hasOwnProperty(Wt)&&vt!==rt&&(vt!=null||rt!=null))if(Wt==="style")if(rt){for(Je in rt)!rt.hasOwnProperty(Je)||vt&&vt.hasOwnProperty(Je)||(de||(de={}),de[Je]="");for(Je in vt)vt.hasOwnProperty(Je)&&rt[Je]!==vt[Je]&&(de||(de={}),de[Je]=vt[Je])}else de||(xe||(xe=[]),xe.push(Wt,de)),de=vt;else Wt==="dangerouslySetInnerHTML"?(vt=vt?vt.__html:void 0,rt=rt?rt.__html:void 0,vt!=null&&rt!==vt&&(xe=xe||[]).push(Wt,vt)):Wt==="children"?typeof vt!="string"&&typeof vt!="number"||(xe=xe||[]).push(Wt,""+vt):Wt!=="suppressContentEditableWarning"&&Wt!=="suppressHydrationWarning"&&(d.hasOwnProperty(Wt)?(vt!=null&&Wt==="onScroll"&&_i("scroll",D),xe||rt===vt||(xe=[])):(xe=xe||[]).push(Wt,vt))}de&&(xe=xe||[]).push("style",de);var Wt=xe;(W.updateQueue=Wt)&&(W.flags|=4)}},Cp=function(D,W,de,ve){de!==ve&&(W.flags|=4)};function uu(D,W){if(!wi)switch(D.tailMode){case"hidden":W=D.tail;for(var de=null;W!==null;)W.alternate!==null&&(de=W),W=W.sibling;de===null?D.tail=null:de.sibling=null;break;case"collapsed":de=D.tail;for(var ve=null;de!==null;)de.alternate!==null&&(ve=de),de=de.sibling;ve===null?W||D.tail===null?D.tail=null:D.tail.sibling=null:ve.sibling=null}}function bo(D){var W=D.alternate!==null&&D.alternate.child===D.child,de=0,ve=0;if(W)for(var Ie=D.child;Ie!==null;)de|=Ie.lanes|Ie.childLanes,ve|=Ie.subtreeFlags&14680064,ve|=Ie.flags&14680064,Ie.return=D,Ie=Ie.sibling;else for(Ie=D.child;Ie!==null;)de|=Ie.lanes|Ie.childLanes,ve|=Ie.subtreeFlags,ve|=Ie.flags,Ie.return=D,Ie=Ie.sibling;return D.subtreeFlags|=ve,D.childLanes=de,W}function lf(D,W,de){var ve=W.pendingProps;switch(Xc(W),W.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bo(W),null;case 1:return xo(W.type)&&Uu(),bo(W),null;case 3:return ve=W.stateNode,An(),pi(ro),pi(vo),Ki(),ve.pendingContext&&(ve.context=ve.pendingContext,ve.pendingContext=null),(D===null||D.child===null)&&(Hl(W)?W.flags|=4:D===null||D.memoizedState.isDehydrated&&(W.flags&256)===0||(W.flags|=1024,Ko!==null&&(_c(Ko),Ko=null))),uc(D,W),bo(W),null;case 5:al(W);var Ie=na(Yl.current);if(de=W.type,D!==null&&W.stateNode!=null)lu(D,W,de,ve,Ie),D.ref!==W.ref&&(W.flags|=512,W.flags|=2097152);else{if(!ve){if(W.stateNode===null)throw Error(r(166));return bo(W),null}if(D=na(_s.current),Hl(W)){ve=W.stateNode,de=W.type;var xe=W.memoizedProps;switch(ve[ys]=W,ve[Za]=xe,D=(W.mode&1)!==0,de){case"dialog":_i("cancel",ve),_i("close",ve);break;case"iframe":case"object":case"embed":_i("load",ve);break;case"video":case"audio":for(Ie=0;Ie<ss.length;Ie++)_i(ss[Ie],ve);break;case"source":_i("error",ve);break;case"img":case"image":case"link":_i("error",ve),_i("load",ve);break;case"details":_i("toggle",ve);break;case"input":ke(ve,xe),_i("invalid",ve);break;case"select":ve._wrapperState={wasMultiple:!!xe.multiple},_i("invalid",ve);break;case"textarea":_e(ve,xe),_i("invalid",ve)}Kt(de,xe),Ie=null;for(var Je in xe)if(xe.hasOwnProperty(Je)){var rt=xe[Je];Je==="children"?typeof rt=="string"?ve.textContent!==rt&&(xe.suppressHydrationWarning!==!0&&as(ve.textContent,rt,D),Ie=["children",rt]):typeof rt=="number"&&ve.textContent!==""+rt&&(xe.suppressHydrationWarning!==!0&&as(ve.textContent,rt,D),Ie=["children",""+rt]):d.hasOwnProperty(Je)&&rt!=null&&Je==="onScroll"&&_i("scroll",ve)}switch(de){case"input":V(ve),ee(ve,xe,!0);break;case"textarea":V(ve),nt(ve);break;case"select":case"option":break;default:typeof xe.onClick=="function"&&(ve.onclick=ts)}ve=Ie,W.updateQueue=ve,ve!==null&&(W.flags|=4)}else{Je=Ie.nodeType===9?Ie:Ie.ownerDocument,D==="http://www.w3.org/1999/xhtml"&&(D=It(de)),D==="http://www.w3.org/1999/xhtml"?de==="script"?(D=Je.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild)):typeof ve.is=="string"?D=Je.createElement(de,{is:ve.is}):(D=Je.createElement(de),de==="select"&&(Je=D,ve.multiple?Je.multiple=!0:ve.size&&(Je.size=ve.size))):D=Je.createElementNS(D,de),D[ys]=W,D[Za]=ve,xa(D,W,!1,!1),W.stateNode=D;e:{switch(Je=nr(de,ve),de){case"dialog":_i("cancel",D),_i("close",D),Ie=ve;break;case"iframe":case"object":case"embed":_i("load",D),Ie=ve;break;case"video":case"audio":for(Ie=0;Ie<ss.length;Ie++)_i(ss[Ie],D);Ie=ve;break;case"source":_i("error",D),Ie=ve;break;case"img":case"image":case"link":_i("error",D),_i("load",D),Ie=ve;break;case"details":_i("toggle",D),Ie=ve;break;case"input":ke(D,ve),Ie=Re(D,ve),_i("invalid",D);break;case"option":Ie=ve;break;case"select":D._wrapperState={wasMultiple:!!ve.multiple},Ie=we({},ve,{value:void 0}),_i("invalid",D);break;case"textarea":_e(D,ve),Ie=oe(D,ve),_i("invalid",D);break;default:Ie=ve}Kt(de,Ie),rt=Ie;for(xe in rt)if(rt.hasOwnProperty(xe)){var vt=rt[xe];xe==="style"?$t(D,vt):xe==="dangerouslySetInnerHTML"?(vt=vt?vt.__html:void 0,vt!=null&&_r(D,vt)):xe==="children"?typeof vt=="string"?(de!=="textarea"||vt!=="")&&Rr(D,vt):typeof vt=="number"&&Rr(D,""+vt):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(d.hasOwnProperty(xe)?vt!=null&&xe==="onScroll"&&_i("scroll",D):vt!=null&&j(D,xe,vt,Je))}switch(de){case"input":V(D),ee(D,ve,!1);break;case"textarea":V(D),nt(D);break;case"option":ve.value!=null&&D.setAttribute("value",""+$e(ve.value));break;case"select":D.multiple=!!ve.multiple,xe=ve.value,xe!=null?X(D,!!ve.multiple,xe,!1):ve.defaultValue!=null&&X(D,!!ve.multiple,ve.defaultValue,!0);break;default:typeof Ie.onClick=="function"&&(D.onclick=ts)}switch(de){case"button":case"input":case"select":case"textarea":ve=!!ve.autoFocus;break e;case"img":ve=!0;break e;default:ve=!1}}ve&&(W.flags|=4)}W.ref!==null&&(W.flags|=512,W.flags|=2097152)}return bo(W),null;case 6:if(D&&W.stateNode!=null)Cp(D,W,D.memoizedProps,ve);else{if(typeof ve!="string"&&W.stateNode===null)throw Error(r(166));if(de=na(Yl.current),na(_s.current),Hl(W)){if(ve=W.stateNode,de=W.memoizedProps,ve[ys]=W,(xe=ve.nodeValue!==de)&&(D=Go,D!==null))switch(D.tag){case 3:as(ve.nodeValue,de,(D.mode&1)!==0);break;case 5:D.memoizedProps.suppressHydrationWarning!==!0&&as(ve.nodeValue,de,(D.mode&1)!==0)}xe&&(W.flags|=4)}else ve=(de.nodeType===9?de:de.ownerDocument).createTextNode(ve),ve[ys]=W,W.stateNode=ve}return bo(W),null;case 13:if(pi(Ri),ve=W.memoizedState,D===null||D.memoizedState!==null&&D.memoizedState.dehydrated!==null){if(wi&&Ho!==null&&(W.mode&1)!==0&&(W.flags&128)===0)rd(),Aa(),W.flags|=98560,xe=!1;else if(xe=Hl(W),ve!==null&&ve.dehydrated!==null){if(D===null){if(!xe)throw Error(r(318));if(xe=W.memoizedState,xe=xe!==null?xe.dehydrated:null,!xe)throw Error(r(317));xe[ys]=W}else Aa(),(W.flags&128)===0&&(W.memoizedState=null),W.flags|=4;bo(W),xe=!1}else Ko!==null&&(_c(Ko),Ko=null),xe=!0;if(!xe)return W.flags&65536?W:null}return(W.flags&128)!==0?(W.lanes=de,W):(ve=ve!==null,ve!==(D!==null&&D.memoizedState!==null)&&ve&&(W.child.flags|=8192,(W.mode&1)!==0&&(D===null||(Ri.current&1)!==0?Zi===0&&(Zi=3):Cd())),W.updateQueue!==null&&(W.flags|=4),bo(W),null);case 4:return An(),uc(D,W),D===null&&Ya(W.stateNode.containerInfo),bo(W),null;case 10:return od(W.type._context),bo(W),null;case 17:return xo(W.type)&&Uu(),bo(W),null;case 19:if(pi(Ri),xe=W.memoizedState,xe===null)return bo(W),null;if(ve=(W.flags&128)!==0,Je=xe.rendering,Je===null)if(ve)uu(xe,!1);else{if(Zi!==0||D!==null&&(D.flags&128)!==0)for(D=W.child;D!==null;){if(Je=Jo(D),Je!==null){for(W.flags|=128,uu(xe,!1),ve=Je.updateQueue,ve!==null&&(W.updateQueue=ve,W.flags|=4),W.subtreeFlags=0,ve=de,de=W.child;de!==null;)xe=de,D=ve,xe.flags&=14680066,Je=xe.alternate,Je===null?(xe.childLanes=0,xe.lanes=D,xe.child=null,xe.subtreeFlags=0,xe.memoizedProps=null,xe.memoizedState=null,xe.updateQueue=null,xe.dependencies=null,xe.stateNode=null):(xe.childLanes=Je.childLanes,xe.lanes=Je.lanes,xe.child=Je.child,xe.subtreeFlags=0,xe.deletions=null,xe.memoizedProps=Je.memoizedProps,xe.memoizedState=Je.memoizedState,xe.updateQueue=Je.updateQueue,xe.type=Je.type,D=Je.dependencies,xe.dependencies=D===null?null:{lanes:D.lanes,firstContext:D.firstContext}),de=de.sibling;return fi(Ri,Ri.current&1|2),W.child}D=D.sibling}xe.tail!==null&&Dr()>ka&&(W.flags|=128,ve=!0,uu(xe,!1),W.lanes=4194304)}else{if(!ve)if(D=Jo(Je),D!==null){if(W.flags|=128,ve=!0,de=D.updateQueue,de!==null&&(W.updateQueue=de,W.flags|=4),uu(xe,!0),xe.tail===null&&xe.tailMode==="hidden"&&!Je.alternate&&!wi)return bo(W),null}else 2*Dr()-xe.renderingStartTime>ka&&de!==1073741824&&(W.flags|=128,ve=!0,uu(xe,!1),W.lanes=4194304);xe.isBackwards?(Je.sibling=W.child,W.child=Je):(de=xe.last,de!==null?de.sibling=Je:W.child=Je,xe.last=Je)}return xe.tail!==null?(W=xe.tail,xe.rendering=W,xe.tail=W.sibling,xe.renderingStartTime=Dr(),W.sibling=null,de=Ri.current,fi(Ri,ve?de&1|2:de&1),W):(bo(W),null);case 22:case 23:return Rd(),ve=W.memoizedState!==null,D!==null&&D.memoizedState!==null!==ve&&(W.flags|=8192),ve&&(W.mode&1)!==0?(Qo&1073741824)!==0&&(bo(W),W.subtreeFlags&6&&(W.flags|=8192)):bo(W),null;case 24:return null;case 25:return null}throw Error(r(156,W.tag))}function uf(D,W){switch(Xc(W),W.tag){case 1:return xo(W.type)&&Uu(),D=W.flags,D&65536?(W.flags=D&-65537|128,W):null;case 3:return An(),pi(ro),pi(vo),Ki(),D=W.flags,(D&65536)!==0&&(D&128)===0?(W.flags=D&-65537|128,W):null;case 5:return al(W),null;case 13:if(pi(Ri),D=W.memoizedState,D!==null&&D.dehydrated!==null){if(W.alternate===null)throw Error(r(340));Aa()}return D=W.flags,D&65536?(W.flags=D&-65537|128,W):null;case 19:return pi(Ri),null;case 4:return An(),null;case 10:return od(W.type._context),null;case 22:case 23:return Rd(),null;case 24:return null;default:return null}}var cc=!1,To=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,Cr=null;function Sl(D,W){var de=D.ref;if(de!==null)if(typeof de=="function")try{de(null)}catch(ve){Ii(D,W,ve)}else de.current=null}function _d(D,W,de){try{de()}catch(ve){Ii(D,W,ve)}}var Np=!1;function cf(D,W){if(js=Nt,D=ju(),Lu(D)){if("selectionStart"in D)var de={start:D.selectionStart,end:D.selectionEnd};else e:{de=(de=D.ownerDocument)&&de.defaultView||window;var ve=de.getSelection&&de.getSelection();if(ve&&ve.rangeCount!==0){de=ve.anchorNode;var Ie=ve.anchorOffset,xe=ve.focusNode;ve=ve.focusOffset;try{de.nodeType,xe.nodeType}catch{de=null;break e}var Je=0,rt=-1,vt=-1,Wt=0,or=0,hr=D,lr=null;t:for(;;){for(var Or;hr!==de||Ie!==0&&hr.nodeType!==3||(rt=Je+Ie),hr!==xe||ve!==0&&hr.nodeType!==3||(vt=Je+ve),hr.nodeType===3&&(Je+=hr.nodeValue.length),(Or=hr.firstChild)!==null;)lr=hr,hr=Or;for(;;){if(hr===D)break t;if(lr===de&&++Wt===Ie&&(rt=Je),lr===xe&&++or===ve&&(vt=Je),(Or=hr.nextSibling)!==null)break;hr=lr,lr=hr.parentNode}hr=Or}de=rt===-1||vt===-1?null:{start:rt,end:vt}}else de=null}de=de||{start:0,end:0}}else de=null;for(Jc={focusedElem:D,selectionRange:de},Nt=!1,Cr=W;Cr!==null;)if(W=Cr,D=W.child,(W.subtreeFlags&1028)!==0&&D!==null)D.return=W,Cr=D;else for(;Cr!==null;){W=Cr;try{var Nr=W.alternate;if((W.flags&1024)!==0)switch(W.tag){case 0:case 11:case 15:break;case 1:if(Nr!==null){var kr=Nr.memoizedProps,Bi=Nr.memoizedState,kt=W.stateNode,St=kt.getSnapshotBeforeUpdate(W.elementType===W.type?kr:jo(W.type,kr),Bi);kt.__reactInternalSnapshotBeforeUpdate=St}break;case 3:var Ut=W.stateNode.containerInfo;Ut.nodeType===1?Ut.textContent="":Ut.nodeType===9&&Ut.documentElement&&Ut.removeChild(Ut.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(mr){Ii(W,W.return,mr)}if(D=W.sibling,D!==null){D.return=W.return,Cr=D;break}Cr=W.return}return Nr=Np,Np=!1,Nr}function cu(D,W,de){var ve=W.updateQueue;if(ve=ve!==null?ve.lastEffect:null,ve!==null){var Ie=ve=ve.next;do{if((Ie.tag&D)===D){var xe=Ie.destroy;Ie.destroy=void 0,xe!==void 0&&_d(W,de,xe)}Ie=Ie.next}while(Ie!==ve)}}function dc(D,W){if(W=W.updateQueue,W=W!==null?W.lastEffect:null,W!==null){var de=W=W.next;do{if((de.tag&D)===D){var ve=de.create;de.destroy=ve()}de=de.next}while(de!==W)}}function Al(D){var W=D.ref;if(W!==null){var de=D.stateNode;switch(D.tag){case 5:D=de;break;default:D=de}typeof W=="function"?W(D):W.current=D}}function pc(D){var W=D.alternate;W!==null&&(D.alternate=null,pc(W)),D.child=null,D.deletions=null,D.sibling=null,D.tag===5&&(W=D.stateNode,W!==null&&(delete W[ys],delete W[Za],delete W[Yc],delete W[Bl],delete W[ap])),D.stateNode=null,D.return=null,D.dependencies=null,D.memoizedProps=null,D.memoizedState=null,D.pendingProps=null,D.stateNode=null,D.updateQueue=null}function Ed(D){return D.tag===5||D.tag===3||D.tag===4}function du(D){e:for(;;){for(;D.sibling===null;){if(D.return===null||Ed(D.return))return null;D=D.return}for(D.sibling.return=D.return,D=D.sibling;D.tag!==5&&D.tag!==6&&D.tag!==18;){if(D.flags&2||D.child===null||D.tag===4)continue e;D.child.return=D,D=D.child}if(!(D.flags&2))return D.stateNode}}function bd(D,W,de){var ve=D.tag;if(ve===5||ve===6)D=D.stateNode,W?de.nodeType===8?de.parentNode.insertBefore(D,W):de.insertBefore(D,W):(de.nodeType===8?(W=de.parentNode,W.insertBefore(D,de)):(W=de,W.appendChild(D)),de=de._reactRootContainer,de!=null||W.onclick!==null||(W.onclick=ts));else if(ve!==4&&(D=D.child,D!==null))for(bd(D,W,de),D=D.sibling;D!==null;)bd(D,W,de),D=D.sibling}function pu(D,W,de){var ve=D.tag;if(ve===5||ve===6)D=D.stateNode,W?de.insertBefore(D,W):de.appendChild(D);else if(ve!==4&&(D=D.child,D!==null))for(pu(D,W,de),D=D.sibling;D!==null;)pu(D,W,de),D=D.sibling}var oo=null,rs=!1;function ua(D,W,de){for(de=de.child;de!==null;)xp(D,W,de),de=de.sibling}function xp(D,W,de){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Ai,de)}catch{}switch(de.tag){case 5:To||Sl(de,W);case 6:var ve=oo,Ie=rs;oo=null,ua(D,W,de),oo=ve,rs=Ie,oo!==null&&(rs?(D=oo,de=de.stateNode,D.nodeType===8?D.parentNode.removeChild(de):D.removeChild(de)):oo.removeChild(de.stateNode));break;case 18:oo!==null&&(rs?(D=oo,de=de.stateNode,D.nodeType===8?zc(D.parentNode,de):D.nodeType===1&&zc(D,de),ui(D)):zc(oo,de.stateNode));break;case 4:ve=oo,Ie=rs,oo=de.stateNode.containerInfo,rs=!0,ua(D,W,de),oo=ve,rs=Ie;break;case 0:case 11:case 14:case 15:if(!To&&(ve=de.updateQueue,ve!==null&&(ve=ve.lastEffect,ve!==null))){Ie=ve=ve.next;do{var xe=Ie,Je=xe.destroy;xe=xe.tag,Je!==void 0&&((xe&2)!==0||(xe&4)!==0)&&_d(de,W,Je),Ie=Ie.next}while(Ie!==ve)}ua(D,W,de);break;case 1:if(!To&&(Sl(de,W),ve=de.stateNode,typeof ve.componentWillUnmount=="function"))try{ve.props=de.memoizedProps,ve.state=de.memoizedState,ve.componentWillUnmount()}catch(rt){Ii(de,W,rt)}ua(D,W,de);break;case 21:ua(D,W,de);break;case 22:de.mode&1?(To=(ve=To)||de.memoizedState!==null,ua(D,W,de),To=ve):ua(D,W,de);break;default:ua(D,W,de)}}function Td(D){var W=D.updateQueue;if(W!==null){D.updateQueue=null;var de=D.stateNode;de===null&&(de=D.stateNode=new Pp),W.forEach(function(ve){var Ie=bu.bind(null,D,ve);de.has(ve)||(de.add(ve),ve.then(Ie,Ie))})}}function Yo(D,W){var de=W.deletions;if(de!==null)for(var ve=0;ve<de.length;ve++){var Ie=de[ve];try{var xe=D,Je=W,rt=Je;e:for(;rt!==null;){switch(rt.tag){case 5:oo=rt.stateNode,rs=!1;break e;case 3:oo=rt.stateNode.containerInfo,rs=!0;break e;case 4:oo=rt.stateNode.containerInfo,rs=!0;break e}rt=rt.return}if(oo===null)throw Error(r(160));xp(xe,Je,Ie),oo=null,rs=!1;var vt=Ie.alternate;vt!==null&&(vt.return=null),Ie.return=null}catch(Wt){Ii(Ie,W,Wt)}}if(W.subtreeFlags&12854)for(W=W.child;W!==null;)Dp(W,D),W=W.sibling}function Dp(D,W){var de=D.alternate,ve=D.flags;switch(D.tag){case 0:case 11:case 14:case 15:if(Yo(W,D),Ts(D),ve&4){try{cu(3,D,D.return),dc(3,D)}catch(kr){Ii(D,D.return,kr)}try{cu(5,D,D.return)}catch(kr){Ii(D,D.return,kr)}}break;case 1:Yo(W,D),Ts(D),ve&512&&de!==null&&Sl(de,de.return);break;case 5:if(Yo(W,D),Ts(D),ve&512&&de!==null&&Sl(de,de.return),D.flags&32){var Ie=D.stateNode;try{Rr(Ie,"")}catch(kr){Ii(D,D.return,kr)}}if(ve&4&&(Ie=D.stateNode,Ie!=null)){var xe=D.memoizedProps,Je=de!==null?de.memoizedProps:xe,rt=D.type,vt=D.updateQueue;if(D.updateQueue=null,vt!==null)try{rt==="input"&&xe.type==="radio"&&xe.name!=null&&qe(Ie,xe),nr(rt,Je);var Wt=nr(rt,xe);for(Je=0;Je<vt.length;Je+=2){var or=vt[Je],hr=vt[Je+1];or==="style"?$t(Ie,hr):or==="dangerouslySetInnerHTML"?_r(Ie,hr):or==="children"?Rr(Ie,hr):j(Ie,or,hr,Wt)}switch(rt){case"input":g(Ie,xe);break;case"textarea":He(Ie,xe);break;case"select":var lr=Ie._wrapperState.wasMultiple;Ie._wrapperState.wasMultiple=!!xe.multiple;var Or=xe.value;Or!=null?X(Ie,!!xe.multiple,Or,!1):lr!==!!xe.multiple&&(xe.defaultValue!=null?X(Ie,!!xe.multiple,xe.defaultValue,!0):X(Ie,!!xe.multiple,xe.multiple?[]:"",!1))}Ie[Za]=xe}catch(kr){Ii(D,D.return,kr)}}break;case 6:if(Yo(W,D),Ts(D),ve&4){if(D.stateNode===null)throw Error(r(162));Ie=D.stateNode,xe=D.memoizedProps;try{Ie.nodeValue=xe}catch(kr){Ii(D,D.return,kr)}}break;case 3:if(Yo(W,D),Ts(D),ve&4&&de!==null&&de.memoizedState.isDehydrated)try{ui(W.containerInfo)}catch(kr){Ii(D,D.return,kr)}break;case 4:Yo(W,D),Ts(D);break;case 13:Yo(W,D),Ts(D),Ie=D.child,Ie.flags&8192&&(xe=Ie.memoizedState!==null,Ie.stateNode.isHidden=xe,!xe||Ie.alternate!==null&&Ie.alternate.memoizedState!==null||(Rl=Dr())),ve&4&&Td(D);break;case 22:if(or=de!==null&&de.memoizedState!==null,D.mode&1?(To=(Wt=To)||or,Yo(W,D),To=Wt):Yo(W,D),Ts(D),ve&8192){if(Wt=D.memoizedState!==null,(D.stateNode.isHidden=Wt)&&!or&&(D.mode&1)!==0)for(Cr=D,or=D.child;or!==null;){for(hr=Cr=or;Cr!==null;){switch(lr=Cr,Or=lr.child,lr.tag){case 0:case 11:case 14:case 15:cu(4,lr,lr.return);break;case 1:Sl(lr,lr.return);var Nr=lr.stateNode;if(typeof Nr.componentWillUnmount=="function"){ve=lr,de=lr.return;try{W=ve,Nr.props=W.memoizedProps,Nr.state=W.memoizedState,Nr.componentWillUnmount()}catch(kr){Ii(ve,de,kr)}}break;case 5:Sl(lr,lr.return);break;case 22:if(lr.memoizedState!==null){fu(hr);continue}}Or!==null?(Or.return=lr,Cr=Or):fu(hr)}or=or.sibling}e:for(or=null,hr=D;;){if(hr.tag===5){if(or===null){or=hr;try{Ie=hr.stateNode,Wt?(xe=Ie.style,typeof xe.setProperty=="function"?xe.setProperty("display","none","important"):xe.display="none"):(rt=hr.stateNode,vt=hr.memoizedProps.style,Je=vt!=null&&vt.hasOwnProperty("display")?vt.display:null,rt.style.display=Tr("display",Je))}catch(kr){Ii(D,D.return,kr)}}}else if(hr.tag===6){if(or===null)try{hr.stateNode.nodeValue=Wt?"":hr.memoizedProps}catch(kr){Ii(D,D.return,kr)}}else if((hr.tag!==22&&hr.tag!==23||hr.memoizedState===null||hr===D)&&hr.child!==null){hr.child.return=hr,hr=hr.child;continue}if(hr===D)break e;for(;hr.sibling===null;){if(hr.return===null||hr.return===D)break e;or===hr&&(or=null),hr=hr.return}or===hr&&(or=null),hr.sibling.return=hr.return,hr=hr.sibling}}break;case 19:Yo(W,D),Ts(D),ve&4&&Td(D);break;case 21:break;default:Yo(W,D),Ts(D)}}function Ts(D){var W=D.flags;if(W&2){try{e:{for(var de=D.return;de!==null;){if(Ed(de)){var ve=de;break e}de=de.return}throw Error(r(160))}switch(ve.tag){case 5:var Ie=ve.stateNode;ve.flags&32&&(Rr(Ie,""),ve.flags&=-33);var xe=du(D);pu(D,xe,Ie);break;case 3:case 4:var Je=ve.stateNode.containerInfo,rt=du(D);bd(D,rt,Je);break;default:throw Error(r(161))}}catch(vt){Ii(D,D.return,vt)}D.flags&=-3}W&4096&&(D.flags&=-4097)}function df(D,W,de){Cr=D,kp(D)}function kp(D,W,de){for(var ve=(D.mode&1)!==0;Cr!==null;){var Ie=Cr,xe=Ie.child;if(Ie.tag===22&&ve){var Je=Ie.memoizedState!==null||cc;if(!Je){var rt=Ie.alternate,vt=rt!==null&&rt.memoizedState!==null||To;rt=cc;var Wt=To;if(cc=Je,(To=vt)&&!Wt)for(Cr=Ie;Cr!==null;)Je=Cr,vt=Je.child,Je.tag===22&&Je.memoizedState!==null?fc(Ie):vt!==null?(vt.return=Je,Cr=vt):fc(Ie);for(;xe!==null;)Cr=xe,kp(xe),xe=xe.sibling;Cr=Ie,cc=rt,To=Wt}Sd(D)}else(Ie.subtreeFlags&8772)!==0&&xe!==null?(xe.return=Ie,Cr=xe):Sd(D)}}function Sd(D){for(;Cr!==null;){var W=Cr;if((W.flags&8772)!==0){var de=W.alternate;try{if((W.flags&8772)!==0)switch(W.tag){case 0:case 11:case 15:To||dc(5,W);break;case 1:var ve=W.stateNode;if(W.flags&4&&!To)if(de===null)ve.componentDidMount();else{var Ie=W.elementType===W.type?de.memoizedProps:jo(W.type,de.memoizedProps);ve.componentDidUpdate(Ie,de.memoizedState,ve.__reactInternalSnapshotBeforeUpdate)}var xe=W.updateQueue;xe!==null&&hp(W,xe,ve);break;case 3:var Je=W.updateQueue;if(Je!==null){if(de=null,W.child!==null)switch(W.child.tag){case 5:de=W.child.stateNode;break;case 1:de=W.child.stateNode}hp(W,Je,de)}break;case 5:var rt=W.stateNode;if(de===null&&W.flags&4){de=rt;var vt=W.memoizedProps;switch(W.type){case"button":case"input":case"select":case"textarea":vt.autoFocus&&de.focus();break;case"img":vt.src&&(de.src=vt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(W.memoizedState===null){var Wt=W.alternate;if(Wt!==null){var or=Wt.memoizedState;if(or!==null){var hr=or.dehydrated;hr!==null&&ui(hr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}To||W.flags&512&&Al(W)}catch(lr){Ii(W,W.return,lr)}}if(W===D){Cr=null;break}if(de=W.sibling,de!==null){de.return=W.return,Cr=de;break}Cr=W.return}}function fu(D){for(;Cr!==null;){var W=Cr;if(W===D){Cr=null;break}var de=W.sibling;if(de!==null){de.return=W.return,Cr=de;break}Cr=W.return}}function fc(D){for(;Cr!==null;){var W=Cr;try{switch(W.tag){case 0:case 11:case 15:var de=W.return;try{dc(4,W)}catch(vt){Ii(W,de,vt)}break;case 1:var ve=W.stateNode;if(typeof ve.componentDidMount=="function"){var Ie=W.return;try{ve.componentDidMount()}catch(vt){Ii(W,Ie,vt)}}var xe=W.return;try{Al(W)}catch(vt){Ii(W,xe,vt)}break;case 5:var Je=W.return;try{Al(W)}catch(vt){Ii(W,Je,vt)}}}catch(vt){Ii(W,W.return,vt)}if(W===D){Cr=null;break}var rt=W.sibling;if(rt!==null){rt.return=W.return,Cr=rt;break}Cr=W.return}}var jp=Math.ceil,hc=K.ReactCurrentDispatcher,gc=K.ReactCurrentOwner,Lo=K.ReactCurrentBatchConfig,Kn=0,so=null,Wi=null,go=0,Qo=0,Ol=Xs(0),Zi=0,wl=null,Da=0,hu=0,mc=0,gu=null,Io=null,Rl=0,ka=1/0,Us=null,yc=!1,Ad=null,Ss=null,mu=!1,ca=null,vc=0,Il=0,As=null,yu=-1,vu=0;function Di(){return(Kn&6)!==0?Dr():yu!==-1?yu:yu=Dr()}function cs(D){return(D.mode&1)===0?1:(Kn&2)!==0&&go!==0?go&-go:nf.transition!==null?(vu===0&&(vu=$n()),vu):(D=Lr,D!==0||(D=window.event,D=D===void 0?16:ei(D.type)),D)}function qo(D,W,de,ve){if(50<Il)throw Il=0,As=null,Error(r(185));qn(D,de,ve),((Kn&2)===0||D!==so)&&(D===so&&((Kn&2)===0&&(hu|=de),Zi===4&&da(D,go)),Fo(D,ve),de===1&&Kn===0&&(W.mode&1)===0&&(ka=Dr()+500,Bu&&ea()))}function Fo(D,W){var de=D.callbackNode;Sn(D,W);var ve=Pn(D,D===so?go:0);if(ve===0)de!==null&&Pr(de),D.callbackNode=null,D.callbackPriority=0;else if(W=ve&-ve,D.callbackPriority!==W){if(de!=null&&Pr(de),W===1)D.tag===0?cp(Bs.bind(null,D)):Qc(Bs.bind(null,D)),op(function(){(Kn&6)===0&&ea()}),de=null;else{switch(mi(ve)){case 1:de=ai;break;case 4:de=xn;break;case 16:de=mn;break;case 536870912:de=Yn;break;default:de=mn}de=Mp(de,Lp.bind(null,D))}D.callbackPriority=W,D.callbackNode=de}}function Lp(D,W){if(yu=-1,vu=0,(Kn&6)!==0)throw Error(r(327));var de=D.callbackNode;if(Os()&&D.callbackNode!==de)return null;var ve=Pn(D,D===so?go:0);if(ve===0)return null;if((ve&30)!==0||(ve&D.expiredLanes)!==0||W)W=Cl(D,ve);else{W=ve;var Ie=Kn;Kn|=2;var xe=Id();(so!==D||go!==W)&&(Us=null,ka=Dr()+500,qa(D,W));do try{pf();break}catch(rt){_u(D,rt)}while(!0);Jl(),hc.current=xe,Kn=Ie,Wi!==null?W=0:(so=null,go=0,W=Zi)}if(W!==0){if(W===2&&(Ie=dn(D),Ie!==0&&(ve=Ie,W=Od(D,Ie))),W===1)throw de=wl,qa(D,0),da(D,ve),Fo(D,Dr()),de;if(W===6)da(D,ve);else{if(Ie=D.current.alternate,(ve&30)===0&&!wd(Ie)&&(W=Cl(D,ve),W===2&&(xe=dn(D),xe!==0&&(ve=xe,W=Od(D,xe))),W===1))throw de=wl,qa(D,0),da(D,ve),Fo(D,Dr()),de;switch(D.finishedWork=Ie,D.finishedLanes=ve,W){case 0:case 1:throw Error(r(345));case 2:pa(D,Io,Us);break;case 3:if(da(D,ve),(ve&130023424)===ve&&(W=Rl+500-Dr(),10<W)){if(Pn(D,0)!==0)break;if(Ie=D.suspendedLanes,(Ie&ve)!==ve){Di(),D.pingedLanes|=D.suspendedLanes&Ie;break}D.timeoutHandle=Ul(pa.bind(null,D,Io,Us),W);break}pa(D,Io,Us);break;case 4:if(da(D,ve),(ve&4194240)===ve)break;for(W=D.eventTimes,Ie=-1;0<ve;){var Je=31-ze(ve);xe=1<<Je,Je=W[Je],Je>Ie&&(Ie=Je),ve&=~xe}if(ve=Ie,ve=Dr()-ve,ve=(120>ve?120:480>ve?480:1080>ve?1080:1920>ve?1920:3e3>ve?3e3:4320>ve?4320:1960*jp(ve/1960))-ve,10<ve){D.timeoutHandle=Ul(pa.bind(null,D,Io,Us),ve);break}pa(D,Io,Us);break;case 5:pa(D,Io,Us);break;default:throw Error(r(329))}}}return Fo(D,Dr()),D.callbackNode===de?Lp.bind(null,D):null}function Od(D,W){var de=gu;return D.current.memoizedState.isDehydrated&&(qa(D,W).flags|=256),D=Cl(D,W),D!==2&&(W=Io,Io=de,W!==null&&_c(W)),D}function _c(D){Io===null?Io=D:Io.push.apply(Io,D)}function wd(D){for(var W=D;;){if(W.flags&16384){var de=W.updateQueue;if(de!==null&&(de=de.stores,de!==null))for(var ve=0;ve<de.length;ve++){var Ie=de[ve],xe=Ie.getSnapshot;Ie=Ie.value;try{if(!Po(xe(),Ie))return!1}catch{return!1}}}if(de=W.child,W.subtreeFlags&16384&&de!==null)de.return=W,W=de;else{if(W===D)break;for(;W.sibling===null;){if(W.return===null||W.return===D)return!0;W=W.return}W.sibling.return=W.return,W=W.sibling}}return!0}function da(D,W){for(W&=~mc,W&=~hu,D.suspendedLanes|=W,D.pingedLanes&=~W,D=D.expirationTimes;0<W;){var de=31-ze(W),ve=1<<de;D[de]=-1,W&=~ve}}function Bs(D){if((Kn&6)!==0)throw Error(r(327));Os();var W=Pn(D,0);if((W&1)===0)return Fo(D,Dr()),null;var de=Cl(D,W);if(D.tag!==0&&de===2){var ve=dn(D);ve!==0&&(W=ve,de=Od(D,ve))}if(de===1)throw de=wl,qa(D,0),da(D,W),Fo(D,Dr()),de;if(de===6)throw Error(r(345));return D.finishedWork=D.current.alternate,D.finishedLanes=W,pa(D,Io,Us),Fo(D,Dr()),null}function ja(D,W){var de=Kn;Kn|=1;try{return D(W)}finally{Kn=de,Kn===0&&(ka=Dr()+500,Bu&&ea())}}function La(D){ca!==null&&ca.tag===0&&(Kn&6)===0&&Os();var W=Kn;Kn|=1;var de=Lo.transition,ve=Lr;try{if(Lo.transition=null,Lr=1,D)return D()}finally{Lr=ve,Lo.transition=de,Kn=W,(Kn&6)===0&&ea()}}function Rd(){Qo=Ol.current,pi(Ol)}function qa(D,W){D.finishedWork=null,D.finishedLanes=0;var de=D.timeoutHandle;if(de!==-1&&(D.timeoutHandle=-1,ip(de)),Wi!==null)for(de=Wi.return;de!==null;){var ve=de;switch(Xc(ve),ve.tag){case 1:ve=ve.type.childContextTypes,ve!=null&&Uu();break;case 3:An(),pi(ro),pi(vo),Ki();break;case 5:al(ve);break;case 4:An();break;case 13:pi(Ri);break;case 19:pi(Ri);break;case 10:od(ve.type._context);break;case 22:case 23:Rd()}de=de.return}if(so=D,Wi=D=$s(D.current,null),go=Qo=W,Zi=0,wl=null,mc=hu=Da=0,Io=gu=null,En!==null){for(W=0;W<En.length;W++)if(de=En[W],ve=de.interleaved,ve!==null){de.interleaved=null;var Ie=ve.next,xe=de.pending;if(xe!==null){var Je=xe.next;xe.next=Ie,ve.next=Je}de.pending=ve}En=null}return D}function _u(D,W){do{var de=Wi;try{if(Jl(),zu.current=ru,Xl){for(var ve=Si.memoizedState;ve!==null;){var Ie=ve.queue;Ie!==null&&(Ie.pending=null),ve=ve.next}Xl=!1}if(Ia=0,no=Ui=Si=null,ul=!1,cl=0,gc.current=null,de===null||de.return===null){Zi=1,wl=W,Wi=null;break}e:{var xe=D,Je=de.return,rt=de,vt=W;if(W=go,rt.flags|=32768,vt!==null&&typeof vt=="object"&&typeof vt.then=="function"){var Wt=vt,or=rt,hr=or.tag;if((or.mode&1)===0&&(hr===0||hr===11||hr===15)){var lr=or.alternate;lr?(or.updateQueue=lr.updateQueue,or.memoizedState=lr.memoizedState,or.lanes=lr.lanes):(or.updateQueue=null,or.memoizedState=null)}var Or=nu(Je);if(Or!==null){Or.flags&=-257,_l(Or,Je,rt,xe,W),Or.mode&1&&ac(xe,Wt,W),W=Or,vt=Wt;var Nr=W.updateQueue;if(Nr===null){var kr=new Set;kr.add(vt),W.updateQueue=kr}else Nr.add(vt);break e}else{if((W&1)===0){ac(xe,Wt,W),Cd();break e}vt=Error(r(426))}}else if(wi&&rt.mode&1){var Bi=nu(Je);if(Bi!==null){(Bi.flags&65536)===0&&(Bi.flags|=256),_l(Bi,Je,rt,xe,W),nd(vl(vt,rt));break e}}xe=vt=vl(vt,rt),Zi!==4&&(Zi=2),gu===null?gu=[xe]:gu.push(xe),xe=Je;do{switch(xe.tag){case 3:xe.flags|=65536,W&=-W,xe.lanes|=W;var kt=oc(xe,vt,W);Ju(xe,kt);break e;case 1:rt=vt;var St=xe.type,Ut=xe.stateNode;if((xe.flags&128)===0&&(typeof St.getDerivedStateFromError=="function"||Ut!==null&&typeof Ut.componentDidCatch=="function"&&(Ss===null||!Ss.has(Ut)))){xe.flags|=65536,W&=-W,xe.lanes|=W;var mr=sc(xe,rt,W);Ju(xe,mr);break e}}xe=xe.return}while(xe!==null)}Pd(de)}catch(qr){W=qr,Wi===de&&de!==null&&(Wi=de=de.return);continue}break}while(!0)}function Id(){var D=hc.current;return hc.current=ru,D===null?ru:D}function Cd(){(Zi===0||Zi===3||Zi===2)&&(Zi=4),so===null||(Da&268435455)===0&&(hu&268435455)===0||da(so,go)}function Cl(D,W){var de=Kn;Kn|=2;var ve=Id();(so!==D||go!==W)&&(Us=null,qa(D,W));do try{Ec();break}catch(Ie){_u(D,Ie)}while(!0);if(Jl(),Kn=de,hc.current=ve,Wi!==null)throw Error(r(261));return so=null,go=0,Zi}function Ec(){for(;Wi!==null;)Fa(Wi)}function pf(){for(;Wi!==null&&!Ir();)Fa(Wi)}function Fa(D){var W=Fp(D.alternate,D,Qo);D.memoizedProps=D.pendingProps,W===null?Pd(D):Wi=W,gc.current=null}function Pd(D){var W=D;do{var de=W.alternate;if(D=W.return,(W.flags&32768)===0){if(de=lf(de,W,Qo),de!==null){Wi=de;return}}else{if(de=uf(de,W),de!==null){de.flags&=32767,Wi=de;return}if(D!==null)D.flags|=32768,D.subtreeFlags=0,D.deletions=null;else{Zi=6,Wi=null;return}}if(W=W.sibling,W!==null){Wi=W;return}Wi=W=D}while(W!==null);Zi===0&&(Zi=5)}function pa(D,W,de){var ve=Lr,Ie=Lo.transition;try{Lo.transition=null,Lr=1,qp(D,W,de,ve)}finally{Lo.transition=Ie,Lr=ve}return null}function qp(D,W,de,ve){do Os();while(ca!==null);if((Kn&6)!==0)throw Error(r(327));de=D.finishedWork;var Ie=D.finishedLanes;if(de===null)return null;if(D.finishedWork=null,D.finishedLanes=0,de===D.current)throw Error(r(177));D.callbackNode=null,D.callbackPriority=0;var xe=de.lanes|de.childLanes;if(vr(D,xe),D===so&&(Wi=so=null,go=0),(de.subtreeFlags&2064)===0&&(de.flags&2064)===0||mu||(mu=!0,Mp(mn,function(){return Os(),null})),xe=(de.flags&15990)!==0,(de.subtreeFlags&15990)!==0||xe){xe=Lo.transition,Lo.transition=null;var Je=Lr;Lr=1;var rt=Kn;Kn|=4,gc.current=null,cf(D,de),Dp(de,D),Xp(Jc),Nt=!!js,Jc=js=null,D.current=de,df(de),si(),Kn=rt,Lr=Je,Lo.transition=xe}else D.current=de;if(mu&&(mu=!1,ca=D,vc=Ie),xe=D.pendingLanes,xe===0&&(Ss=null),We(de.stateNode),Fo(D,Dr()),W!==null)for(ve=D.onRecoverableError,de=0;de<W.length;de++)Ie=W[de],ve(Ie.value,{componentStack:Ie.stack,digest:Ie.digest});if(yc)throw yc=!1,D=Ad,Ad=null,D;return(vc&1)!==0&&D.tag!==0&&Os(),xe=D.pendingLanes,(xe&1)!==0?D===As?Il++:(Il=0,As=D):Il=0,ea(),null}function Os(){if(ca!==null){var D=mi(vc),W=Lo.transition,de=Lr;try{if(Lo.transition=null,Lr=16>D?16:D,ca===null)var ve=!1;else{if(D=ca,ca=null,vc=0,(Kn&6)!==0)throw Error(r(331));var Ie=Kn;for(Kn|=4,Cr=D.current;Cr!==null;){var xe=Cr,Je=xe.child;if((Cr.flags&16)!==0){var rt=xe.deletions;if(rt!==null){for(var vt=0;vt<rt.length;vt++){var Wt=rt[vt];for(Cr=Wt;Cr!==null;){var or=Cr;switch(or.tag){case 0:case 11:case 15:cu(8,or,xe)}var hr=or.child;if(hr!==null)hr.return=or,Cr=hr;else for(;Cr!==null;){or=Cr;var lr=or.sibling,Or=or.return;if(pc(or),or===Wt){Cr=null;break}if(lr!==null){lr.return=Or,Cr=lr;break}Cr=Or}}}var Nr=xe.alternate;if(Nr!==null){var kr=Nr.child;if(kr!==null){Nr.child=null;do{var Bi=kr.sibling;kr.sibling=null,kr=Bi}while(kr!==null)}}Cr=xe}}if((xe.subtreeFlags&2064)!==0&&Je!==null)Je.return=xe,Cr=Je;else e:for(;Cr!==null;){if(xe=Cr,(xe.flags&2048)!==0)switch(xe.tag){case 0:case 11:case 15:cu(9,xe,xe.return)}var kt=xe.sibling;if(kt!==null){kt.return=xe.return,Cr=kt;break e}Cr=xe.return}}var St=D.current;for(Cr=St;Cr!==null;){Je=Cr;var Ut=Je.child;if((Je.subtreeFlags&2064)!==0&&Ut!==null)Ut.return=Je,Cr=Ut;else e:for(Je=St;Cr!==null;){if(rt=Cr,(rt.flags&2048)!==0)try{switch(rt.tag){case 0:case 11:case 15:dc(9,rt)}}catch(qr){Ii(rt,rt.return,qr)}if(rt===Je){Cr=null;break e}var mr=rt.sibling;if(mr!==null){mr.return=rt.return,Cr=mr;break e}Cr=rt.return}}if(Kn=Ie,ea(),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Ai,D)}catch{}ve=!0}return ve}finally{Lr=de,Lo.transition=W}}return!1}function Eu(D,W,de){W=vl(de,W),W=oc(D,W,1),D=Vs(D,W,1),W=Di(),D!==null&&(qn(D,1,W),Fo(D,W))}function Ii(D,W,de){if(D.tag===3)Eu(D,D,de);else for(;W!==null;){if(W.tag===3){Eu(W,D,de);break}else if(W.tag===1){var ve=W.stateNode;if(typeof W.type.getDerivedStateFromError=="function"||typeof ve.componentDidCatch=="function"&&(Ss===null||!Ss.has(ve))){D=vl(de,D),D=sc(W,D,1),W=Vs(W,D,1),D=Di(),W!==null&&(qn(W,1,D),Fo(W,D));break}}W=W.return}}function Nd(D,W,de){var ve=D.pingCache;ve!==null&&ve.delete(W),W=Di(),D.pingedLanes|=D.suspendedLanes&de,so===D&&(go&de)===de&&(Zi===4||Zi===3&&(go&130023424)===go&&500>Dr()-Rl?qa(D,0):mc|=de),Fo(D,W)}function bc(D,W){W===0&&((D.mode&1)===0?W=1:(W=sr,sr<<=1,(sr&130023424)===0&&(sr=4194304)));var de=Di();D=ls(D,W),D!==null&&(qn(D,W,de),Fo(D,de))}function ff(D){var W=D.memoizedState,de=0;W!==null&&(de=W.retryLane),bc(D,de)}function bu(D,W){var de=0;switch(D.tag){case 13:var ve=D.stateNode,Ie=D.memoizedState;Ie!==null&&(de=Ie.retryLane);break;case 19:ve=D.stateNode;break;default:throw Error(r(314))}ve!==null&&ve.delete(W),bc(D,de)}var Fp;Fp=function(D,W,de){if(D!==null)if(D.memoizedProps!==W.pendingProps||ro.current)Xi=!0;else{if((D.lanes&de)===0&&(W.flags&128)===0)return Xi=!1,vd(D,W,de);Xi=(D.flags&131072)!==0}else Xi=!1,wi&&(W.flags&1048576)!==0&&Ku(W,Hu,W.index);switch(W.lanes=0,W.tag){case 2:var ve=W.type;au(D,W),D=W.pendingProps;var Ie=po(W,vo.current);Ra(W,de),Ie=ad(null,W,ve,D,Ie,de);var xe=ld();return W.flags|=1,typeof Ie=="object"&&Ie!==null&&typeof Ie.render=="function"&&Ie.$$typeof===void 0?(W.tag=1,W.memoizedState=null,W.updateQueue=null,xo(ve)?(xe=!0,Gl(W)):xe=!1,W.memoizedState=Ie.state!==null&&Ie.state!==void 0?Ie.state:null,sd(W),Ie.updater=yl,W.stateNode=Ie,Ie._reactInternals=W,ic(W,ve,D,de),W=lc(null,W,ve,!0,xe,de)):(W.tag=0,wi&&xe&&ta(W),xi(null,W,Ie,de),W=W.child),W;case 16:ve=W.elementType;e:{switch(au(D,W),D=W.pendingProps,Ie=ve._init,ve=Ie(ve._payload),W.type=ve,Ie=W.tag=gf(ve),D=jo(ve,D),Ie){case 0:W=bl(null,W,ve,D,de);break e;case 1:W=Tl(null,W,ve,D,de);break e;case 11:W=Op(null,W,ve,D,de);break e;case 14:W=wp(null,W,ve,jo(ve.type,D),de);break e}throw Error(r(306,ve,""))}return W;case 0:return ve=W.type,Ie=W.pendingProps,Ie=W.elementType===ve?Ie:jo(ve,Ie),bl(D,W,ve,Ie,de);case 1:return ve=W.type,Ie=W.pendingProps,Ie=W.elementType===ve?Ie:jo(ve,Ie),Tl(D,W,ve,Ie,de);case 3:e:{if(iu(W),D===null)throw Error(r(387));ve=W.pendingProps,xe=W.memoizedState,Ie=xe.element,fp(D,W),ra(W,ve,null,de);var Je=W.memoizedState;if(ve=Je.element,xe.isDehydrated)if(xe={element:ve,isDehydrated:!1,cache:Je.cache,pendingSuspenseBoundaries:Je.pendingSuspenseBoundaries,transitions:Je.transitions},W.updateQueue.baseState=xe,W.memoizedState=xe,W.flags&256){Ie=vl(Error(r(423)),W),W=sa(D,W,ve,de,Ie);break e}else if(ve!==Ie){Ie=vl(Error(r(424)),W),W=sa(D,W,ve,de,Ie);break e}else for(Ho=Ys(W.stateNode.containerInfo.firstChild),Go=W,wi=!0,Ko=null,de=ti(W,null,ve,de),W.child=de;de;)de.flags=de.flags&-3|4096,de=de.sibling;else{if(Aa(),ve===Ie){W=Eo(D,W,de);break e}xi(D,W,ve,de)}W=W.child}return W;case 5:return Ql(W),D===null&&ed(W),ve=W.type,Ie=W.pendingProps,xe=D!==null?D.memoizedProps:null,Je=Ie.children,_a(ve,Ie)?Je=null:xe!==null&&_a(ve,xe)&&(W.flags|=32),Ip(D,W),xi(D,W,Je,de),W.child;case 6:return D===null&&ed(W),null;case 13:return gi(D,W,de);case 4:return ko(W,W.stateNode.containerInfo),ve=W.pendingProps,D===null?W.child=Oa(W,null,ve,de):xi(D,W,ve,de),W.child;case 11:return ve=W.type,Ie=W.pendingProps,Ie=W.elementType===ve?Ie:jo(ve,Ie),Op(D,W,ve,Ie,de);case 7:return xi(D,W,W.pendingProps,de),W.child;case 8:return xi(D,W,W.pendingProps.children,de),W.child;case 12:return xi(D,W,W.pendingProps.children,de),W.child;case 10:e:{if(ve=W.type._context,Ie=W.pendingProps,xe=W.memoizedProps,Je=Ie.value,fi(Fn,ve._currentValue),ve._currentValue=Je,xe!==null)if(Po(xe.value,Je)){if(xe.children===Ie.children&&!ro.current){W=Eo(D,W,de);break e}}else for(xe=W.child,xe!==null&&(xe.return=W);xe!==null;){var rt=xe.dependencies;if(rt!==null){Je=xe.child;for(var vt=rt.firstContext;vt!==null;){if(vt.context===ve){if(xe.tag===1){vt=Ms(-1,de&-de),vt.tag=2;var Wt=xe.updateQueue;if(Wt!==null){Wt=Wt.shared;var or=Wt.pending;or===null?vt.next=vt:(vt.next=or.next,or.next=vt),Wt.pending=vt}}xe.lanes|=de,vt=xe.alternate,vt!==null&&(vt.lanes|=de),wa(xe.return,de,W),rt.lanes|=de;break}vt=vt.next}}else if(xe.tag===10)Je=xe.type===W.type?null:xe.child;else if(xe.tag===18){if(Je=xe.return,Je===null)throw Error(r(341));Je.lanes|=de,rt=Je.alternate,rt!==null&&(rt.lanes|=de),wa(Je,de,W),Je=xe.sibling}else Je=xe.child;if(Je!==null)Je.return=xe;else for(Je=xe;Je!==null;){if(Je===W){Je=null;break}if(xe=Je.sibling,xe!==null){xe.return=Je.return,Je=xe;break}Je=Je.return}xe=Je}xi(D,W,Ie.children,de),W=W.child}return W;case 9:return Ie=W.type,ve=W.pendingProps.children,Ra(W,de),Ie=Mn(Ie),ve=ve(Ie),W.flags|=1,xi(D,W,ve,de),W.child;case 14:return ve=W.type,Ie=jo(ve,W.pendingProps),Ie=jo(ve.type,Ie),wp(D,W,ve,Ie,de);case 15:return El(D,W,W.type,W.pendingProps,de);case 17:return ve=W.type,Ie=W.pendingProps,Ie=W.elementType===ve?Ie:jo(ve,Ie),au(D,W),W.tag=1,xo(ve)?(D=!0,Gl(W)):D=!1,Ra(W,de),Sp(W,ve,Ie),ic(W,ve,Ie,de),lc(null,W,ve,!0,D,de);case 19:return la(D,W,de);case 22:return Rp(D,W,de)}throw Error(r(156,W.tag))};function Mp(D,W){return Un(D,W)}function hf(D,W,de,ve){this.tag=D,this.key=de,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=W,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ve,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(D,W,de,ve){return new hf(D,W,de,ve)}function Tu(D){return D=D.prototype,!(!D||!D.isReactComponent)}function gf(D){if(typeof D=="function")return Tu(D)?1:0;if(D!=null){if(D=D.$$typeof,D===le)return 11;if(D===fe)return 14}return 2}function $s(D,W){var de=D.alternate;return de===null?(de=Mo(D.tag,W,D.key,D.mode),de.elementType=D.elementType,de.type=D.type,de.stateNode=D.stateNode,de.alternate=D,D.alternate=de):(de.pendingProps=W,de.type=D.type,de.flags=0,de.subtreeFlags=0,de.deletions=null),de.flags=D.flags&14680064,de.childLanes=D.childLanes,de.lanes=D.lanes,de.child=D.child,de.memoizedProps=D.memoizedProps,de.memoizedState=D.memoizedState,de.updateQueue=D.updateQueue,W=D.dependencies,de.dependencies=W===null?null:{lanes:W.lanes,firstContext:W.firstContext},de.sibling=D.sibling,de.index=D.index,de.ref=D.ref,de}function Tc(D,W,de,ve,Ie,xe){var Je=2;if(ve=D,typeof D=="function")Tu(D)&&(Je=1);else if(typeof D=="string")Je=5;else e:switch(D){case U:return Ma(de.children,Ie,xe,W);case P:Je=8,Ie|=8;break;case Z:return D=Mo(12,de,W,Ie|2),D.elementType=Z,D.lanes=xe,D;case ne:return D=Mo(13,de,W,Ie),D.elementType=ne,D.lanes=xe,D;case ye:return D=Mo(19,de,W,Ie),D.elementType=ye,D.lanes=xe,D;case Ae:return Su(de,Ie,xe,W);default:if(typeof D=="object"&&D!==null)switch(D.$$typeof){case ie:Je=10;break e;case ue:Je=9;break e;case le:Je=11;break e;case fe:Je=14;break e;case Te:Je=16,ve=null;break e}throw Error(r(130,D==null?D:typeof D,""))}return W=Mo(Je,de,W,Ie),W.elementType=D,W.type=ve,W.lanes=xe,W}function Ma(D,W,de,ve){return D=Mo(7,D,ve,W),D.lanes=de,D}function Su(D,W,de,ve){return D=Mo(22,D,ve,W),D.elementType=Ae,D.lanes=de,D.stateNode={isHidden:!1},D}function Au(D,W,de){return D=Mo(6,D,null,W),D.lanes=de,D}function Ou(D,W,de){return W=Mo(4,D.children!==null?D.children:[],D.key,W),W.lanes=de,W.stateNode={containerInfo:D.containerInfo,pendingChildren:null,implementation:D.implementation},W}function xd(D,W,de,ve,Ie){this.tag=W,this.containerInfo=D,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=On(0),this.expirationTimes=On(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.identifierPrefix=ve,this.onRecoverableError=Ie,this.mutableSourceEagerHydrationData=null}function Pl(D,W,de,ve,Ie,xe,Je,rt,vt){return D=new xd(D,W,de,rt,vt),W===1?(W=1,xe===!0&&(W|=8)):W=0,xe=Mo(3,null,null,W),D.current=xe,xe.stateNode=D,xe.memoizedState={element:ve,isDehydrated:de,cache:null,transitions:null,pendingSuspenseBoundaries:null},sd(xe),D}function Va(D,W,de){var ve=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:ve==null?null:""+ve,children:D,containerInfo:W,implementation:de}}function Sc(D){if(!D)return Zs;D=D._reactInternals;e:{if(Ct(D)!==D||D.tag!==1)throw Error(r(170));var W=D;do{switch(W.tag){case 3:W=W.stateNode.context;break e;case 1:if(xo(W.type)){W=W.stateNode.__reactInternalMemoizedMergedChildContext;break e}}W=W.return}while(W!==null);throw Error(r(171))}if(D.tag===1){var de=D.type;if(xo(de))return lp(D,de,W)}return W}function Dd(D,W,de,ve,Ie,xe,Je,rt,vt){return D=Pl(de,ve,!0,D,Ie,xe,Je,rt,vt),D.context=Sc(null),de=D.current,ve=Di(),Ie=cs(de),xe=Ms(ve,Ie),xe.callback=W??null,Vs(de,xe,Ie),D.current.lanes=Ie,qn(D,Ie,ve),Fo(D,ve),D}function Ac(D,W,de,ve){var Ie=W.current,xe=Di(),Je=cs(Ie);return de=Sc(de),W.context===null?W.context=de:W.pendingContext=de,W=Ms(xe,Je),W.payload={element:D},ve=ve===void 0?null:ve,ve!==null&&(W.callback=ve),D=Vs(Ie,W,Je),D!==null&&(qo(D,Ie,Je,xe),vs(D,Ie,Je)),Je}function Ua(D){if(D=D.current,!D.child)return null;switch(D.child.tag){case 5:return D.child.stateNode;default:return D.child.stateNode}}function kd(D,W){if(D=D.memoizedState,D!==null&&D.dehydrated!==null){var de=D.retryLane;D.retryLane=de!==0&&de<W?de:W}}function jd(D,W){kd(D,W),(D=D.alternate)&&kd(D,W)}function wu(){return null}var Oc=typeof reportError=="function"?reportError:function(D){console.error(D)};function Ld(D){this._internalRoot=D}wc.prototype.render=Ld.prototype.render=function(D){var W=this._internalRoot;if(W===null)throw Error(r(409));Ac(D,W,null,null)},wc.prototype.unmount=Ld.prototype.unmount=function(){var D=this._internalRoot;if(D!==null){this._internalRoot=null;var W=D.containerInfo;La(function(){Ac(null,D,null,null)}),W[No]=null}};function wc(D){this._internalRoot=D}wc.prototype.unstable_scheduleHydration=function(D){if(D){var W=Ao();D={blockedOn:null,target:D,priority:W};for(var de=0;de<vi.length&&W!==0&&W<vi[de].priority;de++);vi.splice(de,0,D),de===0&&wo(D)}};function qd(D){return!(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11)}function Nl(D){return!(!D||D.nodeType!==1&&D.nodeType!==9&&D.nodeType!==11&&(D.nodeType!==8||D.nodeValue!==" react-mount-point-unstable "))}function Ru(){}function Vp(D,W,de,ve,Ie){if(Ie){if(typeof ve=="function"){var xe=ve;ve=function(){var Wt=Ua(Je);xe.call(Wt)}}var Je=Dd(W,ve,D,0,null,!1,!1,"",Ru);return D._reactRootContainer=Je,D[No]=Je.current,Ya(D.nodeType===8?D.parentNode:D),La(),Je}for(;Ie=D.lastChild;)D.removeChild(Ie);if(typeof ve=="function"){var rt=ve;ve=function(){var Wt=Ua(vt);rt.call(Wt)}}var vt=Pl(D,0,!1,null,null,!1,!1,"",Ru);return D._reactRootContainer=vt,D[No]=vt.current,Ya(D.nodeType===8?D.parentNode:D),La(function(){Ac(W,vt,de,ve)}),vt}function Rc(D,W,de,ve,Ie){var xe=de._reactRootContainer;if(xe){var Je=xe;if(typeof Ie=="function"){var rt=Ie;Ie=function(){var vt=Ua(Je);rt.call(vt)}}Ac(W,Je,D,Ie)}else Je=Vp(de,W,D,Ie,ve);return Ua(Je)}bi=function(D){switch(D.tag){case 3:var W=D.stateNode;if(W.current.memoizedState.isDehydrated){var de=Qr(W.pendingLanes);de!==0&&(Dn(W,de|1),Fo(W,Dr()),(Kn&6)===0&&(ka=Dr()+500,ea()))}break;case 13:La(function(){var ve=ls(D,1);if(ve!==null){var Ie=Di();qo(ve,D,1,Ie)}}),jd(D,1)}},zi=function(D){if(D.tag===13){var W=ls(D,134217728);if(W!==null){var de=Di();qo(W,D,134217728,de)}jd(D,134217728)}},$i=function(D){if(D.tag===13){var W=cs(D),de=ls(D,W);if(de!==null){var ve=Di();qo(de,D,W,ve)}jd(D,W)}},Ao=function(){return Lr},ki=function(D,W){var de=Lr;try{return Lr=D,W()}finally{Lr=de}},Mr=function(D,W,de){switch(W){case"input":if(g(D,de),W=de.name,de.type==="radio"&&W!=null){for(de=D;de.parentNode;)de=de.parentNode;for(de=de.querySelectorAll("input[name="+JSON.stringify(""+W)+'][type="radio"]'),W=0;W<de.length;W++){var ve=de[W];if(ve!==D&&ve.form===D.form){var Ie=rl(ve);if(!Ie)throw Error(r(90));R(ve),g(ve,Ie)}}}break;case"textarea":He(D,de);break;case"select":W=de.value,W!=null&&X(D,!!de.multiple,W,!1)}},Tn=ja,yn=La;var Iu={usingClientEntryPoint:!1,Events:[el,tl,rl,gn,bn,ja]},Vo={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cu={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(D){return D=Ln(D),D===null?null:D.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||wu,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{Ai=Ic.inject(Cu),Ue=Ic}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iu,reactDom_production_min.createPortal=function(D,W){var de=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qd(W))throw Error(r(200));return Va(D,W,null,de)},reactDom_production_min.createRoot=function(D,W){if(!qd(D))throw Error(r(299));var de=!1,ve="",Ie=Oc;return W!=null&&(W.unstable_strictMode===!0&&(de=!0),W.identifierPrefix!==void 0&&(ve=W.identifierPrefix),W.onRecoverableError!==void 0&&(Ie=W.onRecoverableError)),W=Pl(D,1,!1,null,null,de,!1,ve,Ie),D[No]=W.current,Ya(D.nodeType===8?D.parentNode:D),new Ld(W)},reactDom_production_min.findDOMNode=function(D){if(D==null)return null;if(D.nodeType===1)return D;var W=D._reactInternals;if(W===void 0)throw typeof D.render=="function"?Error(r(188)):(D=Object.keys(D).join(","),Error(r(268,D)));return D=Ln(W),D=D===null?null:D.stateNode,D},reactDom_production_min.flushSync=function(D){return La(D)},reactDom_production_min.hydrate=function(D,W,de){if(!Nl(W))throw Error(r(200));return Rc(null,D,W,!0,de)},reactDom_production_min.hydrateRoot=function(D,W,de){if(!qd(D))throw Error(r(405));var ve=de!=null&&de.hydratedSources||null,Ie=!1,xe="",Je=Oc;if(de!=null&&(de.unstable_strictMode===!0&&(Ie=!0),de.identifierPrefix!==void 0&&(xe=de.identifierPrefix),de.onRecoverableError!==void 0&&(Je=de.onRecoverableError)),W=Dd(W,null,D,1,de??null,Ie,!1,xe,Je),D[No]=W.current,Ya(D),ve)for(D=0;D<ve.length;D++)de=ve[D],Ie=de._getVersion,Ie=Ie(de._source),W.mutableSourceEagerHydrationData==null?W.mutableSourceEagerHydrationData=[de,Ie]:W.mutableSourceEagerHydrationData.push(de,Ie);return new wc(W)},reactDom_production_min.render=function(D,W,de){if(!Nl(W))throw Error(r(200));return Rc(null,D,W,!1,de)},reactDom_production_min.unmountComponentAtNode=function(D){if(!Nl(D))throw Error(r(40));return D._reactRootContainer?(La(function(){Rc(null,null,D,!1,function(){D._reactRootContainer=null,D[No]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=ja,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(D,W,de,ve){if(!Nl(de))throw Error(r(200));if(D==null||D._reactInternals===void 0)throw Error(r(38));return Rc(D,W,de,!1,ve)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var t=requireReactDom();return client.createRoot=t.createRoot,client.hydrateRoot=t.hydrateRoot,client}var clientExports=requireClient();requireReactDom();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},_extends$1.apply(this,arguments)}var Action;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(t){t===void 0&&(t={});function e(u,d){let{pathname:m,search:c,hash:a}=u.location;return createLocation("",{pathname:m,search:c,hash:a},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function r(u,d){return typeof d=="string"?d:createPath(d)}return getUrlBasedHistory(e,r,null,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,r,u){return r===void 0&&(r=null),_extends$1({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:r,key:e&&e.key||u||createKey()})}function createPath(t){let{pathname:e="/",search:r="",hash:u=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),u&&u!=="#"&&(e+=u.charAt(0)==="#"?u:"#"+u),e}function parsePath(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let u=t.indexOf("?");u>=0&&(e.search=t.substr(u),t=t.substr(0,u)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,r,u){u===void 0&&(u={});let{window:d=document.defaultView,v5Compat:m=!1}=u,c=d.history,a=Action.Pop,o=null,s=h();s==null&&(s=0,c.replaceState(_extends$1({},c.state,{idx:s}),""));function h(){return(c.state||{idx:null}).idx}function v(){a=Action.Pop;let I=h(),_=I==null?null:I-s;s=I,o&&o({action:a,location:w.location,delta:_})}function E(I,_){a=Action.Push;let S=createLocation(w.location,I,_);s=h()+1;let j=getHistoryState(S,s),K=w.createHref(S);try{c.pushState(j,"",K)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;d.location.assign(K)}m&&o&&o({action:a,location:w.location,delta:1})}function y(I,_){a=Action.Replace;let S=createLocation(w.location,I,_);s=h();let j=getHistoryState(S,s),K=w.createHref(S);c.replaceState(j,"",K),m&&o&&o({action:a,location:w.location,delta:0})}function A(I){let _=d.location.origin!=="null"?d.location.origin:d.location.href,S=typeof I=="string"?I:createPath(I);return S=S.replace(/ $/,"%20"),invariant(_,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,_)}let w={get action(){return a},get location(){return t(d,c)},listen(I){if(o)throw new Error("A history only accepts one active listener");return d.addEventListener(PopStateEventType,v),o=I,()=>{d.removeEventListener(PopStateEventType,v),o=null}},createHref(I){return e(d,I)},createURL:A,encodeLocation(I){let _=A(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:E,replace:y,go(I){return c.go(I)}};return w}var ResultType;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ResultType||(ResultType={}));function matchRoutes(t,e,r){return r===void 0&&(r="/"),matchRoutesImpl(t,e,r)}function matchRoutesImpl(t,e,r,u){let d=typeof e=="string"?parsePath(e):e,m=stripBasename(d.pathname||"/",r);if(m==null)return null;let c=flattenRoutes(t);rankRouteBranches(c);let a=null;for(let o=0;a==null&&o<c.length;++o){let s=decodePath(m);a=matchRouteBranch(c[o],s)}return a}function flattenRoutes(t,e,r,u){e===void 0&&(e=[]),r===void 0&&(r=[]),u===void 0&&(u="");let d=(m,c,a)=>{let o={relativePath:a===void 0?m.path||"":a,caseSensitive:m.caseSensitive===!0,childrenIndex:c,route:m};o.relativePath.startsWith("/")&&(invariant(o.relativePath.startsWith(u),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+u+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(u.length));let s=joinPaths([u,o.relativePath]),h=r.concat(o);m.children&&m.children.length>0&&(invariant(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+s+'".')),flattenRoutes(m.children,e,h,s)),!(m.path==null&&!m.index)&&e.push({path:s,score:computeScore(s,m.index),routesMeta:h})};return t.forEach((m,c)=>{var a;if(m.path===""||!((a=m.path)!=null&&a.includes("?")))d(m,c);else for(let o of explodeOptionalSegments(m.path))d(m,c,o)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[r,...u]=e,d=r.endsWith("?"),m=r.replace(/\?$/,"");if(u.length===0)return d?[m,""]:[m];let c=explodeOptionalSegments(u.join("/")),a=[];return a.push(...c.map(o=>o===""?m:[m,o].join("/"))),d&&a.push(...c),a.map(o=>t.startsWith("/")&&o===""?"/":o)}function rankRouteBranches(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:compareIndexes(e.routesMeta.map(u=>u.childrenIndex),r.routesMeta.map(u=>u.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let r=t.split("/"),u=r.length;return r.some(isSplat)&&(u+=splatPenalty),e&&(u+=indexRouteValue),r.filter(d=>!isSplat(d)).reduce((d,m)=>d+(paramRe.test(m)?dynamicSegmentValue:m===""?emptySegmentValue:staticSegmentValue),u)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((u,d)=>u===e[d])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,r){let{routesMeta:u}=t,d={},m="/",c=[];for(let a=0;a<u.length;++a){let o=u[a],s=a===u.length-1,h=m==="/"?e:e.slice(m.length)||"/",v=matchPath({path:o.relativePath,caseSensitive:o.caseSensitive,end:s},h),E=o.route;if(!v)return null;Object.assign(d,v.params),c.push({params:d,pathname:joinPaths([m,v.pathname]),pathnameBase:normalizePathname(joinPaths([m,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(m=joinPaths([m,v.pathnameBase]))}return c}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,u]=compilePath(t.path,t.caseSensitive,t.end),d=e.match(r);if(!d)return null;let m=d[0],c=m.replace(/(.)\/+$/,"$1"),a=d.slice(1);return{params:u.reduce((s,h,v)=>{let{paramName:E,isOptional:y}=h;if(E==="*"){let w=a[v]||"";c=m.slice(0,m.length-w.length).replace(/(.)\/+$/,"$1")}const A=a[v];return y&&!A?s[E]=void 0:s[E]=(A||"").replace(/%2F/g,"/"),s},{}),pathname:m,pathnameBase:c,pattern:t}}function compilePath(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let u=[],d="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,a,o)=>(u.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(u.push({paramName:"*"}),d+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?d+="\\/*$":t!==""&&t!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,e?void 0:"i"),u]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,u=t.charAt(r);return u&&u!=="/"?null:t.slice(r)||"/"}const joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},_extends.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,r,u){useInRouterContext()||invariant(!1);let{navigator:d}=reactExports.useContext(NavigationContext),{matches:m}=reactExports.useContext(RouteContext),c=m[m.length-1],a=c?c.params:{};c&&c.pathname;let o=c?c.pathnameBase:"/";c&&c.route;let s=useLocation(),h;if(e){var v;let I=typeof e=="string"?parsePath(e):e;o==="/"||(v=I.pathname)!=null&&v.startsWith(o)||invariant(!1),h=I}else h=s;let E=h.pathname||"/",y=E;if(o!=="/"){let I=o.replace(/^\//,"").split("/");y="/"+E.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=matchRoutes(t,{pathname:y}),w=_renderMatches(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:joinPaths([o,d.encodeLocation?d.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?o:joinPaths([o,d.encodeLocation?d.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),m,r,u);return e&&w?reactExports.createElement(LocationContext.Provider,{value:{location:_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Action.Pop}},w):w}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),r?reactExports.createElement("pre",{style:d},r):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(t){let{routeContext:e,match:r,children:u}=t,d=reactExports.useContext(DataRouterContext);return d&&d.static&&d.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=r.route.id),reactExports.createElement(RouteContext.Provider,{value:e},u)}function _renderMatches(t,e,r,u){var d;if(e===void 0&&(e=[]),r===void 0&&(r=null),u===void 0&&(u=null),t==null){var m;if(!r)return null;if(r.errors)t=r.matches;else if((m=u)!=null&&m.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,a=(d=r)==null?void 0:d.errors;if(a!=null){let h=c.findIndex(v=>v.route.id&&a?.[v.route.id]!==void 0);h>=0||invariant(!1),c=c.slice(0,Math.min(c.length,h+1))}let o=!1,s=-1;if(r&&u&&u.v7_partialHydration)for(let h=0;h<c.length;h++){let v=c[h];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(s=h),v.route.id){let{loaderData:E,errors:y}=r,A=v.route.loader&&E[v.route.id]===void 0&&(!y||y[v.route.id]===void 0);if(v.route.lazy||A){o=!0,s>=0?c=c.slice(0,s+1):c=[c[0]];break}}}return c.reduceRight((h,v,E)=>{let y,A=!1,w=null,I=null;r&&(y=a&&v.route.id?a[v.route.id]:void 0,w=v.route.errorElement||defaultErrorElement,o&&(s<0&&E===0?(warningOnce("route-fallback"),A=!0,I=null):s===E&&(A=!0,I=v.route.hydrateFallbackElement||null)));let _=e.concat(c.slice(0,E+1)),S=()=>{let j;return y?j=w:A?j=I:v.route.Component?j=reactExports.createElement(v.route.Component,null):v.route.element?j=v.route.element:j=h,reactExports.createElement(RenderedRoute,{match:v,routeContext:{outlet:h,matches:_,isDataRoute:r!=null},children:j})};return r&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:w,error:y,children:S(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):S()},null)}var DataRouterStateHook$1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(DataRouterStateHook$1||{});function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(t){let e=useRouteContext(),r=e.matches[e.matches.length-1];return r.route.id||invariant(!1),r.route.id}function useRouteError(){var t;let e=reactExports.useContext(RouteErrorContext),r=useDataRouterState(DataRouterStateHook$1.UseRouteError),u=useCurrentRouteId();return e!==void 0?e:(t=r.errors)==null?void 0:t[u]}const alreadyWarned$1={};function warningOnce(t,e,r){alreadyWarned$1[t]||(alreadyWarned$1[t]=!0)}function logV6DeprecationWarnings(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Route(t){invariant(!1)}function Router(t){let{basename:e="/",children:r=null,location:u,navigationType:d=Action.Pop,navigator:m,static:c=!1,future:a}=t;useInRouterContext()&&invariant(!1);let o=e.replace(/^\/*/,"/"),s=reactExports.useMemo(()=>({basename:o,navigator:m,static:c,future:_extends({v7_relativeSplatPath:!1},a)}),[o,a,m,c]);typeof u=="string"&&(u=parsePath(u));let{pathname:h="/",search:v="",hash:E="",state:y=null,key:A="default"}=u,w=reactExports.useMemo(()=>{let I=stripBasename(h,o);return I==null?null:{location:{pathname:I,search:v,hash:E,state:y,key:A},navigationType:d}},[o,h,v,E,y,A,d]);return w==null?null:reactExports.createElement(NavigationContext.Provider,{value:s},reactExports.createElement(LocationContext.Provider,{children:r,value:w}))}function Routes(t){let{children:e,location:r}=t;return useRoutes(createRoutesFromChildren(e),r)}new Promise(()=>{});function createRoutesFromChildren(t,e){e===void 0&&(e=[]);let r=[];return reactExports.Children.forEach(t,(u,d)=>{if(!reactExports.isValidElement(u))return;let m=[...e,d];if(u.type===reactExports.Fragment){r.push.apply(r,createRoutesFromChildren(u.props.children,m));return}u.type!==Route&&invariant(!1),!u.props.index||!u.props.children||invariant(!1);let c={id:u.props.id||m.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,loader:u.props.loader,action:u.props.action,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(c.children=createRoutesFromChildren(u.props.children,m)),r.push(c)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION];function BrowserRouter(t){let{basename:e,children:r,future:u,window:d}=t,m=reactExports.useRef();m.current==null&&(m.current=createBrowserHistory({window:d,v5Compat:!0}));let c=m.current,[a,o]=reactExports.useState({action:c.action,location:c.location}),{v7_startTransition:s}=u||{},h=reactExports.useCallback(v=>{s&&startTransitionImpl?startTransitionImpl(()=>o(v)):o(v)},[o,s]);return reactExports.useLayoutEffect(()=>c.listen(h),[c,h]),reactExports.useEffect(()=>logV6DeprecationWarnings(u),[u]),reactExports.createElement(Router,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:c,future:u})}var DataRouterHook;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));var main$3={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1$3=getAugmentedNamespace(__viteBrowserExternal$1),version$d="16.5.0",require$$4$3={version:version$d};var hasRequiredMain$1;function requireMain$1(){if(hasRequiredMain$1)return main$3.exports;hasRequiredMain$1=1;var t={};const e=require$$1$3,r=require$$1$3,u=require$$1$3,d=require$$1$3,c=require$$4$3.version,a=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function o(H){const U={};let P=H.toString();P=P.replace(/\r\n?/mg,`
`);let Z;for(;(Z=a.exec(P))!=null;){const ie=Z[1];let ue=Z[2]||"";ue=ue.trim();const le=ue[0];ue=ue.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),le==='"'&&(ue=ue.replace(/\\n/g,`
`),ue=ue.replace(/\\r/g,"\r")),U[ie]=ue}return U}function s(H){const U=A(H),P=J.configDotenv({path:U});if(!P.parsed){const le=new Error(`MISSING_DATA: Cannot parse ${U} for an unknown reason`);throw le.code="MISSING_DATA",le}const Z=E(H).split(","),ie=Z.length;let ue;for(let le=0;le<ie;le++)try{const ne=Z[le].trim(),ye=y(P,ne);ue=J.decrypt(ye.ciphertext,ye.key);break}catch(ne){if(le+1>=ie)throw ne}return J.parse(ue)}function h(H){console.log(`[dotenv@${c}][WARN] ${H}`)}function v(H){console.log(`[dotenv@${c}][DEBUG] ${H}`)}function E(H){return H&&H.DOTENV_KEY&&H.DOTENV_KEY.length>0?H.DOTENV_KEY:t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:""}function y(H,U){let P;try{P=new URL(U)}catch(ne){if(ne.code==="ERR_INVALID_URL"){const ye=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw ye.code="INVALID_DOTENV_KEY",ye}throw ne}const Z=P.password;if(!Z){const ne=new Error("INVALID_DOTENV_KEY: Missing key part");throw ne.code="INVALID_DOTENV_KEY",ne}const ie=P.searchParams.get("environment");if(!ie){const ne=new Error("INVALID_DOTENV_KEY: Missing environment part");throw ne.code="INVALID_DOTENV_KEY",ne}const ue=`DOTENV_VAULT_${ie.toUpperCase()}`,le=H.parsed[ue];if(!le){const ne=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${ue} in your .env.vault file.`);throw ne.code="NOT_FOUND_DOTENV_ENVIRONMENT",ne}return{ciphertext:le,key:Z}}function A(H){let U=null;if(H&&H.path&&H.path.length>0)if(Array.isArray(H.path))for(const P of H.path)e.existsSync(P)&&(U=P.endsWith(".vault")?P:`${P}.vault`);else U=H.path.endsWith(".vault")?H.path:`${H.path}.vault`;else U=r.resolve(process.cwd(),".env.vault");return e.existsSync(U)?U:null}function w(H){return H[0]==="~"?r.join(u.homedir(),H.slice(1)):H}function I(H){!!(H&&H.debug)&&v("Loading env from encrypted .env.vault");const P=J._parseVault(H);let Z=t;return H&&H.processEnv!=null&&(Z=H.processEnv),J.populate(Z,P,H),{parsed:P}}function _(H){const U=r.resolve(process.cwd(),".env");let P="utf8";const Z=!!(H&&H.debug);H&&H.encoding?P=H.encoding:Z&&v("No encoding is specified. UTF-8 is used by default");let ie=[U];if(H&&H.path)if(!Array.isArray(H.path))ie=[w(H.path)];else{ie=[];for(const ye of H.path)ie.push(w(ye))}let ue;const le={};for(const ye of ie)try{const fe=J.parse(e.readFileSync(ye,{encoding:P}));J.populate(le,fe,H)}catch(fe){Z&&v(`Failed to load ${ye} ${fe.message}`),ue=fe}let ne=t;return H&&H.processEnv!=null&&(ne=H.processEnv),J.populate(ne,le,H),ue?{parsed:le,error:ue}:{parsed:le}}function S(H){if(E(H).length===0)return J.configDotenv(H);const U=A(H);return U?J._configVault(H):(h(`You set DOTENV_KEY but you are missing a .env.vault file at ${U}. Did you forget to build it?`),J.configDotenv(H))}function j(H,U){const P=Buffer.from(U.slice(-64),"hex");let Z=Buffer.from(H,"base64");const ie=Z.subarray(0,12),ue=Z.subarray(-16);Z=Z.subarray(12,-16);try{const le=d.createDecipheriv("aes-256-gcm",P,ie);return le.setAuthTag(ue),`${le.update(Z)}${le.final()}`}catch(le){const ne=le instanceof RangeError,ye=le.message==="Invalid key length",fe=le.message==="Unsupported state or unable to authenticate data";if(ne||ye){const Te=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw Te.code="INVALID_DOTENV_KEY",Te}else if(fe){const Te=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw Te.code="DECRYPTION_FAILED",Te}else throw le}}function K(H,U,P={}){const Z=!!(P&&P.debug),ie=!!(P&&P.override);if(typeof U!="object"){const ue=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw ue.code="OBJECT_REQUIRED",ue}for(const ue of Object.keys(U))Object.prototype.hasOwnProperty.call(H,ue)?(ie===!0&&(H[ue]=U[ue]),Z&&v(ie===!0?`"${ue}" is already defined and WAS overwritten`:`"${ue}" is already defined and was NOT overwritten`)):H[ue]=U[ue]}const J={configDotenv:_,_configVault:I,_parseVault:s,config:S,decrypt:j,parse:o,populate:K};return main$3.exports.configDotenv=J.configDotenv,main$3.exports._configVault=J._configVault,main$3.exports._parseVault=J._parseVault,main$3.exports.config=J.config,main$3.exports.decrypt=J.decrypt,main$3.exports.parse=J.parse,main$3.exports.populate=J.populate,main$3.exports=J,main$3.exports}var mainExports=requireMain$1();const dotenv=getDefaultExportFromCjs(mainExports);var firebaseNamespace={},lifecycle={},validator$1={};/*! firebase-admin v13.4.0 */var hasRequiredValidator$1;function requireValidator$1(){if(hasRequiredValidator$1)return validator$1;hasRequiredValidator$1=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(validator$1,"__esModule",{value:!0}),validator$1.isBuffer=e,validator$1.isArray=r,validator$1.isNonEmptyArray=u,validator$1.isBoolean=d,validator$1.isNumber=m,validator$1.isString=c,validator$1.isBase64String=a,validator$1.isNonEmptyString=o,validator$1.isObject=s,validator$1.isNonNullObject=h,validator$1.isUid=v,validator$1.isPassword=E,validator$1.isEmail=y,validator$1.isPhoneNumber=A,validator$1.isISODateString=w,validator$1.isUTCDateString=I,validator$1.isURL=_,validator$1.isTopic=S,validator$1.isTaskId=j;const t=require$$1$3;function e(K){return K instanceof Buffer}function r(K){return Array.isArray(K)}function u(K){return r(K)&&K.length!==0}function d(K){return typeof K=="boolean"}function m(K){return typeof K=="number"&&!isNaN(K)}function c(K){return typeof K=="string"}function a(K){return c(K)?/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(K):!1}function o(K){return c(K)&&K!==""}function s(K){return typeof K=="object"&&!r(K)}function h(K){return s(K)&&K!==null}function v(K){return typeof K=="string"&&K.length>0&&K.length<=128}function E(K){return typeof K=="string"&&K.length>=6}function y(K){return typeof K!="string"?!1:/^[^@]+@[^@]+$/.test(K)}function A(K){if(typeof K!="string")return!1;const J=/^\+/,H=/[\da-zA-Z]+/;return J.test(K)&&H.test(K)}function w(K){try{return o(K)&&new Date(K).toISOString()===K}catch{return!1}}function I(K){try{return o(K)&&new Date(K).toUTCString()===K}catch{return!1}}function _(K){if(typeof K!="string"||/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(K))return!1;try{const H=t.parse(K),U=H.protocol,P=H.slashes,Z=H.hostname,ie=H.pathname;if(U!=="http:"&&U!=="https:"||!P||!Z||!/^[a-zA-Z0-9]+[\w-]*([.]?[a-zA-Z0-9]+[\w-]*)*$/.test(Z)||ie&&ie!=="/"&&!/^(\/[\w\-.~!$'()*+,;=:@%]+)*\/?$/.test(ie))return!1}catch{return!1}return!0}function S(K){return typeof K!="string"?!1:/^(\/topics\/)?(private\/)?[a-zA-Z0-9-_.~%]+$/.test(K)}function j(K){return typeof K!="string"?!1:/^[A-Za-z0-9_-]+$/.test(K)}return validator$1}var error={},deepCopy={};/*! firebase-admin v13.4.0 */var hasRequiredDeepCopy;function requireDeepCopy(){if(hasRequiredDeepCopy)return deepCopy;hasRequiredDeepCopy=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(deepCopy,"__esModule",{value:!0}),deepCopy.deepCopy=t,deepCopy.deepExtend=e;function t(r){return e(void 0,r)}function e(r,u){if(!(u instanceof Object))return u;switch(u.constructor){case Date:{const d=u;return new Date(d.getTime())}case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return u}for(const d in u)Object.prototype.hasOwnProperty.call(u,d)&&(r[d]=e(r[d],u[d]));return r}return deepCopy}/*! firebase-admin v13.4.0 */var hasRequiredError;function requireError(){if(hasRequiredError)return error;hasRequiredError=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(error,"__esModule",{value:!0}),error.InstanceIdClientErrorCode=error.InstallationsClientErrorCode=error.MessagingClientErrorCode=error.AuthClientErrorCode=error.AppErrorCodes=error.FirebaseProjectManagementError=error.FirebaseMessagingSessionError=error.FirebaseMessagingError=error.FirebaseInstallationsError=error.FirebaseInstanceIdError=error.FirebaseFirestoreError=error.FirebaseDatabaseError=error.FirebaseAuthError=error.FirebaseAppError=error.PrefixedFirebaseError=error.FirebaseError=void 0;const t=requireDeepCopy();class e extends Error{constructor(J){super(J.message),this.errorInfo=J,this.__proto__=e.prototype}get code(){return this.errorInfo?.code}get message(){return this.errorInfo?.message}toJSON(){return{code:this.code,message:this.message}}}error.FirebaseError=e;class r extends e{constructor(J,H,U){super({code:`${J}/${H}`,message:U}),this.codePrefix=J,this.__proto__=r.prototype}hasCode(J){return`${this.codePrefix}/${J}`===this.code}}error.PrefixedFirebaseError=r;class u extends r{constructor(J,H){super("app",J,H),this.__proto__=u.prototype}}error.FirebaseAppError=u;class d extends r{static fromServerError(J,H,U){const P=(J||"").indexOf(":");let Z=null;P!==-1&&(Z=J.substring(P+1).trim(),J=J.substring(0,P).trim());const ie=_[J]||"INTERNAL_ERROR",ue=(0,t.deepCopy)(y[ie]);if(ue.message=Z||H||ue.message,ie==="INTERNAL_ERROR"&&typeof U<"u")try{ue.message+=` Raw server response: "${JSON.stringify(U)}"`}catch{}return new d(ue)}constructor(J,H){super("auth",J.code,H||J.message),this.__proto__=d.prototype}}error.FirebaseAuthError=d;class m extends e{constructor(J,H){super({code:"database/"+J.code,message:H||J.message})}}error.FirebaseDatabaseError=m;class c extends e{constructor(J,H){super({code:"firestore/"+J.code,message:H||J.message})}}error.FirebaseFirestoreError=c;class a extends e{constructor(J,H){super({code:"instance-id/"+J.code,message:H||J.message}),this.__proto__=a.prototype}}error.FirebaseInstanceIdError=a;class o extends e{constructor(J,H){super({code:"installations/"+J.code,message:H||J.message}),this.__proto__=o.prototype}}error.FirebaseInstallationsError=o;class s extends r{static fromServerError(J,H,U){let P="UNKNOWN_ERROR";J&&J in S&&(P=S[J]);const Z=(0,t.deepCopy)(A[P]);if(Z.message=H||Z.message,P==="UNKNOWN_ERROR"&&typeof U<"u")try{Z.message+=` Raw server response: "${JSON.stringify(U)}"`}catch{}return new s(Z)}static fromTopicManagementServerError(J,H,U){const P=j[J]||"UNKNOWN_ERROR",Z=(0,t.deepCopy)(A[P]);if(Z.message=H||Z.message,P==="UNKNOWN_ERROR"&&typeof U<"u")try{Z.message+=` Raw server response: "${JSON.stringify(U)}"`}catch{}return new s(Z)}constructor(J,H){super("messaging",J.code,H||J.message),this.__proto__=s.prototype}}error.FirebaseMessagingError=s;class h extends s{constructor(J,H,U){super(J,H||J.message),this.pendingBatchResponse=U,this.__proto__=h.prototype}toJSON(){return{code:this.code,message:this.message,pendingBatchResponse:this.pendingBatchResponse}}}error.FirebaseMessagingSessionError=h;class v extends r{constructor(J,H){super("project-management",J,H),this.__proto__=v.prototype}}error.FirebaseProjectManagementError=v;class E{}error.AppErrorCodes=E,E.APP_DELETED="app-deleted",E.DUPLICATE_APP="duplicate-app",E.INVALID_ARGUMENT="invalid-argument",E.INTERNAL_ERROR="internal-error",E.INVALID_APP_NAME="invalid-app-name",E.INVALID_APP_OPTIONS="invalid-app-options",E.INVALID_CREDENTIAL="invalid-credential",E.NETWORK_ERROR="network-error",E.NETWORK_TIMEOUT="network-timeout",E.NO_APP="no-app",E.UNABLE_TO_PARSE_RESPONSE="unable-to-parse-response";class y{}error.AuthClientErrorCode=y,y.AUTH_BLOCKING_TOKEN_EXPIRED={code:"auth-blocking-token-expired",message:"The provided Firebase Auth Blocking token is expired."},y.BILLING_NOT_ENABLED={code:"billing-not-enabled",message:"Feature requires billing to be enabled."},y.CLAIMS_TOO_LARGE={code:"claims-too-large",message:"Developer claims maximum payload size exceeded."},y.CONFIGURATION_EXISTS={code:"configuration-exists",message:"A configuration already exists with the provided identifier."},y.CONFIGURATION_NOT_FOUND={code:"configuration-not-found",message:"There is no configuration corresponding to the provided identifier."},y.ID_TOKEN_EXPIRED={code:"id-token-expired",message:"The provided Firebase ID token is expired."},y.INVALID_ARGUMENT={code:"argument-error",message:"Invalid argument provided."},y.INVALID_CONFIG={code:"invalid-config",message:"The provided configuration is invalid."},y.EMAIL_ALREADY_EXISTS={code:"email-already-exists",message:"The email address is already in use by another account."},y.EMAIL_NOT_FOUND={code:"email-not-found",message:"There is no user record corresponding to the provided email."},y.FORBIDDEN_CLAIM={code:"reserved-claim",message:"The specified developer claim is reserved and cannot be specified."},y.INVALID_ID_TOKEN={code:"invalid-id-token",message:"The provided ID token is not a valid Firebase ID token."},y.ID_TOKEN_REVOKED={code:"id-token-revoked",message:"The Firebase ID token has been revoked."},y.INTERNAL_ERROR={code:"internal-error",message:"An internal error has occurred."},y.INVALID_CLAIMS={code:"invalid-claims",message:"The provided custom claim attributes are invalid."},y.INVALID_CONTINUE_URI={code:"invalid-continue-uri",message:"The continue URL must be a valid URL string."},y.INVALID_CREATION_TIME={code:"invalid-creation-time",message:"The creation time must be a valid UTC date string."},y.INVALID_CREDENTIAL={code:"invalid-credential",message:"Invalid credential object provided."},y.INVALID_DISABLED_FIELD={code:"invalid-disabled-field",message:"The disabled field must be a boolean."},y.INVALID_DISPLAY_NAME={code:"invalid-display-name",message:"The displayName field must be a valid string."},y.INVALID_DYNAMIC_LINK_DOMAIN={code:"invalid-dynamic-link-domain",message:"The provided dynamic link domain is not configured or authorized for the current project."},y.INVALID_HOSTING_LINK_DOMAIN={code:"invalid-hosting-link-domain",message:"The provided hosting link domain is not configured in Firebase Hosting or is not owned by the current project."},y.INVALID_EMAIL_VERIFIED={code:"invalid-email-verified",message:"The emailVerified field must be a boolean."},y.INVALID_EMAIL={code:"invalid-email",message:"The email address is improperly formatted."},y.INVALID_NEW_EMAIL={code:"invalid-new-email",message:"The new email address is improperly formatted."},y.INVALID_ENROLLED_FACTORS={code:"invalid-enrolled-factors",message:"The enrolled factors must be a valid array of MultiFactorInfo objects."},y.INVALID_ENROLLMENT_TIME={code:"invalid-enrollment-time",message:"The second factor enrollment time must be a valid UTC date string."},y.INVALID_HASH_ALGORITHM={code:"invalid-hash-algorithm",message:"The hash algorithm must match one of the strings in the list of supported algorithms."},y.INVALID_HASH_BLOCK_SIZE={code:"invalid-hash-block-size",message:"The hash block size must be a valid number."},y.INVALID_HASH_DERIVED_KEY_LENGTH={code:"invalid-hash-derived-key-length",message:"The hash derived key length must be a valid number."},y.INVALID_HASH_KEY={code:"invalid-hash-key",message:"The hash key must a valid byte buffer."},y.INVALID_HASH_MEMORY_COST={code:"invalid-hash-memory-cost",message:"The hash memory cost must be a valid number."},y.INVALID_HASH_PARALLELIZATION={code:"invalid-hash-parallelization",message:"The hash parallelization must be a valid number."},y.INVALID_HASH_ROUNDS={code:"invalid-hash-rounds",message:"The hash rounds must be a valid number."},y.INVALID_HASH_SALT_SEPARATOR={code:"invalid-hash-salt-separator",message:"The hashing algorithm salt separator field must be a valid byte buffer."},y.INVALID_LAST_SIGN_IN_TIME={code:"invalid-last-sign-in-time",message:"The last sign-in time must be a valid UTC date string."},y.INVALID_NAME={code:"invalid-name",message:"The resource name provided is invalid."},y.INVALID_OAUTH_CLIENT_ID={code:"invalid-oauth-client-id",message:"The provided OAuth client ID is invalid."},y.INVALID_PAGE_TOKEN={code:"invalid-page-token",message:"The page token must be a valid non-empty string."},y.INVALID_PASSWORD={code:"invalid-password",message:"The password must be a string with at least 6 characters."},y.INVALID_PASSWORD_HASH={code:"invalid-password-hash",message:"The password hash must be a valid byte buffer."},y.INVALID_PASSWORD_SALT={code:"invalid-password-salt",message:"The password salt must be a valid byte buffer."},y.INVALID_PHONE_NUMBER={code:"invalid-phone-number",message:"The phone number must be a non-empty E.164 standard compliant identifier string."},y.INVALID_PHOTO_URL={code:"invalid-photo-url",message:"The photoURL field must be a valid URL."},y.INVALID_PROJECT_ID={code:"invalid-project-id",message:"Invalid parent project. Either parent project doesn't exist or didn't enable multi-tenancy."},y.INVALID_PROVIDER_DATA={code:"invalid-provider-data",message:"The providerData must be a valid array of UserInfo objects."},y.INVALID_PROVIDER_ID={code:"invalid-provider-id",message:"The providerId must be a valid supported provider identifier string."},y.INVALID_PROVIDER_UID={code:"invalid-provider-uid",message:"The providerUid must be a valid provider uid string."},y.INVALID_OAUTH_RESPONSETYPE={code:"invalid-oauth-responsetype",message:"Only exactly one OAuth responseType should be set to true."},y.INVALID_SESSION_COOKIE_DURATION={code:"invalid-session-cookie-duration",message:"The session cookie duration must be a valid number in milliseconds between 5 minutes and 2 weeks."},y.INVALID_TENANT_ID={code:"invalid-tenant-id",message:"The tenant ID must be a valid non-empty string."},y.INVALID_TENANT_TYPE={code:"invalid-tenant-type",message:'Tenant type must be either "full_service" or "lightweight".'},y.INVALID_TESTING_PHONE_NUMBER={code:"invalid-testing-phone-number",message:"Invalid testing phone number or invalid test code provided."},y.INVALID_UID={code:"invalid-uid",message:"The uid must be a non-empty string with at most 128 characters."},y.INVALID_USER_IMPORT={code:"invalid-user-import",message:"The user record to import is invalid."},y.INVALID_TOKENS_VALID_AFTER_TIME={code:"invalid-tokens-valid-after-time",message:"The tokensValidAfterTime must be a valid UTC number in seconds."},y.MISMATCHING_TENANT_ID={code:"mismatching-tenant-id",message:"User tenant ID does not match with the current TenantAwareAuth tenant ID."},y.MISSING_ANDROID_PACKAGE_NAME={code:"missing-android-pkg-name",message:"An Android Package Name must be provided if the Android App is required to be installed."},y.MISSING_CONFIG={code:"missing-config",message:"The provided configuration is missing required attributes."},y.MISSING_CONTINUE_URI={code:"missing-continue-uri",message:"A valid continue URL must be provided in the request."},y.MISSING_DISPLAY_NAME={code:"missing-display-name",message:"The resource being created or edited is missing a valid display name."},y.MISSING_EMAIL={code:"missing-email",message:"The email is required for the specified action. For example, a multi-factor user requires a verified email."},y.MISSING_IOS_BUNDLE_ID={code:"missing-ios-bundle-id",message:"The request is missing an iOS Bundle ID."},y.MISSING_ISSUER={code:"missing-issuer",message:"The OAuth/OIDC configuration issuer must not be empty."},y.MISSING_HASH_ALGORITHM={code:"missing-hash-algorithm",message:"Importing users with password hashes requires that the hashing algorithm and its parameters be provided."},y.MISSING_OAUTH_CLIENT_ID={code:"missing-oauth-client-id",message:"The OAuth/OIDC configuration client ID must not be empty."},y.MISSING_OAUTH_CLIENT_SECRET={code:"missing-oauth-client-secret",message:"The OAuth configuration client secret is required to enable OIDC code flow."},y.MISSING_PROVIDER_ID={code:"missing-provider-id",message:"A valid provider ID must be provided in the request."},y.MISSING_SAML_RELYING_PARTY_CONFIG={code:"missing-saml-relying-party-config",message:"The SAML configuration provided is missing a relying party configuration."},y.MAXIMUM_TEST_PHONE_NUMBER_EXCEEDED={code:"test-phone-number-limit-exceeded",message:"The maximum allowed number of test phone number / code pairs has been exceeded."},y.MAXIMUM_USER_COUNT_EXCEEDED={code:"maximum-user-count-exceeded",message:"The maximum allowed number of users to import has been exceeded."},y.MISSING_UID={code:"missing-uid",message:"A uid identifier is required for the current operation."},y.OPERATION_NOT_ALLOWED={code:"operation-not-allowed",message:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."},y.PHONE_NUMBER_ALREADY_EXISTS={code:"phone-number-already-exists",message:"The user with the provided phone number already exists."},y.PROJECT_NOT_FOUND={code:"project-not-found",message:"No Firebase project was found for the provided credential."},y.INSUFFICIENT_PERMISSION={code:"insufficient-permission",message:'Credential implementation provided to initializeApp() via the "credential" property has insufficient permission to access the requested resource. See https://firebase.google.com/docs/admin/setup for details on how to authenticate this SDK with appropriate permissions.'},y.QUOTA_EXCEEDED={code:"quota-exceeded",message:"The project quota for the specified operation has been exceeded."},y.SECOND_FACTOR_LIMIT_EXCEEDED={code:"second-factor-limit-exceeded",message:"The maximum number of allowed second factors on a user has been exceeded."},y.SECOND_FACTOR_UID_ALREADY_EXISTS={code:"second-factor-uid-already-exists",message:'The specified second factor "uid" already exists.'},y.SESSION_COOKIE_EXPIRED={code:"session-cookie-expired",message:"The Firebase session cookie is expired."},y.SESSION_COOKIE_REVOKED={code:"session-cookie-revoked",message:"The Firebase session cookie has been revoked."},y.TENANT_NOT_FOUND={code:"tenant-not-found",message:"There is no tenant corresponding to the provided identifier."},y.UID_ALREADY_EXISTS={code:"uid-already-exists",message:"The user with the provided uid already exists."},y.UNAUTHORIZED_DOMAIN={code:"unauthorized-continue-uri",message:"The domain of the continue URL is not whitelisted. Whitelist the domain in the Firebase console."},y.UNSUPPORTED_FIRST_FACTOR={code:"unsupported-first-factor",message:"A multi-factor user requires a supported first factor."},y.UNSUPPORTED_SECOND_FACTOR={code:"unsupported-second-factor",message:"The request specified an unsupported type of second factor."},y.UNSUPPORTED_TENANT_OPERATION={code:"unsupported-tenant-operation",message:"This operation is not supported in a multi-tenant context."},y.UNVERIFIED_EMAIL={code:"unverified-email",message:"A verified email is required for the specified action. For example, a multi-factor user requires a verified email."},y.USER_NOT_FOUND={code:"user-not-found",message:"There is no user record corresponding to the provided identifier."},y.NOT_FOUND={code:"not-found",message:"The requested resource was not found."},y.USER_DISABLED={code:"user-disabled",message:"The user record is disabled."},y.USER_NOT_DISABLED={code:"user-not-disabled",message:"The user must be disabled in order to bulk delete it (or you must pass force=true)."},y.INVALID_RECAPTCHA_ACTION={code:"invalid-recaptcha-action",message:'reCAPTCHA action must be "BLOCK".'},y.INVALID_RECAPTCHA_ENFORCEMENT_STATE={code:"invalid-recaptcha-enforcement-state",message:'reCAPTCHA enforcement state must be either "OFF", "AUDIT" or "ENFORCE".'},y.RECAPTCHA_NOT_ENABLED={code:"racaptcha-not-enabled",message:"reCAPTCHA enterprise is not enabled."};class A{}error.MessagingClientErrorCode=A,A.INVALID_ARGUMENT={code:"invalid-argument",message:"Invalid argument provided."},A.INVALID_RECIPIENT={code:"invalid-recipient",message:"Invalid message recipient provided."},A.INVALID_PAYLOAD={code:"invalid-payload",message:"Invalid message payload provided."},A.INVALID_DATA_PAYLOAD_KEY={code:"invalid-data-payload-key",message:"The data message payload contains an invalid key. See the reference documentation for the DataMessagePayload type for restricted keys."},A.PAYLOAD_SIZE_LIMIT_EXCEEDED={code:"payload-size-limit-exceeded",message:"The provided message payload exceeds the FCM size limits. See the error documentation for more details."},A.INVALID_OPTIONS={code:"invalid-options",message:"Invalid message options provided."},A.INVALID_REGISTRATION_TOKEN={code:"invalid-registration-token",message:"Invalid registration token provided. Make sure it matches the registration token the client app receives from registering with FCM."},A.REGISTRATION_TOKEN_NOT_REGISTERED={code:"registration-token-not-registered",message:"The provided registration token is not registered. A previously valid registration token can be unregistered for a variety of reasons. See the error documentation for more details. Remove this registration token and stop using it to send messages."},A.MISMATCHED_CREDENTIAL={code:"mismatched-credential",message:"The credential used to authenticate this SDK does not have permission to send messages to the device corresponding to the provided registration token. Make sure the credential and registration token both belong to the same Firebase project."},A.INVALID_PACKAGE_NAME={code:"invalid-package-name",message:'The message was addressed to a registration token whose package name does not match the provided "restrictedPackageName" option.'},A.DEVICE_MESSAGE_RATE_EXCEEDED={code:"device-message-rate-exceeded",message:"The rate of messages to a particular device is too high. Reduce the number of messages sent to this device and do not immediately retry sending to this device."},A.TOPICS_MESSAGE_RATE_EXCEEDED={code:"topics-message-rate-exceeded",message:"The rate of messages to subscribers to a particular topic is too high. Reduce the number of messages sent for this topic, and do not immediately retry sending to this topic."},A.MESSAGE_RATE_EXCEEDED={code:"message-rate-exceeded",message:"Sending limit exceeded for the message target."},A.THIRD_PARTY_AUTH_ERROR={code:"third-party-auth-error",message:"A message targeted to an iOS device could not be sent because the required APNs SSL certificate was not uploaded or has expired. Check the validity of your development and production certificates."},A.TOO_MANY_TOPICS={code:"too-many-topics",message:"The maximum number of topics the provided registration token can be subscribed to has been exceeded."},A.AUTHENTICATION_ERROR={code:"authentication-error",message:"An error occurred when trying to authenticate to the FCM servers. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions."},A.SERVER_UNAVAILABLE={code:"server-unavailable",message:"The FCM server could not process the request in time. See the error documentation for more details."},A.INTERNAL_ERROR={code:"internal-error",message:"An internal error has occurred. Please retry the request."},A.UNKNOWN_ERROR={code:"unknown-error",message:"An unknown server error was returned."};class w{}error.InstallationsClientErrorCode=w,w.INVALID_ARGUMENT={code:"invalid-argument",message:"Invalid argument provided."},w.INVALID_PROJECT_ID={code:"invalid-project-id",message:"Invalid project ID provided."},w.INVALID_INSTALLATION_ID={code:"invalid-installation-id",message:"Invalid installation ID provided."},w.API_ERROR={code:"api-error",message:"Installation ID API call failed."};class I extends w{}error.InstanceIdClientErrorCode=I,I.INVALID_INSTANCE_ID={code:"invalid-instance-id",message:"Invalid instance ID provided."};const _={BILLING_NOT_ENABLED:"BILLING_NOT_ENABLED",CLAIMS_TOO_LARGE:"CLAIMS_TOO_LARGE",CONFIGURATION_EXISTS:"CONFIGURATION_EXISTS",CONFIGURATION_NOT_FOUND:"CONFIGURATION_NOT_FOUND",INSUFFICIENT_PERMISSION:"INSUFFICIENT_PERMISSION",INVALID_CONFIG:"INVALID_CONFIG",INVALID_CONFIG_ID:"INVALID_PROVIDER_ID",INVALID_CONTINUE_URI:"INVALID_CONTINUE_URI",INVALID_DYNAMIC_LINK_DOMAIN:"INVALID_DYNAMIC_LINK_DOMAIN",INVALID_HOSTING_LINK_DOMAIN:"INVALID_HOSTING_LINK_DOMAIN",DUPLICATE_EMAIL:"EMAIL_ALREADY_EXISTS",DUPLICATE_LOCAL_ID:"UID_ALREADY_EXISTS",DUPLICATE_MFA_ENROLLMENT_ID:"SECOND_FACTOR_UID_ALREADY_EXISTS",EMAIL_EXISTS:"EMAIL_ALREADY_EXISTS",EMAIL_NOT_FOUND:"EMAIL_NOT_FOUND",FORBIDDEN_CLAIM:"FORBIDDEN_CLAIM",INVALID_CLAIMS:"INVALID_CLAIMS",INVALID_DURATION:"INVALID_SESSION_COOKIE_DURATION",INVALID_EMAIL:"INVALID_EMAIL",INVALID_NEW_EMAIL:"INVALID_NEW_EMAIL",INVALID_DISPLAY_NAME:"INVALID_DISPLAY_NAME",INVALID_ID_TOKEN:"INVALID_ID_TOKEN",INVALID_NAME:"INVALID_NAME",INVALID_OAUTH_CLIENT_ID:"INVALID_OAUTH_CLIENT_ID",INVALID_PAGE_SELECTION:"INVALID_PAGE_TOKEN",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",INVALID_PROJECT_ID:"INVALID_PROJECT_ID",INVALID_PROVIDER_ID:"INVALID_PROVIDER_ID",INVALID_SERVICE_ACCOUNT:"INVALID_SERVICE_ACCOUNT",INVALID_TESTING_PHONE_NUMBER:"INVALID_TESTING_PHONE_NUMBER",INVALID_TENANT_TYPE:"INVALID_TENANT_TYPE",MISSING_ANDROID_PACKAGE_NAME:"MISSING_ANDROID_PACKAGE_NAME",MISSING_CONFIG:"MISSING_CONFIG",MISSING_CONFIG_ID:"MISSING_PROVIDER_ID",MISSING_DISPLAY_NAME:"MISSING_DISPLAY_NAME",MISSING_EMAIL:"MISSING_EMAIL",MISSING_IOS_BUNDLE_ID:"MISSING_IOS_BUNDLE_ID",MISSING_ISSUER:"MISSING_ISSUER",MISSING_LOCAL_ID:"MISSING_UID",MISSING_OAUTH_CLIENT_ID:"MISSING_OAUTH_CLIENT_ID",MISSING_PROVIDER_ID:"MISSING_PROVIDER_ID",MISSING_SAML_RELYING_PARTY_CONFIG:"MISSING_SAML_RELYING_PARTY_CONFIG",MISSING_USER_ACCOUNT:"MISSING_UID",OPERATION_NOT_ALLOWED:"OPERATION_NOT_ALLOWED",PERMISSION_DENIED:"INSUFFICIENT_PERMISSION",PHONE_NUMBER_EXISTS:"PHONE_NUMBER_ALREADY_EXISTS",PROJECT_NOT_FOUND:"PROJECT_NOT_FOUND",QUOTA_EXCEEDED:"QUOTA_EXCEEDED",SECOND_FACTOR_LIMIT_EXCEEDED:"SECOND_FACTOR_LIMIT_EXCEEDED",TENANT_NOT_FOUND:"TENANT_NOT_FOUND",TENANT_ID_MISMATCH:"MISMATCHING_TENANT_ID",TOKEN_EXPIRED:"ID_TOKEN_EXPIRED",UNAUTHORIZED_DOMAIN:"UNAUTHORIZED_DOMAIN",UNSUPPORTED_FIRST_FACTOR:"UNSUPPORTED_FIRST_FACTOR",UNSUPPORTED_SECOND_FACTOR:"UNSUPPORTED_SECOND_FACTOR",UNSUPPORTED_TENANT_OPERATION:"UNSUPPORTED_TENANT_OPERATION",UNVERIFIED_EMAIL:"UNVERIFIED_EMAIL",USER_NOT_FOUND:"USER_NOT_FOUND",USER_DISABLED:"USER_DISABLED",WEAK_PASSWORD:"INVALID_PASSWORD",INVALID_RECAPTCHA_ACTION:"INVALID_RECAPTCHA_ACTION",INVALID_RECAPTCHA_ENFORCEMENT_STATE:"INVALID_RECAPTCHA_ENFORCEMENT_STATE",RECAPTCHA_NOT_ENABLED:"RECAPTCHA_NOT_ENABLED"},S={InvalidParameters:"INVALID_ARGUMENT",MismatchSenderId:"MISMATCHED_CREDENTIAL",Unavailable:"SERVER_UNAVAILABLE",InternalServerError:"INTERNAL_ERROR",InvalidRegistration:"INVALID_REGISTRATION_TOKEN",NotRegistered:"REGISTRATION_TOKEN_NOT_REGISTERED",InvalidPackageName:"INVALID_PACKAGE_NAME",MessageTooBig:"PAYLOAD_SIZE_LIMIT_EXCEEDED",InvalidDataKey:"INVALID_DATA_PAYLOAD_KEY",InvalidTtl:"INVALID_OPTIONS",DeviceMessageRateExceeded:"DEVICE_MESSAGE_RATE_EXCEEDED",TopicsMessageRateExceeded:"TOPICS_MESSAGE_RATE_EXCEEDED",InvalidApnsCredential:"THIRD_PARTY_AUTH_ERROR",NOT_FOUND:"REGISTRATION_TOKEN_NOT_REGISTERED",PERMISSION_DENIED:"MISMATCHED_CREDENTIAL",RESOURCE_EXHAUSTED:"MESSAGE_RATE_EXCEEDED",UNAUTHENTICATED:"THIRD_PARTY_AUTH_ERROR",APNS_AUTH_ERROR:"THIRD_PARTY_AUTH_ERROR",INTERNAL:"INTERNAL_ERROR",INVALID_ARGUMENT:"INVALID_ARGUMENT",QUOTA_EXCEEDED:"MESSAGE_RATE_EXCEEDED",SENDER_ID_MISMATCH:"MISMATCHED_CREDENTIAL",THIRD_PARTY_AUTH_ERROR:"THIRD_PARTY_AUTH_ERROR",UNAVAILABLE:"SERVER_UNAVAILABLE",UNREGISTERED:"REGISTRATION_TOKEN_NOT_REGISTERED",UNSPECIFIED_ERROR:"UNKNOWN_ERROR"},j={NOT_FOUND:"REGISTRATION_TOKEN_NOT_REGISTERED",INVALID_ARGUMENT:"INVALID_REGISTRATION_TOKEN",TOO_MANY_TOPICS:"TOO_MANY_TOPICS",RESOURCE_EXHAUSTED:"TOO_MANY_TOPICS",PERMISSION_DENIED:"AUTHENTICATION_ERROR",DEADLINE_EXCEEDED:"SERVER_UNAVAILABLE",INTERNAL:"INTERNAL_ERROR",UNKNOWN:"UNKNOWN_ERROR"};return error}var credentialInternal={},src$f={},googleauth={},src$e={},src$d={},gaxios={},extend,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend;hasRequiredExtend=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d=function(s){return typeof Array.isArray=="function"?Array.isArray(s):e.call(s)==="[object Array]"},m=function(s){if(!s||e.call(s)!=="[object Object]")return!1;var h=t.call(s,"constructor"),v=s.constructor&&s.constructor.prototype&&t.call(s.constructor.prototype,"isPrototypeOf");if(s.constructor&&!h&&!v)return!1;var E;for(E in s);return typeof E>"u"||t.call(s,E)},c=function(s,h){r&&h.name==="__proto__"?r(s,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):s[h.name]=h.newValue},a=function(s,h){if(h==="__proto__")if(t.call(s,h)){if(u)return u(s,h).value}else return;return s[h]};return extend=function o(){var s,h,v,E,y,A,w=arguments[0],I=1,_=arguments.length,S=!1;for(typeof w=="boolean"&&(S=w,w=arguments[1]||{},I=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});I<_;++I)if(s=arguments[I],s!=null)for(h in s)v=a(w,h),E=a(s,h),w!==E&&(S&&E&&(m(E)||(y=d(E)))?(y?(y=!1,A=v&&d(v)?v:[]):A=v&&m(v)?v:{},c(w,{name:h,newValue:o(S,A,E)})):typeof E<"u"&&c(w,{name:h,newValue:E}));return w},extend}var browser$5={exports:{}},hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,function(t,e){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$4<"u")return commonjsGlobal$4;throw new Error("unable to locate global object")},u=r();t.exports=e=u.fetch,u.fetch&&(e.default=u.fetch.bind(u)),e.Headers=u.Headers,e.Request=u.Request,e.Response=u.Response}(browser$5,browser$5.exports)),browser$5.exports}var isStream_1,hasRequiredIsStream;function requireIsStream(){if(hasRequiredIsStream)return isStream_1;hasRequiredIsStream=1;const t=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";return t.writable=e=>t(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object",t.readable=e=>t(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object",t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&typeof e._transform=="function",isStream_1=t,isStream_1}var common$1={},util$9={};const name$u="gaxios",version$c="6.7.1",description$1="A simple common HTTP client specifically for Google APIs and services.",main$2="build/src/index.js",types$5="build/src/index.d.ts",files$1=["build/src"],scripts$1={lint:"gts check",test:"c8 mocha build/test","presystem-test":"npm run compile","system-test":"mocha build/system-test --timeout 80000",compile:"tsc -p .",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"compodoc src/","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean",precompile:"gts clean"},repository$1="googleapis/gaxios",keywords$1=["google"],engines$1={node:">=14"},author$1="Google, LLC",license$1="Apache-2.0",devDependencies$1={"@babel/plugin-proposal-private-methods":"^7.18.6","@compodoc/compodoc":"1.1.19","@types/cors":"^2.8.6","@types/express":"^4.16.1","@types/extend":"^3.0.1","@types/mocha":"^9.0.0","@types/multiparty":"0.0.36","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^20.0.0","@types/node-fetch":"^2.5.7","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","@types/uuid":"^10.0.0","abort-controller":"^3.0.0",assert:"^2.0.0",browserify:"^17.0.0",c8:"^8.0.0",cheerio:"1.0.0-rc.10",cors:"^2.8.5",execa:"^5.0.0",express:"^4.16.4","form-data":"^4.0.0",gts:"^5.0.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"5.0.0",linkinator:"^3.0.0",mocha:"^8.0.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^19.0.0",sinon:"^18.0.0","stream-browserify":"^3.0.0",tmp:"0.2.3","ts-loader":"^8.0.0",typescript:"^5.1.6",webpack:"^5.35.0","webpack-cli":"^4.0.0"},dependencies$1={extend:"^3.0.2","https-proxy-agent":"^7.0.1","is-stream":"^2.0.0","node-fetch":"^2.6.9",uuid:"^9.0.1"},require$$0$4={name:name$u,version:version$c,description:description$1,main:main$2,types:types$5,files:files$1,scripts:scripts$1,repository:repository$1,keywords:keywords$1,engines:engines$1,author:author$1,license:license$1,devDependencies:devDependencies$1,dependencies:dependencies$1};var hasRequiredUtil$9;function requireUtil$9(){return hasRequiredUtil$9||(hasRequiredUtil$9=1,Object.defineProperty(util$9,"__esModule",{value:!0}),util$9.pkg=void 0,util$9.pkg=require$$0$4),util$9}var hasRequiredCommon$2;function requireCommon$2(){return hasRequiredCommon$2||(hasRequiredCommon$2=1,function(t){var e=common$1&&common$1.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},r;Object.defineProperty(t,"__esModule",{value:!0}),t.GaxiosError=t.GAXIOS_ERROR_SYMBOL=void 0,t.defaultErrorRedactor=o;const u=require$$1$3,d=requireUtil$9(),m=e(requireExtend());t.GAXIOS_ERROR_SYMBOL=Symbol.for(`${d.pkg.name}-gaxios-error`);class c extends Error{static[(r=t.GAXIOS_ERROR_SYMBOL,Symbol.hasInstance)](h){return h&&typeof h=="object"&&t.GAXIOS_ERROR_SYMBOL in h&&h[t.GAXIOS_ERROR_SYMBOL]===d.pkg.version?!0:Function.prototype[Symbol.hasInstance].call(c,h)}constructor(h,v,E,y){var A;if(super(h),this.config=v,this.response=E,this.error=y,this[r]=d.pkg.version,this.config=(0,m.default)(!0,{},v),this.response&&(this.response.config=(0,m.default)(!0,{},this.response.config)),this.response){try{this.response.data=a(this.config.responseType,(A=this.response)===null||A===void 0?void 0:A.data)}catch{}this.status=this.response.status}y&&"code"in y&&y.code&&(this.code=y.code),v.errorRedactor&&v.errorRedactor({config:this.config,response:this.response})}}t.GaxiosError=c;function a(s,h){switch(s){case"stream":return h;case"json":return JSON.parse(JSON.stringify(h));case"arraybuffer":return JSON.parse(Buffer.from(h).toString("utf8"));case"blob":return JSON.parse(h.text());default:return h}}function o(s){const h="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function v(A){if(A)for(const w of Object.keys(A))/^authentication$/i.test(w)&&(A[w]=h),/^authorization$/i.test(w)&&(A[w]=h),/secret/i.test(w)&&(A[w]=h)}function E(A,w){if(typeof A=="object"&&A!==null&&typeof A[w]=="string"){const I=A[w];(/grant_type=/i.test(I)||/assertion=/i.test(I)||/secret/i.test(I))&&(A[w]=h)}}function y(A){typeof A=="object"&&A!==null&&("grant_type"in A&&(A.grant_type=h),"assertion"in A&&(A.assertion=h),"client_secret"in A&&(A.client_secret=h))}if(s.config){v(s.config.headers),E(s.config,"data"),y(s.config.data),E(s.config,"body"),y(s.config.body);try{const A=new u.URL("",s.config.url);A.searchParams.has("token")&&A.searchParams.set("token",h),A.searchParams.has("client_secret")&&A.searchParams.set("client_secret",h),s.config.url=A.toString()}catch{}}return s.response&&(o({config:s.response.config}),v(s.response.headers),E(s.response,"data"),y(s.response.data)),s}}(common$1)),common$1}var retry$2={},hasRequiredRetry$2;function requireRetry$2(){if(hasRequiredRetry$2)return retry$2;hasRequiredRetry$2=1,Object.defineProperty(retry$2,"__esModule",{value:!0}),retry$2.getRetryConfig=t;async function t(d){let m=r(d);if(!d||!d.config||!m&&!d.config.retry)return{shouldRetry:!1};m=m||{},m.currentRetryAttempt=m.currentRetryAttempt||0,m.retry=m.retry===void 0||m.retry===null?3:m.retry,m.httpMethodsToRetry=m.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],m.noResponseRetries=m.noResponseRetries===void 0||m.noResponseRetries===null?2:m.noResponseRetries,m.retryDelayMultiplier=m.retryDelayMultiplier?m.retryDelayMultiplier:2,m.timeOfFirstRequest=m.timeOfFirstRequest?m.timeOfFirstRequest:Date.now(),m.totalTimeout=m.totalTimeout?m.totalTimeout:Number.MAX_SAFE_INTEGER,m.maxRetryDelay=m.maxRetryDelay?m.maxRetryDelay:Number.MAX_SAFE_INTEGER;const c=[[100,199],[408,408],[429,429],[500,599]];if(m.statusCodesToRetry=m.statusCodesToRetry||c,d.config.retryConfig=m,!await(m.shouldRetry||e)(d))return{shouldRetry:!1,config:d.config};const o=u(m);d.config.retryConfig.currentRetryAttempt+=1;const s=m.retryBackoff?m.retryBackoff(d,o):new Promise(h=>{setTimeout(h,o)});return m.onRetryAttempt&&m.onRetryAttempt(d),await s,{shouldRetry:!0,config:d.config}}function e(d){var m;const c=r(d);if(d.name==="AbortError"||((m=d.error)===null||m===void 0?void 0:m.name)==="AbortError"||!c||c.retry===0||!d.response&&(c.currentRetryAttempt||0)>=c.noResponseRetries||!d.config.method||c.httpMethodsToRetry.indexOf(d.config.method.toUpperCase())<0)return!1;if(d.response&&d.response.status){let a=!1;for(const[o,s]of c.statusCodesToRetry){const h=d.response.status;if(h>=o&&h<=s){a=!0;break}}if(!a)return!1}return c.currentRetryAttempt=c.currentRetryAttempt||0,!(c.currentRetryAttempt>=c.retry)}function r(d){if(d&&d.config&&d.config.retryConfig)return d.config.retryConfig}function u(d){var m;const a=(d.currentRetryAttempt?0:(m=d.retryDelay)!==null&&m!==void 0?m:100)+(Math.pow(d.retryDelayMultiplier,d.currentRetryAttempt)-1)/2*1e3,o=d.totalTimeout-(Date.now()-d.timeOfFirstRequest);return Math.min(a,o,d.maxRetryDelay)}return retry$2}var commonjsBrowser$2={},v1$4={},rng$3={},hasRequiredRng$2;function requireRng$2(){if(hasRequiredRng$2)return rng$3;hasRequiredRng$2=1,Object.defineProperty(rng$3,"__esModule",{value:!0}),rng$3.default=r;let t;const e=new Uint8Array(16);function r(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return rng$3}var stringify$4={},validate$4={},regex$2={},hasRequiredRegex$2;function requireRegex$2(){if(hasRequiredRegex$2)return regex$2;hasRequiredRegex$2=1,Object.defineProperty(regex$2,"__esModule",{value:!0}),regex$2.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return regex$2.default=t,regex$2}var hasRequiredValidate$3;function requireValidate$3(){if(hasRequiredValidate$3)return validate$4;hasRequiredValidate$3=1,Object.defineProperty(validate$4,"__esModule",{value:!0}),validate$4.default=void 0;var t=e(requireRegex$2());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){return typeof d=="string"&&t.default.test(d)}var u=r;return validate$4.default=u,validate$4}var hasRequiredStringify$3;function requireStringify$3(){if(hasRequiredStringify$3)return stringify$4;hasRequiredStringify$3=1,Object.defineProperty(stringify$4,"__esModule",{value:!0}),stringify$4.default=void 0,stringify$4.unsafeStringify=u;var t=e(requireValidate$3());function e(c){return c&&c.__esModule?c:{default:c}}const r=[];for(let c=0;c<256;++c)r.push((c+256).toString(16).slice(1));function u(c,a=0){return r[c[a+0]]+r[c[a+1]]+r[c[a+2]]+r[c[a+3]]+"-"+r[c[a+4]]+r[c[a+5]]+"-"+r[c[a+6]]+r[c[a+7]]+"-"+r[c[a+8]]+r[c[a+9]]+"-"+r[c[a+10]]+r[c[a+11]]+r[c[a+12]]+r[c[a+13]]+r[c[a+14]]+r[c[a+15]]}function d(c,a=0){const o=u(c,a);if(!(0,t.default)(o))throw TypeError("Stringified UUID is invalid");return o}var m=d;return stringify$4.default=m,stringify$4}var hasRequiredV1$3;function requireV1$3(){if(hasRequiredV1$3)return v1$4;hasRequiredV1$3=1,Object.defineProperty(v1$4,"__esModule",{value:!0}),v1$4.default=void 0;var t=r(requireRng$2()),e=requireStringify$3();function r(s){return s&&s.__esModule?s:{default:s}}let u,d,m=0,c=0;function a(s,h,v){let E=h&&v||0;const y=h||new Array(16);s=s||{};let A=s.node||u,w=s.clockseq!==void 0?s.clockseq:d;if(A==null||w==null){const J=s.random||(s.rng||t.default)();A==null&&(A=u=[J[0]|1,J[1],J[2],J[3],J[4],J[5]]),w==null&&(w=d=(J[6]<<8|J[7])&16383)}let I=s.msecs!==void 0?s.msecs:Date.now(),_=s.nsecs!==void 0?s.nsecs:c+1;const S=I-m+(_-c)/1e4;if(S<0&&s.clockseq===void 0&&(w=w+1&16383),(S<0||I>m)&&s.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=I,c=_,d=w,I+=122192928e5;const j=((I&268435455)*1e4+_)%4294967296;y[E++]=j>>>24&255,y[E++]=j>>>16&255,y[E++]=j>>>8&255,y[E++]=j&255;const K=I/4294967296*1e4&268435455;y[E++]=K>>>8&255,y[E++]=K&255,y[E++]=K>>>24&15|16,y[E++]=K>>>16&255,y[E++]=w>>>8|128,y[E++]=w&255;for(let J=0;J<6;++J)y[E+J]=A[J];return h||(0,e.unsafeStringify)(y)}var o=a;return v1$4.default=o,v1$4}var v3$3={},v35$3={},parse$5={},hasRequiredParse$5;function requireParse$5(){if(hasRequiredParse$5)return parse$5;hasRequiredParse$5=1,Object.defineProperty(parse$5,"__esModule",{value:!0}),parse$5.default=void 0;var t=e(requireValidate$3());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){if(!(0,t.default)(d))throw TypeError("Invalid UUID");let m;const c=new Uint8Array(16);return c[0]=(m=parseInt(d.slice(0,8),16))>>>24,c[1]=m>>>16&255,c[2]=m>>>8&255,c[3]=m&255,c[4]=(m=parseInt(d.slice(9,13),16))>>>8,c[5]=m&255,c[6]=(m=parseInt(d.slice(14,18),16))>>>8,c[7]=m&255,c[8]=(m=parseInt(d.slice(19,23),16))>>>8,c[9]=m&255,c[10]=(m=parseInt(d.slice(24,36),16))/1099511627776&255,c[11]=m/4294967296&255,c[12]=m>>>24&255,c[13]=m>>>16&255,c[14]=m>>>8&255,c[15]=m&255,c}var u=r;return parse$5.default=u,parse$5}var hasRequiredV35$2;function requireV35$2(){if(hasRequiredV35$2)return v35$3;hasRequiredV35$2=1,Object.defineProperty(v35$3,"__esModule",{value:!0}),v35$3.URL=v35$3.DNS=void 0,v35$3.default=c;var t=requireStringify$3(),e=r(requireParse$5());function r(a){return a&&a.__esModule?a:{default:a}}function u(a){a=unescape(encodeURIComponent(a));const o=[];for(let s=0;s<a.length;++s)o.push(a.charCodeAt(s));return o}const d="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35$3.DNS=d;const m="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35$3.URL=m;function c(a,o,s){function h(v,E,y,A){var w;if(typeof v=="string"&&(v=u(v)),typeof E=="string"&&(E=(0,e.default)(E)),((w=E)===null||w===void 0?void 0:w.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+v.length);if(I.set(E),I.set(v,E.length),I=s(I),I[6]=I[6]&15|o,I[8]=I[8]&63|128,y){A=A||0;for(let _=0;_<16;++_)y[A+_]=I[_];return y}return(0,t.unsafeStringify)(I)}try{h.name=a}catch{}return h.DNS=d,h.URL=m,h}return v35$3}var md5$4={},hasRequiredMd5$3;function requireMd5$3(){if(hasRequiredMd5$3)return md5$4;hasRequiredMd5$3=1,Object.defineProperty(md5$4,"__esModule",{value:!0}),md5$4.default=void 0;function t(y){if(typeof y=="string"){const A=unescape(encodeURIComponent(y));y=new Uint8Array(A.length);for(let w=0;w<A.length;++w)y[w]=A.charCodeAt(w)}return e(u(d(y),y.length*8))}function e(y){const A=[],w=y.length*32,I="0123456789abcdef";for(let _=0;_<w;_+=8){const S=y[_>>5]>>>_%32&255,j=parseInt(I.charAt(S>>>4&15)+I.charAt(S&15),16);A.push(j)}return A}function r(y){return(y+64>>>9<<4)+14+1}function u(y,A){y[A>>5]|=128<<A%32,y[r(A)-1]=A;let w=1732584193,I=-271733879,_=-1732584194,S=271733878;for(let j=0;j<y.length;j+=16){const K=w,J=I,H=_,U=S;w=o(w,I,_,S,y[j],7,-680876936),S=o(S,w,I,_,y[j+1],12,-389564586),_=o(_,S,w,I,y[j+2],17,606105819),I=o(I,_,S,w,y[j+3],22,-1044525330),w=o(w,I,_,S,y[j+4],7,-176418897),S=o(S,w,I,_,y[j+5],12,1200080426),_=o(_,S,w,I,y[j+6],17,-1473231341),I=o(I,_,S,w,y[j+7],22,-45705983),w=o(w,I,_,S,y[j+8],7,1770035416),S=o(S,w,I,_,y[j+9],12,-1958414417),_=o(_,S,w,I,y[j+10],17,-42063),I=o(I,_,S,w,y[j+11],22,-1990404162),w=o(w,I,_,S,y[j+12],7,1804603682),S=o(S,w,I,_,y[j+13],12,-40341101),_=o(_,S,w,I,y[j+14],17,-1502002290),I=o(I,_,S,w,y[j+15],22,1236535329),w=s(w,I,_,S,y[j+1],5,-165796510),S=s(S,w,I,_,y[j+6],9,-1069501632),_=s(_,S,w,I,y[j+11],14,643717713),I=s(I,_,S,w,y[j],20,-373897302),w=s(w,I,_,S,y[j+5],5,-701558691),S=s(S,w,I,_,y[j+10],9,38016083),_=s(_,S,w,I,y[j+15],14,-660478335),I=s(I,_,S,w,y[j+4],20,-405537848),w=s(w,I,_,S,y[j+9],5,568446438),S=s(S,w,I,_,y[j+14],9,-1019803690),_=s(_,S,w,I,y[j+3],14,-187363961),I=s(I,_,S,w,y[j+8],20,1163531501),w=s(w,I,_,S,y[j+13],5,-1444681467),S=s(S,w,I,_,y[j+2],9,-51403784),_=s(_,S,w,I,y[j+7],14,1735328473),I=s(I,_,S,w,y[j+12],20,-1926607734),w=h(w,I,_,S,y[j+5],4,-378558),S=h(S,w,I,_,y[j+8],11,-2022574463),_=h(_,S,w,I,y[j+11],16,1839030562),I=h(I,_,S,w,y[j+14],23,-35309556),w=h(w,I,_,S,y[j+1],4,-1530992060),S=h(S,w,I,_,y[j+4],11,1272893353),_=h(_,S,w,I,y[j+7],16,-155497632),I=h(I,_,S,w,y[j+10],23,-1094730640),w=h(w,I,_,S,y[j+13],4,681279174),S=h(S,w,I,_,y[j],11,-358537222),_=h(_,S,w,I,y[j+3],16,-722521979),I=h(I,_,S,w,y[j+6],23,76029189),w=h(w,I,_,S,y[j+9],4,-640364487),S=h(S,w,I,_,y[j+12],11,-421815835),_=h(_,S,w,I,y[j+15],16,530742520),I=h(I,_,S,w,y[j+2],23,-995338651),w=v(w,I,_,S,y[j],6,-198630844),S=v(S,w,I,_,y[j+7],10,1126891415),_=v(_,S,w,I,y[j+14],15,-1416354905),I=v(I,_,S,w,y[j+5],21,-57434055),w=v(w,I,_,S,y[j+12],6,1700485571),S=v(S,w,I,_,y[j+3],10,-1894986606),_=v(_,S,w,I,y[j+10],15,-1051523),I=v(I,_,S,w,y[j+1],21,-2054922799),w=v(w,I,_,S,y[j+8],6,1873313359),S=v(S,w,I,_,y[j+15],10,-30611744),_=v(_,S,w,I,y[j+6],15,-1560198380),I=v(I,_,S,w,y[j+13],21,1309151649),w=v(w,I,_,S,y[j+4],6,-145523070),S=v(S,w,I,_,y[j+11],10,-1120210379),_=v(_,S,w,I,y[j+2],15,718787259),I=v(I,_,S,w,y[j+9],21,-343485551),w=m(w,K),I=m(I,J),_=m(_,H),S=m(S,U)}return[w,I,_,S]}function d(y){if(y.length===0)return[];const A=y.length*8,w=new Uint32Array(r(A));for(let I=0;I<A;I+=8)w[I>>5]|=(y[I/8]&255)<<I%32;return w}function m(y,A){const w=(y&65535)+(A&65535);return(y>>16)+(A>>16)+(w>>16)<<16|w&65535}function c(y,A){return y<<A|y>>>32-A}function a(y,A,w,I,_,S){return m(c(m(m(A,y),m(I,S)),_),w)}function o(y,A,w,I,_,S,j){return a(A&w|~A&I,y,A,_,S,j)}function s(y,A,w,I,_,S,j){return a(A&I|w&~I,y,A,_,S,j)}function h(y,A,w,I,_,S,j){return a(A^w^I,y,A,_,S,j)}function v(y,A,w,I,_,S,j){return a(w^(A|~I),y,A,_,S,j)}var E=t;return md5$4.default=E,md5$4}var hasRequiredV3$2;function requireV3$2(){if(hasRequiredV3$2)return v3$3;hasRequiredV3$2=1,Object.defineProperty(v3$3,"__esModule",{value:!0}),v3$3.default=void 0;var t=r(requireV35$2()),e=r(requireMd5$3());function r(m){return m&&m.__esModule?m:{default:m}}var d=(0,t.default)("v3",48,e.default);return v3$3.default=d,v3$3}var v4$3={},native$2={},hasRequiredNative$2;function requireNative$2(){if(hasRequiredNative$2)return native$2;hasRequiredNative$2=1,Object.defineProperty(native$2,"__esModule",{value:!0}),native$2.default=void 0;var e={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return native$2.default=e,native$2}var hasRequiredV4$2;function requireV4$2(){if(hasRequiredV4$2)return v4$3;hasRequiredV4$2=1,Object.defineProperty(v4$3,"__esModule",{value:!0}),v4$3.default=void 0;var t=u(requireNative$2()),e=u(requireRng$2()),r=requireStringify$3();function u(c){return c&&c.__esModule?c:{default:c}}function d(c,a,o){if(t.default.randomUUID&&!a&&!c)return t.default.randomUUID();c=c||{};const s=c.random||(c.rng||e.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,a){o=o||0;for(let h=0;h<16;++h)a[o+h]=s[h];return a}return(0,r.unsafeStringify)(s)}var m=d;return v4$3.default=m,v4$3}var v5$3={},sha1$4={},hasRequiredSha1$3;function requireSha1$3(){if(hasRequiredSha1$3)return sha1$4;hasRequiredSha1$3=1,Object.defineProperty(sha1$4,"__esModule",{value:!0}),sha1$4.default=void 0;function t(d,m,c,a){switch(d){case 0:return m&c^~m&a;case 1:return m^c^a;case 2:return m&c^m&a^c&a;case 3:return m^c^a}}function e(d,m){return d<<m|d>>>32-m}function r(d){const m=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof d=="string"){const h=unescape(encodeURIComponent(d));d=[];for(let v=0;v<h.length;++v)d.push(h.charCodeAt(v))}else Array.isArray(d)||(d=Array.prototype.slice.call(d));d.push(128);const a=d.length/4+2,o=Math.ceil(a/16),s=new Array(o);for(let h=0;h<o;++h){const v=new Uint32Array(16);for(let E=0;E<16;++E)v[E]=d[h*64+E*4]<<24|d[h*64+E*4+1]<<16|d[h*64+E*4+2]<<8|d[h*64+E*4+3];s[h]=v}s[o-1][14]=(d.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(d.length-1)*8&4294967295;for(let h=0;h<o;++h){const v=new Uint32Array(80);for(let _=0;_<16;++_)v[_]=s[h][_];for(let _=16;_<80;++_)v[_]=e(v[_-3]^v[_-8]^v[_-14]^v[_-16],1);let E=c[0],y=c[1],A=c[2],w=c[3],I=c[4];for(let _=0;_<80;++_){const S=Math.floor(_/20),j=e(E,5)+t(S,y,A,w)+I+m[S]+v[_]>>>0;I=w,w=A,A=e(y,30)>>>0,y=E,E=j}c[0]=c[0]+E>>>0,c[1]=c[1]+y>>>0,c[2]=c[2]+A>>>0,c[3]=c[3]+w>>>0,c[4]=c[4]+I>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,c[0]&255,c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,c[1]&255,c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,c[2]&255,c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,c[3]&255,c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,c[4]&255]}var u=r;return sha1$4.default=u,sha1$4}var hasRequiredV5$2;function requireV5$2(){if(hasRequiredV5$2)return v5$3;hasRequiredV5$2=1,Object.defineProperty(v5$3,"__esModule",{value:!0}),v5$3.default=void 0;var t=r(requireV35$2()),e=r(requireSha1$3());function r(m){return m&&m.__esModule?m:{default:m}}var d=(0,t.default)("v5",80,e.default);return v5$3.default=d,v5$3}var nil$3={},hasRequiredNil$2;function requireNil$2(){if(hasRequiredNil$2)return nil$3;hasRequiredNil$2=1,Object.defineProperty(nil$3,"__esModule",{value:!0}),nil$3.default=void 0;var t="00000000-0000-0000-0000-000000000000";return nil$3.default=t,nil$3}var version$b={},hasRequiredVersion$2;function requireVersion$2(){if(hasRequiredVersion$2)return version$b;hasRequiredVersion$2=1,Object.defineProperty(version$b,"__esModule",{value:!0}),version$b.default=void 0;var t=e(requireValidate$3());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){if(!(0,t.default)(d))throw TypeError("Invalid UUID");return parseInt(d.slice(14,15),16)}var u=r;return version$b.default=u,version$b}var hasRequiredCommonjsBrowser$2;function requireCommonjsBrowser$2(){return hasRequiredCommonjsBrowser$2||(hasRequiredCommonjsBrowser$2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var e=h(requireV1$3()),r=h(requireV3$2()),u=h(requireV4$2()),d=h(requireV5$2()),m=h(requireNil$2()),c=h(requireVersion$2()),a=h(requireValidate$3()),o=h(requireStringify$3()),s=h(requireParse$5());function h(v){return v&&v.__esModule?v:{default:v}}}(commonjsBrowser$2)),commonjsBrowser$2}var interceptor$1={},hasRequiredInterceptor$1;function requireInterceptor$1(){if(hasRequiredInterceptor$1)return interceptor$1;hasRequiredInterceptor$1=1,Object.defineProperty(interceptor$1,"__esModule",{value:!0}),interceptor$1.GaxiosInterceptorManager=void 0;class t extends Set{}return interceptor$1.GaxiosInterceptorManager=t,interceptor$1}var dist$4={},browser$4={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var t=1e3,e=t*60,r=e*60,u=r*24,d=u*7,m=u*365.25;ms=function(h,v){v=v||{};var E=typeof h;if(E==="string"&&h.length>0)return c(h);if(E==="number"&&isFinite(h))return v.long?o(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function c(h){if(h=String(h),!(h.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(v){var E=parseFloat(v[1]),y=(v[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return E*m;case"weeks":case"week":case"w":return E*d;case"days":case"day":case"d":return E*u;case"hours":case"hour":case"hrs":case"hr":case"h":return E*r;case"minutes":case"minute":case"mins":case"min":case"m":return E*e;case"seconds":case"second":case"secs":case"sec":case"s":return E*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}}function a(h){var v=Math.abs(h);return v>=u?Math.round(h/u)+"d":v>=r?Math.round(h/r)+"h":v>=e?Math.round(h/e)+"m":v>=t?Math.round(h/t)+"s":h+"ms"}function o(h){var v=Math.abs(h);return v>=u?s(h,v,u,"day"):v>=r?s(h,v,r,"hour"):v>=e?s(h,v,e,"minute"):v>=t?s(h,v,t,"second"):h+" ms"}function s(h,v,E,y){var A=v>=E*1.5;return Math.round(h/E)+" "+y+(A?"s":"")}return ms}var common,hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common;hasRequiredCommon$1=1;function t(e){u.debug=u,u.default=u,u.coerce=s,u.disable=a,u.enable=m,u.enabled=o,u.humanize=requireMs(),u.destroy=h,Object.keys(e).forEach(v=>{u[v]=e[v]}),u.names=[],u.skips=[],u.formatters={};function r(v){let E=0;for(let y=0;y<v.length;y++)E=(E<<5)-E+v.charCodeAt(y),E|=0;return u.colors[Math.abs(E)%u.colors.length]}u.selectColor=r;function u(v){let E,y=null,A,w;function I(..._){if(!I.enabled)return;const S=I,j=Number(new Date),K=j-(E||j);S.diff=K,S.prev=E,S.curr=j,E=j,_[0]=u.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let J=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(U,P)=>{if(U==="%%")return"%";J++;const Z=u.formatters[P];if(typeof Z=="function"){const ie=_[J];U=Z.call(S,ie),_.splice(J,1),J--}return U}),u.formatArgs.call(S,_),(S.log||u.log).apply(S,_)}return I.namespace=v,I.useColors=u.useColors(),I.color=u.selectColor(v),I.extend=d,I.destroy=u.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(A!==u.namespaces&&(A=u.namespaces,w=u.enabled(v)),w),set:_=>{y=_}}),typeof u.init=="function"&&u.init(I),I}function d(v,E){const y=u(this.namespace+(typeof E>"u"?":":E)+v);return y.log=this.log,y}function m(v){u.save(v),u.namespaces=v,u.names=[],u.skips=[];const E=(typeof v=="string"?v:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const y of E)y[0]==="-"?u.skips.push(y.slice(1)):u.names.push(y)}function c(v,E){let y=0,A=0,w=-1,I=0;for(;y<v.length;)if(A<E.length&&(E[A]===v[y]||E[A]==="*"))E[A]==="*"?(w=A,I=y,A++):(y++,A++);else if(w!==-1)A=w+1,I++,y=I;else return!1;for(;A<E.length&&E[A]==="*";)A++;return A===E.length}function a(){const v=[...u.names,...u.skips.map(E=>"-"+E)].join(",");return u.enable(""),v}function o(v){for(const E of u.skips)if(c(v,E))return!1;for(const E of u.names)if(c(v,E))return!0;return!1}function s(v){return v instanceof Error?v.stack||v.message:v}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return u.enable(u.load()),u}return common=t,common}var hasRequiredBrowser$2;function requireBrowser$2(){return hasRequiredBrowser$2||(hasRequiredBrowser$2=1,function(t,e){var r={};e.formatArgs=d,e.save=m,e.load=c,e.useColors=u,e.storage=a(),e.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function u(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let s;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(s=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(s[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function d(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;s.splice(1,0,h,"color: inherit");let v=0,E=0;s[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(v++,y==="%c"&&(E=v))}),s.splice(E,0,h)}e.log=console.debug||console.log||(()=>{});function m(s){try{s?e.storage.setItem("debug",s):e.storage.removeItem("debug")}catch{}}function c(){let s;try{s=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!s&&typeof process<"u"&&"env"in process&&(s=r.DEBUG),s}function a(){try{return localStorage}catch{}}t.exports=requireCommon$1()(e);const{formatters:o}=t.exports;o.j=function(s){try{return JSON.stringify(s)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(browser$4,browser$4.exports)),browser$4.exports}var dist$3={},helpers$1={},hasRequiredHelpers$1;function requireHelpers$1(){if(hasRequiredHelpers$1)return helpers$1;hasRequiredHelpers$1=1;var t=helpers$1&&helpers$1.__createBinding||(Object.create?function(o,s,h,v){v===void 0&&(v=h);var E=Object.getOwnPropertyDescriptor(s,h);(!E||("get"in E?!s.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return s[h]}}),Object.defineProperty(o,v,E)}:function(o,s,h,v){v===void 0&&(v=h),o[v]=s[h]}),e=helpers$1&&helpers$1.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=helpers$1&&helpers$1.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var h in o)h!=="default"&&Object.prototype.hasOwnProperty.call(o,h)&&t(s,o,h);return e(s,o),s};Object.defineProperty(helpers$1,"__esModule",{value:!0}),helpers$1.req=helpers$1.json=helpers$1.toBuffer=void 0;const u=r(require$$1$3),d=r(require$$1$3);async function m(o){let s=0;const h=[];for await(const v of o)s+=v.length,h.push(v);return Buffer.concat(h,s)}helpers$1.toBuffer=m;async function c(o){const h=(await m(o)).toString("utf8");try{return JSON.parse(h)}catch(v){const E=v;throw E.message+=` (input: ${h})`,E}}helpers$1.json=c;function a(o,s={}){const v=((typeof o=="string"?o:o.href).startsWith("https:")?d:u).request(o,s),E=new Promise((y,A)=>{v.once("response",y).once("error",A).end()});return v.then=E.then.bind(E),v}return helpers$1.req=a,helpers$1}var hasRequiredDist$4;function requireDist$4(){return hasRequiredDist$4||(hasRequiredDist$4=1,function(t){var e=dist$3&&dist$3.__createBinding||(Object.create?function(h,v,E,y){y===void 0&&(y=E);var A=Object.getOwnPropertyDescriptor(v,E);(!A||("get"in A?!v.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return v[E]}}),Object.defineProperty(h,y,A)}:function(h,v,E,y){y===void 0&&(y=E),h[y]=v[E]}),r=dist$3&&dist$3.__setModuleDefault||(Object.create?function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}:function(h,v){h.default=v}),u=dist$3&&dist$3.__importStar||function(h){if(h&&h.__esModule)return h;var v={};if(h!=null)for(var E in h)E!=="default"&&Object.prototype.hasOwnProperty.call(h,E)&&e(v,h,E);return r(v,h),v},d=dist$3&&dist$3.__exportStar||function(h,v){for(var E in h)E!=="default"&&!Object.prototype.hasOwnProperty.call(v,E)&&e(v,h,E)};Object.defineProperty(t,"__esModule",{value:!0}),t.Agent=void 0;const m=u(require$$1$3),c=u(require$$1$3),a=require$$1$3;d(requireHelpers$1(),t);const o=Symbol("AgentBaseInternalState");class s extends c.Agent{constructor(v){super(v),this[o]={}}isSecureEndpoint(v){if(v){if(typeof v.secureEndpoint=="boolean")return v.secureEndpoint;if(typeof v.protocol=="string")return v.protocol==="https:"}const{stack:E}=new Error;return typeof E!="string"?!1:E.split(`
`).some(y=>y.indexOf("(https.js:")!==-1||y.indexOf("node:https:")!==-1)}incrementSockets(v){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[v]||(this.sockets[v]=[]);const E=new m.Socket({writable:!1});return this.sockets[v].push(E),this.totalSocketCount++,E}decrementSockets(v,E){if(!this.sockets[v]||E===null)return;const y=this.sockets[v],A=y.indexOf(E);A!==-1&&(y.splice(A,1),this.totalSocketCount--,y.length===0&&delete this.sockets[v])}getName(v){return(typeof v.secureEndpoint=="boolean"?v.secureEndpoint:this.isSecureEndpoint(v))?a.Agent.prototype.getName.call(this,v):super.getName(v)}createSocket(v,E,y){const A={...E,secureEndpoint:this.isSecureEndpoint(E)},w=this.getName(A),I=this.incrementSockets(w);Promise.resolve().then(()=>this.connect(v,A)).then(_=>{if(this.decrementSockets(w,I),_ instanceof c.Agent)try{return _.addRequest(v,A)}catch(S){return y(S)}this[o].currentSocket=_,super.createSocket(v,E,y)},_=>{this.decrementSockets(w,I),y(_)})}createConnection(){const v=this[o].currentSocket;if(this[o].currentSocket=void 0,!v)throw new Error("No socket was returned in the `connect()` function");return v}get defaultPort(){return this[o].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(v){this[o]&&(this[o].defaultPort=v)}get protocol(){return this[o].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(v){this[o]&&(this[o].protocol=v)}}t.Agent=s}(dist$3)),dist$3}var parseProxyResponse$1={},hasRequiredParseProxyResponse$1;function requireParseProxyResponse$1(){if(hasRequiredParseProxyResponse$1)return parseProxyResponse$1;hasRequiredParseProxyResponse$1=1;var t=parseProxyResponse$1&&parseProxyResponse$1.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(parseProxyResponse$1,"__esModule",{value:!0}),parseProxyResponse$1.parseProxyResponse=void 0;const r=(0,t(requireBrowser$2()).default)("https-proxy-agent:parse-proxy-response");function u(d){return new Promise((m,c)=>{let a=0;const o=[];function s(){const A=d.read();A?y(A):d.once("readable",s)}function h(){d.removeListener("end",v),d.removeListener("error",E),d.removeListener("readable",s)}function v(){h(),r("onend"),c(new Error("Proxy connection ended before receiving CONNECT response"))}function E(A){h(),r("onerror %o",A),c(A)}function y(A){o.push(A),a+=A.length;const w=Buffer.concat(o,a),I=w.indexOf(`\r
\r
`);if(I===-1){r("have not received end of HTTP headers yet..."),s();return}const _=w.slice(0,I).toString("ascii").split(`\r
`),S=_.shift();if(!S)return d.destroy(),c(new Error("No header received from proxy CONNECT response"));const j=S.split(" "),K=+j[1],J=j.slice(2).join(" "),H={};for(const U of _){if(!U)continue;const P=U.indexOf(":");if(P===-1)return d.destroy(),c(new Error(`Invalid header from proxy CONNECT response: "${U}"`));const Z=U.slice(0,P).toLowerCase(),ie=U.slice(P+1).trimStart(),ue=H[Z];typeof ue=="string"?H[Z]=[ue,ie]:Array.isArray(ue)?ue.push(ie):H[Z]=ie}r("got proxy server response: %o %o",S,H),h(),m({connect:{statusCode:K,statusText:J,headers:H},buffered:w})}d.on("error",E),d.on("end",v),s()})}return parseProxyResponse$1.parseProxyResponse=u,parseProxyResponse$1}var hasRequiredDist$3;function requireDist$3(){if(hasRequiredDist$3)return dist$4;hasRequiredDist$3=1;var t=dist$4&&dist$4.__createBinding||(Object.create?function(I,_,S,j){j===void 0&&(j=S);var K=Object.getOwnPropertyDescriptor(_,S);(!K||("get"in K?!_.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(I,j,K)}:function(I,_,S,j){j===void 0&&(j=S),I[j]=_[S]}),e=dist$4&&dist$4.__setModuleDefault||(Object.create?function(I,_){Object.defineProperty(I,"default",{enumerable:!0,value:_})}:function(I,_){I.default=_}),r=dist$4&&dist$4.__importStar||function(I){if(I&&I.__esModule)return I;var _={};if(I!=null)for(var S in I)S!=="default"&&Object.prototype.hasOwnProperty.call(I,S)&&t(_,I,S);return e(_,I),_},u=dist$4&&dist$4.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(dist$4,"__esModule",{value:!0}),dist$4.HttpsProxyAgent=void 0;const d=r(require$$1$3),m=r(require$$1$3),c=u(require$$1$3),a=u(requireBrowser$2()),o=requireDist$4(),s=require$$1$3,h=requireParseProxyResponse$1(),v=(0,a.default)("https-proxy-agent"),E=I=>I.servername===void 0&&I.host&&!d.isIP(I.host)?{...I,servername:I.host}:I;class y extends o.Agent{constructor(_,S){super(S),this.options={path:void 0},this.proxy=typeof _=="string"?new s.URL(_):_,this.proxyHeaders=S?.headers??{},v("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const j=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),K=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...S?w(S,"headers"):null,host:j,port:K}}async connect(_,S){const{proxy:j}=this;if(!S.host)throw new TypeError('No "host" provided');let K;j.protocol==="https:"?(v("Creating `tls.Socket`: %o",this.connectOpts),K=m.connect(E(this.connectOpts))):(v("Creating `net.Socket`: %o",this.connectOpts),K=d.connect(this.connectOpts));const J=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},H=d.isIPv6(S.host)?`[${S.host}]`:S.host;let U=`CONNECT ${H}:${S.port} HTTP/1.1\r
`;if(j.username||j.password){const le=`${decodeURIComponent(j.username)}:${decodeURIComponent(j.password)}`;J["Proxy-Authorization"]=`Basic ${Buffer.from(le).toString("base64")}`}J.Host=`${H}:${S.port}`,J["Proxy-Connection"]||(J["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const le of Object.keys(J))U+=`${le}: ${J[le]}\r
`;const P=(0,h.parseProxyResponse)(K);K.write(`${U}\r
`);const{connect:Z,buffered:ie}=await P;if(_.emit("proxyConnect",Z),this.emit("proxyConnect",Z,_),Z.statusCode===200)return _.once("socket",A),S.secureEndpoint?(v("Upgrading socket connection to TLS"),m.connect({...w(E(S),"host","path","port"),socket:K})):K;K.destroy();const ue=new d.Socket({writable:!1});return ue.readable=!0,_.once("socket",le=>{v("Replaying proxy buffer for failed request"),(0,c.default)(le.listenerCount("data")>0),le.push(ie),le.push(null)}),ue}}y.protocols=["http","https"],dist$4.HttpsProxyAgent=y;function A(I){I.resume()}function w(I,..._){const S={};let j;for(j in I)_.includes(j)||(S[j]=I[j]);return S}return dist$4}var hasRequiredGaxios;function requireGaxios(){if(hasRequiredGaxios)return gaxios;hasRequiredGaxios=1;var t={},e=gaxios&&gaxios.__createBinding||(Object.create?function(Ae,Se,be,we){we===void 0&&(we=be);var Ce=Object.getOwnPropertyDescriptor(Se,be);(!Ce||("get"in Ce?!Se.__esModule:Ce.writable||Ce.configurable))&&(Ce={enumerable:!0,get:function(){return Se[be]}}),Object.defineProperty(Ae,we,Ce)}:function(Ae,Se,be,we){we===void 0&&(we=be),Ae[we]=Se[be]}),r=gaxios&&gaxios.__setModuleDefault||(Object.create?function(Ae,Se){Object.defineProperty(Ae,"default",{enumerable:!0,value:Se})}:function(Ae,Se){Ae.default=Se}),u=gaxios&&gaxios.__importStar||function(Ae){if(Ae&&Ae.__esModule)return Ae;var Se={};if(Ae!=null)for(var be in Ae)be!=="default"&&Object.prototype.hasOwnProperty.call(Ae,be)&&e(Se,Ae,be);return r(Se,Ae),Se},d=gaxios&&gaxios.__classPrivateFieldGet||function(Ae,Se,be,we){if(be==="a"&&!we)throw new TypeError("Private accessor was defined without a getter");if(typeof Se=="function"?Ae!==Se||!we:!Se.has(Ae))throw new TypeError("Cannot read private member from an object whose class did not declare it");return be==="m"?we:be==="a"?we.call(Ae):we?we.value:Se.get(Ae)},m=gaxios&&gaxios.__classPrivateFieldSet||function(Ae,Se,be,we,Ce){if(we==="m")throw new TypeError("Private method is not writable");if(we==="a"&&!Ce)throw new TypeError("Private accessor was defined without a setter");if(typeof Se=="function"?Ae!==Se||!Ce:!Se.has(Ae))throw new TypeError("Cannot write private member to an object whose class did not declare it");return we==="a"?Ce.call(Ae,be):Ce?Ce.value=be:Se.set(Ae,be),be},c=gaxios&&gaxios.__importDefault||function(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}},a,o,s,h,v,E,y,A;Object.defineProperty(gaxios,"__esModule",{value:!0}),gaxios.Gaxios=void 0;const w=c(requireExtend()),I=require$$1$3,_=c(requireBrowser$3()),S=c(require$$1$3),j=c(requireIsStream()),K=require$$1$3,J=requireCommon$2(),H=requireRetry$2(),U=require$$1$3,P=requireCommonjsBrowser$2(),Z=requireInterceptor$1(),ie=le()?window.fetch:_.default;function ue(){return typeof window<"u"&&!!window}function le(){return ue()&&!!window.fetch}function ne(){return typeof Buffer<"u"}function ye(Ae,Se){return!!fe(Ae,Se)}function fe(Ae,Se){Se=Se.toLowerCase();for(const be of Object.keys(Ae?.headers||{}))if(Se===be.toLowerCase())return Ae.headers[be]}class Te{constructor(Se){a.add(this),this.agentCache=new Map,this.defaults=Se||{},this.interceptors={request:new Z.GaxiosInterceptorManager,response:new Z.GaxiosInterceptorManager}}async request(Se={}){return Se=await d(this,a,"m",E).call(this,Se),Se=await d(this,a,"m",h).call(this,Se),d(this,a,"m",v).call(this,this._request(Se))}async _defaultAdapter(Se){const we=await(Se.fetchImplementation||ie)(Se.url,Se),Ce=await this.getResponseData(Se,we);return this.translateResponse(Se,we,Ce)}async _request(Se={}){var be;try{let we;if(Se.adapter?we=await Se.adapter(Se,this._defaultAdapter.bind(this)):we=await this._defaultAdapter(Se),!Se.validateStatus(we.status)){if(Se.responseType==="stream"){let Ce="";await new Promise(je=>{(we?.data).on("data",Fe=>{Ce+=Fe}),(we?.data).on("end",je)}),we.data=Ce}throw new J.GaxiosError(`Request failed with status code ${we.status}`,Se,we)}return we}catch(we){const Ce=we instanceof J.GaxiosError?we:new J.GaxiosError(we.message,Se,void 0,we),{shouldRetry:je,config:Fe}=await(0,H.getRetryConfig)(Ce);if(je&&Fe)return Ce.config.retryConfig.currentRetryAttempt=Fe.retryConfig.currentRetryAttempt,Se.retryConfig=(be=Ce.config)===null||be===void 0?void 0:be.retryConfig,this._request(Se);throw Ce}}async getResponseData(Se,be){switch(Se.responseType){case"stream":return be.body;case"json":{let we=await be.text();try{we=JSON.parse(we)}catch{}return we}case"arraybuffer":return be.arrayBuffer();case"blob":return be.blob();case"text":return be.text();default:return this.getResponseDataFromContentType(be)}}validateStatus(Se){return Se>=200&&Se<300}paramsSerializer(Se){return S.default.stringify(Se)}translateResponse(Se,be,we){const Ce={};return be.headers.forEach((je,Fe)=>{Ce[Fe]=je}),{config:Se,data:we,headers:Ce,status:be.status,statusText:be.statusText,request:{responseURL:be.url}}}async getResponseDataFromContentType(Se){let be=Se.headers.get("Content-Type");if(be===null)return Se.text();if(be=be.toLowerCase(),be.includes("application/json")){let we=await Se.text();try{we=JSON.parse(we)}catch{}return we}else return be.match(/^text\//)?Se.text():Se.blob()}async*getMultipartRequest(Se,be){const we=`--${be}--`;for(const Ce of Se){const je=Ce.headers["Content-Type"]||"application/octet-stream";yield`--${be}\r
Content-Type: ${je}\r
\r
`,typeof Ce.content=="string"?yield Ce.content:yield*Ce.content,yield`\r
`}yield we}}return gaxios.Gaxios=Te,o=Te,a=new WeakSet,s=function(Se,be=[]){var we,Ce;const je=new K.URL(Se),Fe=[...be],Ve=((Ce=(we=t.NO_PROXY)!==null&&we!==void 0?we:t.no_proxy)===null||Ce===void 0?void 0:Ce.split(","))||[];for(const Ge of Ve)Fe.push(Ge.trim());for(const Ge of Fe)if(Ge instanceof RegExp){if(Ge.test(je.toString()))return!1}else if(Ge instanceof K.URL){if(Ge.origin===je.origin)return!1}else if(Ge.startsWith("*.")||Ge.startsWith(".")){const Le=Ge.replace(/^\*\./,".");if(je.hostname.endsWith(Le))return!1}else if(Ge===je.origin||Ge===je.hostname||Ge===je.href)return!1;return!0},h=async function(Se){let be=Promise.resolve(Se);for(const we of this.interceptors.request.values())we&&(be=be.then(we.resolved,we.rejected));return be},v=async function(Se){let be=Promise.resolve(Se);for(const we of this.interceptors.response.values())we&&(be=be.then(we.resolved,we.rejected));return be},E=async function(Se){var be,we,Ce,je;const Fe=(0,w.default)(!0,{},this.defaults,Se);if(!Fe.url)throw new Error("URL is required.");const Ve=Fe.baseUrl||Fe.baseURL;if(Ve&&(Fe.url=Ve.toString()+Fe.url),Fe.paramsSerializer=Fe.paramsSerializer||this.paramsSerializer,Fe.params&&Object.keys(Fe.params).length>0){let Be=Fe.paramsSerializer(Fe.params);Be.startsWith("?")&&(Be=Be.slice(1));const $e=Fe.url.toString().includes("?")?"&":"?";Fe.url=Fe.url+$e+Be}if(typeof Se.maxContentLength=="number"&&(Fe.size=Se.maxContentLength),typeof Se.maxRedirects=="number"&&(Fe.follow=Se.maxRedirects),Fe.headers=Fe.headers||{},Fe.multipart===void 0&&Fe.data){const Be=typeof FormData>"u"?!1:Fe?.data instanceof FormData;j.default.readable(Fe.data)?Fe.body=Fe.data:ne()&&Buffer.isBuffer(Fe.data)?(Fe.body=Fe.data,ye(Fe,"Content-Type")||(Fe.headers["Content-Type"]="application/json")):typeof Fe.data=="object"?Be||(fe(Fe,"content-type")==="application/x-www-form-urlencoded"?Fe.body=Fe.paramsSerializer(Fe.data):(ye(Fe,"Content-Type")||(Fe.headers["Content-Type"]="application/json"),Fe.body=JSON.stringify(Fe.data))):Fe.body=Fe.data}else if(Fe.multipart&&Fe.multipart.length>0){const Be=(0,P.v4)();Fe.headers["Content-Type"]=`multipart/related; boundary=${Be}`;const $e=new U.PassThrough;Fe.body=$e,(0,U.pipeline)(this.getMultipartRequest(Fe.multipart,Be),$e,()=>{})}Fe.validateStatus=Fe.validateStatus||this.validateStatus,Fe.responseType=Fe.responseType||"unknown",!Fe.headers.Accept&&Fe.responseType==="json"&&(Fe.headers.Accept="application/json"),Fe.method=Fe.method||"GET";const Ge=Fe.proxy||((be=process==null?void 0:t)===null||be===void 0?void 0:be.HTTPS_PROXY)||((we=process==null?void 0:t)===null||we===void 0?void 0:we.https_proxy)||((Ce=process==null?void 0:t)===null||Ce===void 0?void 0:Ce.HTTP_PROXY)||((je=process==null?void 0:t)===null||je===void 0?void 0:je.http_proxy),Le=d(this,a,"m",s).call(this,Fe.url,Fe.noProxy);if(!Fe.agent)if(Ge&&Le){const Be=await d(o,o,"m",A).call(o);this.agentCache.has(Ge)?Fe.agent=this.agentCache.get(Ge):(Fe.agent=new Be(Ge,{cert:Fe.cert,key:Fe.key}),this.agentCache.set(Ge,Fe.agent))}else Fe.cert&&Fe.key&&(this.agentCache.has(Fe.key)?Fe.agent=this.agentCache.get(Fe.key):(Fe.agent=new I.Agent({cert:Fe.cert,key:Fe.key}),this.agentCache.set(Fe.key,Fe.agent)));return typeof Fe.errorRedactor!="function"&&Fe.errorRedactor!==!1&&(Fe.errorRedactor=J.defaultErrorRedactor),Fe},A=async function(){return m(this,o,d(this,o,"f",y)||(await Promise.resolve().then(()=>u(requireDist$3()))).HttpsProxyAgent,"f",y),d(this,o,"f",y)},y={value:void 0},gaxios}var hasRequiredSrc$f;function requireSrc$f(){return hasRequiredSrc$f||(hasRequiredSrc$f=1,function(t){var e=src$d&&src$d.__createBinding||(Object.create?function(c,a,o,s){s===void 0&&(s=o);var h=Object.getOwnPropertyDescriptor(a,o);(!h||("get"in h?!a.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(c,s,h)}:function(c,a,o,s){s===void 0&&(s=o),c[s]=a[o]}),r=src$d&&src$d.__exportStar||function(c,a){for(var o in c)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&e(a,c,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.Gaxios=t.GaxiosError=void 0,t.request=m;const u=requireGaxios();Object.defineProperty(t,"Gaxios",{enumerable:!0,get:function(){return u.Gaxios}});var d=requireCommon$2();Object.defineProperty(t,"GaxiosError",{enumerable:!0,get:function(){return d.GaxiosError}}),r(requireInterceptor$1(),t),t.instance=new u.Gaxios;async function m(c){return t.instance.request(c)}}(src$d)),src$d}var jsonBigint={exports:{}},stringify$3={exports:{}},bignumber$1={exports:{}},bignumber=bignumber$1.exports,hasRequiredBignumber;function requireBignumber(){return hasRequiredBignumber||(hasRequiredBignumber=1,function(t){(function(e){var r,u=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,d=Math.ceil,m=Math.floor,c="[BigNumber Error] ",a=c+"Number primitive has more than 15 significant digits: ",o=1e14,s=14,h=9007199254740991,v=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],E=1e7,y=1e9;function A(H){var U,P,Z,ie=Ve.prototype={constructor:Ve,toString:null,valueOf:null},ue=new Ve(1),le=20,ne=4,ye=-7,fe=21,Te=-1e7,Ae=1e7,Se=!1,be=1,we=0,Ce={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},je="0123456789abcdefghijklmnopqrstuvwxyz",Fe=!0;function Ve(p,V){var R,ce,Re,ke,qe,g,ee,ae,l=this;if(!(l instanceof Ve))return new Ve(p,V);if(V==null){if(p&&p._isBigNumber===!0){l.s=p.s,!p.c||p.e>Ae?l.c=l.e=null:p.e<Te?l.c=[l.e=0]:(l.e=p.e,l.c=p.c.slice());return}if((g=typeof p=="number")&&p*0==0){if(l.s=1/p<0?(p=-p,-1):1,p===~~p){for(ke=0,qe=p;qe>=10;qe/=10,ke++);ke>Ae?l.c=l.e=null:(l.e=ke,l.c=[p]);return}ae=String(p)}else{if(!u.test(ae=String(p)))return Z(l,ae,g);l.s=ae.charCodeAt(0)==45?(ae=ae.slice(1),-1):1}(ke=ae.indexOf("."))>-1&&(ae=ae.replace(".","")),(qe=ae.search(/e/i))>0?(ke<0&&(ke=qe),ke+=+ae.slice(qe+1),ae=ae.substring(0,qe)):ke<0&&(ke=ae.length)}else{if(S(V,2,je.length,"Base"),V==10&&Fe)return l=new Ve(p),$e(l,le+l.e+1,ne);if(ae=String(p),g=typeof p=="number"){if(p*0!=0)return Z(l,ae,g,V);if(l.s=1/p<0?(ae=ae.slice(1),-1):1,Ve.DEBUG&&ae.replace(/^0\.0*|\./,"").length>15)throw Error(a+p)}else l.s=ae.charCodeAt(0)===45?(ae=ae.slice(1),-1):1;for(R=je.slice(0,V),ke=qe=0,ee=ae.length;qe<ee;qe++)if(R.indexOf(ce=ae.charAt(qe))<0){if(ce=="."){if(qe>ke){ke=ee;continue}}else if(!Re&&(ae==ae.toUpperCase()&&(ae=ae.toLowerCase())||ae==ae.toLowerCase()&&(ae=ae.toUpperCase()))){Re=!0,qe=-1,ke=0;continue}return Z(l,String(p),g,V)}g=!1,ae=P(ae,V,10,l.s),(ke=ae.indexOf("."))>-1?ae=ae.replace(".",""):ke=ae.length}for(qe=0;ae.charCodeAt(qe)===48;qe++);for(ee=ae.length;ae.charCodeAt(--ee)===48;);if(ae=ae.slice(qe,++ee)){if(ee-=qe,g&&Ve.DEBUG&&ee>15&&(p>h||p!==m(p)))throw Error(a+l.s*p);if((ke=ke-qe-1)>Ae)l.c=l.e=null;else if(ke<Te)l.c=[l.e=0];else{if(l.e=ke,l.c=[],qe=(ke+1)%s,ke<0&&(qe+=s),qe<ee){for(qe&&l.c.push(+ae.slice(0,qe)),ee-=s;qe<ee;)l.c.push(+ae.slice(qe,qe+=s));qe=s-(ae=ae.slice(qe)).length}else qe-=ee;for(;qe--;ae+="0");l.c.push(+ae)}}else l.c=[l.e=0]}Ve.clone=A,Ve.ROUND_UP=0,Ve.ROUND_DOWN=1,Ve.ROUND_CEIL=2,Ve.ROUND_FLOOR=3,Ve.ROUND_HALF_UP=4,Ve.ROUND_HALF_DOWN=5,Ve.ROUND_HALF_EVEN=6,Ve.ROUND_HALF_CEIL=7,Ve.ROUND_HALF_FLOOR=8,Ve.EUCLID=9,Ve.config=Ve.set=function(p){var V,R;if(p!=null)if(typeof p=="object"){if(p.hasOwnProperty(V="DECIMAL_PLACES")&&(R=p[V],S(R,0,y,V),le=R),p.hasOwnProperty(V="ROUNDING_MODE")&&(R=p[V],S(R,0,8,V),ne=R),p.hasOwnProperty(V="EXPONENTIAL_AT")&&(R=p[V],R&&R.pop?(S(R[0],-y,0,V),S(R[1],0,y,V),ye=R[0],fe=R[1]):(S(R,-y,y,V),ye=-(fe=R<0?-R:R))),p.hasOwnProperty(V="RANGE"))if(R=p[V],R&&R.pop)S(R[0],-y,-1,V),S(R[1],1,y,V),Te=R[0],Ae=R[1];else if(S(R,-y,y,V),R)Te=-(Ae=R<0?-R:R);else throw Error(c+V+" cannot be zero: "+R);if(p.hasOwnProperty(V="CRYPTO"))if(R=p[V],R===!!R)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Se=R;else throw Se=!R,Error(c+"crypto unavailable");else Se=R;else throw Error(c+V+" not true or false: "+R);if(p.hasOwnProperty(V="MODULO_MODE")&&(R=p[V],S(R,0,9,V),be=R),p.hasOwnProperty(V="POW_PRECISION")&&(R=p[V],S(R,0,y,V),we=R),p.hasOwnProperty(V="FORMAT"))if(R=p[V],typeof R=="object")Ce=R;else throw Error(c+V+" not an object: "+R);if(p.hasOwnProperty(V="ALPHABET"))if(R=p[V],typeof R=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(R))Fe=R.slice(0,10)=="0123456789",je=R;else throw Error(c+V+" invalid: "+R)}else throw Error(c+"Object expected: "+p);return{DECIMAL_PLACES:le,ROUNDING_MODE:ne,EXPONENTIAL_AT:[ye,fe],RANGE:[Te,Ae],CRYPTO:Se,MODULO_MODE:be,POW_PRECISION:we,FORMAT:Ce,ALPHABET:je}},Ve.isBigNumber=function(p){if(!p||p._isBigNumber!==!0)return!1;if(!Ve.DEBUG)return!0;var V,R,ce=p.c,Re=p.e,ke=p.s;e:if({}.toString.call(ce)=="[object Array]"){if((ke===1||ke===-1)&&Re>=-y&&Re<=y&&Re===m(Re)){if(ce[0]===0){if(Re===0&&ce.length===1)return!0;break e}if(V=(Re+1)%s,V<1&&(V+=s),String(ce[0]).length==V){for(V=0;V<ce.length;V++)if(R=ce[V],R<0||R>=o||R!==m(R))break e;if(R!==0)return!0}}}else if(ce===null&&Re===null&&(ke===null||ke===1||ke===-1))return!0;throw Error(c+"Invalid BigNumber: "+p)},Ve.maximum=Ve.max=function(){return Le(arguments,-1)},Ve.minimum=Ve.min=function(){return Le(arguments,1)},Ve.random=function(){var p=9007199254740992,V=Math.random()*p&2097151?function(){return m(Math.random()*p)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(R){var ce,Re,ke,qe,g,ee=0,ae=[],l=new Ve(ue);if(R==null?R=le:S(R,0,y),qe=d(R/s),Se)if(crypto.getRandomValues){for(ce=crypto.getRandomValues(new Uint32Array(qe*=2));ee<qe;)g=ce[ee]*131072+(ce[ee+1]>>>11),g>=9e15?(Re=crypto.getRandomValues(new Uint32Array(2)),ce[ee]=Re[0],ce[ee+1]=Re[1]):(ae.push(g%1e14),ee+=2);ee=qe/2}else if(crypto.randomBytes){for(ce=crypto.randomBytes(qe*=7);ee<qe;)g=(ce[ee]&31)*281474976710656+ce[ee+1]*1099511627776+ce[ee+2]*4294967296+ce[ee+3]*16777216+(ce[ee+4]<<16)+(ce[ee+5]<<8)+ce[ee+6],g>=9e15?crypto.randomBytes(7).copy(ce,ee):(ae.push(g%1e14),ee+=7);ee=qe/7}else throw Se=!1,Error(c+"crypto unavailable");if(!Se)for(;ee<qe;)g=V(),g<9e15&&(ae[ee++]=g%1e14);for(qe=ae[--ee],R%=s,qe&&R&&(g=v[s-R],ae[ee]=m(qe/g)*g);ae[ee]===0;ae.pop(),ee--);if(ee<0)ae=[ke=0];else{for(ke=-1;ae[0]===0;ae.splice(0,1),ke-=s);for(ee=1,g=ae[0];g>=10;g/=10,ee++);ee<s&&(ke-=s-ee)}return l.e=ke,l.c=ae,l}}(),Ve.sum=function(){for(var p=1,V=arguments,R=new Ve(V[0]);p<V.length;)R=R.plus(V[p++]);return R},P=function(){var p="0123456789";function V(R,ce,Re,ke){for(var qe,g=[0],ee,ae=0,l=R.length;ae<l;){for(ee=g.length;ee--;g[ee]*=ce);for(g[0]+=ke.indexOf(R.charAt(ae++)),qe=0;qe<g.length;qe++)g[qe]>Re-1&&(g[qe+1]==null&&(g[qe+1]=0),g[qe+1]+=g[qe]/Re|0,g[qe]%=Re)}return g.reverse()}return function(R,ce,Re,ke,qe){var g,ee,ae,l,X,oe,_e,He,nt=R.indexOf("."),It=le,wt=ne;for(nt>=0&&(l=we,we=0,R=R.replace(".",""),He=new Ve(ce),oe=He.pow(R.length-nt),we=l,He.c=V(J(I(oe.c),oe.e,"0"),10,Re,p),He.e=He.c.length),_e=V(R,ce,Re,qe?(g=je,p):(g=p,je)),ae=l=_e.length;_e[--l]==0;_e.pop());if(!_e[0])return g.charAt(0);if(nt<0?--ae:(oe.c=_e,oe.e=ae,oe.s=ke,oe=U(oe,He,It,wt,Re),_e=oe.c,X=oe.r,ae=oe.e),ee=ae+It+1,nt=_e[ee],l=Re/2,X=X||ee<0||_e[ee+1]!=null,X=wt<4?(nt!=null||X)&&(wt==0||wt==(oe.s<0?3:2)):nt>l||nt==l&&(wt==4||X||wt==6&&_e[ee-1]&1||wt==(oe.s<0?8:7)),ee<1||!_e[0])R=X?J(g.charAt(1),-It,g.charAt(0)):g.charAt(0);else{if(_e.length=ee,X)for(--Re;++_e[--ee]>Re;)_e[ee]=0,ee||(++ae,_e=[1].concat(_e));for(l=_e.length;!_e[--l];);for(nt=0,R="";nt<=l;R+=g.charAt(_e[nt++]));R=J(R,ae,g.charAt(0))}return R}}(),U=function(){function p(ce,Re,ke){var qe,g,ee,ae,l=0,X=ce.length,oe=Re%E,_e=Re/E|0;for(ce=ce.slice();X--;)ee=ce[X]%E,ae=ce[X]/E|0,qe=_e*ee+ae*oe,g=oe*ee+qe%E*E+l,l=(g/ke|0)+(qe/E|0)+_e*ae,ce[X]=g%ke;return l&&(ce=[l].concat(ce)),ce}function V(ce,Re,ke,qe){var g,ee;if(ke!=qe)ee=ke>qe?1:-1;else for(g=ee=0;g<ke;g++)if(ce[g]!=Re[g]){ee=ce[g]>Re[g]?1:-1;break}return ee}function R(ce,Re,ke,qe){for(var g=0;ke--;)ce[ke]-=g,g=ce[ke]<Re[ke]?1:0,ce[ke]=g*qe+ce[ke]-Re[ke];for(;!ce[0]&&ce.length>1;ce.splice(0,1));}return function(ce,Re,ke,qe,g){var ee,ae,l,X,oe,_e,He,nt,It,wt,ir,_r,Rr,Hr,Vr,Tr,$t,qt=ce.s==Re.s?1:-1,Kt=ce.c,nr=Re.c;if(!Kt||!Kt[0]||!nr||!nr[0])return new Ve(!ce.s||!Re.s||(Kt?nr&&Kt[0]==nr[0]:!nr)?NaN:Kt&&Kt[0]==0||!nr?qt*0:qt/0);for(nt=new Ve(qt),It=nt.c=[],ae=ce.e-Re.e,qt=ke+ae+1,g||(g=o,ae=w(ce.e/s)-w(Re.e/s),qt=qt/s|0),l=0;nr[l]==(Kt[l]||0);l++);if(nr[l]>(Kt[l]||0)&&ae--,qt<0)It.push(1),X=!0;else{for(Hr=Kt.length,Tr=nr.length,l=0,qt+=2,oe=m(g/(nr[0]+1)),oe>1&&(nr=p(nr,oe,g),Kt=p(Kt,oe,g),Tr=nr.length,Hr=Kt.length),Rr=Tr,wt=Kt.slice(0,Tr),ir=wt.length;ir<Tr;wt[ir++]=0);$t=nr.slice(),$t=[0].concat($t),Vr=nr[0],nr[1]>=g/2&&Vr++;do{if(oe=0,ee=V(nr,wt,Tr,ir),ee<0){if(_r=wt[0],Tr!=ir&&(_r=_r*g+(wt[1]||0)),oe=m(_r/Vr),oe>1)for(oe>=g&&(oe=g-1),_e=p(nr,oe,g),He=_e.length,ir=wt.length;V(_e,wt,He,ir)==1;)oe--,R(_e,Tr<He?$t:nr,He,g),He=_e.length,ee=1;else oe==0&&(ee=oe=1),_e=nr.slice(),He=_e.length;if(He<ir&&(_e=[0].concat(_e)),R(wt,_e,ir,g),ir=wt.length,ee==-1)for(;V(nr,wt,Tr,ir)<1;)oe++,R(wt,Tr<ir?$t:nr,ir,g),ir=wt.length}else ee===0&&(oe++,wt=[0]);It[l++]=oe,wt[0]?wt[ir++]=Kt[Rr]||0:(wt=[Kt[Rr]],ir=1)}while((Rr++<Hr||wt[0]!=null)&&qt--);X=wt[0]!=null,It[0]||It.splice(0,1)}if(g==o){for(l=1,qt=It[0];qt>=10;qt/=10,l++);$e(nt,ke+(nt.e=l+ae*s-1)+1,qe,X)}else nt.e=ae,nt.r=+X;return nt}}();function Ge(p,V,R,ce){var Re,ke,qe,g,ee;if(R==null?R=ne:S(R,0,8),!p.c)return p.toString();if(Re=p.c[0],qe=p.e,V==null)ee=I(p.c),ee=ce==1||ce==2&&(qe<=ye||qe>=fe)?K(ee,qe):J(ee,qe,"0");else if(p=$e(new Ve(p),V,R),ke=p.e,ee=I(p.c),g=ee.length,ce==1||ce==2&&(V<=ke||ke<=ye)){for(;g<V;ee+="0",g++);ee=K(ee,ke)}else if(V-=qe,ee=J(ee,ke,"0"),ke+1>g){if(--V>0)for(ee+=".";V--;ee+="0");}else if(V+=ke-g,V>0)for(ke+1==g&&(ee+=".");V--;ee+="0");return p.s<0&&Re?"-"+ee:ee}function Le(p,V){for(var R,ce,Re=1,ke=new Ve(p[0]);Re<p.length;Re++)ce=new Ve(p[Re]),(!ce.s||(R=_(ke,ce))===V||R===0&&ke.s===V)&&(ke=ce);return ke}function Be(p,V,R){for(var ce=1,Re=V.length;!V[--Re];V.pop());for(Re=V[0];Re>=10;Re/=10,ce++);return(R=ce+R*s-1)>Ae?p.c=p.e=null:R<Te?p.c=[p.e=0]:(p.e=R,p.c=V),p}Z=function(){var p=/^(-?)0([xbo])(?=\w[\w.]*$)/i,V=/^([^.]+)\.$/,R=/^\.([^.]+)$/,ce=/^-?(Infinity|NaN)$/,Re=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(ke,qe,g,ee){var ae,l=g?qe:qe.replace(Re,"");if(ce.test(l))ke.s=isNaN(l)?null:l<0?-1:1;else{if(!g&&(l=l.replace(p,function(X,oe,_e){return ae=(_e=_e.toLowerCase())=="x"?16:_e=="b"?2:8,!ee||ee==ae?oe:X}),ee&&(ae=ee,l=l.replace(V,"$1").replace(R,"0.$1")),qe!=l))return new Ve(l,ae);if(Ve.DEBUG)throw Error(c+"Not a"+(ee?" base "+ee:"")+" number: "+qe);ke.s=null}ke.c=ke.e=null}}();function $e(p,V,R,ce){var Re,ke,qe,g,ee,ae,l,X=p.c,oe=v;if(X){e:{for(Re=1,g=X[0];g>=10;g/=10,Re++);if(ke=V-Re,ke<0)ke+=s,qe=V,ee=X[ae=0],l=m(ee/oe[Re-qe-1]%10);else if(ae=d((ke+1)/s),ae>=X.length)if(ce){for(;X.length<=ae;X.push(0));ee=l=0,Re=1,ke%=s,qe=ke-s+1}else break e;else{for(ee=g=X[ae],Re=1;g>=10;g/=10,Re++);ke%=s,qe=ke-s+Re,l=qe<0?0:m(ee/oe[Re-qe-1]%10)}if(ce=ce||V<0||X[ae+1]!=null||(qe<0?ee:ee%oe[Re-qe-1]),ce=R<4?(l||ce)&&(R==0||R==(p.s<0?3:2)):l>5||l==5&&(R==4||ce||R==6&&(ke>0?qe>0?ee/oe[Re-qe]:0:X[ae-1])%10&1||R==(p.s<0?8:7)),V<1||!X[0])return X.length=0,ce?(V-=p.e+1,X[0]=oe[(s-V%s)%s],p.e=-V||0):X[0]=p.e=0,p;if(ke==0?(X.length=ae,g=1,ae--):(X.length=ae+1,g=oe[s-ke],X[ae]=qe>0?m(ee/oe[Re-qe]%oe[qe])*g:0),ce)for(;;)if(ae==0){for(ke=1,qe=X[0];qe>=10;qe/=10,ke++);for(qe=X[0]+=g,g=1;qe>=10;qe/=10,g++);ke!=g&&(p.e++,X[0]==o&&(X[0]=1));break}else{if(X[ae]+=g,X[ae]!=o)break;X[ae--]=0,g=1}for(ke=X.length;X[--ke]===0;X.pop());}p.e>Ae?p.c=p.e=null:p.e<Te&&(p.c=[p.e=0])}return p}function he(p){var V,R=p.e;return R===null?p.toString():(V=I(p.c),V=R<=ye||R>=fe?K(V,R):J(V,R,"0"),p.s<0?"-"+V:V)}return ie.absoluteValue=ie.abs=function(){var p=new Ve(this);return p.s<0&&(p.s=1),p},ie.comparedTo=function(p,V){return _(this,new Ve(p,V))},ie.decimalPlaces=ie.dp=function(p,V){var R,ce,Re,ke=this;if(p!=null)return S(p,0,y),V==null?V=ne:S(V,0,8),$e(new Ve(ke),p+ke.e+1,V);if(!(R=ke.c))return null;if(ce=((Re=R.length-1)-w(this.e/s))*s,Re=R[Re])for(;Re%10==0;Re/=10,ce--);return ce<0&&(ce=0),ce},ie.dividedBy=ie.div=function(p,V){return U(this,new Ve(p,V),le,ne)},ie.dividedToIntegerBy=ie.idiv=function(p,V){return U(this,new Ve(p,V),0,1)},ie.exponentiatedBy=ie.pow=function(p,V){var R,ce,Re,ke,qe,g,ee,ae,l,X=this;if(p=new Ve(p),p.c&&!p.isInteger())throw Error(c+"Exponent not an integer: "+he(p));if(V!=null&&(V=new Ve(V)),g=p.e>14,!X.c||!X.c[0]||X.c[0]==1&&!X.e&&X.c.length==1||!p.c||!p.c[0])return l=new Ve(Math.pow(+he(X),g?p.s*(2-j(p)):+he(p))),V?l.mod(V):l;if(ee=p.s<0,V){if(V.c?!V.c[0]:!V.s)return new Ve(NaN);ce=!ee&&X.isInteger()&&V.isInteger(),ce&&(X=X.mod(V))}else{if(p.e>9&&(X.e>0||X.e<-1||(X.e==0?X.c[0]>1||g&&X.c[1]>=24e7:X.c[0]<8e13||g&&X.c[0]<=9999975e7)))return ke=X.s<0&&j(p)?-0:0,X.e>-1&&(ke=1/ke),new Ve(ee?1/ke:ke);we&&(ke=d(we/s+2))}for(g?(R=new Ve(.5),ee&&(p.s=1),ae=j(p)):(Re=Math.abs(+he(p)),ae=Re%2),l=new Ve(ue);;){if(ae){if(l=l.times(X),!l.c)break;ke?l.c.length>ke&&(l.c.length=ke):ce&&(l=l.mod(V))}if(Re){if(Re=m(Re/2),Re===0)break;ae=Re%2}else if(p=p.times(R),$e(p,p.e+1,1),p.e>14)ae=j(p);else{if(Re=+he(p),Re===0)break;ae=Re%2}X=X.times(X),ke?X.c&&X.c.length>ke&&(X.c.length=ke):ce&&(X=X.mod(V))}return ce?l:(ee&&(l=ue.div(l)),V?l.mod(V):ke?$e(l,we,ne,qe):l)},ie.integerValue=function(p){var V=new Ve(this);return p==null?p=ne:S(p,0,8),$e(V,V.e+1,p)},ie.isEqualTo=ie.eq=function(p,V){return _(this,new Ve(p,V))===0},ie.isFinite=function(){return!!this.c},ie.isGreaterThan=ie.gt=function(p,V){return _(this,new Ve(p,V))>0},ie.isGreaterThanOrEqualTo=ie.gte=function(p,V){return(V=_(this,new Ve(p,V)))===1||V===0},ie.isInteger=function(){return!!this.c&&w(this.e/s)>this.c.length-2},ie.isLessThan=ie.lt=function(p,V){return _(this,new Ve(p,V))<0},ie.isLessThanOrEqualTo=ie.lte=function(p,V){return(V=_(this,new Ve(p,V)))===-1||V===0},ie.isNaN=function(){return!this.s},ie.isNegative=function(){return this.s<0},ie.isPositive=function(){return this.s>0},ie.isZero=function(){return!!this.c&&this.c[0]==0},ie.minus=function(p,V){var R,ce,Re,ke,qe=this,g=qe.s;if(p=new Ve(p,V),V=p.s,!g||!V)return new Ve(NaN);if(g!=V)return p.s=-V,qe.plus(p);var ee=qe.e/s,ae=p.e/s,l=qe.c,X=p.c;if(!ee||!ae){if(!l||!X)return l?(p.s=-V,p):new Ve(X?qe:NaN);if(!l[0]||!X[0])return X[0]?(p.s=-V,p):new Ve(l[0]?qe:ne==3?-0:0)}if(ee=w(ee),ae=w(ae),l=l.slice(),g=ee-ae){for((ke=g<0)?(g=-g,Re=l):(ae=ee,Re=X),Re.reverse(),V=g;V--;Re.push(0));Re.reverse()}else for(ce=(ke=(g=l.length)<(V=X.length))?g:V,g=V=0;V<ce;V++)if(l[V]!=X[V]){ke=l[V]<X[V];break}if(ke&&(Re=l,l=X,X=Re,p.s=-p.s),V=(ce=X.length)-(R=l.length),V>0)for(;V--;l[R++]=0);for(V=o-1;ce>g;){if(l[--ce]<X[ce]){for(R=ce;R&&!l[--R];l[R]=V);--l[R],l[ce]+=o}l[ce]-=X[ce]}for(;l[0]==0;l.splice(0,1),--ae);return l[0]?Be(p,l,ae):(p.s=ne==3?-1:1,p.c=[p.e=0],p)},ie.modulo=ie.mod=function(p,V){var R,ce,Re=this;return p=new Ve(p,V),!Re.c||!p.s||p.c&&!p.c[0]?new Ve(NaN):!p.c||Re.c&&!Re.c[0]?new Ve(Re):(be==9?(ce=p.s,p.s=1,R=U(Re,p,0,3),p.s=ce,R.s*=ce):R=U(Re,p,0,be),p=Re.minus(R.times(p)),!p.c[0]&&be==1&&(p.s=Re.s),p)},ie.multipliedBy=ie.times=function(p,V){var R,ce,Re,ke,qe,g,ee,ae,l,X,oe,_e,He,nt,It,wt=this,ir=wt.c,_r=(p=new Ve(p,V)).c;if(!ir||!_r||!ir[0]||!_r[0])return!wt.s||!p.s||ir&&!ir[0]&&!_r||_r&&!_r[0]&&!ir?p.c=p.e=p.s=null:(p.s*=wt.s,!ir||!_r?p.c=p.e=null:(p.c=[0],p.e=0)),p;for(ce=w(wt.e/s)+w(p.e/s),p.s*=wt.s,ee=ir.length,X=_r.length,ee<X&&(He=ir,ir=_r,_r=He,Re=ee,ee=X,X=Re),Re=ee+X,He=[];Re--;He.push(0));for(nt=o,It=E,Re=X;--Re>=0;){for(R=0,oe=_r[Re]%It,_e=_r[Re]/It|0,qe=ee,ke=Re+qe;ke>Re;)ae=ir[--qe]%It,l=ir[qe]/It|0,g=_e*ae+l*oe,ae=oe*ae+g%It*It+He[ke]+R,R=(ae/nt|0)+(g/It|0)+_e*l,He[ke--]=ae%nt;He[ke]=R}return R?++ce:He.splice(0,1),Be(p,He,ce)},ie.negated=function(){var p=new Ve(this);return p.s=-p.s||null,p},ie.plus=function(p,V){var R,ce=this,Re=ce.s;if(p=new Ve(p,V),V=p.s,!Re||!V)return new Ve(NaN);if(Re!=V)return p.s=-V,ce.minus(p);var ke=ce.e/s,qe=p.e/s,g=ce.c,ee=p.c;if(!ke||!qe){if(!g||!ee)return new Ve(Re/0);if(!g[0]||!ee[0])return ee[0]?p:new Ve(g[0]?ce:Re*0)}if(ke=w(ke),qe=w(qe),g=g.slice(),Re=ke-qe){for(Re>0?(qe=ke,R=ee):(Re=-Re,R=g),R.reverse();Re--;R.push(0));R.reverse()}for(Re=g.length,V=ee.length,Re-V<0&&(R=ee,ee=g,g=R,V=Re),Re=0;V;)Re=(g[--V]=g[V]+ee[V]+Re)/o|0,g[V]=o===g[V]?0:g[V]%o;return Re&&(g=[Re].concat(g),++qe),Be(p,g,qe)},ie.precision=ie.sd=function(p,V){var R,ce,Re,ke=this;if(p!=null&&p!==!!p)return S(p,1,y),V==null?V=ne:S(V,0,8),$e(new Ve(ke),p,V);if(!(R=ke.c))return null;if(Re=R.length-1,ce=Re*s+1,Re=R[Re]){for(;Re%10==0;Re/=10,ce--);for(Re=R[0];Re>=10;Re/=10,ce++);}return p&&ke.e+1>ce&&(ce=ke.e+1),ce},ie.shiftedBy=function(p){return S(p,-h,h),this.times("1e"+p)},ie.squareRoot=ie.sqrt=function(){var p,V,R,ce,Re,ke=this,qe=ke.c,g=ke.s,ee=ke.e,ae=le+4,l=new Ve("0.5");if(g!==1||!qe||!qe[0])return new Ve(!g||g<0&&(!qe||qe[0])?NaN:qe?ke:1/0);if(g=Math.sqrt(+he(ke)),g==0||g==1/0?(V=I(qe),(V.length+ee)%2==0&&(V+="0"),g=Math.sqrt(+V),ee=w((ee+1)/2)-(ee<0||ee%2),g==1/0?V="5e"+ee:(V=g.toExponential(),V=V.slice(0,V.indexOf("e")+1)+ee),R=new Ve(V)):R=new Ve(g+""),R.c[0]){for(ee=R.e,g=ee+ae,g<3&&(g=0);;)if(Re=R,R=l.times(Re.plus(U(ke,Re,ae,1))),I(Re.c).slice(0,g)===(V=I(R.c)).slice(0,g))if(R.e<ee&&--g,V=V.slice(g-3,g+1),V=="9999"||!ce&&V=="4999"){if(!ce&&($e(Re,Re.e+le+2,0),Re.times(Re).eq(ke))){R=Re;break}ae+=4,g+=4,ce=1}else{(!+V||!+V.slice(1)&&V.charAt(0)=="5")&&($e(R,R.e+le+2,1),p=!R.times(R).eq(ke));break}}return $e(R,R.e+le+1,ne,p)},ie.toExponential=function(p,V){return p!=null&&(S(p,0,y),p++),Ge(this,p,V,1)},ie.toFixed=function(p,V){return p!=null&&(S(p,0,y),p=p+this.e+1),Ge(this,p,V)},ie.toFormat=function(p,V,R){var ce,Re=this;if(R==null)p!=null&&V&&typeof V=="object"?(R=V,V=null):p&&typeof p=="object"?(R=p,p=V=null):R=Ce;else if(typeof R!="object")throw Error(c+"Argument not an object: "+R);if(ce=Re.toFixed(p,V),Re.c){var ke,qe=ce.split("."),g=+R.groupSize,ee=+R.secondaryGroupSize,ae=R.groupSeparator||"",l=qe[0],X=qe[1],oe=Re.s<0,_e=oe?l.slice(1):l,He=_e.length;if(ee&&(ke=g,g=ee,ee=ke,He-=ke),g>0&&He>0){for(ke=He%g||g,l=_e.substr(0,ke);ke<He;ke+=g)l+=ae+_e.substr(ke,g);ee>0&&(l+=ae+_e.slice(ke)),oe&&(l="-"+l)}ce=X?l+(R.decimalSeparator||"")+((ee=+R.fractionGroupSize)?X.replace(new RegExp("\\d{"+ee+"}\\B","g"),"$&"+(R.fractionGroupSeparator||"")):X):l}return(R.prefix||"")+ce+(R.suffix||"")},ie.toFraction=function(p){var V,R,ce,Re,ke,qe,g,ee,ae,l,X,oe,_e=this,He=_e.c;if(p!=null&&(g=new Ve(p),!g.isInteger()&&(g.c||g.s!==1)||g.lt(ue)))throw Error(c+"Argument "+(g.isInteger()?"out of range: ":"not an integer: ")+he(g));if(!He)return new Ve(_e);for(V=new Ve(ue),ae=R=new Ve(ue),ce=ee=new Ve(ue),oe=I(He),ke=V.e=oe.length-_e.e-1,V.c[0]=v[(qe=ke%s)<0?s+qe:qe],p=!p||g.comparedTo(V)>0?ke>0?V:ae:g,qe=Ae,Ae=1/0,g=new Ve(oe),ee.c[0]=0;l=U(g,V,0,1),Re=R.plus(l.times(ce)),Re.comparedTo(p)!=1;)R=ce,ce=Re,ae=ee.plus(l.times(Re=ae)),ee=Re,V=g.minus(l.times(Re=V)),g=Re;return Re=U(p.minus(R),ce,0,1),ee=ee.plus(Re.times(ae)),R=R.plus(Re.times(ce)),ee.s=ae.s=_e.s,ke=ke*2,X=U(ae,ce,ke,ne).minus(_e).abs().comparedTo(U(ee,R,ke,ne).minus(_e).abs())<1?[ae,ce]:[ee,R],Ae=qe,X},ie.toNumber=function(){return+he(this)},ie.toPrecision=function(p,V){return p!=null&&S(p,1,y),Ge(this,p,V,2)},ie.toString=function(p){var V,R=this,ce=R.s,Re=R.e;return Re===null?ce?(V="Infinity",ce<0&&(V="-"+V)):V="NaN":(p==null?V=Re<=ye||Re>=fe?K(I(R.c),Re):J(I(R.c),Re,"0"):p===10&&Fe?(R=$e(new Ve(R),le+Re+1,ne),V=J(I(R.c),R.e,"0")):(S(p,2,je.length,"Base"),V=P(J(I(R.c),Re,"0"),10,p,ce,!0)),ce<0&&R.c[0]&&(V="-"+V)),V},ie.valueOf=ie.toJSON=function(){return he(this)},ie._isBigNumber=!0,H!=null&&Ve.set(H),Ve}function w(H){var U=H|0;return H>0||H===U?U:U-1}function I(H){for(var U,P,Z=1,ie=H.length,ue=H[0]+"";Z<ie;){for(U=H[Z++]+"",P=s-U.length;P--;U="0"+U);ue+=U}for(ie=ue.length;ue.charCodeAt(--ie)===48;);return ue.slice(0,ie+1||1)}function _(H,U){var P,Z,ie=H.c,ue=U.c,le=H.s,ne=U.s,ye=H.e,fe=U.e;if(!le||!ne)return null;if(P=ie&&!ie[0],Z=ue&&!ue[0],P||Z)return P?Z?0:-ne:le;if(le!=ne)return le;if(P=le<0,Z=ye==fe,!ie||!ue)return Z?0:!ie^P?1:-1;if(!Z)return ye>fe^P?1:-1;for(ne=(ye=ie.length)<(fe=ue.length)?ye:fe,le=0;le<ne;le++)if(ie[le]!=ue[le])return ie[le]>ue[le]^P?1:-1;return ye==fe?0:ye>fe^P?1:-1}function S(H,U,P,Z){if(H<U||H>P||H!==m(H))throw Error(c+(Z||"Argument")+(typeof H=="number"?H<U||H>P?" out of range: ":" not an integer: ":" not a primitive number: ")+String(H))}function j(H){var U=H.c.length-1;return w(H.e/s)==U&&H.c[U]%2!=0}function K(H,U){return(H.length>1?H.charAt(0)+"."+H.slice(1):H)+(U<0?"e":"e+")+U}function J(H,U,P){var Z,ie;if(U<0){for(ie=P+".";++U;ie+=P);H=ie+H}else if(Z=H.length,++U>Z){for(ie=P,U-=Z;--U;ie+=P);H+=ie}else U<Z&&(H=H.slice(0,U)+"."+H.slice(U));return H}r=A(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(bignumber)}(bignumber$1)),bignumber$1.exports}var hasRequiredStringify$2;function requireStringify$2(){return hasRequiredStringify$2||(hasRequiredStringify$2=1,function(t){var e=requireBignumber(),r=t.exports;(function(){var u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,m,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function o(h){return u.lastIndex=0,u.test(h)?'"'+h.replace(u,function(v){var E=c[v];return typeof E=="string"?E:"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function s(h,v){var E,y,A,w,I=d,_,S=v[h],j=S!=null&&(S instanceof e||e.isBigNumber(S));switch(S&&typeof S=="object"&&typeof S.toJSON=="function"&&(S=S.toJSON(h)),typeof a=="function"&&(S=a.call(v,h,S)),typeof S){case"string":return j?S:o(S);case"number":return isFinite(S)?String(S):"null";case"boolean":case"null":case"bigint":return String(S);case"object":if(!S)return"null";if(d+=m,_=[],Object.prototype.toString.apply(S)==="[object Array]"){for(w=S.length,E=0;E<w;E+=1)_[E]=s(E,S)||"null";return A=_.length===0?"[]":d?`[
`+d+_.join(`,
`+d)+`
`+I+"]":"["+_.join(",")+"]",d=I,A}if(a&&typeof a=="object")for(w=a.length,E=0;E<w;E+=1)typeof a[E]=="string"&&(y=a[E],A=s(y,S),A&&_.push(o(y)+(d?": ":":")+A));else Object.keys(S).forEach(function(K){var J=s(K,S);J&&_.push(o(K)+(d?": ":":")+J)});return A=_.length===0?"{}":d?`{
`+d+_.join(`,
`+d)+`
`+I+"}":"{"+_.join(",")+"}",d=I,A}}typeof r.stringify!="function"&&(r.stringify=function(h,v,E){var y;if(d="",m="",typeof E=="number")for(y=0;y<E;y+=1)m+=" ";else typeof E=="string"&&(m=E);if(a=v,v&&typeof v!="function"&&(typeof v!="object"||typeof v.length!="number"))throw new Error("JSON.stringify");return s("",{"":h})})})()}(stringify$3)),stringify$3.exports}var parse$4,hasRequiredParse$4;function requireParse$4(){if(hasRequiredParse$4)return parse$4;hasRequiredParse$4=1;var t=null;const e=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,r=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;var u=function(d){var m={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(d!=null){if(d.strict===!0&&(m.strict=!0),d.storeAsString===!0&&(m.storeAsString=!0),m.alwaysParseAsBig=d.alwaysParseAsBig===!0?d.alwaysParseAsBig:!1,m.useNativeBigInt=d.useNativeBigInt===!0?d.useNativeBigInt:!1,typeof d.constructorAction<"u")if(d.constructorAction==="error"||d.constructorAction==="ignore"||d.constructorAction==="preserve")m.constructorAction=d.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${d.constructorAction}`);if(typeof d.protoAction<"u")if(d.protoAction==="error"||d.protoAction==="ignore"||d.protoAction==="preserve")m.protoAction=d.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${d.protoAction}`)}var c,a,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},s,h=function(j){throw{name:"SyntaxError",message:j,at:c,text:s}},v=function(j){return j&&j!==a&&h("Expected '"+j+"' instead of '"+a+"'"),a=s.charAt(c),c+=1,a},E=function(){var j,K="";for(a==="-"&&(K="-",v("-"));a>="0"&&a<="9";)K+=a,v();if(a===".")for(K+=".";v()&&a>="0"&&a<="9";)K+=a;if(a==="e"||a==="E")for(K+=a,v(),(a==="-"||a==="+")&&(K+=a,v());a>="0"&&a<="9";)K+=a,v();if(j=+K,!isFinite(j))h("Bad number");else return t==null&&(t=requireBignumber()),K.length>15?m.storeAsString?K:m.useNativeBigInt?BigInt(K):new t(K):m.alwaysParseAsBig?m.useNativeBigInt?BigInt(j):new t(j):j},y=function(){var j,K,J="",H;if(a==='"')for(var U=c;v();){if(a==='"')return c-1>U&&(J+=s.substring(U,c-1)),v(),J;if(a==="\\"){if(c-1>U&&(J+=s.substring(U,c-1)),v(),a==="u"){for(H=0,K=0;K<4&&(j=parseInt(v(),16),!!isFinite(j));K+=1)H=H*16+j;J+=String.fromCharCode(H)}else if(typeof o[a]=="string")J+=o[a];else break;U=c}}h("Bad string")},A=function(){for(;a&&a<=" ";)v()},w=function(){switch(a){case"t":return v("t"),v("r"),v("u"),v("e"),!0;case"f":return v("f"),v("a"),v("l"),v("s"),v("e"),!1;case"n":return v("n"),v("u"),v("l"),v("l"),null}h("Unexpected '"+a+"'")},I,_=function(){var j=[];if(a==="["){if(v("["),A(),a==="]")return v("]"),j;for(;a;){if(j.push(I()),A(),a==="]")return v("]"),j;v(","),A()}}h("Bad array")},S=function(){var j,K=Object.create(null);if(a==="{"){if(v("{"),A(),a==="}")return v("}"),K;for(;a;){if(j=y(),A(),v(":"),m.strict===!0&&Object.hasOwnProperty.call(K,j)&&h('Duplicate key "'+j+'"'),e.test(j)===!0?m.protoAction==="error"?h("Object contains forbidden prototype property"):m.protoAction==="ignore"?I():K[j]=I():r.test(j)===!0?m.constructorAction==="error"?h("Object contains forbidden constructor property"):m.constructorAction==="ignore"?I():K[j]=I():K[j]=I(),A(),a==="}")return v("}"),K;v(","),A()}}h("Bad object")};return I=function(){switch(A(),a){case"{":return S();case"[":return _();case'"':return y();case"-":return E();default:return a>="0"&&a<="9"?E():w()}},function(j,K){var J;return s=j+"",c=0,a=" ",J=I(),A(),a&&h("Syntax error"),typeof K=="function"?function H(U,P){var Z,ie=U[P];return ie&&typeof ie=="object"&&Object.keys(ie).forEach(function(ue){Z=H(ie,ue),Z!==void 0?ie[ue]=Z:delete ie[ue]}),K.call(U,P,ie)}({"":J},""):J}};return parse$4=u,parse$4}var hasRequiredJsonBigint;function requireJsonBigint(){if(hasRequiredJsonBigint)return jsonBigint.exports;hasRequiredJsonBigint=1;var t=requireStringify$2().stringify,e=requireParse$4();return jsonBigint.exports=function(r){return{parse:e(r),stringify:t}},jsonBigint.exports.parse=e(),jsonBigint.exports.stringify=t,jsonBigint.exports}var gcpResidency={},hasRequiredGcpResidency;function requireGcpResidency(){return hasRequiredGcpResidency||(hasRequiredGcpResidency=1,function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0}),t.GCE_LINUX_BIOS_PATHS=void 0,t.isGoogleCloudServerless=m,t.isGoogleComputeEngineLinux=c,t.isGoogleComputeEngineMACAddress=a,t.isGoogleComputeEngine=o,t.detectGCPResidency=s;const r=require$$1$3,u=require$$1$3;t.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};const d=/^42:01/;function m(){return!!(e.CLOUD_RUN_JOB||e.FUNCTION_NAME||e.K_SERVICE)}function c(){if((0,u.platform)()!=="linux")return!1;try{(0,r.statSync)(t.GCE_LINUX_BIOS_PATHS.BIOS_DATE);const h=(0,r.readFileSync)(t.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(h)}catch{return!1}}function a(){const h=(0,u.networkInterfaces)();for(const v of Object.values(h))if(v){for(const{mac:E}of v)if(d.test(E))return!0}return!1}function o(){return c()||a()}function s(){return m()||o()}}(gcpResidency)),gcpResidency}var src$c={},loggingUtils={},colours={},hasRequiredColours;function requireColours(){if(hasRequiredColours)return colours;hasRequiredColours=1,Object.defineProperty(colours,"__esModule",{value:!0}),colours.Colours=void 0;class t{static isEnabled(r){return r.isTTY&&(typeof r.getColorDepth=="function"?r.getColorDepth()>2:!0)}static refresh(){t.enabled=t.isEnabled(process.stderr),this.enabled?(t.reset="\x1B[0m",t.bright="\x1B[1m",t.dim="\x1B[2m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.white="\x1B[37m",t.grey="\x1B[90m"):(t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="")}}return colours.Colours=t,t.enabled=!1,t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="",t.refresh(),colours}var hasRequiredLoggingUtils;function requireLoggingUtils(){return hasRequiredLoggingUtils||(hasRequiredLoggingUtils=1,function(t){var e=loggingUtils&&loggingUtils.__createBinding||(Object.create?function(J,H,U,P){P===void 0&&(P=U);var Z=Object.getOwnPropertyDescriptor(H,U);(!Z||("get"in Z?!H.__esModule:Z.writable||Z.configurable))&&(Z={enumerable:!0,get:function(){return H[U]}}),Object.defineProperty(J,P,Z)}:function(J,H,U,P){P===void 0&&(P=U),J[P]=H[U]}),r=loggingUtils&&loggingUtils.__setModuleDefault||(Object.create?function(J,H){Object.defineProperty(J,"default",{enumerable:!0,value:H})}:function(J,H){J.default=H}),u=loggingUtils&&loggingUtils.__importStar||function(J){if(J&&J.__esModule)return J;var H={};if(J!=null)for(var U in J)U!=="default"&&Object.prototype.hasOwnProperty.call(J,U)&&e(H,J,U);return r(H,J),H};Object.defineProperty(t,"__esModule",{value:!0}),t.env=t.DebugLogBackendBase=t.placeholder=t.AdhocDebugLogger=t.LogSeverity=void 0,t.getNodeBackend=E,t.getDebugBackend=A,t.getStructuredBackend=I,t.setBackend=j,t.log=K;const d=require$$1$3,m=u(require$$1$3),c=u(require$$1$3),a=requireColours();var o;(function(J){J.DEFAULT="DEFAULT",J.DEBUG="DEBUG",J.INFO="INFO",J.WARNING="WARNING",J.ERROR="ERROR"})(o||(t.LogSeverity=o={}));class s extends d.EventEmitter{constructor(H,U){super(),this.namespace=H,this.upstream=U,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(P,Z)=>this.on(P,Z)}),this.func.debug=(...P)=>this.invokeSeverity(o.DEBUG,...P),this.func.info=(...P)=>this.invokeSeverity(o.INFO,...P),this.func.warn=(...P)=>this.invokeSeverity(o.WARNING,...P),this.func.error=(...P)=>this.invokeSeverity(o.ERROR,...P),this.func.sublog=P=>K(P,this.func)}invoke(H,...U){this.upstream&&this.upstream(H,...U),this.emit("log",H,U)}invokeSeverity(H,...U){this.invoke({severity:H},...U)}}t.AdhocDebugLogger=s,t.placeholder=new s("",()=>{}).func;class h{constructor(){var H;this.cached=new Map,this.filters=[],this.filtersSet=!1;let U=(H=m.env[t.env.nodeEnables])!==null&&H!==void 0?H:"*";U==="all"&&(U="*"),this.filters=U.split(",")}log(H,U,...P){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let Z=this.cached.get(H);Z||(Z=this.makeLogger(H),this.cached.set(H,Z)),Z(U,...P)}catch(Z){console.error(Z)}}}t.DebugLogBackendBase=h;class v extends h{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(H){return this.enabledRegexp.test(H)}makeLogger(H){return this.enabledRegexp.test(H)?(U,...P)=>{var Z;const ie=`${a.Colours.green}${H}${a.Colours.reset}`,ue=`${a.Colours.yellow}${m.pid}${a.Colours.reset}`;let le;switch(U.severity){case o.ERROR:le=`${a.Colours.red}${U.severity}${a.Colours.reset}`;break;case o.INFO:le=`${a.Colours.magenta}${U.severity}${a.Colours.reset}`;break;case o.WARNING:le=`${a.Colours.yellow}${U.severity}${a.Colours.reset}`;break;default:le=(Z=U.severity)!==null&&Z!==void 0?Z:o.DEFAULT;break}const ne=c.formatWithOptions({colors:a.Colours.enabled},...P),ye=Object.assign({},U);delete ye.severity;const fe=Object.getOwnPropertyNames(ye).length?JSON.stringify(ye):"",Te=fe?`${a.Colours.grey}${fe}${a.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",ue,ie,le,ne,fe?` ${Te}`:"")}:()=>{}}setFilters(){const U=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${U}$`,"i")}}function E(){return new v}class y extends h{constructor(H){super(),this.debugPkg=H}makeLogger(H){const U=this.debugPkg(H);return(P,...Z)=>{U(Z[0],...Z.slice(1))}}setFilters(){var H;const U=(H=m.env.NODE_DEBUG)!==null&&H!==void 0?H:"";m.env.NODE_DEBUG=`${U}${U?",":""}${this.filters.join(",")}`}}function A(J){return new y(J)}class w extends h{constructor(H){var U;super(),this.upstream=(U=H)!==null&&U!==void 0?U:new v}makeLogger(H){const U=this.upstream.makeLogger(H);return(P,...Z)=>{var ie;const ue=(ie=P.severity)!==null&&ie!==void 0?ie:o.INFO,le=Object.assign({severity:ue,message:c.format(...Z)},P),ne=JSON.stringify(le);U(P,ne)}}setFilters(){this.upstream.setFilters()}}function I(J){return new w(J)}t.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};const _=new Map;let S;function j(J){S=J,_.clear()}function K(J,H){if(!m.env[t.env.nodeEnables]||!J)return t.placeholder;H&&(J=`${H.instance.namespace}:${J}`);const P=_.get(J);if(P)return P.func;if(S===null)return t.placeholder;S===void 0&&(S=E());const Z=(()=>{let ie;return new s(J,(le,...ne)=>{if(ie!==S){if(S===null)return;S===void 0&&(S=E()),ie=S}S?.log(J,le,...ne)})})();return _.set(J,Z),Z.func}}(loggingUtils)),loggingUtils}var hasRequiredSrc$e;function requireSrc$e(){return hasRequiredSrc$e||(hasRequiredSrc$e=1,function(t){var e=src$c&&src$c.__createBinding||(Object.create?function(u,d,m,c){c===void 0&&(c=m);var a=Object.getOwnPropertyDescriptor(d,m);(!a||("get"in a?!d.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return d[m]}}),Object.defineProperty(u,c,a)}:function(u,d,m,c){c===void 0&&(c=m),u[c]=d[m]}),r=src$c&&src$c.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&e(d,u,m)};Object.defineProperty(t,"__esModule",{value:!0}),r(requireLoggingUtils(),t)}(src$c)),src$c}var hasRequiredSrc$d;function requireSrc$d(){return hasRequiredSrc$d||(hasRequiredSrc$d=1,function(t){var e={},r=src$e&&src$e.__createBinding||(Object.create?function(P,Z,ie,ue){ue===void 0&&(ue=ie);var le=Object.getOwnPropertyDescriptor(Z,ie);(!le||("get"in le?!Z.__esModule:le.writable||le.configurable))&&(le={enumerable:!0,get:function(){return Z[ie]}}),Object.defineProperty(P,ue,le)}:function(P,Z,ie,ue){ue===void 0&&(ue=ie),P[ue]=Z[ie]}),u=src$e&&src$e.__exportStar||function(P,Z){for(var ie in P)ie!=="default"&&!Object.prototype.hasOwnProperty.call(Z,ie)&&r(Z,P,ie)};Object.defineProperty(t,"__esModule",{value:!0}),t.gcpResidencyCache=t.METADATA_SERVER_DETECTION=t.HEADERS=t.HEADER_VALUE=t.HEADER_NAME=t.SECONDARY_HOST_ADDRESS=t.HOST_ADDRESS=t.BASE_PATH=void 0,t.instance=y,t.project=A,t.universe=w,t.bulk=I,t.isAvailable=j,t.resetIsAvailableCache=K,t.getGCPResidency=J,t.setGCPResidency=H,t.requestTimeout=U;const d=requireSrc$f(),m=requireJsonBigint(),c=requireGcpResidency(),a=requireSrc$e();t.BASE_PATH="/computeMetadata/v1",t.HOST_ADDRESS="http://169.254.169.254",t.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",t.HEADER_NAME="Metadata-Flavor",t.HEADER_VALUE="Google",t.HEADERS=Object.freeze({[t.HEADER_NAME]:t.HEADER_VALUE});const o=a.log("gcp metadata");t.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function s(P){return P||(P=e.GCE_METADATA_IP||e.GCE_METADATA_HOST||t.HOST_ADDRESS),/^https?:\/\//.test(P)||(P=`http://${P}`),new URL(t.BASE_PATH,P).href}function h(P){Object.keys(P).forEach(Z=>{switch(Z){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${Z}' is not a valid configuration option.`)}})}async function v(P,Z={},ie=3,ue=!1){let le="",ne={},ye={};if(typeof P=="object"){const Se=P;le=Se.metadataKey,ne=Se.params||ne,ye=Se.headers||ye,ie=Se.noResponseRetries||ie,ue=Se.fastFail||ue}else le=P;typeof Z=="string"?le+=`/${Z}`:(h(Z),Z.property&&(le+=`/${Z.property}`),ye=Z.headers||ye,ne=Z.params||ne);const fe=ue?E:d.request,Te={url:`${s()}/${le}`,headers:{...t.HEADERS,...ye},retryConfig:{noResponseRetries:ie},params:ne,responseType:"text",timeout:U()};o.info("instance request %j",Te);const Ae=await fe(Te);if(o.info("instance metadata is %s",Ae.data),Ae.headers[t.HEADER_NAME.toLowerCase()]!==t.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${t.HEADER_NAME} header. Expected '${t.HEADER_VALUE}', got ${Ae.headers[t.HEADER_NAME.toLowerCase()]?`'${Ae.headers[t.HEADER_NAME.toLowerCase()]}'`:"no header"}`);if(typeof Ae.data=="string")try{return m.parse(Ae.data)}catch{}return Ae.data}async function E(P){var Z;const ie={...P,url:(Z=P.url)===null||Z===void 0?void 0:Z.toString().replace(s(),s(t.SECONDARY_HOST_ADDRESS))};let ue=!1;const le=(0,d.request)(P).then(ye=>(ue=!0,ye)).catch(ye=>{if(ue)return ne;throw ue=!0,ye}),ne=(0,d.request)(ie).then(ye=>(ue=!0,ye)).catch(ye=>{if(ue)return le;throw ue=!0,ye});return Promise.race([le,ne])}function y(P){return v("instance",P)}function A(P){return v("project",P)}function w(P){return v("universe",P)}async function I(P){const Z={};return await Promise.all(P.map(ie=>(async()=>{const ue=await v(ie),le=ie.metadataKey;Z[le]=ue})())),Z}function _(){return e.DETECT_GCP_RETRIES?Number(e.DETECT_GCP_RETRIES):0}let S;async function j(){if(e.METADATA_SERVER_DETECTION){const P=e.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(P in t.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${P}\`, but it should be \`${Object.keys(t.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(P){case"assume-present":return!0;case"none":return!1;case"bios-only":return J()}}try{return S===void 0&&(S=v("instance",void 0,_(),!(e.GCE_METADATA_IP||e.GCE_METADATA_HOST))),await S,!0}catch(P){const Z=P;if(e.DEBUG_AUTH&&console.info(Z),Z.type==="request-timeout"||Z.response&&Z.response.status===404)return!1;if(!(Z.response&&Z.response.status===404)&&(!Z.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(Z.code))){let ie="UNKNOWN";Z.code&&(ie=Z.code),process.emitWarning(`received unexpected error = ${Z.message} code = ${ie}`,"MetadataLookupWarning")}return!1}}function K(){S=void 0}t.gcpResidencyCache=null;function J(){return t.gcpResidencyCache===null&&H(),t.gcpResidencyCache}function H(P=null){t.gcpResidencyCache=P!==null?P:(0,c.detectGCPResidency)()}function U(){return J()?0:3e3}u(requireGcpResidency(),t)}(src$e)),src$e}var crypto$4={},crypto$3={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=a,base64Js.toByteArray=s,base64Js.fromByteArray=E;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,m=u.length;d<m;++d)t[d]=u[d],e[u.charCodeAt(d)]=d;e[45]=62,e[95]=63;function c(y){var A=y.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=y.indexOf("=");w===-1&&(w=A);var I=w===A?0:4-w%4;return[w,I]}function a(y){var A=c(y),w=A[0],I=A[1];return(w+I)*3/4-I}function o(y,A,w){return(A+w)*3/4-w}function s(y){var A,w=c(y),I=w[0],_=w[1],S=new r(o(y,I,_)),j=0,K=_>0?I-4:I,J;for(J=0;J<K;J+=4)A=e[y.charCodeAt(J)]<<18|e[y.charCodeAt(J+1)]<<12|e[y.charCodeAt(J+2)]<<6|e[y.charCodeAt(J+3)],S[j++]=A>>16&255,S[j++]=A>>8&255,S[j++]=A&255;return _===2&&(A=e[y.charCodeAt(J)]<<2|e[y.charCodeAt(J+1)]>>4,S[j++]=A&255),_===1&&(A=e[y.charCodeAt(J)]<<10|e[y.charCodeAt(J+1)]<<4|e[y.charCodeAt(J+2)]>>2,S[j++]=A>>8&255,S[j++]=A&255),S}function h(y){return t[y>>18&63]+t[y>>12&63]+t[y>>6&63]+t[y&63]}function v(y,A,w){for(var I,_=[],S=A;S<w;S+=3)I=(y[S]<<16&16711680)+(y[S+1]<<8&65280)+(y[S+2]&255),_.push(h(I));return _.join("")}function E(y){for(var A,w=y.length,I=w%3,_=[],S=16383,j=0,K=w-I;j<K;j+=S)_.push(v(y,j,j+S>K?K:j+S));return I===1?(A=y[w-1],_.push(t[A>>2]+t[A<<4&63]+"==")):I===2&&(A=(y[w-2]<<8)+y[w-1],_.push(t[A>>10]+t[A>>4&63]+t[A<<2&63]+"=")),_.join("")}return base64Js}var hasRequiredCrypto$2;function requireCrypto$2(){if(hasRequiredCrypto$2)return crypto$3;hasRequiredCrypto$2=1,Object.defineProperty(crypto$3,"__esModule",{value:!0}),crypto$3.BrowserCrypto=void 0;const t=requireBase64Js(),e=requireCrypto();class r{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(d){const m=new TextEncoder().encode(d),c=await window.crypto.subtle.digest("SHA-256",m);return t.fromByteArray(new Uint8Array(c))}randomBytesBase64(d){const m=new Uint8Array(d);return window.crypto.getRandomValues(m),t.fromByteArray(m)}static padBase64(d){for(;d.length%4!==0;)d+="=";return d}async verify(d,m,c){const a={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},o=new TextEncoder().encode(m),s=t.toByteArray(r.padBase64(c)),h=await window.crypto.subtle.importKey("jwk",d,a,!0,["verify"]);return await window.crypto.subtle.verify(a,h,s,o)}async sign(d,m){const c={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(m),o=await window.crypto.subtle.importKey("jwk",d,c,!0,["sign"]),s=await window.crypto.subtle.sign(c,o,a);return t.fromByteArray(new Uint8Array(s))}decodeBase64StringUtf8(d){const m=t.toByteArray(r.padBase64(d));return new TextDecoder().decode(m)}encodeBase64StringUtf8(d){const m=new TextEncoder().encode(d);return t.fromByteArray(m)}async sha256DigestHex(d){const m=new TextEncoder().encode(d),c=await window.crypto.subtle.digest("SHA-256",m);return(0,e.fromArrayBufferToHex)(c)}async signWithHmacSha256(d,m){const c=typeof d=="string"?d:String.fromCharCode(...new Uint16Array(d)),a=new TextEncoder,o=await window.crypto.subtle.importKey("raw",a.encode(c),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",o,a.encode(m))}}return crypto$3.BrowserCrypto=r,crypto$3}var crypto$2={},hasRequiredCrypto$1;function requireCrypto$1(){if(hasRequiredCrypto$1)return crypto$2;hasRequiredCrypto$1=1,Object.defineProperty(crypto$2,"__esModule",{value:!0}),crypto$2.NodeCrypto=void 0;const t=require$$1$3;class e{async sha256DigestBase64(m){return t.createHash("sha256").update(m).digest("base64")}randomBytesBase64(m){return t.randomBytes(m).toString("base64")}async verify(m,c,a){const o=t.createVerify("RSA-SHA256");return o.update(c),o.end(),o.verify(m,a,"base64")}async sign(m,c){const a=t.createSign("RSA-SHA256");return a.update(c),a.end(),a.sign(m,"base64")}decodeBase64StringUtf8(m){return Buffer.from(m,"base64").toString("utf-8")}encodeBase64StringUtf8(m){return Buffer.from(m,"utf-8").toString("base64")}async sha256DigestHex(m){return t.createHash("sha256").update(m).digest("hex")}async signWithHmacSha256(m,c){const a=typeof m=="string"?m:u(m);return r(t.createHmac("sha256",a).update(c).digest())}}crypto$2.NodeCrypto=e;function r(d){return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}function u(d){return Buffer.from(d)}return crypto$2}var hasRequiredCrypto;function requireCrypto(){if(hasRequiredCrypto)return crypto$4;hasRequiredCrypto=1,Object.defineProperty(crypto$4,"__esModule",{value:!0}),crypto$4.createCrypto=r,crypto$4.hasBrowserCrypto=u,crypto$4.fromArrayBufferToHex=d;const t=requireCrypto$2(),e=requireCrypto$1();function r(){return u()?new t.BrowserCrypto:new e.NodeCrypto}function u(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}function d(m){return Array.from(new Uint8Array(m)).map(a=>a.toString(16).padStart(2,"0")).join("")}return crypto$4}var transporters={},options$3={},hasRequiredOptions;function requireOptions(){if(hasRequiredOptions)return options$3;hasRequiredOptions=1,Object.defineProperty(options$3,"__esModule",{value:!0}),options$3.validate=t;function t(e){const r=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(const u of r)if(e[u.invalid]){const d=`'${u.invalid}' is not a valid configuration option. Please use '${u.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(d)}}return options$3}const version$a="9.15.1",require$$4$2={version:version$a};var hasRequiredTransporters;function requireTransporters(){if(hasRequiredTransporters)return transporters;hasRequiredTransporters=1,Object.defineProperty(transporters,"__esModule",{value:!0}),transporters.DefaultTransporter=void 0;const t=requireSrc$f(),e=requireOptions(),r=require$$4$2,u="google-api-nodejs-client";class d{constructor(){this.instance=new t.Gaxios}configure(c={}){if(c.headers=c.headers||{},typeof window>"u"){const a=c.headers["User-Agent"];if(a?a.includes(`${u}/`)||(c.headers["User-Agent"]=`${a} ${d.USER_AGENT}`):c.headers["User-Agent"]=d.USER_AGENT,!c.headers["x-goog-api-client"]){const o=process.version.replace(/^v/,"");c.headers["x-goog-api-client"]=`gl-node/${o}`}}return c}request(c){return c=this.configure(c),(0,e.validate)(c),this.instance.request(c).catch(a=>{throw this.processError(a)})}get defaults(){return this.instance.defaults}set defaults(c){this.instance.defaults=c}processError(c){const a=c.response,o=c,s=a?a.data:null;return a&&s&&s.error&&a.status!==200?typeof s.error=="string"?(o.message=s.error,o.status=a.status):Array.isArray(s.error.errors)?(o.message=s.error.errors.map(h=>h.message).join(`
`),o.code=s.error.code,o.errors=s.error.errors):(o.message=s.error.message,o.code=s.error.code):a&&a.status>=400&&(o.message=s,o.status=a.status),o}}return transporters.DefaultTransporter=d,d.USER_AGENT=`${u}/${r.version}`,transporters}var computeclient={},oauth2client={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(t,e){var r=require$$1$3,u=r.Buffer;function d(c,a){for(var o in c)a[o]=c[o]}u.from&&u.alloc&&u.allocUnsafe&&u.allocUnsafeSlow?t.exports=r:(d(r,e),e.Buffer=m);function m(c,a,o){return u(c,a,o)}m.prototype=Object.create(u.prototype),d(u,m),m.from=function(c,a,o){if(typeof c=="number")throw new TypeError("Argument must not be a number");return u(c,a,o)},m.alloc=function(c,a,o){if(typeof c!="number")throw new TypeError("Argument must be a number");var s=u(c);return a!==void 0?typeof o=="string"?s.fill(a,o):s.fill(a):s.fill(0),s},m.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return u(c)},m.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(c)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var paramBytesForAlg_1,hasRequiredParamBytesForAlg;function requireParamBytesForAlg(){if(hasRequiredParamBytesForAlg)return paramBytesForAlg_1;hasRequiredParamBytesForAlg=1;function t(u){var d=(u/8|0)+(u%8===0?0:1);return d}var e={ES256:t(256),ES384:t(384),ES512:t(521)};function r(u){var d=e[u];if(d)return d;throw new Error('Unknown algorithm "'+u+'"')}return paramBytesForAlg_1=r,paramBytesForAlg_1}var ecdsaSigFormatter,hasRequiredEcdsaSigFormatter;function requireEcdsaSigFormatter(){if(hasRequiredEcdsaSigFormatter)return ecdsaSigFormatter;hasRequiredEcdsaSigFormatter=1;var t=requireSafeBuffer().Buffer,e=requireParamBytesForAlg(),r=128,u=0,d=32,m=16,c=2,a=m|d|u<<6,o=c|u<<6;function s(A){return A.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h(A){if(t.isBuffer(A))return A;if(typeof A=="string")return t.from(A,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function v(A,w){A=h(A);var I=e(w),_=I+1,S=A.length,j=0;if(A[j++]!==a)throw new Error('Could not find expected "seq"');var K=A[j++];if(K===(r|1)&&(K=A[j++]),S-j<K)throw new Error('"seq" specified length of "'+K+'", only "'+(S-j)+'" remaining');if(A[j++]!==o)throw new Error('Could not find expected "int" for "r"');var J=A[j++];if(S-j-2<J)throw new Error('"r" specified length of "'+J+'", only "'+(S-j-2)+'" available');if(_<J)throw new Error('"r" specified length of "'+J+'", max of "'+_+'" is acceptable');var H=j;if(j+=J,A[j++]!==o)throw new Error('Could not find expected "int" for "s"');var U=A[j++];if(S-j!==U)throw new Error('"s" specified length of "'+U+'", expected "'+(S-j)+'"');if(_<U)throw new Error('"s" specified length of "'+U+'", max of "'+_+'" is acceptable');var P=j;if(j+=U,j!==S)throw new Error('Expected to consume entire buffer, but "'+(S-j)+'" bytes remain');var Z=I-J,ie=I-U,ue=t.allocUnsafe(Z+J+ie+U);for(j=0;j<Z;++j)ue[j]=0;A.copy(ue,j,H+Math.max(-Z,0),H+J),j=I;for(var le=j;j<le+ie;++j)ue[j]=0;return A.copy(ue,j,P+Math.max(-ie,0),P+U),ue=ue.toString("base64"),ue=s(ue),ue}function E(A,w,I){for(var _=0;w+_<I&&A[w+_]===0;)++_;var S=A[w+_]>=r;return S&&--_,_}function y(A,w){A=h(A);var I=e(w),_=A.length;if(_!==I*2)throw new TypeError('"'+w+'" signatures must be "'+I*2+'" bytes, saw "'+_+'"');var S=E(A,0,I),j=E(A,I,A.length),K=I-S,J=I-j,H=2+K+1+1+J,U=H<r,P=t.allocUnsafe((U?2:3)+H),Z=0;return P[Z++]=a,U?P[Z++]=H:(P[Z++]=r|1,P[Z++]=H&255),P[Z++]=o,P[Z++]=K,S<0?(P[Z++]=0,Z+=A.copy(P,Z,0,I)):Z+=A.copy(P,Z,S,I),P[Z++]=o,P[Z++]=J,j<0?(P[Z++]=0,A.copy(P,Z,I)):A.copy(P,Z,I+j),P}return ecdsaSigFormatter={derToJose:v,joseToDer:y},ecdsaSigFormatter}var authclient={},util$8={},hasRequiredUtil$8;function requireUtil$8(){if(hasRequiredUtil$8)return util$8;hasRequiredUtil$8=1;var t=util$8&&util$8.__classPrivateFieldGet||function(o,s,h,v){if(h==="a"&&!v)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?o!==s||!v:!s.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return h==="m"?v:h==="a"?v.call(o):v?v.value:s.get(o)},e,r,u,d;Object.defineProperty(util$8,"__esModule",{value:!0}),util$8.LRUCache=void 0,util$8.snakeToCamel=m,util$8.originalOrCamelOptions=c;function m(o){return o.replace(/([_][^_])/g,s=>s.slice(1).toUpperCase())}function c(o){function s(h){var v;const E=o||{};return(v=E[h])!==null&&v!==void 0?v:E[m(h)]}return{get:s}}class a{constructor(s){e.add(this),r.set(this,new Map),this.capacity=s.capacity,this.maxAge=s.maxAge}set(s,h){t(this,e,"m",u).call(this,s,h),t(this,e,"m",d).call(this)}get(s){const h=t(this,r,"f").get(s);if(h)return t(this,e,"m",u).call(this,s,h.value),t(this,e,"m",d).call(this),h.value}}return util$8.LRUCache=a,r=new WeakMap,e=new WeakSet,u=function(s,h){t(this,r,"f").delete(s),t(this,r,"f").set(s,{value:h,lastAccessed:Date.now()})},d=function(){const s=this.maxAge?Date.now()-this.maxAge:0;let h=t(this,r,"f").entries().next();for(;!h.done&&(t(this,r,"f").size>this.capacity||h.value[1].lastAccessed<s);)t(this,r,"f").delete(h.value[0]),h=t(this,r,"f").entries().next()},util$8}var hasRequiredAuthclient;function requireAuthclient(){return hasRequiredAuthclient||(hasRequiredAuthclient=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthClient=t.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=t.DEFAULT_UNIVERSE=void 0;const e=require$$1$3,r=requireSrc$f(),u=requireTransporters(),d=requireUtil$8();t.DEFAULT_UNIVERSE="googleapis.com",t.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=5*60*1e3;class m extends e.EventEmitter{constructor(a={}){var o,s,h,v,E;super(),this.credentials={},this.eagerRefreshThresholdMillis=t.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS,this.forceRefreshOnFailure=!1,this.universeDomain=t.DEFAULT_UNIVERSE;const y=(0,d.originalOrCamelOptions)(a);this.apiKey=a.apiKey,this.projectId=(o=y.get("project_id"))!==null&&o!==void 0?o:null,this.quotaProjectId=y.get("quota_project_id"),this.credentials=(s=y.get("credentials"))!==null&&s!==void 0?s:{},this.universeDomain=(h=y.get("universe_domain"))!==null&&h!==void 0?h:t.DEFAULT_UNIVERSE,this.transporter=(v=a.transporter)!==null&&v!==void 0?v:new u.DefaultTransporter,a.transporterOptions&&(this.transporter.defaults=a.transporterOptions),a.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=(E=a.forceRefreshOnFailure)!==null&&E!==void 0?E:!1}get gaxios(){return this.transporter instanceof r.Gaxios?this.transporter:this.transporter instanceof u.DefaultTransporter?this.transporter.instance:"instance"in this.transporter&&this.transporter.instance instanceof r.Gaxios?this.transporter.instance:null}setCredentials(a){this.credentials=a}addSharedMetadataHeaders(a){return!a["x-goog-user-project"]&&this.quotaProjectId&&(a["x-goog-user-project"]=this.quotaProjectId),a}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}t.AuthClient=m}(authclient)),authclient}var loginticket={},hasRequiredLoginticket;function requireLoginticket(){if(hasRequiredLoginticket)return loginticket;hasRequiredLoginticket=1,Object.defineProperty(loginticket,"__esModule",{value:!0}),loginticket.LoginTicket=void 0;class t{constructor(r,u){this.envelope=r,this.payload=u}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){const r=this.getPayload();return r&&r.sub?r.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}return loginticket.LoginTicket=t,loginticket}var hasRequiredOauth2client;function requireOauth2client(){if(hasRequiredOauth2client)return oauth2client;hasRequiredOauth2client=1,Object.defineProperty(oauth2client,"__esModule",{value:!0}),oauth2client.OAuth2Client=oauth2client.ClientAuthentication=oauth2client.CertificateFormat=oauth2client.CodeChallengeMethod=void 0;const t=requireSrc$f(),e=require$$1$3,r=require$$1$3,u=requireEcdsaSigFormatter(),d=requireCrypto(),m=requireAuthclient(),c=requireLoginticket();var a;(function(v){v.Plain="plain",v.S256="S256"})(a||(oauth2client.CodeChallengeMethod=a={}));var o;(function(v){v.PEM="PEM",v.JWK="JWK"})(o||(oauth2client.CertificateFormat=o={}));var s;(function(v){v.ClientSecretPost="ClientSecretPost",v.ClientSecretBasic="ClientSecretBasic",v.None="None"})(s||(oauth2client.ClientAuthentication=s={}));class h extends m.AuthClient{constructor(E,y,A){const w=E&&typeof E=="object"?E:{clientId:E,clientSecret:y,redirectUri:A};super(w),this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=o.PEM,this.refreshTokenPromises=new Map,this._clientId=w.clientId,this._clientSecret=w.clientSecret,this.redirectUri=w.redirectUri,this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...w.endpoints},this.clientAuthentication=w.clientAuthentication||s.ClientSecretPost,this.issuers=w.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}generateAuthUrl(E={}){if(E.code_challenge_method&&!E.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return E.response_type=E.response_type||"code",E.client_id=E.client_id||this._clientId,E.redirect_uri=E.redirect_uri||this.redirectUri,Array.isArray(E.scope)&&(E.scope=E.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+e.stringify(E)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){const E=(0,d.createCrypto)(),A=E.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),I=(await E.sha256DigestBase64(A)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:A,codeChallenge:I}}getToken(E,y){const A=typeof E=="string"?{code:E}:E;if(y)this.getTokenAsync(A).then(w=>y(null,w.tokens,w.res),w=>y(w,null,w.response));else return this.getTokenAsync(A)}async getTokenAsync(E){const y=this.endpoints.oauth2TokenUrl.toString(),A={"Content-Type":"application/x-www-form-urlencoded"},w={client_id:E.client_id||this._clientId,code_verifier:E.codeVerifier,code:E.code,grant_type:"authorization_code",redirect_uri:E.redirect_uri||this.redirectUri};if(this.clientAuthentication===s.ClientSecretBasic){const S=Buffer.from(`${this._clientId}:${this._clientSecret}`);A.Authorization=`Basic ${S.toString("base64")}`}this.clientAuthentication===s.ClientSecretPost&&(w.client_secret=this._clientSecret);const I=await this.transporter.request({...h.RETRY_CONFIG,method:"POST",url:y,data:e.stringify(w),headers:A}),_=I.data;return I.data&&I.data.expires_in&&(_.expiry_date=new Date().getTime()+I.data.expires_in*1e3,delete _.expires_in),this.emit("tokens",_),{tokens:_,res:I}}async refreshToken(E){if(!E)return this.refreshTokenNoCache(E);if(this.refreshTokenPromises.has(E))return this.refreshTokenPromises.get(E);const y=this.refreshTokenNoCache(E).then(A=>(this.refreshTokenPromises.delete(E),A),A=>{throw this.refreshTokenPromises.delete(E),A});return this.refreshTokenPromises.set(E,y),y}async refreshTokenNoCache(E){var y;if(!E)throw new Error("No refresh token is set.");const A=this.endpoints.oauth2TokenUrl.toString(),w={refresh_token:E,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};let I;try{I=await this.transporter.request({...h.RETRY_CONFIG,method:"POST",url:A,data:e.stringify(w),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}catch(S){throw S instanceof t.GaxiosError&&S.message==="invalid_grant"&&(!((y=S.response)===null||y===void 0)&&y.data)&&/ReAuth/i.test(S.response.data.error_description)&&(S.message=JSON.stringify(S.response.data)),S}const _=I.data;return I.data&&I.data.expires_in&&(_.expiry_date=new Date().getTime()+I.data.expires_in*1e3,delete _.expires_in),this.emit("tokens",_),{tokens:_,res:I}}refreshAccessToken(E){if(E)this.refreshAccessTokenAsync().then(y=>E(null,y.credentials,y.res),E);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){const E=await this.refreshToken(this.credentials.refresh_token),y=E.tokens;return y.refresh_token=this.credentials.refresh_token,this.credentials=y,{credentials:this.credentials,res:E.res}}getAccessToken(E){if(E)this.getAccessTokenAsync().then(y=>E(null,y.token,y.res),E);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){const A=await this.processAndValidateRefreshHandler();if(A?.access_token)return this.setCredentials(A),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");const y=await this.refreshAccessTokenAsync();if(!y.credentials||y.credentials&&!y.credentials.access_token)throw new Error("Could not refresh access token.");return{token:y.credentials.access_token,res:y.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(E){return(await this.getRequestMetadataAsync(E)).headers}async getRequestMetadataAsync(E){const y=this.credentials;if(!y.access_token&&!y.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(y.access_token&&!this.isTokenExpiring()){y.token_type=y.token_type||"Bearer";const S={Authorization:y.token_type+" "+y.access_token};return{headers:this.addSharedMetadataHeaders(S)}}if(this.refreshHandler){const S=await this.processAndValidateRefreshHandler();if(S?.access_token){this.setCredentials(S);const j={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(j)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let A=null,w=null;try{A=await this.refreshToken(y.refresh_token),w=A.tokens}catch(S){const j=S;throw j.response&&(j.response.status===403||j.response.status===404)&&(j.message=`Could not refresh access token: ${j.message}`),j}const I=this.credentials;I.token_type=I.token_type||"Bearer",w.refresh_token=I.refresh_token,this.credentials=w;const _={Authorization:I.token_type+" "+w.access_token};return{headers:this.addSharedMetadataHeaders(_),res:A.res}}static getRevokeTokenUrl(E){return new h().getRevokeTokenURL(E).toString()}getRevokeTokenURL(E){const y=new URL(this.endpoints.oauth2RevokeUrl);return y.searchParams.append("token",E),y}revokeToken(E,y){const A={...h.RETRY_CONFIG,url:this.getRevokeTokenURL(E).toString(),method:"POST"};if(y)this.transporter.request(A).then(w=>y(null,w),y);else return this.transporter.request(A)}revokeCredentials(E){if(E)this.revokeCredentialsAsync().then(y=>E(null,y),E);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){const E=this.credentials.access_token;if(this.credentials={},E)return this.revokeToken(E);throw new Error("No access token to revoke.")}request(E,y){if(y)this.requestAsync(E).then(A=>y(null,A),A=>y(A,A.response));else return this.requestAsync(E)}async requestAsync(E,y=!1){let A;try{const w=await this.getRequestMetadataAsync(E.url);E.headers=E.headers||{},w.headers&&w.headers["x-goog-user-project"]&&(E.headers["x-goog-user-project"]=w.headers["x-goog-user-project"]),w.headers&&w.headers.Authorization&&(E.headers.Authorization=w.headers.Authorization),this.apiKey&&(E.headers["X-Goog-Api-Key"]=this.apiKey),A=await this.transporter.request(E)}catch(w){const I=w.response;if(I){const _=I.status,S=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),j=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,K=I.config.data instanceof r.Readable,J=_===401||_===403;if(!y&&J&&!K&&S)return await this.refreshAccessTokenAsync(),this.requestAsync(E,!0);if(!y&&J&&!K&&j){const H=await this.processAndValidateRefreshHandler();return H?.access_token&&this.setCredentials(H),this.requestAsync(E,!0)}}throw w}return A}verifyIdToken(E,y){if(y&&typeof y!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(y)this.verifyIdTokenAsync(E).then(A=>y(null,A),y);else return this.verifyIdTokenAsync(E)}async verifyIdTokenAsync(E){if(!E.idToken)throw new Error("The verifyIdToken method requires an ID Token");const y=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(E.idToken,y.certs,E.audience,this.issuers,E.maxExpiry)}async getTokenInfo(E){const{data:y}=await this.transporter.request({...h.RETRY_CONFIG,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${E}`},url:this.endpoints.tokenInfoUrl.toString()}),A=Object.assign({expiry_date:new Date().getTime()+y.expires_in*1e3,scopes:y.scope.split(" ")},y);return delete A.expires_in,delete A.scope,A}getFederatedSignonCerts(E){if(E)this.getFederatedSignonCertsAsync().then(y=>E(null,y.certs,y.res),E);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){const E=new Date().getTime(),y=(0,d.hasBrowserCrypto)()?o.JWK:o.PEM;if(this.certificateExpiry&&E<this.certificateExpiry.getTime()&&this.certificateCacheFormat===y)return{certs:this.certificateCache,format:y};let A,w;switch(y){case o.PEM:w=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case o.JWK:w=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw new Error(`Unsupported certificate format ${y}`)}try{A=await this.transporter.request({...h.RETRY_CONFIG,url:w})}catch(K){throw K instanceof Error&&(K.message=`Failed to retrieve verification certificates: ${K.message}`),K}const I=A?A.headers["cache-control"]:void 0;let _=-1;if(I){const J=new RegExp("max-age=([0-9]*)").exec(I);J&&J.length===2&&(_=Number(J[1])*1e3)}let S={};switch(y){case o.PEM:S=A.data;break;case o.JWK:for(const K of A.data.keys)S[K.kid]=K;break;default:throw new Error(`Unsupported certificate format ${y}`)}const j=new Date;return this.certificateExpiry=_===-1?null:new Date(j.getTime()+_),this.certificateCache=S,this.certificateCacheFormat=y,{certs:S,format:y,res:A}}getIapPublicKeys(E){if(E)this.getIapPublicKeysAsync().then(y=>E(null,y.pubkeys,y.res),E);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let E;const y=this.endpoints.oauth2IapPublicKeyUrl.toString();try{E=await this.transporter.request({...h.RETRY_CONFIG,url:y})}catch(A){throw A instanceof Error&&(A.message=`Failed to retrieve verification certificates: ${A.message}`),A}return{pubkeys:E.data,res:E}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(E,y,A,w,I){const _=(0,d.createCrypto)();I||(I=h.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);const S=E.split(".");if(S.length!==3)throw new Error("Wrong number of segments in token: "+E);const j=S[0]+"."+S[1];let K=S[2],J,H;try{J=JSON.parse(_.decodeBase64StringUtf8(S[0]))}catch(ye){throw ye instanceof Error&&(ye.message=`Can't parse token envelope: ${S[0]}': ${ye.message}`),ye}if(!J)throw new Error("Can't parse token envelope: "+S[0]);try{H=JSON.parse(_.decodeBase64StringUtf8(S[1]))}catch(ye){throw ye instanceof Error&&(ye.message=`Can't parse token payload '${S[0]}`),ye}if(!H)throw new Error("Can't parse token payload: "+S[1]);if(!Object.prototype.hasOwnProperty.call(y,J.kid))throw new Error("No pem found for envelope: "+JSON.stringify(J));const U=y[J.kid];if(J.alg==="ES256"&&(K=u.joseToDer(K,"ES256").toString("base64")),!await _.verify(U,j,K))throw new Error("Invalid token signature: "+E);if(!H.iat)throw new Error("No issue time in token: "+JSON.stringify(H));if(!H.exp)throw new Error("No expiration time in token: "+JSON.stringify(H));const Z=Number(H.iat);if(isNaN(Z))throw new Error("iat field using invalid format");const ie=Number(H.exp);if(isNaN(ie))throw new Error("exp field using invalid format");const ue=new Date().getTime()/1e3;if(ie>=ue+I)throw new Error("Expiration time too far in future: "+JSON.stringify(H));const le=Z-h.CLOCK_SKEW_SECS_,ne=ie+h.CLOCK_SKEW_SECS_;if(ue<le)throw new Error("Token used too early, "+ue+" < "+le+": "+JSON.stringify(H));if(ue>ne)throw new Error("Token used too late, "+ue+" > "+ne+": "+JSON.stringify(H));if(w&&w.indexOf(H.iss)<0)throw new Error("Invalid issuer, expected one of ["+w+"], but got "+H.iss);if(typeof A<"u"&&A!==null){const ye=H.aud;let fe=!1;if(A.constructor===Array?fe=A.indexOf(ye)>-1:fe=ye===A,!fe)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new c.LoginTicket(J,H)}async processAndValidateRefreshHandler(){if(this.refreshHandler){const E=await this.refreshHandler();if(!E.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return E}}isTokenExpiring(){const E=this.credentials.expiry_date;return E?E<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}}return oauth2client.OAuth2Client=h,h.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo",h.CLOCK_SKEW_SECS_=300,h.DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400,oauth2client}var hasRequiredComputeclient;function requireComputeclient(){if(hasRequiredComputeclient)return computeclient;hasRequiredComputeclient=1,Object.defineProperty(computeclient,"__esModule",{value:!0}),computeclient.Compute=void 0;const t=requireSrc$f(),e=requireSrc$d(),r=requireOauth2client();class u extends r.OAuth2Client{constructor(m={}){super(m),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=m.serviceAccountEmail||"default",this.scopes=Array.isArray(m.scopes)?m.scopes:m.scopes?[m.scopes]:[]}async refreshTokenNoCache(m){const c=`service-accounts/${this.serviceAccountEmail}/token`;let a;try{const s={property:c};this.scopes.length>0&&(s.params={scopes:this.scopes.join(",")}),a=await e.instance(s)}catch(s){throw s instanceof t.GaxiosError&&(s.message=`Could not refresh access token: ${s.message}`,this.wrapError(s)),s}const o=a;return a&&a.expires_in&&(o.expiry_date=new Date().getTime()+a.expires_in*1e3,delete o.expires_in),this.emit("tokens",o),{tokens:o,res:null}}async fetchIdToken(m){const c=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${m}`;let a;try{const o={property:c};a=await e.instance(o)}catch(o){throw o instanceof Error&&(o.message=`Could not fetch ID token: ${o.message}`),o}return a}wrapError(m){const c=m.response;c&&c.status&&(m.status=c.status,c.status===403?m.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+m.message:c.status===404&&(m.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+m.message))}}return computeclient.Compute=u,computeclient}var idtokenclient={},hasRequiredIdtokenclient;function requireIdtokenclient(){if(hasRequiredIdtokenclient)return idtokenclient;hasRequiredIdtokenclient=1,Object.defineProperty(idtokenclient,"__esModule",{value:!0}),idtokenclient.IdTokenClient=void 0;const t=requireOauth2client();class e extends t.OAuth2Client{constructor(u){super(u),this.targetAudience=u.targetAudience,this.idTokenProvider=u.idTokenProvider}async getRequestMetadataAsync(u){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){const m=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:m,expiry_date:this.getIdTokenExpiryDate(m)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}}getIdTokenExpiryDate(u){const d=u.split(".")[1];if(d)return JSON.parse(Buffer.from(d,"base64").toString("ascii")).exp*1e3}}return idtokenclient.IdTokenClient=e,idtokenclient}var envDetect={},hasRequiredEnvDetect;function requireEnvDetect(){if(hasRequiredEnvDetect)return envDetect;hasRequiredEnvDetect=1;var t={};Object.defineProperty(envDetect,"__esModule",{value:!0}),envDetect.GCPEnv=void 0,envDetect.clear=d,envDetect.getEnv=m;const e=requireSrc$d();var r;(function(E){E.APP_ENGINE="APP_ENGINE",E.KUBERNETES_ENGINE="KUBERNETES_ENGINE",E.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",E.COMPUTE_ENGINE="COMPUTE_ENGINE",E.CLOUD_RUN="CLOUD_RUN",E.NONE="NONE"})(r||(envDetect.GCPEnv=r={}));let u;function d(){u=void 0}async function m(){return u||(u=c(),u)}async function c(){let E=r.NONE;return a()?E=r.APP_ENGINE:o()?E=r.CLOUD_FUNCTIONS:await v()?await h()?E=r.KUBERNETES_ENGINE:s()?E=r.CLOUD_RUN:E=r.COMPUTE_ENGINE:E=r.NONE,E}function a(){return!!(t.GAE_SERVICE||t.GAE_MODULE_NAME)}function o(){return!!(t.FUNCTION_NAME||t.FUNCTION_TARGET)}function s(){return!!t.K_CONFIGURATION}async function h(){try{return await e.instance("attributes/cluster-name"),!0}catch{return!1}}async function v(){return e.isAvailable()}return envDetect}var jwtclient={},src$b={},jws$2={},dataStream$2,hasRequiredDataStream$2;function requireDataStream$2(){if(hasRequiredDataStream$2)return dataStream$2;hasRequiredDataStream$2=1;var t=requireSafeBuffer().Buffer,e=require$$1$3,r=require$$1$3;function u(d){if(this.buffer=null,this.writable=!0,this.readable=!0,!d)return this.buffer=t.alloc(0),this;if(typeof d.pipe=="function")return this.buffer=t.alloc(0),d.pipe(this),this;if(d.length||typeof d=="object")return this.buffer=d,this.writable=!1,process.nextTick((function(){this.emit("end",d),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof d+")")}return r.inherits(u,e),u.prototype.write=function(m){this.buffer=t.concat([this.buffer,t.from(m)]),this.emit("data",m)},u.prototype.end=function(m){m&&this.write(m),this.emit("end",m),this.emit("close"),this.writable=!1,this.readable=!1},dataStream$2=u,dataStream$2}var bufferEqualConstantTime,hasRequiredBufferEqualConstantTime;function requireBufferEqualConstantTime(){if(hasRequiredBufferEqualConstantTime)return bufferEqualConstantTime;hasRequiredBufferEqualConstantTime=1;var t=require$$1$3.Buffer,e=require$$1$3.SlowBuffer;bufferEqualConstantTime=r;function r(m,c){if(!t.isBuffer(m)||!t.isBuffer(c)||m.length!==c.length)return!1;for(var a=0,o=0;o<m.length;o++)a|=m[o]^c[o];return a===0}r.install=function(){t.prototype.equal=e.prototype.equal=function(c){return r(this,c)}};var u=t.prototype.equal,d=e.prototype.equal;return r.restore=function(){t.prototype.equal=u,e.prototype.equal=d},bufferEqualConstantTime}var jwa$2,hasRequiredJwa$2;function requireJwa$2(){if(hasRequiredJwa$2)return jwa$2;hasRequiredJwa$2=1;var t=requireSafeBuffer().Buffer,e=require$$1$3,r=requireEcdsaSigFormatter(),u=require$$1$3,d=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,m="secret must be a string or buffer",c="key must be a string or a buffer",a="key must be a string, a buffer or an object",o=typeof e.createPublicKey=="function";o&&(c+=" or a KeyObject",m+="or a KeyObject");function s(ne){if(!t.isBuffer(ne)&&typeof ne!="string"&&(!o||typeof ne!="object"||typeof ne.type!="string"||typeof ne.asymmetricKeyType!="string"||typeof ne.export!="function"))throw A(c)}function h(ne){if(!t.isBuffer(ne)&&typeof ne!="string"&&typeof ne!="object")throw A(a)}function v(ne){if(!t.isBuffer(ne)){if(typeof ne=="string")return ne;if(!o||typeof ne!="object"||ne.type!=="secret"||typeof ne.export!="function")throw A(m)}}function E(ne){return ne.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(ne){ne=ne.toString();var ye=4-ne.length%4;if(ye!==4)for(var fe=0;fe<ye;++fe)ne+="=";return ne.replace(/\-/g,"+").replace(/_/g,"/")}function A(ne){var ye=[].slice.call(arguments,1),fe=u.format.bind(u,ne).apply(null,ye);return new TypeError(fe)}function w(ne){return t.isBuffer(ne)||typeof ne=="string"}function I(ne){return w(ne)||(ne=JSON.stringify(ne)),ne}function _(ne){return function(fe,Te){v(Te),fe=I(fe);var Ae=e.createHmac("sha"+ne,Te),Se=(Ae.update(fe),Ae.digest("base64"));return E(Se)}}var S,j="timingSafeEqual"in e?function(ye,fe){return ye.byteLength!==fe.byteLength?!1:e.timingSafeEqual(ye,fe)}:function(ye,fe){return S||(S=requireBufferEqualConstantTime()),S(ye,fe)};function K(ne){return function(fe,Te,Ae){var Se=_(ne)(fe,Ae);return j(t.from(Te),t.from(Se))}}function J(ne){return function(fe,Te){h(Te),fe=I(fe);var Ae=e.createSign("RSA-SHA"+ne),Se=(Ae.update(fe),Ae.sign(Te,"base64"));return E(Se)}}function H(ne){return function(fe,Te,Ae){s(Ae),fe=I(fe),Te=y(Te);var Se=e.createVerify("RSA-SHA"+ne);return Se.update(fe),Se.verify(Ae,Te,"base64")}}function U(ne){return function(fe,Te){h(Te),fe=I(fe);var Ae=e.createSign("RSA-SHA"+ne),Se=(Ae.update(fe),Ae.sign({key:Te,padding:e.constants.RSA_PKCS1_PSS_PADDING,saltLength:e.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return E(Se)}}function P(ne){return function(fe,Te,Ae){s(Ae),fe=I(fe),Te=y(Te);var Se=e.createVerify("RSA-SHA"+ne);return Se.update(fe),Se.verify({key:Ae,padding:e.constants.RSA_PKCS1_PSS_PADDING,saltLength:e.constants.RSA_PSS_SALTLEN_DIGEST},Te,"base64")}}function Z(ne){var ye=J(ne);return function(){var Te=ye.apply(null,arguments);return Te=r.derToJose(Te,"ES"+ne),Te}}function ie(ne){var ye=H(ne);return function(Te,Ae,Se){Ae=r.joseToDer(Ae,"ES"+ne).toString("base64");var be=ye(Te,Ae,Se);return be}}function ue(){return function(){return""}}function le(){return function(ye,fe){return fe===""}}return jwa$2=function(ye){var fe={hs:_,rs:J,ps:U,es:Z,none:ue},Te={hs:K,rs:H,ps:P,es:ie,none:le},Ae=ye.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!Ae)throw A(d,ye);var Se=(Ae[1]||Ae[3]).toLowerCase(),be=Ae[2];return{sign:fe[Se](be),verify:Te[Se](be)}},jwa$2}var tostring$2,hasRequiredTostring$2;function requireTostring$2(){if(hasRequiredTostring$2)return tostring$2;hasRequiredTostring$2=1;var t=require$$1$3.Buffer;return tostring$2=function(r){return typeof r=="string"?r:typeof r=="number"||t.isBuffer(r)?r.toString():JSON.stringify(r)},tostring$2}var signStream$2,hasRequiredSignStream$2;function requireSignStream$2(){if(hasRequiredSignStream$2)return signStream$2;hasRequiredSignStream$2=1;var t=requireSafeBuffer().Buffer,e=requireDataStream$2(),r=requireJwa$2(),u=require$$1$3,d=requireTostring$2(),m=require$$1$3;function c(h,v){return t.from(h,v).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a(h,v,E){E=E||"utf8";var y=c(d(h),"binary"),A=c(d(v),E);return m.format("%s.%s",y,A)}function o(h){var v=h.header,E=h.payload,y=h.secret||h.privateKey,A=h.encoding,w=r(v.alg),I=a(v,E,A),_=w.sign(I,y);return m.format("%s.%s",I,_)}function s(h){var v=h.secret||h.privateKey||h.key,E=new e(v);this.readable=!0,this.header=h.header,this.encoding=h.encoding,this.secret=this.privateKey=this.key=E,this.payload=new e(h.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}return m.inherits(s,u),s.prototype.sign=function(){try{var v=o({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",v),this.emit("data",v),this.emit("end"),this.readable=!1,v}catch(E){this.readable=!1,this.emit("error",E),this.emit("close")}},s.sign=o,signStream$2=s,signStream$2}var verifyStream$2,hasRequiredVerifyStream$2;function requireVerifyStream$2(){if(hasRequiredVerifyStream$2)return verifyStream$2;hasRequiredVerifyStream$2=1;var t=requireSafeBuffer().Buffer,e=requireDataStream$2(),r=requireJwa$2(),u=require$$1$3,d=requireTostring$2(),m=require$$1$3,c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function a(_){return Object.prototype.toString.call(_)==="[object Object]"}function o(_){if(a(_))return _;try{return JSON.parse(_)}catch{return}}function s(_){var S=_.split(".",1)[0];return o(t.from(S,"base64").toString("binary"))}function h(_){return _.split(".",2).join(".")}function v(_){return _.split(".")[2]}function E(_,S){S=S||"utf8";var j=_.split(".")[1];return t.from(j,"base64").toString(S)}function y(_){return c.test(_)&&!!s(_)}function A(_,S,j){if(!S){var K=new Error("Missing algorithm parameter for jws.verify");throw K.code="MISSING_ALGORITHM",K}_=d(_);var J=v(_),H=h(_),U=r(S);return U.verify(H,J,j)}function w(_,S){if(S=S||{},_=d(_),!y(_))return null;var j=s(_);if(!j)return null;var K=E(_);return(j.typ==="JWT"||S.json)&&(K=JSON.parse(K,S.encoding)),{header:j,payload:K,signature:v(_)}}function I(_){_=_||{};var S=_.secret||_.publicKey||_.key,j=new e(S);this.readable=!0,this.algorithm=_.algorithm,this.encoding=_.encoding,this.secret=this.publicKey=this.key=j,this.signature=new e(_.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}return m.inherits(I,u),I.prototype.verify=function(){try{var S=A(this.signature.buffer,this.algorithm,this.key.buffer),j=w(this.signature.buffer,this.encoding);return this.emit("done",S,j),this.emit("data",S),this.emit("end"),this.readable=!1,S}catch(K){this.readable=!1,this.emit("error",K),this.emit("close")}},I.decode=w,I.isValid=y,I.verify=A,verifyStream$2=I,verifyStream$2}var hasRequiredJws$2;function requireJws$2(){if(hasRequiredJws$2)return jws$2;hasRequiredJws$2=1;var t=requireSignStream$2(),e=requireVerifyStream$2(),r=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return jws$2.ALGORITHMS=r,jws$2.sign=t.sign,jws$2.verify=e.verify,jws$2.decode=e.decode,jws$2.isValid=e.isValid,jws$2.createSign=function(d){return new t(d)},jws$2.createVerify=function(d){return new e(d)},jws$2}var hasRequiredSrc$c;function requireSrc$c(){if(hasRequiredSrc$c)return src$b;hasRequiredSrc$c=1;var t=src$b&&src$b.__classPrivateFieldGet||function(K,J,H,U){if(H==="a"&&!U)throw new TypeError("Private accessor was defined without a getter");if(typeof J=="function"?K!==J||!U:!J.has(K))throw new TypeError("Cannot read private member from an object whose class did not declare it");return H==="m"?U:H==="a"?U.call(K):U?U.value:J.get(K)},e=src$b&&src$b.__classPrivateFieldSet||function(K,J,H,U,P){if(U==="m")throw new TypeError("Private method is not writable");if(U==="a"&&!P)throw new TypeError("Private accessor was defined without a setter");if(typeof J=="function"?K!==J||!P:!J.has(K))throw new TypeError("Cannot write private member to an object whose class did not declare it");return U==="a"?P.call(K,H):P?P.value=H:J.set(K,H),H},r,u,d,m,c,a,o,s;Object.defineProperty(src$b,"__esModule",{value:!0}),src$b.GoogleToken=void 0;const h=require$$1$3,v=requireSrc$f(),E=requireJws$2(),y=require$$1$3,A=require$$1$3,w=h.readFile?(0,A.promisify)(h.readFile):async()=>{throw new S("use key rather than keyFile.","MISSING_CREDENTIALS")},I="https://www.googleapis.com/oauth2/v4/token",_="https://accounts.google.com/o/oauth2/revoke?token=";class S extends Error{constructor(J,H){super(J),this.code=H}}class j{get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}constructor(J){r.add(this),this.transporter={request:H=>(0,v.request)(H)},u.set(this,void 0),t(this,r,"m",o).call(this,J)}hasExpired(){const J=new Date().getTime();return this.rawToken&&this.expiresAt?J>=this.expiresAt:!0}isTokenExpiring(){var J;const H=new Date().getTime(),U=(J=this.eagerRefreshThresholdMillis)!==null&&J!==void 0?J:0;return this.rawToken&&this.expiresAt?this.expiresAt<=H+U:!0}getToken(J,H={}){if(typeof J=="object"&&(H=J,J=void 0),H=Object.assign({forceRefresh:!1},H),J){const U=J;t(this,r,"m",d).call(this,H).then(P=>U(null,P),J);return}return t(this,r,"m",d).call(this,H)}async getCredentials(J){switch(y.extname(J)){case".json":{const U=await w(J,"utf8"),P=JSON.parse(U),Z=P.private_key,ie=P.client_email;if(!Z||!ie)throw new S("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:Z,clientEmail:ie}}case".der":case".crt":case".pem":return{privateKey:await w(J,"utf8")};case".p12":case".pfx":throw new S("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");default:throw new S("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE")}}revokeToken(J){if(J){t(this,r,"m",a).call(this).then(()=>J(),J);return}return t(this,r,"m",a).call(this)}}return src$b.GoogleToken=j,u=new WeakMap,r=new WeakSet,d=async function(J){if(t(this,u,"f")&&!J.forceRefresh)return t(this,u,"f");try{return await e(this,u,t(this,r,"m",m).call(this,J),"f")}finally{e(this,u,void 0,"f")}},m=async function(J){if(this.isTokenExpiring()===!1&&J.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){const H=await this.getCredentials(this.keyFile);this.key=H.privateKey,this.iss=H.clientEmail||this.iss,H.clientEmail||t(this,r,"m",c).call(this)}return t(this,r,"m",s).call(this)},c=function(){if(!this.iss)throw new S("email is required.","MISSING_CREDENTIALS")},a=async function(){if(!this.accessToken)throw new Error("No token to revoke.");const J=_+this.accessToken;await this.transporter.request({url:J,retry:!0}),t(this,r,"m",o).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})},o=function(J={}){this.keyFile=J.keyFile,this.key=J.key,this.rawToken=void 0,this.iss=J.email||J.iss,this.sub=J.sub,this.additionalClaims=J.additionalClaims,typeof J.scope=="object"?this.scope=J.scope.join(" "):this.scope=J.scope,this.eagerRefreshThresholdMillis=J.eagerRefreshThresholdMillis,J.transporter&&(this.transporter=J.transporter)},s=async function(){var J,H;const U=Math.floor(new Date().getTime()/1e3),P=this.additionalClaims||{},Z=Object.assign({iss:this.iss,scope:this.scope,aud:I,exp:U+3600,iat:U,sub:this.sub},P),ie=E.sign({header:{alg:"RS256"},payload:Z,secret:this.key});try{const ue=await this.transporter.request({method:"POST",url:I,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:ie},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});return this.rawToken=ue.data,this.expiresAt=ue.data.expires_in===null||ue.data.expires_in===void 0?void 0:(U+ue.data.expires_in)*1e3,this.rawToken}catch(ue){this.rawToken=void 0,this.tokenExpires=void 0;const le=ue.response&&(!((J=ue.response)===null||J===void 0)&&J.data)?(H=ue.response)===null||H===void 0?void 0:H.data:{};if(le.error){const ne=le.error_description?`: ${le.error_description}`:"";ue.message=`${le.error}${ne}`}throw ue}},src$b}var jwtaccess={},jws$1={},dataStream$1,hasRequiredDataStream$1;function requireDataStream$1(){if(hasRequiredDataStream$1)return dataStream$1;hasRequiredDataStream$1=1;var t=requireSafeBuffer().Buffer,e=require$$1$3,r=require$$1$3;function u(d){if(this.buffer=null,this.writable=!0,this.readable=!0,!d)return this.buffer=t.alloc(0),this;if(typeof d.pipe=="function")return this.buffer=t.alloc(0),d.pipe(this),this;if(d.length||typeof d=="object")return this.buffer=d,this.writable=!1,process.nextTick((function(){this.emit("end",d),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof d+")")}return r.inherits(u,e),u.prototype.write=function(m){this.buffer=t.concat([this.buffer,t.from(m)]),this.emit("data",m)},u.prototype.end=function(m){m&&this.write(m),this.emit("end",m),this.emit("close"),this.writable=!1,this.readable=!1},dataStream$1=u,dataStream$1}var jwa$1,hasRequiredJwa$1;function requireJwa$1(){if(hasRequiredJwa$1)return jwa$1;hasRequiredJwa$1=1;var t=requireSafeBuffer().Buffer,e=require$$1$3,r=requireEcdsaSigFormatter(),u=require$$1$3,d=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,m="secret must be a string or buffer",c="key must be a string or a buffer",a="key must be a string, a buffer or an object",o=typeof e.createPublicKey=="function";o&&(c+=" or a KeyObject",m+="or a KeyObject");function s(ne){if(!t.isBuffer(ne)&&typeof ne!="string"&&(!o||typeof ne!="object"||typeof ne.type!="string"||typeof ne.asymmetricKeyType!="string"||typeof ne.export!="function"))throw A(c)}function h(ne){if(!t.isBuffer(ne)&&typeof ne!="string"&&typeof ne!="object")throw A(a)}function v(ne){if(!t.isBuffer(ne)){if(typeof ne=="string")return ne;if(!o||typeof ne!="object"||ne.type!=="secret"||typeof ne.export!="function")throw A(m)}}function E(ne){return ne.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(ne){ne=ne.toString();var ye=4-ne.length%4;if(ye!==4)for(var fe=0;fe<ye;++fe)ne+="=";return ne.replace(/\-/g,"+").replace(/_/g,"/")}function A(ne){var ye=[].slice.call(arguments,1),fe=u.format.bind(u,ne).apply(null,ye);return new TypeError(fe)}function w(ne){return t.isBuffer(ne)||typeof ne=="string"}function I(ne){return w(ne)||(ne=JSON.stringify(ne)),ne}function _(ne){return function(fe,Te){v(Te),fe=I(fe);var Ae=e.createHmac("sha"+ne,Te),Se=(Ae.update(fe),Ae.digest("base64"));return E(Se)}}var S,j="timingSafeEqual"in e?function(ye,fe){return ye.byteLength!==fe.byteLength?!1:e.timingSafeEqual(ye,fe)}:function(ye,fe){return S||(S=requireBufferEqualConstantTime()),S(ye,fe)};function K(ne){return function(fe,Te,Ae){var Se=_(ne)(fe,Ae);return j(t.from(Te),t.from(Se))}}function J(ne){return function(fe,Te){h(Te),fe=I(fe);var Ae=e.createSign("RSA-SHA"+ne),Se=(Ae.update(fe),Ae.sign(Te,"base64"));return E(Se)}}function H(ne){return function(fe,Te,Ae){s(Ae),fe=I(fe),Te=y(Te);var Se=e.createVerify("RSA-SHA"+ne);return Se.update(fe),Se.verify(Ae,Te,"base64")}}function U(ne){return function(fe,Te){h(Te),fe=I(fe);var Ae=e.createSign("RSA-SHA"+ne),Se=(Ae.update(fe),Ae.sign({key:Te,padding:e.constants.RSA_PKCS1_PSS_PADDING,saltLength:e.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return E(Se)}}function P(ne){return function(fe,Te,Ae){s(Ae),fe=I(fe),Te=y(Te);var Se=e.createVerify("RSA-SHA"+ne);return Se.update(fe),Se.verify({key:Ae,padding:e.constants.RSA_PKCS1_PSS_PADDING,saltLength:e.constants.RSA_PSS_SALTLEN_DIGEST},Te,"base64")}}function Z(ne){var ye=J(ne);return function(){var Te=ye.apply(null,arguments);return Te=r.derToJose(Te,"ES"+ne),Te}}function ie(ne){var ye=H(ne);return function(Te,Ae,Se){Ae=r.joseToDer(Ae,"ES"+ne).toString("base64");var be=ye(Te,Ae,Se);return be}}function ue(){return function(){return""}}function le(){return function(ye,fe){return fe===""}}return jwa$1=function(ye){var fe={hs:_,rs:J,ps:U,es:Z,none:ue},Te={hs:K,rs:H,ps:P,es:ie,none:le},Ae=ye.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!Ae)throw A(d,ye);var Se=(Ae[1]||Ae[3]).toLowerCase(),be=Ae[2];return{sign:fe[Se](be),verify:Te[Se](be)}},jwa$1}var tostring$1,hasRequiredTostring$1;function requireTostring$1(){if(hasRequiredTostring$1)return tostring$1;hasRequiredTostring$1=1;var t=require$$1$3.Buffer;return tostring$1=function(r){return typeof r=="string"?r:typeof r=="number"||t.isBuffer(r)?r.toString():JSON.stringify(r)},tostring$1}var signStream$1,hasRequiredSignStream$1;function requireSignStream$1(){if(hasRequiredSignStream$1)return signStream$1;hasRequiredSignStream$1=1;var t=requireSafeBuffer().Buffer,e=requireDataStream$1(),r=requireJwa$1(),u=require$$1$3,d=requireTostring$1(),m=require$$1$3;function c(h,v){return t.from(h,v).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a(h,v,E){E=E||"utf8";var y=c(d(h),"binary"),A=c(d(v),E);return m.format("%s.%s",y,A)}function o(h){var v=h.header,E=h.payload,y=h.secret||h.privateKey,A=h.encoding,w=r(v.alg),I=a(v,E,A),_=w.sign(I,y);return m.format("%s.%s",I,_)}function s(h){var v=h.secret||h.privateKey||h.key,E=new e(v);this.readable=!0,this.header=h.header,this.encoding=h.encoding,this.secret=this.privateKey=this.key=E,this.payload=new e(h.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}return m.inherits(s,u),s.prototype.sign=function(){try{var v=o({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",v),this.emit("data",v),this.emit("end"),this.readable=!1,v}catch(E){this.readable=!1,this.emit("error",E),this.emit("close")}},s.sign=o,signStream$1=s,signStream$1}var verifyStream$1,hasRequiredVerifyStream$1;function requireVerifyStream$1(){if(hasRequiredVerifyStream$1)return verifyStream$1;hasRequiredVerifyStream$1=1;var t=requireSafeBuffer().Buffer,e=requireDataStream$1(),r=requireJwa$1(),u=require$$1$3,d=requireTostring$1(),m=require$$1$3,c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function a(_){return Object.prototype.toString.call(_)==="[object Object]"}function o(_){if(a(_))return _;try{return JSON.parse(_)}catch{return}}function s(_){var S=_.split(".",1)[0];return o(t.from(S,"base64").toString("binary"))}function h(_){return _.split(".",2).join(".")}function v(_){return _.split(".")[2]}function E(_,S){S=S||"utf8";var j=_.split(".")[1];return t.from(j,"base64").toString(S)}function y(_){return c.test(_)&&!!s(_)}function A(_,S,j){if(!S){var K=new Error("Missing algorithm parameter for jws.verify");throw K.code="MISSING_ALGORITHM",K}_=d(_);var J=v(_),H=h(_),U=r(S);return U.verify(H,J,j)}function w(_,S){if(S=S||{},_=d(_),!y(_))return null;var j=s(_);if(!j)return null;var K=E(_);return(j.typ==="JWT"||S.json)&&(K=JSON.parse(K,S.encoding)),{header:j,payload:K,signature:v(_)}}function I(_){_=_||{};var S=_.secret||_.publicKey||_.key,j=new e(S);this.readable=!0,this.algorithm=_.algorithm,this.encoding=_.encoding,this.secret=this.publicKey=this.key=j,this.signature=new e(_.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}return m.inherits(I,u),I.prototype.verify=function(){try{var S=A(this.signature.buffer,this.algorithm,this.key.buffer),j=w(this.signature.buffer,this.encoding);return this.emit("done",S,j),this.emit("data",S),this.emit("end"),this.readable=!1,S}catch(K){this.readable=!1,this.emit("error",K),this.emit("close")}},I.decode=w,I.isValid=y,I.verify=A,verifyStream$1=I,verifyStream$1}var hasRequiredJws$1;function requireJws$1(){if(hasRequiredJws$1)return jws$1;hasRequiredJws$1=1;var t=requireSignStream$1(),e=requireVerifyStream$1(),r=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return jws$1.ALGORITHMS=r,jws$1.sign=t.sign,jws$1.verify=e.verify,jws$1.decode=e.decode,jws$1.isValid=e.isValid,jws$1.createSign=function(d){return new t(d)},jws$1.createVerify=function(d){return new e(d)},jws$1}var hasRequiredJwtaccess;function requireJwtaccess(){if(hasRequiredJwtaccess)return jwtaccess;hasRequiredJwtaccess=1,Object.defineProperty(jwtaccess,"__esModule",{value:!0}),jwtaccess.JWTAccess=void 0;const t=requireJws$1(),e=requireUtil$8(),r={alg:"RS256",typ:"JWT"};class u{constructor(m,c,a,o){this.cache=new e.LRUCache({capacity:500,maxAge:60*60*1e3}),this.email=m,this.key=c,this.keyId=a,this.eagerRefreshThresholdMillis=o??5*60*1e3}getCachedKey(m,c){let a=m;if(c&&Array.isArray(c)&&c.length?a=m?`${m}_${c.join("_")}`:`${c.join("_")}`:typeof c=="string"&&(a=m?`${m}_${c}`:c),!a)throw Error("Scopes or url must be provided");return a}getRequestHeaders(m,c,a){const o=this.getCachedKey(m,a),s=this.cache.get(o),h=Date.now();if(s&&s.expiration-h>this.eagerRefreshThresholdMillis)return s.headers;const v=Math.floor(Date.now()/1e3),E=u.getExpirationTime(v);let y;if(Array.isArray(a)&&(a=a.join(" ")),a?y={iss:this.email,sub:this.email,scope:a,exp:E,iat:v}:y={iss:this.email,sub:this.email,aud:m,exp:E,iat:v},c){for(const S in y)if(c[S])throw new Error(`The '${S}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}const A=this.keyId?{...r,kid:this.keyId}:r,w=Object.assign(y,c),_={Authorization:`Bearer ${t.sign({header:A,payload:w,secret:this.key})}`};return this.cache.set(o,{expiration:E*1e3,headers:_}),_}static getExpirationTime(m){return m+3600}fromJSON(m){if(!m)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!m.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!m.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=m.client_email,this.key=m.private_key,this.keyId=m.private_key_id,this.projectId=m.project_id}fromStream(m,c){if(c)this.fromStreamAsync(m).then(()=>c(),c);else return this.fromStreamAsync(m)}fromStreamAsync(m){return new Promise((c,a)=>{m||a(new Error("Must pass in a stream containing the service account auth settings."));let o="";m.setEncoding("utf8").on("data",s=>o+=s).on("error",a).on("end",()=>{try{const s=JSON.parse(o);this.fromJSON(s),c()}catch(s){a(s)}})})}}return jwtaccess.JWTAccess=u,jwtaccess}var hasRequiredJwtclient;function requireJwtclient(){if(hasRequiredJwtclient)return jwtclient;hasRequiredJwtclient=1,Object.defineProperty(jwtclient,"__esModule",{value:!0}),jwtclient.JWT=void 0;const t=requireSrc$c(),e=requireJwtaccess(),r=requireOauth2client(),u=requireAuthclient();class d extends r.OAuth2Client{constructor(c,a,o,s,h,v){const E=c&&typeof c=="object"?c:{email:c,keyFile:a,key:o,keyId:v,scopes:s,subject:h};super(E),this.email=E.email,this.keyFile=E.keyFile,this.key=E.key,this.keyId=E.keyId,this.scopes=E.scopes,this.subject=E.subject,this.additionalClaims=E.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(c){const a=new d(this);return a.scopes=c,a}async getRequestMetadataAsync(c){c=this.defaultServicePath?`https://${this.defaultServicePath}/`:c;const a=!this.hasUserScopes()&&c||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==u.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==u.DEFAULT_UNIVERSE)throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${u.DEFAULT_UNIVERSE}`);if(!this.apiKey&&a)if(this.additionalClaims&&this.additionalClaims.target_audience){const{tokens:o}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${o.id_token}`})}}else{this.access||(this.access=new e.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let o;this.hasUserScopes()?o=this.scopes:c||(o=this.defaultScopes);const s=this.useJWTAccessWithScope||this.universeDomain!==u.DEFAULT_UNIVERSE,h=await this.access.getRequestHeaders(c??void 0,this.additionalClaims,s?o:void 0);return{headers:this.addSharedMetadataHeaders(h)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(c):{headers:{}}}async fetchIdToken(c){const a=new t.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:c},transporter:this.transporter});if(await a.getToken({forceRefresh:!0}),!a.idToken)throw new Error("Unknown error: Failed to fetch ID token");return a.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(c){if(c)this.authorizeAsync().then(a=>c(null,a),c);else return this.authorizeAsync()}async authorizeAsync(){const c=await this.refreshToken();if(!c)throw new Error("No result returned");return this.credentials=c.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,c.tokens}async refreshTokenNoCache(c){const a=this.createGToken(),s={access_token:(await a.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:a.expiresAt,id_token:a.idToken};return this.emit("tokens",s),{res:null,tokens:s}}createGToken(){return this.gtoken||(this.gtoken=new t.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(c){if(!c)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!c.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!c.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=c.client_email,this.key=c.private_key,this.keyId=c.private_key_id,this.projectId=c.project_id,this.quotaProjectId=c.quota_project_id,this.universeDomain=c.universe_domain||this.universeDomain}fromStream(c,a){if(a)this.fromStreamAsync(c).then(()=>a(),a);else return this.fromStreamAsync(c)}fromStreamAsync(c){return new Promise((a,o)=>{if(!c)throw new Error("Must pass in a stream containing the service account auth settings.");let s="";c.setEncoding("utf8").on("error",o).on("data",h=>s+=h).on("end",()=>{try{const h=JSON.parse(s);this.fromJSON(h),a()}catch(h){o(h)}})})}fromAPIKey(c){if(typeof c!="string")throw new Error("Must provide an API Key string.");this.apiKey=c}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){const a=await this.createGToken().getCredentials(this.keyFile);return{private_key:a.privateKey,client_email:a.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}}return jwtclient.JWT=d,jwtclient}var refreshclient={},hasRequiredRefreshclient;function requireRefreshclient(){if(hasRequiredRefreshclient)return refreshclient;hasRequiredRefreshclient=1,Object.defineProperty(refreshclient,"__esModule",{value:!0}),refreshclient.UserRefreshClient=refreshclient.USER_REFRESH_ACCOUNT_TYPE=void 0;const t=requireOauth2client(),e=require$$1$3;refreshclient.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class r extends t.OAuth2Client{constructor(d,m,c,a,o){const s=d&&typeof d=="object"?d:{clientId:d,clientSecret:m,refreshToken:c,eagerRefreshThresholdMillis:a,forceRefreshOnFailure:o};super(s),this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}async refreshTokenNoCache(d){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(d){return(await this.transporter.request({...r.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:(0,e.stringify)({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:d})})).data.id_token}fromJSON(d){if(!d)throw new Error("Must pass in a JSON object containing the user refresh token");if(d.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!d.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!d.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!d.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=d.client_id,this._clientSecret=d.client_secret,this._refreshToken=d.refresh_token,this.credentials.refresh_token=d.refresh_token,this.quotaProjectId=d.quota_project_id,this.universeDomain=d.universe_domain||this.universeDomain}fromStream(d,m){if(m)this.fromStreamAsync(d).then(()=>m(),m);else return this.fromStreamAsync(d)}async fromStreamAsync(d){return new Promise((m,c)=>{if(!d)return c(new Error("Must pass in a stream containing the user refresh token."));let a="";d.setEncoding("utf8").on("error",c).on("data",o=>a+=o).on("end",()=>{try{const o=JSON.parse(a);return this.fromJSON(o),m()}catch(o){return c(o)}})})}static fromJSON(d){const m=new r;return m.fromJSON(d),m}}return refreshclient.UserRefreshClient=r,refreshclient}var impersonated={},hasRequiredImpersonated;function requireImpersonated(){if(hasRequiredImpersonated)return impersonated;hasRequiredImpersonated=1,Object.defineProperty(impersonated,"__esModule",{value:!0}),impersonated.Impersonated=impersonated.IMPERSONATED_ACCOUNT_TYPE=void 0;const t=requireOauth2client(),e=requireSrc$f(),r=requireUtil$8();impersonated.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class u extends t.OAuth2Client{constructor(m={}){var c,a,o,s,h,v;if(super(m),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(c=m.sourceClient)!==null&&c!==void 0?c:new t.OAuth2Client,this.targetPrincipal=(a=m.targetPrincipal)!==null&&a!==void 0?a:"",this.delegates=(o=m.delegates)!==null&&o!==void 0?o:[],this.targetScopes=(s=m.targetScopes)!==null&&s!==void 0?s:[],this.lifetime=(h=m.lifetime)!==null&&h!==void 0?h:3600,!!!(0,r.originalOrCamelOptions)(m).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=(v=m.endpoint)!==null&&v!==void 0?v:`https://iamcredentials.${this.universeDomain}`}async sign(m){await this.sourceClient.getAccessToken();const c=`projects/-/serviceAccounts/${this.targetPrincipal}`,a=`${this.endpoint}/v1/${c}:signBlob`,o={delegates:this.delegates,payload:Buffer.from(m).toString("base64")};return(await this.sourceClient.request({...u.RETRY_CONFIG,url:a,data:o,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){var m,c,a,o,s,h;try{await this.sourceClient.getAccessToken();const v="projects/-/serviceAccounts/"+this.targetPrincipal,E=`${this.endpoint}/v1/${v}:generateAccessToken`,y={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},A=await this.sourceClient.request({...u.RETRY_CONFIG,url:E,data:y,method:"POST"}),w=A.data;return this.credentials.access_token=w.accessToken,this.credentials.expiry_date=Date.parse(w.expireTime),{tokens:this.credentials,res:A}}catch(v){if(!(v instanceof Error))throw v;let E=0,y="";throw v instanceof e.GaxiosError&&(E=(a=(c=(m=v?.response)===null||m===void 0?void 0:m.data)===null||c===void 0?void 0:c.error)===null||a===void 0?void 0:a.status,y=(h=(s=(o=v?.response)===null||o===void 0?void 0:o.data)===null||s===void 0?void 0:s.error)===null||h===void 0?void 0:h.message),E&&y?(v.message=`${E}: unable to impersonate: ${y}`,v):(v.message=`unable to impersonate: ${v}`,v)}}async fetchIdToken(m,c){var a,o;await this.sourceClient.getAccessToken();const s=`projects/-/serviceAccounts/${this.targetPrincipal}`,h=`${this.endpoint}/v1/${s}:generateIdToken`,v={delegates:this.delegates,audience:m,includeEmail:(a=c?.includeEmail)!==null&&a!==void 0?a:!0,useEmailAzp:(o=c?.includeEmail)!==null&&o!==void 0?o:!0};return(await this.sourceClient.request({...u.RETRY_CONFIG,url:h,data:v,method:"POST"})).data.token}}return impersonated.Impersonated=u,impersonated}var externalclient={},baseexternalclient={},stscredentials={},oauth2common={},hasRequiredOauth2common;function requireOauth2common(){if(hasRequiredOauth2common)return oauth2common;hasRequiredOauth2common=1,Object.defineProperty(oauth2common,"__esModule",{value:!0}),oauth2common.OAuthClientAuthHandler=void 0,oauth2common.getErrorFromOAuthErrorResponse=d;const t=require$$1$3,e=requireCrypto(),r=["PUT","POST","PATCH"];class u{constructor(c){this.clientAuthentication=c,this.crypto=(0,e.createCrypto)()}applyClientAuthenticationOptions(c,a){this.injectAuthenticatedHeaders(c,a),a||this.injectAuthenticatedRequestBody(c)}injectAuthenticatedHeaders(c,a){var o;if(a)c.headers=c.headers||{},Object.assign(c.headers,{Authorization:`Bearer ${a}}`});else if(((o=this.clientAuthentication)===null||o===void 0?void 0:o.confidentialClientType)==="basic"){c.headers=c.headers||{};const s=this.clientAuthentication.clientId,h=this.clientAuthentication.clientSecret||"",v=this.crypto.encodeBase64StringUtf8(`${s}:${h}`);Object.assign(c.headers,{Authorization:`Basic ${v}`})}}injectAuthenticatedRequestBody(c){var a;if(((a=this.clientAuthentication)===null||a===void 0?void 0:a.confidentialClientType)==="request-body"){const o=(c.method||"GET").toUpperCase();if(r.indexOf(o)!==-1){let s;const h=c.headers||{};for(const v in h)if(v.toLowerCase()==="content-type"&&h[v]){s=h[v].toLowerCase();break}if(s==="application/x-www-form-urlencoded"){c.data=c.data||"";const v=t.parse(c.data);Object.assign(v,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),c.data=t.stringify(v)}else if(s==="application/json")c.data=c.data||{},Object.assign(c.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${s} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${o} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}oauth2common.OAuthClientAuthHandler=u;function d(m,c){const a=m.error,o=m.error_description,s=m.error_uri;let h=`Error code ${a}`;typeof o<"u"&&(h+=`: ${o}`),typeof s<"u"&&(h+=` - ${s}`);const v=new Error(h);if(c){const E=Object.keys(c);c.stack&&E.push("stack"),E.forEach(y=>{y!=="message"&&Object.defineProperty(v,y,{value:c[y],writable:!1,enumerable:!0})})}return v}return oauth2common}var hasRequiredStscredentials;function requireStscredentials(){if(hasRequiredStscredentials)return stscredentials;hasRequiredStscredentials=1,Object.defineProperty(stscredentials,"__esModule",{value:!0}),stscredentials.StsCredentials=void 0;const t=requireSrc$f(),e=require$$1$3,r=requireTransporters(),u=requireOauth2common();class d extends u.OAuthClientAuthHandler{constructor(c,a){super(a),this.tokenExchangeEndpoint=c,this.transporter=new r.DefaultTransporter}async exchangeToken(c,a,o){var s,h,v;const E={grant_type:c.grantType,resource:c.resource,audience:c.audience,scope:(s=c.scope)===null||s===void 0?void 0:s.join(" "),requested_token_type:c.requestedTokenType,subject_token:c.subjectToken,subject_token_type:c.subjectTokenType,actor_token:(h=c.actingParty)===null||h===void 0?void 0:h.actorToken,actor_token_type:(v=c.actingParty)===null||v===void 0?void 0:v.actorTokenType,options:o&&JSON.stringify(o)};Object.keys(E).forEach(w=>{typeof E[w]>"u"&&delete E[w]});const y={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(y,a||{});const A={...d.RETRY_CONFIG,url:this.tokenExchangeEndpoint.toString(),method:"POST",headers:y,data:e.stringify(E),responseType:"json"};this.applyClientAuthenticationOptions(A);try{const w=await this.transporter.request(A),I=w.data;return I.res=w,I}catch(w){throw w instanceof t.GaxiosError&&w.response?(0,u.getErrorFromOAuthErrorResponse)(w.response.data,w):w}}}return stscredentials.StsCredentials=d,stscredentials}var hasRequiredBaseexternalclient;function requireBaseexternalclient(){return hasRequiredBaseexternalclient||(hasRequiredBaseexternalclient=1,function(t){var e=baseexternalclient&&baseexternalclient.__classPrivateFieldGet||function(j,K,J,H){if(J==="a"&&!H)throw new TypeError("Private accessor was defined without a getter");if(typeof K=="function"?j!==K||!H:!K.has(j))throw new TypeError("Cannot read private member from an object whose class did not declare it");return J==="m"?H:J==="a"?H.call(j):H?H.value:K.get(j)},r=baseexternalclient&&baseexternalclient.__classPrivateFieldSet||function(j,K,J,H,U){if(H==="m")throw new TypeError("Private method is not writable");if(H==="a"&&!U)throw new TypeError("Private accessor was defined without a setter");if(typeof K=="function"?j!==K||!U:!K.has(j))throw new TypeError("Cannot write private member to an object whose class did not declare it");return H==="a"?U.call(j,J):U?U.value=J:K.set(j,J),J},u,d,m;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseExternalAccountClient=t.DEFAULT_UNIVERSE=t.CLOUD_RESOURCE_MANAGER=t.EXTERNAL_ACCOUNT_TYPE=t.EXPIRATION_TIME_OFFSET=void 0;const c=require$$1$3,a=requireAuthclient(),o=requireStscredentials(),s=requireUtil$8(),h="urn:ietf:params:oauth:grant-type:token-exchange",v="urn:ietf:params:oauth:token-type:access_token",E="https://www.googleapis.com/auth/cloud-platform",y=3600;t.EXPIRATION_TIME_OFFSET=5*60*1e3,t.EXTERNAL_ACCOUNT_TYPE="external_account",t.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";const A="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",w="https://sts.{universeDomain}/v1/token",I=require$$4$2;var _=requireAuthclient();Object.defineProperty(t,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return _.DEFAULT_UNIVERSE}});class S extends a.AuthClient{constructor(K,J){var H;super({...K,...J}),u.add(this),d.set(this,null);const U=(0,s.originalOrCamelOptions)(K),P=U.get("type");if(P&&P!==t.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${t.EXTERNAL_ACCOUNT_TYPE}" type but received "${K.type}"`);const Z=U.get("client_id"),ie=U.get("client_secret"),ue=(H=U.get("token_url"))!==null&&H!==void 0?H:w.replace("{universeDomain}",this.universeDomain),le=U.get("subject_token_type"),ne=U.get("workforce_pool_user_project"),ye=U.get("service_account_impersonation_url"),fe=U.get("service_account_impersonation"),Te=(0,s.originalOrCamelOptions)(fe).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(U.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),Z&&(this.clientAuth={confidentialClientType:"basic",clientId:Z,clientSecret:ie}),this.stsCredential=new o.StsCredentials(ue,this.clientAuth),this.scopes=U.get("scopes")||[E],this.cachedAccessToken=null,this.audience=U.get("audience"),this.subjectTokenType=le,this.workforcePoolUserProject=ne;const Ae=new RegExp(A);if(this.workforcePoolUserProject&&!this.audience.match(Ae))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=ye,this.serviceAccountImpersonationLifetime=Te,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=y),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){var K;if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);const H=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((K=H?.groups)===null||K===void 0?void 0:K.email)||null}return null}setCredentials(K){super.setCredentials(K),this.cachedAccessToken=K}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){const J={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(J)}request(K,J){if(J)this.requestAsync(K).then(H=>J(null,H),H=>J(H,H.response));else return this.requestAsync(K)}async getProjectId(){const K=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(K){const J=await this.getRequestHeaders(),H=await this.transporter.request({...S.RETRY_CONFIG,headers:J,url:`${this.cloudResourceManagerURL.toString()}${K}`,responseType:"json"});return this.projectId=H.data.projectId,this.projectId}return null}async requestAsync(K,J=!1){let H;try{const U=await this.getRequestHeaders();K.headers=K.headers||{},U&&U["x-goog-user-project"]&&(K.headers["x-goog-user-project"]=U["x-goog-user-project"]),U&&U.Authorization&&(K.headers.Authorization=U.Authorization),H=await this.transporter.request(K)}catch(U){const P=U.response;if(P){const Z=P.status,ie=P.config.data instanceof c.Readable;if(!J&&(Z===401||Z===403)&&!ie&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(K,!0)}throw U}return H}async refreshAccessTokenAsync(){r(this,d,e(this,d,"f")||e(this,u,"m",m).call(this),"f");try{return await e(this,d,"f")}finally{r(this,d,null,"f")}}getProjectNumber(K){const J=K.match(/\/projects\/([^/]+)/);return J?J[1]:null}async getImpersonatedAccessToken(K){const J={...S.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"},responseType:"json"},H=await this.transporter.request(J),U=H.data;return{access_token:U.accessToken,expiry_date:new Date(U.expireTime).getTime(),res:H}}isExpired(K){const J=new Date().getTime();return K.expiry_date?J>=K.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:this.scopes||[E]}getMetricsHeaderValue(){const K=process.version.replace(/^v/,""),J=this.serviceAccountImpersonationUrl!==void 0,H=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${K} auth/${I.version} google-byoid-sdk source/${H} sa-impersonation/${J} config-lifetime/${this.configLifetimeRequested}`}}t.BaseExternalAccountClient=S,d=new WeakMap,u=new WeakSet,m=async function(){const K=await this.retrieveSubjectToken(),J={grantType:h,audience:this.audience,requestedTokenType:v,subjectToken:K,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[E]:this.getScopesArray()},H=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,U={"x-goog-api-client":this.getMetricsHeaderValue()},P=await this.stsCredential.exchangeToken(J,U,H);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(P.access_token):P.expires_in?this.cachedAccessToken={access_token:P.access_token,expiry_date:new Date().getTime()+P.expires_in*1e3,res:P.res}:this.cachedAccessToken={access_token:P.access_token,res:P.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}}(baseexternalclient)),baseexternalclient}var identitypoolclient={},filesubjecttokensupplier={},hasRequiredFilesubjecttokensupplier;function requireFilesubjecttokensupplier(){if(hasRequiredFilesubjecttokensupplier)return filesubjecttokensupplier;hasRequiredFilesubjecttokensupplier=1;var t,e,r;Object.defineProperty(filesubjecttokensupplier,"__esModule",{value:!0}),filesubjecttokensupplier.FileSubjectTokenSupplier=void 0;const u=require$$1$3,d=require$$1$3,m=(0,u.promisify)((t=d.readFile)!==null&&t!==void 0?t:()=>{}),c=(0,u.promisify)((e=d.realpath)!==null&&e!==void 0?e:()=>{}),a=(0,u.promisify)((r=d.lstat)!==null&&r!==void 0?r:()=>{});class o{constructor(h){this.filePath=h.filePath,this.formatType=h.formatType,this.subjectTokenFieldName=h.subjectTokenFieldName}async getSubjectToken(h){let v=this.filePath;try{if(v=await c(v),!(await a(v)).isFile())throw new Error}catch(A){throw A instanceof Error&&(A.message=`The file at ${v} does not exist, or it is not a file. ${A.message}`),A}let E;const y=await m(v,{encoding:"utf8"});if(this.formatType==="text"?E=y:this.formatType==="json"&&this.subjectTokenFieldName&&(E=JSON.parse(y)[this.subjectTokenFieldName]),!E)throw new Error("Unable to parse the subject_token from the credential_source file");return E}}return filesubjecttokensupplier.FileSubjectTokenSupplier=o,filesubjecttokensupplier}var urlsubjecttokensupplier={},hasRequiredUrlsubjecttokensupplier;function requireUrlsubjecttokensupplier(){if(hasRequiredUrlsubjecttokensupplier)return urlsubjecttokensupplier;hasRequiredUrlsubjecttokensupplier=1,Object.defineProperty(urlsubjecttokensupplier,"__esModule",{value:!0}),urlsubjecttokensupplier.UrlSubjectTokenSupplier=void 0;class t{constructor(r){this.url=r.url,this.formatType=r.formatType,this.subjectTokenFieldName=r.subjectTokenFieldName,this.headers=r.headers,this.additionalGaxiosOptions=r.additionalGaxiosOptions}async getSubjectToken(r){const u={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers,responseType:this.formatType};let d;if(this.formatType==="text"?d=(await r.transporter.request(u)).data:this.formatType==="json"&&this.subjectTokenFieldName&&(d=(await r.transporter.request(u)).data[this.subjectTokenFieldName]),!d)throw new Error("Unable to parse the subject_token from the credential_source URL");return d}}return urlsubjecttokensupplier.UrlSubjectTokenSupplier=t,urlsubjecttokensupplier}var hasRequiredIdentitypoolclient;function requireIdentitypoolclient(){if(hasRequiredIdentitypoolclient)return identitypoolclient;hasRequiredIdentitypoolclient=1,Object.defineProperty(identitypoolclient,"__esModule",{value:!0}),identitypoolclient.IdentityPoolClient=void 0;const t=requireBaseexternalclient(),e=requireUtil$8(),r=requireFilesubjecttokensupplier(),u=requireUrlsubjecttokensupplier();class d extends t.BaseExternalAccountClient{constructor(c,a){super(c,a);const o=(0,e.originalOrCamelOptions)(c),s=o.get("credential_source"),h=o.get("subject_token_supplier");if(!s&&!h)throw new Error("A credential source or subject token supplier must be specified.");if(s&&h)throw new Error("Only one of credential source or subject token supplier can be specified.");if(h)this.subjectTokenSupplier=h,this.credentialSourceType="programmatic";else{const v=(0,e.originalOrCamelOptions)(s),E=(0,e.originalOrCamelOptions)(v.get("format")),y=E.get("type")||"text",A=E.get("subject_token_field_name");if(y!=="json"&&y!=="text")throw new Error(`Invalid credential_source format "${y}"`);if(y==="json"&&!A)throw new Error("Missing subject_token_field_name for JSON credential_source format");const w=v.get("file"),I=v.get("url"),_=v.get("headers");if(w&&I)throw new Error('No valid Identity Pool "credential_source" provided, must be either file or url.');if(w&&!I)this.credentialSourceType="file",this.subjectTokenSupplier=new r.FileSubjectTokenSupplier({filePath:w,formatType:y,subjectTokenFieldName:A});else if(!w&&I)this.credentialSourceType="url",this.subjectTokenSupplier=new u.UrlSubjectTokenSupplier({url:I,formatType:y,subjectTokenFieldName:A,headers:_,additionalGaxiosOptions:d.RETRY_CONFIG});else throw new Error('No valid Identity Pool "credential_source" provided, must be either file or url.')}}async retrieveSubjectToken(){return this.subjectTokenSupplier.getSubjectToken(this.supplierContext)}}return identitypoolclient.IdentityPoolClient=d,identitypoolclient}var awsclient={},awsrequestsigner={},hasRequiredAwsrequestsigner;function requireAwsrequestsigner(){if(hasRequiredAwsrequestsigner)return awsrequestsigner;hasRequiredAwsrequestsigner=1,Object.defineProperty(awsrequestsigner,"__esModule",{value:!0}),awsrequestsigner.AwsRequestSigner=void 0;const t=requireCrypto(),e="AWS4-HMAC-SHA256",r="aws4_request";class u{constructor(o,s){this.getCredentials=o,this.region=s,this.crypto=(0,t.createCrypto)()}async getRequestOptions(o){if(!o.url)throw new Error('"url" is required in "amzOptions"');const s=typeof o.data=="object"?JSON.stringify(o.data):o.data,h=o.url,v=o.method||"GET",E=o.body||s,y=o.headers,A=await this.getCredentials(),w=new URL(h),I=await c({crypto:this.crypto,host:w.host,canonicalUri:w.pathname,canonicalQuerystring:w.search.substr(1),method:v,region:this.region,securityCredentials:A,requestPayload:E,additionalAmzHeaders:y}),_=Object.assign(I.amzDate?{"x-amz-date":I.amzDate}:{},{Authorization:I.authorizationHeader,host:w.host},y||{});A.token&&Object.assign(_,{"x-amz-security-token":A.token});const S={url:h,method:v,headers:_};return typeof E<"u"&&(S.body=E),S}}awsrequestsigner.AwsRequestSigner=u;async function d(a,o,s){return await a.signWithHmacSha256(o,s)}async function m(a,o,s,h,v){const E=await d(a,`AWS4${o}`,s),y=await d(a,E,h),A=await d(a,y,v);return await d(a,A,"aws4_request")}async function c(a){const o=a.additionalAmzHeaders||{},s=a.requestPayload||"",h=a.host.split(".")[0],v=new Date,E=v.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),y=v.toISOString().replace(/[-]/g,"").replace(/T.*/,""),A={};Object.keys(o).forEach(ie=>{A[ie.toLowerCase()]=o[ie]}),a.securityCredentials.token&&(A["x-amz-security-token"]=a.securityCredentials.token);const w=Object.assign({host:a.host},A.date?{}:{"x-amz-date":E},A);let I="";const _=Object.keys(w).sort();_.forEach(ie=>{I+=`${ie}:${w[ie]}
`});const S=_.join(";"),j=await a.crypto.sha256DigestHex(s),K=`${a.method}
${a.canonicalUri}
${a.canonicalQuerystring}
${I}
${S}
${j}`,J=`${y}/${a.region}/${h}/${r}`,H=`${e}
${E}
${J}
`+await a.crypto.sha256DigestHex(K),U=await m(a.crypto,a.securityCredentials.secretAccessKey,y,a.region,h),P=await d(a.crypto,U,H),Z=`${e} Credential=${a.securityCredentials.accessKeyId}/${J}, SignedHeaders=${S}, Signature=${(0,t.fromArrayBufferToHex)(P)}`;return{amzDate:A.date?void 0:E,authorizationHeader:Z,canonicalQuerystring:a.canonicalQuerystring}}return awsrequestsigner}var defaultawssecuritycredentialssupplier={},hasRequiredDefaultawssecuritycredentialssupplier;function requireDefaultawssecuritycredentialssupplier(){if(hasRequiredDefaultawssecuritycredentialssupplier)return defaultawssecuritycredentialssupplier;hasRequiredDefaultawssecuritycredentialssupplier=1;var t={},e=defaultawssecuritycredentialssupplier&&defaultawssecuritycredentialssupplier.__classPrivateFieldGet||function(s,h,v,E){if(v==="a"&&!E)throw new TypeError("Private accessor was defined without a getter");if(typeof h=="function"?s!==h||!E:!h.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return v==="m"?E:v==="a"?E.call(s):E?E.value:h.get(s)},r,u,d,m,c,a;Object.defineProperty(defaultawssecuritycredentialssupplier,"__esModule",{value:!0}),defaultawssecuritycredentialssupplier.DefaultAwsSecurityCredentialsSupplier=void 0;class o{constructor(h){r.add(this),this.regionUrl=h.regionUrl,this.securityCredentialsUrl=h.securityCredentialsUrl,this.imdsV2SessionTokenUrl=h.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=h.additionalGaxiosOptions}async getAwsRegion(h){if(e(this,r,"a",c))return e(this,r,"a",c);const v={};if(!e(this,r,"a",c)&&this.imdsV2SessionTokenUrl&&(v["x-aws-ec2-metadata-token"]=await e(this,r,"m",u).call(this,h.transporter)),!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');const E={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",responseType:"text",headers:v},y=await h.transporter.request(E);return y.data.substr(0,y.data.length-1)}async getAwsSecurityCredentials(h){if(e(this,r,"a",a))return e(this,r,"a",a);const v={};this.imdsV2SessionTokenUrl&&(v["x-aws-ec2-metadata-token"]=await e(this,r,"m",u).call(this,h.transporter));const E=await e(this,r,"m",d).call(this,v,h.transporter),y=await e(this,r,"m",m).call(this,E,v,h.transporter);return{accessKeyId:y.AccessKeyId,secretAccessKey:y.SecretAccessKey,token:y.Token}}}return defaultawssecuritycredentialssupplier.DefaultAwsSecurityCredentialsSupplier=o,r=new WeakSet,u=async function(h){const v={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(await h.request(v)).data},d=async function(h,v){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');const E={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:h};return(await v.request(E)).data},m=async function(h,v,E){return(await E.request({...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${h}`,responseType:"json",headers:v})).data},c=function(){return t.AWS_REGION||t.AWS_DEFAULT_REGION||null},a=function(){return t.AWS_ACCESS_KEY_ID&&t.AWS_SECRET_ACCESS_KEY?{accessKeyId:t.AWS_ACCESS_KEY_ID,secretAccessKey:t.AWS_SECRET_ACCESS_KEY,token:t.AWS_SESSION_TOKEN}:null},defaultawssecuritycredentialssupplier}var hasRequiredAwsclient;function requireAwsclient(){if(hasRequiredAwsclient)return awsclient;hasRequiredAwsclient=1;var t=awsclient&&awsclient.__classPrivateFieldGet||function(o,s,h,v){if(h==="a"&&!v)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?o!==s||!v:!s.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return h==="m"?v:h==="a"?v.call(o):v?v.value:s.get(o)},e,r;Object.defineProperty(awsclient,"__esModule",{value:!0}),awsclient.AwsClient=void 0;const u=requireAwsrequestsigner(),d=requireBaseexternalclient(),m=requireDefaultawssecuritycredentialssupplier(),c=requireUtil$8();class a extends d.BaseExternalAccountClient{constructor(s,h){super(s,h);const v=(0,c.originalOrCamelOptions)(s),E=v.get("credential_source"),y=v.get("aws_security_credentials_supplier");if(!E&&!y)throw new Error("A credential source or AWS security credentials supplier must be specified.");if(E&&y)throw new Error("Only one of credential source or AWS security credentials supplier can be specified.");if(y)this.awsSecurityCredentialsSupplier=y,this.regionalCredVerificationUrl=t(e,e,"f",r),this.credentialSourceType="programmatic";else{const A=(0,c.originalOrCamelOptions)(E);this.environmentId=A.get("environment_id");const w=A.get("region_url"),I=A.get("url"),_=A.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new m.DefaultAwsSecurityCredentialsSupplier({regionUrl:w,securityCredentialsUrl:I,imdsV2SessionTokenUrl:_}),this.regionalCredVerificationUrl=A.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){var s;const h=(s=this.environmentId)===null||s===void 0?void 0:s.match(/^(aws)(\d+)$/);if(!h||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(h[2],10)!==1)throw new Error(`aws version "${h[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new u.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));const s=await this.awsRequestSigner.getRequestOptions({...e.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),h=[],v=Object.assign({"x-goog-cloud-target-resource":this.audience},s.headers);for(const E in v)h.push({key:E,value:v[E]});return encodeURIComponent(JSON.stringify({url:s.url,method:s.method,headers:h}))}}return awsclient.AwsClient=a,e=a,r={value:"https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15"},a.AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254",a.AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254",awsclient}var pluggableAuthClient={},executableResponse={},hasRequiredExecutableResponse;function requireExecutableResponse(){if(hasRequiredExecutableResponse)return executableResponse;hasRequiredExecutableResponse=1,Object.defineProperty(executableResponse,"__esModule",{value:!0}),executableResponse.InvalidSubjectTokenError=executableResponse.InvalidMessageFieldError=executableResponse.InvalidCodeFieldError=executableResponse.InvalidTokenTypeFieldError=executableResponse.InvalidExpirationTimeFieldError=executableResponse.InvalidSuccessFieldError=executableResponse.InvalidVersionFieldError=executableResponse.ExecutableResponseError=executableResponse.ExecutableResponse=void 0;const t="urn:ietf:params:oauth:token-type:saml2",e="urn:ietf:params:oauth:token-type:id_token",r="urn:ietf:params:oauth:token-type:jwt";class u{constructor(y){if(!y.version)throw new m("Executable response must contain a 'version' field.");if(y.success===void 0)throw new c("Executable response must contain a 'success' field.");if(this.version=y.version,this.success=y.success,this.success){if(this.expirationTime=y.expiration_time,this.tokenType=y.token_type,this.tokenType!==t&&this.tokenType!==e&&this.tokenType!==r)throw new o(`Executable response must contain a 'token_type' field when successful and it must be one of ${e}, ${r}, or ${t}.`);if(this.tokenType===t){if(!y.saml_response)throw new v(`Executable response must contain a 'saml_response' field when token_type=${t}.`);this.subjectToken=y.saml_response}else{if(!y.id_token)throw new v(`Executable response must contain a 'id_token' field when token_type=${e} or ${r}.`);this.subjectToken=y.id_token}}else{if(!y.code)throw new s("Executable response must contain a 'code' field when unsuccessful.");if(!y.message)throw new h("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=y.code,this.errorMessage=y.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}}executableResponse.ExecutableResponse=u;class d extends Error{constructor(y){super(y),Object.setPrototypeOf(this,new.target.prototype)}}executableResponse.ExecutableResponseError=d;class m extends d{}executableResponse.InvalidVersionFieldError=m;class c extends d{}executableResponse.InvalidSuccessFieldError=c;class a extends d{}executableResponse.InvalidExpirationTimeFieldError=a;class o extends d{}executableResponse.InvalidTokenTypeFieldError=o;class s extends d{}executableResponse.InvalidCodeFieldError=s;class h extends d{}executableResponse.InvalidMessageFieldError=h;class v extends d{}return executableResponse.InvalidSubjectTokenError=v,executableResponse}var pluggableAuthHandler={},hasRequiredPluggableAuthHandler;function requirePluggableAuthHandler(){if(hasRequiredPluggableAuthHandler)return pluggableAuthHandler;hasRequiredPluggableAuthHandler=1;var t={};Object.defineProperty(pluggableAuthHandler,"__esModule",{value:!0}),pluggableAuthHandler.PluggableAuthHandler=void 0;const e=requirePluggableAuthClient(),r=requireExecutableResponse(),u=require$$1$3,d=require$$1$3;class m{constructor(a){if(!a.command)throw new Error("No command provided.");if(this.commandComponents=m.parseCommand(a.command),this.timeoutMillis=a.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=a.outputFile}retrieveResponseFromExecutable(a){return new Promise((o,s)=>{const h=u.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...t,...Object.fromEntries(a)}});let v="";h.stdout.on("data",y=>{v+=y}),h.stderr.on("data",y=>{v+=y});const E=setTimeout(()=>(h.removeAllListeners(),h.kill(),s(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);h.on("close",y=>{if(clearTimeout(E),y===0)try{const A=JSON.parse(v),w=new r.ExecutableResponse(A);return o(w)}catch(A){return A instanceof r.ExecutableResponseError?s(A):s(new r.ExecutableResponseError(`The executable returned an invalid response: ${v}`))}else return s(new e.ExecutableError(v,y.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let a;try{a=await d.promises.realpath(this.outputFile)}catch{return}if(!(await d.promises.lstat(a)).isFile())return;const o=await d.promises.readFile(a,{encoding:"utf8"});if(o!=="")try{const s=JSON.parse(o);return new r.ExecutableResponse(s).isValid()?new r.ExecutableResponse(s):void 0}catch(s){throw s instanceof r.ExecutableResponseError?s:new r.ExecutableResponseError(`The output file contained an invalid response: ${o}`)}}static parseCommand(a){const o=a.match(/(?:[^\s"]+|"[^"]*")+/g);if(!o)throw new Error(`Provided command: "${a}" could not be parsed.`);for(let s=0;s<o.length;s++)o[s][0]==='"'&&o[s].slice(-1)==='"'&&(o[s]=o[s].slice(1,-1));return o}}return pluggableAuthHandler.PluggableAuthHandler=m,pluggableAuthHandler}var hasRequiredPluggableAuthClient;function requirePluggableAuthClient(){if(hasRequiredPluggableAuthClient)return pluggableAuthClient;hasRequiredPluggableAuthClient=1;var t={};Object.defineProperty(pluggableAuthClient,"__esModule",{value:!0}),pluggableAuthClient.PluggableAuthClient=pluggableAuthClient.ExecutableError=void 0;const e=requireBaseexternalclient(),r=requireExecutableResponse(),u=requirePluggableAuthHandler();class d extends Error{constructor(E,y){super(`The executable failed with exit code: ${y} and error message: ${E}.`),this.code=y,Object.setPrototypeOf(this,new.target.prototype)}}pluggableAuthClient.ExecutableError=d;const m=30*1e3,c=5*1e3,a=120*1e3,o="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",s=1;class h extends e.BaseExternalAccountClient{constructor(E,y){if(super(E,y),!E.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=E.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(E.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=m;else if(this.timeoutMillis=E.credential_source.executable.timeout_millis,this.timeoutMillis<c||this.timeoutMillis>a)throw new Error(`Timeout must be between ${c} and ${a} milliseconds.`);this.outputFile=E.credential_source.executable.output_file,this.handler=new u.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(t[o]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let E;if(this.outputFile&&(E=await this.handler.retrieveCachedResponse()),!E){const y=new Map;y.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),y.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),y.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&y.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);const A=this.getServiceAccountEmail();A&&y.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",A),E=await this.handler.retrieveResponseFromExecutable(y)}if(E.version>s)throw new Error(`Version of executable is not currently supported, maximum supported version is ${s}.`);if(!E.success)throw new d(E.errorMessage,E.errorCode);if(this.outputFile&&!E.expirationTime)throw new r.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(E.isExpired())throw new Error("Executable response is expired.");return E.subjectToken}}return pluggableAuthClient.PluggableAuthClient=h,pluggableAuthClient}var hasRequiredExternalclient;function requireExternalclient(){if(hasRequiredExternalclient)return externalclient;hasRequiredExternalclient=1,Object.defineProperty(externalclient,"__esModule",{value:!0}),externalclient.ExternalAccountClient=void 0;const t=requireBaseexternalclient(),e=requireIdentitypoolclient(),r=requireAwsclient(),u=requirePluggableAuthClient();class d{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(c,a){var o,s;return c&&c.type===t.EXTERNAL_ACCOUNT_TYPE?!((o=c.credential_source)===null||o===void 0)&&o.environment_id?new r.AwsClient(c,a):!((s=c.credential_source)===null||s===void 0)&&s.executable?new u.PluggableAuthClient(c,a):new e.IdentityPoolClient(c,a):null}}return externalclient.ExternalAccountClient=d,externalclient}var externalAccountAuthorizedUserClient={},hasRequiredExternalAccountAuthorizedUserClient;function requireExternalAccountAuthorizedUserClient(){if(hasRequiredExternalAccountAuthorizedUserClient)return externalAccountAuthorizedUserClient;hasRequiredExternalAccountAuthorizedUserClient=1,Object.defineProperty(externalAccountAuthorizedUserClient,"__esModule",{value:!0}),externalAccountAuthorizedUserClient.ExternalAccountAuthorizedUserClient=externalAccountAuthorizedUserClient.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;const t=requireAuthclient(),e=requireOauth2common(),r=requireSrc$f(),u=require$$1$3,d=requireBaseexternalclient();externalAccountAuthorizedUserClient.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";const m="https://sts.{universeDomain}/v1/oauthtoken";class c extends e.OAuthClientAuthHandler{constructor(s,h,v){super(v),this.url=s,this.transporter=h}async refreshToken(s,h){const v=new URLSearchParams({grant_type:"refresh_token",refresh_token:s}),E={"Content-Type":"application/x-www-form-urlencoded",...h},y={...c.RETRY_CONFIG,url:this.url,method:"POST",headers:E,data:v.toString(),responseType:"json"};this.applyClientAuthenticationOptions(y);try{const A=await this.transporter.request(y),w=A.data;return w.res=A,w}catch(A){throw A instanceof r.GaxiosError&&A.response?(0,e.getErrorFromOAuthErrorResponse)(A.response.data,A):A}}}class a extends t.AuthClient{constructor(s,h){var v;super({...s,...h}),s.universe_domain&&(this.universeDomain=s.universe_domain),this.refreshToken=s.refresh_token;const E={confidentialClientType:"basic",clientId:s.client_id,clientSecret:s.client_secret};this.externalAccountAuthorizedUserHandler=new c((v=s.token_url)!==null&&v!==void 0?v:m.replace("{universeDomain}",this.universeDomain),this.transporter,E),this.cachedAccessToken=null,this.quotaProjectId=s.quota_project_id,typeof h?.eagerRefreshThresholdMillis!="number"?this.eagerRefreshThresholdMillis=d.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=h.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!h?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){const h={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(h)}request(s,h){if(h)this.requestAsync(s).then(v=>h(null,v),v=>h(v,v.response));else return this.requestAsync(s)}async requestAsync(s,h=!1){let v;try{const E=await this.getRequestHeaders();s.headers=s.headers||{},E&&E["x-goog-user-project"]&&(s.headers["x-goog-user-project"]=E["x-goog-user-project"]),E&&E.Authorization&&(s.headers.Authorization=E.Authorization),v=await this.transporter.request(s)}catch(E){const y=E.response;if(y){const A=y.status,w=y.config.data instanceof u.Readable;if(!h&&(A===401||A===403)&&!w&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(s,!0)}throw E}return v}async refreshAccessTokenAsync(){const s=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:s.access_token,expiry_date:new Date().getTime()+s.expires_in*1e3,res:s.res},s.refresh_token!==void 0&&(this.refreshToken=s.refresh_token),this.cachedAccessToken}isExpired(s){const h=new Date().getTime();return s.expiry_date?h>=s.expiry_date-this.eagerRefreshThresholdMillis:!1}}return externalAccountAuthorizedUserClient.ExternalAccountAuthorizedUserClient=a,externalAccountAuthorizedUserClient}var hasRequiredGoogleauth;function requireGoogleauth(){return hasRequiredGoogleauth||(hasRequiredGoogleauth=1,function(t){var e={},r=googleauth&&googleauth.__classPrivateFieldGet||function(ue,le,ne,ye){if(ne==="a"&&!ye)throw new TypeError("Private accessor was defined without a getter");if(typeof le=="function"?ue!==le||!ye:!le.has(ue))throw new TypeError("Cannot read private member from an object whose class did not declare it");return ne==="m"?ye:ne==="a"?ye.call(ue):ye?ye.value:le.get(ue)},u=googleauth&&googleauth.__classPrivateFieldSet||function(ue,le,ne,ye,fe){if(ye==="m")throw new TypeError("Private method is not writable");if(ye==="a"&&!fe)throw new TypeError("Private accessor was defined without a setter");if(typeof le=="function"?ue!==le||!fe:!le.has(ue))throw new TypeError("Cannot write private member to an object whose class did not declare it");return ye==="a"?fe.call(ue,ne):fe?fe.value=ne:le.set(ue,ne),ne},d,m,c,a;Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleAuth=t.GoogleAuthExceptionMessages=t.CLOUD_SDK_CLIENT_ID=void 0;const o=require$$1$3,s=require$$1$3,h=requireSrc$d(),v=require$$1$3,E=require$$1$3,y=requireCrypto(),A=requireTransporters(),w=requireComputeclient(),I=requireIdtokenclient(),_=requireEnvDetect(),S=requireJwtclient(),j=requireRefreshclient(),K=requireImpersonated(),J=requireExternalclient(),H=requireBaseexternalclient(),U=requireAuthclient(),P=requireExternalAccountAuthorizedUserClient(),Z=requireUtil$8();t.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com",t.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};class ie{get isGCE(){return this.checkIsGCE}constructor(le={}){if(d.add(this),this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,m.set(this,null),this.clientOptions={},this._cachedProjectId=le.projectId||null,this.cachedCredential=le.authClient||null,this.keyFilename=le.keyFilename||le.keyFile,this.scopes=le.scopes,this.clientOptions=le.clientOptions||{},this.jsonContent=le.credentials||null,this.apiKey=le.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw new RangeError(t.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);le.universeDomain&&(this.clientOptions.universeDomain=le.universeDomain)}setGapicJWTValues(le){le.defaultServicePath=this.defaultServicePath,le.useJWTAccessWithScope=this.useJWTAccessWithScope,le.defaultScopes=this.defaultScopes}getProjectId(le){if(le)this.getProjectIdAsync().then(ne=>le(null,ne),le);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(le){if(le instanceof Error&&le.message===t.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw le}}async findAndCacheProjectId(){let le=null;if(le||(le=await this.getProductionProjectId()),le||(le=await this.getFileProjectId()),le||(le=await this.getDefaultServiceProjectId()),le||(le=await this.getGCEProjectId()),le||(le=await this.getExternalAccountClientProjectId()),le)return this._cachedProjectId=le,le;throw new Error(t.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){var le;let ne;try{ne=await h.universe("universe-domain"),ne||(ne=U.DEFAULT_UNIVERSE)}catch(ye){if(ye&&((le=ye?.response)===null||le===void 0?void 0:le.status)===404)ne=U.DEFAULT_UNIVERSE;else throw ye}return ne}async getUniverseDomain(){let le=(0,Z.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{le??(le=(await this.getClient()).universeDomain)}catch{le??(le=U.DEFAULT_UNIVERSE)}return le}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(le={},ne){let ye;if(typeof le=="function"?ne=le:ye=le,ne)this.getApplicationDefaultAsync(ye).then(fe=>ne(null,fe.credential,fe.projectId),ne);else return this.getApplicationDefaultAsync(ye)}async getApplicationDefaultAsync(le={}){if(this.cachedCredential)return await r(this,d,"m",c).call(this,this.cachedCredential,null);let ne;if(ne=await this._tryGetApplicationCredentialsFromEnvironmentVariable(le),ne)return ne instanceof S.JWT?ne.scopes=this.scopes:ne instanceof H.BaseExternalAccountClient&&(ne.scopes=this.getAnyScopes()),await r(this,d,"m",c).call(this,ne);if(ne=await this._tryGetApplicationCredentialsFromWellKnownFile(le),ne)return ne instanceof S.JWT?ne.scopes=this.scopes:ne instanceof H.BaseExternalAccountClient&&(ne.scopes=this.getAnyScopes()),await r(this,d,"m",c).call(this,ne);if(await this._checkIsGCE())return le.scopes=this.getAnyScopes(),await r(this,d,"m",c).call(this,new w.Compute(le));throw new Error(t.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=h.getGCPResidency()||await h.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(le){const ne=e.GOOGLE_APPLICATION_CREDENTIALS||e.google_application_credentials;if(!ne||ne.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(ne,le)}catch(ye){throw ye instanceof Error&&(ye.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${ye.message}`),ye}}async _tryGetApplicationCredentialsFromWellKnownFile(le){let ne=null;if(this._isWindows())ne=e.APPDATA;else{const fe=e.HOME;fe&&(ne=E.join(fe,".config"))}return ne&&(ne=E.join(ne,"gcloud","application_default_credentials.json"),s.existsSync(ne)||(ne=null)),ne?await this._getApplicationCredentialsFromFilePath(ne,le):null}async _getApplicationCredentialsFromFilePath(le,ne={}){if(!le||le.length===0)throw new Error("The file path is invalid.");try{if(le=s.realpathSync(le),!s.lstatSync(le).isFile())throw new Error}catch(fe){throw fe instanceof Error&&(fe.message=`The file at ${le} does not exist, or it is not a file. ${fe.message}`),fe}const ye=s.createReadStream(le);return this.fromStream(ye,ne)}fromImpersonatedJSON(le){var ne,ye,fe,Te;if(!le)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(le.type!==K.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${K.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!le.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!le.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");const Ae=this.fromJSON(le.source_credentials);if(((ne=le.service_account_impersonation_url)===null||ne===void 0?void 0:ne.length)>256)throw new RangeError(`Target principal is too long: ${le.service_account_impersonation_url}`);const Se=(fe=(ye=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(le.service_account_impersonation_url))===null||ye===void 0?void 0:ye.groups)===null||fe===void 0?void 0:fe.target;if(!Se)throw new RangeError(`Cannot extract target principal from ${le.service_account_impersonation_url}`);const be=(Te=this.getAnyScopes())!==null&&Te!==void 0?Te:[];return new K.Impersonated({...le,sourceClient:Ae,targetPrincipal:Se,targetScopes:Array.isArray(be)?be:[be]})}fromJSON(le,ne={}){let ye;const fe=(0,Z.originalOrCamelOptions)(ne).get("universe_domain");return le.type===j.USER_REFRESH_ACCOUNT_TYPE?(ye=new j.UserRefreshClient(ne),ye.fromJSON(le)):le.type===K.IMPERSONATED_ACCOUNT_TYPE?ye=this.fromImpersonatedJSON(le):le.type===H.EXTERNAL_ACCOUNT_TYPE?(ye=J.ExternalAccountClient.fromJSON(le,ne),ye.scopes=this.getAnyScopes()):le.type===P.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?ye=new P.ExternalAccountAuthorizedUserClient(le,ne):(ne.scopes=this.scopes,ye=new S.JWT(ne),this.setGapicJWTValues(ye),ye.fromJSON(le)),fe&&(ye.universeDomain=fe),ye}_cacheClientFromJSON(le,ne){const ye=this.fromJSON(le,ne);return this.jsonContent=le,this.cachedCredential=ye,ye}fromStream(le,ne={},ye){let fe={};if(typeof ne=="function"?ye=ne:fe=ne,ye)this.fromStreamAsync(le,fe).then(Te=>ye(null,Te),ye);else return this.fromStreamAsync(le,fe)}fromStreamAsync(le,ne){return new Promise((ye,fe)=>{if(!le)throw new Error("Must pass in a stream containing the Google auth settings.");const Te=[];le.setEncoding("utf8").on("error",fe).on("data",Ae=>Te.push(Ae)).on("end",()=>{try{try{const Ae=JSON.parse(Te.join("")),Se=this._cacheClientFromJSON(Ae,ne);return ye(Se)}catch(Ae){if(!this.keyFilename)throw Ae;const Se=new S.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=Se,this.setGapicJWTValues(Se),ye(Se)}}catch(Ae){return fe(Ae)}})})}fromAPIKey(le,ne={}){return new S.JWT({...ne,apiKey:le})}_isWindows(){const le=v.platform();return!!(le&&le.length>=3&&le.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(le=>{(0,o.exec)("gcloud config config-helper --format json",(ne,ye)=>{if(!ne&&ye)try{const fe=JSON.parse(ye).configuration.properties.core.project;le(fe);return}catch{}le(null)})})}getProductionProjectId(){return e.GCLOUD_PROJECT||e.GOOGLE_CLOUD_PROJECT||e.gcloud_project||e.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){const ne=await this.getClient();if(ne&&ne.projectId)return ne.projectId}const le=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return le?le.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==H.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await h.project("project-id")}catch{return null}}getCredentials(le){if(le)this.getCredentialsAsync().then(ne=>le(null,ne),le);else return this.getCredentialsAsync()}async getCredentialsAsync(){const le=await this.getClient();if(le instanceof K.Impersonated)return{client_email:le.getTargetPrincipal()};if(le instanceof H.BaseExternalAccountClient){const ne=le.getServiceAccountEmail();if(ne)return{client_email:ne,universe_domain:le.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){const[ne,ye]=await Promise.all([h.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:ne,universe_domain:ye}}throw new Error(t.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;u(this,m,r(this,m,"f")||r(this,d,"m",a).call(this),"f");try{return await r(this,m,"f")}finally{u(this,m,null,"f")}}async getIdTokenClient(le){const ne=await this.getClient();if(!("fetchIdToken"in ne))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new I.IdTokenClient({targetAudience:le,idTokenProvider:ne})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(le){return(await this.getClient()).getRequestHeaders(le)}async authorizeRequest(le){le=le||{};const ne=le.url||le.uri,fe=await(await this.getClient()).getRequestHeaders(ne);return le.headers=Object.assign(le.headers||{},fe),le}async request(le){return(await this.getClient()).request(le)}getEnv(){return(0,_.getEnv)()}async sign(le,ne){const ye=await this.getClient(),fe=await this.getUniverseDomain();if(ne=ne||`https://iamcredentials.${fe}/v1/projects/-/serviceAccounts/`,ye instanceof K.Impersonated)return(await ye.sign(le)).signedBlob;const Te=(0,y.createCrypto)();if(ye instanceof S.JWT&&ye.key)return await Te.sign(ye.key,le);const Ae=await this.getCredentials();if(!Ae.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(Te,Ae.client_email,le,ne)}async signBlob(le,ne,ye,fe){const Te=new URL(fe+`${ne}:signBlob`);return(await this.request({method:"POST",url:Te.href,data:{payload:le.encodeBase64StringUtf8(ye)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}t.GoogleAuth=ie,m=new WeakMap,d=new WeakSet,c=async function(le,ne=e.GOOGLE_CLOUD_QUOTA_PROJECT||null){const ye=await this.getProjectIdOptional();return ne&&(le.quotaProjectId=ne),this.cachedCredential=le,{credential:le,projectId:ye}},a=async function(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){const le=E.resolve(this.keyFilename),ne=s.createReadStream(le);return await this.fromStreamAsync(ne,this.clientOptions)}else if(this.apiKey){const le=await this.fromAPIKey(this.apiKey,this.clientOptions);le.scopes=this.scopes;const{credential:ne}=await r(this,d,"m",c).call(this,le);return ne}else{const{credential:le}=await this.getApplicationDefaultAsync(this.clientOptions);return le}},ie.DefaultTransporter=A.DefaultTransporter}(googleauth)),googleauth}var iam$1={},hasRequiredIam$1;function requireIam$1(){if(hasRequiredIam$1)return iam$1;hasRequiredIam$1=1,Object.defineProperty(iam$1,"__esModule",{value:!0}),iam$1.IAMAuth=void 0;class t{constructor(r,u){this.selector=r,this.token=u,this.selector=r,this.token=u}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}return iam$1.IAMAuth=t,iam$1}var downscopedclient={},hasRequiredDownscopedclient;function requireDownscopedclient(){return hasRequiredDownscopedclient||(hasRequiredDownscopedclient=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DownscopedClient=t.EXPIRATION_TIME_OFFSET=t.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;const e=require$$1$3,r=requireAuthclient(),u=requireStscredentials(),d="urn:ietf:params:oauth:grant-type:token-exchange",m="urn:ietf:params:oauth:token-type:access_token",c="urn:ietf:params:oauth:token-type:access_token";t.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,t.EXPIRATION_TIME_OFFSET=5*60*1e3;class a extends r.AuthClient{constructor(s,h,v,E){if(super({...v,quotaProjectId:E}),this.authClient=s,this.credentialAccessBoundary=h,h.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(h.accessBoundary.accessBoundaryRules.length>t.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${t.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(const y of h.accessBoundary.accessBoundaryRules)if(y.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new u.StsCredentials(`https://sts.${this.universeDomain}/v1/token`),this.cachedDownscopedAccessToken=null}setCredentials(s){if(!s.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(s),this.cachedDownscopedAccessToken=s}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){const h={Authorization:`Bearer ${(await this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(h)}request(s,h){if(h)this.requestAsync(s).then(v=>h(null,v),v=>h(v,v.response));else return this.requestAsync(s)}async requestAsync(s,h=!1){let v;try{const E=await this.getRequestHeaders();s.headers=s.headers||{},E&&E["x-goog-user-project"]&&(s.headers["x-goog-user-project"]=E["x-goog-user-project"]),E&&E.Authorization&&(s.headers.Authorization=E.Authorization),v=await this.transporter.request(s)}catch(E){const y=E.response;if(y){const A=y.status,w=y.config.data instanceof e.Readable;if(!h&&(A===401||A===403)&&!w&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(s,!0)}throw E}return v}async refreshAccessTokenAsync(){var s;const h=(await this.authClient.getAccessToken()).token,v={grantType:d,requestedTokenType:m,subjectToken:h,subjectTokenType:c},E=await this.stsCredential.exchangeToken(v,void 0,this.credentialAccessBoundary),y=((s=this.authClient.credentials)===null||s===void 0?void 0:s.expiry_date)||null,A=E.expires_in?new Date().getTime()+E.expires_in*1e3:y;return this.cachedDownscopedAccessToken={access_token:E.access_token,expiry_date:A,res:E.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(s){const h=new Date().getTime();return s.expiry_date?h>=s.expiry_date-this.eagerRefreshThresholdMillis:!1}}t.DownscopedClient=a}(downscopedclient)),downscopedclient}var passthrough={},hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1,Object.defineProperty(passthrough,"__esModule",{value:!0}),passthrough.PassThroughClient=void 0;const t=requireAuthclient();class e extends t.AuthClient{async request(d){return this.transporter.request(d)}async getAccessToken(){return{}}async getRequestHeaders(){return{}}}return passthrough.PassThroughClient=e,new e().getAccessToken(),passthrough}var hasRequiredSrc$b;function requireSrc$b(){return hasRequiredSrc$b||(hasRequiredSrc$b=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleAuth=t.auth=t.DefaultTransporter=t.PassThroughClient=t.ExecutableError=t.PluggableAuthClient=t.DownscopedClient=t.BaseExternalAccountClient=t.ExternalAccountClient=t.IdentityPoolClient=t.AwsRequestSigner=t.AwsClient=t.UserRefreshClient=t.LoginTicket=t.ClientAuthentication=t.OAuth2Client=t.CodeChallengeMethod=t.Impersonated=t.JWT=t.JWTAccess=t.IdTokenClient=t.IAMAuth=t.GCPEnv=t.Compute=t.DEFAULT_UNIVERSE=t.AuthClient=t.gaxios=t.gcpMetadata=void 0;const e=requireGoogleauth();Object.defineProperty(t,"GoogleAuth",{enumerable:!0,get:function(){return e.GoogleAuth}}),t.gcpMetadata=requireSrc$d(),t.gaxios=requireSrc$f();var r=requireAuthclient();Object.defineProperty(t,"AuthClient",{enumerable:!0,get:function(){return r.AuthClient}}),Object.defineProperty(t,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return r.DEFAULT_UNIVERSE}});var u=requireComputeclient();Object.defineProperty(t,"Compute",{enumerable:!0,get:function(){return u.Compute}});var d=requireEnvDetect();Object.defineProperty(t,"GCPEnv",{enumerable:!0,get:function(){return d.GCPEnv}});var m=requireIam$1();Object.defineProperty(t,"IAMAuth",{enumerable:!0,get:function(){return m.IAMAuth}});var c=requireIdtokenclient();Object.defineProperty(t,"IdTokenClient",{enumerable:!0,get:function(){return c.IdTokenClient}});var a=requireJwtaccess();Object.defineProperty(t,"JWTAccess",{enumerable:!0,get:function(){return a.JWTAccess}});var o=requireJwtclient();Object.defineProperty(t,"JWT",{enumerable:!0,get:function(){return o.JWT}});var s=requireImpersonated();Object.defineProperty(t,"Impersonated",{enumerable:!0,get:function(){return s.Impersonated}});var h=requireOauth2client();Object.defineProperty(t,"CodeChallengeMethod",{enumerable:!0,get:function(){return h.CodeChallengeMethod}}),Object.defineProperty(t,"OAuth2Client",{enumerable:!0,get:function(){return h.OAuth2Client}}),Object.defineProperty(t,"ClientAuthentication",{enumerable:!0,get:function(){return h.ClientAuthentication}});var v=requireLoginticket();Object.defineProperty(t,"LoginTicket",{enumerable:!0,get:function(){return v.LoginTicket}});var E=requireRefreshclient();Object.defineProperty(t,"UserRefreshClient",{enumerable:!0,get:function(){return E.UserRefreshClient}});var y=requireAwsclient();Object.defineProperty(t,"AwsClient",{enumerable:!0,get:function(){return y.AwsClient}});var A=requireAwsrequestsigner();Object.defineProperty(t,"AwsRequestSigner",{enumerable:!0,get:function(){return A.AwsRequestSigner}});var w=requireIdentitypoolclient();Object.defineProperty(t,"IdentityPoolClient",{enumerable:!0,get:function(){return w.IdentityPoolClient}});var I=requireExternalclient();Object.defineProperty(t,"ExternalAccountClient",{enumerable:!0,get:function(){return I.ExternalAccountClient}});var _=requireBaseexternalclient();Object.defineProperty(t,"BaseExternalAccountClient",{enumerable:!0,get:function(){return _.BaseExternalAccountClient}});var S=requireDownscopedclient();Object.defineProperty(t,"DownscopedClient",{enumerable:!0,get:function(){return S.DownscopedClient}});var j=requirePluggableAuthClient();Object.defineProperty(t,"PluggableAuthClient",{enumerable:!0,get:function(){return j.PluggableAuthClient}}),Object.defineProperty(t,"ExecutableError",{enumerable:!0,get:function(){return j.ExecutableError}});var K=requirePassthrough();Object.defineProperty(t,"PassThroughClient",{enumerable:!0,get:function(){return K.PassThroughClient}});var J=requireTransporters();Object.defineProperty(t,"DefaultTransporter",{enumerable:!0,get:function(){return J.DefaultTransporter}});const H=new e.GoogleAuth;t.auth=H}(src$f)),src$f}var forge,hasRequiredForge;function requireForge(){return hasRequiredForge||(hasRequiredForge=1,forge={options:{usePureJavaScript:!1}}),forge}var util$7={exports:{}},baseN,hasRequiredBaseN;function requireBaseN(){if(hasRequiredBaseN)return baseN;hasRequiredBaseN=1;var t={};baseN=t;var e={};t.encode=function(u,d,m){if(typeof d!="string")throw new TypeError('"alphabet" must be a string.');if(m!==void 0&&typeof m!="number")throw new TypeError('"maxline" must be a number.');var c="";if(!(u instanceof Uint8Array))c=r(u,d);else{var a=0,o=d.length,s=d.charAt(0),h=[0];for(a=0;a<u.length;++a){for(var v=0,E=u[a];v<h.length;++v)E+=h[v]<<8,h[v]=E%o,E=E/o|0;for(;E>0;)h.push(E%o),E=E/o|0}for(a=0;u[a]===0&&a<u.length-1;++a)c+=s;for(a=h.length-1;a>=0;--a)c+=d[h[a]]}if(m){var y=new RegExp(".{1,"+m+"}","g");c=c.match(y).join(`\r
`)}return c},t.decode=function(u,d){if(typeof u!="string")throw new TypeError('"input" must be a string.');if(typeof d!="string")throw new TypeError('"alphabet" must be a string.');var m=e[d];if(!m){m=e[d]=[];for(var c=0;c<d.length;++c)m[d.charCodeAt(c)]=c}u=u.replace(/\s/g,"");for(var a=d.length,o=d.charAt(0),s=[0],c=0;c<u.length;c++){var h=m[u.charCodeAt(c)];if(h===void 0)return;for(var v=0,E=h;v<s.length;++v)E+=s[v]*a,s[v]=E&255,E>>=8;for(;E>0;)s.push(E&255),E>>=8}for(var y=0;u[y]===o&&y<u.length-1;++y)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function r(u,d){var m=0,c=d.length,a=d.charAt(0),o=[0];for(m=0;m<u.length();++m){for(var s=0,h=u.at(m);s<o.length;++s)h+=o[s]<<8,o[s]=h%c,h=h/c|0;for(;h>0;)o.push(h%c),h=h/c|0}var v="";for(m=0;u.at(m)===0&&m<u.length()-1;++m)v+=a;for(m=o.length-1;m>=0;--m)v+=d[o[m]];return v}return baseN}var hasRequiredUtil$7;function requireUtil$7(){if(hasRequiredUtil$7)return util$7.exports;hasRequiredUtil$7=1;var t=requireForge(),e=requireBaseN(),r=util$7.exports=t.util=t.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){r.nextTick=process.nextTick,typeof setImmediate=="function"?r.setImmediate=setImmediate:r.setImmediate=r.nextTick;return}if(typeof setImmediate=="function"){r.setImmediate=function(){return setImmediate.apply(void 0,arguments)},r.nextTick=function(P){return setImmediate(P)};return}if(r.setImmediate=function(P){setTimeout(P,0)},typeof window<"u"&&typeof window.postMessage=="function"){let P=function(Z){if(Z.source===window&&Z.data===_){Z.stopPropagation();var ie=S.slice();S.length=0,ie.forEach(function(ue){ue()})}};var U=P,_="forge.setImmediate",S=[];r.setImmediate=function(Z){S.push(Z),S.length===1&&window.postMessage(_,"*")},window.addEventListener("message",P,!0)}if(typeof MutationObserver<"u"){var j=Date.now(),K=!0,J=document.createElement("div"),S=[];new MutationObserver(function(){var Z=S.slice();S.length=0,Z.forEach(function(ie){ie()})}).observe(J,{attributes:!0});var H=r.setImmediate;r.setImmediate=function(Z){Date.now()-j>15?(j=Date.now(),H(Z)):(S.push(Z),S.length===1&&J.setAttribute("a",K=!K))}}r.nextTick=r.setImmediate})(),r.isNodejs=typeof process<"u"&&process.versions&&process.versions.node,r.globalScope=function(){return r.isNodejs?commonjsGlobal$4:typeof self>"u"?window:self}(),r.isArray=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},r.isArrayBuffer=function(_){return typeof ArrayBuffer<"u"&&_ instanceof ArrayBuffer},r.isArrayBufferView=function(_){return _&&r.isArrayBuffer(_.buffer)&&_.byteLength!==void 0};function u(_){if(!(_===8||_===16||_===24||_===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+_)}r.ByteBuffer=d;function d(_){if(this.data="",this.read=0,typeof _=="string")this.data=_;else if(r.isArrayBuffer(_)||r.isArrayBufferView(_))if(typeof Buffer<"u"&&_ instanceof Buffer)this.data=_.toString("binary");else{var S=new Uint8Array(_);try{this.data=String.fromCharCode.apply(null,S)}catch{for(var j=0;j<S.length;++j)this.putByte(S[j])}}else(_ instanceof d||typeof _=="object"&&typeof _.data=="string"&&typeof _.read=="number")&&(this.data=_.data,this.read=_.read);this._constructedStringLength=0}r.ByteStringBuffer=d;var m=4096;r.ByteStringBuffer.prototype._optimizeConstructedString=function(_){this._constructedStringLength+=_,this._constructedStringLength>m&&(this.data.substr(0,1),this._constructedStringLength=0)},r.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},r.ByteStringBuffer.prototype.putByte=function(_){return this.putBytes(String.fromCharCode(_))},r.ByteStringBuffer.prototype.fillWithByte=function(_,S){_=String.fromCharCode(_);for(var j=this.data;S>0;)S&1&&(j+=_),S>>>=1,S>0&&(_+=_);return this.data=j,this._optimizeConstructedString(S),this},r.ByteStringBuffer.prototype.putBytes=function(_){return this.data+=_,this._optimizeConstructedString(_.length),this},r.ByteStringBuffer.prototype.putString=function(_){return this.putBytes(r.encodeUtf8(_))},r.ByteStringBuffer.prototype.putInt16=function(_){return this.putBytes(String.fromCharCode(_>>8&255)+String.fromCharCode(_&255))},r.ByteStringBuffer.prototype.putInt24=function(_){return this.putBytes(String.fromCharCode(_>>16&255)+String.fromCharCode(_>>8&255)+String.fromCharCode(_&255))},r.ByteStringBuffer.prototype.putInt32=function(_){return this.putBytes(String.fromCharCode(_>>24&255)+String.fromCharCode(_>>16&255)+String.fromCharCode(_>>8&255)+String.fromCharCode(_&255))},r.ByteStringBuffer.prototype.putInt16Le=function(_){return this.putBytes(String.fromCharCode(_&255)+String.fromCharCode(_>>8&255))},r.ByteStringBuffer.prototype.putInt24Le=function(_){return this.putBytes(String.fromCharCode(_&255)+String.fromCharCode(_>>8&255)+String.fromCharCode(_>>16&255))},r.ByteStringBuffer.prototype.putInt32Le=function(_){return this.putBytes(String.fromCharCode(_&255)+String.fromCharCode(_>>8&255)+String.fromCharCode(_>>16&255)+String.fromCharCode(_>>24&255))},r.ByteStringBuffer.prototype.putInt=function(_,S){u(S);var j="";do S-=8,j+=String.fromCharCode(_>>S&255);while(S>0);return this.putBytes(j)},r.ByteStringBuffer.prototype.putSignedInt=function(_,S){return _<0&&(_+=2<<S-1),this.putInt(_,S)},r.ByteStringBuffer.prototype.putBuffer=function(_){return this.putBytes(_.getBytes())},r.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},r.ByteStringBuffer.prototype.getInt16=function(){var _=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,_},r.ByteStringBuffer.prototype.getInt24=function(){var _=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,_},r.ByteStringBuffer.prototype.getInt32=function(){var _=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,_},r.ByteStringBuffer.prototype.getInt16Le=function(){var _=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,_},r.ByteStringBuffer.prototype.getInt24Le=function(){var _=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,_},r.ByteStringBuffer.prototype.getInt32Le=function(){var _=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,_},r.ByteStringBuffer.prototype.getInt=function(_){u(_);var S=0;do S=(S<<8)+this.data.charCodeAt(this.read++),_-=8;while(_>0);return S},r.ByteStringBuffer.prototype.getSignedInt=function(_){var S=this.getInt(_),j=2<<_-2;return S>=j&&(S-=j<<1),S},r.ByteStringBuffer.prototype.getBytes=function(_){var S;return _?(_=Math.min(this.length(),_),S=this.data.slice(this.read,this.read+_),this.read+=_):_===0?S="":(S=this.read===0?this.data:this.data.slice(this.read),this.clear()),S},r.ByteStringBuffer.prototype.bytes=function(_){return typeof _>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+_)},r.ByteStringBuffer.prototype.at=function(_){return this.data.charCodeAt(this.read+_)},r.ByteStringBuffer.prototype.setAt=function(_,S){return this.data=this.data.substr(0,this.read+_)+String.fromCharCode(S)+this.data.substr(this.read+_+1),this},r.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},r.ByteStringBuffer.prototype.copy=function(){var _=r.createBuffer(this.data);return _.read=this.read,_},r.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},r.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},r.ByteStringBuffer.prototype.truncate=function(_){var S=Math.max(0,this.length()-_);return this.data=this.data.substr(this.read,S),this.read=0,this},r.ByteStringBuffer.prototype.toHex=function(){for(var _="",S=this.read;S<this.data.length;++S){var j=this.data.charCodeAt(S);j<16&&(_+="0"),_+=j.toString(16)}return _},r.ByteStringBuffer.prototype.toString=function(){return r.decodeUtf8(this.bytes())};function c(_,S){S=S||{},this.read=S.readOffset||0,this.growSize=S.growSize||1024;var j=r.isArrayBuffer(_),K=r.isArrayBufferView(_);if(j||K){j?this.data=new DataView(_):this.data=new DataView(_.buffer,_.byteOffset,_.byteLength),this.write="writeOffset"in S?S.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,_!=null&&this.putBytes(_),"writeOffset"in S&&(this.write=S.writeOffset)}r.DataBuffer=c,r.DataBuffer.prototype.length=function(){return this.write-this.read},r.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},r.DataBuffer.prototype.accommodate=function(_,S){if(this.length()>=_)return this;S=Math.max(S||this.growSize,_);var j=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),K=new Uint8Array(this.length()+S);return K.set(j),this.data=new DataView(K.buffer),this},r.DataBuffer.prototype.putByte=function(_){return this.accommodate(1),this.data.setUint8(this.write++,_),this},r.DataBuffer.prototype.fillWithByte=function(_,S){this.accommodate(S);for(var j=0;j<S;++j)this.data.setUint8(_);return this},r.DataBuffer.prototype.putBytes=function(_,S){if(r.isArrayBufferView(_)){var j=new Uint8Array(_.buffer,_.byteOffset,_.byteLength),K=j.byteLength-j.byteOffset;this.accommodate(K);var J=new Uint8Array(this.data.buffer,this.write);return J.set(j),this.write+=K,this}if(r.isArrayBuffer(_)){var j=new Uint8Array(_);this.accommodate(j.byteLength);var J=new Uint8Array(this.data.buffer);return J.set(j,this.write),this.write+=j.byteLength,this}if(_ instanceof r.DataBuffer||typeof _=="object"&&typeof _.read=="number"&&typeof _.write=="number"&&r.isArrayBufferView(_.data)){var j=new Uint8Array(_.data.byteLength,_.read,_.length());this.accommodate(j.byteLength);var J=new Uint8Array(_.data.byteLength,this.write);return J.set(j),this.write+=j.byteLength,this}if(_ instanceof r.ByteStringBuffer&&(_=_.data,S="binary"),S=S||"binary",typeof _=="string"){var H;if(S==="hex")return this.accommodate(Math.ceil(_.length/2)),H=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.hex.decode(_,H,this.write),this;if(S==="base64")return this.accommodate(Math.ceil(_.length/4)*3),H=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.base64.decode(_,H,this.write),this;if(S==="utf8"&&(_=r.encodeUtf8(_),S="binary"),S==="binary"||S==="raw")return this.accommodate(_.length),H=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.raw.decode(H),this;if(S==="utf16")return this.accommodate(_.length*2),H=new Uint16Array(this.data.buffer,this.write),this.write+=r.text.utf16.encode(H),this;throw new Error("Invalid encoding: "+S)}throw Error("Invalid parameter: "+_)},r.DataBuffer.prototype.putBuffer=function(_){return this.putBytes(_),_.clear(),this},r.DataBuffer.prototype.putString=function(_){return this.putBytes(_,"utf16")},r.DataBuffer.prototype.putInt16=function(_){return this.accommodate(2),this.data.setInt16(this.write,_),this.write+=2,this},r.DataBuffer.prototype.putInt24=function(_){return this.accommodate(3),this.data.setInt16(this.write,_>>8&65535),this.data.setInt8(this.write,_>>16&255),this.write+=3,this},r.DataBuffer.prototype.putInt32=function(_){return this.accommodate(4),this.data.setInt32(this.write,_),this.write+=4,this},r.DataBuffer.prototype.putInt16Le=function(_){return this.accommodate(2),this.data.setInt16(this.write,_,!0),this.write+=2,this},r.DataBuffer.prototype.putInt24Le=function(_){return this.accommodate(3),this.data.setInt8(this.write,_>>16&255),this.data.setInt16(this.write,_>>8&65535,!0),this.write+=3,this},r.DataBuffer.prototype.putInt32Le=function(_){return this.accommodate(4),this.data.setInt32(this.write,_,!0),this.write+=4,this},r.DataBuffer.prototype.putInt=function(_,S){u(S),this.accommodate(S/8);do S-=8,this.data.setInt8(this.write++,_>>S&255);while(S>0);return this},r.DataBuffer.prototype.putSignedInt=function(_,S){return u(S),this.accommodate(S/8),_<0&&(_+=2<<S-1),this.putInt(_,S)},r.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},r.DataBuffer.prototype.getInt16=function(){var _=this.data.getInt16(this.read);return this.read+=2,_},r.DataBuffer.prototype.getInt24=function(){var _=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,_},r.DataBuffer.prototype.getInt32=function(){var _=this.data.getInt32(this.read);return this.read+=4,_},r.DataBuffer.prototype.getInt16Le=function(){var _=this.data.getInt16(this.read,!0);return this.read+=2,_},r.DataBuffer.prototype.getInt24Le=function(){var _=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,_},r.DataBuffer.prototype.getInt32Le=function(){var _=this.data.getInt32(this.read,!0);return this.read+=4,_},r.DataBuffer.prototype.getInt=function(_){u(_);var S=0;do S=(S<<8)+this.data.getInt8(this.read++),_-=8;while(_>0);return S},r.DataBuffer.prototype.getSignedInt=function(_){var S=this.getInt(_),j=2<<_-2;return S>=j&&(S-=j<<1),S},r.DataBuffer.prototype.getBytes=function(_){var S;return _?(_=Math.min(this.length(),_),S=this.data.slice(this.read,this.read+_),this.read+=_):_===0?S="":(S=this.read===0?this.data:this.data.slice(this.read),this.clear()),S},r.DataBuffer.prototype.bytes=function(_){return typeof _>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+_)},r.DataBuffer.prototype.at=function(_){return this.data.getUint8(this.read+_)},r.DataBuffer.prototype.setAt=function(_,S){return this.data.setUint8(_,S),this},r.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},r.DataBuffer.prototype.copy=function(){return new r.DataBuffer(this)},r.DataBuffer.prototype.compact=function(){if(this.read>0){var _=new Uint8Array(this.data.buffer,this.read),S=new Uint8Array(_.byteLength);S.set(_),this.data=new DataView(S),this.write-=this.read,this.read=0}return this},r.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},r.DataBuffer.prototype.truncate=function(_){return this.write=Math.max(0,this.length()-_),this.read=Math.min(this.read,this.write),this},r.DataBuffer.prototype.toHex=function(){for(var _="",S=this.read;S<this.data.byteLength;++S){var j=this.data.getUint8(S);j<16&&(_+="0"),_+=j.toString(16)}return _},r.DataBuffer.prototype.toString=function(_){var S=new Uint8Array(this.data,this.read,this.length());if(_=_||"utf8",_==="binary"||_==="raw")return r.binary.raw.encode(S);if(_==="hex")return r.binary.hex.encode(S);if(_==="base64")return r.binary.base64.encode(S);if(_==="utf8")return r.text.utf8.decode(S);if(_==="utf16")return r.text.utf16.decode(S);throw new Error("Invalid encoding: "+_)},r.createBuffer=function(_,S){return S=S||"raw",_!==void 0&&S==="utf8"&&(_=r.encodeUtf8(_)),new r.ByteBuffer(_)},r.fillString=function(_,S){for(var j="";S>0;)S&1&&(j+=_),S>>>=1,S>0&&(_+=_);return j},r.xorBytes=function(_,S,j){for(var K="",J="",H="",U=0,P=0;j>0;--j,++U)J=_.charCodeAt(U)^S.charCodeAt(U),P>=10&&(K+=H,H="",P=0),H+=String.fromCharCode(J),++P;return K+=H,K},r.hexToBytes=function(_){var S="",j=0;for(_.length&!0&&(j=1,S+=String.fromCharCode(parseInt(_[0],16)));j<_.length;j+=2)S+=String.fromCharCode(parseInt(_.substr(j,2),16));return S},r.bytesToHex=function(_){return r.createBuffer(_).toHex()},r.int32ToBytes=function(_){return String.fromCharCode(_>>24&255)+String.fromCharCode(_>>16&255)+String.fromCharCode(_>>8&255)+String.fromCharCode(_&255)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";r.encode64=function(_,S){for(var j="",K="",J,H,U,P=0;P<_.length;)J=_.charCodeAt(P++),H=_.charCodeAt(P++),U=_.charCodeAt(P++),j+=a.charAt(J>>2),j+=a.charAt((J&3)<<4|H>>4),isNaN(H)?j+="==":(j+=a.charAt((H&15)<<2|U>>6),j+=isNaN(U)?"=":a.charAt(U&63)),S&&j.length>S&&(K+=j.substr(0,S)+`\r
`,j=j.substr(S));return K+=j,K},r.decode64=function(_){_=_.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var S="",j,K,J,H,U=0;U<_.length;)j=o[_.charCodeAt(U++)-43],K=o[_.charCodeAt(U++)-43],J=o[_.charCodeAt(U++)-43],H=o[_.charCodeAt(U++)-43],S+=String.fromCharCode(j<<2|K>>4),J!==64&&(S+=String.fromCharCode((K&15)<<4|J>>2),H!==64&&(S+=String.fromCharCode((J&3)<<6|H)));return S},r.encodeUtf8=function(_){return unescape(encodeURIComponent(_))},r.decodeUtf8=function(_){return decodeURIComponent(escape(_))},r.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:e.encode,decode:e.decode}},r.binary.raw.encode=function(_){return String.fromCharCode.apply(null,_)},r.binary.raw.decode=function(_,S,j){var K=S;K||(K=new Uint8Array(_.length)),j=j||0;for(var J=j,H=0;H<_.length;++H)K[J++]=_.charCodeAt(H);return S?J-j:K},r.binary.hex.encode=r.bytesToHex,r.binary.hex.decode=function(_,S,j){var K=S;K||(K=new Uint8Array(Math.ceil(_.length/2))),j=j||0;var J=0,H=j;for(_.length&1&&(J=1,K[H++]=parseInt(_[0],16));J<_.length;J+=2)K[H++]=parseInt(_.substr(J,2),16);return S?H-j:K},r.binary.base64.encode=function(_,S){for(var j="",K="",J,H,U,P=0;P<_.byteLength;)J=_[P++],H=_[P++],U=_[P++],j+=a.charAt(J>>2),j+=a.charAt((J&3)<<4|H>>4),isNaN(H)?j+="==":(j+=a.charAt((H&15)<<2|U>>6),j+=isNaN(U)?"=":a.charAt(U&63)),S&&j.length>S&&(K+=j.substr(0,S)+`\r
`,j=j.substr(S));return K+=j,K},r.binary.base64.decode=function(_,S,j){var K=S;K||(K=new Uint8Array(Math.ceil(_.length/4)*3)),_=_.replace(/[^A-Za-z0-9\+\/\=]/g,""),j=j||0;for(var J,H,U,P,Z=0,ie=j;Z<_.length;)J=o[_.charCodeAt(Z++)-43],H=o[_.charCodeAt(Z++)-43],U=o[_.charCodeAt(Z++)-43],P=o[_.charCodeAt(Z++)-43],K[ie++]=J<<2|H>>4,U!==64&&(K[ie++]=(H&15)<<4|U>>2,P!==64&&(K[ie++]=(U&3)<<6|P));return S?ie-j:K.subarray(0,ie)},r.binary.base58.encode=function(_,S){return r.binary.baseN.encode(_,s,S)},r.binary.base58.decode=function(_,S){return r.binary.baseN.decode(_,s,S)},r.text={utf8:{},utf16:{}},r.text.utf8.encode=function(_,S,j){_=r.encodeUtf8(_);var K=S;K||(K=new Uint8Array(_.length)),j=j||0;for(var J=j,H=0;H<_.length;++H)K[J++]=_.charCodeAt(H);return S?J-j:K},r.text.utf8.decode=function(_){return r.decodeUtf8(String.fromCharCode.apply(null,_))},r.text.utf16.encode=function(_,S,j){var K=S;K||(K=new Uint8Array(_.length*2));var J=new Uint16Array(K.buffer);j=j||0;for(var H=j,U=j,P=0;P<_.length;++P)J[U++]=_.charCodeAt(P),H+=2;return S?H-j:K},r.text.utf16.decode=function(_){return String.fromCharCode.apply(null,new Uint16Array(_.buffer))},r.deflate=function(_,S,j){if(S=r.decode64(_.deflate(r.encode64(S)).rval),j){var K=2,J=S.charCodeAt(1);J&32&&(K=6),S=S.substring(K,S.length-4)}return S},r.inflate=function(_,S,j){var K=_.inflate(r.encode64(S)).rval;return K===null?null:r.decode64(K)};var h=function(_,S,j){if(!_)throw new Error("WebStorage not available.");var K;if(j===null?K=_.removeItem(S):(j=r.encode64(JSON.stringify(j)),K=_.setItem(S,j)),typeof K<"u"&&K.rval!==!0){var J=new Error(K.error.message);throw J.id=K.error.id,J.name=K.error.name,J}},v=function(_,S){if(!_)throw new Error("WebStorage not available.");var j=_.getItem(S);if(_.init)if(j.rval===null){if(j.error){var K=new Error(j.error.message);throw K.id=j.error.id,K.name=j.error.name,K}j=null}else j=j.rval;return j!==null&&(j=JSON.parse(r.decode64(j))),j},E=function(_,S,j,K){var J=v(_,S);J===null&&(J={}),J[j]=K,h(_,S,J)},y=function(_,S,j){var K=v(_,S);return K!==null&&(K=j in K?K[j]:null),K},A=function(_,S,j){var K=v(_,S);if(K!==null&&j in K){delete K[j];var J=!0;for(var H in K){J=!1;break}J&&(K=null),h(_,S,K)}},w=function(_,S){h(_,S,null)},I=function(_,S,j){var K=null;typeof j>"u"&&(j=["web","flash"]);var J,H=!1,U=null;for(var P in j){J=j[P];try{if(J==="flash"||J==="both"){if(S[0]===null)throw new Error("Flash local storage not available.");K=_.apply(this,S),H=J==="flash"}(J==="web"||J==="both")&&(S[0]=localStorage,K=_.apply(this,S),H=!0)}catch(Z){U=Z}if(H)break}if(!H)throw U;return K};return r.setItem=function(_,S,j,K,J){I(E,arguments,J)},r.getItem=function(_,S,j,K){return I(y,arguments,K)},r.removeItem=function(_,S,j,K){I(A,arguments,K)},r.clearItems=function(_,S,j){I(w,arguments,j)},r.isEmpty=function(_){for(var S in _)if(_.hasOwnProperty(S))return!1;return!0},r.format=function(_){for(var S=/%./g,j,K,J=0,H=[],U=0;j=S.exec(_);){K=_.substring(U,S.lastIndex-2),K.length>0&&H.push(K),U=S.lastIndex;var P=j[0][1];switch(P){case"s":case"o":J<arguments.length?H.push(arguments[J+++1]):H.push("<?>");break;case"%":H.push("%");break;default:H.push("<%"+P+"?>")}}return H.push(_.substring(U)),H.join("")},r.formatNumber=function(_,S,j,K){var J=_,H=isNaN(S=Math.abs(S))?2:S,U=j===void 0?",":j,P=K===void 0?".":K,Z=J<0?"-":"",ie=parseInt(J=Math.abs(+J||0).toFixed(H),10)+"",ue=ie.length>3?ie.length%3:0;return Z+(ue?ie.substr(0,ue)+P:"")+ie.substr(ue).replace(/(\d{3})(?=\d)/g,"$1"+P)+(H?U+Math.abs(J-ie).toFixed(H).slice(2):"")},r.formatSize=function(_){return _>=1073741824?_=r.formatNumber(_/1073741824,2,".","")+" GiB":_>=1048576?_=r.formatNumber(_/1048576,2,".","")+" MiB":_>=1024?_=r.formatNumber(_/1024,0)+" KiB":_=r.formatNumber(_,0)+" bytes",_},r.bytesFromIP=function(_){return _.indexOf(".")!==-1?r.bytesFromIPv4(_):_.indexOf(":")!==-1?r.bytesFromIPv6(_):null},r.bytesFromIPv4=function(_){if(_=_.split("."),_.length!==4)return null;for(var S=r.createBuffer(),j=0;j<_.length;++j){var K=parseInt(_[j],10);if(isNaN(K))return null;S.putByte(K)}return S.getBytes()},r.bytesFromIPv6=function(_){var S=0;_=_.split(":").filter(function(U){return U.length===0&&++S,!0});for(var j=(8-_.length+S)*2,K=r.createBuffer(),J=0;J<8;++J){if(!_[J]||_[J].length===0){K.fillWithByte(0,j),j=0;continue}var H=r.hexToBytes(_[J]);H.length<2&&K.putByte(0),K.putBytes(H)}return K.getBytes()},r.bytesToIP=function(_){return _.length===4?r.bytesToIPv4(_):_.length===16?r.bytesToIPv6(_):null},r.bytesToIPv4=function(_){if(_.length!==4)return null;for(var S=[],j=0;j<_.length;++j)S.push(_.charCodeAt(j));return S.join(".")},r.bytesToIPv6=function(_){if(_.length!==16)return null;for(var S=[],j=[],K=0,J=0;J<_.length;J+=2){for(var H=r.bytesToHex(_[J]+_[J+1]);H[0]==="0"&&H!=="0";)H=H.substr(1);if(H==="0"){var U=j[j.length-1],P=S.length;!U||P!==U.end+1?j.push({start:P,end:P}):(U.end=P,U.end-U.start>j[K].end-j[K].start&&(K=j.length-1))}S.push(H)}if(j.length>0){var Z=j[K];Z.end-Z.start>0&&(S.splice(Z.start,Z.end-Z.start+1,""),Z.start===0&&S.unshift(""),Z.end===7&&S.push(""))}return S.join(":")},r.estimateCores=function(_,S){if(typeof _=="function"&&(S=_,_={}),_=_||{},"cores"in r&&!_.update)return S(null,r.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return r.cores=navigator.hardwareConcurrency,S(null,r.cores);if(typeof Worker>"u")return r.cores=1,S(null,r.cores);if(typeof Blob>"u")return r.cores=2,S(null,r.cores);var j=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(U){var P=Date.now(),Z=P+4;self.postMessage({st:P,et:Z})})}).toString(),")()"],{type:"application/javascript"}));K([],5,16);function K(U,P,Z){if(P===0){var ie=Math.floor(U.reduce(function(ue,le){return ue+le},0)/U.length);return r.cores=Math.max(1,ie),URL.revokeObjectURL(j),S(null,r.cores)}J(Z,function(ue,le){U.push(H(Z,le)),K(U,P-1,Z)})}function J(U,P){for(var Z=[],ie=[],ue=0;ue<U;++ue){var le=new Worker(j);le.addEventListener("message",function(ne){if(ie.push(ne.data),ie.length===U){for(var ye=0;ye<U;++ye)Z[ye].terminate();P(null,ie)}}),Z.push(le)}for(var ue=0;ue<U;++ue)Z[ue].postMessage(ue)}function H(U,P){for(var Z=[],ie=0;ie<U;++ie)for(var ue=P[ie],le=Z[ie]=[],ne=0;ne<U;++ne)if(ie!==ne){var ye=P[ne];(ue.st>ye.st&&ue.st<ye.et||ye.st>ue.st&&ye.st<ue.et)&&le.push(ne)}return Z.reduce(function(fe,Te){return Math.max(fe,Te.length)},0)}},util$7.exports}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var t=requireForge();requireUtil$7(),cipher=t.cipher=t.cipher||{},t.cipher.algorithms=t.cipher.algorithms||{},t.cipher.createCipher=function(r,u){var d=r;if(typeof d=="string"&&(d=t.cipher.getAlgorithm(d),d&&(d=d())),!d)throw new Error("Unsupported algorithm: "+r);return new t.cipher.BlockCipher({algorithm:d,key:u,decrypt:!1})},t.cipher.createDecipher=function(r,u){var d=r;if(typeof d=="string"&&(d=t.cipher.getAlgorithm(d),d&&(d=d())),!d)throw new Error("Unsupported algorithm: "+r);return new t.cipher.BlockCipher({algorithm:d,key:u,decrypt:!0})},t.cipher.registerAlgorithm=function(r,u){r=r.toUpperCase(),t.cipher.algorithms[r]=u},t.cipher.getAlgorithm=function(r){return r=r.toUpperCase(),r in t.cipher.algorithms?t.cipher.algorithms[r]:null};var e=t.cipher.BlockCipher=function(r){this.algorithm=r.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=r.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=r.decrypt,this.algorithm.initialize(r)};return e.prototype.start=function(r){r=r||{};var u={};for(var d in r)u[d]=r[d];u.decrypt=this._decrypt,this._finish=!1,this._input=t.util.createBuffer(),this.output=r.output||t.util.createBuffer(),this.mode.start(u)},e.prototype.update=function(r){for(r&&this._input.putBuffer(r);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(r){r&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(d){return r(this.blockSize,d,!1)},this.mode.unpad=function(d){return r(this.blockSize,d,!0)});var u={};return u.decrypt=this._decrypt,u.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,u)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,u))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,u))},cipher}var cipherModes={exports:{}},hasRequiredCipherModes;function requireCipherModes(){if(hasRequiredCipherModes)return cipherModes.exports;hasRequiredCipherModes=1;var t=requireForge();requireUtil$7(),t.cipher=t.cipher||{};var e=cipherModes.exports=t.cipher.modes=t.cipher.modes||{};e.ecb=function(m){m=m||{},this.name="ECB",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.ecb.prototype.start=function(m){},e.ecb.prototype.encrypt=function(m,c,a){if(m.length()<this.blockSize&&!(a&&m.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=m.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)c.putInt32(this._outBlock[o])},e.ecb.prototype.decrypt=function(m,c,a){if(m.length()<this.blockSize&&!(a&&m.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=m.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)c.putInt32(this._outBlock[o])},e.ecb.prototype.pad=function(m,c){var a=m.length()===this.blockSize?this.blockSize:this.blockSize-m.length();return m.fillWithByte(a,a),!0},e.ecb.prototype.unpad=function(m,c){if(c.overflow>0)return!1;var a=m.length(),o=m.at(a-1);return o>this.blockSize<<2?!1:(m.truncate(o),!0)},e.cbc=function(m){m=m||{},this.name="CBC",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.cbc.prototype.start=function(m){if(m.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in m)this._iv=r(m.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},e.cbc.prototype.encrypt=function(m,c,a){if(m.length()<this.blockSize&&!(a&&m.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=this._prev[o]^m.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)c.putInt32(this._outBlock[o]);this._prev=this._outBlock},e.cbc.prototype.decrypt=function(m,c,a){if(m.length()<this.blockSize&&!(a&&m.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=m.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)c.putInt32(this._prev[o]^this._outBlock[o]);this._prev=this._inBlock.slice(0)},e.cbc.prototype.pad=function(m,c){var a=m.length()===this.blockSize?this.blockSize:this.blockSize-m.length();return m.fillWithByte(a,a),!0},e.cbc.prototype.unpad=function(m,c){if(c.overflow>0)return!1;var a=m.length(),o=m.at(a-1);return o>this.blockSize<<2?!1:(m.truncate(o),!0)},e.cfb=function(m){m=m||{},this.name="CFB",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},e.cfb.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");this._iv=r(m.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.cfb.prototype.encrypt=function(m,c,a){var o=m.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var s=0;s<this._ints;++s)this._inBlock[s]=m.getInt32()^this._outBlock[s],c.putInt32(this._inBlock[s]);return}var h=(this.blockSize-o)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialBlock[s]=m.getInt32()^this._outBlock[s],this._partialOutput.putInt32(this._partialBlock[s]);if(h>0)m.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0},e.cfb.prototype.decrypt=function(m,c,a){var o=m.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var s=0;s<this._ints;++s)this._inBlock[s]=m.getInt32(),c.putInt32(this._inBlock[s]^this._outBlock[s]);return}var h=(this.blockSize-o)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialBlock[s]=m.getInt32(),this._partialOutput.putInt32(this._partialBlock[s]^this._outBlock[s]);if(h>0)m.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0},e.ofb=function(m){m=m||{},this.name="OFB",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},e.ofb.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");this._iv=r(m.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ofb.prototype.encrypt=function(m,c,a){var o=m.length();if(m.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var s=0;s<this._ints;++s)c.putInt32(m.getInt32()^this._outBlock[s]),this._inBlock[s]=this._outBlock[s];return}var h=(this.blockSize-o)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(m.getInt32()^this._outBlock[s]);if(h>0)m.read-=this.blockSize;else for(var s=0;s<this._ints;++s)this._inBlock[s]=this._outBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0},e.ofb.prototype.decrypt=e.ofb.prototype.encrypt,e.ctr=function(m){m=m||{},this.name="CTR",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0},e.ctr.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");this._iv=r(m.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ctr.prototype.encrypt=function(m,c,a){var o=m.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize)for(var s=0;s<this._ints;++s)c.putInt32(m.getInt32()^this._outBlock[s]);else{var h=(this.blockSize-o)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(m.getInt32()^this._outBlock[s]);if(h>0&&(m.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}u(this._inBlock)},e.ctr.prototype.decrypt=e.ctr.prototype.encrypt,e.gcm=function(m){m=m||{},this.name="GCM",this.cipher=m.cipher,this.blockSize=m.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=t.util.createBuffer(),this._partialBytes=0,this._R=3774873600},e.gcm.prototype.start=function(m){if(!("iv"in m))throw new Error("Invalid IV parameter.");var c=t.util.createBuffer(m.iv);this._cipherLength=0;var a;if("additionalData"in m?a=t.util.createBuffer(m.additionalData):a=t.util.createBuffer(),"tagLength"in m?this._tagLength=m.tagLength:this._tagLength=128,this._tag=null,m.decrypt&&(this._tag=t.util.createBuffer(m.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=c.length();if(o===12)this._j0=[c.getInt32(),c.getInt32(),c.getInt32(),1];else{for(this._j0=[0,0,0,0];c.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[c.getInt32(),c.getInt32(),c.getInt32(),c.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(d(o*8)))}this._inBlock=this._j0.slice(0),u(this._inBlock),this._partialBytes=0,a=t.util.createBuffer(a),this._aDataLength=d(a.length()*8);var s=a.length()%this.blockSize;for(s&&a.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];a.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()])},e.gcm.prototype.encrypt=function(m,c,a){var o=m.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var s=0;s<this._ints;++s)c.putInt32(this._outBlock[s]^=m.getInt32());this._cipherLength+=this.blockSize}else{var h=(this.blockSize-o)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var s=0;s<this._ints;++s)this._partialOutput.putInt32(m.getInt32()^this._outBlock[s]);if(h<=0||a){if(a){var v=o%this.blockSize;this._cipherLength+=v,this._partialOutput.truncate(this.blockSize-v)}else this._cipherLength+=this.blockSize;for(var s=0;s<this._ints;++s)this._outBlock[s]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return m.read-=this.blockSize,c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),u(this._inBlock)},e.gcm.prototype.decrypt=function(m,c,a){var o=m.length();if(o<this.blockSize&&!(a&&o>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),u(this._inBlock),this._hashBlock[0]=m.getInt32(),this._hashBlock[1]=m.getInt32(),this._hashBlock[2]=m.getInt32(),this._hashBlock[3]=m.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var s=0;s<this._ints;++s)c.putInt32(this._outBlock[s]^this._hashBlock[s]);o<this.blockSize?this._cipherLength+=o%this.blockSize:this._cipherLength+=this.blockSize},e.gcm.prototype.afterFinish=function(m,c){var a=!0;c.decrypt&&c.overflow&&m.truncate(this.blockSize-c.overflow),this.tag=t.util.createBuffer();var o=this._aDataLength.concat(d(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,o);var s=[];this.cipher.encrypt(this._j0,s);for(var h=0;h<this._ints;++h)this.tag.putInt32(this._s[h]^s[h]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),c.decrypt&&this.tag.bytes()!==this._tag&&(a=!1),a},e.gcm.prototype.multiply=function(m,c){for(var a=[0,0,0,0],o=c.slice(0),s=0;s<128;++s){var h=m[s/32|0]&1<<31-s%32;h&&(a[0]^=o[0],a[1]^=o[1],a[2]^=o[2],a[3]^=o[3]),this.pow(o,o)}return a},e.gcm.prototype.pow=function(m,c){for(var a=m[3]&1,o=3;o>0;--o)c[o]=m[o]>>>1|(m[o-1]&1)<<31;c[0]=m[0]>>>1,a&&(c[0]^=this._R)},e.gcm.prototype.tableMultiply=function(m){for(var c=[0,0,0,0],a=0;a<32;++a){var o=a/8|0,s=m[o]>>>(7-a%8)*4&15,h=this._m[a][s];c[0]^=h[0],c[1]^=h[1],c[2]^=h[2],c[3]^=h[3]}return c},e.gcm.prototype.ghash=function(m,c,a){return c[0]^=a[0],c[1]^=a[1],c[2]^=a[2],c[3]^=a[3],this.tableMultiply(c)},e.gcm.prototype.generateHashTable=function(m,c){for(var a=8/c,o=4*a,s=16*a,h=new Array(s),v=0;v<s;++v){var E=[0,0,0,0],y=v/o|0,A=(o-1-v%o)*c;E[y]=1<<c-1<<A,h[v]=this.generateSubHashTable(this.multiply(E,m),c)}return h},e.gcm.prototype.generateSubHashTable=function(m,c){var a=1<<c,o=a>>>1,s=new Array(a);s[o]=m.slice(0);for(var h=o>>>1;h>0;)this.pow(s[2*h],s[h]=[]),h>>=1;for(h=2;h<o;){for(var v=1;v<h;++v){var E=s[h],y=s[v];s[h+v]=[E[0]^y[0],E[1]^y[1],E[2]^y[2],E[3]^y[3]]}h*=2}for(s[0]=[0,0,0,0],h=o+1;h<a;++h){var A=s[h^o];s[h]=[m[0]^A[0],m[1]^A[1],m[2]^A[2],m[3]^A[3]]}return s};function r(m,c){if(typeof m=="string"&&(m=t.util.createBuffer(m)),t.util.isArray(m)&&m.length>4){var a=m;m=t.util.createBuffer();for(var o=0;o<a.length;++o)m.putByte(a[o])}if(m.length()<c)throw new Error("Invalid IV length; got "+m.length()+" bytes and expected "+c+" bytes.");if(!t.util.isArray(m)){for(var s=[],h=c/4,o=0;o<h;++o)s.push(m.getInt32());m=s}return m}function u(m){m[m.length-1]=m[m.length-1]+1&4294967295}function d(m){return[m/4294967296|0,m&4294967295]}return cipherModes.exports}var aes,hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var t=requireForge();requireCipher(),requireCipherModes(),requireUtil$7(),aes=t.aes=t.aes||{},t.aes.startEncrypting=function(y,A,w,I){var _=E({key:y,output:w,decrypt:!1,mode:I});return _.start(A),_},t.aes.createEncryptionCipher=function(y,A){return E({key:y,output:null,decrypt:!1,mode:A})},t.aes.startDecrypting=function(y,A,w,I){var _=E({key:y,output:w,decrypt:!0,mode:I});return _.start(A),_},t.aes.createDecryptionCipher=function(y,A){return E({key:y,output:null,decrypt:!0,mode:A})},t.aes.Algorithm=function(y,A){r||s();var w=this;w.name=y,w.mode=new A({blockSize:16,cipher:{encrypt:function(I,_){return v(w._w,I,_,!1)},decrypt:function(I,_){return v(w._w,I,_,!0)}}}),w._init=!1},t.aes.Algorithm.prototype.initialize=function(y){if(!this._init){var A=y.key,w;if(typeof A=="string"&&(A.length===16||A.length===24||A.length===32))A=t.util.createBuffer(A);else if(t.util.isArray(A)&&(A.length===16||A.length===24||A.length===32)){w=A,A=t.util.createBuffer();for(var I=0;I<w.length;++I)A.putByte(w[I])}if(!t.util.isArray(A)){w=A,A=[];var _=w.length();if(_===16||_===24||_===32){_=_>>>2;for(var I=0;I<_;++I)A.push(w.getInt32())}}if(!t.util.isArray(A)||!(A.length===4||A.length===6||A.length===8))throw new Error("Invalid key parameter.");var S=this.mode.name,j=["CFB","OFB","CTR","GCM"].indexOf(S)!==-1;this._w=h(A,y.decrypt&&!j),this._init=!0}},t.aes._expandKey=function(y,A){return r||s(),h(y,A)},t.aes._updateBlock=v,e("AES-ECB",t.cipher.modes.ecb),e("AES-CBC",t.cipher.modes.cbc),e("AES-CFB",t.cipher.modes.cfb),e("AES-OFB",t.cipher.modes.ofb),e("AES-CTR",t.cipher.modes.ctr),e("AES-GCM",t.cipher.modes.gcm);function e(y,A){var w=function(){return new t.aes.Algorithm(y,A)};t.cipher.registerAlgorithm(y,w)}var r=!1,u=4,d,m,c,a,o;function s(){r=!0,c=[0,1,2,4,8,16,32,64,128,27,54];for(var y=new Array(256),A=0;A<128;++A)y[A]=A<<1,y[A+128]=A+128<<1^283;d=new Array(256),m=new Array(256),a=new Array(4),o=new Array(4);for(var A=0;A<4;++A)a[A]=new Array(256),o[A]=new Array(256);for(var w=0,I=0,_,S,j,K,J,H,U,A=0;A<256;++A){K=I^I<<1^I<<2^I<<3^I<<4,K=K>>8^K&255^99,d[w]=K,m[K]=w,J=y[K],_=y[w],S=y[_],j=y[S],H=J<<24^K<<16^K<<8^(K^J),U=(_^S^j)<<24^(w^j)<<16^(w^S^j)<<8^(w^_^j);for(var P=0;P<4;++P)a[P][w]=H,o[P][K]=U,H=H<<24|H>>>8,U=U<<24|U>>>8;w===0?w=I=1:(w=_^y[y[y[_^j]]],I^=y[y[I]])}}function h(y,A){for(var w=y.slice(0),I,_=1,S=w.length,j=S+6+1,K=u*j,J=S;J<K;++J)I=w[J-1],J%S===0?(I=d[I>>>16&255]<<24^d[I>>>8&255]<<16^d[I&255]<<8^d[I>>>24]^c[_]<<24,_++):S>6&&J%S===4&&(I=d[I>>>24]<<24^d[I>>>16&255]<<16^d[I>>>8&255]<<8^d[I&255]),w[J]=w[J-S]^I;if(A){var H,U=o[0],P=o[1],Z=o[2],ie=o[3],ue=w.slice(0);K=w.length;for(var J=0,le=K-u;J<K;J+=u,le-=u)if(J===0||J===K-u)ue[J]=w[le],ue[J+1]=w[le+3],ue[J+2]=w[le+2],ue[J+3]=w[le+1];else for(var ne=0;ne<u;++ne)H=w[le+ne],ue[J+(3&-ne)]=U[d[H>>>24]]^P[d[H>>>16&255]]^Z[d[H>>>8&255]]^ie[d[H&255]];w=ue}return w}function v(y,A,w,I){var _=y.length/4-1,S,j,K,J,H;I?(S=o[0],j=o[1],K=o[2],J=o[3],H=m):(S=a[0],j=a[1],K=a[2],J=a[3],H=d);var U,P,Z,ie,ue,le,ne;U=A[0]^y[0],P=A[I?3:1]^y[1],Z=A[2]^y[2],ie=A[I?1:3]^y[3];for(var ye=3,fe=1;fe<_;++fe)ue=S[U>>>24]^j[P>>>16&255]^K[Z>>>8&255]^J[ie&255]^y[++ye],le=S[P>>>24]^j[Z>>>16&255]^K[ie>>>8&255]^J[U&255]^y[++ye],ne=S[Z>>>24]^j[ie>>>16&255]^K[U>>>8&255]^J[P&255]^y[++ye],ie=S[ie>>>24]^j[U>>>16&255]^K[P>>>8&255]^J[Z&255]^y[++ye],U=ue,P=le,Z=ne;w[0]=H[U>>>24]<<24^H[P>>>16&255]<<16^H[Z>>>8&255]<<8^H[ie&255]^y[++ye],w[I?3:1]=H[P>>>24]<<24^H[Z>>>16&255]<<16^H[ie>>>8&255]<<8^H[U&255]^y[++ye],w[2]=H[Z>>>24]<<24^H[ie>>>16&255]<<16^H[U>>>8&255]<<8^H[P&255]^y[++ye],w[I?1:3]=H[ie>>>24]<<24^H[U>>>16&255]<<16^H[P>>>8&255]<<8^H[Z&255]^y[++ye]}function E(y){y=y||{};var A=(y.mode||"CBC").toUpperCase(),w="AES-"+A,I;y.decrypt?I=t.cipher.createDecipher(w,y.key):I=t.cipher.createCipher(w,y.key);var _=I.start;return I.start=function(S,j){var K=null;j instanceof t.util.ByteBuffer&&(K=j,j={}),j=j||{},j.output=K,j.iv=S,_.call(I,j)},I}return aes}var aesCipherSuites={exports:{}},asn1={exports:{}},oids={exports:{}},hasRequiredOids;function requireOids(){if(hasRequiredOids)return oids.exports;hasRequiredOids=1;var t=requireForge();t.pki=t.pki||{};var e=oids.exports=t.pki.oids=t.oids=t.oids||{};function r(d,m){e[d]=m,e[m]=d}function u(d,m){e[d]=m}return r("1.2.840.113549.1.1.1","rsaEncryption"),r("1.2.840.113549.1.1.4","md5WithRSAEncryption"),r("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),r("1.2.840.113549.1.1.7","RSAES-OAEP"),r("1.2.840.113549.1.1.8","mgf1"),r("1.2.840.113549.1.1.9","pSpecified"),r("1.2.840.113549.1.1.10","RSASSA-PSS"),r("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),r("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),r("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),r("1.3.101.112","EdDSA25519"),r("1.2.840.10040.4.3","dsa-with-sha1"),r("1.3.14.3.2.7","desCBC"),r("1.3.14.3.2.26","sha1"),r("1.3.14.3.2.29","sha1WithRSASignature"),r("2.16.840.1.101.3.4.2.1","sha256"),r("2.16.840.1.101.3.4.2.2","sha384"),r("2.16.840.1.101.3.4.2.3","sha512"),r("2.16.840.1.101.3.4.2.4","sha224"),r("2.16.840.1.101.3.4.2.5","sha512-224"),r("2.16.840.1.101.3.4.2.6","sha512-256"),r("1.2.840.113549.2.2","md2"),r("1.2.840.113549.2.5","md5"),r("1.2.840.113549.1.7.1","data"),r("1.2.840.113549.1.7.2","signedData"),r("1.2.840.113549.1.7.3","envelopedData"),r("1.2.840.113549.1.7.4","signedAndEnvelopedData"),r("1.2.840.113549.1.7.5","digestedData"),r("1.2.840.113549.1.7.6","encryptedData"),r("1.2.840.113549.1.9.1","emailAddress"),r("1.2.840.113549.1.9.2","unstructuredName"),r("1.2.840.113549.1.9.3","contentType"),r("1.2.840.113549.1.9.4","messageDigest"),r("1.2.840.113549.1.9.5","signingTime"),r("1.2.840.113549.1.9.6","counterSignature"),r("1.2.840.113549.1.9.7","challengePassword"),r("1.2.840.113549.1.9.8","unstructuredAddress"),r("1.2.840.113549.1.9.14","extensionRequest"),r("1.2.840.113549.1.9.20","friendlyName"),r("1.2.840.113549.1.9.21","localKeyId"),r("1.2.840.113549.1.9.22.1","x509Certificate"),r("1.2.840.113549.1.12.10.1.1","keyBag"),r("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),r("1.2.840.113549.1.12.10.1.3","certBag"),r("1.2.840.113549.1.12.10.1.4","crlBag"),r("1.2.840.113549.1.12.10.1.5","secretBag"),r("1.2.840.113549.1.12.10.1.6","safeContentsBag"),r("1.2.840.113549.1.5.13","pkcs5PBES2"),r("1.2.840.113549.1.5.12","pkcs5PBKDF2"),r("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),r("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),r("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),r("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),r("1.2.840.113549.2.7","hmacWithSHA1"),r("1.2.840.113549.2.8","hmacWithSHA224"),r("1.2.840.113549.2.9","hmacWithSHA256"),r("1.2.840.113549.2.10","hmacWithSHA384"),r("1.2.840.113549.2.11","hmacWithSHA512"),r("1.2.840.113549.3.7","des-EDE3-CBC"),r("2.16.840.1.101.3.4.1.2","aes128-CBC"),r("2.16.840.1.101.3.4.1.22","aes192-CBC"),r("2.16.840.1.101.3.4.1.42","aes256-CBC"),r("2.5.4.3","commonName"),r("2.5.4.4","surname"),r("2.5.4.5","serialNumber"),r("2.5.4.6","countryName"),r("2.5.4.7","localityName"),r("2.5.4.8","stateOrProvinceName"),r("2.5.4.9","streetAddress"),r("2.5.4.10","organizationName"),r("2.5.4.11","organizationalUnitName"),r("2.5.4.12","title"),r("2.5.4.13","description"),r("2.5.4.15","businessCategory"),r("2.5.4.17","postalCode"),r("2.5.4.42","givenName"),r("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),r("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),r("2.16.840.1.113730.1.1","nsCertType"),r("2.16.840.1.113730.1.13","nsComment"),u("2.5.29.1","authorityKeyIdentifier"),u("2.5.29.2","keyAttributes"),u("2.5.29.3","certificatePolicies"),u("2.5.29.4","keyUsageRestriction"),u("2.5.29.5","policyMapping"),u("2.5.29.6","subtreesConstraint"),u("2.5.29.7","subjectAltName"),u("2.5.29.8","issuerAltName"),u("2.5.29.9","subjectDirectoryAttributes"),u("2.5.29.10","basicConstraints"),u("2.5.29.11","nameConstraints"),u("2.5.29.12","policyConstraints"),u("2.5.29.13","basicConstraints"),r("2.5.29.14","subjectKeyIdentifier"),r("2.5.29.15","keyUsage"),u("2.5.29.16","privateKeyUsagePeriod"),r("2.5.29.17","subjectAltName"),r("2.5.29.18","issuerAltName"),r("2.5.29.19","basicConstraints"),u("2.5.29.20","cRLNumber"),u("2.5.29.21","cRLReason"),u("2.5.29.22","expirationDate"),u("2.5.29.23","instructionCode"),u("2.5.29.24","invalidityDate"),u("2.5.29.25","cRLDistributionPoints"),u("2.5.29.26","issuingDistributionPoint"),u("2.5.29.27","deltaCRLIndicator"),u("2.5.29.28","issuingDistributionPoint"),u("2.5.29.29","certificateIssuer"),u("2.5.29.30","nameConstraints"),r("2.5.29.31","cRLDistributionPoints"),r("2.5.29.32","certificatePolicies"),u("2.5.29.33","policyMappings"),u("2.5.29.34","policyConstraints"),r("2.5.29.35","authorityKeyIdentifier"),u("2.5.29.36","policyConstraints"),r("2.5.29.37","extKeyUsage"),u("2.5.29.46","freshestCRL"),u("2.5.29.54","inhibitAnyPolicy"),r("1.3.6.1.4.1.11129.2.4.2","timestampList"),r("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),r("1.3.6.1.5.5.7.3.1","serverAuth"),r("1.3.6.1.5.5.7.3.2","clientAuth"),r("1.3.6.1.5.5.7.3.3","codeSigning"),r("1.3.6.1.5.5.7.3.4","emailProtection"),r("1.3.6.1.5.5.7.3.8","timeStamping"),oids.exports}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1.exports;hasRequiredAsn1=1;var t=requireForge();requireUtil$7(),requireOids();var e=asn1.exports=t.asn1=t.asn1||{};e.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},e.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},e.create=function(c,a,o,s,h){if(t.util.isArray(s)){for(var v=[],E=0;E<s.length;++E)s[E]!==void 0&&v.push(s[E]);s=v}var y={tagClass:c,type:a,constructed:o,composed:o||t.util.isArray(s),value:s};return h&&"bitStringContents"in h&&(y.bitStringContents=h.bitStringContents,y.original=e.copy(y)),y},e.copy=function(c,a){var o;if(t.util.isArray(c)){o=[];for(var s=0;s<c.length;++s)o.push(e.copy(c[s],a));return o}return typeof c=="string"?c:(o={tagClass:c.tagClass,type:c.type,constructed:c.constructed,composed:c.composed,value:e.copy(c.value,a)},a&&!a.excludeBitStringContents&&(o.bitStringContents=c.bitStringContents),o)},e.equals=function(c,a,o){if(t.util.isArray(c)){if(!t.util.isArray(a)||c.length!==a.length)return!1;for(var s=0;s<c.length;++s)if(!e.equals(c[s],a[s]))return!1;return!0}if(typeof c!=typeof a)return!1;if(typeof c=="string")return c===a;var h=c.tagClass===a.tagClass&&c.type===a.type&&c.constructed===a.constructed&&c.composed===a.composed&&e.equals(c.value,a.value);return o&&o.includeBitStringContents&&(h=h&&c.bitStringContents===a.bitStringContents),h},e.getBerValueLength=function(c){var a=c.getByte();if(a!==128){var o,s=a&128;return s?o=c.getInt((a&127)<<3):o=a,o}};function r(c,a,o){if(o>a){var s=new Error("Too few bytes to parse DER.");throw s.available=c.length(),s.remaining=a,s.requested=o,s}}var u=function(c,a){var o=c.getByte();if(a--,o!==128){var s,h=o&128;if(!h)s=o;else{var v=o&127;r(c,a,v),s=c.getInt(v<<3)}if(s<0)throw new Error("Negative length: "+s);return s}};e.fromDer=function(c,a){a===void 0&&(a={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof a=="boolean"&&(a={strict:a,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in a||(a.strict=!0),"parseAllBytes"in a||(a.parseAllBytes=!0),"decodeBitStrings"in a||(a.decodeBitStrings=!0),typeof c=="string"&&(c=t.util.createBuffer(c));var o=c.length(),s=d(c,c.length(),0,a);if(a.parseAllBytes&&c.length()!==0){var h=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw h.byteCount=o,h.remaining=c.length(),h}return s};function d(c,a,o,s){var h;r(c,a,2);var v=c.getByte();a--;var E=v&192,y=v&31;h=c.length();var A=u(c,a);if(a-=h-c.length(),A!==void 0&&A>a){if(s.strict){var w=new Error("Too few bytes to read ASN.1 value.");throw w.available=c.length(),w.remaining=a,w.requested=A,w}A=a}var I,_,S=(v&32)===32;if(S)if(I=[],A===void 0)for(;;){if(r(c,a,2),c.bytes(2)==="\0\0"){c.getBytes(2),a-=2;break}h=c.length(),I.push(d(c,a,o+1,s)),a-=h-c.length()}else for(;A>0;)h=c.length(),I.push(d(c,A,o+1,s)),a-=h-c.length(),A-=h-c.length();if(I===void 0&&E===e.Class.UNIVERSAL&&y===e.Type.BITSTRING&&(_=c.bytes(A)),I===void 0&&s.decodeBitStrings&&E===e.Class.UNIVERSAL&&y===e.Type.BITSTRING&&A>1){var j=c.read,K=a,J=0;if(y===e.Type.BITSTRING&&(r(c,a,1),J=c.getByte(),a--),J===0)try{h=c.length();var H={strict:!0,decodeBitStrings:!0},U=d(c,a,o+1,H),P=h-c.length();a-=P,y==e.Type.BITSTRING&&P++;var Z=U.tagClass;P===A&&(Z===e.Class.UNIVERSAL||Z===e.Class.CONTEXT_SPECIFIC)&&(I=[U])}catch{}I===void 0&&(c.read=j,a=K)}if(I===void 0){if(A===void 0){if(s.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");A=a}if(y===e.Type.BMPSTRING)for(I="";A>0;A-=2)r(c,a,2),I+=String.fromCharCode(c.getInt16()),a-=2;else I=c.getBytes(A),a-=A}var ie=_===void 0?null:{bitStringContents:_};return e.create(E,y,S,I,ie)}e.toDer=function(c){var a=t.util.createBuffer(),o=c.tagClass|c.type,s=t.util.createBuffer(),h=!1;if("bitStringContents"in c&&(h=!0,c.original&&(h=e.equals(c,c.original))),h)s.putBytes(c.bitStringContents);else if(c.composed){c.constructed?o|=32:s.putByte(0);for(var v=0;v<c.value.length;++v)c.value[v]!==void 0&&s.putBuffer(e.toDer(c.value[v]))}else if(c.type===e.Type.BMPSTRING)for(var v=0;v<c.value.length;++v)s.putInt16(c.value.charCodeAt(v));else c.type===e.Type.INTEGER&&c.value.length>1&&(c.value.charCodeAt(0)===0&&(c.value.charCodeAt(1)&128)===0||c.value.charCodeAt(0)===255&&(c.value.charCodeAt(1)&128)===128)?s.putBytes(c.value.substr(1)):s.putBytes(c.value);if(a.putByte(o),s.length()<=127)a.putByte(s.length()&127);else{var E=s.length(),y="";do y+=String.fromCharCode(E&255),E=E>>>8;while(E>0);a.putByte(y.length|128);for(var v=y.length-1;v>=0;--v)a.putByte(y.charCodeAt(v))}return a.putBuffer(s),a},e.oidToDer=function(c){var a=c.split("."),o=t.util.createBuffer();o.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var s,h,v,E,y=2;y<a.length;++y){s=!0,h=[],v=parseInt(a[y],10);do E=v&127,v=v>>>7,s||(E|=128),h.push(E),s=!1;while(v>0);for(var A=h.length-1;A>=0;--A)o.putByte(h[A])}return o},e.derToOid=function(c){var a;typeof c=="string"&&(c=t.util.createBuffer(c));var o=c.getByte();a=Math.floor(o/40)+"."+o%40;for(var s=0;c.length()>0;)o=c.getByte(),s=s<<7,o&128?s+=o&127:(a+="."+(s+o),s=0);return a},e.utcTimeToDate=function(c){var a=new Date,o=parseInt(c.substr(0,2),10);o=o>=50?1900+o:2e3+o;var s=parseInt(c.substr(2,2),10)-1,h=parseInt(c.substr(4,2),10),v=parseInt(c.substr(6,2),10),E=parseInt(c.substr(8,2),10),y=0;if(c.length>11){var A=c.charAt(10),w=10;A!=="+"&&A!=="-"&&(y=parseInt(c.substr(10,2),10),w+=2)}if(a.setUTCFullYear(o,s,h),a.setUTCHours(v,E,y,0),w&&(A=c.charAt(w),A==="+"||A==="-")){var I=parseInt(c.substr(w+1,2),10),_=parseInt(c.substr(w+4,2),10),S=I*60+_;S*=6e4,A==="+"?a.setTime(+a-S):a.setTime(+a+S)}return a},e.generalizedTimeToDate=function(c){var a=new Date,o=parseInt(c.substr(0,4),10),s=parseInt(c.substr(4,2),10)-1,h=parseInt(c.substr(6,2),10),v=parseInt(c.substr(8,2),10),E=parseInt(c.substr(10,2),10),y=parseInt(c.substr(12,2),10),A=0,w=0,I=!1;c.charAt(c.length-1)==="Z"&&(I=!0);var _=c.length-5,S=c.charAt(_);if(S==="+"||S==="-"){var j=parseInt(c.substr(_+1,2),10),K=parseInt(c.substr(_+4,2),10);w=j*60+K,w*=6e4,S==="+"&&(w*=-1),I=!0}return c.charAt(14)==="."&&(A=parseFloat(c.substr(14),10)*1e3),I?(a.setUTCFullYear(o,s,h),a.setUTCHours(v,E,y,A),a.setTime(+a+w)):(a.setFullYear(o,s,h),a.setHours(v,E,y,A)),a},e.dateToUtcTime=function(c){if(typeof c=="string")return c;var a="",o=[];o.push((""+c.getUTCFullYear()).substr(2)),o.push(""+(c.getUTCMonth()+1)),o.push(""+c.getUTCDate()),o.push(""+c.getUTCHours()),o.push(""+c.getUTCMinutes()),o.push(""+c.getUTCSeconds());for(var s=0;s<o.length;++s)o[s].length<2&&(a+="0"),a+=o[s];return a+="Z",a},e.dateToGeneralizedTime=function(c){if(typeof c=="string")return c;var a="",o=[];o.push(""+c.getUTCFullYear()),o.push(""+(c.getUTCMonth()+1)),o.push(""+c.getUTCDate()),o.push(""+c.getUTCHours()),o.push(""+c.getUTCMinutes()),o.push(""+c.getUTCSeconds());for(var s=0;s<o.length;++s)o[s].length<2&&(a+="0"),a+=o[s];return a+="Z",a},e.integerToDer=function(c){var a=t.util.createBuffer();if(c>=-128&&c<128)return a.putSignedInt(c,8);if(c>=-32768&&c<32768)return a.putSignedInt(c,16);if(c>=-8388608&&c<8388608)return a.putSignedInt(c,24);if(c>=-2147483648&&c<2147483648)return a.putSignedInt(c,32);var o=new Error("Integer too large; max is 32-bits.");throw o.integer=c,o},e.derToInteger=function(c){typeof c=="string"&&(c=t.util.createBuffer(c));var a=c.length()*8;if(a>32)throw new Error("Integer too large; max is 32-bits.");return c.getSignedInt(a)},e.validate=function(c,a,o,s){var h=!1;if((c.tagClass===a.tagClass||typeof a.tagClass>"u")&&(c.type===a.type||typeof a.type>"u"))if(c.constructed===a.constructed||typeof a.constructed>"u"){if(h=!0,a.value&&t.util.isArray(a.value))for(var v=0,E=0;h&&E<a.value.length;++E)h=a.value[E].optional||!1,c.value[v]&&(h=e.validate(c.value[v],a.value[E],o,s),h?++v:a.value[E].optional&&(h=!0)),!h&&s&&s.push("["+a.name+'] Tag class "'+a.tagClass+'", type "'+a.type+'" expected value length "'+a.value.length+'", got "'+c.value.length+'"');if(h&&o&&(a.capture&&(o[a.capture]=c.value),a.captureAsn1&&(o[a.captureAsn1]=c),a.captureBitStringContents&&"bitStringContents"in c&&(o[a.captureBitStringContents]=c.bitStringContents),a.captureBitStringValue&&"bitStringContents"in c))if(c.bitStringContents.length<2)o[a.captureBitStringValue]="";else{var y=c.bitStringContents.charCodeAt(0);if(y!==0)throw new Error("captureBitStringValue only supported for zero unused bits");o[a.captureBitStringValue]=c.bitStringContents.slice(1)}}else s&&s.push("["+a.name+'] Expected constructed "'+a.constructed+'", got "'+c.constructed+'"');else s&&(c.tagClass!==a.tagClass&&s.push("["+a.name+'] Expected tag class "'+a.tagClass+'", got "'+c.tagClass+'"'),c.type!==a.type&&s.push("["+a.name+'] Expected type "'+a.type+'", got "'+c.type+'"'));return h};var m=/[^\\u0000-\\u00ff]/;return e.prettyPrint=function(c,a,o){var s="";a=a||0,o=o||2,a>0&&(s+=`
`);for(var h="",v=0;v<a*o;++v)h+=" ";switch(s+=h+"Tag: ",c.tagClass){case e.Class.UNIVERSAL:s+="Universal:";break;case e.Class.APPLICATION:s+="Application:";break;case e.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case e.Class.PRIVATE:s+="Private:";break}if(c.tagClass===e.Class.UNIVERSAL)switch(s+=c.type,c.type){case e.Type.NONE:s+=" (None)";break;case e.Type.BOOLEAN:s+=" (Boolean)";break;case e.Type.INTEGER:s+=" (Integer)";break;case e.Type.BITSTRING:s+=" (Bit string)";break;case e.Type.OCTETSTRING:s+=" (Octet string)";break;case e.Type.NULL:s+=" (Null)";break;case e.Type.OID:s+=" (Object Identifier)";break;case e.Type.ODESC:s+=" (Object Descriptor)";break;case e.Type.EXTERNAL:s+=" (External or Instance of)";break;case e.Type.REAL:s+=" (Real)";break;case e.Type.ENUMERATED:s+=" (Enumerated)";break;case e.Type.EMBEDDED:s+=" (Embedded PDV)";break;case e.Type.UTF8:s+=" (UTF8)";break;case e.Type.ROID:s+=" (Relative Object Identifier)";break;case e.Type.SEQUENCE:s+=" (Sequence)";break;case e.Type.SET:s+=" (Set)";break;case e.Type.PRINTABLESTRING:s+=" (Printable String)";break;case e.Type.IA5String:s+=" (IA5String (ASCII))";break;case e.Type.UTCTIME:s+=" (UTC time)";break;case e.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case e.Type.BMPSTRING:s+=" (BMP String)";break}else s+=c.type;if(s+=`
`,s+=h+"Constructed: "+c.constructed+`
`,c.composed){for(var E=0,y="",v=0;v<c.value.length;++v)c.value[v]!==void 0&&(E+=1,y+=e.prettyPrint(c.value[v],a+1,o),v+1<c.value.length&&(y+=","));s+=h+"Sub values: "+E+y}else{if(s+=h+"Value: ",c.type===e.Type.OID){var A=e.derToOid(c.value);s+=A,t.pki&&t.pki.oids&&A in t.pki.oids&&(s+=" ("+t.pki.oids[A]+") ")}if(c.type===e.Type.INTEGER)try{s+=e.derToInteger(c.value)}catch{s+="0x"+t.util.bytesToHex(c.value)}else if(c.type===e.Type.BITSTRING){if(c.value.length>1?s+="0x"+t.util.bytesToHex(c.value.slice(1)):s+="(none)",c.value.length>0){var w=c.value.charCodeAt(0);w==1?s+=" (1 unused bit shown)":w>1&&(s+=" ("+w+" unused bits shown)")}}else if(c.type===e.Type.OCTETSTRING)m.test(c.value)||(s+="("+c.value+") "),s+="0x"+t.util.bytesToHex(c.value);else if(c.type===e.Type.UTF8)try{s+=t.util.decodeUtf8(c.value)}catch(I){if(I.message==="URI malformed")s+="0x"+t.util.bytesToHex(c.value)+" (malformed UTF8)";else throw I}else c.type===e.Type.PRINTABLESTRING||c.type===e.Type.IA5String?s+=c.value:m.test(c.value)?s+="0x"+t.util.bytesToHex(c.value):c.value.length===0?s+="[null]":s+=c.value}return s},asn1.exports}var hmac={exports:{}},md,hasRequiredMd;function requireMd(){if(hasRequiredMd)return md;hasRequiredMd=1;var t=requireForge();return md=t.md=t.md||{},t.md.algorithms=t.md.algorithms||{},md}var hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac.exports;hasRequiredHmac=1;var t=requireForge();requireMd(),requireUtil$7();var e=hmac.exports=t.hmac=t.hmac||{};return e.create=function(){var r=null,u=null,d=null,m=null,c={};return c.start=function(a,o){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in t.md.algorithms)u=t.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else u=a;if(o===null)o=r;else{if(typeof o=="string")o=t.util.createBuffer(o);else if(t.util.isArray(o)){var s=o;o=t.util.createBuffer();for(var h=0;h<s.length;++h)o.putByte(s[h])}var v=o.length();v>u.blockLength&&(u.start(),u.update(o.bytes()),o=u.digest()),d=t.util.createBuffer(),m=t.util.createBuffer(),v=o.length();for(var h=0;h<v;++h){var s=o.at(h);d.putByte(54^s),m.putByte(92^s)}if(v<u.blockLength)for(var s=u.blockLength-v,h=0;h<s;++h)d.putByte(54),m.putByte(92);r=o,d=d.bytes(),m=m.bytes()}u.start(),u.update(d)},c.update=function(a){u.update(a)},c.getMac=function(){var a=u.digest().bytes();return u.start(),u.update(m),u.update(a),u.digest()},c.digest=c.getMac,c},hmac.exports}var md5$3={exports:{}},hasRequiredMd5$2;function requireMd5$2(){if(hasRequiredMd5$2)return md5$3.exports;hasRequiredMd5$2=1;var t=requireForge();requireMd(),requireUtil$7();var e=md5$3.exports=t.md5=t.md5||{};t.md.md5=t.md.algorithms.md5=e,e.create=function(){c||a();var s=null,h=t.util.createBuffer(),v=new Array(16),E={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return E.start=function(){E.messageLength=0,E.fullMessageLength=E.messageLength64=[];for(var y=E.messageLengthSize/4,A=0;A<y;++A)E.fullMessageLength.push(0);return h=t.util.createBuffer(),s={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},E},E.start(),E.update=function(y,A){A==="utf8"&&(y=t.util.encodeUtf8(y));var w=y.length;E.messageLength+=w,w=[w/4294967296>>>0,w>>>0];for(var I=E.fullMessageLength.length-1;I>=0;--I)E.fullMessageLength[I]+=w[1],w[1]=w[0]+(E.fullMessageLength[I]/4294967296>>>0),E.fullMessageLength[I]=E.fullMessageLength[I]>>>0,w[0]=w[1]/4294967296>>>0;return h.putBytes(y),o(s,v,h),(h.read>2048||h.length()===0)&&h.compact(),E},E.digest=function(){var y=t.util.createBuffer();y.putBytes(h.bytes());var A=E.fullMessageLength[E.fullMessageLength.length-1]+E.messageLengthSize,w=A&E.blockLength-1;y.putBytes(r.substr(0,E.blockLength-w));for(var I,_=0,S=E.fullMessageLength.length-1;S>=0;--S)I=E.fullMessageLength[S]*8+_,_=I/4294967296>>>0,y.putInt32Le(I>>>0);var j={h0:s.h0,h1:s.h1,h2:s.h2,h3:s.h3};o(j,v,y);var K=t.util.createBuffer();return K.putInt32Le(j.h0),K.putInt32Le(j.h1),K.putInt32Le(j.h2),K.putInt32Le(j.h3),K},E};var r=null,u=null,d=null,m=null,c=!1;function a(){r="",r+=t.util.fillString("\0",64),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],d=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],m=new Array(64);for(var s=0;s<64;++s)m[s]=Math.floor(Math.abs(Math.sin(s+1))*4294967296);c=!0}function o(s,h,v){for(var E,y,A,w,I,_,S,j,K=v.length();K>=64;){for(y=s.h0,A=s.h1,w=s.h2,I=s.h3,j=0;j<16;++j)h[j]=v.getInt32Le(),_=I^A&(w^I),E=y+_+m[j]+h[j],S=d[j],y=I,I=w,w=A,A+=E<<S|E>>>32-S;for(;j<32;++j)_=w^I&(A^w),E=y+_+m[j]+h[u[j]],S=d[j],y=I,I=w,w=A,A+=E<<S|E>>>32-S;for(;j<48;++j)_=A^w^I,E=y+_+m[j]+h[u[j]],S=d[j],y=I,I=w,w=A,A+=E<<S|E>>>32-S;for(;j<64;++j)_=w^(A|~I),E=y+_+m[j]+h[u[j]],S=d[j],y=I,I=w,w=A,A+=E<<S|E>>>32-S;s.h0=s.h0+y|0,s.h1=s.h1+A|0,s.h2=s.h2+w|0,s.h3=s.h3+I|0,K-=64}}return md5$3.exports}var pem={exports:{}},hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem.exports;hasRequiredPem=1;var t=requireForge();requireUtil$7();var e=pem.exports=t.pem=t.pem||{};e.encode=function(d,m){m=m||{};var c="-----BEGIN "+d.type+`-----\r
`,a;if(d.procType&&(a={name:"Proc-Type",values:[String(d.procType.version),d.procType.type]},c+=r(a)),d.contentDomain&&(a={name:"Content-Domain",values:[d.contentDomain]},c+=r(a)),d.dekInfo&&(a={name:"DEK-Info",values:[d.dekInfo.algorithm]},d.dekInfo.parameters&&a.values.push(d.dekInfo.parameters),c+=r(a)),d.headers)for(var o=0;o<d.headers.length;++o)c+=r(d.headers[o]);return d.procType&&(c+=`\r
`),c+=t.util.encode64(d.body,m.maxline||64)+`\r
`,c+="-----END "+d.type+`-----\r
`,c},e.decode=function(d){for(var m=[],c=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/,s;s=c.exec(d),!!s;){var h=s[1];h==="NEW CERTIFICATE REQUEST"&&(h="CERTIFICATE REQUEST");var v={type:h,procType:null,contentDomain:null,dekInfo:null,headers:[],body:t.util.decode64(s[3])};if(m.push(v),!!s[2]){for(var E=s[2].split(o),y=0;s&&y<E.length;){for(var A=E[y].replace(/\s+$/,""),w=y+1;w<E.length;++w){var I=E[w];if(!/\s/.test(I[0]))break;A+=I,y=w}if(s=A.match(a),s){for(var _={name:s[1],values:[]},S=s[2].split(","),j=0;j<S.length;++j)_.values.push(u(S[j]));if(v.procType)if(!v.contentDomain&&_.name==="Content-Domain")v.contentDomain=S[0]||"";else if(!v.dekInfo&&_.name==="DEK-Info"){if(_.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');v.dekInfo={algorithm:S[0],parameters:S[1]||null}}else v.headers.push(_);else{if(_.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(_.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');v.procType={version:S[0],type:S[1]}}}++y}if(v.procType==="ENCRYPTED"&&!v.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(m.length===0)throw new Error("Invalid PEM formatted message.");return m};function r(d){for(var m=d.name+": ",c=[],a=function(E,y){return" "+y},o=0;o<d.values.length;++o)c.push(d.values[o].replace(/^(\S+\r\n)/,a));m+=c.join(",")+`\r
`;for(var s=0,h=-1,o=0;o<m.length;++o,++s)if(s>65&&h!==-1){var v=m[h];v===","?(++h,m=m.substr(0,h)+`\r
 `+m.substr(h)):m=m.substr(0,h)+`\r
`+v+m.substr(h+1),s=o-h-1,h=-1,++o}else(m[o]===" "||m[o]==="	"||m[o]===",")&&(h=o);return m}function u(d){return d.replace(/^\s+/,"")}return pem.exports}var pki={exports:{}},des,hasRequiredDes;function requireDes(){if(hasRequiredDes)return des;hasRequiredDes=1;var t=requireForge();requireCipher(),requireCipherModes(),requireUtil$7(),des=t.des=t.des||{},t.des.startEncrypting=function(y,A,w,I){var _=E({key:y,output:w,decrypt:!1,mode:I||(A===null?"ECB":"CBC")});return _.start(A),_},t.des.createEncryptionCipher=function(y,A){return E({key:y,output:null,decrypt:!1,mode:A})},t.des.startDecrypting=function(y,A,w,I){var _=E({key:y,output:w,decrypt:!0,mode:I||(A===null?"ECB":"CBC")});return _.start(A),_},t.des.createDecryptionCipher=function(y,A){return E({key:y,output:null,decrypt:!0,mode:A})},t.des.Algorithm=function(y,A){var w=this;w.name=y,w.mode=new A({blockSize:8,cipher:{encrypt:function(I,_){return v(w._keys,I,_,!1)},decrypt:function(I,_){return v(w._keys,I,_,!0)}}}),w._init=!1},t.des.Algorithm.prototype.initialize=function(y){if(!this._init){var A=t.util.createBuffer(y.key);if(this.name.indexOf("3DES")===0&&A.length()!==24)throw new Error("Invalid Triple-DES key size: "+A.length()*8);this._keys=h(A),this._init=!0}},e("DES-ECB",t.cipher.modes.ecb),e("DES-CBC",t.cipher.modes.cbc),e("DES-CFB",t.cipher.modes.cfb),e("DES-OFB",t.cipher.modes.ofb),e("DES-CTR",t.cipher.modes.ctr),e("3DES-ECB",t.cipher.modes.ecb),e("3DES-CBC",t.cipher.modes.cbc),e("3DES-CFB",t.cipher.modes.cfb),e("3DES-OFB",t.cipher.modes.ofb),e("3DES-CTR",t.cipher.modes.ctr);function e(y,A){var w=function(){return new t.des.Algorithm(y,A)};t.cipher.registerAlgorithm(y,w)}var r=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],u=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],d=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],m=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],a=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],o=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],s=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(y){for(var A=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],w=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],I=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],_=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],S=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],j=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],K=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],J=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],H=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],U=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],P=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],Z=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],ie=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],ue=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],le=y.length()>8?3:1,ne=[],ye=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],fe=0,Te,Ae=0;Ae<le;Ae++){var Se=y.getInt32(),be=y.getInt32();Te=(Se>>>4^be)&252645135,be^=Te,Se^=Te<<4,Te=(be>>>-16^Se)&65535,Se^=Te,be^=Te<<-16,Te=(Se>>>2^be)&858993459,be^=Te,Se^=Te<<2,Te=(be>>>-16^Se)&65535,Se^=Te,be^=Te<<-16,Te=(Se>>>1^be)&1431655765,be^=Te,Se^=Te<<1,Te=(be>>>8^Se)&16711935,Se^=Te,be^=Te<<8,Te=(Se>>>1^be)&1431655765,be^=Te,Se^=Te<<1,Te=Se<<8|be>>>20&240,Se=be<<24|be<<8&16711680|be>>>8&65280|be>>>24&240,be=Te;for(var we=0;we<ye.length;++we){ye[we]?(Se=Se<<2|Se>>>26,be=be<<2|be>>>26):(Se=Se<<1|Se>>>27,be=be<<1|be>>>27),Se&=-15,be&=-15;var Ce=A[Se>>>28]|w[Se>>>24&15]|I[Se>>>20&15]|_[Se>>>16&15]|S[Se>>>12&15]|j[Se>>>8&15]|K[Se>>>4&15],je=J[be>>>28]|H[be>>>24&15]|U[be>>>20&15]|P[be>>>16&15]|Z[be>>>12&15]|ie[be>>>8&15]|ue[be>>>4&15];Te=(je>>>16^Ce)&65535,ne[fe++]=Ce^Te,ne[fe++]=je^Te<<16}}return ne}function v(y,A,w,I){var _=y.length===32?3:9,S;_===3?S=I?[30,-2,-2]:[0,32,2]:S=I?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var j,K=A[0],J=A[1];j=(K>>>4^J)&252645135,J^=j,K^=j<<4,j=(K>>>16^J)&65535,J^=j,K^=j<<16,j=(J>>>2^K)&858993459,K^=j,J^=j<<2,j=(J>>>8^K)&16711935,K^=j,J^=j<<8,j=(K>>>1^J)&1431655765,J^=j,K^=j<<1,K=K<<1|K>>>31,J=J<<1|J>>>31;for(var H=0;H<_;H+=3){for(var U=S[H+1],P=S[H+2],Z=S[H];Z!=U;Z+=P){var ie=J^y[Z],ue=(J>>>4|J<<28)^y[Z+1];j=K,K=J,J=j^(u[ie>>>24&63]|m[ie>>>16&63]|a[ie>>>8&63]|s[ie&63]|r[ue>>>24&63]|d[ue>>>16&63]|c[ue>>>8&63]|o[ue&63])}j=K,K=J,J=j}K=K>>>1|K<<31,J=J>>>1|J<<31,j=(K>>>1^J)&1431655765,J^=j,K^=j<<1,j=(J>>>8^K)&16711935,K^=j,J^=j<<8,j=(J>>>2^K)&858993459,K^=j,J^=j<<2,j=(K>>>16^J)&65535,J^=j,K^=j<<16,j=(K>>>4^J)&252645135,J^=j,K^=j<<4,w[0]=K,w[1]=J}function E(y){y=y||{};var A=(y.mode||"CBC").toUpperCase(),w="DES-"+A,I;y.decrypt?I=t.cipher.createDecipher(w,y.key):I=t.cipher.createCipher(w,y.key);var _=I.start;return I.start=function(S,j){var K=null;j instanceof t.util.ByteBuffer&&(K=j,j={}),j=j||{},j.output=K,j.iv=S,_.call(I,j)},I}return des}var pbkdf2,hasRequiredPbkdf2;function requirePbkdf2(){if(hasRequiredPbkdf2)return pbkdf2;hasRequiredPbkdf2=1;var t=requireForge();requireHmac(),requireMd(),requireUtil$7();var e=t.pkcs5=t.pkcs5||{},r;return t.util.isNodejs&&!t.options.usePureJavaScript&&(r=require$$1$3),pbkdf2=t.pbkdf2=e.pbkdf2=function(u,d,m,c,a,o){if(typeof a=="function"&&(o=a,a=null),t.util.isNodejs&&!t.options.usePureJavaScript&&r.pbkdf2&&(a===null||typeof a!="object")&&(r.pbkdf2Sync.length>4||!a||a==="sha1"))return typeof a!="string"&&(a="sha1"),u=Buffer.from(u,"binary"),d=Buffer.from(d,"binary"),o?r.pbkdf2Sync.length===4?r.pbkdf2(u,d,m,c,function(H,U){if(H)return o(H);o(null,U.toString("binary"))}):r.pbkdf2(u,d,m,c,a,function(H,U){if(H)return o(H);o(null,U.toString("binary"))}):r.pbkdf2Sync.length===4?r.pbkdf2Sync(u,d,m,c).toString("binary"):r.pbkdf2Sync(u,d,m,c,a).toString("binary");if((typeof a>"u"||a===null)&&(a="sha1"),typeof a=="string"){if(!(a in t.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=t.md[a].create()}var s=a.digestLength;if(c>4294967295*s){var h=new Error("Derived key is too long.");if(o)return o(h);throw h}var v=Math.ceil(c/s),E=c-(v-1)*s,y=t.hmac.create();y.start(a,u);var A="",w,I,_;if(!o){for(var S=1;S<=v;++S){y.start(null,null),y.update(d),y.update(t.util.int32ToBytes(S)),w=_=y.digest().getBytes();for(var j=2;j<=m;++j)y.start(null,null),y.update(_),I=y.digest().getBytes(),w=t.util.xorBytes(w,I,s),_=I;A+=S<v?w:w.substr(0,E)}return A}var S=1,j;function K(){if(S>v)return o(null,A);y.start(null,null),y.update(d),y.update(t.util.int32ToBytes(S)),w=_=y.digest().getBytes(),j=2,J()}function J(){if(j<=m)return y.start(null,null),y.update(_),I=y.digest().getBytes(),w=t.util.xorBytes(w,I,s),_=I,++j,t.util.setImmediate(J);A+=S<v?w:w.substr(0,E),++S,K()}K()},pbkdf2}var random$1={exports:{}},sha256={exports:{}},hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256.exports;hasRequiredSha256=1;var t=requireForge();requireMd(),requireUtil$7();var e=sha256.exports=t.sha256=t.sha256||{};t.md.sha256=t.md.algorithms.sha256=e,e.create=function(){u||m();var a=null,o=t.util.createBuffer(),s=new Array(64),h={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return h.start=function(){h.messageLength=0,h.fullMessageLength=h.messageLength64=[];for(var v=h.messageLengthSize/4,E=0;E<v;++E)h.fullMessageLength.push(0);return o=t.util.createBuffer(),a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},h},h.start(),h.update=function(v,E){E==="utf8"&&(v=t.util.encodeUtf8(v));var y=v.length;h.messageLength+=y,y=[y/4294967296>>>0,y>>>0];for(var A=h.fullMessageLength.length-1;A>=0;--A)h.fullMessageLength[A]+=y[1],y[1]=y[0]+(h.fullMessageLength[A]/4294967296>>>0),h.fullMessageLength[A]=h.fullMessageLength[A]>>>0,y[0]=y[1]/4294967296>>>0;return o.putBytes(v),c(a,s,o),(o.read>2048||o.length()===0)&&o.compact(),h},h.digest=function(){var v=t.util.createBuffer();v.putBytes(o.bytes());var E=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize,y=E&h.blockLength-1;v.putBytes(r.substr(0,h.blockLength-y));for(var A,w,I=h.fullMessageLength[0]*8,_=0;_<h.fullMessageLength.length-1;++_)A=h.fullMessageLength[_+1]*8,w=A/4294967296>>>0,I+=w,v.putInt32(I>>>0),I=A>>>0;v.putInt32(I);var S={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4,h5:a.h5,h6:a.h6,h7:a.h7};c(S,s,v);var j=t.util.createBuffer();return j.putInt32(S.h0),j.putInt32(S.h1),j.putInt32(S.h2),j.putInt32(S.h3),j.putInt32(S.h4),j.putInt32(S.h5),j.putInt32(S.h6),j.putInt32(S.h7),j},h};var r=null,u=!1,d=null;function m(){r="",r+=t.util.fillString("\0",64),d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=!0}function c(a,o,s){for(var h,v,E,y,A,w,I,_,S,j,K,J,H,U,P,Z=s.length();Z>=64;){for(I=0;I<16;++I)o[I]=s.getInt32();for(;I<64;++I)h=o[I-2],h=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,v=o[I-15],v=(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3,o[I]=h+o[I-7]+v+o[I-16]|0;for(_=a.h0,S=a.h1,j=a.h2,K=a.h3,J=a.h4,H=a.h5,U=a.h6,P=a.h7,I=0;I<64;++I)y=(J>>>6|J<<26)^(J>>>11|J<<21)^(J>>>25|J<<7),A=U^J&(H^U),E=(_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10),w=_&S|j&(_^S),h=P+y+A+d[I]+o[I],v=E+w,P=U,U=H,H=J,J=K+h>>>0,K=j,j=S,S=_,_=h+v>>>0;a.h0=a.h0+_|0,a.h1=a.h1+S|0,a.h2=a.h2+j|0,a.h3=a.h3+K|0,a.h4=a.h4+J|0,a.h5=a.h5+H|0,a.h6=a.h6+U|0,a.h7=a.h7+P|0,Z-=64}}return sha256.exports}var prng={exports:{}},hasRequiredPrng;function requirePrng(){if(hasRequiredPrng)return prng.exports;hasRequiredPrng=1;var t=requireForge();requireUtil$7();var e=null;t.util.isNodejs&&!t.options.usePureJavaScript&&!process.versions["node-webkit"]&&(e=require$$1$3);var r=prng.exports=t.prng=t.prng||{};return r.create=function(u){for(var d={plugin:u,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},m=u.md,c=new Array(32),a=0;a<32;++a)c[a]=m.create();d.pools=c,d.pool=0,d.generate=function(E,y){if(!y)return d.generateSync(E);var A=d.plugin.cipher,w=d.plugin.increment,I=d.plugin.formatKey,_=d.plugin.formatSeed,S=t.util.createBuffer();d.key=null,j();function j(K){if(K)return y(K);if(S.length()>=E)return y(null,S.getBytes(E));if(d.generated>1048575&&(d.key=null),d.key===null)return t.util.nextTick(function(){o(j)});var J=A(d.key,d.seed);d.generated+=J.length,S.putBytes(J),d.key=I(A(d.key,w(d.seed))),d.seed=_(A(d.key,d.seed)),t.util.setImmediate(j)}},d.generateSync=function(E){var y=d.plugin.cipher,A=d.plugin.increment,w=d.plugin.formatKey,I=d.plugin.formatSeed;d.key=null;for(var _=t.util.createBuffer();_.length()<E;){d.generated>1048575&&(d.key=null),d.key===null&&s();var S=y(d.key,d.seed);d.generated+=S.length,_.putBytes(S),d.key=w(y(d.key,A(d.seed))),d.seed=I(y(d.key,d.seed))}return _.getBytes(E)};function o(E){if(d.pools[0].messageLength>=32)return h(),E();var y=32-d.pools[0].messageLength<<5;d.seedFile(y,function(A,w){if(A)return E(A);d.collect(w),h(),E()})}function s(){if(d.pools[0].messageLength>=32)return h();var E=32-d.pools[0].messageLength<<5;d.collect(d.seedFileSync(E)),h()}function h(){d.reseeds=d.reseeds===4294967295?0:d.reseeds+1;var E=d.plugin.md.create();E.update(d.keyBytes);for(var y=1,A=0;A<32;++A)d.reseeds%y===0&&(E.update(d.pools[A].digest().getBytes()),d.pools[A].start()),y=y<<1;d.keyBytes=E.digest().getBytes(),E.start(),E.update(d.keyBytes);var w=E.digest().getBytes();d.key=d.plugin.formatKey(d.keyBytes),d.seed=d.plugin.formatSeed(w),d.generated=0}function v(E){var y=null,A=t.util.globalScope,w=A.crypto||A.msCrypto;w&&w.getRandomValues&&(y=function(P){return w.getRandomValues(P)});var I=t.util.createBuffer();if(y)for(;I.length()<E;){var _=Math.max(1,Math.min(E-I.length(),65536)/4),S=new Uint32Array(Math.floor(_));try{y(S);for(var j=0;j<S.length;++j)I.putInt32(S[j])}catch(P){if(!(typeof QuotaExceededError<"u"&&P instanceof QuotaExceededError))throw P}}if(I.length()<E)for(var K,J,H,U=Math.floor(Math.random()*65536);I.length()<E;){J=16807*(U&65535),K=16807*(U>>16),J+=(K&32767)<<16,J+=K>>15,J=(J&2147483647)+(J>>31),U=J&4294967295;for(var j=0;j<3;++j)H=U>>>(j<<3),H^=Math.floor(Math.random()*256),I.putByte(H&255)}return I.getBytes(E)}return e?(d.seedFile=function(E,y){e.randomBytes(E,function(A,w){if(A)return y(A);y(null,w.toString())})},d.seedFileSync=function(E){return e.randomBytes(E).toString()}):(d.seedFile=function(E,y){try{y(null,v(E))}catch(A){y(A)}},d.seedFileSync=v),d.collect=function(E){for(var y=E.length,A=0;A<y;++A)d.pools[d.pool].update(E.substr(A,1)),d.pool=d.pool===31?0:d.pool+1},d.collectInt=function(E,y){for(var A="",w=0;w<y;w+=8)A+=String.fromCharCode(E>>w&255);d.collect(A)},d.registerWorker=function(E){if(E===self)d.seedFile=function(A,w){function I(_){var S=_.data;S.forge&&S.forge.prng&&(self.removeEventListener("message",I),w(S.forge.prng.err,S.forge.prng.bytes))}self.addEventListener("message",I),self.postMessage({forge:{prng:{needed:A}}})};else{var y=function(A){var w=A.data;w.forge&&w.forge.prng&&d.seedFile(w.forge.prng.needed,function(I,_){E.postMessage({forge:{prng:{err:I,bytes:_}}})})};E.addEventListener("message",y)}},d},prng.exports}var hasRequiredRandom;function requireRandom(){if(hasRequiredRandom)return random$1.exports;hasRequiredRandom=1;var t=requireForge();return requireAes(),requireSha256(),requirePrng(),requireUtil$7(),function(){if(t.random&&t.random.getBytes){random$1.exports=t.random;return}(function(e){var r={},u=new Array(4),d=t.util.createBuffer();r.formatKey=function(E){var y=t.util.createBuffer(E);return E=new Array(4),E[0]=y.getInt32(),E[1]=y.getInt32(),E[2]=y.getInt32(),E[3]=y.getInt32(),t.aes._expandKey(E,!1)},r.formatSeed=function(E){var y=t.util.createBuffer(E);return E=new Array(4),E[0]=y.getInt32(),E[1]=y.getInt32(),E[2]=y.getInt32(),E[3]=y.getInt32(),E},r.cipher=function(E,y){return t.aes._updateBlock(E,y,u,!1),d.putInt32(u[0]),d.putInt32(u[1]),d.putInt32(u[2]),d.putInt32(u[3]),d.getBytes()},r.increment=function(E){return++E[3],E},r.md=t.md.sha256;function m(){var E=t.prng.create(r);return E.getBytes=function(y,A){return E.generate(y,A)},E.getBytesSync=function(y){return E.generate(y)},E}var c=m(),a=null,o=t.util.globalScope,s=o.crypto||o.msCrypto;if(s&&s.getRandomValues&&(a=function(E){return s.getRandomValues(E)}),t.options.usePureJavaScript||!t.util.isNodejs&&!a){if(c.collectInt(+new Date,32),typeof navigator<"u"){var h="";for(var v in navigator)try{typeof navigator[v]=="string"&&(h+=navigator[v])}catch{}c.collect(h),h=null}e&&(e().mousemove(function(E){c.collectInt(E.clientX,16),c.collectInt(E.clientY,16)}),e().keypress(function(E){c.collectInt(E.charCode,8)}))}if(!t.random)t.random=c;else for(var v in c)t.random[v]=c[v];t.random.createInstance=m,random$1.exports=t.random})(typeof jQuery<"u"?jQuery:null)}(),random$1.exports}var rc2,hasRequiredRc2;function requireRc2(){if(hasRequiredRc2)return rc2;hasRequiredRc2=1;var t=requireForge();requireUtil$7();var e=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],r=[1,2,3,5],u=function(c,a){return c<<a&65535|(c&65535)>>16-a},d=function(c,a){return(c&65535)>>a|c<<16-a&65535};rc2=t.rc2=t.rc2||{},t.rc2.expandKey=function(c,a){typeof c=="string"&&(c=t.util.createBuffer(c)),a=a||128;var o=c,s=c.length(),h=a,v=Math.ceil(h/8),E=255>>(h&7),y;for(y=s;y<128;y++)o.putByte(e[o.at(y-1)+o.at(y-s)&255]);for(o.setAt(128-v,e[o.at(128-v)&E]),y=127-v;y>=0;y--)o.setAt(y,e[o.at(y+1)^o.at(y+v)]);return o};var m=function(c,a,o){var s=!1,h=null,v=null,E=null,y,A,w,I,_=[];for(c=t.rc2.expandKey(c,a),w=0;w<64;w++)_.push(c.getInt16Le());o?(y=function(K){for(w=0;w<4;w++)K[w]+=_[I]+(K[(w+3)%4]&K[(w+2)%4])+(~K[(w+3)%4]&K[(w+1)%4]),K[w]=u(K[w],r[w]),I++},A=function(K){for(w=0;w<4;w++)K[w]+=_[K[(w+3)%4]&63]}):(y=function(K){for(w=3;w>=0;w--)K[w]=d(K[w],r[w]),K[w]-=_[I]+(K[(w+3)%4]&K[(w+2)%4])+(~K[(w+3)%4]&K[(w+1)%4]),I--},A=function(K){for(w=3;w>=0;w--)K[w]-=_[K[(w+3)%4]&63]});var S=function(K){var J=[];for(w=0;w<4;w++){var H=h.getInt16Le();E!==null&&(o?H^=E.getInt16Le():E.putInt16Le(H)),J.push(H&65535)}I=o?0:63;for(var U=0;U<K.length;U++)for(var P=0;P<K[U][0];P++)K[U][1](J);for(w=0;w<4;w++)E!==null&&(o?E.putInt16Le(J[w]):J[w]^=E.getInt16Le()),v.putInt16Le(J[w])},j=null;return j={start:function(K,J){K&&typeof K=="string"&&(K=t.util.createBuffer(K)),s=!1,h=t.util.createBuffer(),v=J||new t.util.createBuffer,E=K,j.output=v},update:function(K){for(s||h.putBuffer(K);h.length()>=8;)S([[5,y],[1,A],[6,y],[1,A],[5,y]])},finish:function(K){var J=!0;if(o)if(K)J=K(8,h,!o);else{var H=h.length()===8?8:8-h.length();h.fillWithByte(H,H)}if(J&&(s=!0,j.update()),!o&&(J=h.length()===0,J))if(K)J=K(8,v,!o);else{var U=v.length(),P=v.at(U-1);P>U?J=!1:v.truncate(P)}return J}},j};return t.rc2.startEncrypting=function(c,a,o){var s=t.rc2.createEncryptionCipher(c,128);return s.start(a,o),s},t.rc2.createEncryptionCipher=function(c,a){return m(c,a,!0)},t.rc2.startDecrypting=function(c,a,o){var s=t.rc2.createDecryptionCipher(c,128);return s.start(a,o),s},t.rc2.createDecryptionCipher=function(c,a){return m(c,a,!1)},rc2}var jsbn,hasRequiredJsbn;function requireJsbn(){if(hasRequiredJsbn)return jsbn;hasRequiredJsbn=1;var t=requireForge();jsbn=t.jsbn=t.jsbn||{};var e;function r(Ue,We,ze){this.data=[],Ue!=null&&(typeof Ue=="number"?this.fromNumber(Ue,We,ze):We==null&&typeof Ue!="string"?this.fromString(Ue,256):this.fromString(Ue,We))}t.jsbn.BigInteger=r;function u(){return new r(null)}function d(Ue,We,ze,yt,tr,er){for(;--er>=0;){var fr=We*this.data[Ue++]+ze.data[yt]+tr;tr=Math.floor(fr/67108864),ze.data[yt++]=fr&67108863}return tr}function m(Ue,We,ze,yt,tr,er){for(var fr=We&32767,sr=We>>15;--er>=0;){var Qr=this.data[Ue]&32767,Pn=this.data[Ue++]>>15,Qn=sr*Qr+Pn*fr;Qr=fr*Qr+((Qn&32767)<<15)+ze.data[yt]+(tr&1073741823),tr=(Qr>>>30)+(Qn>>>15)+sr*Pn+(tr>>>30),ze.data[yt++]=Qr&1073741823}return tr}function c(Ue,We,ze,yt,tr,er){for(var fr=We&16383,sr=We>>14;--er>=0;){var Qr=this.data[Ue]&16383,Pn=this.data[Ue++]>>14,Qn=sr*Qr+Pn*fr;Qr=fr*Qr+((Qn&16383)<<14)+ze.data[yt]+tr,tr=(Qr>>28)+(Qn>>14)+sr*Pn,ze.data[yt++]=Qr&268435455}return tr}typeof navigator>"u"?(r.prototype.am=c,e=28):navigator.appName=="Microsoft Internet Explorer"?(r.prototype.am=m,e=30):navigator.appName!="Netscape"?(r.prototype.am=d,e=26):(r.prototype.am=c,e=28),r.prototype.DB=e,r.prototype.DM=(1<<e)-1,r.prototype.DV=1<<e;var a=52;r.prototype.FV=Math.pow(2,a),r.prototype.F1=a-e,r.prototype.F2=2*e-a;var o="0123456789abcdefghijklmnopqrstuvwxyz",s=new Array,h,v;for(h=48,v=0;v<=9;++v)s[h++]=v;for(h=97,v=10;v<36;++v)s[h++]=v;for(h=65,v=10;v<36;++v)s[h++]=v;function E(Ue){return o.charAt(Ue)}function y(Ue,We){var ze=s[Ue.charCodeAt(We)];return ze??-1}function A(Ue){for(var We=this.t-1;We>=0;--We)Ue.data[We]=this.data[We];Ue.t=this.t,Ue.s=this.s}function w(Ue){this.t=1,this.s=Ue<0?-1:0,Ue>0?this.data[0]=Ue:Ue<-1?this.data[0]=Ue+this.DV:this.t=0}function I(Ue){var We=u();return We.fromInt(Ue),We}function _(Ue,We){var ze;if(We==16)ze=4;else if(We==8)ze=3;else if(We==256)ze=8;else if(We==2)ze=1;else if(We==32)ze=5;else if(We==4)ze=2;else{this.fromRadix(Ue,We);return}this.t=0,this.s=0;for(var yt=Ue.length,tr=!1,er=0;--yt>=0;){var fr=ze==8?Ue[yt]&255:y(Ue,yt);if(fr<0){Ue.charAt(yt)=="-"&&(tr=!0);continue}tr=!1,er==0?this.data[this.t++]=fr:er+ze>this.DB?(this.data[this.t-1]|=(fr&(1<<this.DB-er)-1)<<er,this.data[this.t++]=fr>>this.DB-er):this.data[this.t-1]|=fr<<er,er+=ze,er>=this.DB&&(er-=this.DB)}ze==8&&(Ue[0]&128)!=0&&(this.s=-1,er>0&&(this.data[this.t-1]|=(1<<this.DB-er)-1<<er)),this.clamp(),tr&&r.ZERO.subTo(this,this)}function S(){for(var Ue=this.s&this.DM;this.t>0&&this.data[this.t-1]==Ue;)--this.t}function j(Ue){if(this.s<0)return"-"+this.negate().toString(Ue);var We;if(Ue==16)We=4;else if(Ue==8)We=3;else if(Ue==2)We=1;else if(Ue==32)We=5;else if(Ue==4)We=2;else return this.toRadix(Ue);var ze=(1<<We)-1,yt,tr=!1,er="",fr=this.t,sr=this.DB-fr*this.DB%We;if(fr-- >0)for(sr<this.DB&&(yt=this.data[fr]>>sr)>0&&(tr=!0,er=E(yt));fr>=0;)sr<We?(yt=(this.data[fr]&(1<<sr)-1)<<We-sr,yt|=this.data[--fr]>>(sr+=this.DB-We)):(yt=this.data[fr]>>(sr-=We)&ze,sr<=0&&(sr+=this.DB,--fr)),yt>0&&(tr=!0),tr&&(er+=E(yt));return tr?er:"0"}function K(){var Ue=u();return r.ZERO.subTo(this,Ue),Ue}function J(){return this.s<0?this.negate():this}function H(Ue){var We=this.s-Ue.s;if(We!=0)return We;var ze=this.t;if(We=ze-Ue.t,We!=0)return this.s<0?-We:We;for(;--ze>=0;)if((We=this.data[ze]-Ue.data[ze])!=0)return We;return 0}function U(Ue){var We=1,ze;return(ze=Ue>>>16)!=0&&(Ue=ze,We+=16),(ze=Ue>>8)!=0&&(Ue=ze,We+=8),(ze=Ue>>4)!=0&&(Ue=ze,We+=4),(ze=Ue>>2)!=0&&(Ue=ze,We+=2),(ze=Ue>>1)!=0&&(Ue=ze,We+=1),We}function P(){return this.t<=0?0:this.DB*(this.t-1)+U(this.data[this.t-1]^this.s&this.DM)}function Z(Ue,We){var ze;for(ze=this.t-1;ze>=0;--ze)We.data[ze+Ue]=this.data[ze];for(ze=Ue-1;ze>=0;--ze)We.data[ze]=0;We.t=this.t+Ue,We.s=this.s}function ie(Ue,We){for(var ze=Ue;ze<this.t;++ze)We.data[ze-Ue]=this.data[ze];We.t=Math.max(this.t-Ue,0),We.s=this.s}function ue(Ue,We){var ze=Ue%this.DB,yt=this.DB-ze,tr=(1<<yt)-1,er=Math.floor(Ue/this.DB),fr=this.s<<ze&this.DM,sr;for(sr=this.t-1;sr>=0;--sr)We.data[sr+er+1]=this.data[sr]>>yt|fr,fr=(this.data[sr]&tr)<<ze;for(sr=er-1;sr>=0;--sr)We.data[sr]=0;We.data[er]=fr,We.t=this.t+er+1,We.s=this.s,We.clamp()}function le(Ue,We){We.s=this.s;var ze=Math.floor(Ue/this.DB);if(ze>=this.t){We.t=0;return}var yt=Ue%this.DB,tr=this.DB-yt,er=(1<<yt)-1;We.data[0]=this.data[ze]>>yt;for(var fr=ze+1;fr<this.t;++fr)We.data[fr-ze-1]|=(this.data[fr]&er)<<tr,We.data[fr-ze]=this.data[fr]>>yt;yt>0&&(We.data[this.t-ze-1]|=(this.s&er)<<tr),We.t=this.t-ze,We.clamp()}function ne(Ue,We){for(var ze=0,yt=0,tr=Math.min(Ue.t,this.t);ze<tr;)yt+=this.data[ze]-Ue.data[ze],We.data[ze++]=yt&this.DM,yt>>=this.DB;if(Ue.t<this.t){for(yt-=Ue.s;ze<this.t;)yt+=this.data[ze],We.data[ze++]=yt&this.DM,yt>>=this.DB;yt+=this.s}else{for(yt+=this.s;ze<Ue.t;)yt-=Ue.data[ze],We.data[ze++]=yt&this.DM,yt>>=this.DB;yt-=Ue.s}We.s=yt<0?-1:0,yt<-1?We.data[ze++]=this.DV+yt:yt>0&&(We.data[ze++]=yt),We.t=ze,We.clamp()}function ye(Ue,We){var ze=this.abs(),yt=Ue.abs(),tr=ze.t;for(We.t=tr+yt.t;--tr>=0;)We.data[tr]=0;for(tr=0;tr<yt.t;++tr)We.data[tr+ze.t]=ze.am(0,yt.data[tr],We,tr,0,ze.t);We.s=0,We.clamp(),this.s!=Ue.s&&r.ZERO.subTo(We,We)}function fe(Ue){for(var We=this.abs(),ze=Ue.t=2*We.t;--ze>=0;)Ue.data[ze]=0;for(ze=0;ze<We.t-1;++ze){var yt=We.am(ze,We.data[ze],Ue,2*ze,0,1);(Ue.data[ze+We.t]+=We.am(ze+1,2*We.data[ze],Ue,2*ze+1,yt,We.t-ze-1))>=We.DV&&(Ue.data[ze+We.t]-=We.DV,Ue.data[ze+We.t+1]=1)}Ue.t>0&&(Ue.data[Ue.t-1]+=We.am(ze,We.data[ze],Ue,2*ze,0,1)),Ue.s=0,Ue.clamp()}function Te(Ue,We,ze){var yt=Ue.abs();if(!(yt.t<=0)){var tr=this.abs();if(tr.t<yt.t){We?.fromInt(0),ze!=null&&this.copyTo(ze);return}ze==null&&(ze=u());var er=u(),fr=this.s,sr=Ue.s,Qr=this.DB-U(yt.data[yt.t-1]);Qr>0?(yt.lShiftTo(Qr,er),tr.lShiftTo(Qr,ze)):(yt.copyTo(er),tr.copyTo(ze));var Pn=er.t,Qn=er.data[Pn-1];if(Qn!=0){var Sn=Qn*(1<<this.F1)+(Pn>1?er.data[Pn-2]>>this.F2:0),dn=this.FV/Sn,$n=(1<<this.F1)/Sn,On=1<<this.F2,qn=ze.t,vr=qn-Pn,Dn=We??u();for(er.dlShiftTo(vr,Dn),ze.compareTo(Dn)>=0&&(ze.data[ze.t++]=1,ze.subTo(Dn,ze)),r.ONE.dlShiftTo(Pn,Dn),Dn.subTo(er,er);er.t<Pn;)er.data[er.t++]=0;for(;--vr>=0;){var Lr=ze.data[--qn]==Qn?this.DM:Math.floor(ze.data[qn]*dn+(ze.data[qn-1]+On)*$n);if((ze.data[qn]+=er.am(0,Lr,ze,vr,0,Pn))<Lr)for(er.dlShiftTo(vr,Dn),ze.subTo(Dn,ze);ze.data[qn]<--Lr;)ze.subTo(Dn,ze)}We!=null&&(ze.drShiftTo(Pn,We),fr!=sr&&r.ZERO.subTo(We,We)),ze.t=Pn,ze.clamp(),Qr>0&&ze.rShiftTo(Qr,ze),fr<0&&r.ZERO.subTo(ze,ze)}}}function Ae(Ue){var We=u();return this.abs().divRemTo(Ue,null,We),this.s<0&&We.compareTo(r.ZERO)>0&&Ue.subTo(We,We),We}function Se(Ue){this.m=Ue}function be(Ue){return Ue.s<0||Ue.compareTo(this.m)>=0?Ue.mod(this.m):Ue}function we(Ue){return Ue}function Ce(Ue){Ue.divRemTo(this.m,null,Ue)}function je(Ue,We,ze){Ue.multiplyTo(We,ze),this.reduce(ze)}function Fe(Ue,We){Ue.squareTo(We),this.reduce(We)}Se.prototype.convert=be,Se.prototype.revert=we,Se.prototype.reduce=Ce,Se.prototype.mulTo=je,Se.prototype.sqrTo=Fe;function Ve(){if(this.t<1)return 0;var Ue=this.data[0];if((Ue&1)==0)return 0;var We=Ue&3;return We=We*(2-(Ue&15)*We)&15,We=We*(2-(Ue&255)*We)&255,We=We*(2-((Ue&65535)*We&65535))&65535,We=We*(2-Ue*We%this.DV)%this.DV,We>0?this.DV-We:-We}function Ge(Ue){this.m=Ue,this.mp=Ue.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<Ue.DB-15)-1,this.mt2=2*Ue.t}function Le(Ue){var We=u();return Ue.abs().dlShiftTo(this.m.t,We),We.divRemTo(this.m,null,We),Ue.s<0&&We.compareTo(r.ZERO)>0&&this.m.subTo(We,We),We}function Be(Ue){var We=u();return Ue.copyTo(We),this.reduce(We),We}function $e(Ue){for(;Ue.t<=this.mt2;)Ue.data[Ue.t++]=0;for(var We=0;We<this.m.t;++We){var ze=Ue.data[We]&32767,yt=ze*this.mpl+((ze*this.mph+(Ue.data[We]>>15)*this.mpl&this.um)<<15)&Ue.DM;for(ze=We+this.m.t,Ue.data[ze]+=this.m.am(0,yt,Ue,We,0,this.m.t);Ue.data[ze]>=Ue.DV;)Ue.data[ze]-=Ue.DV,Ue.data[++ze]++}Ue.clamp(),Ue.drShiftTo(this.m.t,Ue),Ue.compareTo(this.m)>=0&&Ue.subTo(this.m,Ue)}function he(Ue,We){Ue.squareTo(We),this.reduce(We)}function p(Ue,We,ze){Ue.multiplyTo(We,ze),this.reduce(ze)}Ge.prototype.convert=Le,Ge.prototype.revert=Be,Ge.prototype.reduce=$e,Ge.prototype.mulTo=p,Ge.prototype.sqrTo=he;function V(){return(this.t>0?this.data[0]&1:this.s)==0}function R(Ue,We){if(Ue>4294967295||Ue<1)return r.ONE;var ze=u(),yt=u(),tr=We.convert(this),er=U(Ue)-1;for(tr.copyTo(ze);--er>=0;)if(We.sqrTo(ze,yt),(Ue&1<<er)>0)We.mulTo(yt,tr,ze);else{var fr=ze;ze=yt,yt=fr}return We.revert(ze)}function ce(Ue,We){var ze;return Ue<256||We.isEven()?ze=new Se(We):ze=new Ge(We),this.exp(Ue,ze)}r.prototype.copyTo=A,r.prototype.fromInt=w,r.prototype.fromString=_,r.prototype.clamp=S,r.prototype.dlShiftTo=Z,r.prototype.drShiftTo=ie,r.prototype.lShiftTo=ue,r.prototype.rShiftTo=le,r.prototype.subTo=ne,r.prototype.multiplyTo=ye,r.prototype.squareTo=fe,r.prototype.divRemTo=Te,r.prototype.invDigit=Ve,r.prototype.isEven=V,r.prototype.exp=R,r.prototype.toString=j,r.prototype.negate=K,r.prototype.abs=J,r.prototype.compareTo=H,r.prototype.bitLength=P,r.prototype.mod=Ae,r.prototype.modPowInt=ce,r.ZERO=I(0),r.ONE=I(1);function Re(){var Ue=u();return this.copyTo(Ue),Ue}function ke(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function qe(){return this.t==0?this.s:this.data[0]<<24>>24}function g(){return this.t==0?this.s:this.data[0]<<16>>16}function ee(Ue){return Math.floor(Math.LN2*this.DB/Math.log(Ue))}function ae(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function l(Ue){if(Ue==null&&(Ue=10),this.signum()==0||Ue<2||Ue>36)return"0";var We=this.chunkSize(Ue),ze=Math.pow(Ue,We),yt=I(ze),tr=u(),er=u(),fr="";for(this.divRemTo(yt,tr,er);tr.signum()>0;)fr=(ze+er.intValue()).toString(Ue).substr(1)+fr,tr.divRemTo(yt,tr,er);return er.intValue().toString(Ue)+fr}function X(Ue,We){this.fromInt(0),We==null&&(We=10);for(var ze=this.chunkSize(We),yt=Math.pow(We,ze),tr=!1,er=0,fr=0,sr=0;sr<Ue.length;++sr){var Qr=y(Ue,sr);if(Qr<0){Ue.charAt(sr)=="-"&&this.signum()==0&&(tr=!0);continue}fr=We*fr+Qr,++er>=ze&&(this.dMultiply(yt),this.dAddOffset(fr,0),er=0,fr=0)}er>0&&(this.dMultiply(Math.pow(We,er)),this.dAddOffset(fr,0)),tr&&r.ZERO.subTo(this,this)}function oe(Ue,We,ze){if(typeof We=="number")if(Ue<2)this.fromInt(1);else for(this.fromNumber(Ue,ze),this.testBit(Ue-1)||this.bitwiseTo(r.ONE.shiftLeft(Ue-1),Rr,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(We);)this.dAddOffset(2,0),this.bitLength()>Ue&&this.subTo(r.ONE.shiftLeft(Ue-1),this);else{var yt=new Array,tr=Ue&7;yt.length=(Ue>>3)+1,We.nextBytes(yt),tr>0?yt[0]&=(1<<tr)-1:yt[0]=0,this.fromString(yt,256)}}function _e(){var Ue=this.t,We=new Array;We[0]=this.s;var ze=this.DB-Ue*this.DB%8,yt,tr=0;if(Ue-- >0)for(ze<this.DB&&(yt=this.data[Ue]>>ze)!=(this.s&this.DM)>>ze&&(We[tr++]=yt|this.s<<this.DB-ze);Ue>=0;)ze<8?(yt=(this.data[Ue]&(1<<ze)-1)<<8-ze,yt|=this.data[--Ue]>>(ze+=this.DB-8)):(yt=this.data[Ue]>>(ze-=8)&255,ze<=0&&(ze+=this.DB,--Ue)),(yt&128)!=0&&(yt|=-256),tr==0&&(this.s&128)!=(yt&128)&&++tr,(tr>0||yt!=this.s)&&(We[tr++]=yt);return We}function He(Ue){return this.compareTo(Ue)==0}function nt(Ue){return this.compareTo(Ue)<0?this:Ue}function It(Ue){return this.compareTo(Ue)>0?this:Ue}function wt(Ue,We,ze){var yt,tr,er=Math.min(Ue.t,this.t);for(yt=0;yt<er;++yt)ze.data[yt]=We(this.data[yt],Ue.data[yt]);if(Ue.t<this.t){for(tr=Ue.s&this.DM,yt=er;yt<this.t;++yt)ze.data[yt]=We(this.data[yt],tr);ze.t=this.t}else{for(tr=this.s&this.DM,yt=er;yt<Ue.t;++yt)ze.data[yt]=We(tr,Ue.data[yt]);ze.t=Ue.t}ze.s=We(this.s,Ue.s),ze.clamp()}function ir(Ue,We){return Ue&We}function _r(Ue){var We=u();return this.bitwiseTo(Ue,ir,We),We}function Rr(Ue,We){return Ue|We}function Hr(Ue){var We=u();return this.bitwiseTo(Ue,Rr,We),We}function Vr(Ue,We){return Ue^We}function Tr(Ue){var We=u();return this.bitwiseTo(Ue,Vr,We),We}function $t(Ue,We){return Ue&~We}function qt(Ue){var We=u();return this.bitwiseTo(Ue,$t,We),We}function Kt(){for(var Ue=u(),We=0;We<this.t;++We)Ue.data[We]=this.DM&~this.data[We];return Ue.t=this.t,Ue.s=~this.s,Ue}function nr(Ue){var We=u();return Ue<0?this.rShiftTo(-Ue,We):this.lShiftTo(Ue,We),We}function dr(Ue){var We=u();return Ue<0?this.lShiftTo(-Ue,We):this.rShiftTo(Ue,We),We}function Er(Ue){if(Ue==0)return-1;var We=0;return(Ue&65535)==0&&(Ue>>=16,We+=16),(Ue&255)==0&&(Ue>>=8,We+=8),(Ue&15)==0&&(Ue>>=4,We+=4),(Ue&3)==0&&(Ue>>=2,We+=2),(Ue&1)==0&&++We,We}function Mr(){for(var Ue=0;Ue<this.t;++Ue)if(this.data[Ue]!=0)return Ue*this.DB+Er(this.data[Ue]);return this.s<0?this.t*this.DB:-1}function jr(Ue){for(var We=0;Ue!=0;)Ue&=Ue-1,++We;return We}function xr(){for(var Ue=0,We=this.s&this.DM,ze=0;ze<this.t;++ze)Ue+=jr(this.data[ze]^We);return Ue}function kn(Ue){var We=Math.floor(Ue/this.DB);return We>=this.t?this.s!=0:(this.data[We]&1<<Ue%this.DB)!=0}function gn(Ue,We){var ze=r.ONE.shiftLeft(Ue);return this.bitwiseTo(ze,We,ze),ze}function bn(Ue){return this.changeBit(Ue,Rr)}function Tn(Ue){return this.changeBit(Ue,$t)}function yn(Ue){return this.changeBit(Ue,Vr)}function Xr(Ue,We){for(var ze=0,yt=0,tr=Math.min(Ue.t,this.t);ze<tr;)yt+=this.data[ze]+Ue.data[ze],We.data[ze++]=yt&this.DM,yt>>=this.DB;if(Ue.t<this.t){for(yt+=Ue.s;ze<this.t;)yt+=this.data[ze],We.data[ze++]=yt&this.DM,yt>>=this.DB;yt+=this.s}else{for(yt+=this.s;ze<Ue.t;)yt+=Ue.data[ze],We.data[ze++]=yt&this.DM,yt>>=this.DB;yt+=Ue.s}We.s=yt<0?-1:0,yt>0?We.data[ze++]=yt:yt<-1&&(We.data[ze++]=this.DV+yt),We.t=ze,We.clamp()}function Rn(Ue){var We=u();return this.addTo(Ue,We),We}function yr(Ue){var We=u();return this.subTo(Ue,We),We}function Wr(Ue){var We=u();return this.multiplyTo(Ue,We),We}function Yr(Ue){var We=u();return this.divRemTo(Ue,We,null),We}function vn(Ue){var We=u();return this.divRemTo(Ue,null,We),We}function Ur(Ue){var We=u(),ze=u();return this.divRemTo(Ue,We,ze),new Array(We,ze)}function Zr(Ue){this.data[this.t]=this.am(0,Ue-1,this,0,0,this.t),++this.t,this.clamp()}function Fr(Ue,We){if(Ue!=0){for(;this.t<=We;)this.data[this.t++]=0;for(this.data[We]+=Ue;this.data[We]>=this.DV;)this.data[We]-=this.DV,++We>=this.t&&(this.data[this.t++]=0),++this.data[We]}}function tt(){}function et(Ue){return Ue}function dt(Ue,We,ze){Ue.multiplyTo(We,ze)}function Bt(Ue,We){Ue.squareTo(We)}tt.prototype.convert=et,tt.prototype.revert=et,tt.prototype.mulTo=dt,tt.prototype.sqrTo=Bt;function Ct(Ue){return this.exp(Ue,new tt)}function pr(Ue,We,ze){var yt=Math.min(this.t+Ue.t,We);for(ze.s=0,ze.t=yt;yt>0;)ze.data[--yt]=0;var tr;for(tr=ze.t-this.t;yt<tr;++yt)ze.data[yt+this.t]=this.am(0,Ue.data[yt],ze,yt,0,this.t);for(tr=Math.min(Ue.t,We);yt<tr;++yt)this.am(0,Ue.data[yt],ze,yt,0,We-yt);ze.clamp()}function Sr(Ue,We,ze){--We;var yt=ze.t=this.t+Ue.t-We;for(ze.s=0;--yt>=0;)ze.data[yt]=0;for(yt=Math.max(We-this.t,0);yt<Ue.t;++yt)ze.data[this.t+yt-We]=this.am(We-yt,Ue.data[yt],ze,0,0,this.t+yt-We);ze.clamp(),ze.drShiftTo(1,ze)}function un(Ue){this.r2=u(),this.q3=u(),r.ONE.dlShiftTo(2*Ue.t,this.r2),this.mu=this.r2.divide(Ue),this.m=Ue}function Ln(Ue){if(Ue.s<0||Ue.t>2*this.m.t)return Ue.mod(this.m);if(Ue.compareTo(this.m)<0)return Ue;var We=u();return Ue.copyTo(We),this.reduce(We),We}function In(Ue){return Ue}function Un(Ue){for(Ue.drShiftTo(this.m.t-1,this.r2),Ue.t>this.m.t+1&&(Ue.t=this.m.t+1,Ue.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);Ue.compareTo(this.r2)<0;)Ue.dAddOffset(1,this.m.t+1);for(Ue.subTo(this.r2,Ue);Ue.compareTo(this.m)>=0;)Ue.subTo(this.m,Ue)}function Pr(Ue,We){Ue.squareTo(We),this.reduce(We)}function Ir(Ue,We,ze){Ue.multiplyTo(We,ze),this.reduce(ze)}un.prototype.convert=Ln,un.prototype.revert=In,un.prototype.reduce=Un,un.prototype.mulTo=Ir,un.prototype.sqrTo=Pr;function si(Ue,We){var ze=Ue.bitLength(),yt,tr=I(1),er;if(ze<=0)return tr;ze<18?yt=1:ze<48?yt=3:ze<144?yt=4:ze<768?yt=5:yt=6,ze<8?er=new Se(We):We.isEven()?er=new un(We):er=new Ge(We);var fr=new Array,sr=3,Qr=yt-1,Pn=(1<<yt)-1;if(fr[1]=er.convert(this),yt>1){var Qn=u();for(er.sqrTo(fr[1],Qn);sr<=Pn;)fr[sr]=u(),er.mulTo(Qn,fr[sr-2],fr[sr]),sr+=2}var Sn=Ue.t-1,dn,$n=!0,On=u(),qn;for(ze=U(Ue.data[Sn])-1;Sn>=0;){for(ze>=Qr?dn=Ue.data[Sn]>>ze-Qr&Pn:(dn=(Ue.data[Sn]&(1<<ze+1)-1)<<Qr-ze,Sn>0&&(dn|=Ue.data[Sn-1]>>this.DB+ze-Qr)),sr=yt;(dn&1)==0;)dn>>=1,--sr;if((ze-=sr)<0&&(ze+=this.DB,--Sn),$n)fr[dn].copyTo(tr),$n=!1;else{for(;sr>1;)er.sqrTo(tr,On),er.sqrTo(On,tr),sr-=2;sr>0?er.sqrTo(tr,On):(qn=tr,tr=On,On=qn),er.mulTo(On,fr[dn],tr)}for(;Sn>=0&&(Ue.data[Sn]&1<<ze)==0;)er.sqrTo(tr,On),qn=tr,tr=On,On=qn,--ze<0&&(ze=this.DB-1,--Sn)}return er.revert(tr)}function Dr(Ue){var We=this.s<0?this.negate():this.clone(),ze=Ue.s<0?Ue.negate():Ue.clone();if(We.compareTo(ze)<0){var yt=We;We=ze,ze=yt}var tr=We.getLowestSetBit(),er=ze.getLowestSetBit();if(er<0)return We;for(tr<er&&(er=tr),er>0&&(We.rShiftTo(er,We),ze.rShiftTo(er,ze));We.signum()>0;)(tr=We.getLowestSetBit())>0&&We.rShiftTo(tr,We),(tr=ze.getLowestSetBit())>0&&ze.rShiftTo(tr,ze),We.compareTo(ze)>=0?(We.subTo(ze,We),We.rShiftTo(1,We)):(ze.subTo(We,ze),ze.rShiftTo(1,ze));return er>0&&ze.lShiftTo(er,ze),ze}function Bn(Ue){if(Ue<=0)return 0;var We=this.DV%Ue,ze=this.s<0?Ue-1:0;if(this.t>0)if(We==0)ze=this.data[0]%Ue;else for(var yt=this.t-1;yt>=0;--yt)ze=(We*ze+this.data[yt])%Ue;return ze}function ai(Ue){var We=Ue.isEven();if(this.isEven()&&We||Ue.signum()==0)return r.ZERO;for(var ze=Ue.clone(),yt=this.clone(),tr=I(1),er=I(0),fr=I(0),sr=I(1);ze.signum()!=0;){for(;ze.isEven();)ze.rShiftTo(1,ze),We?((!tr.isEven()||!er.isEven())&&(tr.addTo(this,tr),er.subTo(Ue,er)),tr.rShiftTo(1,tr)):er.isEven()||er.subTo(Ue,er),er.rShiftTo(1,er);for(;yt.isEven();)yt.rShiftTo(1,yt),We?((!fr.isEven()||!sr.isEven())&&(fr.addTo(this,fr),sr.subTo(Ue,sr)),fr.rShiftTo(1,fr)):sr.isEven()||sr.subTo(Ue,sr),sr.rShiftTo(1,sr);ze.compareTo(yt)>=0?(ze.subTo(yt,ze),We&&tr.subTo(fr,tr),er.subTo(sr,er)):(yt.subTo(ze,yt),We&&fr.subTo(tr,fr),sr.subTo(er,sr))}if(yt.compareTo(r.ONE)!=0)return r.ZERO;if(sr.compareTo(Ue)>=0)return sr.subtract(Ue);if(sr.signum()<0)sr.addTo(Ue,sr);else return sr;return sr.signum()<0?sr.add(Ue):sr}var xn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],mn=(1<<26)/xn[xn.length-1];function Wn(Ue){var We,ze=this.abs();if(ze.t==1&&ze.data[0]<=xn[xn.length-1]){for(We=0;We<xn.length;++We)if(ze.data[0]==xn[We])return!0;return!1}if(ze.isEven())return!1;for(We=1;We<xn.length;){for(var yt=xn[We],tr=We+1;tr<xn.length&&yt<mn;)yt*=xn[tr++];for(yt=ze.modInt(yt);We<tr;)if(yt%xn[We++]==0)return!1}return ze.millerRabin(Ue)}function Yn(Ue){var We=this.subtract(r.ONE),ze=We.getLowestSetBit();if(ze<=0)return!1;for(var yt=We.shiftRight(ze),tr=Ai(),er,fr=0;fr<Ue;++fr){do er=new r(this.bitLength(),tr);while(er.compareTo(r.ONE)<=0||er.compareTo(We)>=0);var sr=er.modPow(yt,this);if(sr.compareTo(r.ONE)!=0&&sr.compareTo(We)!=0){for(var Qr=1;Qr++<ze&&sr.compareTo(We)!=0;)if(sr=sr.modPowInt(2,this),sr.compareTo(r.ONE)==0)return!1;if(sr.compareTo(We)!=0)return!1}}return!0}function Ai(){return{nextBytes:function(Ue){for(var We=0;We<Ue.length;++We)Ue[We]=Math.floor(Math.random()*256)}}}return r.prototype.chunkSize=ee,r.prototype.toRadix=l,r.prototype.fromRadix=X,r.prototype.fromNumber=oe,r.prototype.bitwiseTo=wt,r.prototype.changeBit=gn,r.prototype.addTo=Xr,r.prototype.dMultiply=Zr,r.prototype.dAddOffset=Fr,r.prototype.multiplyLowerTo=pr,r.prototype.multiplyUpperTo=Sr,r.prototype.modInt=Bn,r.prototype.millerRabin=Yn,r.prototype.clone=Re,r.prototype.intValue=ke,r.prototype.byteValue=qe,r.prototype.shortValue=g,r.prototype.signum=ae,r.prototype.toByteArray=_e,r.prototype.equals=He,r.prototype.min=nt,r.prototype.max=It,r.prototype.and=_r,r.prototype.or=Hr,r.prototype.xor=Tr,r.prototype.andNot=qt,r.prototype.not=Kt,r.prototype.shiftLeft=nr,r.prototype.shiftRight=dr,r.prototype.getLowestSetBit=Mr,r.prototype.bitCount=xr,r.prototype.testBit=kn,r.prototype.setBit=bn,r.prototype.clearBit=Tn,r.prototype.flipBit=yn,r.prototype.add=Rn,r.prototype.subtract=yr,r.prototype.multiply=Wr,r.prototype.divide=Yr,r.prototype.remainder=vn,r.prototype.divideAndRemainder=Ur,r.prototype.modPow=si,r.prototype.modInverse=ai,r.prototype.pow=Ct,r.prototype.gcd=Dr,r.prototype.isProbablePrime=Wn,jsbn}var pkcs1={exports:{}},sha1$3={exports:{}},hasRequiredSha1$2;function requireSha1$2(){if(hasRequiredSha1$2)return sha1$3.exports;hasRequiredSha1$2=1;var t=requireForge();requireMd(),requireUtil$7();var e=sha1$3.exports=t.sha1=t.sha1||{};t.md.sha1=t.md.algorithms.sha1=e,e.create=function(){u||d();var c=null,a=t.util.createBuffer(),o=new Array(80),s={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var h=s.messageLengthSize/4,v=0;v<h;++v)s.fullMessageLength.push(0);return a=t.util.createBuffer(),c={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},s},s.start(),s.update=function(h,v){v==="utf8"&&(h=t.util.encodeUtf8(h));var E=h.length;s.messageLength+=E,E=[E/4294967296>>>0,E>>>0];for(var y=s.fullMessageLength.length-1;y>=0;--y)s.fullMessageLength[y]+=E[1],E[1]=E[0]+(s.fullMessageLength[y]/4294967296>>>0),s.fullMessageLength[y]=s.fullMessageLength[y]>>>0,E[0]=E[1]/4294967296>>>0;return a.putBytes(h),m(c,o,a),(a.read>2048||a.length()===0)&&a.compact(),s},s.digest=function(){var h=t.util.createBuffer();h.putBytes(a.bytes());var v=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,E=v&s.blockLength-1;h.putBytes(r.substr(0,s.blockLength-E));for(var y,A,w=s.fullMessageLength[0]*8,I=0;I<s.fullMessageLength.length-1;++I)y=s.fullMessageLength[I+1]*8,A=y/4294967296>>>0,w+=A,h.putInt32(w>>>0),w=y>>>0;h.putInt32(w);var _={h0:c.h0,h1:c.h1,h2:c.h2,h3:c.h3,h4:c.h4};m(_,o,h);var S=t.util.createBuffer();return S.putInt32(_.h0),S.putInt32(_.h1),S.putInt32(_.h2),S.putInt32(_.h3),S.putInt32(_.h4),S},s};var r=null,u=!1;function d(){r="",r+=t.util.fillString("\0",64),u=!0}function m(c,a,o){for(var s,h,v,E,y,A,w,I,_=o.length();_>=64;){for(h=c.h0,v=c.h1,E=c.h2,y=c.h3,A=c.h4,I=0;I<16;++I)s=o.getInt32(),a[I]=s,w=y^v&(E^y),s=(h<<5|h>>>27)+w+A+1518500249+s,A=y,y=E,E=(v<<30|v>>>2)>>>0,v=h,h=s;for(;I<20;++I)s=a[I-3]^a[I-8]^a[I-14]^a[I-16],s=s<<1|s>>>31,a[I]=s,w=y^v&(E^y),s=(h<<5|h>>>27)+w+A+1518500249+s,A=y,y=E,E=(v<<30|v>>>2)>>>0,v=h,h=s;for(;I<32;++I)s=a[I-3]^a[I-8]^a[I-14]^a[I-16],s=s<<1|s>>>31,a[I]=s,w=v^E^y,s=(h<<5|h>>>27)+w+A+1859775393+s,A=y,y=E,E=(v<<30|v>>>2)>>>0,v=h,h=s;for(;I<40;++I)s=a[I-6]^a[I-16]^a[I-28]^a[I-32],s=s<<2|s>>>30,a[I]=s,w=v^E^y,s=(h<<5|h>>>27)+w+A+1859775393+s,A=y,y=E,E=(v<<30|v>>>2)>>>0,v=h,h=s;for(;I<60;++I)s=a[I-6]^a[I-16]^a[I-28]^a[I-32],s=s<<2|s>>>30,a[I]=s,w=v&E|y&(v^E),s=(h<<5|h>>>27)+w+A+2400959708+s,A=y,y=E,E=(v<<30|v>>>2)>>>0,v=h,h=s;for(;I<80;++I)s=a[I-6]^a[I-16]^a[I-28]^a[I-32],s=s<<2|s>>>30,a[I]=s,w=v^E^y,s=(h<<5|h>>>27)+w+A+3395469782+s,A=y,y=E,E=(v<<30|v>>>2)>>>0,v=h,h=s;c.h0=c.h0+h|0,c.h1=c.h1+v|0,c.h2=c.h2+E|0,c.h3=c.h3+y|0,c.h4=c.h4+A|0,_-=64}}return sha1$3.exports}var hasRequiredPkcs1;function requirePkcs1(){if(hasRequiredPkcs1)return pkcs1.exports;hasRequiredPkcs1=1;var t=requireForge();requireUtil$7(),requireRandom(),requireSha1$2();var e=pkcs1.exports=t.pkcs1=t.pkcs1||{};e.encode_rsa_oaep=function(u,d,m){var c,a,o,s;typeof m=="string"?(c=m,a=arguments[3]||void 0,o=arguments[4]||void 0):m&&(c=m.label||void 0,a=m.seed||void 0,o=m.md||void 0,m.mgf1&&m.mgf1.md&&(s=m.mgf1.md)),o?o.start():o=t.md.sha1.create(),s||(s=o);var h=Math.ceil(u.n.bitLength()/8),v=h-2*o.digestLength-2;if(d.length>v){var E=new Error("RSAES-OAEP input message length is too long.");throw E.length=d.length,E.maxLength=v,E}c||(c=""),o.update(c,"raw");for(var y=o.digest(),A="",w=v-d.length,I=0;I<w;I++)A+="\0";var _=y.getBytes()+A+""+d;if(!a)a=t.random.getBytes(o.digestLength);else if(a.length!==o.digestLength){var E=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw E.seedLength=a.length,E.digestLength=o.digestLength,E}var S=r(a,h-o.digestLength-1,s),j=t.util.xorBytes(_,S,_.length),K=r(j,o.digestLength,s),J=t.util.xorBytes(a,K,a.length);return"\0"+J+j},e.decode_rsa_oaep=function(u,d,m){var c,a,o;typeof m=="string"?(c=m,a=arguments[3]||void 0):m&&(c=m.label||void 0,a=m.md||void 0,m.mgf1&&m.mgf1.md&&(o=m.mgf1.md));var s=Math.ceil(u.n.bitLength()/8);if(d.length!==s){var j=new Error("RSAES-OAEP encoded message length is invalid.");throw j.length=d.length,j.expectedLength=s,j}if(a===void 0?a=t.md.sha1.create():a.start(),o||(o=a),s<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");c||(c=""),a.update(c,"raw");for(var h=a.digest().getBytes(),v=d.charAt(0),E=d.substring(1,a.digestLength+1),y=d.substring(1+a.digestLength),A=r(y,a.digestLength,o),w=t.util.xorBytes(E,A,E.length),I=r(w,s-a.digestLength-1,o),_=t.util.xorBytes(y,I,y.length),S=_.substring(0,a.digestLength),j=v!=="\0",K=0;K<a.digestLength;++K)j|=h.charAt(K)!==S.charAt(K);for(var J=1,H=a.digestLength,U=a.digestLength;U<_.length;U++){var P=_.charCodeAt(U),Z=P&1^1,ie=J?65534:0;j|=P&ie,J=J&Z,H+=J}if(j||_.charCodeAt(H)!==1)throw new Error("Invalid RSAES-OAEP padding.");return _.substring(H+1)};function r(u,d,m){m||(m=t.md.sha1.create());for(var c="",a=Math.ceil(d/m.digestLength),o=0;o<a;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);m.start(),m.update(u+s),c+=m.digest().getBytes()}return c.substring(0,d)}return pkcs1.exports}var prime={exports:{}},hasRequiredPrime;function requirePrime(){if(hasRequiredPrime)return prime.exports;hasRequiredPrime=1;var t=requireForge();return requireUtil$7(),requireJsbn(),requireRandom(),function(){if(t.prime){prime.exports=t.prime;return}var e=prime.exports=t.prime=t.prime||{},r=t.jsbn.BigInteger,u=[6,4,2,4,2,4,6,2],d=new r(null);d.fromInt(30);var m=function(E,y){return E|y};e.generateProbablePrime=function(E,y,A){typeof y=="function"&&(A=y,y={}),y=y||{};var w=y.algorithm||"PRIMEINC";typeof w=="string"&&(w={name:w}),w.options=w.options||{};var I=y.prng||t.random,_={nextBytes:function(S){for(var j=I.getBytesSync(S.length),K=0;K<S.length;++K)S[K]=j.charCodeAt(K)}};if(w.name==="PRIMEINC")return c(E,_,w.options,A);throw new Error("Invalid prime generation algorithm: "+w.name)};function c(E,y,A,w){return"workers"in A?s(E,y,A,w):a(E,y,A,w)}function a(E,y,A,w){var I=h(E,y),_=0,S=v(I.bitLength());"millerRabinTests"in A&&(S=A.millerRabinTests);var j=10;"maxBlockTime"in A&&(j=A.maxBlockTime),o(I,E,y,_,S,j,w)}function o(E,y,A,w,I,_,S){var j=+new Date;do{if(E.bitLength()>y&&(E=h(y,A)),E.isProbablePrime(I))return S(null,E);E.dAddOffset(u[w++%8],0)}while(_<0||+new Date-j<_);t.util.setImmediate(function(){o(E,y,A,w,I,_,S)})}function s(E,y,A,w){if(typeof Worker>"u")return a(E,y,A,w);var I=h(E,y),_=A.workers,S=A.workLoad||100,j=S*30/8,K=A.workerScript||"forge/prime.worker.js";if(_===-1)return t.util.estimateCores(function(H,U){H&&(U=2),_=U-1,J()});J();function J(){_=Math.max(1,_);for(var H=[],U=0;U<_;++U)H[U]=new Worker(K);for(var U=0;U<_;++U)H[U].addEventListener("message",Z);var P=!1;function Z(ie){if(!P){var ue=ie.data;if(ue.found){for(var le=0;le<H.length;++le)H[le].terminate();return P=!0,w(null,new r(ue.prime,16))}I.bitLength()>E&&(I=h(E,y));var ne=I.toString(16);ie.target.postMessage({hex:ne,workLoad:S}),I.dAddOffset(j,0)}}}}function h(E,y){var A=new r(E,y),w=E-1;return A.testBit(w)||A.bitwiseTo(r.ONE.shiftLeft(w),m,A),A.dAddOffset(31-A.mod(d).byteValue(),0),A}function v(E){return E<=100?27:E<=150?18:E<=200?15:E<=250?12:E<=300?9:E<=350?8:E<=400?7:E<=500?6:E<=600?5:E<=800?4:E<=1250?3:2}}(),prime.exports}var rsa,hasRequiredRsa;function requireRsa(){if(hasRequiredRsa)return rsa;hasRequiredRsa=1;var t=requireForge();if(requireAsn1(),requireJsbn(),requireOids(),requirePkcs1(),requirePrime(),requireRandom(),requireUtil$7(),typeof e>"u")var e=t.jsbn.BigInteger;var r=t.util.isNodejs?require$$1$3:null,u=t.asn1,d=t.util;t.pki=t.pki||{},rsa=t.pki.rsa=t.rsa=t.rsa||{};var m=t.pki,c=[6,4,2,4,2,4,6,2],a={name:"PrivateKeyInfo",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:u.Class.UNIVERSAL,type:u.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},o={name:"RSAPrivateKey",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},s={name:"RSAPublicKey",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},h=t.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:u.Class.UNIVERSAL,type:u.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},v={name:"DigestInfo",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:u.Class.UNIVERSAL,type:u.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:u.Class.UNIVERSAL,type:u.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},E=function(U){var P;if(U.algorithm in m.oids)P=m.oids[U.algorithm];else{var Z=new Error("Unknown message digest algorithm.");throw Z.algorithm=U.algorithm,Z}var ie=u.oidToDer(P).getBytes(),ue=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[]),le=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[]);le.value.push(u.create(u.Class.UNIVERSAL,u.Type.OID,!1,ie)),le.value.push(u.create(u.Class.UNIVERSAL,u.Type.NULL,!1,""));var ne=u.create(u.Class.UNIVERSAL,u.Type.OCTETSTRING,!1,U.digest().getBytes());return ue.value.push(le),ue.value.push(ne),u.toDer(ue).getBytes()},y=function(U,P,Z){if(Z)return U.modPow(P.e,P.n);if(!P.p||!P.q)return U.modPow(P.d,P.n);P.dP||(P.dP=P.d.mod(P.p.subtract(e.ONE))),P.dQ||(P.dQ=P.d.mod(P.q.subtract(e.ONE))),P.qInv||(P.qInv=P.q.modInverse(P.p));var ie;do ie=new e(t.util.bytesToHex(t.random.getBytes(P.n.bitLength()/8)),16);while(ie.compareTo(P.n)>=0||!ie.gcd(P.n).equals(e.ONE));U=U.multiply(ie.modPow(P.e,P.n)).mod(P.n);for(var ue=U.mod(P.p).modPow(P.dP,P.p),le=U.mod(P.q).modPow(P.dQ,P.q);ue.compareTo(le)<0;)ue=ue.add(P.p);var ne=ue.subtract(le).multiply(P.qInv).mod(P.p).multiply(P.q).add(le);return ne=ne.multiply(ie.modInverse(P.n)).mod(P.n),ne};m.rsa.encrypt=function(U,P,Z){var ie=Z,ue,le=Math.ceil(P.n.bitLength()/8);Z!==!1&&Z!==!0?(ie=Z===2,ue=A(U,P,Z)):(ue=t.util.createBuffer(),ue.putBytes(U));for(var ne=new e(ue.toHex(),16),ye=y(ne,P,ie),fe=ye.toString(16),Te=t.util.createBuffer(),Ae=le-Math.ceil(fe.length/2);Ae>0;)Te.putByte(0),--Ae;return Te.putBytes(t.util.hexToBytes(fe)),Te.getBytes()},m.rsa.decrypt=function(U,P,Z,ie){var ue=Math.ceil(P.n.bitLength()/8);if(U.length!==ue){var le=new Error("Encrypted message length is invalid.");throw le.length=U.length,le.expected=ue,le}var ne=new e(t.util.createBuffer(U).toHex(),16);if(ne.compareTo(P.n)>=0)throw new Error("Encrypted message is invalid.");for(var ye=y(ne,P,Z),fe=ye.toString(16),Te=t.util.createBuffer(),Ae=ue-Math.ceil(fe.length/2);Ae>0;)Te.putByte(0),--Ae;return Te.putBytes(t.util.hexToBytes(fe)),ie!==!1?w(Te.getBytes(),P,Z):Te.getBytes()},m.rsa.createKeyPairGenerationState=function(U,P,Z){typeof U=="string"&&(U=parseInt(U,10)),U=U||2048,Z=Z||{};var ie=Z.prng||t.random,ue={nextBytes:function(ye){for(var fe=ie.getBytesSync(ye.length),Te=0;Te<ye.length;++Te)ye[Te]=fe.charCodeAt(Te)}},le=Z.algorithm||"PRIMEINC",ne;if(le==="PRIMEINC")ne={algorithm:le,state:0,bits:U,rng:ue,eInt:P||65537,e:new e(null),p:null,q:null,qBits:U>>1,pBits:U-(U>>1),pqState:0,num:null,keys:null},ne.e.fromInt(ne.eInt);else throw new Error("Invalid key generation algorithm: "+le);return ne},m.rsa.stepKeyPairGenerationState=function(U,P){"algorithm"in U||(U.algorithm="PRIMEINC");var Z=new e(null);Z.fromInt(30);for(var ie=0,ue=function(Se,be){return Se|be},le=+new Date,ne,ye=0;U.keys===null&&(P<=0||ye<P);){if(U.state===0){var fe=U.p===null?U.pBits:U.qBits,Te=fe-1;U.pqState===0?(U.num=new e(fe,U.rng),U.num.testBit(Te)||U.num.bitwiseTo(e.ONE.shiftLeft(Te),ue,U.num),U.num.dAddOffset(31-U.num.mod(Z).byteValue(),0),ie=0,++U.pqState):U.pqState===1?U.num.bitLength()>fe?U.pqState=0:U.num.isProbablePrime(S(U.num.bitLength()))?++U.pqState:U.num.dAddOffset(c[ie++%8],0):U.pqState===2?U.pqState=U.num.subtract(e.ONE).gcd(U.e).compareTo(e.ONE)===0?3:0:U.pqState===3&&(U.pqState=0,U.p===null?U.p=U.num:U.q=U.num,U.p!==null&&U.q!==null&&++U.state,U.num=null)}else if(U.state===1)U.p.compareTo(U.q)<0&&(U.num=U.p,U.p=U.q,U.q=U.num),++U.state;else if(U.state===2)U.p1=U.p.subtract(e.ONE),U.q1=U.q.subtract(e.ONE),U.phi=U.p1.multiply(U.q1),++U.state;else if(U.state===3)U.phi.gcd(U.e).compareTo(e.ONE)===0?++U.state:(U.p=null,U.q=null,U.state=0);else if(U.state===4)U.n=U.p.multiply(U.q),U.n.bitLength()===U.bits?++U.state:(U.q=null,U.state=0);else if(U.state===5){var Ae=U.e.modInverse(U.phi);U.keys={privateKey:m.rsa.setPrivateKey(U.n,U.e,Ae,U.p,U.q,Ae.mod(U.p1),Ae.mod(U.q1),U.q.modInverse(U.p)),publicKey:m.rsa.setPublicKey(U.n,U.e)}}ne=+new Date,ye+=ne-le,le=ne}return U.keys!==null},m.rsa.generateKeyPair=function(U,P,Z,ie){if(arguments.length===1?typeof U=="object"?(Z=U,U=void 0):typeof U=="function"&&(ie=U,U=void 0):arguments.length===2?typeof U=="number"?typeof P=="function"?(ie=P,P=void 0):typeof P!="number"&&(Z=P,P=void 0):(Z=U,ie=P,U=void 0,P=void 0):arguments.length===3&&(typeof P=="number"?typeof Z=="function"&&(ie=Z,Z=void 0):(ie=Z,Z=P,P=void 0)),Z=Z||{},U===void 0&&(U=Z.bits||2048),P===void 0&&(P=Z.e||65537),!t.options.usePureJavaScript&&!Z.prng&&U>=256&&U<=16384&&(P===65537||P===3)){if(ie){if(j("generateKeyPair"))return r.generateKeyPair("rsa",{modulusLength:U,publicExponent:P,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(ye,fe,Te){if(ye)return ie(ye);ie(null,{privateKey:m.privateKeyFromPem(Te),publicKey:m.publicKeyFromPem(fe)})});if(K("generateKey")&&K("exportKey"))return d.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:U,publicExponent:H(P),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(ye){return d.globalScope.crypto.subtle.exportKey("pkcs8",ye.privateKey)}).then(void 0,function(ye){ie(ye)}).then(function(ye){if(ye){var fe=m.privateKeyFromAsn1(u.fromDer(t.util.createBuffer(ye)));ie(null,{privateKey:fe,publicKey:m.setRsaPublicKey(fe.n,fe.e)})}});if(J("generateKey")&&J("exportKey")){var ue=d.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:U,publicExponent:H(P),hash:{name:"SHA-256"}},!0,["sign","verify"]);ue.oncomplete=function(ye){var fe=ye.target.result,Te=d.globalScope.msCrypto.subtle.exportKey("pkcs8",fe.privateKey);Te.oncomplete=function(Ae){var Se=Ae.target.result,be=m.privateKeyFromAsn1(u.fromDer(t.util.createBuffer(Se)));ie(null,{privateKey:be,publicKey:m.setRsaPublicKey(be.n,be.e)})},Te.onerror=function(Ae){ie(Ae)}},ue.onerror=function(ye){ie(ye)};return}}else if(j("generateKeyPairSync")){var le=r.generateKeyPairSync("rsa",{modulusLength:U,publicExponent:P,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:m.privateKeyFromPem(le.privateKey),publicKey:m.publicKeyFromPem(le.publicKey)}}}var ne=m.rsa.createKeyPairGenerationState(U,P,Z);if(!ie)return m.rsa.stepKeyPairGenerationState(ne,0),ne.keys;I(ne,Z,ie)},m.setRsaPublicKey=m.rsa.setPublicKey=function(U,P){var Z={n:U,e:P};return Z.encrypt=function(ie,ue,le){if(typeof ue=="string"?ue=ue.toUpperCase():ue===void 0&&(ue="RSAES-PKCS1-V1_5"),ue==="RSAES-PKCS1-V1_5")ue={encode:function(ye,fe,Te){return A(ye,fe,2).getBytes()}};else if(ue==="RSA-OAEP"||ue==="RSAES-OAEP")ue={encode:function(ye,fe){return t.pkcs1.encode_rsa_oaep(fe,ye,le)}};else if(["RAW","NONE","NULL",null].indexOf(ue)!==-1)ue={encode:function(ye){return ye}};else if(typeof ue=="string")throw new Error('Unsupported encryption scheme: "'+ue+'".');var ne=ue.encode(ie,Z,!0);return m.rsa.encrypt(ne,Z,!0)},Z.verify=function(ie,ue,le,ne){typeof le=="string"?le=le.toUpperCase():le===void 0&&(le="RSASSA-PKCS1-V1_5"),ne===void 0&&(ne={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in ne||(ne._parseAllDigestBytes=!0),le==="RSASSA-PKCS1-V1_5"?le={verify:function(fe,Te){Te=w(Te,Z,!0);var Ae=u.fromDer(Te,{parseAllBytes:ne._parseAllDigestBytes}),Se={},be=[];if(!u.validate(Ae,v,Se,be)){var we=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw we.errors=be,we}var Ce=u.derToOid(Se.algorithmIdentifier);if(!(Ce===t.oids.md2||Ce===t.oids.md5||Ce===t.oids.sha1||Ce===t.oids.sha224||Ce===t.oids.sha256||Ce===t.oids.sha384||Ce===t.oids.sha512||Ce===t.oids["sha512-224"]||Ce===t.oids["sha512-256"])){var we=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw we.oid=Ce,we}if((Ce===t.oids.md2||Ce===t.oids.md5)&&!("parameters"in Se))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return fe===Se.digest}}:(le==="NONE"||le==="NULL"||le===null)&&(le={verify:function(fe,Te){return Te=w(Te,Z,!0),fe===Te}});var ye=m.rsa.decrypt(ue,Z,!0,!1);return le.verify(ie,ye,Z.n.bitLength())},Z},m.setRsaPrivateKey=m.rsa.setPrivateKey=function(U,P,Z,ie,ue,le,ne,ye){var fe={n:U,e:P,d:Z,p:ie,q:ue,dP:le,dQ:ne,qInv:ye};return fe.decrypt=function(Te,Ae,Se){typeof Ae=="string"?Ae=Ae.toUpperCase():Ae===void 0&&(Ae="RSAES-PKCS1-V1_5");var be=m.rsa.decrypt(Te,fe,!1,!1);if(Ae==="RSAES-PKCS1-V1_5")Ae={decode:w};else if(Ae==="RSA-OAEP"||Ae==="RSAES-OAEP")Ae={decode:function(we,Ce){return t.pkcs1.decode_rsa_oaep(Ce,we,Se)}};else if(["RAW","NONE","NULL",null].indexOf(Ae)!==-1)Ae={decode:function(we){return we}};else throw new Error('Unsupported encryption scheme: "'+Ae+'".');return Ae.decode(be,fe,!1)},fe.sign=function(Te,Ae){var Se=!1;typeof Ae=="string"&&(Ae=Ae.toUpperCase()),Ae===void 0||Ae==="RSASSA-PKCS1-V1_5"?(Ae={encode:E},Se=1):(Ae==="NONE"||Ae==="NULL"||Ae===null)&&(Ae={encode:function(){return Te}},Se=1);var be=Ae.encode(Te,fe.n.bitLength());return m.rsa.encrypt(be,fe,Se)},fe},m.wrapRsaPrivateKey=function(U){return u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,u.integerToDer(0).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(m.oids.rsaEncryption).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.NULL,!1,"")]),u.create(u.Class.UNIVERSAL,u.Type.OCTETSTRING,!1,u.toDer(U).getBytes())])},m.privateKeyFromAsn1=function(U){var P={},Z=[];if(u.validate(U,a,P,Z)&&(U=u.fromDer(t.util.createBuffer(P.privateKey))),P={},Z=[],!u.validate(U,o,P,Z)){var ie=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw ie.errors=Z,ie}var ue,le,ne,ye,fe,Te,Ae,Se;return ue=t.util.createBuffer(P.privateKeyModulus).toHex(),le=t.util.createBuffer(P.privateKeyPublicExponent).toHex(),ne=t.util.createBuffer(P.privateKeyPrivateExponent).toHex(),ye=t.util.createBuffer(P.privateKeyPrime1).toHex(),fe=t.util.createBuffer(P.privateKeyPrime2).toHex(),Te=t.util.createBuffer(P.privateKeyExponent1).toHex(),Ae=t.util.createBuffer(P.privateKeyExponent2).toHex(),Se=t.util.createBuffer(P.privateKeyCoefficient).toHex(),m.setRsaPrivateKey(new e(ue,16),new e(le,16),new e(ne,16),new e(ye,16),new e(fe,16),new e(Te,16),new e(Ae,16),new e(Se,16))},m.privateKeyToAsn1=m.privateKeyToRSAPrivateKey=function(U){return u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,u.integerToDer(0).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.n)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.e)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.d)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.p)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.q)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.dP)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.dQ)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.qInv))])},m.publicKeyFromAsn1=function(U){var P={},Z=[];if(u.validate(U,h,P,Z)){var ie=u.derToOid(P.publicKeyOid);if(ie!==m.oids.rsaEncryption){var ue=new Error("Cannot read public key. Unknown OID.");throw ue.oid=ie,ue}U=P.rsaPublicKey}if(Z=[],!u.validate(U,s,P,Z)){var ue=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw ue.errors=Z,ue}var le=t.util.createBuffer(P.publicKeyModulus).toHex(),ne=t.util.createBuffer(P.publicKeyExponent).toHex();return m.setRsaPublicKey(new e(le,16),new e(ne,16))},m.publicKeyToAsn1=m.publicKeyToSubjectPublicKeyInfo=function(U){return u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(m.oids.rsaEncryption).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.NULL,!1,"")]),u.create(u.Class.UNIVERSAL,u.Type.BITSTRING,!1,[m.publicKeyToRSAPublicKey(U)])])},m.publicKeyToRSAPublicKey=function(U){return u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.n)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,_(U.e))])};function A(U,P,Z){var ie=t.util.createBuffer(),ue=Math.ceil(P.n.bitLength()/8);if(U.length>ue-11){var le=new Error("Message is too long for PKCS#1 v1.5 padding.");throw le.length=U.length,le.max=ue-11,le}ie.putByte(0),ie.putByte(Z);var ne=ue-3-U.length,ye;if(Z===0||Z===1){ye=Z===0?0:255;for(var fe=0;fe<ne;++fe)ie.putByte(ye)}else for(;ne>0;){for(var Te=0,Ae=t.random.getBytes(ne),fe=0;fe<ne;++fe)ye=Ae.charCodeAt(fe),ye===0?++Te:ie.putByte(ye);ne=Te}return ie.putByte(0),ie.putBytes(U),ie}function w(U,P,Z,ie){var ue=Math.ceil(P.n.bitLength()/8),le=t.util.createBuffer(U),ne=le.getByte(),ye=le.getByte();if(ne!==0||Z&&ye!==0&&ye!==1||!Z&&ye!=2||Z&&ye===0&&typeof ie>"u")throw new Error("Encryption block is invalid.");var fe=0;if(ye===0){fe=ue-3-ie;for(var Te=0;Te<fe;++Te)if(le.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(ye===1)for(fe=0;le.length()>1;){if(le.getByte()!==255){--le.read;break}++fe}else if(ye===2)for(fe=0;le.length()>1;){if(le.getByte()===0){--le.read;break}++fe}var Ae=le.getByte();if(Ae!==0||fe!==ue-3-le.length())throw new Error("Encryption block is invalid.");return le.getBytes()}function I(U,P,Z){typeof P=="function"&&(Z=P,P={}),P=P||{};var ie={algorithm:{name:P.algorithm||"PRIMEINC",options:{workers:P.workers||2,workLoad:P.workLoad||100,workerScript:P.workerScript}}};"prng"in P&&(ie.prng=P.prng),ue();function ue(){le(U.pBits,function(ye,fe){if(ye)return Z(ye);if(U.p=fe,U.q!==null)return ne(ye,U.q);le(U.qBits,ne)})}function le(ye,fe){t.prime.generateProbablePrime(ye,ie,fe)}function ne(ye,fe){if(ye)return Z(ye);if(U.q=fe,U.p.compareTo(U.q)<0){var Te=U.p;U.p=U.q,U.q=Te}if(U.p.subtract(e.ONE).gcd(U.e).compareTo(e.ONE)!==0){U.p=null,ue();return}if(U.q.subtract(e.ONE).gcd(U.e).compareTo(e.ONE)!==0){U.q=null,le(U.qBits,ne);return}if(U.p1=U.p.subtract(e.ONE),U.q1=U.q.subtract(e.ONE),U.phi=U.p1.multiply(U.q1),U.phi.gcd(U.e).compareTo(e.ONE)!==0){U.p=U.q=null,ue();return}if(U.n=U.p.multiply(U.q),U.n.bitLength()!==U.bits){U.q=null,le(U.qBits,ne);return}var Ae=U.e.modInverse(U.phi);U.keys={privateKey:m.rsa.setPrivateKey(U.n,U.e,Ae,U.p,U.q,Ae.mod(U.p1),Ae.mod(U.q1),U.q.modInverse(U.p)),publicKey:m.rsa.setPublicKey(U.n,U.e)},Z(null,U.keys)}}function _(U){var P=U.toString(16);P[0]>="8"&&(P="00"+P);var Z=t.util.hexToBytes(P);return Z.length>1&&(Z.charCodeAt(0)===0&&(Z.charCodeAt(1)&128)===0||Z.charCodeAt(0)===255&&(Z.charCodeAt(1)&128)===128)?Z.substr(1):Z}function S(U){return U<=100?27:U<=150?18:U<=200?15:U<=250?12:U<=300?9:U<=350?8:U<=400?7:U<=500?6:U<=600?5:U<=800?4:U<=1250?3:2}function j(U){return t.util.isNodejs&&typeof r[U]=="function"}function K(U){return typeof d.globalScope<"u"&&typeof d.globalScope.crypto=="object"&&typeof d.globalScope.crypto.subtle=="object"&&typeof d.globalScope.crypto.subtle[U]=="function"}function J(U){return typeof d.globalScope<"u"&&typeof d.globalScope.msCrypto=="object"&&typeof d.globalScope.msCrypto.subtle=="object"&&typeof d.globalScope.msCrypto.subtle[U]=="function"}function H(U){for(var P=t.util.hexToBytes(U.toString(16)),Z=new Uint8Array(P.length),ie=0;ie<P.length;++ie)Z[ie]=P.charCodeAt(ie);return Z}return rsa}var pbe,hasRequiredPbe;function requirePbe(){if(hasRequiredPbe)return pbe;hasRequiredPbe=1;var t=requireForge();if(requireAes(),requireAsn1(),requireDes(),requireMd(),requireOids(),requirePbkdf2(),requirePem(),requireRandom(),requireRc2(),requireRsa(),requireUtil$7(),typeof e>"u")var e=t.jsbn.BigInteger;var r=t.asn1,u=t.pki=t.pki||{};pbe=u.pbe=t.pbe=t.pbe||{};var d=u.oids,m={name:"EncryptedPrivateKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},a={name:"pkcs-12PbeParams",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"iterations"}]};u.encryptPrivateKeyInfo=function(E,y,A){A=A||{},A.saltSize=A.saltSize||8,A.count=A.count||2048,A.algorithm=A.algorithm||"aes128",A.prfAlgorithm=A.prfAlgorithm||"sha1";var w=t.random.getBytesSync(A.saltSize),I=A.count,_=r.integerToDer(I),S,j,K;if(A.algorithm.indexOf("aes")===0||A.algorithm==="des"){var J,H,U;switch(A.algorithm){case"aes128":S=16,J=16,H=d["aes128-CBC"],U=t.aes.createEncryptionCipher;break;case"aes192":S=24,J=16,H=d["aes192-CBC"],U=t.aes.createEncryptionCipher;break;case"aes256":S=32,J=16,H=d["aes256-CBC"],U=t.aes.createEncryptionCipher;break;case"des":S=8,J=8,H=d.desCBC,U=t.des.createEncryptionCipher;break;default:var P=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw P.algorithm=A.algorithm,P}var Z="hmacWith"+A.prfAlgorithm.toUpperCase(),ie=h(Z),ue=t.pkcs5.pbkdf2(y,w,I,S,ie),le=t.random.getBytesSync(J),ne=U(ue);ne.start(le),ne.update(r.toDer(E)),ne.finish(),K=ne.output.getBytes();var ye=v(w,_,S,Z);j=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(d.pkcs5PBES2).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(d.pkcs5PBKDF2).getBytes()),ye]),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(H).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,le)])])])}else if(A.algorithm==="3des"){S=24;var fe=new t.util.ByteBuffer(w),ue=u.pbe.generatePkcs12Key(y,fe,1,I,S),le=u.pbe.generatePkcs12Key(y,fe,2,I,S),ne=t.des.createEncryptionCipher(ue);ne.start(le),ne.update(r.toDer(E)),ne.finish(),K=ne.output.getBytes(),j=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(d["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,w),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,_.getBytes())])])}else{var P=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw P.algorithm=A.algorithm,P}var Te=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[j,r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,K)]);return Te},u.decryptPrivateKeyInfo=function(E,y){var A=null,w={},I=[];if(!r.validate(E,m,w,I)){var _=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw _.errors=I,_}var S=r.derToOid(w.encryptionOid),j=u.pbe.getCipher(S,w.encryptionParams,y),K=t.util.createBuffer(w.encryptedData);return j.update(K),j.finish()&&(A=r.fromDer(j.output)),A},u.encryptedPrivateKeyToPem=function(E,y){var A={type:"ENCRYPTED PRIVATE KEY",body:r.toDer(E).getBytes()};return t.pem.encode(A,{maxline:y})},u.encryptedPrivateKeyFromPem=function(E){var y=t.pem.decode(E)[0];if(y.type!=="ENCRYPTED PRIVATE KEY"){var A=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw A.headerType=y.type,A}if(y.procType&&y.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return r.fromDer(y.body)},u.encryptRsaPrivateKey=function(E,y,A){if(A=A||{},!A.legacy){var w=u.wrapRsaPrivateKey(u.privateKeyToAsn1(E));return w=u.encryptPrivateKeyInfo(w,y,A),u.encryptedPrivateKeyToPem(w)}var I,_,S,j;switch(A.algorithm){case"aes128":I="AES-128-CBC",S=16,_=t.random.getBytesSync(16),j=t.aes.createEncryptionCipher;break;case"aes192":I="AES-192-CBC",S=24,_=t.random.getBytesSync(16),j=t.aes.createEncryptionCipher;break;case"aes256":I="AES-256-CBC",S=32,_=t.random.getBytesSync(16),j=t.aes.createEncryptionCipher;break;case"3des":I="DES-EDE3-CBC",S=24,_=t.random.getBytesSync(8),j=t.des.createEncryptionCipher;break;case"des":I="DES-CBC",S=8,_=t.random.getBytesSync(8),j=t.des.createEncryptionCipher;break;default:var K=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+A.algorithm+'".');throw K.algorithm=A.algorithm,K}var J=t.pbe.opensslDeriveBytes(y,_.substr(0,8),S),H=j(J);H.start(_),H.update(r.toDer(u.privateKeyToAsn1(E))),H.finish();var U={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:I,parameters:t.util.bytesToHex(_).toUpperCase()},body:H.output.getBytes()};return t.pem.encode(U)},u.decryptRsaPrivateKey=function(E,y){var A=null,w=t.pem.decode(E)[0];if(w.type!=="ENCRYPTED PRIVATE KEY"&&w.type!=="PRIVATE KEY"&&w.type!=="RSA PRIVATE KEY"){var I=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw I.headerType=I,I}if(w.procType&&w.procType.type==="ENCRYPTED"){var _,S;switch(w.dekInfo.algorithm){case"DES-CBC":_=8,S=t.des.createDecryptionCipher;break;case"DES-EDE3-CBC":_=24,S=t.des.createDecryptionCipher;break;case"AES-128-CBC":_=16,S=t.aes.createDecryptionCipher;break;case"AES-192-CBC":_=24,S=t.aes.createDecryptionCipher;break;case"AES-256-CBC":_=32,S=t.aes.createDecryptionCipher;break;case"RC2-40-CBC":_=5,S=function(U){return t.rc2.createDecryptionCipher(U,40)};break;case"RC2-64-CBC":_=8,S=function(U){return t.rc2.createDecryptionCipher(U,64)};break;case"RC2-128-CBC":_=16,S=function(U){return t.rc2.createDecryptionCipher(U,128)};break;default:var I=new Error('Could not decrypt private key; unsupported encryption algorithm "'+w.dekInfo.algorithm+'".');throw I.algorithm=w.dekInfo.algorithm,I}var j=t.util.hexToBytes(w.dekInfo.parameters),K=t.pbe.opensslDeriveBytes(y,j.substr(0,8),_),J=S(K);if(J.start(j),J.update(t.util.createBuffer(w.body)),J.finish())A=J.output.getBytes();else return A}else A=w.body;return w.type==="ENCRYPTED PRIVATE KEY"?A=u.decryptPrivateKeyInfo(r.fromDer(A),y):A=r.fromDer(A),A!==null&&(A=u.privateKeyFromAsn1(A)),A},u.pbe.generatePkcs12Key=function(E,y,A,w,I,_){var S,j;if(typeof _>"u"||_===null){if(!("sha1"in t.md))throw new Error('"sha1" hash algorithm unavailable.');_=t.md.sha1.create()}var K=_.digestLength,J=_.blockLength,H=new t.util.ByteBuffer,U=new t.util.ByteBuffer;if(E!=null){for(j=0;j<E.length;j++)U.putInt16(E.charCodeAt(j));U.putInt16(0)}var P=U.length(),Z=y.length(),ie=new t.util.ByteBuffer;ie.fillWithByte(A,J);var ue=J*Math.ceil(Z/J),le=new t.util.ByteBuffer;for(j=0;j<ue;j++)le.putByte(y.at(j%Z));var ne=J*Math.ceil(P/J),ye=new t.util.ByteBuffer;for(j=0;j<ne;j++)ye.putByte(U.at(j%P));var fe=le;fe.putBuffer(ye);for(var Te=Math.ceil(I/K),Ae=1;Ae<=Te;Ae++){var Se=new t.util.ByteBuffer;Se.putBytes(ie.bytes()),Se.putBytes(fe.bytes());for(var be=0;be<w;be++)_.start(),_.update(Se.getBytes()),Se=_.digest();var we=new t.util.ByteBuffer;for(j=0;j<J;j++)we.putByte(Se.at(j%K));var Ce=Math.ceil(Z/J)+Math.ceil(P/J),je=new t.util.ByteBuffer;for(S=0;S<Ce;S++){var Fe=new t.util.ByteBuffer(fe.getBytes(J)),Ve=511;for(j=we.length()-1;j>=0;j--)Ve=Ve>>8,Ve+=we.at(j)+Fe.at(j),Fe.setAt(j,Ve&255);je.putBuffer(Fe)}fe=je,H.putBuffer(Se)}return H.truncate(H.length()-I),H},u.pbe.getCipher=function(E,y,A){switch(E){case u.oids.pkcs5PBES2:return u.pbe.getCipherForPBES2(E,y,A);case u.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case u.oids["pbewithSHAAnd40BitRC2-CBC"]:return u.pbe.getCipherForPKCS12PBE(E,y,A);default:var w=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw w.oid=E,w.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],w}},u.pbe.getCipherForPBES2=function(E,y,A){var w={},I=[];if(!r.validate(y,c,w,I)){var _=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw _.errors=I,_}if(E=r.derToOid(w.kdfOid),E!==u.oids.pkcs5PBKDF2){var _=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw _.oid=E,_.supportedOids=["pkcs5PBKDF2"],_}if(E=r.derToOid(w.encOid),E!==u.oids["aes128-CBC"]&&E!==u.oids["aes192-CBC"]&&E!==u.oids["aes256-CBC"]&&E!==u.oids["des-EDE3-CBC"]&&E!==u.oids.desCBC){var _=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw _.oid=E,_.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],_}var S=w.kdfSalt,j=t.util.createBuffer(w.kdfIterationCount);j=j.getInt(j.length()<<3);var K,J;switch(u.oids[E]){case"aes128-CBC":K=16,J=t.aes.createDecryptionCipher;break;case"aes192-CBC":K=24,J=t.aes.createDecryptionCipher;break;case"aes256-CBC":K=32,J=t.aes.createDecryptionCipher;break;case"des-EDE3-CBC":K=24,J=t.des.createDecryptionCipher;break;case"desCBC":K=8,J=t.des.createDecryptionCipher;break}var H=s(w.prfOid),U=t.pkcs5.pbkdf2(A,S,j,K,H),P=w.encIv,Z=J(U);return Z.start(P),Z},u.pbe.getCipherForPKCS12PBE=function(E,y,A){var w={},I=[];if(!r.validate(y,a,w,I)){var _=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw _.errors=I,_}var S=t.util.createBuffer(w.salt),j=t.util.createBuffer(w.iterations);j=j.getInt(j.length()<<3);var K,J,H;switch(E){case u.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:K=24,J=8,H=t.des.startDecrypting;break;case u.oids["pbewithSHAAnd40BitRC2-CBC"]:K=5,J=8,H=function(ue,le){var ne=t.rc2.createDecryptionCipher(ue,40);return ne.start(le,null),ne};break;default:var _=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw _.oid=E,_}var U=s(w.prfOid),P=u.pbe.generatePkcs12Key(A,S,1,j,K,U);U.start();var Z=u.pbe.generatePkcs12Key(A,S,2,j,J,U);return H(P,Z)},u.pbe.opensslDeriveBytes=function(E,y,A,w){if(typeof w>"u"||w===null){if(!("md5"in t.md))throw new Error('"md5" hash algorithm unavailable.');w=t.md.md5.create()}y===null&&(y="");for(var I=[o(w,E+y)],_=16,S=1;_<A;++S,_+=16)I.push(o(w,I[S-1]+E+y));return I.join("").substr(0,A)};function o(E,y){return E.start().update(y).digest().getBytes()}function s(E){var y;if(!E)y="hmacWithSHA1";else if(y=u.oids[r.derToOid(E)],!y){var A=new Error("Unsupported PRF OID.");throw A.oid=E,A.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],A}return h(y)}function h(E){var y=t.md;switch(E){case"hmacWithSHA224":y=t.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":E=E.substr(8).toLowerCase();break;default:var A=new Error("Unsupported PRF algorithm.");throw A.algorithm=E,A.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],A}if(!y||!(E in y))throw new Error("Unknown hash algorithm: "+E);return y[E].create()}function v(E,y,A,w){var I=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,E),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,y.getBytes())]);return w!=="hmacWithSHA1"&&I.value.push(r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,t.util.hexToBytes(A.toString(16))),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(u.oids[w]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.NULL,!1,"")])),I}return pbe}var pkcs12={exports:{}},pkcs7asn1={exports:{}},hasRequiredPkcs7asn1;function requirePkcs7asn1(){if(hasRequiredPkcs7asn1)return pkcs7asn1.exports;hasRequiredPkcs7asn1=1;var t=requireForge();requireAsn1(),requireUtil$7();var e=t.asn1,r=pkcs7asn1.exports=t.pkcs7asn1=t.pkcs7asn1||{};t.pkcs7=t.pkcs7||{},t.pkcs7.asn1=r;var u={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=u;var d={name:"EncryptedContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(d)},r.encryptedDataValidator={name:"EncryptedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"}].concat(d)};var m={name:"SignerInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};return r.signedDataValidator={name:"SignedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},u,{name:"SignedData.Certificates",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,capture:"signerInfos",optional:!0,value:[m]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]},pkcs7asn1.exports}var x509={exports:{}},mgf1={exports:{}},hasRequiredMgf1;function requireMgf1(){if(hasRequiredMgf1)return mgf1.exports;hasRequiredMgf1=1;var t=requireForge();requireUtil$7(),t.mgf=t.mgf||{};var e=mgf1.exports=t.mgf.mgf1=t.mgf1=t.mgf1||{};return e.create=function(r){var u={generate:function(d,m){for(var c=new t.util.ByteBuffer,a=Math.ceil(m/r.digestLength),o=0;o<a;o++){var s=new t.util.ByteBuffer;s.putInt32(o),r.start(),r.update(d+s.getBytes()),c.putBuffer(r.digest())}return c.truncate(c.length()-m),c.getBytes()}};return u},mgf1.exports}var mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var t=requireForge();return requireMgf1(),mgf=t.mgf=t.mgf||{},t.mgf.mgf1=t.mgf1,mgf}var pss={exports:{}},hasRequiredPss;function requirePss(){if(hasRequiredPss)return pss.exports;hasRequiredPss=1;var t=requireForge();requireRandom(),requireUtil$7();var e=pss.exports=t.pss=t.pss||{};return e.create=function(r){arguments.length===3&&(r={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var u=r.md,d=r.mgf,m=u.digestLength,c=r.salt||null;typeof c=="string"&&(c=t.util.createBuffer(c));var a;if("saltLength"in r)a=r.saltLength;else if(c!==null)a=c.length();else throw new Error("Salt length not specified or specific salt not given.");if(c!==null&&c.length()!==a)throw new Error("Given salt length does not match length of given salt.");var o=r.prng||t.random,s={};return s.encode=function(h,v){var E,y=v-1,A=Math.ceil(y/8),w=h.digest().getBytes();if(A<m+a+2)throw new Error("Message is too long to encrypt.");var I;c===null?I=o.getBytesSync(a):I=c.bytes();var _=new t.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(w),_.putBytes(I),u.start(),u.update(_.getBytes());var S=u.digest().getBytes(),j=new t.util.ByteBuffer;j.fillWithByte(0,A-a-m-2),j.putByte(1),j.putBytes(I);var K=j.getBytes(),J=A-m-1,H=d.generate(S,J),U="";for(E=0;E<J;E++)U+=String.fromCharCode(K.charCodeAt(E)^H.charCodeAt(E));var P=65280>>8*A-y&255;return U=String.fromCharCode(U.charCodeAt(0)&~P)+U.substr(1),U+S+""},s.verify=function(h,v,E){var y,A=E-1,w=Math.ceil(A/8);if(v=v.substr(-w),w<m+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(v.charCodeAt(w-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var I=w-m-1,_=v.substr(0,I),S=v.substr(I,m),j=65280>>8*w-A&255;if((_.charCodeAt(0)&j)!==0)throw new Error("Bits beyond keysize not zero as expected.");var K=d.generate(S,I),J="";for(y=0;y<I;y++)J+=String.fromCharCode(_.charCodeAt(y)^K.charCodeAt(y));J=String.fromCharCode(J.charCodeAt(0)&~j)+J.substr(1);var H=w-m-a-2;for(y=0;y<H;y++)if(J.charCodeAt(y)!==0)throw new Error("Leftmost octets not zero as expected");if(J.charCodeAt(H)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var U=J.substr(-a),P=new t.util.ByteBuffer;P.fillWithByte(0,8),P.putBytes(h),P.putBytes(U),u.start(),u.update(P.getBytes());var Z=u.digest().getBytes();return S===Z},s},pss.exports}var hasRequiredX509;function requireX509(){if(hasRequiredX509)return x509.exports;hasRequiredX509=1;var t=requireForge();requireAes(),requireAsn1(),requireDes(),requireMd(),requireMgf(),requireOids(),requirePem(),requirePss(),requireRsa(),requireUtil$7();var e=t.asn1,r=x509.exports=t.pki=t.pki||{},u=r.oids,d={};d.CN=u.commonName,d.commonName="CN",d.C=u.countryName,d.countryName="C",d.L=u.localityName,d.localityName="L",d.ST=u.stateOrProvinceName,d.stateOrProvinceName="ST",d.O=u.organizationName,d.organizationName="O",d.OU=u.organizationalUnitName,d.organizationalUnitName="OU",d.E=u.emailAddress,d.emailAddress="E";var m=t.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},m,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},a={name:"rsapss",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},o={name:"CertificationRequestInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},m,{name:"CertificationRequestInfo.attributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0}]}]}]},s={name:"CertificationRequest",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[o,{name:"CertificationRequest.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};r.RDNAttributesAsArray=function(H,U){for(var P=[],Z,ie,ue,le=0;le<H.value.length;++le){Z=H.value[le];for(var ne=0;ne<Z.value.length;++ne)ue={},ie=Z.value[ne],ue.type=e.derToOid(ie.value[0].value),ue.value=ie.value[1].value,ue.valueTagClass=ie.value[1].type,ue.type in u&&(ue.name=u[ue.type],ue.name in d&&(ue.shortName=d[ue.name])),U&&(U.update(ue.type),U.update(ue.value)),P.push(ue)}return P},r.CRIAttributesAsArray=function(H){for(var U=[],P=0;P<H.length;++P)for(var Z=H[P],ie=e.derToOid(Z.value[0].value),ue=Z.value[1].value,le=0;le<ue.length;++le){var ne={};if(ne.type=ie,ne.value=ue[le].value,ne.valueTagClass=ue[le].type,ne.type in u&&(ne.name=u[ne.type],ne.name in d&&(ne.shortName=d[ne.name])),ne.type===u.extensionRequest){ne.extensions=[];for(var ye=0;ye<ne.value.length;++ye)ne.extensions.push(r.certificateExtensionFromAsn1(ne.value[ye]))}U.push(ne)}return U};function h(H,U){typeof U=="string"&&(U={shortName:U});for(var P=null,Z,ie=0;P===null&&ie<H.attributes.length;++ie)Z=H.attributes[ie],(U.type&&U.type===Z.type||U.name&&U.name===Z.name||U.shortName&&U.shortName===Z.shortName)&&(P=Z);return P}var v=function(H,U,P){var Z={};if(H!==u["RSASSA-PSS"])return Z;P&&(Z={hash:{algorithmOid:u.sha1},mgf:{algorithmOid:u.mgf1,hash:{algorithmOid:u.sha1}},saltLength:20});var ie={},ue=[];if(!e.validate(U,a,ie,ue)){var le=new Error("Cannot read RSASSA-PSS parameter block.");throw le.errors=ue,le}return ie.hashOid!==void 0&&(Z.hash=Z.hash||{},Z.hash.algorithmOid=e.derToOid(ie.hashOid)),ie.maskGenOid!==void 0&&(Z.mgf=Z.mgf||{},Z.mgf.algorithmOid=e.derToOid(ie.maskGenOid),Z.mgf.hash=Z.mgf.hash||{},Z.mgf.hash.algorithmOid=e.derToOid(ie.maskGenHashOid)),ie.saltLength!==void 0&&(Z.saltLength=ie.saltLength.charCodeAt(0)),Z},E=function(H){switch(u[H.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return t.md.sha1.create();case"md5WithRSAEncryption":return t.md.md5.create();case"sha256WithRSAEncryption":return t.md.sha256.create();case"sha384WithRSAEncryption":return t.md.sha384.create();case"sha512WithRSAEncryption":return t.md.sha512.create();case"RSASSA-PSS":return t.md.sha256.create();default:var U=new Error("Could not compute "+H.type+" digest. Unknown signature OID.");throw U.signatureOid=H.signatureOid,U}},y=function(H){var U=H.certificate,P;switch(U.signatureOid){case u.sha1WithRSAEncryption:case u.sha1WithRSASignature:break;case u["RSASSA-PSS"]:var Z,ie;if(Z=u[U.signatureParameters.mgf.hash.algorithmOid],Z===void 0||t.md[Z]===void 0){var ue=new Error("Unsupported MGF hash function.");throw ue.oid=U.signatureParameters.mgf.hash.algorithmOid,ue.name=Z,ue}if(ie=u[U.signatureParameters.mgf.algorithmOid],ie===void 0||t.mgf[ie]===void 0){var ue=new Error("Unsupported MGF function.");throw ue.oid=U.signatureParameters.mgf.algorithmOid,ue.name=ie,ue}if(ie=t.mgf[ie].create(t.md[Z].create()),Z=u[U.signatureParameters.hash.algorithmOid],Z===void 0||t.md[Z]===void 0){var ue=new Error("Unsupported RSASSA-PSS hash function.");throw ue.oid=U.signatureParameters.hash.algorithmOid,ue.name=Z,ue}P=t.pss.create(t.md[Z].create(),ie,U.signatureParameters.saltLength);break}return U.publicKey.verify(H.md.digest().getBytes(),H.signature,P)};r.certificateFromPem=function(H,U,P){var Z=t.pem.decode(H)[0];if(Z.type!=="CERTIFICATE"&&Z.type!=="X509 CERTIFICATE"&&Z.type!=="TRUSTED CERTIFICATE"){var ie=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw ie.headerType=Z.type,ie}if(Z.procType&&Z.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var ue=e.fromDer(Z.body,P);return r.certificateFromAsn1(ue,U)},r.certificateToPem=function(H,U){var P={type:"CERTIFICATE",body:e.toDer(r.certificateToAsn1(H)).getBytes()};return t.pem.encode(P,{maxline:U})},r.publicKeyFromPem=function(H){var U=t.pem.decode(H)[0];if(U.type!=="PUBLIC KEY"&&U.type!=="RSA PUBLIC KEY"){var P=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw P.headerType=U.type,P}if(U.procType&&U.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var Z=e.fromDer(U.body);return r.publicKeyFromAsn1(Z)},r.publicKeyToPem=function(H,U){var P={type:"PUBLIC KEY",body:e.toDer(r.publicKeyToAsn1(H)).getBytes()};return t.pem.encode(P,{maxline:U})},r.publicKeyToRSAPublicKeyPem=function(H,U){var P={type:"RSA PUBLIC KEY",body:e.toDer(r.publicKeyToRSAPublicKey(H)).getBytes()};return t.pem.encode(P,{maxline:U})},r.getPublicKeyFingerprint=function(H,U){U=U||{};var P=U.md||t.md.sha1.create(),Z=U.type||"RSAPublicKey",ie;switch(Z){case"RSAPublicKey":ie=e.toDer(r.publicKeyToRSAPublicKey(H)).getBytes();break;case"SubjectPublicKeyInfo":ie=e.toDer(r.publicKeyToAsn1(H)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+U.type+'".')}P.start(),P.update(ie);var ue=P.digest();if(U.encoding==="hex"){var le=ue.toHex();return U.delimiter?le.match(/.{2}/g).join(U.delimiter):le}else{if(U.encoding==="binary")return ue.getBytes();if(U.encoding)throw new Error('Unknown encoding "'+U.encoding+'".')}return ue},r.certificationRequestFromPem=function(H,U,P){var Z=t.pem.decode(H)[0];if(Z.type!=="CERTIFICATE REQUEST"){var ie=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw ie.headerType=Z.type,ie}if(Z.procType&&Z.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var ue=e.fromDer(Z.body,P);return r.certificationRequestFromAsn1(ue,U)},r.certificationRequestToPem=function(H,U){var P={type:"CERTIFICATE REQUEST",body:e.toDer(r.certificationRequestToAsn1(H)).getBytes()};return t.pem.encode(P,{maxline:U})},r.createCertificate=function(){var H={};return H.version=2,H.serialNumber="00",H.signatureOid=null,H.signature=null,H.siginfo={},H.siginfo.algorithmOid=null,H.validity={},H.validity.notBefore=new Date,H.validity.notAfter=new Date,H.issuer={},H.issuer.getField=function(U){return h(H.issuer,U)},H.issuer.addField=function(U){w([U]),H.issuer.attributes.push(U)},H.issuer.attributes=[],H.issuer.hash=null,H.subject={},H.subject.getField=function(U){return h(H.subject,U)},H.subject.addField=function(U){w([U]),H.subject.attributes.push(U)},H.subject.attributes=[],H.subject.hash=null,H.extensions=[],H.publicKey=null,H.md=null,H.setSubject=function(U,P){w(U),H.subject.attributes=U,delete H.subject.uniqueId,P&&(H.subject.uniqueId=P),H.subject.hash=null},H.setIssuer=function(U,P){w(U),H.issuer.attributes=U,delete H.issuer.uniqueId,P&&(H.issuer.uniqueId=P),H.issuer.hash=null},H.setExtensions=function(U){for(var P=0;P<U.length;++P)I(U[P],{cert:H});H.extensions=U},H.getExtension=function(U){typeof U=="string"&&(U={name:U});for(var P=null,Z,ie=0;P===null&&ie<H.extensions.length;++ie)Z=H.extensions[ie],(U.id&&Z.id===U.id||U.name&&Z.name===U.name)&&(P=Z);return P},H.sign=function(U,P){H.md=P||t.md.sha1.create();var Z=u[H.md.algorithm+"WithRSAEncryption"];if(!Z){var ie=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw ie.algorithm=H.md.algorithm,ie}H.signatureOid=H.siginfo.algorithmOid=Z,H.tbsCertificate=r.getTBSCertificate(H);var ue=e.toDer(H.tbsCertificate);H.md.update(ue.getBytes()),H.signature=U.sign(H.md)},H.verify=function(U){var P=!1;if(!H.issued(U)){var Z=U.issuer,ie=H.subject,ue=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw ue.expectedIssuer=ie.attributes,ue.actualIssuer=Z.attributes,ue}var le=U.md;if(le===null){le=E({signatureOid:U.signatureOid,type:"certificate"});var ne=U.tbsCertificate||r.getTBSCertificate(U),ye=e.toDer(ne);le.update(ye.getBytes())}return le!==null&&(P=y({certificate:H,md:le,signature:U.signature})),P},H.isIssuer=function(U){var P=!1,Z=H.issuer,ie=U.subject;if(Z.hash&&ie.hash)P=Z.hash===ie.hash;else if(Z.attributes.length===ie.attributes.length){P=!0;for(var ue,le,ne=0;P&&ne<Z.attributes.length;++ne)ue=Z.attributes[ne],le=ie.attributes[ne],(ue.type!==le.type||ue.value!==le.value)&&(P=!1)}return P},H.issued=function(U){return U.isIssuer(H)},H.generateSubjectKeyIdentifier=function(){return r.getPublicKeyFingerprint(H.publicKey,{type:"RSAPublicKey"})},H.verifySubjectKeyIdentifier=function(){for(var U=u.subjectKeyIdentifier,P=0;P<H.extensions.length;++P){var Z=H.extensions[P];if(Z.id===U){var ie=H.generateSubjectKeyIdentifier().getBytes();return t.util.hexToBytes(Z.subjectKeyIdentifier)===ie}}return!1},H},r.certificateFromAsn1=function(H,U){var P={},Z=[];if(!e.validate(H,c,P,Z)){var ie=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw ie.errors=Z,ie}var ue=e.derToOid(P.publicKeyOid);if(ue!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var le=r.createCertificate();le.version=P.certVersion?P.certVersion.charCodeAt(0):0;var ne=t.util.createBuffer(P.certSerialNumber);le.serialNumber=ne.toHex(),le.signatureOid=t.asn1.derToOid(P.certSignatureOid),le.signatureParameters=v(le.signatureOid,P.certSignatureParams,!0),le.siginfo.algorithmOid=t.asn1.derToOid(P.certinfoSignatureOid),le.siginfo.parameters=v(le.siginfo.algorithmOid,P.certinfoSignatureParams,!1),le.signature=P.certSignature;var ye=[];if(P.certValidity1UTCTime!==void 0&&ye.push(e.utcTimeToDate(P.certValidity1UTCTime)),P.certValidity2GeneralizedTime!==void 0&&ye.push(e.generalizedTimeToDate(P.certValidity2GeneralizedTime)),P.certValidity3UTCTime!==void 0&&ye.push(e.utcTimeToDate(P.certValidity3UTCTime)),P.certValidity4GeneralizedTime!==void 0&&ye.push(e.generalizedTimeToDate(P.certValidity4GeneralizedTime)),ye.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(ye.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(le.validity.notBefore=ye[0],le.validity.notAfter=ye[1],le.tbsCertificate=P.tbsCertificate,U){le.md=E({signatureOid:le.signatureOid,type:"certificate"});var fe=e.toDer(le.tbsCertificate);le.md.update(fe.getBytes())}var Te=t.md.sha1.create(),Ae=e.toDer(P.certIssuer);Te.update(Ae.getBytes()),le.issuer.getField=function(we){return h(le.issuer,we)},le.issuer.addField=function(we){w([we]),le.issuer.attributes.push(we)},le.issuer.attributes=r.RDNAttributesAsArray(P.certIssuer),P.certIssuerUniqueId&&(le.issuer.uniqueId=P.certIssuerUniqueId),le.issuer.hash=Te.digest().toHex();var Se=t.md.sha1.create(),be=e.toDer(P.certSubject);return Se.update(be.getBytes()),le.subject.getField=function(we){return h(le.subject,we)},le.subject.addField=function(we){w([we]),le.subject.attributes.push(we)},le.subject.attributes=r.RDNAttributesAsArray(P.certSubject),P.certSubjectUniqueId&&(le.subject.uniqueId=P.certSubjectUniqueId),le.subject.hash=Se.digest().toHex(),P.certExtensions?le.extensions=r.certificateExtensionsFromAsn1(P.certExtensions):le.extensions=[],le.publicKey=r.publicKeyFromAsn1(P.subjectPublicKeyInfo),le},r.certificateExtensionsFromAsn1=function(H){for(var U=[],P=0;P<H.value.length;++P)for(var Z=H.value[P],ie=0;ie<Z.value.length;++ie)U.push(r.certificateExtensionFromAsn1(Z.value[ie]));return U},r.certificateExtensionFromAsn1=function(H){var U={};if(U.id=e.derToOid(H.value[0].value),U.critical=!1,H.value[1].type===e.Type.BOOLEAN?(U.critical=H.value[1].value.charCodeAt(0)!==0,U.value=H.value[2].value):U.value=H.value[1].value,U.id in u){if(U.name=u[U.id],U.name==="keyUsage"){var P=e.fromDer(U.value),Z=0,ie=0;P.value.length>1&&(Z=P.value.charCodeAt(1),ie=P.value.length>2?P.value.charCodeAt(2):0),U.digitalSignature=(Z&128)===128,U.nonRepudiation=(Z&64)===64,U.keyEncipherment=(Z&32)===32,U.dataEncipherment=(Z&16)===16,U.keyAgreement=(Z&8)===8,U.keyCertSign=(Z&4)===4,U.cRLSign=(Z&2)===2,U.encipherOnly=(Z&1)===1,U.decipherOnly=(ie&128)===128}else if(U.name==="basicConstraints"){var P=e.fromDer(U.value);P.value.length>0&&P.value[0].type===e.Type.BOOLEAN?U.cA=P.value[0].value.charCodeAt(0)!==0:U.cA=!1;var ue=null;P.value.length>0&&P.value[0].type===e.Type.INTEGER?ue=P.value[0].value:P.value.length>1&&(ue=P.value[1].value),ue!==null&&(U.pathLenConstraint=e.derToInteger(ue))}else if(U.name==="extKeyUsage")for(var P=e.fromDer(U.value),le=0;le<P.value.length;++le){var ne=e.derToOid(P.value[le].value);ne in u?U[u[ne]]=!0:U[ne]=!0}else if(U.name==="nsCertType"){var P=e.fromDer(U.value),Z=0;P.value.length>1&&(Z=P.value.charCodeAt(1)),U.client=(Z&128)===128,U.server=(Z&64)===64,U.email=(Z&32)===32,U.objsign=(Z&16)===16,U.reserved=(Z&8)===8,U.sslCA=(Z&4)===4,U.emailCA=(Z&2)===2,U.objCA=(Z&1)===1}else if(U.name==="subjectAltName"||U.name==="issuerAltName"){U.altNames=[];for(var ye,P=e.fromDer(U.value),fe=0;fe<P.value.length;++fe){ye=P.value[fe];var Te={type:ye.type,value:ye.value};switch(U.altNames.push(Te),ye.type){case 1:case 2:case 6:break;case 7:Te.ip=t.util.bytesToIP(ye.value);break;case 8:Te.oid=e.derToOid(ye.value);break}}}else if(U.name==="subjectKeyIdentifier"){var P=e.fromDer(U.value);U.subjectKeyIdentifier=t.util.bytesToHex(P.value)}}return U},r.certificationRequestFromAsn1=function(H,U){var P={},Z=[];if(!e.validate(H,s,P,Z)){var ie=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw ie.errors=Z,ie}var ue=e.derToOid(P.publicKeyOid);if(ue!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var le=r.createCertificationRequest();if(le.version=P.csrVersion?P.csrVersion.charCodeAt(0):0,le.signatureOid=t.asn1.derToOid(P.csrSignatureOid),le.signatureParameters=v(le.signatureOid,P.csrSignatureParams,!0),le.siginfo.algorithmOid=t.asn1.derToOid(P.csrSignatureOid),le.siginfo.parameters=v(le.siginfo.algorithmOid,P.csrSignatureParams,!1),le.signature=P.csrSignature,le.certificationRequestInfo=P.certificationRequestInfo,U){le.md=E({signatureOid:le.signatureOid,type:"certification request"});var ne=e.toDer(le.certificationRequestInfo);le.md.update(ne.getBytes())}var ye=t.md.sha1.create();return le.subject.getField=function(fe){return h(le.subject,fe)},le.subject.addField=function(fe){w([fe]),le.subject.attributes.push(fe)},le.subject.attributes=r.RDNAttributesAsArray(P.certificationRequestInfoSubject,ye),le.subject.hash=ye.digest().toHex(),le.publicKey=r.publicKeyFromAsn1(P.subjectPublicKeyInfo),le.getAttribute=function(fe){return h(le,fe)},le.addAttribute=function(fe){w([fe]),le.attributes.push(fe)},le.attributes=r.CRIAttributesAsArray(P.certificationRequestInfoAttributes||[]),le},r.createCertificationRequest=function(){var H={};return H.version=0,H.signatureOid=null,H.signature=null,H.siginfo={},H.siginfo.algorithmOid=null,H.subject={},H.subject.getField=function(U){return h(H.subject,U)},H.subject.addField=function(U){w([U]),H.subject.attributes.push(U)},H.subject.attributes=[],H.subject.hash=null,H.publicKey=null,H.attributes=[],H.getAttribute=function(U){return h(H,U)},H.addAttribute=function(U){w([U]),H.attributes.push(U)},H.md=null,H.setSubject=function(U){w(U),H.subject.attributes=U,H.subject.hash=null},H.setAttributes=function(U){w(U),H.attributes=U},H.sign=function(U,P){H.md=P||t.md.sha1.create();var Z=u[H.md.algorithm+"WithRSAEncryption"];if(!Z){var ie=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw ie.algorithm=H.md.algorithm,ie}H.signatureOid=H.siginfo.algorithmOid=Z,H.certificationRequestInfo=r.getCertificationRequestInfo(H);var ue=e.toDer(H.certificationRequestInfo);H.md.update(ue.getBytes()),H.signature=U.sign(H.md)},H.verify=function(){var U=!1,P=H.md;if(P===null){P=E({signatureOid:H.signatureOid,type:"certification request"});var Z=H.certificationRequestInfo||r.getCertificationRequestInfo(H),ie=e.toDer(Z);P.update(ie.getBytes())}return P!==null&&(U=y({certificate:H,md:P,signature:H.signature})),U},H};function A(H){for(var U=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),P,Z,ie=H.attributes,ue=0;ue<ie.length;++ue){P=ie[ue];var le=P.value,ne=e.Type.PRINTABLESTRING;"valueTagClass"in P&&(ne=P.valueTagClass,ne===e.Type.UTF8&&(le=t.util.encodeUtf8(le))),Z=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(P.type).getBytes()),e.create(e.Class.UNIVERSAL,ne,!1,le)])]),U.value.push(Z)}return U}function w(H){for(var U,P=0;P<H.length;++P){if(U=H[P],typeof U.name>"u"&&(U.type&&U.type in r.oids?U.name=r.oids[U.type]:U.shortName&&U.shortName in d&&(U.name=r.oids[d[U.shortName]])),typeof U.type>"u")if(U.name&&U.name in r.oids)U.type=r.oids[U.name];else{var Z=new Error("Attribute type not specified.");throw Z.attribute=U,Z}if(typeof U.shortName>"u"&&U.name&&U.name in d&&(U.shortName=d[U.name]),U.type===u.extensionRequest&&(U.valueConstructed=!0,U.valueTagClass=e.Type.SEQUENCE,!U.value&&U.extensions)){U.value=[];for(var ie=0;ie<U.extensions.length;++ie)U.value.push(r.certificateExtensionToAsn1(I(U.extensions[ie])))}if(typeof U.value>"u"){var Z=new Error("Attribute value not specified.");throw Z.attribute=U,Z}}}function I(H,U){if(U=U||{},typeof H.name>"u"&&H.id&&H.id in r.oids&&(H.name=r.oids[H.id]),typeof H.id>"u")if(H.name&&H.name in r.oids)H.id=r.oids[H.name];else{var P=new Error("Extension ID not specified.");throw P.extension=H,P}if(typeof H.value<"u")return H;if(H.name==="keyUsage"){var Z=0,ie=0,ue=0;H.digitalSignature&&(ie|=128,Z=7),H.nonRepudiation&&(ie|=64,Z=6),H.keyEncipherment&&(ie|=32,Z=5),H.dataEncipherment&&(ie|=16,Z=4),H.keyAgreement&&(ie|=8,Z=3),H.keyCertSign&&(ie|=4,Z=2),H.cRLSign&&(ie|=2,Z=1),H.encipherOnly&&(ie|=1,Z=0),H.decipherOnly&&(ue|=128,Z=7);var le=String.fromCharCode(Z);ue!==0?le+=String.fromCharCode(ie)+String.fromCharCode(ue):ie!==0&&(le+=String.fromCharCode(ie)),H.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,le)}else if(H.name==="basicConstraints")H.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),H.cA&&H.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,"")),"pathLenConstraint"in H&&H.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(H.pathLenConstraint).getBytes()));else if(H.name==="extKeyUsage"){H.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);var ne=H.value.value;for(var ye in H)H[ye]===!0&&(ye in u?ne.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(u[ye]).getBytes())):ye.indexOf(".")!==-1&&ne.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(ye).getBytes())))}else if(H.name==="nsCertType"){var Z=0,ie=0;H.client&&(ie|=128,Z=7),H.server&&(ie|=64,Z=6),H.email&&(ie|=32,Z=5),H.objsign&&(ie|=16,Z=4),H.reserved&&(ie|=8,Z=3),H.sslCA&&(ie|=4,Z=2),H.emailCA&&(ie|=2,Z=1),H.objCA&&(ie|=1,Z=0);var le=String.fromCharCode(Z);ie!==0&&(le+=String.fromCharCode(ie)),H.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,le)}else if(H.name==="subjectAltName"||H.name==="issuerAltName"){H.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);for(var fe,Te=0;Te<H.altNames.length;++Te){fe=H.altNames[Te];var le=fe.value;if(fe.type===7&&fe.ip){if(le=t.util.bytesFromIP(fe.ip),le===null){var P=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw P.extension=H,P}}else fe.type===8&&(fe.oid?le=e.oidToDer(e.oidToDer(fe.oid)):le=e.oidToDer(le));H.value.value.push(e.create(e.Class.CONTEXT_SPECIFIC,fe.type,!1,le))}}else if(H.name==="nsComment"&&U.cert){if(!/^[\x00-\x7F]*$/.test(H.comment)||H.comment.length<1||H.comment.length>128)throw new Error('Invalid "nsComment" content.');H.value=e.create(e.Class.UNIVERSAL,e.Type.IA5STRING,!1,H.comment)}else if(H.name==="subjectKeyIdentifier"&&U.cert){var Ae=U.cert.generateSubjectKeyIdentifier();H.subjectKeyIdentifier=Ae.toHex(),H.value=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,Ae.getBytes())}else if(H.name==="authorityKeyIdentifier"&&U.cert){H.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);var ne=H.value.value;if(H.keyIdentifier){var Se=H.keyIdentifier===!0?U.cert.generateSubjectKeyIdentifier().getBytes():H.keyIdentifier;ne.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!1,Se))}if(H.authorityCertIssuer){var be=[e.create(e.Class.CONTEXT_SPECIFIC,4,!0,[A(H.authorityCertIssuer===!0?U.cert.issuer:H.authorityCertIssuer)])];ne.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,be))}if(H.serialNumber){var we=t.util.hexToBytes(H.serialNumber===!0?U.cert.serialNumber:H.serialNumber);ne.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!1,we))}}else if(H.name==="cRLDistributionPoints"){H.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);for(var ne=H.value.value,Ce=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),je=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]),fe,Te=0;Te<H.altNames.length;++Te){fe=H.altNames[Te];var le=fe.value;if(fe.type===7&&fe.ip){if(le=t.util.bytesFromIP(fe.ip),le===null){var P=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw P.extension=H,P}}else fe.type===8&&(fe.oid?le=e.oidToDer(e.oidToDer(fe.oid)):le=e.oidToDer(le));je.value.push(e.create(e.Class.CONTEXT_SPECIFIC,fe.type,!1,le))}Ce.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[je])),ne.push(Ce)}if(typeof H.value>"u"){var P=new Error("Extension value not specified.");throw P.extension=H,P}return H}function _(H,U){switch(H){case u["RSASSA-PSS"]:var P=[];return U.hash.algorithmOid!==void 0&&P.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])),U.mgf.algorithmOid!==void 0&&P.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.mgf.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.mgf.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])])),U.saltLength!==void 0&&P.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(U.saltLength).getBytes())])),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,P);default:return e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")}}function S(H){var U=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);if(H.attributes.length===0)return U;for(var P=H.attributes,Z=0;Z<P.length;++Z){var ie=P[Z],ue=ie.value,le=e.Type.UTF8;"valueTagClass"in ie&&(le=ie.valueTagClass),le===e.Type.UTF8&&(ue=t.util.encodeUtf8(ue));var ne=!1;"valueConstructed"in ie&&(ne=ie.valueConstructed);var ye=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(ie.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,le,ne,ue)])]);U.value.push(ye)}return U}var j=new Date("1950-01-01T00:00:00Z"),K=new Date("2050-01-01T00:00:00Z");function J(H){return H>=j&&H<K?e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(H)):e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(H))}return r.getTBSCertificate=function(H){var U=J(H.validity.notBefore),P=J(H.validity.notAfter),Z=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(H.version).getBytes())]),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,t.util.hexToBytes(H.serialNumber)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(H.siginfo.algorithmOid).getBytes()),_(H.siginfo.algorithmOid,H.siginfo.parameters)]),A(H.issuer),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[U,P]),A(H.subject),r.publicKeyToAsn1(H.publicKey)]);return H.issuer.uniqueId&&Z.value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+H.issuer.uniqueId)])),H.subject.uniqueId&&Z.value.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+H.subject.uniqueId)])),H.extensions.length>0&&Z.value.push(r.certificateExtensionsToAsn1(H.extensions)),Z},r.getCertificationRequestInfo=function(H){var U=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(H.version).getBytes()),A(H.subject),r.publicKeyToAsn1(H.publicKey),S(H)]);return U},r.distinguishedNameToAsn1=function(H){return A(H)},r.certificateToAsn1=function(H){var U=H.tbsCertificate||r.getTBSCertificate(H);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[U,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(H.signatureOid).getBytes()),_(H.signatureOid,H.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+H.signature)])},r.certificateExtensionsToAsn1=function(H){var U=e.create(e.Class.CONTEXT_SPECIFIC,3,!0,[]),P=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);U.value.push(P);for(var Z=0;Z<H.length;++Z)P.value.push(r.certificateExtensionToAsn1(H[Z]));return U},r.certificateExtensionToAsn1=function(H){var U=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);U.value.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(H.id).getBytes())),H.critical&&U.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,""));var P=H.value;return typeof H.value!="string"&&(P=e.toDer(P).getBytes()),U.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,P)),U},r.certificationRequestToAsn1=function(H){var U=H.certificationRequestInfo||r.getCertificationRequestInfo(H);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[U,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(H.signatureOid).getBytes()),_(H.signatureOid,H.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+H.signature)])},r.createCaStore=function(H){var U={certs:{}};U.getIssuer=function(le){var ne=P(le.issuer);return ne},U.addCertificate=function(le){if(typeof le=="string"&&(le=t.pki.certificateFromPem(le)),Z(le.subject),!U.hasCertificate(le))if(le.subject.hash in U.certs){var ne=U.certs[le.subject.hash];t.util.isArray(ne)||(ne=[ne]),ne.push(le),U.certs[le.subject.hash]=ne}else U.certs[le.subject.hash]=le},U.hasCertificate=function(le){typeof le=="string"&&(le=t.pki.certificateFromPem(le));var ne=P(le.subject);if(!ne)return!1;t.util.isArray(ne)||(ne=[ne]);for(var ye=e.toDer(r.certificateToAsn1(le)).getBytes(),fe=0;fe<ne.length;++fe){var Te=e.toDer(r.certificateToAsn1(ne[fe])).getBytes();if(ye===Te)return!0}return!1},U.listAllCertificates=function(){var le=[];for(var ne in U.certs)if(U.certs.hasOwnProperty(ne)){var ye=U.certs[ne];if(!t.util.isArray(ye))le.push(ye);else for(var fe=0;fe<ye.length;++fe)le.push(ye[fe])}return le},U.removeCertificate=function(le){var ne;if(typeof le=="string"&&(le=t.pki.certificateFromPem(le)),Z(le.subject),!U.hasCertificate(le))return null;var ye=P(le.subject);if(!t.util.isArray(ye))return ne=U.certs[le.subject.hash],delete U.certs[le.subject.hash],ne;for(var fe=e.toDer(r.certificateToAsn1(le)).getBytes(),Te=0;Te<ye.length;++Te){var Ae=e.toDer(r.certificateToAsn1(ye[Te])).getBytes();fe===Ae&&(ne=ye[Te],ye.splice(Te,1))}return ye.length===0&&delete U.certs[le.subject.hash],ne};function P(le){return Z(le),U.certs[le.hash]||null}function Z(le){if(!le.hash){var ne=t.md.sha1.create();le.attributes=r.RDNAttributesAsArray(A(le),ne),le.hash=ne.digest().toHex()}}if(H)for(var ie=0;ie<H.length;++ie){var ue=H[ie];U.addCertificate(ue)}return U},r.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},r.verifyCertificateChain=function(H,U,P){typeof P=="function"&&(P={verify:P}),P=P||{},U=U.slice(0);var Z=U.slice(0),ie=P.validityCheckDate;typeof ie>"u"&&(ie=new Date);var ue=!0,le=null,ne=0;do{var ye=U.shift(),fe=null,Te=!1;if(ie&&(ie<ye.validity.notBefore||ie>ye.validity.notAfter)&&(le={message:"Certificate is not valid yet or has expired.",error:r.certificateError.certificate_expired,notBefore:ye.validity.notBefore,notAfter:ye.validity.notAfter,now:ie}),le===null){if(fe=U[0]||H.getIssuer(ye),fe===null&&ye.isIssuer(ye)&&(Te=!0,fe=ye),fe){var Ae=fe;t.util.isArray(Ae)||(Ae=[Ae]);for(var Se=!1;!Se&&Ae.length>0;){fe=Ae.shift();try{Se=fe.verify(ye)}catch{}}Se||(le={message:"Certificate signature is invalid.",error:r.certificateError.bad_certificate})}le===null&&(!fe||Te)&&!H.hasCertificate(ye)&&(le={message:"Certificate is not trusted.",error:r.certificateError.unknown_ca})}if(le===null&&fe&&!ye.isIssuer(fe)&&(le={message:"Certificate issuer is invalid.",error:r.certificateError.bad_certificate}),le===null)for(var be={keyUsage:!0,basicConstraints:!0},we=0;le===null&&we<ye.extensions.length;++we){var Ce=ye.extensions[we];Ce.critical&&!(Ce.name in be)&&(le={message:"Certificate has an unsupported critical extension.",error:r.certificateError.unsupported_certificate})}if(le===null&&(!ue||U.length===0&&(!fe||Te))){var je=ye.getExtension("basicConstraints"),Fe=ye.getExtension("keyUsage");if(Fe!==null&&(!Fe.keyCertSign||je===null)&&(le={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:r.certificateError.bad_certificate}),le===null&&je!==null&&!je.cA&&(le={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:r.certificateError.bad_certificate}),le===null&&Fe!==null&&"pathLenConstraint"in je){var Ve=ne-1;Ve>je.pathLenConstraint&&(le={message:"Certificate basicConstraints pathLenConstraint violated.",error:r.certificateError.bad_certificate})}}var Ge=le===null?!0:le.error,Le=P.verify?P.verify(Ge,ne,Z):Ge;if(Le===!0)le=null;else throw Ge===!0&&(le={message:"The application rejected the certificate.",error:r.certificateError.bad_certificate}),(Le||Le===0)&&(typeof Le=="object"&&!t.util.isArray(Le)?(Le.message&&(le.message=Le.message),Le.error&&(le.error=Le.error)):typeof Le=="string"&&(le.error=Le)),le;ue=!1,++ne}while(U.length>0);return!0},x509.exports}var hasRequiredPkcs12;function requirePkcs12(){if(hasRequiredPkcs12)return pkcs12.exports;hasRequiredPkcs12=1;var t=requireForge();requireAsn1(),requireHmac(),requireOids(),requirePkcs7asn1(),requirePbe(),requireRandom(),requireRsa(),requireSha1$2(),requireUtil$7(),requireX509();var e=t.asn1,r=t.pki,u=pkcs12.exports=t.pkcs12=t.pkcs12||{},d={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},m={name:"PFX",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},d,{name:"PFX.macData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:e.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},c={name:"SafeBag",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},a={name:"Attribute",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,capture:"values"}]},o={name:"CertBag",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:e.Class.UNIVERSAL,type:e.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function s(w,I,_,S){for(var j=[],K=0;K<w.length;K++)for(var J=0;J<w[K].safeBags.length;J++){var H=w[K].safeBags[J];if(!(S!==void 0&&H.type!==S)){if(I===null){j.push(H);continue}H.attributes[I]!==void 0&&H.attributes[I].indexOf(_)>=0&&j.push(H)}}return j}u.pkcs12FromAsn1=function(w,I,_){typeof I=="string"?(_=I,I=!0):I===void 0&&(I=!0);var S={},j=[];if(!e.validate(w,m,S,j)){var K=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw K.errors=K,K}var J={version:S.version.charCodeAt(0),safeContents:[],getBags:function(fe){var Te={},Ae;return"localKeyId"in fe?Ae=fe.localKeyId:"localKeyIdHex"in fe&&(Ae=t.util.hexToBytes(fe.localKeyIdHex)),Ae===void 0&&!("friendlyName"in fe)&&"bagType"in fe&&(Te[fe.bagType]=s(J.safeContents,null,null,fe.bagType)),Ae!==void 0&&(Te.localKeyId=s(J.safeContents,"localKeyId",Ae,fe.bagType)),"friendlyName"in fe&&(Te.friendlyName=s(J.safeContents,"friendlyName",fe.friendlyName,fe.bagType)),Te},getBagsByFriendlyName:function(fe,Te){return s(J.safeContents,"friendlyName",fe,Te)},getBagsByLocalKeyId:function(fe,Te){return s(J.safeContents,"localKeyId",fe,Te)}};if(S.version.charCodeAt(0)!==3){var K=new Error("PKCS#12 PFX of version other than 3 not supported.");throw K.version=S.version.charCodeAt(0),K}if(e.derToOid(S.contentType)!==r.oids.data){var K=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw K.oid=e.derToOid(S.contentType),K}var H=S.content.value[0];if(H.tagClass!==e.Class.UNIVERSAL||H.type!==e.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(H=h(H),S.mac){var U=null,P=0,Z=e.derToOid(S.macAlgorithm);switch(Z){case r.oids.sha1:U=t.md.sha1.create(),P=20;break;case r.oids.sha256:U=t.md.sha256.create(),P=32;break;case r.oids.sha384:U=t.md.sha384.create(),P=48;break;case r.oids.sha512:U=t.md.sha512.create(),P=64;break;case r.oids.md5:U=t.md.md5.create(),P=16;break}if(U===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+Z);var ie=new t.util.ByteBuffer(S.macSalt),ue="macIterations"in S?parseInt(t.util.bytesToHex(S.macIterations),16):1,le=u.generateKey(_,ie,3,ue,P,U),ne=t.hmac.create();ne.start(U,le),ne.update(H.value);var ye=ne.getMac();if(ye.getBytes()!==S.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return v(J,H.value,I,_),J};function h(w){if(w.composed||w.constructed){for(var I=t.util.createBuffer(),_=0;_<w.value.length;++_)I.putBytes(w.value[_].value);w.composed=w.constructed=!1,w.value=I.getBytes()}return w}function v(w,I,_,S){if(I=e.fromDer(I,_),I.tagClass!==e.Class.UNIVERSAL||I.type!==e.Type.SEQUENCE||I.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var j=0;j<I.value.length;j++){var K=I.value[j],J={},H=[];if(!e.validate(K,d,J,H)){var U=new Error("Cannot read ContentInfo.");throw U.errors=H,U}var P={encrypted:!1},Z=null,ie=J.content.value[0];switch(e.derToOid(J.contentType)){case r.oids.data:if(ie.tagClass!==e.Class.UNIVERSAL||ie.type!==e.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");Z=h(ie).value;break;case r.oids.encryptedData:Z=E(ie,S),P.encrypted=!0;break;default:var U=new Error("Unsupported PKCS#12 contentType.");throw U.contentType=e.derToOid(J.contentType),U}P.safeBags=y(Z,_,S),w.safeContents.push(P)}}function E(w,I){var _={},S=[];if(!e.validate(w,t.pkcs7.asn1.encryptedDataValidator,_,S)){var j=new Error("Cannot read EncryptedContentInfo.");throw j.errors=S,j}var K=e.derToOid(_.contentType);if(K!==r.oids.data){var j=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw j.oid=K,j}K=e.derToOid(_.encAlgorithm);var J=r.pbe.getCipher(K,_.encParameter,I),H=h(_.encryptedContentAsn1),U=t.util.createBuffer(H.value);if(J.update(U),!J.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return J.output.getBytes()}function y(w,I,_){if(!I&&w.length===0)return[];if(w=e.fromDer(w,I),w.tagClass!==e.Class.UNIVERSAL||w.type!==e.Type.SEQUENCE||w.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var S=[],j=0;j<w.value.length;j++){var K=w.value[j],J={},H=[];if(!e.validate(K,c,J,H)){var U=new Error("Cannot read SafeBag.");throw U.errors=H,U}var P={type:e.derToOid(J.bagId),attributes:A(J.bagAttributes)};S.push(P);var Z,ie,ue=J.bagValue.value[0];switch(P.type){case r.oids.pkcs8ShroudedKeyBag:if(ue=r.decryptPrivateKeyInfo(ue,_),ue===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case r.oids.keyBag:try{P.key=r.privateKeyFromAsn1(ue)}catch{P.key=null,P.asn1=ue}continue;case r.oids.certBag:Z=o,ie=function(){if(e.derToOid(J.certId)!==r.oids.x509Certificate){var ne=new Error("Unsupported certificate type, only X.509 supported.");throw ne.oid=e.derToOid(J.certId),ne}var ye=e.fromDer(J.cert,I);try{P.cert=r.certificateFromAsn1(ye,!0)}catch{P.cert=null,P.asn1=ye}};break;default:var U=new Error("Unsupported PKCS#12 SafeBag type.");throw U.oid=P.type,U}if(Z!==void 0&&!e.validate(ue,Z,J,H)){var U=new Error("Cannot read PKCS#12 "+Z.name);throw U.errors=H,U}ie()}return S}function A(w){var I={};if(w!==void 0)for(var _=0;_<w.length;++_){var S={},j=[];if(!e.validate(w[_],a,S,j)){var K=new Error("Cannot read PKCS#12 BagAttribute.");throw K.errors=j,K}var J=e.derToOid(S.oid);if(r.oids[J]!==void 0){I[r.oids[J]]=[];for(var H=0;H<S.values.length;++H)I[r.oids[J]].push(S.values[H].value)}}return I}return u.toPkcs12Asn1=function(w,I,_,S){S=S||{},S.saltSize=S.saltSize||8,S.count=S.count||2048,S.algorithm=S.algorithm||S.encAlgorithm||"aes128","useMac"in S||(S.useMac=!0),"localKeyId"in S||(S.localKeyId=null),"generateLocalKeyId"in S||(S.generateLocalKeyId=!0);var j=S.localKeyId,K;if(j!==null)j=t.util.hexToBytes(j);else if(S.generateLocalKeyId)if(I){var J=t.util.isArray(I)?I[0]:I;typeof J=="string"&&(J=r.certificateFromPem(J));var H=t.md.sha1.create();H.update(e.toDer(r.certificateToAsn1(J)).getBytes()),j=H.digest().getBytes()}else j=t.random.getBytes(20);var U=[];j!==null&&U.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.localKeyId).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,j)])])),"friendlyName"in S&&U.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.friendlyName).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.BMPSTRING,!1,S.friendlyName)])])),U.length>0&&(K=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,U));var P=[],Z=[];I!==null&&(t.util.isArray(I)?Z=I:Z=[I]);for(var ie=[],ue=0;ue<Z.length;++ue){I=Z[ue],typeof I=="string"&&(I=r.certificateFromPem(I));var le=ue===0?K:void 0,ne=r.certificateToAsn1(I),ye=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.certBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.x509Certificate).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(ne).getBytes())])])]),le]);ie.push(ye)}if(ie.length>0){var fe=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,ie),Te=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(fe).getBytes())])]);P.push(Te)}var Ae=null;if(w!==null){var Se=r.wrapRsaPrivateKey(r.privateKeyToAsn1(w));_===null?Ae=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.keyBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[Se]),K]):Ae=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.pkcs8ShroudedKeyBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[r.encryptPrivateKeyInfo(Se,_,S)]),K]);var be=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[Ae]),we=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(be).getBytes())])]);P.push(we)}var Ce=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,P),je;if(S.useMac){var H=t.md.sha1.create(),Fe=new t.util.ByteBuffer(t.random.getBytes(S.saltSize)),Ve=S.count,w=u.generateKey(_,Fe,3,Ve,20),Ge=t.hmac.create();Ge.start(H,w),Ge.update(e.toDer(Ce).getBytes());var Le=Ge.getMac();je=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.sha1).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,Le.getBytes())]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,Fe.getBytes()),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(Ve).getBytes())])}return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(3).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(r.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(Ce).getBytes())])]),je])},u.generateKey=t.pbe.generatePkcs12Key,pkcs12.exports}var hasRequiredPki;function requirePki(){if(hasRequiredPki)return pki.exports;hasRequiredPki=1;var t=requireForge();requireAsn1(),requireOids(),requirePbe(),requirePem(),requirePbkdf2(),requirePkcs12(),requirePss(),requireRsa(),requireUtil$7(),requireX509();var e=t.asn1,r=pki.exports=t.pki=t.pki||{};return r.pemToDer=function(u){var d=t.pem.decode(u)[0];if(d.procType&&d.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return t.util.createBuffer(d.body)},r.privateKeyFromPem=function(u){var d=t.pem.decode(u)[0];if(d.type!=="PRIVATE KEY"&&d.type!=="RSA PRIVATE KEY"){var m=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw m.headerType=d.type,m}if(d.procType&&d.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var c=e.fromDer(d.body);return r.privateKeyFromAsn1(c)},r.privateKeyToPem=function(u,d){var m={type:"RSA PRIVATE KEY",body:e.toDer(r.privateKeyToAsn1(u)).getBytes()};return t.pem.encode(m,{maxline:d})},r.privateKeyInfoToPem=function(u,d){var m={type:"PRIVATE KEY",body:e.toDer(u).getBytes()};return t.pem.encode(m,{maxline:d})},pki.exports}var tls_1,hasRequiredTls;function requireTls(){if(hasRequiredTls)return tls_1;hasRequiredTls=1;var t=requireForge();requireAsn1(),requireHmac(),requireMd5$2(),requirePem(),requirePki(),requireRandom(),requireSha1$2(),requireUtil$7();var e=function(he,p,V,R){var ce=t.util.createBuffer(),Re=he.length>>1,ke=Re+(he.length&1),qe=he.substr(0,ke),g=he.substr(Re,ke),ee=t.util.createBuffer(),ae=t.hmac.create();V=p+V;var l=Math.ceil(R/16),X=Math.ceil(R/20);ae.start("MD5",qe);var oe=t.util.createBuffer();ee.putBytes(V);for(var _e=0;_e<l;++_e)ae.start(null,null),ae.update(ee.getBytes()),ee.putBuffer(ae.digest()),ae.start(null,null),ae.update(ee.bytes()+V),oe.putBuffer(ae.digest());ae.start("SHA1",g);var He=t.util.createBuffer();ee.clear(),ee.putBytes(V);for(var _e=0;_e<X;++_e)ae.start(null,null),ae.update(ee.getBytes()),ee.putBuffer(ae.digest()),ae.start(null,null),ae.update(ee.bytes()+V),He.putBuffer(ae.digest());return ce.putBytes(t.util.xorBytes(oe.getBytes(),He.getBytes(),R)),ce},r=function(he,p,V){var R=t.hmac.create();R.start("SHA1",he);var ce=t.util.createBuffer();return ce.putInt32(p[0]),ce.putInt32(p[1]),ce.putByte(V.type),ce.putByte(V.version.major),ce.putByte(V.version.minor),ce.putInt16(V.length),ce.putBytes(V.fragment.bytes()),R.update(ce.getBytes()),R.digest().getBytes()},u=function(he,p,V){var R=!1;try{var ce=he.deflate(p.fragment.getBytes());p.fragment=t.util.createBuffer(ce),p.length=ce.length,R=!0}catch{}return R},d=function(he,p,V){var R=!1;try{var ce=he.inflate(p.fragment.getBytes());p.fragment=t.util.createBuffer(ce),p.length=ce.length,R=!0}catch{}return R},m=function(he,p){var V=0;switch(p){case 1:V=he.getByte();break;case 2:V=he.getInt16();break;case 3:V=he.getInt24();break;case 4:V=he.getInt32();break}return t.util.createBuffer(he.getBytes(V))},c=function(he,p,V){he.putInt(V.length(),p<<3),he.putBuffer(V)},a={};a.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},a.SupportedVersions=[a.Versions.TLS_1_1,a.Versions.TLS_1_0],a.Version=a.SupportedVersions[0],a.MaxFragment=15360,a.ConnectionEnd={server:0,client:1},a.PRFAlgorithm={tls_prf_sha256:0},a.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},a.CipherType={stream:0,block:1,aead:2},a.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},a.CompressionMethod={none:0,deflate:1},a.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},a.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},a.Alert={},a.Alert.Level={warning:1,fatal:2},a.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},a.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},a.CipherSuites={},a.getCipherSuite=function(he){var p=null;for(var V in a.CipherSuites){var R=a.CipherSuites[V];if(R.id[0]===he.charCodeAt(0)&&R.id[1]===he.charCodeAt(1)){p=R;break}}return p},a.handleUnexpected=function(he,p){var V=!he.open&&he.entity===a.ConnectionEnd.client;V||he.error(he,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})},a.handleHelloRequest=function(he,p,V){!he.handshaking&&he.handshakes>0&&(a.queue(he,a.createAlert(he,{level:a.Alert.Level.warning,description:a.Alert.Description.no_renegotiation})),a.flush(he)),he.process()},a.parseHelloMessage=function(he,p,V){var R=null,ce=he.entity===a.ConnectionEnd.client;if(V<38)he.error(he,{message:ce?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});else{var Re=p.fragment,ke=Re.length();if(R={version:{major:Re.getByte(),minor:Re.getByte()},random:t.util.createBuffer(Re.getBytes(32)),session_id:m(Re,1),extensions:[]},ce?(R.cipher_suite=Re.getBytes(2),R.compression_method=Re.getByte()):(R.cipher_suites=m(Re,2),R.compression_methods=m(Re,1)),ke=V-(ke-Re.length()),ke>0){for(var qe=m(Re,2);qe.length()>0;)R.extensions.push({type:[qe.getByte(),qe.getByte()],data:m(qe,2)});if(!ce)for(var g=0;g<R.extensions.length;++g){var ee=R.extensions[g];if(ee.type[0]===0&&ee.type[1]===0)for(var ae=m(ee.data,2);ae.length()>0;){var l=ae.getByte();if(l!==0)break;he.session.extensions.server_name.serverNameList.push(m(ae,2).getBytes())}}}if(he.session.version&&(R.version.major!==he.session.version.major||R.version.minor!==he.session.version.minor))return he.error(he,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});if(ce)he.session.cipherSuite=a.getCipherSuite(R.cipher_suite);else for(var X=t.util.createBuffer(R.cipher_suites.bytes());X.length()>0&&(he.session.cipherSuite=a.getCipherSuite(X.getBytes(2)),he.session.cipherSuite===null););if(he.session.cipherSuite===null)return he.error(he,{message:"No cipher suites in common.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure},cipherSuite:t.util.bytesToHex(R.cipher_suite)});ce?he.session.compressionMethod=R.compression_method:he.session.compressionMethod=a.CompressionMethod.none}return R},a.createSecurityParameters=function(he,p){var V=he.entity===a.ConnectionEnd.client,R=p.random.bytes(),ce=V?he.session.sp.client_random:R,Re=V?R:a.createRandom().getBytes();he.session.sp={entity:he.entity,prf_algorithm:a.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:he.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:ce,server_random:Re}},a.handleServerHello=function(he,p,V){var R=a.parseHelloMessage(he,p,V);if(!he.fail){if(R.version.minor<=he.version.minor)he.version.minor=R.version.minor;else return he.error(he,{message:"Incompatible TLS version.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}});he.session.version=he.version;var ce=R.session_id.bytes();ce.length>0&&ce===he.session.id?(he.expect=y,he.session.resuming=!0,he.session.sp.server_random=R.random.bytes()):(he.expect=s,he.session.resuming=!1,a.createSecurityParameters(he,R)),he.session.id=ce,he.process()}},a.handleClientHello=function(he,p,V){var R=a.parseHelloMessage(he,p,V);if(!he.fail){var ce=R.session_id.bytes(),Re=null;if(he.sessionCache&&(Re=he.sessionCache.getSession(ce),Re===null?ce="":(Re.version.major!==R.version.major||Re.version.minor>R.version.minor)&&(Re=null,ce="")),ce.length===0&&(ce=t.random.getBytes(32)),he.session.id=ce,he.session.clientHelloVersion=R.version,he.session.sp={},Re)he.version=he.session.version=Re.version,he.session.sp=Re.sp;else{for(var ke,qe=1;qe<a.SupportedVersions.length&&(ke=a.SupportedVersions[qe],!(ke.minor<=R.version.minor));++qe);he.version={major:ke.major,minor:ke.minor},he.session.version=he.version}Re!==null?(he.expect=J,he.session.resuming=!0,he.session.sp.client_random=R.random.bytes()):(he.expect=he.verifyClient!==!1?S:j,he.session.resuming=!1,a.createSecurityParameters(he,R)),he.open=!0,a.queue(he,a.createRecord(he,{type:a.ContentType.handshake,data:a.createServerHello(he)})),he.session.resuming?(a.queue(he,a.createRecord(he,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),he.state.pending=a.createConnectionState(he),he.state.current.write=he.state.pending.write,a.queue(he,a.createRecord(he,{type:a.ContentType.handshake,data:a.createFinished(he)}))):(a.queue(he,a.createRecord(he,{type:a.ContentType.handshake,data:a.createCertificate(he)})),he.fail||(a.queue(he,a.createRecord(he,{type:a.ContentType.handshake,data:a.createServerKeyExchange(he)})),he.verifyClient!==!1&&a.queue(he,a.createRecord(he,{type:a.ContentType.handshake,data:a.createCertificateRequest(he)})),a.queue(he,a.createRecord(he,{type:a.ContentType.handshake,data:a.createServerHelloDone(he)})))),a.flush(he),he.process()}},a.handleCertificate=function(he,p,V){if(V<3)return he.error(he,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var R=p.fragment,ce={certificate_list:m(R,3)},Re,ke,qe=[];try{for(;ce.certificate_list.length()>0;)Re=m(ce.certificate_list,3),ke=t.asn1.fromDer(Re),Re=t.pki.certificateFromAsn1(ke,!0),qe.push(Re)}catch(ee){return he.error(he,{message:"Could not parse certificate list.",cause:ee,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var g=he.entity===a.ConnectionEnd.client;(g||he.verifyClient===!0)&&qe.length===0?he.error(he,{message:g?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}}):qe.length===0?he.expect=g?h:j:(g?he.session.serverCertificate=qe[0]:he.session.clientCertificate=qe[0],a.verifyCertificateChain(he,qe)&&(he.expect=g?h:j)),he.process()},a.handleServerKeyExchange=function(he,p,V){if(V>0)return he.error(he,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});he.expect=v,he.process()},a.handleClientKeyExchange=function(he,p,V){if(V<48)return he.error(he,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unsupported_certificate}});var R=p.fragment,ce={enc_pre_master_secret:m(R,2).getBytes()},Re=null;if(he.getPrivateKey)try{Re=he.getPrivateKey(he,he.session.serverCertificate),Re=t.pki.privateKeyFromPem(Re)}catch(g){he.error(he,{message:"Could not get private key.",cause:g,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}if(Re===null)return he.error(he,{message:"No private key set.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}});try{var ke=he.session.sp;ke.pre_master_secret=Re.decrypt(ce.enc_pre_master_secret);var qe=he.session.clientHelloVersion;if(qe.major!==ke.pre_master_secret.charCodeAt(0)||qe.minor!==ke.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{ke.pre_master_secret=t.random.getBytes(48)}he.expect=J,he.session.clientCertificate!==null&&(he.expect=K),he.process()},a.handleCertificateRequest=function(he,p,V){if(V<3)return he.error(he,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var R=p.fragment,ce={certificate_types:m(R,1),certificate_authorities:m(R,2)};he.session.certificateRequest=ce,he.expect=E,he.process()},a.handleCertificateVerify=function(he,p,V){if(V<2)return he.error(he,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var R=p.fragment;R.read-=4;var ce=R.bytes();R.read+=4;var Re={signature:m(R,2).getBytes()},ke=t.util.createBuffer();ke.putBuffer(he.session.md5.digest()),ke.putBuffer(he.session.sha1.digest()),ke=ke.getBytes();try{var qe=he.session.clientCertificate;if(!qe.publicKey.verify(ke,Re.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");he.session.md5.update(ce),he.session.sha1.update(ce)}catch{return he.error(he,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.handshake_failure}})}he.expect=J,he.process()},a.handleServerHelloDone=function(he,p,V){if(V>0)return he.error(he,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.record_overflow}});if(he.serverCertificate===null){var R={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.insufficient_security}},ce=0,Re=he.verify(he,R.alert.description,ce,[]);if(Re!==!0)return(Re||Re===0)&&(typeof Re=="object"&&!t.util.isArray(Re)?(Re.message&&(R.message=Re.message),Re.alert&&(R.alert.description=Re.alert)):typeof Re=="number"&&(R.alert.description=Re)),he.error(he,R)}he.session.certificateRequest!==null&&(p=a.createRecord(he,{type:a.ContentType.handshake,data:a.createCertificate(he)}),a.queue(he,p)),p=a.createRecord(he,{type:a.ContentType.handshake,data:a.createClientKeyExchange(he)}),a.queue(he,p),he.expect=I;var ke=function(qe,g){qe.session.certificateRequest!==null&&qe.session.clientCertificate!==null&&a.queue(qe,a.createRecord(qe,{type:a.ContentType.handshake,data:a.createCertificateVerify(qe,g)})),a.queue(qe,a.createRecord(qe,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),qe.state.pending=a.createConnectionState(qe),qe.state.current.write=qe.state.pending.write,a.queue(qe,a.createRecord(qe,{type:a.ContentType.handshake,data:a.createFinished(qe)})),qe.expect=y,a.flush(qe),qe.process()};if(he.session.certificateRequest===null||he.session.clientCertificate===null)return ke(he,null);a.getClientSignature(he,ke)},a.handleChangeCipherSpec=function(he,p){if(p.fragment.getByte()!==1)return he.error(he,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.illegal_parameter}});var V=he.entity===a.ConnectionEnd.client;(he.session.resuming&&V||!he.session.resuming&&!V)&&(he.state.pending=a.createConnectionState(he)),he.state.current.read=he.state.pending.read,(!he.session.resuming&&V||he.session.resuming&&!V)&&(he.state.pending=null),he.expect=V?A:H,he.process()},a.handleFinished=function(he,p,V){var R=p.fragment;R.read-=4;var ce=R.bytes();R.read+=4;var Re=p.fragment.getBytes();R=t.util.createBuffer(),R.putBuffer(he.session.md5.digest()),R.putBuffer(he.session.sha1.digest());var ke=he.entity===a.ConnectionEnd.client,qe=ke?"server finished":"client finished",g=he.session.sp,ee=12,ae=e;if(R=ae(g.master_secret,qe,R.getBytes(),ee),R.getBytes()!==Re)return he.error(he,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decrypt_error}});he.session.md5.update(ce),he.session.sha1.update(ce),(he.session.resuming&&ke||!he.session.resuming&&!ke)&&(a.queue(he,a.createRecord(he,{type:a.ContentType.change_cipher_spec,data:a.createChangeCipherSpec()})),he.state.current.write=he.state.pending.write,he.state.pending=null,a.queue(he,a.createRecord(he,{type:a.ContentType.handshake,data:a.createFinished(he)}))),he.expect=ke?w:U,he.handshaking=!1,++he.handshakes,he.peerCertificate=ke?he.session.serverCertificate:he.session.clientCertificate,a.flush(he),he.isConnected=!0,he.connected(he),he.process()},a.handleAlert=function(he,p){var V=p.fragment,R={level:V.getByte(),description:V.getByte()},ce;switch(R.description){case a.Alert.Description.close_notify:ce="Connection closed.";break;case a.Alert.Description.unexpected_message:ce="Unexpected message.";break;case a.Alert.Description.bad_record_mac:ce="Bad record MAC.";break;case a.Alert.Description.decryption_failed:ce="Decryption failed.";break;case a.Alert.Description.record_overflow:ce="Record overflow.";break;case a.Alert.Description.decompression_failure:ce="Decompression failed.";break;case a.Alert.Description.handshake_failure:ce="Handshake failure.";break;case a.Alert.Description.bad_certificate:ce="Bad certificate.";break;case a.Alert.Description.unsupported_certificate:ce="Unsupported certificate.";break;case a.Alert.Description.certificate_revoked:ce="Certificate revoked.";break;case a.Alert.Description.certificate_expired:ce="Certificate expired.";break;case a.Alert.Description.certificate_unknown:ce="Certificate unknown.";break;case a.Alert.Description.illegal_parameter:ce="Illegal parameter.";break;case a.Alert.Description.unknown_ca:ce="Unknown certificate authority.";break;case a.Alert.Description.access_denied:ce="Access denied.";break;case a.Alert.Description.decode_error:ce="Decode error.";break;case a.Alert.Description.decrypt_error:ce="Decrypt error.";break;case a.Alert.Description.export_restriction:ce="Export restriction.";break;case a.Alert.Description.protocol_version:ce="Unsupported protocol version.";break;case a.Alert.Description.insufficient_security:ce="Insufficient security.";break;case a.Alert.Description.internal_error:ce="Internal error.";break;case a.Alert.Description.user_canceled:ce="User canceled.";break;case a.Alert.Description.no_renegotiation:ce="Renegotiation not supported.";break;default:ce="Unknown error.";break}if(R.description===a.Alert.Description.close_notify)return he.close();he.error(he,{message:ce,send:!1,origin:he.entity===a.ConnectionEnd.client?"server":"client",alert:R}),he.process()},a.handleHandshake=function(he,p){var V=p.fragment,R=V.getByte(),ce=V.getInt24();if(ce>V.length())return he.fragmented=p,p.fragment=t.util.createBuffer(),V.read-=4,he.process();he.fragmented=null,V.read-=4;var Re=V.bytes(ce+4);V.read+=4,R in je[he.entity][he.expect]?(he.entity===a.ConnectionEnd.server&&!he.open&&!he.fail&&(he.handshaking=!0,he.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:t.md.md5.create(),sha1:t.md.sha1.create()}),R!==a.HandshakeType.hello_request&&R!==a.HandshakeType.certificate_verify&&R!==a.HandshakeType.finished&&(he.session.md5.update(Re),he.session.sha1.update(Re)),je[he.entity][he.expect][R](he,p,ce)):a.handleUnexpected(he,p)},a.handleApplicationData=function(he,p){he.data.putBuffer(p.fragment),he.dataReady(he),he.process()},a.handleHeartbeat=function(he,p){var V=p.fragment,R=V.getByte(),ce=V.getInt16(),Re=V.getBytes(ce);if(R===a.HeartbeatMessageType.heartbeat_request){if(he.handshaking||ce>Re.length)return he.process();a.queue(he,a.createRecord(he,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_response,Re)})),a.flush(he)}else if(R===a.HeartbeatMessageType.heartbeat_response){if(Re!==he.expectedHeartbeatPayload)return he.process();he.heartbeatReceived&&he.heartbeatReceived(he,t.util.createBuffer(Re))}he.process()};var o=0,s=1,h=2,v=3,E=4,y=5,A=6,w=7,I=8,_=0,S=1,j=2,K=3,J=4,H=5,U=6,P=a.handleUnexpected,Z=a.handleChangeCipherSpec,ie=a.handleAlert,ue=a.handleHandshake,le=a.handleApplicationData,ne=a.handleHeartbeat,ye=[];ye[a.ConnectionEnd.client]=[[P,ie,ue,P,ne],[P,ie,ue,P,ne],[P,ie,ue,P,ne],[P,ie,ue,P,ne],[P,ie,ue,P,ne],[Z,ie,P,P,ne],[P,ie,ue,P,ne],[P,ie,ue,le,ne],[P,ie,ue,P,ne]],ye[a.ConnectionEnd.server]=[[P,ie,ue,P,ne],[P,ie,ue,P,ne],[P,ie,ue,P,ne],[P,ie,ue,P,ne],[Z,ie,P,P,ne],[P,ie,ue,P,ne],[P,ie,ue,le,ne],[P,ie,ue,P,ne]];var fe=a.handleHelloRequest,Te=a.handleServerHello,Ae=a.handleCertificate,Se=a.handleServerKeyExchange,be=a.handleCertificateRequest,we=a.handleServerHelloDone,Ce=a.handleFinished,je=[];je[a.ConnectionEnd.client]=[[P,P,Te,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[fe,P,P,P,P,P,P,P,P,P,P,Ae,Se,be,we,P,P,P,P,P,P],[fe,P,P,P,P,P,P,P,P,P,P,P,Se,be,we,P,P,P,P,P,P],[fe,P,P,P,P,P,P,P,P,P,P,P,P,be,we,P,P,P,P,P,P],[fe,P,P,P,P,P,P,P,P,P,P,P,P,P,we,P,P,P,P,P,P],[fe,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[fe,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Ce],[fe,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[fe,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P]];var Fe=a.handleClientHello,Ve=a.handleClientKeyExchange,Ge=a.handleCertificateVerify;je[a.ConnectionEnd.server]=[[P,Fe,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,Ae,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Ve,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Ge,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Ce],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P]],a.generateKeys=function(he,p){var V=e,R=p.client_random+p.server_random;he.session.resuming||(p.master_secret=V(p.pre_master_secret,"master secret",R,48).bytes(),p.pre_master_secret=null),R=p.server_random+p.client_random;var ce=2*p.mac_key_length+2*p.enc_key_length,Re=he.version.major===a.Versions.TLS_1_0.major&&he.version.minor===a.Versions.TLS_1_0.minor;Re&&(ce+=2*p.fixed_iv_length);var ke=V(p.master_secret,"key expansion",R,ce),qe={client_write_MAC_key:ke.getBytes(p.mac_key_length),server_write_MAC_key:ke.getBytes(p.mac_key_length),client_write_key:ke.getBytes(p.enc_key_length),server_write_key:ke.getBytes(p.enc_key_length)};return Re&&(qe.client_write_IV=ke.getBytes(p.fixed_iv_length),qe.server_write_IV=ke.getBytes(p.fixed_iv_length)),qe},a.createConnectionState=function(he){var p=he.entity===a.ConnectionEnd.client,V=function(){var Re={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(ke){return!0},compressionState:null,compressFunction:function(ke){return!0},updateSequenceNumber:function(){Re.sequenceNumber[1]===4294967295?(Re.sequenceNumber[1]=0,++Re.sequenceNumber[0]):++Re.sequenceNumber[1]}};return Re},R={read:V(),write:V()};if(R.read.update=function(Re,ke){return R.read.cipherFunction(ke,R.read)?R.read.compressFunction(Re,ke,R.read)||Re.error(Re,{message:"Could not decompress record.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.decompression_failure}}):Re.error(Re,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_record_mac}}),!Re.fail},R.write.update=function(Re,ke){return R.write.compressFunction(Re,ke,R.write)?R.write.cipherFunction(ke,R.write)||Re.error(Re,{message:"Could not encrypt record.",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):Re.error(Re,{message:"Could not compress record.",send:!1,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}),!Re.fail},he.session){var ce=he.session.sp;switch(he.session.cipherSuite.initSecurityParameters(ce),ce.keys=a.generateKeys(he,ce),R.read.macKey=p?ce.keys.server_write_MAC_key:ce.keys.client_write_MAC_key,R.write.macKey=p?ce.keys.client_write_MAC_key:ce.keys.server_write_MAC_key,he.session.cipherSuite.initConnectionState(R,he,ce),ce.compression_algorithm){case a.CompressionMethod.none:break;case a.CompressionMethod.deflate:R.read.compressFunction=d,R.write.compressFunction=u;break;default:throw new Error("Unsupported compression algorithm.")}}return R},a.createRandom=function(){var he=new Date,p=+he+he.getTimezoneOffset()*6e4,V=t.util.createBuffer();return V.putInt32(p),V.putBytes(t.random.getBytes(28)),V},a.createRecord=function(he,p){if(!p.data)return null;var V={type:p.type,version:{major:he.version.major,minor:he.version.minor},length:p.data.length(),fragment:p.data};return V},a.createAlert=function(he,p){var V=t.util.createBuffer();return V.putByte(p.level),V.putByte(p.description),a.createRecord(he,{type:a.ContentType.alert,data:V})},a.createClientHello=function(he){he.session.clientHelloVersion={major:he.version.major,minor:he.version.minor};for(var p=t.util.createBuffer(),V=0;V<he.cipherSuites.length;++V){var R=he.cipherSuites[V];p.putByte(R.id[0]),p.putByte(R.id[1])}var ce=p.length(),Re=t.util.createBuffer();Re.putByte(a.CompressionMethod.none);var ke=Re.length(),qe=t.util.createBuffer();if(he.virtualHost){var g=t.util.createBuffer();g.putByte(0),g.putByte(0);var ee=t.util.createBuffer();ee.putByte(0),c(ee,2,t.util.createBuffer(he.virtualHost));var ae=t.util.createBuffer();c(ae,2,ee),c(g,2,ae),qe.putBuffer(g)}var l=qe.length();l>0&&(l+=2);var X=he.session.id,oe=X.length+1+2+4+28+2+ce+1+ke+l,_e=t.util.createBuffer();return _e.putByte(a.HandshakeType.client_hello),_e.putInt24(oe),_e.putByte(he.version.major),_e.putByte(he.version.minor),_e.putBytes(he.session.sp.client_random),c(_e,1,t.util.createBuffer(X)),c(_e,2,p),c(_e,1,Re),l>0&&c(_e,2,qe),_e},a.createServerHello=function(he){var p=he.session.id,V=p.length+1+2+4+28+2+1,R=t.util.createBuffer();return R.putByte(a.HandshakeType.server_hello),R.putInt24(V),R.putByte(he.version.major),R.putByte(he.version.minor),R.putBytes(he.session.sp.server_random),c(R,1,t.util.createBuffer(p)),R.putByte(he.session.cipherSuite.id[0]),R.putByte(he.session.cipherSuite.id[1]),R.putByte(he.session.compressionMethod),R},a.createCertificate=function(he){var p=he.entity===a.ConnectionEnd.client,V=null;if(he.getCertificate){var R;p?R=he.session.certificateRequest:R=he.session.extensions.server_name.serverNameList,V=he.getCertificate(he,R)}var ce=t.util.createBuffer();if(V!==null)try{t.util.isArray(V)||(V=[V]);for(var Re=null,ke=0;ke<V.length;++ke){var qe=t.pem.decode(V[ke])[0];if(qe.type!=="CERTIFICATE"&&qe.type!=="X509 CERTIFICATE"&&qe.type!=="TRUSTED CERTIFICATE"){var g=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw g.headerType=qe.type,g}if(qe.procType&&qe.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var ee=t.util.createBuffer(qe.body);Re===null&&(Re=t.asn1.fromDer(ee.bytes(),!1));var ae=t.util.createBuffer();c(ae,3,ee),ce.putBuffer(ae)}V=t.pki.certificateFromAsn1(Re),p?he.session.clientCertificate=V:he.session.serverCertificate=V}catch(oe){return he.error(he,{message:"Could not send certificate list.",cause:oe,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate}})}var l=3+ce.length(),X=t.util.createBuffer();return X.putByte(a.HandshakeType.certificate),X.putInt24(l),c(X,3,ce),X},a.createClientKeyExchange=function(he){var p=t.util.createBuffer();p.putByte(he.session.clientHelloVersion.major),p.putByte(he.session.clientHelloVersion.minor),p.putBytes(t.random.getBytes(46));var V=he.session.sp;V.pre_master_secret=p.getBytes();var R=he.session.serverCertificate.publicKey;p=R.encrypt(V.pre_master_secret);var ce=p.length+2,Re=t.util.createBuffer();return Re.putByte(a.HandshakeType.client_key_exchange),Re.putInt24(ce),Re.putInt16(p.length),Re.putBytes(p),Re},a.createServerKeyExchange=function(he){var p=t.util.createBuffer();return p},a.getClientSignature=function(he,p){var V=t.util.createBuffer();V.putBuffer(he.session.md5.digest()),V.putBuffer(he.session.sha1.digest()),V=V.getBytes(),he.getSignature=he.getSignature||function(R,ce,Re){var ke=null;if(R.getPrivateKey)try{ke=R.getPrivateKey(R,R.session.clientCertificate),ke=t.pki.privateKeyFromPem(ke)}catch(qe){R.error(R,{message:"Could not get private key.",cause:qe,send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}})}ke===null?R.error(R,{message:"No private key set.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.internal_error}}):ce=ke.sign(ce,null),Re(R,ce)},he.getSignature(he,V,p)},a.createCertificateVerify=function(he,p){var V=p.length+2,R=t.util.createBuffer();return R.putByte(a.HandshakeType.certificate_verify),R.putInt24(V),R.putInt16(p.length),R.putBytes(p),R},a.createCertificateRequest=function(he){var p=t.util.createBuffer();p.putByte(1);var V=t.util.createBuffer();for(var R in he.caStore.certs){var ce=he.caStore.certs[R],Re=t.pki.distinguishedNameToAsn1(ce.subject),ke=t.asn1.toDer(Re);V.putInt16(ke.length()),V.putBuffer(ke)}var qe=1+p.length()+2+V.length(),g=t.util.createBuffer();return g.putByte(a.HandshakeType.certificate_request),g.putInt24(qe),c(g,1,p),c(g,2,V),g},a.createServerHelloDone=function(he){var p=t.util.createBuffer();return p.putByte(a.HandshakeType.server_hello_done),p.putInt24(0),p},a.createChangeCipherSpec=function(){var he=t.util.createBuffer();return he.putByte(1),he},a.createFinished=function(he){var p=t.util.createBuffer();p.putBuffer(he.session.md5.digest()),p.putBuffer(he.session.sha1.digest());var V=he.entity===a.ConnectionEnd.client,R=he.session.sp,ce=12,Re=e,ke=V?"client finished":"server finished";p=Re(R.master_secret,ke,p.getBytes(),ce);var qe=t.util.createBuffer();return qe.putByte(a.HandshakeType.finished),qe.putInt24(p.length()),qe.putBuffer(p),qe},a.createHeartbeat=function(he,p,V){typeof V>"u"&&(V=p.length);var R=t.util.createBuffer();R.putByte(he),R.putInt16(V),R.putBytes(p);var ce=R.length(),Re=Math.max(16,ce-V-3);return R.putBytes(t.random.getBytes(Re)),R},a.queue=function(he,p){if(p&&!(p.fragment.length()===0&&(p.type===a.ContentType.handshake||p.type===a.ContentType.alert||p.type===a.ContentType.change_cipher_spec))){if(p.type===a.ContentType.handshake){var V=p.fragment.bytes();he.session.md5.update(V),he.session.sha1.update(V),V=null}var R;if(p.fragment.length()<=a.MaxFragment)R=[p];else{R=[];for(var ce=p.fragment.bytes();ce.length>a.MaxFragment;)R.push(a.createRecord(he,{type:p.type,data:t.util.createBuffer(ce.slice(0,a.MaxFragment))})),ce=ce.slice(a.MaxFragment);ce.length>0&&R.push(a.createRecord(he,{type:p.type,data:t.util.createBuffer(ce)}))}for(var Re=0;Re<R.length&&!he.fail;++Re){var ke=R[Re],qe=he.state.current.write;qe.update(he,ke)&&he.records.push(ke)}}},a.flush=function(he){for(var p=0;p<he.records.length;++p){var V=he.records[p];he.tlsData.putByte(V.type),he.tlsData.putByte(V.version.major),he.tlsData.putByte(V.version.minor),he.tlsData.putInt16(V.fragment.length()),he.tlsData.putBuffer(he.records[p].fragment)}return he.records=[],he.tlsDataReady(he)};var Le=function(he){switch(he){case!0:return!0;case t.pki.certificateError.bad_certificate:return a.Alert.Description.bad_certificate;case t.pki.certificateError.unsupported_certificate:return a.Alert.Description.unsupported_certificate;case t.pki.certificateError.certificate_revoked:return a.Alert.Description.certificate_revoked;case t.pki.certificateError.certificate_expired:return a.Alert.Description.certificate_expired;case t.pki.certificateError.certificate_unknown:return a.Alert.Description.certificate_unknown;case t.pki.certificateError.unknown_ca:return a.Alert.Description.unknown_ca;default:return a.Alert.Description.bad_certificate}},Be=function(he){switch(he){case!0:return!0;case a.Alert.Description.bad_certificate:return t.pki.certificateError.bad_certificate;case a.Alert.Description.unsupported_certificate:return t.pki.certificateError.unsupported_certificate;case a.Alert.Description.certificate_revoked:return t.pki.certificateError.certificate_revoked;case a.Alert.Description.certificate_expired:return t.pki.certificateError.certificate_expired;case a.Alert.Description.certificate_unknown:return t.pki.certificateError.certificate_unknown;case a.Alert.Description.unknown_ca:return t.pki.certificateError.unknown_ca;default:return t.pki.certificateError.bad_certificate}};a.verifyCertificateChain=function(he,p){try{var V={};for(var R in he.verifyOptions)V[R]=he.verifyOptions[R];V.verify=function(Re,ke,qe){var g=Le(Re),ee=he.verify(he,Re,ke,qe);if(ee!==!0){if(typeof ee=="object"&&!t.util.isArray(ee)){var ae=new Error("The application rejected the certificate.");throw ae.send=!0,ae.alert={level:a.Alert.Level.fatal,description:a.Alert.Description.bad_certificate},ee.message&&(ae.message=ee.message),ee.alert&&(ae.alert.description=ee.alert),ae}ee!==Re&&(ee=Be(ee))}return ee},t.pki.verifyCertificateChain(he.caStore,p,V)}catch(Re){var ce=Re;(typeof ce!="object"||t.util.isArray(ce))&&(ce={send:!0,alert:{level:a.Alert.Level.fatal,description:Le(Re)}}),"send"in ce||(ce.send=!0),"alert"in ce||(ce.alert={level:a.Alert.Level.fatal,description:Le(ce.error)}),he.error(he,ce)}return!he.fail},a.createSessionCache=function(he,p){var V=null;if(he&&he.getSession&&he.setSession&&he.order)V=he;else{V={},V.cache=he||{},V.capacity=Math.max(p||100,1),V.order=[];for(var R in he)V.order.length<=p?V.order.push(R):delete he[R];V.getSession=function(ce){var Re=null,ke=null;if(ce?ke=t.util.bytesToHex(ce):V.order.length>0&&(ke=V.order[0]),ke!==null&&ke in V.cache){Re=V.cache[ke],delete V.cache[ke];for(var qe in V.order)if(V.order[qe]===ke){V.order.splice(qe,1);break}}return Re},V.setSession=function(ce,Re){if(V.order.length===V.capacity){var ke=V.order.shift();delete V.cache[ke]}var ke=t.util.bytesToHex(ce);V.order.push(ke),V.cache[ke]=Re}}return V},a.createConnection=function(he){var p=null;he.caStore?t.util.isArray(he.caStore)?p=t.pki.createCaStore(he.caStore):p=he.caStore:p=t.pki.createCaStore();var V=he.cipherSuites||null;if(V===null){V=[];for(var R in a.CipherSuites)V.push(a.CipherSuites[R])}var ce=he.server?a.ConnectionEnd.server:a.ConnectionEnd.client,Re=he.sessionCache?a.createSessionCache(he.sessionCache):null,ke={version:{major:a.Version.major,minor:a.Version.minor},entity:ce,sessionId:he.sessionId,caStore:p,sessionCache:Re,cipherSuites:V,connected:he.connected,virtualHost:he.virtualHost||null,verifyClient:he.verifyClient||!1,verify:he.verify||function(ae,l,X,oe){return l},verifyOptions:he.verifyOptions||{},getCertificate:he.getCertificate||null,getPrivateKey:he.getPrivateKey||null,getSignature:he.getSignature||null,input:t.util.createBuffer(),tlsData:t.util.createBuffer(),data:t.util.createBuffer(),tlsDataReady:he.tlsDataReady,dataReady:he.dataReady,heartbeatReceived:he.heartbeatReceived,closed:he.closed,error:function(ae,l){l.origin=l.origin||(ae.entity===a.ConnectionEnd.client?"client":"server"),l.send&&(a.queue(ae,a.createAlert(ae,l.alert)),a.flush(ae));var X=l.fatal!==!1;X&&(ae.fail=!0),he.error(ae,l),X&&ae.close(!1)},deflate:he.deflate||null,inflate:he.inflate||null};ke.reset=function(ae){ke.version={major:a.Version.major,minor:a.Version.minor},ke.record=null,ke.session=null,ke.peerCertificate=null,ke.state={pending:null,current:null},ke.expect=ke.entity===a.ConnectionEnd.client?o:_,ke.fragmented=null,ke.records=[],ke.open=!1,ke.handshakes=0,ke.handshaking=!1,ke.isConnected=!1,ke.fail=!(ae||typeof ae>"u"),ke.input.clear(),ke.tlsData.clear(),ke.data.clear(),ke.state.current=a.createConnectionState(ke)},ke.reset();var qe=function(ae,l){var X=l.type-a.ContentType.change_cipher_spec,oe=ye[ae.entity][ae.expect];X in oe?oe[X](ae,l):a.handleUnexpected(ae,l)},g=function(ae){var l=0,X=ae.input,oe=X.length();if(oe<5)l=5-oe;else{ae.record={type:X.getByte(),version:{major:X.getByte(),minor:X.getByte()},length:X.getInt16(),fragment:t.util.createBuffer(),ready:!1};var _e=ae.record.version.major===ae.version.major;_e&&ae.session&&ae.session.version&&(_e=ae.record.version.minor===ae.version.minor),_e||ae.error(ae,{message:"Incompatible TLS version.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.protocol_version}})}return l},ee=function(ae){var l=0,X=ae.input,oe=X.length();if(oe<ae.record.length)l=ae.record.length-oe;else{ae.record.fragment.putBytes(X.getBytes(ae.record.length)),X.compact();var _e=ae.state.current.read;_e.update(ae,ae.record)&&(ae.fragmented!==null&&(ae.fragmented.type===ae.record.type?(ae.fragmented.fragment.putBuffer(ae.record.fragment),ae.record=ae.fragmented):ae.error(ae,{message:"Invalid fragmented record.",send:!0,alert:{level:a.Alert.Level.fatal,description:a.Alert.Description.unexpected_message}})),ae.record.ready=!0)}return l};return ke.handshake=function(ae){if(ke.entity!==a.ConnectionEnd.client)ke.error(ke,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(ke.handshaking)ke.error(ke,{message:"Handshake already in progress.",fatal:!1});else{ke.fail&&!ke.open&&ke.handshakes===0&&(ke.fail=!1),ke.handshaking=!0,ae=ae||"";var l=null;ae.length>0&&(ke.sessionCache&&(l=ke.sessionCache.getSession(ae)),l===null&&(ae="")),ae.length===0&&ke.sessionCache&&(l=ke.sessionCache.getSession(),l!==null&&(ae=l.id)),ke.session={id:ae,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:t.md.md5.create(),sha1:t.md.sha1.create()},l&&(ke.version=l.version,ke.session.sp=l.sp),ke.session.sp.client_random=a.createRandom().getBytes(),ke.open=!0,a.queue(ke,a.createRecord(ke,{type:a.ContentType.handshake,data:a.createClientHello(ke)})),a.flush(ke)}},ke.process=function(ae){var l=0;return ae&&ke.input.putBytes(ae),ke.fail||(ke.record!==null&&ke.record.ready&&ke.record.fragment.isEmpty()&&(ke.record=null),ke.record===null&&(l=g(ke)),!ke.fail&&ke.record!==null&&!ke.record.ready&&(l=ee(ke)),!ke.fail&&ke.record!==null&&ke.record.ready&&qe(ke,ke.record)),l},ke.prepare=function(ae){return a.queue(ke,a.createRecord(ke,{type:a.ContentType.application_data,data:t.util.createBuffer(ae)})),a.flush(ke)},ke.prepareHeartbeatRequest=function(ae,l){return ae instanceof t.util.ByteBuffer&&(ae=ae.bytes()),typeof l>"u"&&(l=ae.length),ke.expectedHeartbeatPayload=ae,a.queue(ke,a.createRecord(ke,{type:a.ContentType.heartbeat,data:a.createHeartbeat(a.HeartbeatMessageType.heartbeat_request,ae,l)})),a.flush(ke)},ke.close=function(ae){if(!ke.fail&&ke.sessionCache&&ke.session){var l={id:ke.session.id,version:ke.session.version,sp:ke.session.sp};l.sp.keys=null,ke.sessionCache.setSession(l.id,l)}ke.open&&(ke.open=!1,ke.input.clear(),(ke.isConnected||ke.handshaking)&&(ke.isConnected=ke.handshaking=!1,a.queue(ke,a.createAlert(ke,{level:a.Alert.Level.warning,description:a.Alert.Description.close_notify})),a.flush(ke)),ke.closed(ke)),ke.reset(ae)},ke},tls_1=t.tls=t.tls||{};for(var $e in a)typeof a[$e]!="function"&&(t.tls[$e]=a[$e]);return t.tls.prf_tls1=e,t.tls.hmac_sha1=r,t.tls.createSessionCache=a.createSessionCache,t.tls.createConnection=a.createConnection,tls_1}var hasRequiredAesCipherSuites;function requireAesCipherSuites(){if(hasRequiredAesCipherSuites)return aesCipherSuites.exports;hasRequiredAesCipherSuites=1;var t=requireForge();requireAes(),requireTls();var e=aesCipherSuites.exports=t.tls;e.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(o){o.bulk_cipher_algorithm=e.BulkCipherAlgorithm.aes,o.cipher_type=e.CipherType.block,o.enc_key_length=16,o.block_length=16,o.fixed_iv_length=16,o.record_iv_length=16,o.mac_algorithm=e.MACAlgorithm.hmac_sha1,o.mac_length=20,o.mac_key_length=20},initConnectionState:r},e.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(o){o.bulk_cipher_algorithm=e.BulkCipherAlgorithm.aes,o.cipher_type=e.CipherType.block,o.enc_key_length=32,o.block_length=16,o.fixed_iv_length=16,o.record_iv_length=16,o.mac_algorithm=e.MACAlgorithm.hmac_sha1,o.mac_length=20,o.mac_key_length=20},initConnectionState:r};function r(o,s,h){var v=s.entity===t.tls.ConnectionEnd.client;o.read.cipherState={init:!1,cipher:t.cipher.createDecipher("AES-CBC",v?h.keys.server_write_key:h.keys.client_write_key),iv:v?h.keys.server_write_IV:h.keys.client_write_IV},o.write.cipherState={init:!1,cipher:t.cipher.createCipher("AES-CBC",v?h.keys.client_write_key:h.keys.server_write_key),iv:v?h.keys.client_write_IV:h.keys.server_write_IV},o.read.cipherFunction=c,o.write.cipherFunction=u,o.read.macLength=o.write.macLength=h.mac_length,o.read.macFunction=o.write.macFunction=e.hmac_sha1}function u(o,s){var h=!1,v=s.macFunction(s.macKey,s.sequenceNumber,o);o.fragment.putBytes(v),s.updateSequenceNumber();var E;o.version.minor===e.Versions.TLS_1_0.minor?E=s.cipherState.init?null:s.cipherState.iv:E=t.random.getBytesSync(16),s.cipherState.init=!0;var y=s.cipherState.cipher;return y.start({iv:E}),o.version.minor>=e.Versions.TLS_1_1.minor&&y.output.putBytes(E),y.update(o.fragment),y.finish(d)&&(o.fragment=y.output,o.length=o.fragment.length(),h=!0),h}function d(o,s,h){if(!h){var v=o-s.length()%o;s.fillWithByte(v-1,v)}return!0}function m(o,s,h){var v=!0;if(h){for(var E=s.length(),y=s.last(),A=E-1-y;A<E-1;++A)v=v&&s.at(A)==y;v&&s.truncate(y+1)}return v}function c(o,s){var h=!1,v;o.version.minor===e.Versions.TLS_1_0.minor?v=s.cipherState.init?null:s.cipherState.iv:v=o.fragment.getBytes(16),s.cipherState.init=!0;var E=s.cipherState.cipher;E.start({iv:v}),E.update(o.fragment),h=E.finish(m);var y=s.macLength,A=t.random.getBytesSync(y),w=E.output.length();w>=y?(o.fragment=E.output.getBytes(w-y),A=E.output.getBytes(y)):o.fragment=E.output.getBytes(),o.fragment=t.util.createBuffer(o.fragment),o.length=o.fragment.length();var I=s.macFunction(s.macKey,s.sequenceNumber,o);return s.updateSequenceNumber(),h=a(s.macKey,A,I)&&h,h}function a(o,s,h){var v=t.hmac.create();return v.start("SHA1",o),v.update(s),s=v.digest().getBytes(),v.start(null,null),v.update(h),h=v.digest().getBytes(),s===h}return aesCipherSuites.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512.exports;hasRequiredSha512=1;var t=requireForge();requireMd(),requireUtil$7();var e=sha512.exports=t.sha512=t.sha512||{};t.md.sha512=t.md.algorithms.sha512=e;var r=t.sha384=t.sha512.sha384=t.sha512.sha384||{};r.create=function(){return e.create("SHA-384")},t.md.sha384=t.md.algorithms.sha384=r,t.sha512.sha256=t.sha512.sha256||{create:function(){return e.create("SHA-512/256")}},t.md["sha512/256"]=t.md.algorithms["sha512/256"]=t.sha512.sha256,t.sha512.sha224=t.sha512.sha224||{create:function(){return e.create("SHA-512/224")}},t.md["sha512/224"]=t.md.algorithms["sha512/224"]=t.sha512.sha224,e.create=function(s){if(d||a(),typeof s>"u"&&(s="SHA-512"),!(s in c))throw new Error("Invalid SHA-512 algorithm: "+s);for(var h=c[s],v=null,E=t.util.createBuffer(),y=new Array(80),A=0;A<80;++A)y[A]=new Array(2);var w=64;switch(s){case"SHA-384":w=48;break;case"SHA-512/256":w=32;break;case"SHA-512/224":w=28;break}var I={algorithm:s.replace("-","").toLowerCase(),blockLength:128,digestLength:w,messageLength:0,fullMessageLength:null,messageLengthSize:16};return I.start=function(){I.messageLength=0,I.fullMessageLength=I.messageLength128=[];for(var _=I.messageLengthSize/4,S=0;S<_;++S)I.fullMessageLength.push(0);E=t.util.createBuffer(),v=new Array(h.length);for(var S=0;S<h.length;++S)v[S]=h[S].slice(0);return I},I.start(),I.update=function(_,S){S==="utf8"&&(_=t.util.encodeUtf8(_));var j=_.length;I.messageLength+=j,j=[j/4294967296>>>0,j>>>0];for(var K=I.fullMessageLength.length-1;K>=0;--K)I.fullMessageLength[K]+=j[1],j[1]=j[0]+(I.fullMessageLength[K]/4294967296>>>0),I.fullMessageLength[K]=I.fullMessageLength[K]>>>0,j[0]=j[1]/4294967296>>>0;return E.putBytes(_),o(v,y,E),(E.read>2048||E.length()===0)&&E.compact(),I},I.digest=function(){var _=t.util.createBuffer();_.putBytes(E.bytes());var S=I.fullMessageLength[I.fullMessageLength.length-1]+I.messageLengthSize,j=S&I.blockLength-1;_.putBytes(u.substr(0,I.blockLength-j));for(var K,J,H=I.fullMessageLength[0]*8,U=0;U<I.fullMessageLength.length-1;++U)K=I.fullMessageLength[U+1]*8,J=K/4294967296>>>0,H+=J,_.putInt32(H>>>0),H=K>>>0;_.putInt32(H);for(var P=new Array(v.length),U=0;U<v.length;++U)P[U]=v[U].slice(0);o(P,y,_);var Z=t.util.createBuffer(),ie;s==="SHA-512"?ie=P.length:s==="SHA-384"?ie=P.length-2:ie=P.length-4;for(var U=0;U<ie;++U)Z.putInt32(P[U][0]),(U!==ie-1||s!=="SHA-512/224")&&Z.putInt32(P[U][1]);return Z},I};var u=null,d=!1,m=null,c=null;function a(){u="",u+=t.util.fillString("\0",128),m=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],c={},c["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],d=!0}function o(s,h,v){for(var E,y,A,w,I,_,S,j,K,J,H,U,P,Z,ie,ue,le,ne,ye,fe,Te,Ae,Se,be,we,Ce,je,Fe,Ve,Ge,Le,Be,$e,he,p,V=v.length();V>=128;){for(Ve=0;Ve<16;++Ve)h[Ve][0]=v.getInt32()>>>0,h[Ve][1]=v.getInt32()>>>0;for(;Ve<80;++Ve)Be=h[Ve-2],Ge=Be[0],Le=Be[1],E=((Ge>>>19|Le<<13)^(Le>>>29|Ge<<3)^Ge>>>6)>>>0,y=((Ge<<13|Le>>>19)^(Le<<3|Ge>>>29)^(Ge<<26|Le>>>6))>>>0,he=h[Ve-15],Ge=he[0],Le=he[1],A=((Ge>>>1|Le<<31)^(Ge>>>8|Le<<24)^Ge>>>7)>>>0,w=((Ge<<31|Le>>>1)^(Ge<<24|Le>>>8)^(Ge<<25|Le>>>7))>>>0,$e=h[Ve-7],p=h[Ve-16],Le=y+$e[1]+w+p[1],h[Ve][0]=E+$e[0]+A+p[0]+(Le/4294967296>>>0)>>>0,h[Ve][1]=Le>>>0;for(P=s[0][0],Z=s[0][1],ie=s[1][0],ue=s[1][1],le=s[2][0],ne=s[2][1],ye=s[3][0],fe=s[3][1],Te=s[4][0],Ae=s[4][1],Se=s[5][0],be=s[5][1],we=s[6][0],Ce=s[6][1],je=s[7][0],Fe=s[7][1],Ve=0;Ve<80;++Ve)S=((Te>>>14|Ae<<18)^(Te>>>18|Ae<<14)^(Ae>>>9|Te<<23))>>>0,j=((Te<<18|Ae>>>14)^(Te<<14|Ae>>>18)^(Ae<<23|Te>>>9))>>>0,K=(we^Te&(Se^we))>>>0,J=(Ce^Ae&(be^Ce))>>>0,I=((P>>>28|Z<<4)^(Z>>>2|P<<30)^(Z>>>7|P<<25))>>>0,_=((P<<4|Z>>>28)^(Z<<30|P>>>2)^(Z<<25|P>>>7))>>>0,H=(P&ie|le&(P^ie))>>>0,U=(Z&ue|ne&(Z^ue))>>>0,Le=Fe+j+J+m[Ve][1]+h[Ve][1],E=je+S+K+m[Ve][0]+h[Ve][0]+(Le/4294967296>>>0)>>>0,y=Le>>>0,Le=_+U,A=I+H+(Le/4294967296>>>0)>>>0,w=Le>>>0,je=we,Fe=Ce,we=Se,Ce=be,Se=Te,be=Ae,Le=fe+y,Te=ye+E+(Le/4294967296>>>0)>>>0,Ae=Le>>>0,ye=le,fe=ne,le=ie,ne=ue,ie=P,ue=Z,Le=y+w,P=E+A+(Le/4294967296>>>0)>>>0,Z=Le>>>0;Le=s[0][1]+Z,s[0][0]=s[0][0]+P+(Le/4294967296>>>0)>>>0,s[0][1]=Le>>>0,Le=s[1][1]+ue,s[1][0]=s[1][0]+ie+(Le/4294967296>>>0)>>>0,s[1][1]=Le>>>0,Le=s[2][1]+ne,s[2][0]=s[2][0]+le+(Le/4294967296>>>0)>>>0,s[2][1]=Le>>>0,Le=s[3][1]+fe,s[3][0]=s[3][0]+ye+(Le/4294967296>>>0)>>>0,s[3][1]=Le>>>0,Le=s[4][1]+Ae,s[4][0]=s[4][0]+Te+(Le/4294967296>>>0)>>>0,s[4][1]=Le>>>0,Le=s[5][1]+be,s[5][0]=s[5][0]+Se+(Le/4294967296>>>0)>>>0,s[5][1]=Le>>>0,Le=s[6][1]+Ce,s[6][0]=s[6][0]+we+(Le/4294967296>>>0)>>>0,s[6][1]=Le>>>0,Le=s[7][1]+Fe,s[7][0]=s[7][0]+je+(Le/4294967296>>>0)>>>0,s[7][1]=Le>>>0,V-=128}}return sha512.exports}var asn1Validator={},hasRequiredAsn1Validator;function requireAsn1Validator(){if(hasRequiredAsn1Validator)return asn1Validator;hasRequiredAsn1Validator=1;var t=requireForge();requireAsn1();var e=t.asn1;return asn1Validator.privateKeyValidator={name:"PrivateKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},asn1Validator.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]},asn1Validator}var ed25519_1,hasRequiredEd25519;function requireEd25519(){if(hasRequiredEd25519)return ed25519_1;hasRequiredEd25519=1;var t=requireForge();requireJsbn(),requireRandom(),requireSha512(),requireUtil$7();var e=requireAsn1Validator(),r=e.publicKeyValidator,u=e.privateKeyValidator;if(typeof d>"u")var d=t.jsbn.BigInteger;var m=t.util.ByteBuffer,c=typeof Buffer>"u"?Uint8Array:Buffer;t.pki=t.pki||{},ed25519_1=t.pki.ed25519=t.ed25519=t.ed25519||{};var a=t.ed25519;a.constants={},a.constants.PUBLIC_KEY_BYTE_LENGTH=32,a.constants.PRIVATE_KEY_BYTE_LENGTH=64,a.constants.SEED_BYTE_LENGTH=32,a.constants.SIGN_BYTE_LENGTH=64,a.constants.HASH_BYTE_LENGTH=64,a.generateKeyPair=function(he){he=he||{};var p=he.seed;if(p===void 0)p=t.random.getBytesSync(a.constants.SEED_BYTE_LENGTH);else if(typeof p=="string"){if(p.length!==a.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+a.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(p instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');p=o({message:p,encoding:"binary"});for(var V=new c(a.constants.PUBLIC_KEY_BYTE_LENGTH),R=new c(a.constants.PRIVATE_KEY_BYTE_LENGTH),ce=0;ce<32;++ce)R[ce]=p[ce];return S(V,R),{publicKey:V,privateKey:R}},a.privateKeyFromAsn1=function(he){var p={},V=[],R=t.asn1.validate(he,u,p,V);if(!R){var ce=new Error("Invalid Key.");throw ce.errors=V,ce}var Re=t.asn1.derToOid(p.privateKeyOid),ke=t.oids.EdDSA25519;if(Re!==ke)throw new Error('Invalid OID "'+Re+'"; OID must be "'+ke+'".');var qe=p.privateKey,g=o({message:t.asn1.fromDer(qe).value,encoding:"binary"});return{privateKeyBytes:g}},a.publicKeyFromAsn1=function(he){var p={},V=[],R=t.asn1.validate(he,r,p,V);if(!R){var ce=new Error("Invalid Key.");throw ce.errors=V,ce}var Re=t.asn1.derToOid(p.publicKeyOid),ke=t.oids.EdDSA25519;if(Re!==ke)throw new Error('Invalid OID "'+Re+'"; OID must be "'+ke+'".');var qe=p.ed25519PublicKey;if(qe.length!==a.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return o({message:qe,encoding:"binary"})},a.publicKeyFromPrivateKey=function(he){he=he||{};var p=o({message:he.privateKey,encoding:"binary"});if(p.length!==a.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+a.constants.PRIVATE_KEY_BYTE_LENGTH);for(var V=new c(a.constants.PUBLIC_KEY_BYTE_LENGTH),R=0;R<V.length;++R)V[R]=p[32+R];return V},a.sign=function(he){he=he||{};var p=o(he),V=o({message:he.privateKey,encoding:"binary"});if(V.length===a.constants.SEED_BYTE_LENGTH){var R=a.generateKeyPair({seed:V});V=R.privateKey}else if(V.length!==a.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+a.constants.SEED_BYTE_LENGTH+" or "+a.constants.PRIVATE_KEY_BYTE_LENGTH);var ce=new c(a.constants.SIGN_BYTE_LENGTH+p.length);j(ce,p,p.length,V);for(var Re=new c(a.constants.SIGN_BYTE_LENGTH),ke=0;ke<Re.length;++ke)Re[ke]=ce[ke];return Re},a.verify=function(he){he=he||{};var p=o(he);if(he.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var V=o({message:he.signature,encoding:"binary"});if(V.length!==a.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+a.constants.SIGN_BYTE_LENGTH);var R=o({message:he.publicKey,encoding:"binary"});if(R.length!==a.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+a.constants.PUBLIC_KEY_BYTE_LENGTH);var ce=new c(a.constants.SIGN_BYTE_LENGTH+p.length),Re=new c(a.constants.SIGN_BYTE_LENGTH+p.length),ke;for(ke=0;ke<a.constants.SIGN_BYTE_LENGTH;++ke)ce[ke]=V[ke];for(ke=0;ke<p.length;++ke)ce[ke+a.constants.SIGN_BYTE_LENGTH]=p[ke];return K(Re,ce,ce.length,R)>=0};function o(he){var p=he.message;if(p instanceof Uint8Array||p instanceof c)return p;var V=he.encoding;if(p===void 0)if(he.md)p=he.md.digest().getBytes(),V="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof p=="string"&&!V)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof p=="string"){if(typeof Buffer<"u")return Buffer.from(p,V);p=new m(p,V)}else if(!(p instanceof m))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var R=new c(p.length()),ce=0;ce<R.length;++ce)R[ce]=p.at(ce);return R}var s=Ve(),h=Ve([1]),v=Ve([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),E=Ve([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),y=Ve([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),A=Ve([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),I=Ve([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _(he,p){var V=t.md.sha512.create(),R=new m(he);V.update(R.getBytes(p),"binary");var ce=V.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(ce,"binary");for(var Re=new c(a.constants.HASH_BYTE_LENGTH),ke=0;ke<64;++ke)Re[ke]=ce.charCodeAt(ke);return Re}function S(he,p){var V=[Ve(),Ve(),Ve(),Ve()],R,ce=_(p,32);for(ce[0]&=248,ce[31]&=127,ce[31]|=64,be(V,ce),Z(he,V),R=0;R<32;++R)p[R+32]=he[R];return 0}function j(he,p,V,R){var ce,Re,ke=new Float64Array(64),qe=[Ve(),Ve(),Ve(),Ve()],g=_(R,32);g[0]&=248,g[31]&=127,g[31]|=64;var ee=V+64;for(ce=0;ce<V;++ce)he[64+ce]=p[ce];for(ce=0;ce<32;++ce)he[32+ce]=g[32+ce];var ae=_(he.subarray(32),V+32);for(H(ae),be(qe,ae),Z(he,qe),ce=32;ce<64;++ce)he[ce]=R[ce];var l=_(he,V+64);for(H(l),ce=32;ce<64;++ce)ke[ce]=0;for(ce=0;ce<32;++ce)ke[ce]=ae[ce];for(ce=0;ce<32;++ce)for(Re=0;Re<32;Re++)ke[ce+Re]+=l[ce]*g[Re];return J(he.subarray(32),ke),ee}function K(he,p,V,R){var ce,Re,ke=new c(32),qe=[Ve(),Ve(),Ve(),Ve()],g=[Ve(),Ve(),Ve(),Ve()];if(Re=-1,V<64||ue(g,R))return-1;for(ce=0;ce<V;++ce)he[ce]=p[ce];for(ce=0;ce<32;++ce)he[ce+32]=R[ce];var ee=_(he,V);if(H(ee),Se(qe,g,ee),be(g,p.subarray(32)),U(qe,g),Z(ke,qe),V-=64,fe(p,0,ke,0)){for(ce=0;ce<V;++ce)he[ce]=0;return-1}for(ce=0;ce<V;++ce)he[ce]=p[ce+64];return Re=V,Re}function J(he,p){var V,R,ce,Re;for(R=63;R>=32;--R){for(V=0,ce=R-32,Re=R-12;ce<Re;++ce)p[ce]+=V-16*p[R]*w[ce-(R-32)],V=p[ce]+128>>8,p[ce]-=V*256;p[ce]+=V,p[R]=0}for(V=0,ce=0;ce<32;++ce)p[ce]+=V-(p[31]>>4)*w[ce],V=p[ce]>>8,p[ce]&=255;for(ce=0;ce<32;++ce)p[ce]-=V*w[ce];for(R=0;R<32;++R)p[R+1]+=p[R]>>8,he[R]=p[R]&255}function H(he){for(var p=new Float64Array(64),V=0;V<64;++V)p[V]=he[V],he[V]=0;J(he,p)}function U(he,p){var V=Ve(),R=Ve(),ce=Ve(),Re=Ve(),ke=Ve(),qe=Ve(),g=Ve(),ee=Ve(),ae=Ve();Le(V,he[1],he[0]),Le(ae,p[1],p[0]),$e(V,V,ae),Ge(R,he[0],he[1]),Ge(ae,p[0],p[1]),$e(R,R,ae),$e(ce,he[3],p[3]),$e(ce,ce,E),$e(Re,he[2],p[2]),Ge(Re,Re,Re),Le(ke,R,V),Le(qe,Re,ce),Ge(g,Re,ce),Ge(ee,R,V),$e(he[0],ke,qe),$e(he[1],ee,g),$e(he[2],g,qe),$e(he[3],ke,ee)}function P(he,p,V){for(var R=0;R<4;++R)Fe(he[R],p[R],V)}function Z(he,p){var V=Ve(),R=Ve(),ce=Ve();Ce(ce,p[2]),$e(V,p[0],ce),$e(R,p[1],ce),ie(he,R),he[31]^=Ae(V)<<7}function ie(he,p){var V,R,ce,Re=Ve(),ke=Ve();for(V=0;V<16;++V)ke[V]=p[V];for(je(ke),je(ke),je(ke),R=0;R<2;++R){for(Re[0]=ke[0]-65517,V=1;V<15;++V)Re[V]=ke[V]-65535-(Re[V-1]>>16&1),Re[V-1]&=65535;Re[15]=ke[15]-32767-(Re[14]>>16&1),ce=Re[15]>>16&1,Re[14]&=65535,Fe(ke,Re,1-ce)}for(V=0;V<16;V++)he[2*V]=ke[V]&255,he[2*V+1]=ke[V]>>8}function ue(he,p){var V=Ve(),R=Ve(),ce=Ve(),Re=Ve(),ke=Ve(),qe=Ve(),g=Ve();return we(he[2],h),le(he[1],p),Be(ce,he[1]),$e(Re,ce,v),Le(ce,ce,he[2]),Ge(Re,he[2],Re),Be(ke,Re),Be(qe,ke),$e(g,qe,ke),$e(V,g,ce),$e(V,V,Re),ne(V,V),$e(V,V,ce),$e(V,V,Re),$e(V,V,Re),$e(he[0],V,Re),Be(R,he[0]),$e(R,R,Re),ye(R,ce)&&$e(he[0],he[0],I),Be(R,he[0]),$e(R,R,Re),ye(R,ce)?-1:(Ae(he[0])===p[31]>>7&&Le(he[0],s,he[0]),$e(he[3],he[0],he[1]),0)}function le(he,p){var V;for(V=0;V<16;++V)he[V]=p[2*V]+(p[2*V+1]<<8);he[15]&=32767}function ne(he,p){var V=Ve(),R;for(R=0;R<16;++R)V[R]=p[R];for(R=250;R>=0;--R)Be(V,V),R!==1&&$e(V,V,p);for(R=0;R<16;++R)he[R]=V[R]}function ye(he,p){var V=new c(32),R=new c(32);return ie(V,he),ie(R,p),fe(V,0,R,0)}function fe(he,p,V,R){return Te(he,p,V,R,32)}function Te(he,p,V,R,ce){var Re,ke=0;for(Re=0;Re<ce;++Re)ke|=he[p+Re]^V[R+Re];return(1&ke-1>>>8)-1}function Ae(he){var p=new c(32);return ie(p,he),p[0]&1}function Se(he,p,V){var R,ce;for(we(he[0],s),we(he[1],h),we(he[2],h),we(he[3],s),ce=255;ce>=0;--ce)R=V[ce/8|0]>>(ce&7)&1,P(he,p,R),U(p,he),U(he,he),P(he,p,R)}function be(he,p){var V=[Ve(),Ve(),Ve(),Ve()];we(V[0],y),we(V[1],A),we(V[2],h),$e(V[3],y,A),Se(he,V,p)}function we(he,p){var V;for(V=0;V<16;V++)he[V]=p[V]|0}function Ce(he,p){var V=Ve(),R;for(R=0;R<16;++R)V[R]=p[R];for(R=253;R>=0;--R)Be(V,V),R!==2&&R!==4&&$e(V,V,p);for(R=0;R<16;++R)he[R]=V[R]}function je(he){var p,V,R=1;for(p=0;p<16;++p)V=he[p]+R+65535,R=Math.floor(V/65536),he[p]=V-R*65536;he[0]+=R-1+37*(R-1)}function Fe(he,p,V){for(var R,ce=~(V-1),Re=0;Re<16;++Re)R=ce&(he[Re]^p[Re]),he[Re]^=R,p[Re]^=R}function Ve(he){var p,V=new Float64Array(16);if(he)for(p=0;p<he.length;++p)V[p]=he[p];return V}function Ge(he,p,V){for(var R=0;R<16;++R)he[R]=p[R]+V[R]}function Le(he,p,V){for(var R=0;R<16;++R)he[R]=p[R]-V[R]}function Be(he,p){$e(he,p,p)}function $e(he,p,V){var R,ce,Re=0,ke=0,qe=0,g=0,ee=0,ae=0,l=0,X=0,oe=0,_e=0,He=0,nt=0,It=0,wt=0,ir=0,_r=0,Rr=0,Hr=0,Vr=0,Tr=0,$t=0,qt=0,Kt=0,nr=0,dr=0,Er=0,Mr=0,jr=0,xr=0,kn=0,gn=0,bn=V[0],Tn=V[1],yn=V[2],Xr=V[3],Rn=V[4],yr=V[5],Wr=V[6],Yr=V[7],vn=V[8],Ur=V[9],Zr=V[10],Fr=V[11],tt=V[12],et=V[13],dt=V[14],Bt=V[15];R=p[0],Re+=R*bn,ke+=R*Tn,qe+=R*yn,g+=R*Xr,ee+=R*Rn,ae+=R*yr,l+=R*Wr,X+=R*Yr,oe+=R*vn,_e+=R*Ur,He+=R*Zr,nt+=R*Fr,It+=R*tt,wt+=R*et,ir+=R*dt,_r+=R*Bt,R=p[1],ke+=R*bn,qe+=R*Tn,g+=R*yn,ee+=R*Xr,ae+=R*Rn,l+=R*yr,X+=R*Wr,oe+=R*Yr,_e+=R*vn,He+=R*Ur,nt+=R*Zr,It+=R*Fr,wt+=R*tt,ir+=R*et,_r+=R*dt,Rr+=R*Bt,R=p[2],qe+=R*bn,g+=R*Tn,ee+=R*yn,ae+=R*Xr,l+=R*Rn,X+=R*yr,oe+=R*Wr,_e+=R*Yr,He+=R*vn,nt+=R*Ur,It+=R*Zr,wt+=R*Fr,ir+=R*tt,_r+=R*et,Rr+=R*dt,Hr+=R*Bt,R=p[3],g+=R*bn,ee+=R*Tn,ae+=R*yn,l+=R*Xr,X+=R*Rn,oe+=R*yr,_e+=R*Wr,He+=R*Yr,nt+=R*vn,It+=R*Ur,wt+=R*Zr,ir+=R*Fr,_r+=R*tt,Rr+=R*et,Hr+=R*dt,Vr+=R*Bt,R=p[4],ee+=R*bn,ae+=R*Tn,l+=R*yn,X+=R*Xr,oe+=R*Rn,_e+=R*yr,He+=R*Wr,nt+=R*Yr,It+=R*vn,wt+=R*Ur,ir+=R*Zr,_r+=R*Fr,Rr+=R*tt,Hr+=R*et,Vr+=R*dt,Tr+=R*Bt,R=p[5],ae+=R*bn,l+=R*Tn,X+=R*yn,oe+=R*Xr,_e+=R*Rn,He+=R*yr,nt+=R*Wr,It+=R*Yr,wt+=R*vn,ir+=R*Ur,_r+=R*Zr,Rr+=R*Fr,Hr+=R*tt,Vr+=R*et,Tr+=R*dt,$t+=R*Bt,R=p[6],l+=R*bn,X+=R*Tn,oe+=R*yn,_e+=R*Xr,He+=R*Rn,nt+=R*yr,It+=R*Wr,wt+=R*Yr,ir+=R*vn,_r+=R*Ur,Rr+=R*Zr,Hr+=R*Fr,Vr+=R*tt,Tr+=R*et,$t+=R*dt,qt+=R*Bt,R=p[7],X+=R*bn,oe+=R*Tn,_e+=R*yn,He+=R*Xr,nt+=R*Rn,It+=R*yr,wt+=R*Wr,ir+=R*Yr,_r+=R*vn,Rr+=R*Ur,Hr+=R*Zr,Vr+=R*Fr,Tr+=R*tt,$t+=R*et,qt+=R*dt,Kt+=R*Bt,R=p[8],oe+=R*bn,_e+=R*Tn,He+=R*yn,nt+=R*Xr,It+=R*Rn,wt+=R*yr,ir+=R*Wr,_r+=R*Yr,Rr+=R*vn,Hr+=R*Ur,Vr+=R*Zr,Tr+=R*Fr,$t+=R*tt,qt+=R*et,Kt+=R*dt,nr+=R*Bt,R=p[9],_e+=R*bn,He+=R*Tn,nt+=R*yn,It+=R*Xr,wt+=R*Rn,ir+=R*yr,_r+=R*Wr,Rr+=R*Yr,Hr+=R*vn,Vr+=R*Ur,Tr+=R*Zr,$t+=R*Fr,qt+=R*tt,Kt+=R*et,nr+=R*dt,dr+=R*Bt,R=p[10],He+=R*bn,nt+=R*Tn,It+=R*yn,wt+=R*Xr,ir+=R*Rn,_r+=R*yr,Rr+=R*Wr,Hr+=R*Yr,Vr+=R*vn,Tr+=R*Ur,$t+=R*Zr,qt+=R*Fr,Kt+=R*tt,nr+=R*et,dr+=R*dt,Er+=R*Bt,R=p[11],nt+=R*bn,It+=R*Tn,wt+=R*yn,ir+=R*Xr,_r+=R*Rn,Rr+=R*yr,Hr+=R*Wr,Vr+=R*Yr,Tr+=R*vn,$t+=R*Ur,qt+=R*Zr,Kt+=R*Fr,nr+=R*tt,dr+=R*et,Er+=R*dt,Mr+=R*Bt,R=p[12],It+=R*bn,wt+=R*Tn,ir+=R*yn,_r+=R*Xr,Rr+=R*Rn,Hr+=R*yr,Vr+=R*Wr,Tr+=R*Yr,$t+=R*vn,qt+=R*Ur,Kt+=R*Zr,nr+=R*Fr,dr+=R*tt,Er+=R*et,Mr+=R*dt,jr+=R*Bt,R=p[13],wt+=R*bn,ir+=R*Tn,_r+=R*yn,Rr+=R*Xr,Hr+=R*Rn,Vr+=R*yr,Tr+=R*Wr,$t+=R*Yr,qt+=R*vn,Kt+=R*Ur,nr+=R*Zr,dr+=R*Fr,Er+=R*tt,Mr+=R*et,jr+=R*dt,xr+=R*Bt,R=p[14],ir+=R*bn,_r+=R*Tn,Rr+=R*yn,Hr+=R*Xr,Vr+=R*Rn,Tr+=R*yr,$t+=R*Wr,qt+=R*Yr,Kt+=R*vn,nr+=R*Ur,dr+=R*Zr,Er+=R*Fr,Mr+=R*tt,jr+=R*et,xr+=R*dt,kn+=R*Bt,R=p[15],_r+=R*bn,Rr+=R*Tn,Hr+=R*yn,Vr+=R*Xr,Tr+=R*Rn,$t+=R*yr,qt+=R*Wr,Kt+=R*Yr,nr+=R*vn,dr+=R*Ur,Er+=R*Zr,Mr+=R*Fr,jr+=R*tt,xr+=R*et,kn+=R*dt,gn+=R*Bt,Re+=38*Rr,ke+=38*Hr,qe+=38*Vr,g+=38*Tr,ee+=38*$t,ae+=38*qt,l+=38*Kt,X+=38*nr,oe+=38*dr,_e+=38*Er,He+=38*Mr,nt+=38*jr,It+=38*xr,wt+=38*kn,ir+=38*gn,ce=1,R=Re+ce+65535,ce=Math.floor(R/65536),Re=R-ce*65536,R=ke+ce+65535,ce=Math.floor(R/65536),ke=R-ce*65536,R=qe+ce+65535,ce=Math.floor(R/65536),qe=R-ce*65536,R=g+ce+65535,ce=Math.floor(R/65536),g=R-ce*65536,R=ee+ce+65535,ce=Math.floor(R/65536),ee=R-ce*65536,R=ae+ce+65535,ce=Math.floor(R/65536),ae=R-ce*65536,R=l+ce+65535,ce=Math.floor(R/65536),l=R-ce*65536,R=X+ce+65535,ce=Math.floor(R/65536),X=R-ce*65536,R=oe+ce+65535,ce=Math.floor(R/65536),oe=R-ce*65536,R=_e+ce+65535,ce=Math.floor(R/65536),_e=R-ce*65536,R=He+ce+65535,ce=Math.floor(R/65536),He=R-ce*65536,R=nt+ce+65535,ce=Math.floor(R/65536),nt=R-ce*65536,R=It+ce+65535,ce=Math.floor(R/65536),It=R-ce*65536,R=wt+ce+65535,ce=Math.floor(R/65536),wt=R-ce*65536,R=ir+ce+65535,ce=Math.floor(R/65536),ir=R-ce*65536,R=_r+ce+65535,ce=Math.floor(R/65536),_r=R-ce*65536,Re+=ce-1+37*(ce-1),ce=1,R=Re+ce+65535,ce=Math.floor(R/65536),Re=R-ce*65536,R=ke+ce+65535,ce=Math.floor(R/65536),ke=R-ce*65536,R=qe+ce+65535,ce=Math.floor(R/65536),qe=R-ce*65536,R=g+ce+65535,ce=Math.floor(R/65536),g=R-ce*65536,R=ee+ce+65535,ce=Math.floor(R/65536),ee=R-ce*65536,R=ae+ce+65535,ce=Math.floor(R/65536),ae=R-ce*65536,R=l+ce+65535,ce=Math.floor(R/65536),l=R-ce*65536,R=X+ce+65535,ce=Math.floor(R/65536),X=R-ce*65536,R=oe+ce+65535,ce=Math.floor(R/65536),oe=R-ce*65536,R=_e+ce+65535,ce=Math.floor(R/65536),_e=R-ce*65536,R=He+ce+65535,ce=Math.floor(R/65536),He=R-ce*65536,R=nt+ce+65535,ce=Math.floor(R/65536),nt=R-ce*65536,R=It+ce+65535,ce=Math.floor(R/65536),It=R-ce*65536,R=wt+ce+65535,ce=Math.floor(R/65536),wt=R-ce*65536,R=ir+ce+65535,ce=Math.floor(R/65536),ir=R-ce*65536,R=_r+ce+65535,ce=Math.floor(R/65536),_r=R-ce*65536,Re+=ce-1+37*(ce-1),he[0]=Re,he[1]=ke,he[2]=qe,he[3]=g,he[4]=ee,he[5]=ae,he[6]=l,he[7]=X,he[8]=oe,he[9]=_e,he[10]=He,he[11]=nt,he[12]=It,he[13]=wt,he[14]=ir,he[15]=_r}return ed25519_1}var kem,hasRequiredKem;function requireKem(){if(hasRequiredKem)return kem;hasRequiredKem=1;var t=requireForge();requireUtil$7(),requireRandom(),requireJsbn(),kem=t.kem=t.kem||{};var e=t.jsbn.BigInteger;t.kem.rsa={},t.kem.rsa.create=function(u,d){d=d||{};var m=d.prng||t.random,c={};return c.encrypt=function(a,o){var s=Math.ceil(a.n.bitLength()/8),h;do h=new e(t.util.bytesToHex(m.getBytesSync(s)),16).mod(a.n);while(h.compareTo(e.ONE)<=0);h=t.util.hexToBytes(h.toString(16));var v=s-h.length;v>0&&(h=t.util.fillString("\0",v)+h);var E=a.encrypt(h,"NONE"),y=u.generate(h,o);return{encapsulation:E,key:y}},c.decrypt=function(a,o,s){var h=a.decrypt(o,"NONE");return u.generate(h,s)},c},t.kem.kdf1=function(u,d){r(this,u,0,d||u.digestLength)},t.kem.kdf2=function(u,d){r(this,u,1,d||u.digestLength)};function r(u,d,m,c){u.generate=function(a,o){for(var s=new t.util.ByteBuffer,h=Math.ceil(o/c)+m,v=new t.util.ByteBuffer,E=m;E<h;++E){v.putInt32(E),d.start(),d.update(a+v.getBytes());var y=d.digest();s.putBytes(y.getBytes(c))}return s.truncate(s.length()-o),s.getBytes()}}return kem}var log,hasRequiredLog;function requireLog(){if(hasRequiredLog)return log;hasRequiredLog=1;var t=requireForge();requireUtil$7(),log=t.log=t.log||{},t.log.levels=["none","error","warning","info","debug","verbose","max"];var e={},r=[],u=null;t.log.LEVEL_LOCKED=2,t.log.NO_LEVEL_CHECK=4,t.log.INTERPOLATE=8;for(var d=0;d<t.log.levels.length;++d){var m=t.log.levels[d];e[m]={index:d,name:m.toUpperCase()}}t.log.logMessage=function(E){for(var y=e[E.level].index,A=0;A<r.length;++A){var w=r[A];if(w.flags&t.log.NO_LEVEL_CHECK)w.f(E);else{var I=e[w.level].index;y<=I&&w.f(w,E)}}},t.log.prepareStandard=function(E){"standard"in E||(E.standard=e[E.level].name+" ["+E.category+"] "+E.message)},t.log.prepareFull=function(E){if(!("full"in E)){var y=[E.message];y=y.concat([]),E.full=t.util.format.apply(this,y)}},t.log.prepareStandardFull=function(E){"standardFull"in E||(t.log.prepareStandard(E),E.standardFull=E.standard)};for(var c=["error","warning","info","debug","verbose"],d=0;d<c.length;++d)(function(y){t.log[y]=function(A,w){var I=Array.prototype.slice.call(arguments).slice(2),_={timestamp:new Date,level:y,category:A,message:w,arguments:I};t.log.logMessage(_)}})(c[d]);if(t.log.makeLogger=function(E){var y={flags:0,f:E};return t.log.setLevel(y,"none"),y},t.log.setLevel=function(E,y){var A=!1;if(E&&!(E.flags&t.log.LEVEL_LOCKED))for(var w=0;w<t.log.levels.length;++w){var I=t.log.levels[w];if(y==I){E.level=y,A=!0;break}}return A},t.log.lock=function(E,y){typeof y>"u"||y?E.flags|=t.log.LEVEL_LOCKED:E.flags&=~t.log.LEVEL_LOCKED},t.log.addLogger=function(E){r.push(E)},typeof console<"u"&&"log"in console){var a;if(console.error&&console.warn&&console.info&&console.debug){var o={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},s=function(E,y){t.log.prepareStandard(y);var A=o[y.level],w=[y.standard];w=w.concat(y.arguments.slice()),A.apply(console,w)};a=t.log.makeLogger(s)}else{var s=function(y,A){t.log.prepareStandardFull(A),console.log(A.standardFull)};a=t.log.makeLogger(s)}t.log.setLevel(a,"debug"),t.log.addLogger(a),u=a}else console={log:function(){}};if(u!==null&&typeof window<"u"&&window.location){var h=new URL(window.location.href).searchParams;if(h.has("console.level")&&t.log.setLevel(u,h.get("console.level").slice(-1)[0]),h.has("console.lock")){var v=h.get("console.lock").slice(-1)[0];v=="true"&&t.log.lock(u)}}return t.log.consoleLogger=u,log}var md_all,hasRequiredMd_all;function requireMd_all(){return hasRequiredMd_all||(hasRequiredMd_all=1,md_all=requireMd(),requireMd5$2(),requireSha1$2(),requireSha256(),requireSha512()),md_all}var pkcs7={exports:{}},hasRequiredPkcs7;function requirePkcs7(){if(hasRequiredPkcs7)return pkcs7.exports;hasRequiredPkcs7=1;var t=requireForge();requireAes(),requireAsn1(),requireDes(),requireOids(),requirePem(),requirePkcs7asn1(),requireRandom(),requireUtil$7(),requireX509();var e=t.asn1,r=pkcs7.exports=t.pkcs7=t.pkcs7||{};r.messageFromPem=function(y){var A=t.pem.decode(y)[0];if(A.type!=="PKCS7"){var w=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw w.headerType=A.type,w}if(A.procType&&A.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var I=e.fromDer(A.body);return r.messageFromAsn1(I)},r.messageToPem=function(y,A){var w={type:"PKCS7",body:e.toDer(y.toAsn1()).getBytes()};return t.pem.encode(w,{maxline:A})},r.messageFromAsn1=function(y){var A={},w=[];if(!e.validate(y,r.asn1.contentInfoValidator,A,w)){var I=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw I.errors=w,I}var _=e.derToOid(A.contentType),S;switch(_){case t.pki.oids.envelopedData:S=r.createEnvelopedData();break;case t.pki.oids.encryptedData:S=r.createEncryptedData();break;case t.pki.oids.signedData:S=r.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+_+" is not (yet) supported.")}return S.fromAsn1(A.content.value[0]),S},r.createSignedData=function(){var y=null;return y={type:t.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(I){if(v(y,I,r.asn1.signedDataValidator),y.certificates=[],y.crls=[],y.digestAlgorithmIdentifiers=[],y.contentInfo=null,y.signerInfos=[],y.rawCapture.certificates)for(var _=y.rawCapture.certificates.value,S=0;S<_.length;++S)y.certificates.push(t.pki.certificateFromAsn1(_[S]))},toAsn1:function(){y.contentInfo||y.sign();for(var I=[],_=0;_<y.certificates.length;++_)I.push(t.pki.certificateToAsn1(y.certificates[_]));var S=[],j=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(y.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,y.digestAlgorithmIdentifiers),y.contentInfo])]);return I.length>0&&j.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,I)),S.length>0&&j.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,S)),j.value[0].value.push(e.create(e.Class.UNIVERSAL,e.Type.SET,!0,y.signerInfos)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.type).getBytes()),j])},addSigner:function(I){var _=I.issuer,S=I.serialNumber;if(I.certificate){var j=I.certificate;typeof j=="string"&&(j=t.pki.certificateFromPem(j)),_=j.issuer.attributes,S=j.serialNumber}var K=I.key;if(!K)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof K=="string"&&(K=t.pki.privateKeyFromPem(K));var J=I.digestAlgorithm||t.pki.oids.sha1;switch(J){case t.pki.oids.sha1:case t.pki.oids.sha256:case t.pki.oids.sha384:case t.pki.oids.sha512:case t.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+J)}var H=I.authenticatedAttributes||[];if(H.length>0){for(var U=!1,P=!1,Z=0;Z<H.length;++Z){var ie=H[Z];if(!U&&ie.type===t.pki.oids.contentType){if(U=!0,P)break;continue}if(!P&&ie.type===t.pki.oids.messageDigest){if(P=!0,U)break;continue}}if(!U||!P)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}y.signers.push({key:K,version:1,issuer:_,serialNumber:S,digestAlgorithm:J,signatureAlgorithm:t.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:H,unauthenticatedAttributes:[]})},sign:function(I){if(I=I||{},(typeof y.content!="object"||y.contentInfo===null)&&(y.contentInfo=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(t.pki.oids.data).getBytes())]),"content"in y)){var _;y.content instanceof t.util.ByteBuffer?_=y.content.bytes():typeof y.content=="string"&&(_=t.util.encodeUtf8(y.content)),I.detached?y.detachedContent=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,_):y.contentInfo.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,_)]))}if(y.signers.length!==0){var S=A();w(S)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(I){typeof I=="string"&&(I=t.pki.certificateFromPem(I)),y.certificates.push(I)},addCertificateRevokationList:function(I){throw new Error("PKCS#7 CRL support not yet implemented.")}},y;function A(){for(var I={},_=0;_<y.signers.length;++_){var S=y.signers[_],j=S.digestAlgorithm;j in I||(I[j]=t.md[t.pki.oids[j]].create()),S.authenticatedAttributes.length===0?S.md=I[j]:S.md=t.md[t.pki.oids[j]].create()}y.digestAlgorithmIdentifiers=[];for(var j in I)y.digestAlgorithmIdentifiers.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(j).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]));return I}function w(I){var _;if(y.detachedContent?_=y.detachedContent:(_=y.contentInfo.value[1],_=_.value[0]),!_)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var S=e.derToOid(y.contentInfo.value[0].value),j=e.toDer(_);j.getByte(),e.getBerValueLength(j),j=j.getBytes();for(var K in I)I[K].start().update(j);for(var J=new Date,H=0;H<y.signers.length;++H){var U=y.signers[H];if(U.authenticatedAttributes.length===0){if(S!==t.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{U.authenticatedAttributesAsn1=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var P=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[]),Z=0;Z<U.authenticatedAttributes.length;++Z){var ie=U.authenticatedAttributes[Z];ie.type===t.pki.oids.messageDigest?ie.value=I[U.digestAlgorithm].digest():ie.type===t.pki.oids.signingTime&&(ie.value||(ie.value=J)),P.value.push(s(ie)),U.authenticatedAttributesAsn1.value.push(s(ie))}j=e.toDer(P).getBytes(),U.md.start().update(j)}U.signature=U.key.sign(U.md,"RSASSA-PKCS1-V1_5")}y.signerInfos=o(y.signers)}},r.createEncryptedData=function(){var y=null;return y={type:t.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:t.pki.oids["aes256-CBC"]},fromAsn1:function(A){v(y,A,r.asn1.encryptedDataValidator)},decrypt:function(A){A!==void 0&&(y.encryptedContent.key=A),E(y)}},y},r.createEnvelopedData=function(){var y=null;return y={type:t.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:t.pki.oids["aes256-CBC"]},fromAsn1:function(A){var w=v(y,A,r.asn1.envelopedDataValidator);y.recipients=m(w.recipientInfos.value)},toAsn1:function(){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.type).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(y.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,c(y.recipients)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,h(y.encryptedContent))])])])},findRecipient:function(A){for(var w=A.issuer.attributes,I=0;I<y.recipients.length;++I){var _=y.recipients[I],S=_.issuer;if(_.serialNumber===A.serialNumber&&S.length===w.length){for(var j=!0,K=0;K<w.length;++K)if(S[K].type!==w[K].type||S[K].value!==w[K].value){j=!1;break}if(j)return _}}return null},decrypt:function(A,w){if(y.encryptedContent.key===void 0&&A!==void 0&&w!==void 0)switch(A.encryptedContent.algorithm){case t.pki.oids.rsaEncryption:case t.pki.oids.desCBC:var I=w.decrypt(A.encryptedContent.content);y.encryptedContent.key=t.util.createBuffer(I);break;default:throw new Error("Unsupported asymmetric cipher, OID "+A.encryptedContent.algorithm)}E(y)},addRecipient:function(A){y.recipients.push({version:0,issuer:A.issuer.attributes,serialNumber:A.serialNumber,encryptedContent:{algorithm:t.pki.oids.rsaEncryption,key:A.publicKey}})},encrypt:function(A,w){if(y.encryptedContent.content===void 0){w=w||y.encryptedContent.algorithm,A=A||y.encryptedContent.key;var I,_,S;switch(w){case t.pki.oids["aes128-CBC"]:I=16,_=16,S=t.aes.createEncryptionCipher;break;case t.pki.oids["aes192-CBC"]:I=24,_=16,S=t.aes.createEncryptionCipher;break;case t.pki.oids["aes256-CBC"]:I=32,_=16,S=t.aes.createEncryptionCipher;break;case t.pki.oids["des-EDE3-CBC"]:I=24,_=8,S=t.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+w)}if(A===void 0)A=t.util.createBuffer(t.random.getBytes(I));else if(A.length()!=I)throw new Error("Symmetric key has wrong length; got "+A.length()+" bytes, expected "+I+".");y.encryptedContent.algorithm=w,y.encryptedContent.key=A,y.encryptedContent.parameter=t.util.createBuffer(t.random.getBytes(_));var j=S(A);if(j.start(y.encryptedContent.parameter.copy()),j.update(y.content),!j.finish())throw new Error("Symmetric encryption failed.");y.encryptedContent.content=j.output}for(var K=0;K<y.recipients.length;++K){var J=y.recipients[K];if(J.encryptedContent.content===void 0)switch(J.encryptedContent.algorithm){case t.pki.oids.rsaEncryption:J.encryptedContent.content=J.encryptedContent.key.encrypt(y.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+J.encryptedContent.algorithm)}}}},y};function u(y){var A={},w=[];if(!e.validate(y,r.asn1.recipientInfoValidator,A,w)){var I=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw I.errors=w,I}return{version:A.version.charCodeAt(0),issuer:t.pki.RDNAttributesAsArray(A.issuer),serialNumber:t.util.createBuffer(A.serial).toHex(),encryptedContent:{algorithm:e.derToOid(A.encAlgorithm),parameter:A.encParameter?A.encParameter.value:void 0,content:A.encKey}}}function d(y){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(y.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[t.pki.distinguishedNameToAsn1({attributes:y.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,t.util.hexToBytes(y.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.encryptedContent.algorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,y.encryptedContent.content)])}function m(y){for(var A=[],w=0;w<y.length;++w)A.push(u(y[w]));return A}function c(y){for(var A=[],w=0;w<y.length;++w)A.push(d(y[w]));return A}function a(y){var A=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(y.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[t.pki.distinguishedNameToAsn1({attributes:y.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,t.util.hexToBytes(y.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.digestAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])]);if(y.authenticatedAttributesAsn1&&A.value.push(y.authenticatedAttributesAsn1),A.value.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.signatureAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])),A.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,y.signature)),y.unauthenticatedAttributes.length>0){for(var w=e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[]),I=0;I<y.unauthenticatedAttributes.length;++I){var _=y.unauthenticatedAttributes[I];w.values.push(s(_))}A.value.push(w)}return A}function o(y){for(var A=[],w=0;w<y.length;++w)A.push(a(y[w]));return A}function s(y){var A;if(y.type===t.pki.oids.contentType)A=e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.value).getBytes());else if(y.type===t.pki.oids.messageDigest)A=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,y.value.bytes());else if(y.type===t.pki.oids.signingTime){var w=new Date("1950-01-01T00:00:00Z"),I=new Date("2050-01-01T00:00:00Z"),_=y.value;if(typeof _=="string"){var S=Date.parse(_);isNaN(S)?_.length===13?_=e.utcTimeToDate(_):_=e.generalizedTimeToDate(_):_=new Date(S)}_>=w&&_<I?A=e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(_)):A=e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(_))}return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[A])])}function h(y){return[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(t.pki.oids.data).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(y.algorithm).getBytes()),y.parameter?e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,y.parameter.getBytes()):void 0]),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,y.content.getBytes())])]}function v(y,A,w){var I={},_=[];if(!e.validate(A,w,I,_)){var S=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw S.errors=S,S}var j=e.derToOid(I.contentType);if(j!==t.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(I.encryptedContent){var K="";if(t.util.isArray(I.encryptedContent))for(var J=0;J<I.encryptedContent.length;++J){if(I.encryptedContent[J].type!==e.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");K+=I.encryptedContent[J].value}else K=I.encryptedContent;y.encryptedContent={algorithm:e.derToOid(I.encAlgorithm),parameter:t.util.createBuffer(I.encParameter.value),content:t.util.createBuffer(K)}}if(I.content){var K="";if(t.util.isArray(I.content))for(var J=0;J<I.content.length;++J){if(I.content[J].type!==e.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");K+=I.content[J].value}else K=I.content;y.content=t.util.createBuffer(K)}return y.version=I.version.charCodeAt(0),y.rawCapture=I,I}function E(y){if(y.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(y.content===void 0){var A;switch(y.encryptedContent.algorithm){case t.pki.oids["aes128-CBC"]:case t.pki.oids["aes192-CBC"]:case t.pki.oids["aes256-CBC"]:A=t.aes.createDecryptionCipher(y.encryptedContent.key);break;case t.pki.oids.desCBC:case t.pki.oids["des-EDE3-CBC"]:A=t.des.createDecryptionCipher(y.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+y.encryptedContent.algorithm)}if(A.start(y.encryptedContent.parameter),A.update(y.encryptedContent.content),!A.finish())throw new Error("Symmetric decryption failed.");y.content=A.output}}return pkcs7.exports}var ssh={exports:{}},hasRequiredSsh;function requireSsh(){if(hasRequiredSsh)return ssh.exports;hasRequiredSsh=1;var t=requireForge();requireAes(),requireHmac(),requireMd5$2(),requireSha1$2(),requireUtil$7();var e=ssh.exports=t.ssh=t.ssh||{};e.privateKeyToPutty=function(m,c,a){a=a||"",c=c||"";var o="ssh-rsa",s=c===""?"none":"aes256-cbc",h="PuTTY-User-Key-File-2: "+o+`\r
`;h+="Encryption: "+s+`\r
`,h+="Comment: "+a+`\r
`;var v=t.util.createBuffer();u(v,o),r(v,m.e),r(v,m.n);var E=t.util.encode64(v.bytes(),64),y=Math.floor(E.length/66)+1;h+="Public-Lines: "+y+`\r
`,h+=E;var A=t.util.createBuffer();r(A,m.d),r(A,m.p),r(A,m.q),r(A,m.qInv);var w;if(!c)w=t.util.encode64(A.bytes(),64);else{var I=A.length()+16-1;I-=I%16;var _=d(A.bytes());_.truncate(_.length()-I+A.length()),A.putBuffer(_);var S=t.util.createBuffer();S.putBuffer(d("\0\0\0\0",c)),S.putBuffer(d("\0\0\0",c));var j=t.aes.createEncryptionCipher(S.truncate(8),"CBC");j.start(t.util.createBuffer().fillWithByte(0,16)),j.update(A.copy()),j.finish();var K=j.output;K.truncate(16),w=t.util.encode64(K.bytes(),64)}y=Math.floor(w.length/66)+1,h+=`\r
Private-Lines: `+y+`\r
`,h+=w;var J=d("putty-private-key-file-mac-key",c),H=t.util.createBuffer();u(H,o),u(H,s),u(H,a),H.putInt32(v.length()),H.putBuffer(v),H.putInt32(A.length()),H.putBuffer(A);var U=t.hmac.create();return U.start("sha1",J),U.update(H.bytes()),h+=`\r
Private-MAC: `+U.digest().toHex()+`\r
`,h},e.publicKeyToOpenSSH=function(m,c){var a="ssh-rsa";c=c||"";var o=t.util.createBuffer();return u(o,a),r(o,m.e),r(o,m.n),a+" "+t.util.encode64(o.bytes())+" "+c},e.privateKeyToOpenSSH=function(m,c){return c?t.pki.encryptRsaPrivateKey(m,c,{legacy:!0,algorithm:"aes128"}):t.pki.privateKeyToPem(m)},e.getPublicKeyFingerprint=function(m,c){c=c||{};var a=c.md||t.md.md5.create(),o="ssh-rsa",s=t.util.createBuffer();u(s,o),r(s,m.e),r(s,m.n),a.start(),a.update(s.getBytes());var h=a.digest();if(c.encoding==="hex"){var v=h.toHex();return c.delimiter?v.match(/.{2}/g).join(c.delimiter):v}else{if(c.encoding==="binary")return h.getBytes();if(c.encoding)throw new Error('Unknown encoding "'+c.encoding+'".')}return h};function r(m,c){var a=c.toString(16);a[0]>="8"&&(a="00"+a);var o=t.util.hexToBytes(a);m.putInt32(o.length),m.putBytes(o)}function u(m,c){m.putInt32(c.length),m.putString(c)}function d(){for(var m=t.md.sha1.create(),c=arguments.length,a=0;a<c;++a)m.update(arguments[a]);return m.digest()}return ssh.exports}var lib$3,hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,lib$3=requireForge(),requireAes(),requireAesCipherSuites(),requireAsn1(),requireCipher(),requireDes(),requireEd25519(),requireHmac(),requireKem(),requireLog(),requireMd_all(),requireMgf1(),requirePbkdf2(),requirePem(),requirePkcs1(),requirePkcs12(),requirePkcs7(),requirePki(),requirePrime(),requirePrng(),requirePss(),requireRandom(),requireRc2(),requireSsh(),requireTls(),requireUtil$7()),lib$3}/*! firebase-admin v13.4.0 */var hasRequiredCredentialInternal;function requireCredentialInternal(){if(hasRequiredCredentialInternal)return credentialInternal;hasRequiredCredentialInternal=1;/*!
 * @license
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(credentialInternal,"__esModule",{value:!0}),credentialInternal.ImpersonatedServiceAccountCredential=credentialInternal.RefreshTokenCredential=credentialInternal.ServiceAccountCredential=credentialInternal.ApplicationDefaultCredential=void 0,credentialInternal.isApplicationDefault=E,credentialInternal.getApplicationDefault=y;const t=require$$1$3,e=requireSrc$b(),r=requireError(),u=requireValidator$1(),d=["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/firebase.database","https://www.googleapis.com/auth/firebase.messaging","https://www.googleapis.com/auth/identitytoolkit","https://www.googleapis.com/auth/userinfo.email"];class m{constructor(S){this.googleAuth=new e.GoogleAuth({scopes:d,clientOptions:{transporterOptions:{agent:S}}})}async getAccessToken(){this.authClient||(this.authClient=await this.googleAuth.getClient()),await this.authClient.getAccessToken();const S=this.authClient.credentials;return this.quotaProjectId=this.authClient.quotaProjectId,I(S)}async getProjectId(){return this.projectId||(this.projectId=await this.googleAuth.getProjectId()),Promise.resolve(this.projectId)}getQuotaProjectId(){return this.quotaProjectId||(this.quotaProjectId=this.authClient?.quotaProjectId),this.quotaProjectId}async isComputeEngineCredential(){return this.authClient||(this.authClient=await this.googleAuth.getClient()),Promise.resolve(this.authClient instanceof e.Compute)}async getIDToken(S){if(await this.isComputeEngineCredential())return this.authClient.fetchIdToken(S);throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Credentials type should be Compute Engine Credentials.")}async getServiceAccountEmail(){if(this.accountId)return Promise.resolve(this.accountId);const{client_email:S}=await this.googleAuth.getCredentials();return this.accountId=S??"",Promise.resolve(this.accountId)}}credentialInternal.ApplicationDefaultCredential=m;class c{constructor(S,j,K=!1){this.serviceAccountPathOrObject=S,this.httpAgent=j,this.implicit=K;const J=typeof S=="string"?a.fromPath(S):new a(S);this.projectId=J.projectId,this.privateKey=J.privateKey,this.clientEmail=J.clientEmail}getGoogleAuth(){if(this.googleAuth)return this.googleAuth;const{auth:S,client:j}=w(this.serviceAccountPathOrObject,this.httpAgent);return this.googleAuth=S,this.authClient=j,this.googleAuth}async getAccessToken(){const S=this.getGoogleAuth();this.authClient===void 0&&(this.authClient=await S.getClient()),await this.authClient.getAccessToken();const j=this.authClient.credentials;return I(j)}}credentialInternal.ServiceAccountCredential=c;class a{static fromPath(S){try{return new a(JSON.parse(t.readFileSync(S,"utf8")))}catch(j){throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse service account json file: "+j)}}constructor(S){if(!u.isNonNullObject(S))throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Service account must be an object.");A(this,S,"projectId","project_id"),A(this,S,"privateKey","private_key"),A(this,S,"clientEmail","client_email");let j;if(u.isNonEmptyString(this.projectId)?u.isNonEmptyString(this.privateKey)?u.isNonEmptyString(this.clientEmail)||(j='Service account object must contain a string "client_email" property.'):j='Service account object must contain a string "private_key" property.':j='Service account object must contain a string "project_id" property.',typeof j<"u")throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,j);const K=requireLib$3();try{K.pki.privateKeyFromPem(this.privateKey)}catch(J){throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse private key: "+J)}}}class o{constructor(S,j,K=!1){this.refreshTokenPathOrObject=S,this.httpAgent=j,this.implicit=K,typeof S=="string"?s.validateFromPath(S):s.validateFromJSON(S)}getGoogleAuth(){if(this.googleAuth)return this.googleAuth;const{auth:S,client:j}=w(this.refreshTokenPathOrObject,this.httpAgent);return this.googleAuth=S,this.authClient=j,this.googleAuth}async getAccessToken(){const S=this.getGoogleAuth();this.authClient===void 0&&(this.authClient=await S.getClient()),await this.authClient.getAccessToken();const j=this.authClient.credentials;return I(j)}}credentialInternal.RefreshTokenCredential=o;class s{static validateFromPath(S){try{s.validateFromJSON(JSON.parse(t.readFileSync(S,"utf8")))}catch(j){throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse refresh token file: "+j)}}static validateFromJSON(S){const j={clientId:"",clientSecret:"",refreshToken:"",type:""};A(j,S,"clientId","client_id"),A(j,S,"clientSecret","client_secret"),A(j,S,"refreshToken","refresh_token"),A(j,S,"type","type");let K;if(u.isNonEmptyString(j.clientId)?u.isNonEmptyString(j.clientSecret)?u.isNonEmptyString(j.refreshToken)?u.isNonEmptyString(j.type)||(K='Refresh token must contain a "type" property.'):K='Refresh token must contain a "refresh_token" property.':K='Refresh token must contain a "client_secret" property.':K='Refresh token must contain a "client_id" property.',typeof K<"u")throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,K)}}class h{constructor(S,j,K=!1){this.impersonatedServiceAccountPathOrObject=S,this.httpAgent=j,this.implicit=K,typeof S=="string"?v.validateFromPath(S):v.validateFromJSON(S)}getGoogleAuth(){if(this.googleAuth)return this.googleAuth;const{auth:S,client:j}=w(this.impersonatedServiceAccountPathOrObject,this.httpAgent);return this.googleAuth=S,this.authClient=j,this.googleAuth}async getAccessToken(){const S=this.getGoogleAuth();this.authClient===void 0&&(this.authClient=await S.getClient()),await this.authClient.getAccessToken();const j=this.authClient.credentials;return I(j)}}credentialInternal.ImpersonatedServiceAccountCredential=h;class v{static validateFromPath(S){try{v.validateFromJSON(JSON.parse(t.readFileSync(S,"utf8")))}catch(j){throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse impersonated service account file: "+j)}}static validateFromJSON(S){const{client_id:j,client_secret:K,refresh_token:J,type:H}=S.source_credentials;let U;if(u.isNonEmptyString(j)?u.isNonEmptyString(K)?u.isNonEmptyString(J)?u.isNonEmptyString(H)||(U='Impersonated Service Account must contain a "source_credentials.type" property.'):U='Impersonated Service Account must contain a "source_credentials.refresh_token" property.':U='Impersonated Service Account must contain a "source_credentials.client_secret" property.':U='Impersonated Service Account must contain a "source_credentials.client_id" property.',typeof U<"u")throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,U)}}function E(_){return _ instanceof m||_ instanceof o&&_.implicit}function y(_){return new m(_)}function A(_,S,j,K){const J=S[j]||S[K];typeof J<"u"&&(_[j]=J)}function w(_,S){let j;const K=new e.GoogleAuth({scopes:d,clientOptions:{transporterOptions:{agent:S}},keyFile:typeof _=="string"?_:void 0});if(typeof _=="object"){if(!u.isNonNullObject(_))throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Service account must be an object.");A(_,_,"project_id","projectId"),A(_,_,"private_key","privateKey"),A(_,_,"client_email","clientEmail"),j=K.fromJSON(_)}return{auth:K,client:j}}function I(_){const S=_?.access_token,j=_?.expiry_date;if(typeof S!="string")throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse Google auth credential: access_token must be a non empty string.");if(typeof j!="number")throw new r.FirebaseAppError(r.AppErrorCodes.INVALID_CREDENTIAL,"Failed to parse Google auth credential: Invalid expiry_date.");return{..._,access_token:S,expires_in:Math.floor((j-new Date().getTime())/1e3)}}return credentialInternal}var firebaseApp={};/*! firebase-admin v13.4.0 */var hasRequiredFirebaseApp;function requireFirebaseApp(){if(hasRequiredFirebaseApp)return firebaseApp;hasRequiredFirebaseApp=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(firebaseApp,"__esModule",{value:!0}),firebaseApp.FirebaseApp=firebaseApp.FirebaseAppInternals=void 0;const t=requireCredentialInternal(),e=requireValidator$1(),r=requireDeepCopy(),u=requireError(),d=5*60*1e3;class m{constructor(s){this.credential_=s,this.tokenListeners_=[],this.isRefreshing=!1}getToken(s=!1){return(s||this.shouldRefresh())&&(this.promiseToCachedToken_=this.refreshToken()),this.promiseToCachedToken_}getCachedToken(){return this.cachedToken_||null}refreshToken(){return this.isRefreshing=!0,Promise.resolve(this.credential_.getAccessToken()).then(s=>{if(!e.isNonNullObject(s)||typeof s.expires_in!="number"||typeof s.access_token!="string")throw new u.FirebaseAppError(u.AppErrorCodes.INVALID_CREDENTIAL,`Invalid access token generated: "${JSON.stringify(s)}". Valid access tokens must be an object with the "expires_in" (number) and "access_token" (string) properties.`);const h={accessToken:s.access_token,expirationTime:Date.now()+s.expires_in*1e3};return(!this.cachedToken_||this.cachedToken_.accessToken!==h.accessToken||this.cachedToken_.expirationTime!==h.expirationTime)&&(this.cachedToken_=h,this.tokenListeners_.forEach(v=>{v(h.accessToken)})),h}).catch(s=>{let h=typeof s=="string"?s:s.message;throw h=`Credential implementation provided to initializeApp() via the "credential" property failed to fetch a valid Google OAuth2 access token with the following error: "${h}".`,h.indexOf("invalid_grant")!==-1&&(h+=" There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk."),new u.FirebaseAppError(u.AppErrorCodes.INVALID_CREDENTIAL,h)}).finally(()=>{this.isRefreshing=!1})}shouldRefresh(){return(!this.cachedToken_||this.cachedToken_.expirationTime-Date.now()<=d)&&!this.isRefreshing}addAuthTokenListener(s){this.tokenListeners_.push(s),this.cachedToken_&&s(this.cachedToken_.accessToken)}removeAuthTokenListener(s){this.tokenListeners_=this.tokenListeners_.filter(h=>h!==s)}}firebaseApp.FirebaseAppInternals=m;class c{constructor(s,h,v){if(this.appStore=v,this.services_={},this.isDeleted_=!1,this.name_=h,this.options_=(0,r.deepCopy)(s),!e.isNonNullObject(this.options_))throw new u.FirebaseAppError(u.AppErrorCodes.INVALID_APP_OPTIONS,`Invalid Firebase app options passed as the first argument to initializeApp() for the app named "${this.name_}". Options must be a non-null object.`);"credential"in this.options_||(this.options_.credential=(0,t.getApplicationDefault)(this.options_.httpAgent));const y=this.options_.credential;if(typeof y!="object"||y===null||typeof y.getAccessToken!="function")throw new u.FirebaseAppError(u.AppErrorCodes.INVALID_APP_OPTIONS,`Invalid Firebase app options passed as the first argument to initializeApp() for the app named "${this.name_}". The "credential" property must be an object which implements the Credential interface.`);this.INTERNAL=new m(y)}get name(){return this.checkDestroyed_(),this.name_}get options(){return this.checkDestroyed_(),(0,r.deepCopy)(this.options_)}getOrInitService(s,h){return this.ensureService_(s,()=>h(this))}delete(){return this.checkDestroyed_(),this.appStore?.removeApp(this.name),Promise.all(Object.keys(this.services_).map(s=>{const h=this.services_[s];return a(h)?h.delete():Promise.resolve()})).then(()=>{this.services_={},this.isDeleted_=!0})}ensureService_(s,h){return this.checkDestroyed_(),s in this.services_||(this.services_[s]=h()),this.services_[s]}checkDestroyed_(){if(this.isDeleted_)throw new u.FirebaseAppError(u.AppErrorCodes.APP_DELETED,`Firebase app named "${this.name_}" has already been deleted.`)}}firebaseApp.FirebaseApp=c;function a(o){return typeof o.delete=="function"}return firebaseApp}var hasRequiredLifecycle;function requireLifecycle(){return hasRequiredLifecycle||(hasRequiredLifecycle=1,function(t){var e={};/*! firebase-admin v13.4.0 *//*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.FIREBASE_CONFIG_VAR=t.defaultAppStore=t.AppStore=void 0,t.initializeApp=s,t.getApp=h,t.getApps=v,t.deleteApp=E;const r=require$$1$3,u=requireValidator$1(),d=requireError(),m=requireCredentialInternal(),c=requireFirebaseApp(),a="[DEFAULT]";class o{constructor(){this.appStore=new Map}initializeApp(w,I=a){if(typeof w>"u"&&(w=y(),w.credential=(0,m.getApplicationDefault)()),typeof I!="string"||I==="")throw new d.FirebaseAppError(d.AppErrorCodes.INVALID_APP_NAME,`Invalid Firebase app name "${I}" provided. App name must be a non-empty string.`);if(this.appStore.has(I))throw I===a?new d.FirebaseAppError(d.AppErrorCodes.DUPLICATE_APP,"The default Firebase app already exists. This means you called initializeApp() more than once without providing an app name as the second argument. In most cases you only need to call initializeApp() once. But if you do want to initialize multiple apps, pass a second argument to initializeApp() to give each app a unique name."):new d.FirebaseAppError(d.AppErrorCodes.DUPLICATE_APP,`Firebase app named "${I}" already exists. This means you called initializeApp() more than once with the same app name as the second argument. Make sure you provide a unique name every time you call initializeApp().`);const _=new c.FirebaseApp(w,I,this);return this.appStore.set(_.name,_),_}getApp(w=a){if(typeof w!="string"||w==="")throw new d.FirebaseAppError(d.AppErrorCodes.INVALID_APP_NAME,`Invalid Firebase app name "${w}" provided. App name must be a non-empty string.`);if(!this.appStore.has(w)){let I=w===a?"The default Firebase app does not exist. ":`Firebase app named "${w}" does not exist. `;throw I+="Make sure you call initializeApp() before using any of the Firebase services.",new d.FirebaseAppError(d.AppErrorCodes.NO_APP,I)}return this.appStore.get(w)}getApps(){return Array.from(this.appStore.values())}deleteApp(w){if(typeof w!="object"||w===null||!("options"in w))throw new d.FirebaseAppError(d.AppErrorCodes.INVALID_ARGUMENT,"Invalid app argument.");return h(w.name).delete()}clearAllApps(){const w=[];return this.getApps().forEach(I=>{w.push(this.deleteApp(I))}),Promise.all(w).then()}removeApp(w){this.appStore.delete(w)}}t.AppStore=o,t.defaultAppStore=new o;function s(A,w=a){return t.defaultAppStore.initializeApp(A,w)}function h(A=a){return t.defaultAppStore.getApp(A)}function v(){return t.defaultAppStore.getApps()}function E(A){return t.defaultAppStore.deleteApp(A)}t.FIREBASE_CONFIG_VAR="FIREBASE_CONFIG";function y(){const A=e[t.FIREBASE_CONFIG_VAR];if(!u.isNonEmptyString(A))return{};try{const w=A.startsWith("{")?A:r.readFileSync(A,"utf8");return JSON.parse(w)}catch(w){throw new d.FirebaseAppError(d.AppErrorCodes.INVALID_APP_OPTIONS,"Failed to parse app options file: "+w)}}}(lifecycle)),lifecycle}var credentialFactory={};/*! firebase-admin v13.4.0 */var hasRequiredCredentialFactory;function requireCredentialFactory(){if(hasRequiredCredentialFactory)return credentialFactory;hasRequiredCredentialFactory=1;/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(credentialFactory,"__esModule",{value:!0}),credentialFactory.applicationDefault=d,credentialFactory.cert=m,credentialFactory.refreshToken=c,credentialFactory.clearGlobalAppDefaultCred=a;const t=requireCredentialInternal();let e;const r={},u={};function d(o){return typeof e>"u"&&(e=(0,t.getApplicationDefault)(o)),e}function m(o,s){const h=JSON.stringify(o);return h in r||(r[h]=new t.ServiceAccountCredential(o,s)),r[h]}function c(o,s){const h=JSON.stringify(o);return h in u||(u[h]=new t.RefreshTokenCredential(o,s)),u[h]}function a(){e=void 0}return credentialFactory}var utils$2={};const version$9="13.4.0",require$$2$2={version:version$9};var hasRequiredUtils$2;function requireUtils$2(){if(hasRequiredUtils$2)return utils$2;hasRequiredUtils$2=1;var t={};/*! firebase-admin v13.4.0 *//*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(utils$2,"__esModule",{value:!0}),utils$2.getSdkVersion=d,utils$2.getMetricsHeader=m,utils$2.renameProperties=c,utils$2.addReadonlyGetter=a,utils$2.getExplicitProjectId=o,utils$2.findProjectId=s,utils$2.getExplicitServiceAccountEmail=h,utils$2.findServiceAccountEmail=v,utils$2.toWebSafeBase64=E,utils$2.formatString=y,utils$2.generateUpdateMask=A,utils$2.transformMillisecondsToSecondsString=w,utils$2.parseResourceName=I;const e=requireCredentialInternal(),r=requireValidator$1();let u;function d(){if(!u){const{version:_}=require$$2$2;u=_}return u}function m(){return`gl-node/${process.versions.node} fire-admin/${d()}`}function c(_,S){Object.keys(S).forEach(j=>{if(j in _){const K=S[j];_[K]=_[j],delete _[j]}})}function a(_,S,j){Object.defineProperty(_,S,{value:j,writable:!1,enumerable:!0})}function o(_){const S=_.options;if(r.isNonEmptyString(S.projectId))return S.projectId;const j=_.options.credential;if(j instanceof e.ServiceAccountCredential)return j.projectId;const K=t.GOOGLE_CLOUD_PROJECT||t.GCLOUD_PROJECT;return r.isNonEmptyString(K)?K:null}function s(_){const S=o(_);if(S)return Promise.resolve(S);const j=_.options.credential;return j instanceof e.ApplicationDefaultCredential?j.getProjectId():Promise.resolve(null)}function h(_){const S=_.options;if(r.isNonEmptyString(S.serviceAccountId))return S.serviceAccountId;const j=_.options.credential;return j instanceof e.ServiceAccountCredential?j.clientEmail:null}function v(_){const S=h(_);if(S)return Promise.resolve(S);const j=_.options.credential;return j instanceof e.ApplicationDefaultCredential?j.getServiceAccountEmail():Promise.resolve(null)}function E(_){return _.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")}function y(_,S){let j=_;return Object.keys(S||{}).forEach(K=>{j=j.replace(new RegExp("{"+K+"}","g"),S[K])}),j}function A(_,S=[],j=""){const K=[];if(!r.isNonNullObject(_))return K;for(const J in _)if(typeof _[J]<"u"){const H=j?`${j}.${J}`:J;if(S.indexOf(H)!==-1)K.push(J);else{const U=A(_[J],S,H);U.length>0?U.forEach(P=>{K.push(`${J}.${P}`)}):K.push(J)}}return K}function w(_){let S;const j=Math.floor(_/1e3),K=Math.floor((_-j*1e3)*1e6);if(K>0){let J=K.toString();for(;J.length<9;)J="0"+J;S=`${j}.${J}s`}else S=`${j}s`;return S}function I(_,S){if(!_.includes("/"))return{resourceId:_};const K=new RegExp(`^(projects/([^/]+)/)?locations/([^/]+)/${S}/([^/]+)$`).exec(_);if(K===null)throw new Error("Invalid resource name format.");const J=K[2],H=K[3],U=K[4];return{projectId:J,locationId:H,resourceId:U}}return utils$2}var auth$1={},authApiRequest={},apiRequest={},main$1={exports:{}},sbmh,hasRequiredSbmh;function requireSbmh(){if(hasRequiredSbmh)return sbmh;hasRequiredSbmh=1;const{EventEmitter:t}=require$$1$3,{inherits:e}=require$$1$3;function r(u){if(typeof u=="string"&&(u=Buffer.from(u)),!Buffer.isBuffer(u))throw new TypeError("The needle has to be a String or a Buffer.");const d=u.length,m=d-1;if(d===0)throw new Error("The needle cannot be an empty String/Buffer.");if(d>256)throw new Error("The needle cannot have a length bigger than 256.");this.maxMatches=1/0,this.matches=0,this._occ=new Uint8Array(256).fill(d),this._lookbehind_size=0,this._needle=u,this._bufpos=0,this._lookbehind=Buffer.alloc(m);for(var c=0;c<m;++c)this._occ[u[c]]=m-c}return e(r,t),r.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0},r.prototype.push=function(u,d){Buffer.isBuffer(u)||(u=Buffer.from(u,"binary"));const m=u.length;this._bufpos=d||0;let c;for(;c!==m&&this.matches<this.maxMatches;)c=this._sbmh_feed(u);return c},r.prototype._sbmh_feed=function(u){const d=u.length,m=this._needle,c=m.length,a=c-1,o=m[a];let s=-this._lookbehind_size,h;if(s<0){for(;s<0&&s<=d-c;){if(h=u[s+a],h===o&&this._sbmh_memcmp(u,s,a))return this._lookbehind_size=0,++this.matches,this.emit("info",!0),this._bufpos=s+c;s+=this._occ[h]}for(;s<0&&!this._sbmh_memcmp(u,s,d-s);)++s;if(s>=0)this.emit("info",!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{const v=this._lookbehind_size+s;return v>0&&this.emit("info",!1,this._lookbehind,0,v),this._lookbehind_size-=v,this._lookbehind.copy(this._lookbehind,0,v,this._lookbehind_size),u.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=d,this._bufpos=d,d}}if(s=u.indexOf(m,s+this._bufpos),s!==-1)return++this.matches,s===0?this.emit("info",!0):this.emit("info",!0,u,this._bufpos,s),this._bufpos=s+c;for(s=d-a,s<0&&(s=0);s!==d&&(u[s]!==m[0]||Buffer.compare(u.subarray(s+1,d),m.subarray(1,d-s))!==0);)++s;return s!==d&&(u.copy(this._lookbehind,0,s,d),this._lookbehind_size=d-s),s!==0&&this.emit("info",!1,u,this._bufpos,s),this._bufpos=d,d},r.prototype._sbmh_lookup_char=function(u,d){return d<0?this._lookbehind[this._lookbehind_size+d]:u[d]},r.prototype._sbmh_memcmp=function(u,d,m){for(var c=0;c<m;++c)if(this._sbmh_lookup_char(u,d+c)!==this._needle[c])return!1;return!0},sbmh=r,sbmh}var PartStream_1,hasRequiredPartStream;function requirePartStream(){if(hasRequiredPartStream)return PartStream_1;hasRequiredPartStream=1;const t=require$$1$3.inherits,e=require$$1$3.Readable;function r(u){e.call(this,u)}return t(r,e),r.prototype._read=function(u){},PartStream_1=r,PartStream_1}var getLimit,hasRequiredGetLimit;function requireGetLimit(){return hasRequiredGetLimit||(hasRequiredGetLimit=1,getLimit=function(e,r,u){if(!e||e[r]===void 0||e[r]===null)return u;if(typeof e[r]!="number"||isNaN(e[r]))throw new TypeError("Limit "+r+" is not a valid number");return e[r]}),getLimit}var HeaderParser_1,hasRequiredHeaderParser;function requireHeaderParser(){if(hasRequiredHeaderParser)return HeaderParser_1;hasRequiredHeaderParser=1;const t=require$$1$3.EventEmitter,e=require$$1$3.inherits,r=requireGetLimit(),u=requireSbmh(),d=Buffer.from(`\r
\r
`),m=/\r\n/g,c=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function a(o){t.call(this),o=o||{};const s=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=r(o,"maxHeaderPairs",2e3),this.maxHeaderSize=r(o,"maxHeaderSize",80*1024),this.buffer="",this.header={},this.finished=!1,this.ss=new u(d),this.ss.on("info",function(h,v,E,y){v&&!s.maxed&&(s.nread+y-E>=s.maxHeaderSize?(y=s.maxHeaderSize-s.nread+E,s.nread=s.maxHeaderSize,s.maxed=!0):s.nread+=y-E,s.buffer+=v.toString("binary",E,y)),h&&s._finish()})}return e(a,t),a.prototype.push=function(o){const s=this.ss.push(o);if(this.finished)return s},a.prototype.reset=function(){this.finished=!1,this.buffer="",this.header={},this.ss.reset()},a.prototype._finish=function(){this.buffer&&this._parseHeader(),this.ss.matches=this.ss.maxMatches;const o=this.header;this.header={},this.buffer="",this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit("header",o)},a.prototype._parseHeader=function(){if(this.npairs===this.maxHeaderPairs)return;const o=this.buffer.split(m),s=o.length;let h,v;for(var E=0;E<s;++E){if(o[E].length===0)continue;if((o[E][0]==="	"||o[E][0]===" ")&&v){this.header[v][this.header[v].length-1]+=o[E];continue}const y=o[E].indexOf(":");if(y===-1||y===0)return;if(h=c.exec(o[E]),v=h[1].toLowerCase(),this.header[v]=this.header[v]||[],this.header[v].push(h[2]||""),++this.npairs===this.maxHeaderPairs)break}},HeaderParser_1=a,HeaderParser_1}var Dicer_1,hasRequiredDicer;function requireDicer(){if(hasRequiredDicer)return Dicer_1;hasRequiredDicer=1;const t=require$$1$3.Writable,e=require$$1$3.inherits,r=requireSbmh(),u=requirePartStream(),d=requireHeaderParser(),m=45,c=Buffer.from("-"),a=Buffer.from(`\r
`),o=function(){};function s(h){if(!(this instanceof s))return new s(h);if(t.call(this,h),!h||!h.headerFirst&&typeof h.boundary!="string")throw new TypeError("Boundary required");typeof h.boundary=="string"?this.setBoundary(h.boundary):this._bparser=void 0,this._headerFirst=h.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:h.partHwm},this._pause=!1;const v=this;this._hparser=new d(h),this._hparser.on("header",function(E){v._inHeader=!1,v._part.emit("header",E)})}return e(s,t),s.prototype.emit=function(h){if(h==="finish"&&!this._realFinish){if(!this._finished){const v=this;process.nextTick(function(){if(v.emit("error",new Error("Unexpected end of multipart data")),v._part&&!v._ignoreData){const E=v._isPreamble?"Preamble":"Part";v._part.emit("error",new Error(E+" terminated early due to unexpected end of multipart data")),v._part.push(null),process.nextTick(function(){v._realFinish=!0,v.emit("finish"),v._realFinish=!1});return}v._realFinish=!0,v.emit("finish"),v._realFinish=!1})}}else t.prototype.emit.apply(this,arguments)},s.prototype._write=function(h,v,E){if(!this._hparser&&!this._bparser)return E();if(this._headerFirst&&this._isPreamble){this._part||(this._part=new u(this._partOpts),this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._ignore());const y=this._hparser.push(h);if(!this._inHeader&&y!==void 0&&y<h.length)h=h.slice(y);else return E()}this._firstWrite&&(this._bparser.push(a),this._firstWrite=!1),this._bparser.push(h),this._pause?this._cb=E:E()},s.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0},s.prototype.setBoundary=function(h){const v=this;this._bparser=new r(`\r
--`+h),this._bparser.on("info",function(E,y,A,w){v._oninfo(E,y,A,w)})},s.prototype._ignore=function(){this._part&&!this._ignoreData&&(this._ignoreData=!0,this._part.on("error",o),this._part.resume())},s.prototype._oninfo=function(h,v,E,y){let A;const w=this;let I=0,_,S=!0;if(!this._part&&this._justMatched&&v){for(;this._dashes<2&&E+I<y;)if(v[E+I]===m)++I,++this._dashes;else{this._dashes&&(A=c),this._dashes=0;break}if(this._dashes===2&&(E+I<y&&this.listenerCount("trailer")!==0&&this.emit("trailer",v.slice(E+I,y)),this.reset(),this._finished=!0,w._parts===0&&(w._realFinish=!0,w.emit("finish"),w._realFinish=!1)),this._dashes)return}this._justMatched&&(this._justMatched=!1),this._part||(this._part=new u(this._partOpts),this._part._read=function(j){w._unpause()},this._isPreamble&&this.listenerCount("preamble")!==0?this.emit("preamble",this._part):this._isPreamble!==!0&&this.listenerCount("part")!==0?this.emit("part",this._part):this._ignore(),this._isPreamble||(this._inHeader=!0)),v&&E<y&&!this._ignoreData&&(this._isPreamble||!this._inHeader?(A&&(S=this._part.push(A)),S=this._part.push(v.slice(E,y)),S||(this._pause=!0)):!this._isPreamble&&this._inHeader&&(A&&this._hparser.push(A),_=this._hparser.push(v.slice(E,y)),!this._inHeader&&_!==void 0&&_<y&&this._oninfo(!1,v,E+_,y))),h&&(this._hparser.reset(),this._isPreamble?this._isPreamble=!1:E!==y&&(++this._parts,this._part.on("end",function(){--w._parts===0&&(w._finished?(w._realFinish=!0,w.emit("finish"),w._realFinish=!1):w._unpause())})),this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0)},s.prototype._unpause=function(){if(this._pause&&(this._pause=!1,this._cb)){const h=this._cb;this._cb=void 0,h()}},Dicer_1=s,Dicer_1}var decodeText_1,hasRequiredDecodeText;function requireDecodeText(){if(hasRequiredDecodeText)return decodeText_1;hasRequiredDecodeText=1;const t=new TextDecoder("utf-8"),e=new Map([["utf-8",t],["utf8",t]]);function r(m){let c;for(;;)switch(m){case"utf-8":case"utf8":return u.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return u.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return u.utf16le;case"base64":return u.base64;default:if(c===void 0){c=!0,m=m.toLowerCase();continue}return u.other.bind(m)}}const u={utf8:(m,c)=>m.length===0?"":(typeof m=="string"&&(m=Buffer.from(m,c)),m.utf8Slice(0,m.length)),latin1:(m,c)=>m.length===0?"":typeof m=="string"?m:m.latin1Slice(0,m.length),utf16le:(m,c)=>m.length===0?"":(typeof m=="string"&&(m=Buffer.from(m,c)),m.ucs2Slice(0,m.length)),base64:(m,c)=>m.length===0?"":(typeof m=="string"&&(m=Buffer.from(m,c)),m.base64Slice(0,m.length)),other:(m,c)=>{if(m.length===0)return"";if(typeof m=="string"&&(m=Buffer.from(m,c)),e.has(this.toString()))try{return e.get(this).decode(m)}catch{}return typeof m=="string"?m:m.toString()}};function d(m,c,a){return m&&r(a)(m,c)}return decodeText_1=d,decodeText_1}var parseParams_1,hasRequiredParseParams;function requireParseParams(){if(hasRequiredParseParams)return parseParams_1;hasRequiredParseParams=1;const t=requireDecodeText(),e=/%[a-fA-F0-9][a-fA-F0-9]/g,r={"%00":"\0","%01":"","%02":"","%03":"","%04":"","%05":"","%06":"","%07":"\x07","%08":"\b","%09":"	","%0a":`
`,"%0A":`
`,"%0b":"\v","%0B":"\v","%0c":"\f","%0C":"\f","%0d":"\r","%0D":"\r","%0e":"","%0E":"","%0f":"","%0F":"","%10":"","%11":"","%12":"","%13":"","%14":"","%15":"","%16":"","%17":"","%18":"","%19":"","%1a":"","%1A":"","%1b":"\x1B","%1B":"\x1B","%1c":"","%1C":"","%1d":"","%1D":"","%1e":"","%1E":"","%1f":"","%1F":"","%20":" ","%21":"!","%22":'"',"%23":"#","%24":"$","%25":"%","%26":"&","%27":"'","%28":"(","%29":")","%2a":"*","%2A":"*","%2b":"+","%2B":"+","%2c":",","%2C":",","%2d":"-","%2D":"-","%2e":".","%2E":".","%2f":"/","%2F":"/","%30":"0","%31":"1","%32":"2","%33":"3","%34":"4","%35":"5","%36":"6","%37":"7","%38":"8","%39":"9","%3a":":","%3A":":","%3b":";","%3B":";","%3c":"<","%3C":"<","%3d":"=","%3D":"=","%3e":">","%3E":">","%3f":"?","%3F":"?","%40":"@","%41":"A","%42":"B","%43":"C","%44":"D","%45":"E","%46":"F","%47":"G","%48":"H","%49":"I","%4a":"J","%4A":"J","%4b":"K","%4B":"K","%4c":"L","%4C":"L","%4d":"M","%4D":"M","%4e":"N","%4E":"N","%4f":"O","%4F":"O","%50":"P","%51":"Q","%52":"R","%53":"S","%54":"T","%55":"U","%56":"V","%57":"W","%58":"X","%59":"Y","%5a":"Z","%5A":"Z","%5b":"[","%5B":"[","%5c":"\\","%5C":"\\","%5d":"]","%5D":"]","%5e":"^","%5E":"^","%5f":"_","%5F":"_","%60":"`","%61":"a","%62":"b","%63":"c","%64":"d","%65":"e","%66":"f","%67":"g","%68":"h","%69":"i","%6a":"j","%6A":"j","%6b":"k","%6B":"k","%6c":"l","%6C":"l","%6d":"m","%6D":"m","%6e":"n","%6E":"n","%6f":"o","%6F":"o","%70":"p","%71":"q","%72":"r","%73":"s","%74":"t","%75":"u","%76":"v","%77":"w","%78":"x","%79":"y","%7a":"z","%7A":"z","%7b":"{","%7B":"{","%7c":"|","%7C":"|","%7d":"}","%7D":"}","%7e":"~","%7E":"~","%7f":"","%7F":"","%80":"","%81":"","%82":"","%83":"","%84":"","%85":"","%86":"","%87":"","%88":"","%89":"","%8a":"","%8A":"","%8b":"","%8B":"","%8c":"","%8C":"","%8d":"","%8D":"","%8e":"","%8E":"","%8f":"","%8F":"","%90":"","%91":"","%92":"","%93":"","%94":"","%95":"","%96":"","%97":"","%98":"","%99":"","%9a":"","%9A":"","%9b":"","%9B":"","%9c":"","%9C":"","%9d":"","%9D":"","%9e":"","%9E":"","%9f":"","%9F":"","%a0":"","%A0":"","%a1":"","%A1":"","%a2":"","%A2":"","%a3":"","%A3":"","%a4":"","%A4":"","%a5":"","%A5":"","%a6":"","%A6":"","%a7":"","%A7":"","%a8":"","%A8":"","%a9":"","%A9":"","%aa":"","%Aa":"","%aA":"","%AA":"","%ab":"","%Ab":"","%aB":"","%AB":"","%ac":"","%Ac":"","%aC":"","%AC":"","%ad":"","%Ad":"","%aD":"","%AD":"","%ae":"","%Ae":"","%aE":"","%AE":"","%af":"","%Af":"","%aF":"","%AF":"","%b0":"","%B0":"","%b1":"","%B1":"","%b2":"","%B2":"","%b3":"","%B3":"","%b4":"","%B4":"","%b5":"","%B5":"","%b6":"","%B6":"","%b7":"","%B7":"","%b8":"","%B8":"","%b9":"","%B9":"","%ba":"","%Ba":"","%bA":"","%BA":"","%bb":"","%Bb":"","%bB":"","%BB":"","%bc":"","%Bc":"","%bC":"","%BC":"","%bd":"","%Bd":"","%bD":"","%BD":"","%be":"","%Be":"","%bE":"","%BE":"","%bf":"","%Bf":"","%bF":"","%BF":"","%c0":"","%C0":"","%c1":"","%C1":"","%c2":"","%C2":"","%c3":"","%C3":"","%c4":"","%C4":"","%c5":"","%C5":"","%c6":"","%C6":"","%c7":"","%C7":"","%c8":"","%C8":"","%c9":"","%C9":"","%ca":"","%Ca":"","%cA":"","%CA":"","%cb":"","%Cb":"","%cB":"","%CB":"","%cc":"","%Cc":"","%cC":"","%CC":"","%cd":"","%Cd":"","%cD":"","%CD":"","%ce":"","%Ce":"","%cE":"","%CE":"","%cf":"","%Cf":"","%cF":"","%CF":"","%d0":"","%D0":"","%d1":"","%D1":"","%d2":"","%D2":"","%d3":"","%D3":"","%d4":"","%D4":"","%d5":"","%D5":"","%d6":"","%D6":"","%d7":"","%D7":"","%d8":"","%D8":"","%d9":"","%D9":"","%da":"","%Da":"","%dA":"","%DA":"","%db":"","%Db":"","%dB":"","%DB":"","%dc":"","%Dc":"","%dC":"","%DC":"","%dd":"","%Dd":"","%dD":"","%DD":"","%de":"","%De":"","%dE":"","%DE":"","%df":"","%Df":"","%dF":"","%DF":"","%e0":"","%E0":"","%e1":"","%E1":"","%e2":"","%E2":"","%e3":"","%E3":"","%e4":"","%E4":"","%e5":"","%E5":"","%e6":"","%E6":"","%e7":"","%E7":"","%e8":"","%E8":"","%e9":"","%E9":"","%ea":"","%Ea":"","%eA":"","%EA":"","%eb":"","%Eb":"","%eB":"","%EB":"","%ec":"","%Ec":"","%eC":"","%EC":"","%ed":"","%Ed":"","%eD":"","%ED":"","%ee":"","%Ee":"","%eE":"","%EE":"","%ef":"","%Ef":"","%eF":"","%EF":"","%f0":"","%F0":"","%f1":"","%F1":"","%f2":"","%F2":"","%f3":"","%F3":"","%f4":"","%F4":"","%f5":"","%F5":"","%f6":"","%F6":"","%f7":"","%F7":"","%f8":"","%F8":"","%f9":"","%F9":"","%fa":"","%Fa":"","%fA":"","%FA":"","%fb":"","%Fb":"","%fB":"","%FB":"","%fc":"","%Fc":"","%fC":"","%FC":"","%fd":"","%Fd":"","%fD":"","%FD":"","%fe":"","%Fe":"","%fE":"","%FE":"","%ff":"","%Ff":"","%fF":"","%FF":""};function u(s){return r[s]}const d=0,m=1,c=2,a=3;function o(s){const h=[];let v=d,E="",y=!1,A=!1,w=0,I="";const _=s.length;for(var S=0;S<_;++S){const j=s[S];if(j==="\\"&&y)if(A)A=!1;else{A=!0;continue}else if(j==='"')if(A)A=!1;else{y?(y=!1,v=d):y=!0;continue}else if(A&&y&&(I+="\\"),A=!1,(v===c||v===a)&&j==="'"){v===c?(v=a,E=I.substring(1)):v=m,I="";continue}else if(v===d&&(j==="*"||j==="=")&&h.length){v=j==="*"?c:m,h[w]=[I,void 0],I="";continue}else if(!y&&j===";"){v=d,E?(I.length&&(I=t(I.replace(e,u),"binary",E)),E=""):I.length&&(I=t(I,"binary","utf8")),h[w]===void 0?h[w]=I:h[w][1]=I,I="",++w;continue}else if(!y&&(j===" "||j==="	"))continue;I+=j}return E&&I.length?I=t(I.replace(e,u),"binary",E):I&&(I=t(I,"binary","utf8")),h[w]===void 0?I&&(h[w]=I):h[w][1]=I,h}return parseParams_1=o,parseParams_1}var basename,hasRequiredBasename;function requireBasename(){return hasRequiredBasename||(hasRequiredBasename=1,basename=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;--r)switch(e.charCodeAt(r)){case 47:case 92:return e=e.slice(r+1),e===".."||e==="."?"":e}return e===".."||e==="."?"":e}),basename}var multipart,hasRequiredMultipart;function requireMultipart(){if(hasRequiredMultipart)return multipart;hasRequiredMultipart=1;const{Readable:t}=require$$1$3,{inherits:e}=require$$1$3,r=requireDicer(),u=requireParseParams(),d=requireDecodeText(),m=requireBasename(),c=requireGetLimit(),a=/^boundary$/i,o=/^form-data$/i,s=/^charset$/i,h=/^filename$/i,v=/^name$/i;E.detect=/^multipart\/form-data/i;function E(w,I){let _,S;const j=this;let K;const J=I.limits,H=I.isPartAFile||((Le,Be,$e)=>Be==="application/octet-stream"||$e!==void 0),U=I.parsedConType||[],P=I.defCharset||"utf8",Z=I.preservePath,ie={highWaterMark:I.fileHwm};for(_=0,S=U.length;_<S;++_)if(Array.isArray(U[_])&&a.test(U[_][0])){K=U[_][1];break}function ue(){Ce===0&&Ve&&!w._done&&(Ve=!1,j.end())}if(typeof K!="string")throw new Error("Multipart: Boundary not found");const le=c(J,"fieldSize",1*1024*1024),ne=c(J,"fileSize",1/0),ye=c(J,"files",1/0),fe=c(J,"fields",1/0),Te=c(J,"parts",1/0),Ae=c(J,"headerPairs",2e3),Se=c(J,"headerSize",80*1024);let be=0,we=0,Ce=0,je,Fe,Ve=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=w;const Ge={boundary:K,maxHeaderPairs:Ae,maxHeaderSize:Se,partHwm:ie.highWaterMark,highWaterMark:I.highWaterMark};this.parser=new r(Ge),this.parser.on("drain",function(){if(j._needDrain=!1,j._cb&&!j._pause){const Le=j._cb;j._cb=void 0,Le()}}).on("part",function Le(Be){if(++j._nparts>Te)return j.parser.removeListener("part",Le),j.parser.on("part",y),w.hitPartsLimit=!0,w.emit("partsLimit"),y(Be);if(Fe){const $e=Fe;$e.emit("end"),$e.removeAllListeners("end")}Be.on("header",function($e){let he,p,V,R,ce,Re,ke=0;if($e["content-type"]&&(V=u($e["content-type"][0]),V[0])){for(he=V[0].toLowerCase(),_=0,S=V.length;_<S;++_)if(s.test(V[_][0])){R=V[_][1].toLowerCase();break}}if(he===void 0&&(he="text/plain"),R===void 0&&(R=P),$e["content-disposition"]){if(V=u($e["content-disposition"][0]),!o.test(V[0]))return y(Be);for(_=0,S=V.length;_<S;++_)v.test(V[_][0])?p=V[_][1]:h.test(V[_][0])&&(Re=V[_][1],Z||(Re=m(Re)))}else return y(Be);$e["content-transfer-encoding"]?ce=$e["content-transfer-encoding"][0].toLowerCase():ce="7bit";let qe,g;if(H(p,he,Re)){if(be===ye)return w.hitFilesLimit||(w.hitFilesLimit=!0,w.emit("filesLimit")),y(Be);if(++be,w.listenerCount("file")===0){j.parser._ignore();return}++Ce;const ee=new A(ie);je=ee,ee.on("end",function(){if(--Ce,j._pause=!1,ue(),j._cb&&!j._needDrain){const ae=j._cb;j._cb=void 0,ae()}}),ee._read=function(ae){if(j._pause&&(j._pause=!1,j._cb&&!j._needDrain)){const l=j._cb;j._cb=void 0,l()}},w.emit("file",p,ee,Re,ce,he),qe=function(ae){if((ke+=ae.length)>ne){const l=ne-ke+ae.length;l>0&&ee.push(ae.slice(0,l)),ee.truncated=!0,ee.bytesRead=ne,Be.removeAllListeners("data"),ee.emit("limit");return}else ee.push(ae)||(j._pause=!0);ee.bytesRead=ke},g=function(){je=void 0,ee.push(null)}}else{if(we===fe)return w.hitFieldsLimit||(w.hitFieldsLimit=!0,w.emit("fieldsLimit")),y(Be);++we,++Ce;let ee="",ae=!1;Fe=Be,qe=function(l){if((ke+=l.length)>le){const X=le-(ke-l.length);ee+=l.toString("binary",0,X),ae=!0,Be.removeAllListeners("data")}else ee+=l.toString("binary")},g=function(){Fe=void 0,ee.length&&(ee=d(ee,"binary",R)),w.emit("field",p,ee,!1,ae,ce,he),--Ce,ue()}}Be._readableState.sync=!1,Be.on("data",qe),Be.on("end",g)}).on("error",function($e){je&&je.emit("error",$e)})}).on("error",function(Le){w.emit("error",Le)}).on("finish",function(){Ve=!0,ue()})}E.prototype.write=function(w,I){const _=this.parser.write(w);_&&!this._pause?I():(this._needDrain=!_,this._cb=I)},E.prototype.end=function(){const w=this;w.parser.writable?w.parser.end():w._boy._done||process.nextTick(function(){w._boy._done=!0,w._boy.emit("finish")})};function y(w){w.resume()}function A(w){t.call(this,w),this.bytesRead=0,this.truncated=!1}return e(A,t),A.prototype._read=function(w){},multipart=E,multipart}var Decoder_1,hasRequiredDecoder$1;function requireDecoder$1(){if(hasRequiredDecoder$1)return Decoder_1;hasRequiredDecoder$1=1;const t=/\+/g,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function r(){this.buffer=void 0}return r.prototype.write=function(u){u=u.replace(t," ");let d="",m=0,c=0;const a=u.length;for(;m<a;++m)this.buffer!==void 0?e[u.charCodeAt(m)]?(this.buffer+=u[m],++c,this.buffer.length===2&&(d+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0)):(d+="%"+this.buffer,this.buffer=void 0,--m):u[m]==="%"&&(m>c&&(d+=u.substring(c,m),c=m),this.buffer="",++c);return c<a&&this.buffer===void 0&&(d+=u.substring(c)),d},r.prototype.reset=function(){this.buffer=void 0},Decoder_1=r,Decoder_1}var urlencoded,hasRequiredUrlencoded;function requireUrlencoded(){if(hasRequiredUrlencoded)return urlencoded;hasRequiredUrlencoded=1;const t=requireDecoder$1(),e=requireDecodeText(),r=requireGetLimit(),u=/^charset$/i;d.detect=/^application\/x-www-form-urlencoded/i;function d(m,c){const a=c.limits,o=c.parsedConType;this.boy=m,this.fieldSizeLimit=r(a,"fieldSize",1*1024*1024),this.fieldNameSizeLimit=r(a,"fieldNameSize",100),this.fieldsLimit=r(a,"fields",1/0);let s;for(var h=0,v=o.length;h<v;++h)if(Array.isArray(o[h])&&u.test(o[h][0])){s=o[h][1].toLowerCase();break}s===void 0&&(s=c.defCharset||"utf8"),this.decoder=new t,this.charset=s,this._fields=0,this._state="key",this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}return d.prototype.write=function(m,c){if(this._fields===this.fieldsLimit)return this.boy.hitFieldsLimit||(this.boy.hitFieldsLimit=!0,this.boy.emit("fieldsLimit")),c();let a,o,s,h=0;const v=m.length;for(;h<v;)if(this._state==="key"){for(a=o=void 0,s=h;s<v;++s){if(this._checkingBytes||++h,m[s]===61){a=s;break}else if(m[s]===38){o=s;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesKey}if(a!==void 0)a>h&&(this._key+=this.decoder.write(m.toString("binary",h,a))),this._state="val",this._hitLimit=!1,this._checkingBytes=!0,this._val="",this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),h=a+1;else if(o!==void 0){++this._fields;let E;const y=this._keyTrunc;if(o>h?E=this._key+=this.decoder.write(m.toString("binary",h,o)):E=this._key,this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),E.length&&this.boy.emit("field",e(E,"binary",this.charset),"",y,!1),h=o+1,this._fields===this.fieldsLimit)return c()}else this._hitLimit?(s>h&&(this._key+=this.decoder.write(m.toString("binary",h,s))),h=s,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit&&(this._checkingBytes=!1,this._keyTrunc=!0)):(h<v&&(this._key+=this.decoder.write(m.toString("binary",h))),h=v)}else{for(o=void 0,s=h;s<v;++s){if(this._checkingBytes||++h,m[s]===38){o=s;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesVal}if(o!==void 0){if(++this._fields,o>h&&(this._val+=this.decoder.write(m.toString("binary",h,o))),this.boy.emit("field",e(this._key,"binary",this.charset),e(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this._state="key",this._hitLimit=!1,this._checkingBytes=!0,this._key="",this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),h=o+1,this._fields===this.fieldsLimit)return c()}else this._hitLimit?(s>h&&(this._val+=this.decoder.write(m.toString("binary",h,s))),h=s,(this._val===""&&this.fieldSizeLimit===0||(this._bytesVal=this._val.length)===this.fieldSizeLimit)&&(this._checkingBytes=!1,this._valTrunc=!0)):(h<v&&(this._val+=this.decoder.write(m.toString("binary",h))),h=v)}c()},d.prototype.end=function(){this.boy._done||(this._state==="key"&&this._key.length>0?this.boy.emit("field",e(this._key,"binary",this.charset),"",this._keyTrunc,!1):this._state==="val"&&this.boy.emit("field",e(this._key,"binary",this.charset),e(this._val,"binary",this.charset),this._keyTrunc,this._valTrunc),this.boy._done=!0,this.boy.emit("finish"))},urlencoded=d,urlencoded}var hasRequiredMain;function requireMain(){if(hasRequiredMain)return main$1.exports;hasRequiredMain=1;const t=require$$1$3.Writable,{inherits:e}=require$$1$3,r=requireDicer(),u=requireMultipart(),d=requireUrlencoded(),m=requireParseParams();function c(a){if(!(this instanceof c))return new c(a);if(typeof a!="object")throw new TypeError("Busboy expected an options-Object.");if(typeof a.headers!="object")throw new TypeError("Busboy expected an options-Object with headers-attribute.");if(typeof a.headers["content-type"]!="string")throw new TypeError("Missing Content-Type-header.");const{headers:o,...s}=a;this.opts={autoDestroy:!1,...s},t.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(o),this._finished=!1}return e(c,t),c.prototype.emit=function(a){if(a==="finish"){if(this._done){if(this._finished)return}else{this._parser?.end();return}this._finished=!0}t.prototype.emit.apply(this,arguments)},c.prototype.getParserByHeaders=function(a){const o=m(a["content-type"]),s={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:a,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:o,preservePath:this.opts.preservePath};if(u.detect.test(o[0]))return new u(this,s);if(d.detect.test(o[0]))return new d(this,s);throw new Error("Unsupported Content-Type.")},c.prototype._write=function(a,o,s){this._parser.write(a,s)},main$1.exports=c,main$1.exports.default=c,main$1.exports.Busboy=c,main$1.exports.Dicer=r,main$1.exports}var hasRequiredApiRequest;function requireApiRequest(){if(hasRequiredApiRequest)return apiRequest;hasRequiredApiRequest=1;var t={};/*! firebase-admin v13.4.0 *//*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(apiRequest,"__esModule",{value:!0}),apiRequest.Http2SessionHandler=apiRequest.ExponentialBackoffPoller=apiRequest.ApiSettings=apiRequest.AuthorizedHttp2Client=apiRequest.AuthorizedHttpClient=apiRequest.Http2Client=apiRequest.HttpClient=apiRequest.RequestClient=apiRequest.RequestResponseError=void 0,apiRequest.defaultRetryConfig=y,apiRequest.parseHttpResponse=S;const e=requireError(),r=requireValidator$1(),u=require$$1$3,d=require$$1$3,m=require$$1$3,c=require$$1$3,a=require$$1$3,o=requireCredentialInternal(),s=requireUtils$2();class h{constructor(fe){this.status=fe.status,this.headers=fe.headers,this.text=fe.data;try{if(!fe.data)throw new e.FirebaseAppError(e.AppErrorCodes.INTERNAL_ERROR,"HTTP response missing data.");this.parsedData=JSON.parse(fe.data)}catch(Te){this.parsedData=void 0,this.parseError=Te}this.request=`${fe.config.method} ${fe.config.url}`}get data(){if(this.isJson())return this.parsedData;throw new e.FirebaseAppError(e.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,`Error while parsing response data: "${this.parseError.toString()}". Raw server response: "${this.text}". Status code: "${this.status}". Outgoing request: "${this.request}."`)}isJson(){return typeof this.parsedData<"u"}}class v{constructor(fe){this.status=fe.status,this.headers=fe.headers,this.multipart=fe.multipart}get text(){throw new e.FirebaseAppError(e.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,"Unable to parse multipart payload as text")}get data(){throw new e.FirebaseAppError(e.AppErrorCodes.UNABLE_TO_PARSE_RESPONSE,"Unable to parse multipart payload as JSON")}isJson(){return!1}}class E extends Error{constructor(fe){super(`Server responded with status ${fe.status}.`),this.response=fe,Object.setPrototypeOf(this,E.prototype)}}apiRequest.RequestResponseError=E;function y(){return{maxRetries:4,statusCodes:[503],ioErrorCodes:["ECONNRESET","ETIMEDOUT"],backOffFactor:.5,maxDelayInMillis:60*1e3}}function A(ye){if(!r.isNumber(ye.maxRetries)||ye.maxRetries<0)throw new e.FirebaseAppError(e.AppErrorCodes.INVALID_ARGUMENT,"maxRetries must be a non-negative integer");if(typeof ye.backOffFactor<"u"&&(!r.isNumber(ye.backOffFactor)||ye.backOffFactor<0))throw new e.FirebaseAppError(e.AppErrorCodes.INVALID_ARGUMENT,"backOffFactor must be a non-negative number");if(!r.isNumber(ye.maxDelayInMillis)||ye.maxDelayInMillis<0)throw new e.FirebaseAppError(e.AppErrorCodes.INVALID_ARGUMENT,"maxDelayInMillis must be a non-negative integer");if(typeof ye.statusCodes<"u"&&!r.isArray(ye.statusCodes))throw new e.FirebaseAppError(e.AppErrorCodes.INVALID_ARGUMENT,"statusCodes must be an array");if(typeof ye.ioErrorCodes<"u"&&!r.isArray(ye.ioErrorCodes))throw new e.FirebaseAppError(e.AppErrorCodes.INVALID_ARGUMENT,"ioErrorCodes must be an array")}class w{constructor(fe=y()){fe&&(this.retry=fe,A(this.retry))}createRequestResponse(fe){return fe.multipart?new v(fe):new h(fe)}waitForRetry(fe){return fe>0?new Promise(Te=>{setTimeout(Te,fe)}):Promise.resolve()}getRetryDelayMillis(fe,Te){if(!this.isRetryEligible(fe,Te))return[0,!1];const Ae=Te.response;if(Ae&&Ae.headers["retry-after"]){const Se=this.parseRetryAfterIntoMillis(Ae.headers["retry-after"]);if(Se>0)return[Se,!0]}return[this.backOffDelayMillis(fe),!0]}isRetryEligible(fe,Te){return!this.retry||fe>=this.retry.maxRetries?!1:Te.response?(this.retry.statusCodes||[]).indexOf(Te.response.status)!==-1:Te.code?(this.retry.ioErrorCodes||[]).indexOf(Te.code)!==-1:!1}parseRetryAfterIntoMillis(fe){const Te=parseInt(fe,10);if(!isNaN(Te))return Te*1e3;const Ae=new Date(fe);return isNaN(Ae.getTime())?-1:Ae.getTime()-Date.now()}backOffDelayMillis(fe){if(fe===0)return 0;if(!this.retry)throw new e.FirebaseAppError(e.AppErrorCodes.INTERNAL_ERROR,"Expected this.retry to exist.");const Te=this.retry.backOffFactor||0,Ae=2**fe*Te;return Math.min(Ae*1e3,this.retry.maxDelayInMillis)}}apiRequest.RequestClient=w;class I extends w{constructor(fe){super(fe)}send(fe){return this.sendWithRetry(fe)}sendWithRetry(fe,Te=0){return K.invoke(fe).then(Ae=>this.createRequestResponse(Ae)).catch(Ae=>{const[Se,be]=this.getRetryDelayMillis(Te,Ae);if(be&&this.retry&&Se<=this.retry.maxDelayInMillis)return this.waitForRetry(Se).then(()=>this.sendWithRetry(fe,Te+1));throw Ae.response?new E(this.createRequestResponse(Ae.response)):Ae.code==="ETIMEDOUT"?new e.FirebaseAppError(e.AppErrorCodes.NETWORK_TIMEOUT,`Error while making request: ${Ae.message}.`):new e.FirebaseAppError(e.AppErrorCodes.NETWORK_ERROR,`Error while making request: ${Ae.message}. Error code: ${Ae.code}`)})}}apiRequest.HttpClient=I;class _ extends w{constructor(fe=y()){super(fe)}send(fe){return this.sendWithRetry(fe)}sendWithRetry(fe,Te=0){return J.invoke(fe).then(Ae=>this.createRequestResponse(Ae)).catch(Ae=>{const[Se,be]=this.getRetryDelayMillis(Te,Ae);if(be&&this.retry&&Se<=this.retry.maxDelayInMillis)return this.waitForRetry(Se).then(()=>this.sendWithRetry(fe,Te+1));throw Ae.response?new E(this.createRequestResponse(Ae.response)):Ae.code==="ETIMEDOUT"?new e.FirebaseAppError(e.AppErrorCodes.NETWORK_TIMEOUT,`Error while making request: ${Ae.message}.`):new e.FirebaseAppError(e.AppErrorCodes.NETWORK_ERROR,`Error while making request: ${Ae.message}. Error code: ${Ae.code}`)})}}apiRequest.Http2Client=_;function S(ye,fe){const Te=r.isBuffer(ye)?ye.toString("utf-8"):ye,Ae=Te.indexOf(`\r
\r
`),Se=Te.substring(0,Ae).split(`\r
`),we=Se[0].trim().split(/\s/)[1],Ce={};Se.slice(1).forEach(Ve=>{const Ge=Ve.indexOf(":"),Le=Ve.substring(0,Ge).trim().toLowerCase(),Be=Ve.substring(Ge+1).trim();Ce[Le]=Be});let je=Te.substring(Ae+4);je.endsWith(`
`)&&(je=je.slice(0,-1)),je.endsWith("\r")&&(je=je.slice(0,-1));const Fe={status:parseInt(we,10),headers:Ce,data:je,config:fe,request:null};if(!r.isNumber(Fe.status))throw new e.FirebaseAppError(e.AppErrorCodes.INTERNAL_ERROR,"Malformed HTTP status line.");return new h(Fe)}class j{constructor(fe){this.configImpl=fe}getMultipartBoundary(fe){const Te=fe["content-type"];if(!Te||!Te.startsWith("multipart/"))return null;const Ae=Te.split(";"),Se={};return Ae.slice(1).map(we=>we.trim().split("=")).reduce((we,Ce)=>{if(Ce.length===2){const je={};return je[Ce[0]]=Ce[1],Object.assign(we,je)}return we},Se).boundary}handleMultipartResponse(fe,Te,Ae){const Se=requireMain(),be=new Se.Dicer({boundary:Ae}),we=[];be.on("part",Ce=>{const je=[];Ce.on("data",Fe=>{je.push(Fe)}),Ce.on("end",()=>{we.push(Buffer.concat(je))})}),be.on("finish",()=>{fe.data=void 0,fe.multipart=we,this.finalizeResponse(fe)}),Te.pipe(be)}handleRegularResponse(fe,Te){const Ae=[];Te.on("data",Se=>{Ae.push(Se)}),Te.on("error",Se=>{const be=fe.request;be&&be.destroyed||this.enhanceAndReject(Se,null,be)}),Te.on("end",()=>{fe.data=Buffer.concat(Ae).toString(),this.finalizeResponse(fe)})}finalizeResponse(fe){fe.status>=200&&fe.status<300?this.resolve(fe):this.rejectWithError("Request failed with status code "+fe.status,null,fe.request,fe)}rejectWithError(fe,Te,Ae,Se){const be=new Error(fe);this.enhanceAndReject(be,Te,Ae,Se)}enhanceAndReject(fe,Te,Ae,Se){this.reject(this.enhanceError(fe,Te,Ae,Se))}enhanceError(fe,Te,Ae,Se){return fe.config=this.configImpl,Te&&(fe.code=Te),fe.request=Ae,fe.response=Se,fe}}class K extends j{static invoke(fe){return new K(fe).promise}constructor(fe){const Te=new U(fe);super(Te);try{this.httpConfigImpl=Te,this.options=this.httpConfigImpl.buildRequestOptions(),this.entity=this.httpConfigImpl.buildEntity(this.options.headers),this.promise=new Promise((Ae,Se)=>{this.resolve=Ae,this.reject=Se,this.execute()})}catch(Ae){this.promise=Promise.reject(this.enhanceError(Ae,null))}}execute(){const Te=(this.options.protocol==="https:"?d:u).request(this.options,be=>{this.handleResponse(be,Te)});Te.on("error",be=>{Te.aborted||this.enhanceAndReject(be,null,Te)});const Ae=this.httpConfigImpl.timeout,Se=()=>{Te.destroy(),this.rejectWithError(`timeout of ${Ae}ms exceeded`,"ETIMEDOUT",Te)};Ae&&Te.setTimeout(Ae,Se),Te.end(this.entity)}handleResponse(fe,Te){if(Te.aborted)return;if(!fe.statusCode)throw new e.FirebaseAppError(e.AppErrorCodes.INTERNAL_ERROR,"Expected a statusCode on the response from a ClientRequest");const Ae={status:fe.statusCode,headers:fe.headers,request:Te,data:void 0,config:this.httpConfigImpl},Se=this.getMultipartBoundary(fe.headers),be=this.uncompressResponse(fe);Se?this.handleMultipartResponse(Ae,be,Se):this.handleRegularResponse(Ae,be)}uncompressResponse(fe){let Te=fe;const Ae=["gzip","compress","deflate"];if(fe.headers["content-encoding"]&&Ae.indexOf(fe.headers["content-encoding"])!==-1){const Se=require$$1$3;Te=Te.pipe(Se.createUnzip()),delete fe.headers["content-encoding"]}return Te}}class J extends j{static invoke(fe){return new J(fe).promise}constructor(fe){const Te=new P(fe);super(Te);try{this.http2ConfigImpl=Te,this.options=this.http2ConfigImpl.buildRequestOptions(),this.entity=this.http2ConfigImpl.buildEntity(this.options.headers),this.promise=new Promise((Ae,Se)=>{this.resolve=Ae,this.reject=Se,this.execute()})}catch(Ae){this.promise=Promise.reject(this.enhanceError(Ae,null))}}execute(){const fe=this.http2ConfigImpl.http2SessionHandler.session.request({":method":this.options.method,":scheme":this.options.protocol,":path":this.options.path,...this.options.headers});fe.on("response",Se=>{this.handleHttp2Response(Se,fe)}),fe.on("error",Se=>{fe.aborted||this.enhanceAndReject(Se,null,fe)});const Te=this.http2ConfigImpl.timeout,Ae=()=>{fe.destroy(),this.rejectWithError(`timeout of ${Te}ms exceeded`,"ETIMEDOUT",fe)};Te&&fe.setTimeout(Te,Ae),fe.end(this.entity)}handleHttp2Response(fe,Te){if(Te.aborted)return;if(!fe[":status"])throw new e.FirebaseAppError(e.AppErrorCodes.INTERNAL_ERROR,"Expected a statusCode on the response from a ClientRequest");const Ae={status:fe[":status"],headers:fe,request:Te,data:void 0,config:this.http2ConfigImpl},Se=this.getMultipartBoundary(fe),be=this.uncompressResponse(fe,Te);Se?this.handleMultipartResponse(Ae,be,Se):this.handleRegularResponse(Ae,be)}uncompressResponse(fe,Te){let Ae=Te;const Se=["gzip","compress","deflate"];if(fe["content-encoding"]&&Se.indexOf(fe["content-encoding"])!==-1){const be=require$$1$3;Ae=Ae.pipe(be.createUnzip()),delete fe["content-encoding"]}return Ae}}class H{constructor(fe){this.config=fe,this.config=fe}get method(){return this.config.method}get url(){return this.config.url}get headers(){return this.config.headers}get data(){return this.config.data}get timeout(){return this.config.timeout}buildEntity(fe){let Te;if(!this.hasEntity()||!this.isEntityEnclosingRequest())return Te;if(r.isBuffer(this.data))Te=this.data;else if(r.isObject(this.data))Te=Buffer.from(JSON.stringify(this.data),"utf-8"),typeof fe["content-type"]>"u"&&(fe["content-type"]="application/json;charset=utf-8");else if(r.isString(this.data))Te=Buffer.from(this.data,"utf-8");else throw new Error("Request data must be a string, a Buffer or a json serializable object");return fe["Content-Length"]=Te.length.toString(),Te}buildUrl(){const fe=this.urlWithProtocol();if(!this.hasEntity()||this.isEntityEnclosingRequest())return c.parse(fe);if(!r.isObject(this.data))throw new Error(`${this.method} requests cannot have a body`);const Te=new c.URL(fe),Ae=this.data;for(const Se in Ae)Object.prototype.hasOwnProperty.call(Ae,Se)&&Te.searchParams.append(Se,Ae[Se]);return c.parse(Te.toString())}urlWithProtocol(){const fe=this.url;return fe.startsWith("http://")||fe.startsWith("https://")?fe:`https://${fe}`}hasEntity(){return!!this.data}isEntityEnclosingRequest(){return this.method!=="GET"&&this.method!=="HEAD"}}class U extends H{constructor(fe){super(fe),this.httpConfig=fe}get httpAgent(){return this.httpConfig.httpAgent}buildRequestOptions(){const fe=this.buildUrl(),Te=fe.protocol;let Ae=fe.port;return Ae||(Ae=Te==="https:"?"443":"80"),{protocol:Te,hostname:fe.hostname,port:Ae,path:fe.path,method:this.method,agent:this.httpAgent,headers:Object.assign({},this.headers)}}}class P extends H{constructor(fe){super(fe),this.http2Config=fe}get http2SessionHandler(){return this.http2Config.http2SessionHandler}buildRequestOptions(){const fe=this.buildUrl();return{protocol:fe.protocol,path:fe.path,method:this.method,headers:Object.assign({},this.headers)}}}class Z extends I{constructor(fe){super(),this.app=fe}send(fe){return this.getToken().then(Te=>{const Ae=Object.assign({},fe);Ae.headers=Object.assign({},fe.headers);const Se="Authorization";Ae.headers[Se]=`Bearer ${Te}`;let be;return this.app.options.credential instanceof o.ApplicationDefaultCredential&&(be=this.app.options.credential.getQuotaProjectId()),be=t.GOOGLE_CLOUD_QUOTA_PROJECT||be,!Ae.headers["x-goog-user-project"]&&r.isNonEmptyString(be)&&(Ae.headers["x-goog-user-project"]=be),!Ae.httpAgent&&this.app.options.httpAgent&&(Ae.httpAgent=this.app.options.httpAgent),Ae.headers["X-Goog-Api-Client"]=(0,s.getMetricsHeader)(),super.send(Ae)})}getToken(){return this.app.INTERNAL.getToken().then(fe=>fe.accessToken)}}apiRequest.AuthorizedHttpClient=Z;class ie extends _{constructor(fe){super(),this.app=fe}send(fe){return this.getToken().then(Te=>{const Ae=Object.assign({},fe);Ae.headers=Object.assign({},fe.headers);const Se="Authorization";Ae.headers[Se]=`Bearer ${Te}`;let be;return this.app.options.credential instanceof o.ApplicationDefaultCredential&&(be=this.app.options.credential.getQuotaProjectId()),be=t.GOOGLE_CLOUD_QUOTA_PROJECT||be,!Ae.headers["x-goog-user-project"]&&r.isNonEmptyString(be)&&(Ae.headers["x-goog-user-project"]=be),Ae.headers["X-Goog-Api-Client"]=(0,s.getMetricsHeader)(),super.send(Ae)})}getToken(){return this.app.INTERNAL.getToken().then(fe=>fe.accessToken)}}apiRequest.AuthorizedHttp2Client=ie;class ue{constructor(fe,Te="POST"){this.endpoint=fe,this.httpMethod=Te,this.setRequestValidator(null).setResponseValidator(null)}getEndpoint(){return this.endpoint}getHttpMethod(){return this.httpMethod}setRequestValidator(fe){const Te=()=>{};return this.requestValidator=fe||Te,this}getRequestValidator(){return this.requestValidator}setResponseValidator(fe){const Te=()=>{};return this.responseValidator=fe||Te,this}getResponseValidator(){return this.responseValidator}}apiRequest.ApiSettings=ue;class le extends a.EventEmitter{constructor(fe=1e3,Te=1e4,Ae=6e4){super(),this.initialPollingDelayMillis=fe,this.maxPollingDelayMillis=Te,this.masterTimeoutMillis=Ae,this.numTries=0,this.completed=!1}poll(fe){if(this.pollCallback)throw new Error("poll() can only be called once per instance of ExponentialBackoffPoller");return this.pollCallback=fe,this.on("poll",this.repoll),this.masterTimer=setTimeout(()=>{this.completed||(this.markCompleted(),this.reject(new Error("ExponentialBackoffPoller deadline exceeded - Master timeout reached")))},this.masterTimeoutMillis),new Promise((Te,Ae)=>{this.resolve=Te,this.reject=Ae,this.repoll()})}repoll(){this.pollCallback().then(fe=>{if(!this.completed){if(!fe){this.repollTimer=setTimeout(()=>this.emit("poll"),this.getPollingDelayMillis()),this.numTries++;return}this.markCompleted(),this.resolve(fe)}}).catch(fe=>{this.completed||(this.markCompleted(),this.reject(fe))})}getPollingDelayMillis(){const fe=Math.pow(2,this.numTries)*this.initialPollingDelayMillis;return Math.min(fe,this.maxPollingDelayMillis)}markCompleted(){this.completed=!0,this.masterTimer&&clearTimeout(this.masterTimer),this.repollTimer&&clearTimeout(this.repollTimer)}}apiRequest.ExponentialBackoffPoller=le;class ne{constructor(fe){this.promise=new Promise((Te,Ae)=>{this.resolve=Te,this.reject=Ae,this.http2Session=this.createSession(fe)})}createSession(fe){if(!this.http2Session||this.isClosed){const Te={peerMaxConcurrentStreams:100,ALPNProtocols:["h2"]},Ae=m.connect(fe,Te);return Ae.on("goaway",(Se,be,we)=>{this.reject(new e.FirebaseAppError(e.AppErrorCodes.NETWORK_ERROR,`Error while making requests: GOAWAY - ${we?.toString()}, Error code: ${Se}`))}),Ae.on("error",Se=>{let be;Se.name=="AggregateError"&&Se.errors?be=`Session error while making requests: ${Se.code} - ${Se.name}: [${Se.errors.map(we=>we.message).join(", ")}]`:be=`Session error while making requests: ${Se.code} - ${Se.message} `,this.reject(new e.FirebaseAppError(e.AppErrorCodes.NETWORK_ERROR,be))}),Ae.on("close",()=>{this.resolve()}),Ae}return this.http2Session}invoke(){return this.promise}get session(){return this.http2Session}get isClosed(){return this.http2Session.closed}close(){this.http2Session.close()}}return apiRequest.Http2SessionHandler=ne,apiRequest}var userImportBuilder={};/*! firebase-admin v13.4.0 */var hasRequiredUserImportBuilder;function requireUserImportBuilder(){if(hasRequiredUserImportBuilder)return userImportBuilder;hasRequiredUserImportBuilder=1;/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(userImportBuilder,"__esModule",{value:!0}),userImportBuilder.UserImportBuilder=void 0,userImportBuilder.convertMultiFactorInfoToServerFormat=d;const t=requireDeepCopy(),e=requireUtils$2(),r=requireValidator$1(),u=requireError();function d(s){let h;if(typeof s.enrollmentTime<"u")if(r.isUTCDateString(s.enrollmentTime))h=new Date(s.enrollmentTime).toISOString();else throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ENROLLMENT_TIME,`The second factor "enrollmentTime" for "${s.uid}" must be a valid UTC date string.`);if(m(s)){const v={mfaEnrollmentId:s.uid,displayName:s.displayName,phoneInfo:s.phoneNumber,enrolledAt:h};for(const E in v)typeof v[E]>"u"&&delete v[E];return v}else throw new u.FirebaseAuthError(u.AuthClientErrorCode.UNSUPPORTED_SECOND_FACTOR,`Unsupported second factor "${JSON.stringify(s)}" provided.`)}function m(s){return s.factorId==="phone"}function c(s,h){return typeof s[h]<"u"&&s[h]!==null?parseInt(s[h].toString(),10):NaN}function a(s,h){const v={localId:s.uid,email:s.email,emailVerified:s.emailVerified,displayName:s.displayName,disabled:s.disabled,photoUrl:s.photoURL,phoneNumber:s.phoneNumber,providerUserInfo:[],mfaInfo:[],tenantId:s.tenantId,customAttributes:s.customClaims&&JSON.stringify(s.customClaims)};if(typeof s.passwordHash<"u"){if(!r.isBuffer(s.passwordHash))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_PASSWORD_HASH);v.passwordHash=e.toWebSafeBase64(s.passwordHash)}if(typeof s.passwordSalt<"u"){if(!r.isBuffer(s.passwordSalt))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_PASSWORD_SALT);v.salt=e.toWebSafeBase64(s.passwordSalt)}r.isNonNullObject(s.metadata)&&(r.isNonEmptyString(s.metadata.creationTime)&&(v.createdAt=new Date(s.metadata.creationTime).getTime()),r.isNonEmptyString(s.metadata.lastSignInTime)&&(v.lastLoginAt=new Date(s.metadata.lastSignInTime).getTime())),r.isArray(s.providerData)&&s.providerData.forEach(y=>{v.providerUserInfo.push({providerId:y.providerId,rawId:y.uid,email:y.email,displayName:y.displayName,photoUrl:y.photoURL})}),r.isNonNullObject(s.multiFactor)&&r.isNonEmptyArray(s.multiFactor.enrolledFactors)&&s.multiFactor.enrolledFactors.forEach(y=>{v.mfaInfo.push(d(y))});let E;for(E in v)typeof v[E]>"u"&&delete v[E];return v.providerUserInfo.length===0&&delete v.providerUserInfo,v.mfaInfo.length===0&&delete v.mfaInfo,typeof h=="function"&&h(v),v}class o{constructor(h,v,E){this.requiresHashOptions=!1,this.validatedUsers=[],this.userImportResultErrors=[],this.indexMap={},this.validatedUsers=this.populateUsers(h,E),this.validatedOptions=this.populateOptions(v,this.requiresHashOptions)}buildRequest(){const h=this.validatedUsers.map(v=>(0,t.deepCopy)(v));return(0,t.deepExtend)({users:h},(0,t.deepCopy)(this.validatedOptions))}buildResponse(h){const v={successCount:this.validatedUsers.length,failureCount:this.userImportResultErrors.length,errors:(0,t.deepCopy)(this.userImportResultErrors)};return v.failureCount+=h.length,v.successCount-=h.length,h.forEach(E=>{v.errors.push({index:this.indexMap[E.index],error:new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_USER_IMPORT,E.message)})}),v.errors.sort((E,y)=>E.index-y.index),v}populateOptions(h,v){let E;if(!v)return{};if(!r.isNonNullObject(h))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"UserImportOptions" are required when importing users with passwords.');if(!r.isNonNullObject(h.hash))throw new u.FirebaseAuthError(u.AuthClientErrorCode.MISSING_HASH_ALGORITHM,'"hash.algorithm" is missing from the provided "UserImportOptions".');if(typeof h.hash.algorithm>"u"||!r.isNonEmptyString(h.hash.algorithm))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_ALGORITHM,'"hash.algorithm" must be a string matching the list of supported algorithms.');let y;switch(h.hash.algorithm){case"HMAC_SHA512":case"HMAC_SHA256":case"HMAC_SHA1":case"HMAC_MD5":if(!r.isBuffer(h.hash.key))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_KEY,`A non-empty "hash.key" byte buffer must be provided for hash algorithm ${h.hash.algorithm}.`);E={hashAlgorithm:h.hash.algorithm,signerKey:e.toWebSafeBase64(h.hash.key)};break;case"MD5":case"SHA1":case"SHA256":case"SHA512":{y=c(h.hash,"rounds");const A=h.hash.algorithm==="MD5"?0:1;if(isNaN(y)||y<A||y>8192)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between ${A} and 8192 must be provided for hash algorithm ${h.hash.algorithm}.`);E={hashAlgorithm:h.hash.algorithm,rounds:y};break}case"PBKDF_SHA1":case"PBKDF2_SHA256":if(y=c(h.hash,"rounds"),isNaN(y)||y<0||y>12e4)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between 0 and 120000 must be provided for hash algorithm ${h.hash.algorithm}.`);E={hashAlgorithm:h.hash.algorithm,rounds:y};break;case"SCRYPT":{if(!r.isBuffer(h.hash.key))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_KEY,`A "hash.key" byte buffer must be provided for hash algorithm ${h.hash.algorithm}.`);if(y=c(h.hash,"rounds"),isNaN(y)||y<=0||y>8)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_ROUNDS,`A valid "hash.rounds" number between 1 and 8 must be provided for hash algorithm ${h.hash.algorithm}.`);const A=c(h.hash,"memoryCost");if(isNaN(A)||A<=0||A>14)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_MEMORY_COST,`A valid "hash.memoryCost" number between 1 and 14 must be provided for hash algorithm ${h.hash.algorithm}.`);if(typeof h.hash.saltSeparator<"u"&&!r.isBuffer(h.hash.saltSeparator))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_SALT_SEPARATOR,'"hash.saltSeparator" must be a byte buffer.');E={hashAlgorithm:h.hash.algorithm,signerKey:e.toWebSafeBase64(h.hash.key),rounds:y,memoryCost:A,saltSeparator:e.toWebSafeBase64(h.hash.saltSeparator||Buffer.from(""))};break}case"BCRYPT":E={hashAlgorithm:h.hash.algorithm};break;case"STANDARD_SCRYPT":{const A=c(h.hash,"memoryCost");if(isNaN(A))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_MEMORY_COST,`A valid "hash.memoryCost" number must be provided for hash algorithm ${h.hash.algorithm}.`);const w=c(h.hash,"parallelization");if(isNaN(w))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_PARALLELIZATION,`A valid "hash.parallelization" number must be provided for hash algorithm ${h.hash.algorithm}.`);const I=c(h.hash,"blockSize");if(isNaN(I))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_BLOCK_SIZE,`A valid "hash.blockSize" number must be provided for hash algorithm ${h.hash.algorithm}.`);const _=c(h.hash,"derivedKeyLength");if(isNaN(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_DERIVED_KEY_LENGTH,`A valid "hash.derivedKeyLength" number must be provided for hash algorithm ${h.hash.algorithm}.`);E={hashAlgorithm:h.hash.algorithm,cpuMemCost:A,parallelization:w,blockSize:I,dkLen:_};break}default:throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_HASH_ALGORITHM,`Unsupported hash algorithm provider "${h.hash.algorithm}".`)}return E}populateUsers(h,v){const E=[];return h.forEach((y,A)=>{try{const w=a(y,v);typeof w.passwordHash<"u"&&(this.requiresHashOptions=!0),E.push(w),this.indexMap[E.length-1]=A}catch(w){this.userImportResultErrors.push({index:A,error:w})}}),E}}return userImportBuilder.UserImportBuilder=o,userImportBuilder}var actionCodeSettingsBuilder={};/*! firebase-admin v13.4.0 */var hasRequiredActionCodeSettingsBuilder;function requireActionCodeSettingsBuilder(){if(hasRequiredActionCodeSettingsBuilder)return actionCodeSettingsBuilder;hasRequiredActionCodeSettingsBuilder=1;/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(actionCodeSettingsBuilder,"__esModule",{value:!0}),actionCodeSettingsBuilder.ActionCodeSettingsBuilder=void 0;const t=requireValidator$1(),e=requireError();class r{constructor(d){if(!t.isNonNullObject(d))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings" must be a non-null object.');if(typeof d.url>"u")throw new e.FirebaseAuthError(e.AuthClientErrorCode.MISSING_CONTINUE_URI);if(!t.isURL(d.url))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_CONTINUE_URI);if(this.continueUrl=d.url,typeof d.handleCodeInApp<"u"&&!t.isBoolean(d.handleCodeInApp))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.handleCodeInApp" must be a boolean.');if(this.canHandleCodeInApp=d.handleCodeInApp||!1,typeof d.dynamicLinkDomain<"u"&&!t.isNonEmptyString(d.dynamicLinkDomain))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_DYNAMIC_LINK_DOMAIN);if(this.dynamicLinkDomain=d.dynamicLinkDomain,typeof d.linkDomain<"u"&&!t.isNonEmptyString(d.linkDomain))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_HOSTING_LINK_DOMAIN);if(this.linkDomain=d.linkDomain,typeof d.iOS<"u"){if(t.isNonNullObject(d.iOS)){if(typeof d.iOS.bundleId>"u")throw new e.FirebaseAuthError(e.AuthClientErrorCode.MISSING_IOS_BUNDLE_ID);if(!t.isNonEmptyString(d.iOS.bundleId))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.iOS.bundleId" must be a valid non-empty string.')}else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.iOS" must be a valid non-null object.');this.ibi=d.iOS.bundleId}if(typeof d.android<"u"){if(t.isNonNullObject(d.android)){if(typeof d.android.packageName>"u")throw new e.FirebaseAuthError(e.AuthClientErrorCode.MISSING_ANDROID_PACKAGE_NAME);if(t.isNonEmptyString(d.android.packageName)){if(typeof d.android.minimumVersion<"u"&&!t.isNonEmptyString(d.android.minimumVersion))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.minimumVersion" must be a valid non-empty string.');if(typeof d.android.installApp<"u"&&!t.isBoolean(d.android.installApp))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.installApp" must be a valid boolean.')}else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android.packageName" must be a valid non-empty string.')}else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"ActionCodeSettings.android" must be a valid non-null object.');this.apn=d.android.packageName,this.amv=d.android.minimumVersion,this.installApp=d.android.installApp||!1}}buildRequest(){const d={continueUrl:this.continueUrl,canHandleCodeInApp:this.canHandleCodeInApp,dynamicLinkDomain:this.dynamicLinkDomain,linkDomain:this.linkDomain,androidPackageName:this.apn,androidMinimumVersion:this.amv,androidInstallApp:this.installApp,iOSBundleId:this.ibi};for(const m in d)Object.prototype.hasOwnProperty.call(d,m)&&(typeof d[m]>"u"||d[m]===null)&&delete d[m];return d}}return actionCodeSettingsBuilder.ActionCodeSettingsBuilder=r,actionCodeSettingsBuilder}var tenant={},authConfig={};/*! firebase-admin v13.4.0 */var hasRequiredAuthConfig;function requireAuthConfig(){return hasRequiredAuthConfig||(hasRequiredAuthConfig=1,function(t){/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.EmailPrivacyAuthConfig=t.PasswordPolicyAuthConfig=t.MobileLinksAuthConfig=t.RecaptchaAuthConfig=t.SmsRegionsAuthConfig=t.OIDCConfig=t.SAMLConfig=t.EmailSignInConfig=t.MultiFactorAuthConfig=t.MAXIMUM_TEST_PHONE_NUMBERS=void 0,t.validateTestPhoneNumbers=a;const e=requireValidator$1(),r=requireDeepCopy(),u=requireError();t.MAXIMUM_TEST_PHONE_NUMBERS=10;const d={phone:"PHONE_SMS"},m=Object.keys(d).reduce((I,_)=>(I[d[_]]=_,I),{});class c{static buildServerRequest(_){const S={};return c.validate(_),Object.prototype.hasOwnProperty.call(_,"state")&&(S.state=_.state),Object.prototype.hasOwnProperty.call(_,"factorIds")&&((_.factorIds||[]).forEach(j=>{typeof S.enabledProviders>"u"&&(S.enabledProviders=[]),S.enabledProviders.push(d[j])}),_.factorIds&&_.factorIds.length===0&&(S.enabledProviders=[])),Object.prototype.hasOwnProperty.call(_,"providerConfigs")&&(S.providerConfigs=_.providerConfigs),S}static validate(_){const S={state:!0,factorIds:!0,providerConfigs:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig" must be a non-null object.');for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid MultiFactorConfig parameter.`);if(typeof _.state<"u"&&_.state!=="ENABLED"&&_.state!=="DISABLED")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.state" must be either "ENABLED" or "DISABLED".');if(typeof _.factorIds<"u"){if(!e.isArray(_.factorIds))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.factorIds" must be an array of valid "AuthFactorTypes".');_.factorIds.forEach(j=>{if(typeof d[j]>"u")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid "AuthFactorType".`)})}if(typeof _.providerConfigs<"u"){if(!e.isArray(_.providerConfigs))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs" must be an array of valid "MultiFactorProviderConfig."');_.providerConfigs.forEach(j=>{if(typeof j>"u"||!e.isObject(j))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid "MultiFactorProviderConfig" type.`);const K={state:!0,totpProviderConfig:!0};for(const U in j)if(!(U in K))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${U}" is not a valid ProviderConfig parameter.`);if(typeof j.state>"u"||j.state!=="ENABLED"&&j.state!=="DISABLED")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs.state" must be either "ENABLED" or "DISABLED".');if(typeof j.totpProviderConfig>"u")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MultiFactorConfig.providerConfigs.totpProviderConfig" must be defined.');const J={adjacentIntervals:!0};for(const U in j.totpProviderConfig)if(!(U in J))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${U}" is not a valid TotpProviderConfig parameter.`);const H=j.totpProviderConfig.adjacentIntervals;if(typeof H<"u"&&(!Number.isInteger(H)||H<0||H>10))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"MultiFactorConfig.providerConfigs.totpProviderConfig.adjacentIntervals" must be a valid number between 0 and 10 (both inclusive).')})}}constructor(_){if(typeof _.state>"u")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor configuration response");this.state=_.state,this.factorIds=[],(_.enabledProviders||[]).forEach(S=>{typeof m[S]<"u"&&this.factorIds.push(m[S])}),this.providerConfigs=[],(_.providerConfigs||[]).forEach(S=>{if(typeof S<"u"){if(typeof S.state>"u"||typeof S.totpProviderConfig>"u"||typeof S.totpProviderConfig.adjacentIntervals<"u"&&typeof S.totpProviderConfig.adjacentIntervals!="number")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor configuration response");this.providerConfigs.push(S)}})}toJSON(){return{state:this.state,factorIds:this.factorIds,providerConfigs:this.providerConfigs}}}t.MultiFactorAuthConfig=c;function a(I){if(!e.isObject(I))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"testPhoneNumbers" must be a map of phone number / code pairs.');if(Object.keys(I).length>t.MAXIMUM_TEST_PHONE_NUMBERS)throw new u.FirebaseAuthError(u.AuthClientErrorCode.MAXIMUM_TEST_PHONE_NUMBER_EXCEEDED);for(const _ in I){if(!e.isPhoneNumber(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_TESTING_PHONE_NUMBER,`"${_}" is not a valid E.164 standard compliant phone number.`);if(!e.isString(I[_])||!/^[\d]{6}$/.test(I[_]))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_TESTING_PHONE_NUMBER,`"${I[_]}" is not a valid 6 digit code string.`)}}class o{static buildServerRequest(_){const S={};return o.validate(_),Object.prototype.hasOwnProperty.call(_,"enabled")&&(S.allowPasswordSignup=_.enabled),Object.prototype.hasOwnProperty.call(_,"passwordRequired")&&(S.enableEmailLinkSignin=!_.passwordRequired),S}static validate(_){const S={enabled:!0,passwordRequired:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig" must be a non-null object.');for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,`"${j}" is not a valid EmailSignInConfig parameter.`);if(typeof _.enabled<"u"&&!e.isBoolean(_.enabled))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig.enabled" must be a boolean.');if(typeof _.passwordRequired<"u"&&!e.isBoolean(_.passwordRequired))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"EmailSignInConfig.passwordRequired" must be a boolean.')}constructor(_){if(typeof _.allowPasswordSignup>"u")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid email sign-in configuration response");this.enabled=_.allowPasswordSignup,this.passwordRequired=!_.enableEmailLinkSignin}toJSON(){return{enabled:this.enabled,passwordRequired:this.passwordRequired}}}t.EmailSignInConfig=o;class s{static buildServerRequest(_,S=!1){if(!(e.isNonNullObject(_)&&(_.providerId||S)))return null;const K={};if(s.validate(_,S),K.enabled=_.enabled,K.displayName=_.displayName,(_.idpEntityId||_.ssoURL||_.x509Certificates)&&(K.idpConfig={idpEntityId:_.idpEntityId,ssoUrl:_.ssoURL,signRequest:_.enableRequestSigning,idpCertificates:typeof _.x509Certificates>"u"?void 0:[]},_.x509Certificates))for(const J of _.x509Certificates||[])K.idpConfig.idpCertificates.push({x509Certificate:J});return(_.callbackURL||_.rpEntityId)&&(K.spConfig={spEntityId:_.rpEntityId,callbackUri:_.callbackURL}),K}static getProviderIdFromResourceName(_){const S=_.match(/\/inboundSamlConfigs\/(saml\..*)$/);return!S||S.length<2?null:S[1]}static isProviderId(_){return e.isNonEmptyString(_)&&_.indexOf("saml.")===0}static validate(_,S=!1){const j={enabled:!0,displayName:!0,providerId:!0,idpEntityId:!0,ssoURL:!0,x509Certificates:!0,rpEntityId:!0,callbackURL:!0,enableRequestSigning:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig" must be a valid non-null object.');for(const K in _)if(!(K in j))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${K}" is not a valid SAML config parameter.`);if(e.isNonEmptyString(_.providerId)){if(_.providerId.indexOf("saml.")!==0)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_PROVIDER_ID,'"SAMLAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "saml.".')}else if(!S)throw new u.FirebaseAuthError(_.providerId?u.AuthClientErrorCode.INVALID_PROVIDER_ID:u.AuthClientErrorCode.MISSING_PROVIDER_ID,'"SAMLAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "saml.".');if(!(S&&typeof _.idpEntityId>"u")&&!e.isNonEmptyString(_.idpEntityId))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.idpEntityId" must be a valid non-empty string.');if(!(S&&typeof _.ssoURL>"u")&&!e.isURL(_.ssoURL))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.ssoURL" must be a valid URL string.');if(!(S&&typeof _.rpEntityId>"u")&&!e.isNonEmptyString(_.rpEntityId))throw new u.FirebaseAuthError(_.rpEntityId?u.AuthClientErrorCode.INVALID_CONFIG:u.AuthClientErrorCode.MISSING_SAML_RELYING_PARTY_CONFIG,'"SAMLAuthProviderConfig.rpEntityId" must be a valid non-empty string.');if(!(S&&typeof _.callbackURL>"u")&&!e.isURL(_.callbackURL))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.callbackURL" must be a valid URL string.');if(!(S&&typeof _.x509Certificates>"u")&&!e.isArray(_.x509Certificates))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.x509Certificates" must be a valid array of X509 certificate strings.');if((_.x509Certificates||[]).forEach(K=>{if(!e.isNonEmptyString(K))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.x509Certificates" must be a valid array of X509 certificate strings.')}),typeof _.enableRequestSigning<"u"&&!e.isBoolean(_.enableRequestSigning))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.enableRequestSigning" must be a boolean.');if(typeof _.enabled<"u"&&!e.isBoolean(_.enabled))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.enabled" must be a boolean.');if(typeof _.displayName<"u"&&!e.isString(_.displayName))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SAMLAuthProviderConfig.displayName" must be a valid string.')}constructor(_){if(!_||!_.idpConfig||!_.idpConfig.idpEntityId||!_.idpConfig.ssoUrl||!_.spConfig||!_.spConfig.spEntityId||!_.name||!(e.isString(_.name)&&s.getProviderIdFromResourceName(_.name)))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");const S=s.getProviderIdFromResourceName(_.name);if(!S)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");this.providerId=S,this.rpEntityId=_.spConfig.spEntityId,this.callbackURL=_.spConfig.callbackUri,this.idpEntityId=_.idpConfig.idpEntityId,this.ssoURL=_.idpConfig.ssoUrl,this.enableRequestSigning=!!_.idpConfig.signRequest;const j=[];for(const K of _.idpConfig.idpCertificates||[])K.x509Certificate&&j.push(K.x509Certificate);this.x509Certificates=j,this.enabled=!!_.enabled,this.displayName=_.displayName}toJSON(){return{enabled:this.enabled,displayName:this.displayName,providerId:this.providerId,idpEntityId:this.idpEntityId,ssoURL:this.ssoURL,x509Certificates:(0,r.deepCopy)(this.x509Certificates),rpEntityId:this.rpEntityId,callbackURL:this.callbackURL,enableRequestSigning:this.enableRequestSigning}}}t.SAMLConfig=s;class h{static buildServerRequest(_,S=!1){if(!(e.isNonNullObject(_)&&(_.providerId||S)))return null;const K={};return h.validate(_,S),K.enabled=_.enabled,K.displayName=_.displayName,K.issuer=_.issuer,K.clientId=_.clientId,typeof _.clientSecret<"u"&&(K.clientSecret=_.clientSecret),typeof _.responseType<"u"&&(K.responseType=_.responseType),K}static getProviderIdFromResourceName(_){const S=_.match(/\/oauthIdpConfigs\/(oidc\..*)$/);return!S||S.length<2?null:S[1]}static isProviderId(_){return e.isNonEmptyString(_)&&_.indexOf("oidc.")===0}static validate(_,S=!1){const j={enabled:!0,displayName:!0,providerId:!0,clientId:!0,issuer:!0,clientSecret:!0,responseType:!0},K={idToken:!0,code:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig" must be a valid non-null object.');for(const J in _)if(!(J in j))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${J}" is not a valid OIDC config parameter.`);if(e.isNonEmptyString(_.providerId)){if(_.providerId.indexOf("oidc.")!==0)throw new u.FirebaseAuthError(_.providerId?u.AuthClientErrorCode.INVALID_PROVIDER_ID:u.AuthClientErrorCode.MISSING_PROVIDER_ID,'"OIDCAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "oidc.".')}else if(!S)throw new u.FirebaseAuthError(_.providerId?u.AuthClientErrorCode.INVALID_PROVIDER_ID:u.AuthClientErrorCode.MISSING_PROVIDER_ID,'"OIDCAuthProviderConfig.providerId" must be a valid non-empty string prefixed with "oidc.".');if(!(S&&typeof _.clientId>"u")&&!e.isNonEmptyString(_.clientId))throw new u.FirebaseAuthError(_.clientId?u.AuthClientErrorCode.INVALID_OAUTH_CLIENT_ID:u.AuthClientErrorCode.MISSING_OAUTH_CLIENT_ID,'"OIDCAuthProviderConfig.clientId" must be a valid non-empty string.');if(!(S&&typeof _.issuer>"u")&&!e.isURL(_.issuer))throw new u.FirebaseAuthError(_.issuer?u.AuthClientErrorCode.INVALID_CONFIG:u.AuthClientErrorCode.MISSING_ISSUER,'"OIDCAuthProviderConfig.issuer" must be a valid URL string.');if(typeof _.enabled<"u"&&!e.isBoolean(_.enabled))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.enabled" must be a boolean.');if(typeof _.displayName<"u"&&!e.isString(_.displayName))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.displayName" must be a valid string.');if(typeof _.clientSecret<"u"&&!e.isNonEmptyString(_.clientSecret))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"OIDCAuthProviderConfig.clientSecret" must be a valid string.');if(e.isNonNullObject(_.responseType)&&typeof _.responseType<"u"){Object.keys(_.responseType).forEach(Z=>{if(!(Z in K))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${Z}" is not a valid OAuthResponseType parameter.`)});const J=_.responseType.idToken;if(typeof J<"u"&&!e.isBoolean(J))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"OIDCAuthProviderConfig.responseType.idToken" must be a boolean.');const H=_.responseType.code;if(typeof H<"u"){if(!e.isBoolean(H))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"OIDCAuthProviderConfig.responseType.code" must be a boolean.');if(H&&typeof _.clientSecret>"u")throw new u.FirebaseAuthError(u.AuthClientErrorCode.MISSING_OAUTH_CLIENT_SECRET,"The OAuth configuration client secret is required to enable OIDC code flow.")}const U=Object.keys(_.responseType).length,P=Object.values(_.responseType).filter(Boolean).length;if(U>1&&P!==1)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_OAUTH_RESPONSETYPE,"Only exactly one OAuth responseType should be set to true.")}}constructor(_){if(!_||!_.issuer||!_.clientId||!_.name||!(e.isString(_.name)&&h.getProviderIdFromResourceName(_.name)))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid OIDC configuration response");const S=h.getProviderIdFromResourceName(_.name);if(!S)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid SAML configuration response");this.providerId=S,this.clientId=_.clientId,this.issuer=_.issuer,this.enabled=!!_.enabled,this.displayName=_.displayName,typeof _.clientSecret<"u"&&(this.clientSecret=_.clientSecret),typeof _.responseType<"u"&&(this.responseType=_.responseType)}toJSON(){return{enabled:this.enabled,displayName:this.displayName,providerId:this.providerId,issuer:this.issuer,clientId:this.clientId,clientSecret:(0,r.deepCopy)(this.clientSecret),responseType:(0,r.deepCopy)(this.responseType)}}}t.OIDCConfig=h;class v{static validate(_){if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig" must be a non-null object.');const S={allowlistOnly:!0,allowByDefault:!0};for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid SmsRegionConfig parameter.`);if(typeof _.allowByDefault<"u"&&typeof _.allowlistOnly<"u")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'SmsRegionConfig cannot have both "allowByDefault" and "allowlistOnly" parameters.');if(typeof _.allowByDefault<"u"){const j={disallowedRegions:!0};for(const K in _.allowByDefault)if(!(K in j))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${K}" is not a valid SmsRegionConfig.allowByDefault parameter.`);if(typeof _.allowByDefault.disallowedRegions<"u"&&!e.isArray(_.allowByDefault.disallowedRegions))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig.allowByDefault.disallowedRegions" must be a valid string array.')}if(typeof _.allowlistOnly<"u"){const j={allowedRegions:!0};for(const K in _.allowlistOnly)if(!(K in j))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${K}" is not a valid SmsRegionConfig.allowlistOnly parameter.`);if(typeof _.allowlistOnly.allowedRegions<"u"&&!e.isArray(_.allowlistOnly.allowedRegions))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"SmsRegionConfig.allowlistOnly.allowedRegions" must be a valid string array.')}}}t.SmsRegionsAuthConfig=v;class E{constructor(_){const S=Object.fromEntries(Object.entries(_).filter(([,j])=>j!==void 0));S.tollFraudManagedRules!==void 0&&(this.smsTollFraudManagedRules=S.tollFraudManagedRules,delete S.tollFraudManagedRules),Object.assign(this,S)}static buildServerRequest(_){E.validate(_);const S={};return typeof _.emailPasswordEnforcementState<"u"&&(S.emailPasswordEnforcementState=_.emailPasswordEnforcementState),typeof _.phoneEnforcementState<"u"&&(S.phoneEnforcementState=_.phoneEnforcementState),typeof _.managedRules<"u"&&(S.managedRules=_.managedRules),typeof _.recaptchaKeys<"u"&&(S.recaptchaKeys=_.recaptchaKeys),typeof _.useAccountDefender<"u"&&(S.useAccountDefender=_.useAccountDefender),typeof _.useSmsBotScore<"u"&&(S.useSmsBotScore=_.useSmsBotScore),typeof _.useSmsTollFraudProtection<"u"&&(S.useSmsTollFraudProtection=_.useSmsTollFraudProtection),typeof _.smsTollFraudManagedRules<"u"&&(S.tollFraudManagedRules=_.smsTollFraudManagedRules),S}static validate(_){const S={emailPasswordEnforcementState:!0,phoneEnforcementState:!0,managedRules:!0,recaptchaKeys:!0,useAccountDefender:!0,useSmsBotScore:!0,useSmsTollFraudProtection:!0,smsTollFraudManagedRules:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig" must be a non-null object.');for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid RecaptchaConfig parameter.`);if(typeof _.emailPasswordEnforcementState<"u"){if(!e.isNonEmptyString(_.emailPasswordEnforcementState))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"RecaptchaConfig.emailPasswordEnforcementState" must be a valid non-empty string.');if(_.emailPasswordEnforcementState!=="OFF"&&_.emailPasswordEnforcementState!=="AUDIT"&&_.emailPasswordEnforcementState!=="ENFORCE")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.emailPasswordEnforcementState" must be either "OFF", "AUDIT" or "ENFORCE".')}if(typeof _.phoneEnforcementState<"u"){if(!e.isNonEmptyString(_.phoneEnforcementState))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_ARGUMENT,'"RecaptchaConfig.phoneEnforcementState" must be a valid non-empty string.');if(_.phoneEnforcementState!=="OFF"&&_.phoneEnforcementState!=="AUDIT"&&_.phoneEnforcementState!=="ENFORCE")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.phoneEnforcementState" must be either "OFF", "AUDIT" or "ENFORCE".')}if(typeof _.managedRules<"u"){if(!e.isArray(_.managedRules))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.managedRules" must be an array of valid "RecaptchaManagedRule".');_.managedRules.forEach(j=>{E.validateManagedRule(j)})}if(typeof _.useAccountDefender<"u"&&!e.isBoolean(_.useAccountDefender))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useAccountDefender" must be a boolean value".');if(typeof _.useSmsBotScore<"u"&&!e.isBoolean(_.useSmsBotScore))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useSmsBotScore" must be a boolean value".');if(typeof _.useSmsTollFraudProtection<"u"&&!e.isBoolean(_.useSmsTollFraudProtection))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.useSmsTollFraudProtection" must be a boolean value".');if(typeof _.smsTollFraudManagedRules<"u"){if(!e.isArray(_.smsTollFraudManagedRules))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaConfig.smsTollFraudManagedRules" must be an array of valid "RecaptchaTollFraudManagedRule".');_.smsTollFraudManagedRules.forEach(j=>{E.validateTollFraudManagedRule(j)})}}static validateManagedRule(_){const S={endScore:!0,action:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaManagedRule" must be a non-null object.');for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid RecaptchaManagedRule parameter.`);if(typeof _.action<"u"&&_.action!=="BLOCK")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaManagedRule.action" must be "BLOCK".')}static validateTollFraudManagedRule(_){const S={startScore:!0,action:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaTollFraudManagedRule" must be a non-null object.');for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid RecaptchaTollFraudManagedRule parameter.`);if(typeof _.action<"u"&&_.action!=="BLOCK")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"RecaptchaTollFraudManagedRule.action" must be "BLOCK".')}}t.RecaptchaAuthConfig=E;class y{static validate(_){if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MobileLinksConfig" must be a non-null object.');const S={domain:!0};for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid "MobileLinksConfig" parameter.`);if(typeof _.domain<"u"&&_.domain!=="HOSTING_DOMAIN"&&_.domain!=="FIREBASE_DYNAMIC_LINK_DOMAIN")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"MobileLinksConfig.domain" must be either "HOSTING_DOMAIN" or "FIREBASE_DYNAMIC_LINK_DOMAIN".')}}t.MobileLinksAuthConfig=y;class A{static buildServerRequest(_){const S={};A.validate(_),Object.prototype.hasOwnProperty.call(_,"enforcementState")&&(S.passwordPolicyEnforcementState=_.enforcementState),S.forceUpgradeOnSignin=!1,Object.prototype.hasOwnProperty.call(_,"forceUpgradeOnSignin")&&(S.forceUpgradeOnSignin=_.forceUpgradeOnSignin);const j={containsUppercaseCharacter:!1,containsLowercaseCharacter:!1,containsNonAlphanumericCharacter:!1,containsNumericCharacter:!1,minPasswordLength:6,maxPasswordLength:4096};return S.passwordPolicyVersions=[],Object.prototype.hasOwnProperty.call(_,"constraints")&&_&&(_.constraints?.requireUppercase!==void 0&&(j.containsUppercaseCharacter=_.constraints.requireUppercase),_.constraints?.requireLowercase!==void 0&&(j.containsLowercaseCharacter=_.constraints.requireLowercase),_.constraints?.requireNonAlphanumeric!==void 0&&(j.containsNonAlphanumericCharacter=_.constraints.requireNonAlphanumeric),_.constraints?.requireNumeric!==void 0&&(j.containsNumericCharacter=_.constraints.requireNumeric),_.constraints?.minLength!==void 0&&(j.minPasswordLength=_.constraints.minLength),_.constraints?.maxLength!==void 0&&(j.maxPasswordLength=_.constraints.maxLength)),S.passwordPolicyVersions.push({customStrengthOptions:j}),S}static validate(_){const S={enforcementState:!0,forceUpgradeOnSignin:!0,constraints:!0};if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig" must be a non-null object.');for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid PasswordPolicyConfig parameter.`);if(typeof _.enforcementState>"u"||!(_.enforcementState==="ENFORCE"||_.enforcementState==="OFF"))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.enforcementState" must be either "ENFORCE" or "OFF".');if(typeof _.forceUpgradeOnSignin<"u"&&!e.isBoolean(_.forceUpgradeOnSignin))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.forceUpgradeOnSignin" must be a boolean.');if(typeof _.constraints<"u"){if(_.enforcementState==="ENFORCE"&&!e.isNonNullObject(_.constraints))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints" must be a non-empty object.');const j={requireUppercase:!0,requireLowercase:!0,requireNumeric:!0,requireNonAlphanumeric:!0,minLength:!0,maxLength:!0};for(const K in _.constraints)if(!(K in j))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${K}" is not a valid PasswordPolicyConfig.constraints parameter.`);if(typeof _.constraints.requireUppercase<"u"&&!e.isBoolean(_.constraints.requireUppercase))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireUppercase" must be a boolean.');if(typeof _.constraints.requireLowercase<"u"&&!e.isBoolean(_.constraints.requireLowercase))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireLowercase" must be a boolean.');if(typeof _.constraints.requireNonAlphanumeric<"u"&&!e.isBoolean(_.constraints.requireNonAlphanumeric))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireNonAlphanumeric" must be a boolean.');if(typeof _.constraints.requireNumeric<"u"&&!e.isBoolean(_.constraints.requireNumeric))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.requireNumeric" must be a boolean.');if(typeof _.constraints.minLength>"u")_.constraints.minLength=6;else if(e.isNumber(_.constraints.minLength)){if(!(_.constraints.minLength>=6&&_.constraints.minLength<=30))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.minLength" must be an integer between 6 and 30, inclusive.')}else throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.minLength" must be a number.');if(typeof _.constraints.maxLength>"u")_.constraints.maxLength=4096;else if(e.isNumber(_.constraints.maxLength)){if(!(_.constraints.maxLength>=_.constraints.minLength&&_.constraints.maxLength<=4096))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.maxLength" must be greater than or equal to minLength and at max 4096.')}else throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints.maxLength" must be a number.')}else if(_.enforcementState==="ENFORCE")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"PasswordPolicyConfig.constraints" must be defined.')}constructor(_){if(typeof _.passwordPolicyEnforcementState>"u")throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid password policy configuration response");this.enforcementState=_.passwordPolicyEnforcementState;let S={};typeof _.passwordPolicyVersions<"u"&&(_.passwordPolicyVersions||[]).forEach(j=>{S={requireLowercase:j.customStrengthOptions?.containsLowercaseCharacter,requireUppercase:j.customStrengthOptions?.containsUppercaseCharacter,requireNonAlphanumeric:j.customStrengthOptions?.containsNonAlphanumericCharacter,requireNumeric:j.customStrengthOptions?.containsNumericCharacter,minLength:j.customStrengthOptions?.minPasswordLength,maxLength:j.customStrengthOptions?.maxPasswordLength}}),this.constraints=S,this.forceUpgradeOnSignin=!!_.forceUpgradeOnSignin}}t.PasswordPolicyAuthConfig=A;class w{static validate(_){if(!e.isNonNullObject(_))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"EmailPrivacyConfig" must be a non-null object.');const S={enableImprovedEmailPrivacy:!0};for(const j in _)if(!(j in S))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,`"${j}" is not a valid "EmailPrivacyConfig" parameter.`);if(typeof _.enableImprovedEmailPrivacy<"u"&&!e.isBoolean(_.enableImprovedEmailPrivacy))throw new u.FirebaseAuthError(u.AuthClientErrorCode.INVALID_CONFIG,'"EmailPrivacyConfig.enableImprovedEmailPrivacy" must be a valid boolean value.')}}t.EmailPrivacyAuthConfig=w}(authConfig)),authConfig}/*! firebase-admin v13.4.0 */var hasRequiredTenant;function requireTenant(){if(hasRequiredTenant)return tenant;hasRequiredTenant=1;/*!
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(tenant,"__esModule",{value:!0}),tenant.Tenant=void 0;const t=requireValidator$1(),e=requireDeepCopy(),r=requireError(),u=requireAuthConfig();class d{static buildServerRequest(c,a){d.validate(c,a);let o={};return typeof c.emailSignInConfig<"u"&&(o=u.EmailSignInConfig.buildServerRequest(c.emailSignInConfig)),typeof c.displayName<"u"&&(o.displayName=c.displayName),typeof c.anonymousSignInEnabled<"u"&&(o.enableAnonymousUser=c.anonymousSignInEnabled),typeof c.multiFactorConfig<"u"&&(o.mfaConfig=u.MultiFactorAuthConfig.buildServerRequest(c.multiFactorConfig)),typeof c.testPhoneNumbers<"u"&&(o.testPhoneNumbers=c.testPhoneNumbers??{}),typeof c.smsRegionConfig<"u"&&(o.smsRegionConfig=c.smsRegionConfig),typeof c.recaptchaConfig<"u"&&(o.recaptchaConfig=u.RecaptchaAuthConfig.buildServerRequest(c.recaptchaConfig)),typeof c.passwordPolicyConfig<"u"&&(o.passwordPolicyConfig=u.PasswordPolicyAuthConfig.buildServerRequest(c.passwordPolicyConfig)),typeof c.emailPrivacyConfig<"u"&&(o.emailPrivacyConfig=c.emailPrivacyConfig),o}static getTenantIdFromResourceName(c){const a=c.match(/\/tenants\/(.*)$/);return!a||a.length<2?null:a[1]}static validate(c,a){const o={displayName:!0,emailSignInConfig:!0,anonymousSignInEnabled:!0,multiFactorConfig:!0,testPhoneNumbers:!0,smsRegionConfig:!0,recaptchaConfig:!0,passwordPolicyConfig:!0,emailPrivacyConfig:!0},s=a?"CreateTenantRequest":"UpdateTenantRequest";if(!t.isNonNullObject(c))throw new r.FirebaseAuthError(r.AuthClientErrorCode.INVALID_ARGUMENT,`"${s}" must be a valid non-null object.`);for(const h in c)if(!(h in o))throw new r.FirebaseAuthError(r.AuthClientErrorCode.INVALID_ARGUMENT,`"${h}" is not a valid ${s} parameter.`);if(typeof c.displayName<"u"&&!t.isNonEmptyString(c.displayName))throw new r.FirebaseAuthError(r.AuthClientErrorCode.INVALID_ARGUMENT,`"${s}.displayName" must be a valid non-empty string.`);if(typeof c.emailSignInConfig<"u"&&u.EmailSignInConfig.buildServerRequest(c.emailSignInConfig),typeof c.testPhoneNumbers<"u"&&c.testPhoneNumbers!==null)(0,u.validateTestPhoneNumbers)(c.testPhoneNumbers);else if(c.testPhoneNumbers===null&&a)throw new r.FirebaseAuthError(r.AuthClientErrorCode.INVALID_ARGUMENT,`"${s}.testPhoneNumbers" must be a non-null object.`);typeof c.multiFactorConfig<"u"&&u.MultiFactorAuthConfig.buildServerRequest(c.multiFactorConfig),typeof c.smsRegionConfig<"u"&&u.SmsRegionsAuthConfig.validate(c.smsRegionConfig),typeof c.recaptchaConfig<"u"&&u.RecaptchaAuthConfig.buildServerRequest(c.recaptchaConfig),typeof c.passwordPolicyConfig<"u"&&u.PasswordPolicyAuthConfig.buildServerRequest(c.passwordPolicyConfig),typeof c.emailPrivacyConfig<"u"&&u.EmailPrivacyAuthConfig.validate(c.emailPrivacyConfig)}constructor(c){const a=d.getTenantIdFromResourceName(c.name);if(!a)throw new r.FirebaseAuthError(r.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid tenant response");this.tenantId=a,this.displayName=c.displayName;try{this.emailSignInConfig_=new u.EmailSignInConfig(c)}catch{this.emailSignInConfig_=new u.EmailSignInConfig({allowPasswordSignup:!1})}this.anonymousSignInEnabled=!!c.enableAnonymousUser,typeof c.mfaConfig<"u"&&(this.multiFactorConfig_=new u.MultiFactorAuthConfig(c.mfaConfig)),typeof c.testPhoneNumbers<"u"&&(this.testPhoneNumbers=(0,e.deepCopy)(c.testPhoneNumbers||{})),typeof c.smsRegionConfig<"u"&&(this.smsRegionConfig=(0,e.deepCopy)(c.smsRegionConfig)),typeof c.recaptchaConfig<"u"&&(this.recaptchaConfig_=new u.RecaptchaAuthConfig(c.recaptchaConfig)),typeof c.passwordPolicyConfig<"u"&&(this.passwordPolicyConfig=new u.PasswordPolicyAuthConfig(c.passwordPolicyConfig)),typeof c.emailPrivacyConfig<"u"&&(this.emailPrivacyConfig=(0,e.deepCopy)(c.emailPrivacyConfig))}get emailSignInConfig(){return this.emailSignInConfig_}get multiFactorConfig(){return this.multiFactorConfig_}get recaptchaConfig(){return this.recaptchaConfig_}toJSON(){const c={tenantId:this.tenantId,displayName:this.displayName,emailSignInConfig:this.emailSignInConfig_?.toJSON(),multiFactorConfig:this.multiFactorConfig_?.toJSON(),anonymousSignInEnabled:this.anonymousSignInEnabled,testPhoneNumbers:this.testPhoneNumbers,smsRegionConfig:(0,e.deepCopy)(this.smsRegionConfig),recaptchaConfig:(0,e.deepCopy)(this.recaptchaConfig),passwordPolicyConfig:(0,e.deepCopy)(this.passwordPolicyConfig),emailPrivacyConfig:(0,e.deepCopy)(this.emailPrivacyConfig)};return typeof c.multiFactorConfig>"u"&&delete c.multiFactorConfig,typeof c.testPhoneNumbers>"u"&&delete c.testPhoneNumbers,typeof c.smsRegionConfig>"u"&&delete c.smsRegionConfig,typeof c.recaptchaConfig>"u"&&delete c.recaptchaConfig,typeof c.passwordPolicyConfig>"u"&&delete c.passwordPolicyConfig,typeof c.emailPrivacyConfig>"u"&&delete c.emailPrivacyConfig,c}}return tenant.Tenant=d,tenant}var identifier={};/*! firebase-admin v13.4.0 */var hasRequiredIdentifier;function requireIdentifier(){if(hasRequiredIdentifier)return identifier;hasRequiredIdentifier=1;/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(identifier,"__esModule",{value:!0}),identifier.isUidIdentifier=t,identifier.isEmailIdentifier=e,identifier.isPhoneIdentifier=r,identifier.isProviderIdentifier=u;function t(d){return d.uid!==void 0}function e(d){return d.email!==void 0}function r(d){return d.phoneNumber!==void 0}function u(d){const m=d;return m.providerId!==void 0&&m.providerUid!==void 0}return identifier}var projectConfig={};/*! firebase-admin v13.4.0 */var hasRequiredProjectConfig;function requireProjectConfig(){if(hasRequiredProjectConfig)return projectConfig;hasRequiredProjectConfig=1,Object.defineProperty(projectConfig,"__esModule",{value:!0}),projectConfig.ProjectConfig=void 0;/*!
 * Copyright 2022 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t=requireValidator$1(),e=requireError(),r=requireAuthConfig(),u=requireDeepCopy();class d{get multiFactorConfig(){return this.multiFactorConfig_}get recaptchaConfig(){return this.recaptchaConfig_}static validate(c){if(!t.isNonNullObject(c))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,'"UpdateProjectConfigRequest" must be a valid non-null object.');const a={smsRegionConfig:!0,multiFactorConfig:!0,recaptchaConfig:!0,passwordPolicyConfig:!0,emailPrivacyConfig:!0,mobileLinksConfig:!0};for(const o in c)if(!(o in a))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,`"${o}" is not a valid UpdateProjectConfigRequest parameter.`);typeof c.smsRegionConfig<"u"&&r.SmsRegionsAuthConfig.validate(c.smsRegionConfig),typeof c.multiFactorConfig<"u"&&r.MultiFactorAuthConfig.validate(c.multiFactorConfig),typeof c.recaptchaConfig<"u"&&r.RecaptchaAuthConfig.validate(c.recaptchaConfig),typeof c.passwordPolicyConfig<"u"&&r.PasswordPolicyAuthConfig.validate(c.passwordPolicyConfig),typeof c.emailPrivacyConfig<"u"&&r.EmailPrivacyAuthConfig.validate(c.emailPrivacyConfig),typeof c.mobileLinksConfig<"u"&&r.MobileLinksAuthConfig.validate(c.mobileLinksConfig)}static buildServerRequest(c){d.validate(c);const a={};return typeof c.smsRegionConfig<"u"&&(a.smsRegionConfig=c.smsRegionConfig),typeof c.multiFactorConfig<"u"&&(a.mfa=r.MultiFactorAuthConfig.buildServerRequest(c.multiFactorConfig)),typeof c.recaptchaConfig<"u"&&(a.recaptchaConfig=r.RecaptchaAuthConfig.buildServerRequest(c.recaptchaConfig)),typeof c.passwordPolicyConfig<"u"&&(a.passwordPolicyConfig=r.PasswordPolicyAuthConfig.buildServerRequest(c.passwordPolicyConfig)),typeof c.emailPrivacyConfig<"u"&&(a.emailPrivacyConfig=c.emailPrivacyConfig),typeof c.mobileLinksConfig<"u"&&(a.mobileLinksConfig=c.mobileLinksConfig),a}constructor(c){typeof c.smsRegionConfig<"u"&&(this.smsRegionConfig=c.smsRegionConfig),typeof c.mfa<"u"&&(this.multiFactorConfig_=new r.MultiFactorAuthConfig(c.mfa)),typeof c.recaptchaConfig<"u"&&(this.recaptchaConfig_=new r.RecaptchaAuthConfig(c.recaptchaConfig)),typeof c.passwordPolicyConfig<"u"&&(this.passwordPolicyConfig=new r.PasswordPolicyAuthConfig(c.passwordPolicyConfig)),typeof c.emailPrivacyConfig<"u"&&(this.emailPrivacyConfig=c.emailPrivacyConfig),typeof c.mobileLinksConfig<"u"&&(this.mobileLinksConfig=c.mobileLinksConfig)}toJSON(){const c={smsRegionConfig:(0,u.deepCopy)(this.smsRegionConfig),multiFactorConfig:(0,u.deepCopy)(this.multiFactorConfig),recaptchaConfig:(0,u.deepCopy)(this.recaptchaConfig),passwordPolicyConfig:(0,u.deepCopy)(this.passwordPolicyConfig),emailPrivacyConfig:(0,u.deepCopy)(this.emailPrivacyConfig),mobileLinksConfig:(0,u.deepCopy)(this.mobileLinksConfig)};return typeof c.smsRegionConfig>"u"&&delete c.smsRegionConfig,typeof c.multiFactorConfig>"u"&&delete c.multiFactorConfig,typeof c.recaptchaConfig>"u"&&delete c.recaptchaConfig,typeof c.passwordPolicyConfig>"u"&&delete c.passwordPolicyConfig,typeof c.emailPrivacyConfig>"u"&&delete c.emailPrivacyConfig,typeof c.mobileLinksConfig>"u"&&delete c.mobileLinksConfig,c}}return projectConfig.ProjectConfig=d,projectConfig}var hasRequiredAuthApiRequest;function requireAuthApiRequest(){return hasRequiredAuthApiRequest||(hasRequiredAuthApiRequest=1,function(t){var e={};/*! firebase-admin v13.4.0 *//*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.TenantAwareAuthRequestHandler=t.AuthRequestHandler=t.AbstractAuthRequestHandler=t.FIREBASE_AUTH_SIGN_UP_NEW_USER=t.FIREBASE_AUTH_SET_ACCOUNT_INFO=t.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS=t.FIREBASE_AUTH_DELETE_ACCOUNT=t.FIREBASE_AUTH_GET_ACCOUNTS_INFO=t.FIREBASE_AUTH_GET_ACCOUNT_INFO=t.FIREBASE_AUTH_DOWNLOAD_ACCOUNT=t.FIREBASE_AUTH_UPLOAD_ACCOUNT=t.FIREBASE_AUTH_CREATE_SESSION_COOKIE=t.EMAIL_ACTION_REQUEST_TYPES=t.RESERVED_CLAIMS=void 0,t.useEmulator=X;const r=requireValidator$1(),u=requireDeepCopy(),d=requireError(),m=requireApiRequest(),c=requireUtils$2(),a=requireUserImportBuilder(),o=requireActionCodeSettingsBuilder(),s=requireTenant(),h=requireIdentifier(),v=requireAuthConfig(),E=requireProjectConfig(),y={"X-Client-Version":`Node/Admin/${c.getSdkVersion()}`},A=25e3;t.RESERVED_CLAIMS=["acr","amr","at_hash","aud","auth_time","azp","cnf","c_hash","exp","iat","iss","jti","nbf","nonce","sub","firebase"],t.EMAIL_ACTION_REQUEST_TYPES=["PASSWORD_RESET","VERIFY_EMAIL","EMAIL_SIGNIN","VERIFY_AND_CHANGE_EMAIL"];const w=1e3,I=1e3,_=1e3,S=100,j=1e3,K=5*60,J=14*24*60*60,H=100,U="https://identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}",P="http://{host}/identitytoolkit.googleapis.com/{version}/projects/{projectId}{api}",Z=U.replace("projects/{projectId}","projects/{projectId}/tenants/{tenantId}"),ie=P.replace("projects/{projectId}","projects/{projectId}/tenants/{tenantId}"),ue=1e3;var le;(function(oe){oe.Create="create",oe.Update="update",oe.Upload="upload"})(le||(le={}));class ne{constructor(_e,He="v1"){this.app=_e,this.version=He,X()?this.urlFormat=c.formatString(P,{host:l()}):this.urlFormat=U}getUrl(_e,He){return this.getProjectId().then(nt=>{const It={version:this.version,projectId:nt,api:_e||""},wt=c.formatString(this.urlFormat,It);return c.formatString(wt,He||{})})}getProjectId(){return this.projectId?Promise.resolve(this.projectId):c.findProjectId(this.app).then(_e=>{if(!r.isNonEmptyString(_e))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_CREDENTIAL,"Failed to determine project ID for Auth. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectId=_e,_e})}}class ye extends ne{constructor(_e,He,nt){super(_e,He),this.app=_e,this.version=He,this.tenantId=nt,X()?this.urlFormat=c.formatString(ie,{host:l()}):this.urlFormat=Z}getUrl(_e,He){return super.getUrl(_e,He).then(nt=>c.formatString(nt,{tenantId:this.tenantId}))}}class fe extends m.AuthorizedHttpClient{getToken(){return X()?Promise.resolve("owner"):super.getToken()}}function Te(oe){const _e={mfaEnrollmentId:!0,displayName:!0,phoneInfo:!0,enrolledAt:!0};for(const nt in oe)nt in _e||delete oe[nt];const He=oe.mfaEnrollmentId||oe.phoneInfo||JSON.stringify(oe);if(typeof oe.mfaEnrollmentId<"u"&&!r.isNonEmptyString(oe.mfaEnrollmentId))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID,'The second factor "uid" must be a valid non-empty string.');if(typeof oe.displayName<"u"&&!r.isString(oe.displayName))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_DISPLAY_NAME,`The second factor "displayName" for "${He}" must be a valid string.`);if(typeof oe.enrolledAt<"u"&&!r.isISODateString(oe.enrolledAt))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ENROLLMENT_TIME,`The second factor "enrollmentTime" for "${He}" must be a valid UTC date string.`);if(typeof oe.phoneInfo<"u"){if(!r.isPhoneNumber(oe.phoneInfo))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PHONE_NUMBER,`The second factor "phoneNumber" for "${He}" must be a non-empty E.164 standard compliant identifier string.`)}else throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ENROLLED_FACTORS,"MFAInfo object provided is invalid.")}function Ae(oe){const _e={rawId:!0,providerId:!0,email:!0,displayName:!0,photoUrl:!0};for(const He in oe)He in _e||delete oe[He];if(!r.isNonEmptyString(oe.providerId))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID);if(typeof oe.displayName<"u"&&typeof oe.displayName!="string")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_DISPLAY_NAME,`The provider "displayName" for "${oe.providerId}" must be a valid string.`);if(!r.isNonEmptyString(oe.rawId))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID,`The provider "uid" for "${oe.providerId}" must be a valid non-empty string.`);if(typeof oe.email<"u"&&!r.isEmail(oe.email))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_EMAIL,`The provider "email" for "${oe.providerId}" must be a valid email string.`);if(typeof oe.photoUrl<"u"&&!r.isURL(oe.photoUrl))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PHOTO_URL,`The provider "photoURL" for "${oe.providerId}" must be a valid URL string.`)}function Se(oe,_e){const He=_e===le.Upload,nt={displayName:!0,localId:!0,email:!0,password:!0,rawPassword:!0,emailVerified:!0,photoUrl:!0,disabled:!0,disableUser:!0,deleteAttribute:!0,deleteProvider:!0,sanityCheck:!0,phoneNumber:!0,customAttributes:!0,validSince:!0,linkProviderUserInfo:!He,tenantId:He,passwordHash:He,salt:He,createdAt:He,lastLoginAt:He,providerUserInfo:He,mfaInfo:He,mfa:!He};for(const wt in oe)wt in nt||delete oe[wt];if(typeof oe.tenantId<"u"&&!r.isNonEmptyString(oe.tenantId))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_TENANT_ID);if(typeof oe.displayName<"u"&&!r.isString(oe.displayName))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_DISPLAY_NAME);if((typeof oe.localId<"u"||He)&&!r.isUid(oe.localId))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID);if(typeof oe.email<"u"&&!r.isEmail(oe.email))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_EMAIL);if(typeof oe.phoneNumber<"u"&&!r.isPhoneNumber(oe.phoneNumber))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PHONE_NUMBER);if(typeof oe.password<"u"&&!r.isPassword(oe.password))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PASSWORD);if(typeof oe.rawPassword<"u"&&!r.isPassword(oe.rawPassword))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PASSWORD);if(typeof oe.emailVerified<"u"&&typeof oe.emailVerified!="boolean")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_EMAIL_VERIFIED);if(typeof oe.photoUrl<"u"&&!r.isURL(oe.photoUrl))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PHOTO_URL);if(typeof oe.disabled<"u"&&typeof oe.disabled!="boolean")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_DISABLED_FIELD);if(typeof oe.validSince<"u"&&!r.isNumber(oe.validSince))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_TOKENS_VALID_AFTER_TIME);if(typeof oe.createdAt<"u"&&!r.isNumber(oe.createdAt))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_CREATION_TIME);if(typeof oe.lastLoginAt<"u"&&!r.isNumber(oe.lastLoginAt))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_LAST_SIGN_IN_TIME);if(typeof oe.disableUser<"u"&&typeof oe.disableUser!="boolean")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_DISABLED_FIELD);if(typeof oe.customAttributes<"u"){let wt;try{wt=JSON.parse(oe.customAttributes)}catch(_r){throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_CLAIMS,_r.message)}const ir=[];if(t.RESERVED_CLAIMS.forEach(_r=>{Object.prototype.hasOwnProperty.call(wt,_r)&&ir.push(_r)}),ir.length>0)throw new d.FirebaseAuthError(d.AuthClientErrorCode.FORBIDDEN_CLAIM,ir.length>1?`Developer claims "${ir.join('", "')}" are reserved and cannot be specified.`:`Developer claim "${ir[0]}" is reserved and cannot be specified.`);if(oe.customAttributes.length>w)throw new d.FirebaseAuthError(d.AuthClientErrorCode.CLAIMS_TOO_LARGE,`Developer claims payload should not exceed ${w} characters.`)}if(typeof oe.passwordHash<"u"&&!r.isString(oe.passwordHash))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PASSWORD_HASH);if(typeof oe.salt<"u"&&!r.isString(oe.salt))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PASSWORD_SALT);if(typeof oe.providerUserInfo<"u"&&!r.isArray(oe.providerUserInfo))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_DATA);r.isArray(oe.providerUserInfo)&&oe.providerUserInfo.forEach(wt=>{Ae(wt)}),typeof oe.linkProviderUserInfo<"u"&&Ae(oe.linkProviderUserInfo);let It=null;if(oe.mfaInfo?It=oe.mfaInfo:oe.mfa&&oe.mfa.enrollments&&(It=oe.mfa.enrollments),It){if(!r.isArray(It))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ENROLLED_FACTORS);It.forEach(wt=>{Te(wt)})}}t.FIREBASE_AUTH_CREATE_SESSION_COOKIE=new m.ApiSettings(":createSessionCookie","POST").setRequestValidator(oe=>{if(!r.isNonEmptyString(oe.idToken))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ID_TOKEN);if(!r.isNumber(oe.validDuration)||oe.validDuration<K||oe.validDuration>J)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)}).setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.sessionCookie))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR)}),t.FIREBASE_AUTH_UPLOAD_ACCOUNT=new m.ApiSettings("/accounts:batchCreate","POST"),t.FIREBASE_AUTH_DOWNLOAD_ACCOUNT=new m.ApiSettings("/accounts:batchGet","GET").setRequestValidator(oe=>{if(typeof oe.nextPageToken<"u"&&!r.isNonEmptyString(oe.nextPageToken))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!r.isNumber(oe.maxResults)||oe.maxResults<=0||oe.maxResults>I)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${I}.`)}),t.FIREBASE_AUTH_GET_ACCOUNT_INFO=new m.ApiSettings("/accounts:lookup","POST").setRequestValidator(oe=>{if(!oe.localId&&!oe.email&&!oe.phoneNumber&&!oe.federatedUserId)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")}).setResponseValidator(oe=>{if(!oe.users||!oe.users.length)throw new d.FirebaseAuthError(d.AuthClientErrorCode.USER_NOT_FOUND)}),t.FIREBASE_AUTH_GET_ACCOUNTS_INFO=new m.ApiSettings("/accounts:lookup","POST").setRequestValidator(oe=>{if(!oe.localId&&!oe.email&&!oe.phoneNumber&&!oe.federatedUserId)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")}),t.FIREBASE_AUTH_DELETE_ACCOUNT=new m.ApiSettings("/accounts:delete","POST").setRequestValidator(oe=>{if(!oe.localId)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier")}),t.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS=new m.ApiSettings("/accounts:batchDelete","POST").setRequestValidator(oe=>{if(!oe.localIds)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifiers");if(typeof oe.force>"u"||oe.force!==!0)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing force=true field")}).setResponseValidator(oe=>{(oe.errors||[]).forEach(He=>{if(typeof He.index>"u")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server BatchDeleteAccountResponse is missing an errors.index field");if(!He.localId)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server BatchDeleteAccountResponse is missing an errors.localId field")})}),t.FIREBASE_AUTH_SET_ACCOUNT_INFO=new m.ApiSettings("/accounts:update","POST").setRequestValidator(oe=>{if(typeof oe.localId>"u")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Server request is missing user identifier");if(typeof oe.tenantId<"u")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,'"tenantId" is an invalid "UpdateRequest" property.');Se(oe,le.Update)}).setResponseValidator(oe=>{if(!oe.localId)throw new d.FirebaseAuthError(d.AuthClientErrorCode.USER_NOT_FOUND)}),t.FIREBASE_AUTH_SIGN_UP_NEW_USER=new m.ApiSettings("/accounts","POST").setRequestValidator(oe=>{if(typeof oe.customAttributes<"u")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,'"customAttributes" cannot be set when creating a new user.');if(typeof oe.validSince<"u")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,'"validSince" cannot be set when creating a new user.');if(typeof oe.tenantId<"u")throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,'"tenantId" is an invalid "CreateRequest" property.');Se(oe,le.Create)}).setResponseValidator(oe=>{if(!oe.localId)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new user")});const be=new m.ApiSettings("/accounts:sendOobCode","POST").setRequestValidator(oe=>{if(!r.isEmail(oe.email))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_EMAIL);if(typeof oe.newEmail<"u"&&!r.isEmail(oe.newEmail))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_NEW_EMAIL);if(t.EMAIL_ACTION_REQUEST_TYPES.indexOf(oe.requestType)===-1)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,`"${oe.requestType}" is not a supported email action request type.`)}).setResponseValidator(oe=>{if(!oe.oobLink)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create the email action link")}),we=new m.ApiSettings("/oauthIdpConfigs/{providerId}","GET").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get OIDC configuration")}),Ce=new m.ApiSettings("/oauthIdpConfigs/{providerId}","DELETE"),je=new m.ApiSettings("/oauthIdpConfigs?oauthIdpConfigId={providerId}","POST").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new OIDC configuration")}),Fe=new m.ApiSettings("/oauthIdpConfigs/{providerId}?updateMask={updateMask}","PATCH").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update OIDC configuration")}),Ve=new m.ApiSettings("/oauthIdpConfigs","GET").setRequestValidator(oe=>{if(typeof oe.pageToken<"u"&&!r.isNonEmptyString(oe.pageToken))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!r.isNumber(oe.pageSize)||oe.pageSize<=0||oe.pageSize>H)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${H}.`)}),Ge=new m.ApiSettings("/inboundSamlConfigs/{providerId}","GET").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get SAML configuration")}),Le=new m.ApiSettings("/inboundSamlConfigs/{providerId}","DELETE"),Be=new m.ApiSettings("/inboundSamlConfigs?inboundSamlConfigId={providerId}","POST").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new SAML configuration")}),$e=new m.ApiSettings("/inboundSamlConfigs/{providerId}?updateMask={updateMask}","PATCH").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update SAML configuration")}),he=new m.ApiSettings("/inboundSamlConfigs","GET").setRequestValidator(oe=>{if(typeof oe.pageToken<"u"&&!r.isNonEmptyString(oe.pageToken))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!r.isNumber(oe.pageSize)||oe.pageSize<=0||oe.pageSize>H)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive integer that does not exceed ${H}.`)});class p{static getErrorCode(_e){return r.isNonNullObject(_e)&&_e.error&&_e.error.message||null}static addUidToRequest(_e,He){if(!r.isUid(_e.uid))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID);return He.localId?He.localId.push(_e.uid):He.localId=[_e.uid],He}static addEmailToRequest(_e,He){if(!r.isEmail(_e.email))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_EMAIL);return He.email?He.email.push(_e.email):He.email=[_e.email],He}static addPhoneToRequest(_e,He){if(!r.isPhoneNumber(_e.phoneNumber))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PHONE_NUMBER);return He.phoneNumber?He.phoneNumber.push(_e.phoneNumber):He.phoneNumber=[_e.phoneNumber],He}static addProviderToRequest(_e,He){if(!r.isNonEmptyString(_e.providerId))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID);if(!r.isNonEmptyString(_e.providerUid))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_UID);const nt={providerId:_e.providerId,rawId:_e.providerUid};return He.federatedUserId?He.federatedUserId.push(nt):He.federatedUserId=[nt],He}constructor(_e){if(this.app=_e,typeof _e!="object"||_e===null||!("options"in _e))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"First argument passed to admin.auth() must be a valid Firebase app instance.");this.httpClient=new fe(_e)}createSessionCookie(_e,He){const nt={idToken:_e,validDuration:Math.floor(He/1e3)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_CREATE_SESSION_COOKIE,nt).then(It=>It.sessionCookie)}getAccountInfoByUid(_e){if(!r.isUid(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID));const He={localId:[_e]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_GET_ACCOUNT_INFO,He)}getAccountInfoByEmail(_e){if(!r.isEmail(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_EMAIL));const He={email:[_e]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_GET_ACCOUNT_INFO,He)}getAccountInfoByPhoneNumber(_e){if(!r.isPhoneNumber(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PHONE_NUMBER));const He={phoneNumber:[_e]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_GET_ACCOUNT_INFO,He)}getAccountInfoByFederatedUid(_e,He){if(!r.isNonEmptyString(_e)||!r.isNonEmptyString(He))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID);const nt={federatedUserId:[{providerId:_e,rawId:He}]};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_GET_ACCOUNT_INFO,nt)}getAccountInfoByIdentifiers(_e){if(_e.length===0)return Promise.resolve({users:[]});if(_e.length>S)throw new d.FirebaseAuthError(d.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,"`identifiers` parameter must have <= "+S+" entries.");let He={};for(const nt of _e)if((0,h.isUidIdentifier)(nt))He=p.addUidToRequest(nt,He);else if((0,h.isEmailIdentifier)(nt))He=p.addEmailToRequest(nt,He);else if((0,h.isPhoneIdentifier)(nt))He=p.addPhoneToRequest(nt,He);else if((0,h.isProviderIdentifier)(nt))He=p.addProviderToRequest(nt,He);else throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"Unrecognized identifier: "+nt);return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_GET_ACCOUNTS_INFO,He)}downloadAccount(_e=I,He){const nt={maxResults:_e,nextPageToken:He};return typeof nt.nextPageToken>"u"&&delete nt.nextPageToken,this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_DOWNLOAD_ACCOUNT,nt).then(It=>(It.users||(It.users=[]),It))}uploadAccount(_e,He){const nt=new a.UserImportBuilder(_e,He,wt=>{Se(wt,le.Upload)}),It=nt.buildRequest();if(r.isArray(_e)&&_e.length>_)throw new d.FirebaseAuthError(d.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,`A maximum of ${_} users can be imported at once.`);return!It.users||It.users.length===0?Promise.resolve(nt.buildResponse([])):this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_UPLOAD_ACCOUNT,It).then(wt=>{const ir=wt.error||[];return nt.buildResponse(ir)})}deleteAccount(_e){if(!r.isUid(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID));const He={localId:_e};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_DELETE_ACCOUNT,He)}deleteAccounts(_e,He){if(_e.length===0)return Promise.resolve({});if(_e.length>j)throw new d.FirebaseAuthError(d.AuthClientErrorCode.MAXIMUM_USER_COUNT_EXCEEDED,"`uids` parameter must have <= "+j+" entries.");const nt={localIds:[],force:He};return _e.forEach(It=>{if(!r.isUid(It))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID);nt.localIds.push(It)}),this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_BATCH_DELETE_ACCOUNTS,nt)}setCustomUserClaims(_e,He){if(r.isUid(_e)){if(!r.isObject(He))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"CustomUserClaims argument must be an object or null."))}else return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID));He===null&&(He={});const nt={localId:_e,customAttributes:JSON.stringify(He)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_SET_ACCOUNT_INFO,nt).then(It=>It.localId)}updateExistingAccount(_e,He){if(r.isUid(_e))if(r.isNonNullObject(He)){if(r.isNonNullObject(He.providerToLink)){if(!r.isNonEmptyString(He.providerToLink.providerId))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"providerToLink.providerId of properties argument must be a non-empty string.");if(!r.isNonEmptyString(He.providerToLink.uid))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"providerToLink.uid of properties argument must be a non-empty string.")}else if(typeof He.providersToUnlink<"u"){if(!r.isArray(He.providersToUnlink))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"providersToUnlink of properties argument must be an array of strings.");He.providersToUnlink.forEach(wt=>{if(!r.isNonEmptyString(wt))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"providersToUnlink of properties argument must be an array of strings.")})}}else return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"Properties argument must be a non-null object."));else return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID));const nt=(0,u.deepCopy)(He);nt.localId=_e;const It={displayName:"DISPLAY_NAME",photoURL:"PHOTO_URL"};nt.deleteAttribute=[];for(const wt in It)nt[wt]===null&&(nt.deleteAttribute.push(It[wt]),delete nt[wt]);if(nt.deleteAttribute.length===0&&delete nt.deleteAttribute,nt.phoneNumber===null&&(nt.deleteProvider?nt.deleteProvider.push("phone"):nt.deleteProvider=["phone"],delete nt.phoneNumber),typeof nt.providerToLink<"u"&&(nt.linkProviderUserInfo=(0,u.deepCopy)(nt.providerToLink),delete nt.providerToLink,nt.linkProviderUserInfo.rawId=nt.linkProviderUserInfo.uid,delete nt.linkProviderUserInfo.uid),typeof nt.providersToUnlink<"u"&&(r.isArray(nt.deleteProvider)||(nt.deleteProvider=[]),nt.deleteProvider=nt.deleteProvider.concat(nt.providersToUnlink),delete nt.providersToUnlink),typeof nt.photoURL<"u"&&(nt.photoUrl=nt.photoURL,delete nt.photoURL),typeof nt.disabled<"u"&&(nt.disableUser=nt.disabled,delete nt.disabled),r.isNonNullObject(nt.multiFactor)){if(nt.multiFactor.enrolledFactors===null)nt.mfa={};else if(r.isArray(nt.multiFactor.enrolledFactors)){nt.mfa={enrollments:[]};try{nt.multiFactor.enrolledFactors.forEach(wt=>{nt.mfa.enrollments.push((0,a.convertMultiFactorInfoToServerFormat)(wt))})}catch(wt){return Promise.reject(wt)}nt.mfa.enrollments.length===0&&delete nt.mfa.enrollments}delete nt.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_SET_ACCOUNT_INFO,nt).then(wt=>wt.localId)}revokeRefreshTokens(_e){if(!r.isUid(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_UID));const He={localId:_e,validSince:Math.floor(new Date().getTime()/1e3)};return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_SET_ACCOUNT_INFO,He).then(nt=>nt.localId)}createNewAccount(_e){if(!r.isNonNullObject(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"Properties argument must be a non-null object."));const He=(0,u.deepCopy)(_e);if(typeof He.photoURL<"u"&&(He.photoUrl=He.photoURL,delete He.photoURL),typeof He.uid<"u"&&(He.localId=He.uid,delete He.uid),r.isNonNullObject(He.multiFactor)){if(r.isNonEmptyArray(He.multiFactor.enrolledFactors)){const nt=[];try{He.multiFactor.enrolledFactors.forEach(It=>{if("enrollmentTime"in It)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,'"enrollmentTime" is not supported when adding second factors via "createUser()"');if("uid"in It)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,'"uid" is not supported when adding second factors via "createUser()"');nt.push((0,a.convertMultiFactorInfoToServerFormat)(It))})}catch(It){return Promise.reject(It)}He.mfaInfo=nt}delete He.multiFactor}return this.invokeRequestHandler(this.getAuthUrlBuilder(),t.FIREBASE_AUTH_SIGN_UP_NEW_USER,He).then(nt=>nt.localId)}getEmailActionLink(_e,He,nt,It){let wt={requestType:_e,email:He,returnOobLink:!0,...typeof It<"u"&&{newEmail:It}};if(typeof nt>"u"&&_e==="EMAIL_SIGNIN")return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"`actionCodeSettings` is required when `requestType` === 'EMAIL_SIGNIN'"));if(typeof nt<"u"||_e==="EMAIL_SIGNIN")try{const ir=new o.ActionCodeSettingsBuilder(nt);wt=(0,u.deepExtend)(wt,ir.buildRequest())}catch(ir){return Promise.reject(ir)}return _e==="VERIFY_AND_CHANGE_EMAIL"&&typeof It>"u"?Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,"`newEmail` is required when `requestType` === 'VERIFY_AND_CHANGE_EMAIL'")):this.invokeRequestHandler(this.getAuthUrlBuilder(),be,wt).then(ir=>ir.oobLink)}getOAuthIdpConfig(_e){return v.OIDCConfig.isProviderId(_e)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),we,{},{providerId:_e}):Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID))}listOAuthIdpConfigs(_e=H,He){const nt={pageSize:_e};return typeof He<"u"&&(nt.pageToken=He),this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Ve,nt).then(It=>(It.oauthIdpConfigs||(It.oauthIdpConfigs=[],delete It.nextPageToken),It))}deleteOAuthIdpConfig(_e){return v.OIDCConfig.isProviderId(_e)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Ce,{},{providerId:_e}).then(()=>{}):Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID))}createOAuthIdpConfig(_e){let He;try{He=v.OIDCConfig.buildServerRequest(_e)||{}}catch(It){return Promise.reject(It)}const nt=_e.providerId;return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),je,He,{providerId:nt}).then(It=>{if(!v.OIDCConfig.getProviderIdFromResourceName(It.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new OIDC provider configuration");return It})}updateOAuthIdpConfig(_e,He){if(!v.OIDCConfig.isProviderId(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID));let nt;try{nt=v.OIDCConfig.buildServerRequest(He,!0)||{}}catch(wt){return Promise.reject(wt)}const It=c.generateUpdateMask(nt);return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Fe,nt,{providerId:_e,updateMask:It.join(",")}).then(wt=>{if(!v.OIDCConfig.getProviderIdFromResourceName(wt.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update OIDC provider configuration");return wt})}getInboundSamlConfig(_e){return v.SAMLConfig.isProviderId(_e)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Ge,{},{providerId:_e}):Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID))}listInboundSamlConfigs(_e=H,He){const nt={pageSize:_e};return typeof He<"u"&&(nt.pageToken=He),this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),he,nt).then(It=>(It.inboundSamlConfigs||(It.inboundSamlConfigs=[],delete It.nextPageToken),It))}deleteInboundSamlConfig(_e){return v.SAMLConfig.isProviderId(_e)?this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Le,{},{providerId:_e}).then(()=>{}):Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID))}createInboundSamlConfig(_e){let He;try{He=v.SAMLConfig.buildServerRequest(_e)||{}}catch(It){return Promise.reject(It)}const nt=_e.providerId;return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),Be,He,{providerId:nt}).then(It=>{if(!v.SAMLConfig.getProviderIdFromResourceName(It.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new SAML provider configuration");return It})}updateInboundSamlConfig(_e,He){if(!v.SAMLConfig.isProviderId(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PROVIDER_ID));let nt;try{nt=v.SAMLConfig.buildServerRequest(He,!0)||{}}catch(wt){return Promise.reject(wt)}const It=c.generateUpdateMask(nt);return this.invokeRequestHandler(this.getProjectConfigUrlBuilder(),$e,nt,{providerId:_e,updateMask:It.join(",")}).then(wt=>{if(!v.SAMLConfig.getProviderIdFromResourceName(wt.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update SAML provider configuration");return wt})}invokeRequestHandler(_e,He,nt,It){return _e.getUrl(He.getEndpoint(),It).then(wt=>{nt&&He.getRequestValidator()(nt);const ir={method:He.getHttpMethod(),url:wt,headers:y,data:nt,timeout:A};return this.httpClient.send(ir)}).then(wt=>(He.getResponseValidator()(wt.data),wt.data)).catch(wt=>{if(wt instanceof m.RequestResponseError){const ir=wt.response.data,_r=p.getErrorCode(ir);throw _r?d.FirebaseAuthError.fromServerError(_r,void 0,ir):new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"Error returned from server: "+ir+". Additionally, an internal error occurred while attempting to extract the errorcode from the error.")}throw wt})}getAuthUrlBuilder(){return this.authUrlBuilder||(this.authUrlBuilder=this.newAuthUrlBuilder()),this.authUrlBuilder}getProjectConfigUrlBuilder(){return this.projectConfigUrlBuilder||(this.projectConfigUrlBuilder=this.newProjectConfigUrlBuilder()),this.projectConfigUrlBuilder}}t.AbstractAuthRequestHandler=p;const V=new m.ApiSettings("/config","GET").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get project config")}),R=new m.ApiSettings("/config?updateMask={updateMask}","PATCH").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update project config")}),ce=new m.ApiSettings("/tenants/{tenantId}","GET").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to get tenant")}),Re=new m.ApiSettings("/tenants/{tenantId}","DELETE"),ke=new m.ApiSettings("/tenants/{tenantId}?updateMask={updateMask}","PATCH").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name)||!s.Tenant.getTenantIdFromResourceName(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to update tenant")}),qe=new m.ApiSettings("/tenants","GET").setRequestValidator(oe=>{if(typeof oe.pageToken<"u"&&!r.isNonEmptyString(oe.pageToken))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_PAGE_TOKEN);if(!r.isNumber(oe.pageSize)||oe.pageSize<=0||oe.pageSize>ue)throw new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_ARGUMENT,`Required "maxResults" must be a positive non-zero number that does not exceed the allowed ${ue}.`)}),g=new m.ApiSettings("/tenants","POST").setResponseValidator(oe=>{if(!r.isNonEmptyString(oe.name)||!s.Tenant.getTenantIdFromResourceName(oe.name))throw new d.FirebaseAuthError(d.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Unable to create new tenant")});class ee extends p{constructor(_e){super(_e),this.authResourceUrlBuilder=new ne(_e,"v2")}newAuthUrlBuilder(){return new ne(this.app,"v1")}newProjectConfigUrlBuilder(){return new ne(this.app,"v2")}getProjectConfig(){return this.invokeRequestHandler(this.authResourceUrlBuilder,V,{},{}).then(_e=>_e)}updateProjectConfig(_e){try{const He=E.ProjectConfig.buildServerRequest(_e),nt=c.generateUpdateMask(He);return this.invokeRequestHandler(this.authResourceUrlBuilder,R,He,{updateMask:nt.join(",")}).then(It=>It)}catch(He){return Promise.reject(He)}}getTenant(_e){return r.isNonEmptyString(_e)?this.invokeRequestHandler(this.authResourceUrlBuilder,ce,{},{tenantId:_e}).then(He=>He):Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_TENANT_ID))}listTenants(_e=ue,He){const nt={pageSize:_e,pageToken:He};return typeof nt.pageToken>"u"&&delete nt.pageToken,this.invokeRequestHandler(this.authResourceUrlBuilder,qe,nt).then(It=>(It.tenants||(It.tenants=[],delete It.nextPageToken),It))}deleteTenant(_e){return r.isNonEmptyString(_e)?this.invokeRequestHandler(this.authResourceUrlBuilder,Re,void 0,{tenantId:_e}).then(()=>{}):Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_TENANT_ID))}createTenant(_e){try{const He=s.Tenant.buildServerRequest(_e,!0);return this.invokeRequestHandler(this.authResourceUrlBuilder,g,He).then(nt=>nt)}catch(He){return Promise.reject(He)}}updateTenant(_e,He){if(!r.isNonEmptyString(_e))return Promise.reject(new d.FirebaseAuthError(d.AuthClientErrorCode.INVALID_TENANT_ID));try{const nt=s.Tenant.buildServerRequest(He,!1),It=c.generateUpdateMask(nt,["testPhoneNumbers"]);return this.invokeRequestHandler(this.authResourceUrlBuilder,ke,nt,{tenantId:_e,updateMask:It.join(",")}).then(wt=>wt)}catch(nt){return Promise.reject(nt)}}}t.AuthRequestHandler=ee;class ae extends p{constructor(_e,He){super(_e),this.tenantId=He}newAuthUrlBuilder(){return new ye(this.app,"v1",this.tenantId)}newProjectConfigUrlBuilder(){return new ye(this.app,"v2",this.tenantId)}uploadAccount(_e,He){return _e.forEach((nt,It)=>{if(r.isNonEmptyString(nt.tenantId)&&nt.tenantId!==this.tenantId)throw new d.FirebaseAuthError(d.AuthClientErrorCode.MISMATCHING_TENANT_ID,`UserRecord of index "${It}" has mismatching tenant ID "${nt.tenantId}"`)}),super.uploadAccount(_e,He)}}t.TenantAwareAuthRequestHandler=ae;function l(){return e.FIREBASE_AUTH_EMULATOR_HOST}function X(){return!!l()}}(authApiRequest)),authApiRequest}var tenantManager={},baseAuth={},tokenGenerator$1={},cryptoSigner={};/*! firebase-admin v13.4.0 */var hasRequiredCryptoSigner;function requireCryptoSigner(){if(hasRequiredCryptoSigner)return cryptoSigner;hasRequiredCryptoSigner=1;/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(cryptoSigner,"__esModule",{value:!0}),cryptoSigner.CryptoSignerErrorCode=cryptoSigner.CryptoSignerError=cryptoSigner.IAMSigner=cryptoSigner.ServiceAccountSigner=void 0,cryptoSigner.cryptoSignerFromApp=a;const t=requireCredentialInternal(),e=requireApiRequest(),r=requireUtils$2(),u=requireValidator$1(),d="RS256";class m{constructor(v){if(this.credential=v,this.algorithm=d,!v)throw new o({code:s.INVALID_CREDENTIAL,message:"INTERNAL ASSERT: Must provide a service account credential to initialize ServiceAccountSigner."})}sign(v){const y=require$$1$3.createSign("RSA-SHA256");return y.update(v),Promise.resolve(y.sign(this.credential.privateKey))}getAccountId(){return Promise.resolve(this.credential.clientEmail)}}cryptoSigner.ServiceAccountSigner=m;class c{constructor(v,E){if(this.algorithm=d,!v)throw new o({code:s.INVALID_ARGUMENT,message:"INTERNAL ASSERT: Must provide a HTTP client to initialize IAMSigner."});if(E&&(typeof E!="object"||E===null||!("options"in E)))throw new o({code:s.INVALID_ARGUMENT,message:"INTERNAL ASSERT: Must provide a valid Firebase app instance."});this.httpClient=v,this.app=E}sign(v){return this.getAccountId().then(E=>{const y={method:"POST",url:`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${E}:signBlob`,data:{payload:v.toString("base64")}};return this.httpClient.send(y)}).then(E=>Buffer.from(E.data.signedBlob,"base64")).catch(E=>{throw E instanceof e.RequestResponseError?new o({code:s.SERVER_ERROR,message:E.message,cause:E}):E})}async getAccountId(){if(u.isNonEmptyString(this.serviceAccountId))return this.serviceAccountId;if(this.app){const y=await r.findServiceAccountEmail(this.app);if(y)return this.serviceAccountId=y,y}const v={method:"GET",url:"http://metadata/computeMetadata/v1/instance/service-accounts/default/email",headers:{"Metadata-Flavor":"Google"}};return new e.HttpClient().send(v).then(y=>{if(!y.text)throw new o({code:s.INTERNAL_ERROR,message:"HTTP Response missing payload"});return this.serviceAccountId=y.text,y.text}).catch(y=>{throw new o({code:s.INVALID_CREDENTIAL,message:`Failed to determine service account. Make sure to initialize the SDK with a service account credential. Alternatively specify a service account with iam.serviceAccounts.signBlob permission. Original error: ${y}`})})}}cryptoSigner.IAMSigner=c;function a(h){const v=h.options.credential;return v instanceof t.ServiceAccountCredential?new m(v):new c(new e.AuthorizedHttpClient(h),h)}class o extends Error{constructor(v){super(v.message),this.errorInfo=v,this.__proto__=o.prototype}get code(){return this.errorInfo.code}get message(){return this.errorInfo.message}get cause(){return this.errorInfo.cause}}cryptoSigner.CryptoSignerError=o;class s{}return cryptoSigner.CryptoSignerErrorCode=s,s.INVALID_ARGUMENT="invalid-argument",s.INTERNAL_ERROR="internal-error",s.INVALID_CREDENTIAL="invalid-credential",s.SERVER_ERROR="server-error",cryptoSigner}/*! firebase-admin v13.4.0 */var hasRequiredTokenGenerator$1;function requireTokenGenerator$1(){return hasRequiredTokenGenerator$1||(hasRequiredTokenGenerator$1=1,function(t){/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseTokenGenerator=t.EmulatedSigner=t.BLACKLISTED_CLAIMS=void 0,t.handleCryptoSignerError=h;const e=requireError(),r=requireCryptoSigner(),u=requireValidator$1(),d=requireUtils$2(),m="none",c=60*60;t.BLACKLISTED_CLAIMS=["acr","amr","at_hash","aud","auth_time","azp","cnf","c_hash","exp","iat","iss","jti","nbf","nonce"];const a="https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit";class o{constructor(){this.algorithm=m}sign(y){return Promise.resolve(Buffer.from(""))}getAccountId(){return Promise.resolve("firebase-auth-emulator@example.com")}}t.EmulatedSigner=o;class s{constructor(y,A){if(this.tenantId=A,!u.isNonNullObject(y))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_CREDENTIAL,"INTERNAL ASSERT: Must provide a CryptoSigner to use FirebaseTokenGenerator.");if(typeof this.tenantId<"u"&&!u.isNonEmptyString(this.tenantId))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"`tenantId` argument must be a non-empty string.");this.signer=y}createCustomToken(y,A){let w;if(u.isNonEmptyString(y)?y.length>128?w="`uid` argument must a uid with less than or equal to 128 characters.":this.isDeveloperClaimsValid_(A)||(w="`developerClaims` argument must be a valid, non-null object containing the developer claims."):w="`uid` argument must be a non-empty string uid.",w)throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,w);const I={};if(typeof A<"u"){for(const _ in A)if(Object.prototype.hasOwnProperty.call(A,_)){if(t.BLACKLISTED_CLAIMS.indexOf(_)!==-1)throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,`Developer claim "${_}" is reserved and cannot be specified.`);I[_]=A[_]}}return this.signer.getAccountId().then(_=>{const S={alg:this.signer.algorithm,typ:"JWT"},j=Math.floor(Date.now()/1e3),K={aud:a,iat:j,exp:j+c,iss:_,sub:_,uid:y};this.tenantId&&(K.tenant_id=this.tenantId),Object.keys(I).length>0&&(K.claims=I);const J=`${this.encodeSegment(S)}.${this.encodeSegment(K)}`,H=this.signer.sign(Buffer.from(J));return Promise.all([J,H])}).then(([_,S])=>`${_}.${this.encodeSegment(S)}`).catch(_=>{throw h(_)})}encodeSegment(y){const A=y instanceof Buffer?y:Buffer.from(JSON.stringify(y));return(0,d.toWebSafeBase64)(A).replace(/=+$/,"")}isDeveloperClaimsValid_(y){return typeof y>"u"?!0:u.isNonNullObject(y)}}t.FirebaseTokenGenerator=s;function h(E){if(!(E instanceof r.CryptoSignerError))return E;if(E.code===r.CryptoSignerErrorCode.SERVER_ERROR&&u.isNonNullObject(E.cause)){const A=E.cause.response.data;if(u.isNonNullObject(A)&&A.error){const w=A.error.status,_=`${A.error.message}; Please refer to https://firebase.google.com/docs/auth/admin/create-custom-tokens for more details on how to use and troubleshoot this feature.`;return e.FirebaseAuthError.fromServerError(w,_,A)}return new e.FirebaseAuthError(e.AuthClientErrorCode.INTERNAL_ERROR,"Error returned from server: "+A+". Additionally, an internal error occurred while attempting to extract the errorcode from the error.")}return new e.FirebaseAuthError(v(E.code),E.message)}function v(E){switch(E){case r.CryptoSignerErrorCode.INVALID_CREDENTIAL:return e.AuthClientErrorCode.INVALID_CREDENTIAL;case r.CryptoSignerErrorCode.INVALID_ARGUMENT:return e.AuthClientErrorCode.INVALID_ARGUMENT;default:return e.AuthClientErrorCode.INTERNAL_ERROR}}}(tokenGenerator$1)),tokenGenerator$1}var tokenVerifier$1={},jwt={},jws={},dataStream,hasRequiredDataStream;function requireDataStream(){if(hasRequiredDataStream)return dataStream;hasRequiredDataStream=1;var t=requireSafeBuffer().Buffer,e=require$$1$3,r=require$$1$3;function u(d){if(this.buffer=null,this.writable=!0,this.readable=!0,!d)return this.buffer=t.alloc(0),this;if(typeof d.pipe=="function")return this.buffer=t.alloc(0),d.pipe(this),this;if(d.length||typeof d=="object")return this.buffer=d,this.writable=!1,process.nextTick((function(){this.emit("end",d),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof d+")")}return r.inherits(u,e),u.prototype.write=function(m){this.buffer=t.concat([this.buffer,t.from(m)]),this.emit("data",m)},u.prototype.end=function(m){m&&this.write(m),this.emit("end",m),this.emit("close"),this.writable=!1,this.readable=!1},dataStream=u,dataStream}var jwa,hasRequiredJwa;function requireJwa(){if(hasRequiredJwa)return jwa;hasRequiredJwa=1;var t=requireSafeBuffer().Buffer,e=require$$1$3,r=requireEcdsaSigFormatter(),u=require$$1$3,d=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,m="secret must be a string or buffer",c="key must be a string or a buffer",a="key must be a string, a buffer or an object",o=typeof e.createPublicKey=="function";o&&(c+=" or a KeyObject",m+="or a KeyObject");function s(ne){if(!t.isBuffer(ne)&&typeof ne!="string"&&(!o||typeof ne!="object"||typeof ne.type!="string"||typeof ne.asymmetricKeyType!="string"||typeof ne.export!="function"))throw A(c)}function h(ne){if(!t.isBuffer(ne)&&typeof ne!="string"&&typeof ne!="object")throw A(a)}function v(ne){if(!t.isBuffer(ne)){if(typeof ne=="string")return ne;if(!o||typeof ne!="object"||ne.type!=="secret"||typeof ne.export!="function")throw A(m)}}function E(ne){return ne.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(ne){ne=ne.toString();var ye=4-ne.length%4;if(ye!==4)for(var fe=0;fe<ye;++fe)ne+="=";return ne.replace(/\-/g,"+").replace(/_/g,"/")}function A(ne){var ye=[].slice.call(arguments,1),fe=u.format.bind(u,ne).apply(null,ye);return new TypeError(fe)}function w(ne){return t.isBuffer(ne)||typeof ne=="string"}function I(ne){return w(ne)||(ne=JSON.stringify(ne)),ne}function _(ne){return function(fe,Te){v(Te),fe=I(fe);var Ae=e.createHmac("sha"+ne,Te),Se=(Ae.update(fe),Ae.digest("base64"));return E(Se)}}var S,j="timingSafeEqual"in e?function(ye,fe){return ye.byteLength!==fe.byteLength?!1:e.timingSafeEqual(ye,fe)}:function(ye,fe){return S||(S=requireBufferEqualConstantTime()),S(ye,fe)};function K(ne){return function(fe,Te,Ae){var Se=_(ne)(fe,Ae);return j(t.from(Te),t.from(Se))}}function J(ne){return function(fe,Te){h(Te),fe=I(fe);var Ae=e.createSign("RSA-SHA"+ne),Se=(Ae.update(fe),Ae.sign(Te,"base64"));return E(Se)}}function H(ne){return function(fe,Te,Ae){s(Ae),fe=I(fe),Te=y(Te);var Se=e.createVerify("RSA-SHA"+ne);return Se.update(fe),Se.verify(Ae,Te,"base64")}}function U(ne){return function(fe,Te){h(Te),fe=I(fe);var Ae=e.createSign("RSA-SHA"+ne),Se=(Ae.update(fe),Ae.sign({key:Te,padding:e.constants.RSA_PKCS1_PSS_PADDING,saltLength:e.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return E(Se)}}function P(ne){return function(fe,Te,Ae){s(Ae),fe=I(fe),Te=y(Te);var Se=e.createVerify("RSA-SHA"+ne);return Se.update(fe),Se.verify({key:Ae,padding:e.constants.RSA_PKCS1_PSS_PADDING,saltLength:e.constants.RSA_PSS_SALTLEN_DIGEST},Te,"base64")}}function Z(ne){var ye=J(ne);return function(){var Te=ye.apply(null,arguments);return Te=r.derToJose(Te,"ES"+ne),Te}}function ie(ne){var ye=H(ne);return function(Te,Ae,Se){Ae=r.joseToDer(Ae,"ES"+ne).toString("base64");var be=ye(Te,Ae,Se);return be}}function ue(){return function(){return""}}function le(){return function(ye,fe){return fe===""}}return jwa=function(ye){var fe={hs:_,rs:J,ps:U,es:Z,none:ue},Te={hs:K,rs:H,ps:P,es:ie,none:le},Ae=ye.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!Ae)throw A(d,ye);var Se=(Ae[1]||Ae[3]).toLowerCase(),be=Ae[2];return{sign:fe[Se](be),verify:Te[Se](be)}},jwa}var tostring,hasRequiredTostring;function requireTostring(){if(hasRequiredTostring)return tostring;hasRequiredTostring=1;var t=require$$1$3.Buffer;return tostring=function(r){return typeof r=="string"?r:typeof r=="number"||t.isBuffer(r)?r.toString():JSON.stringify(r)},tostring}var signStream,hasRequiredSignStream;function requireSignStream(){if(hasRequiredSignStream)return signStream;hasRequiredSignStream=1;var t=requireSafeBuffer().Buffer,e=requireDataStream(),r=requireJwa(),u=require$$1$3,d=requireTostring(),m=require$$1$3;function c(h,v){return t.from(h,v).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a(h,v,E){E=E||"utf8";var y=c(d(h),"binary"),A=c(d(v),E);return m.format("%s.%s",y,A)}function o(h){var v=h.header,E=h.payload,y=h.secret||h.privateKey,A=h.encoding,w=r(v.alg),I=a(v,E,A),_=w.sign(I,y);return m.format("%s.%s",I,_)}function s(h){var v=h.secret||h.privateKey||h.key,E=new e(v);this.readable=!0,this.header=h.header,this.encoding=h.encoding,this.secret=this.privateKey=this.key=E,this.payload=new e(h.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}return m.inherits(s,u),s.prototype.sign=function(){try{var v=o({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",v),this.emit("data",v),this.emit("end"),this.readable=!1,v}catch(E){this.readable=!1,this.emit("error",E),this.emit("close")}},s.sign=o,signStream=s,signStream}var verifyStream,hasRequiredVerifyStream;function requireVerifyStream(){if(hasRequiredVerifyStream)return verifyStream;hasRequiredVerifyStream=1;var t=requireSafeBuffer().Buffer,e=requireDataStream(),r=requireJwa(),u=require$$1$3,d=requireTostring(),m=require$$1$3,c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function a(_){return Object.prototype.toString.call(_)==="[object Object]"}function o(_){if(a(_))return _;try{return JSON.parse(_)}catch{return}}function s(_){var S=_.split(".",1)[0];return o(t.from(S,"base64").toString("binary"))}function h(_){return _.split(".",2).join(".")}function v(_){return _.split(".")[2]}function E(_,S){S=S||"utf8";var j=_.split(".")[1];return t.from(j,"base64").toString(S)}function y(_){return c.test(_)&&!!s(_)}function A(_,S,j){if(!S){var K=new Error("Missing algorithm parameter for jws.verify");throw K.code="MISSING_ALGORITHM",K}_=d(_);var J=v(_),H=h(_),U=r(S);return U.verify(H,J,j)}function w(_,S){if(S=S||{},_=d(_),!y(_))return null;var j=s(_);if(!j)return null;var K=E(_);return(j.typ==="JWT"||S.json)&&(K=JSON.parse(K,S.encoding)),{header:j,payload:K,signature:v(_)}}function I(_){_=_||{};var S=_.secret||_.publicKey||_.key,j=new e(S);this.readable=!0,this.algorithm=_.algorithm,this.encoding=_.encoding,this.secret=this.publicKey=this.key=j,this.signature=new e(_.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}return m.inherits(I,u),I.prototype.verify=function(){try{var S=A(this.signature.buffer,this.algorithm,this.key.buffer),j=w(this.signature.buffer,this.encoding);return this.emit("done",S,j),this.emit("data",S),this.emit("end"),this.readable=!1,S}catch(K){this.readable=!1,this.emit("error",K),this.emit("close")}},I.decode=w,I.isValid=y,I.verify=A,verifyStream=I,verifyStream}var hasRequiredJws;function requireJws(){if(hasRequiredJws)return jws;hasRequiredJws=1;var t=requireSignStream(),e=requireVerifyStream(),r=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return jws.ALGORITHMS=r,jws.sign=t.sign,jws.verify=e.verify,jws.decode=e.decode,jws.isValid=e.isValid,jws.createSign=function(d){return new t(d)},jws.createVerify=function(d){return new e(d)},jws}var decode$2,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$2;hasRequiredDecode=1;var t=requireJws();return decode$2=function(e,r){r=r||{};var u=t.decode(e,r);if(!u)return null;var d=u.payload;if(typeof d=="string")try{var m=JSON.parse(d);m!==null&&typeof m=="object"&&(d=m)}catch{}return r.complete===!0?{header:u.header,payload:d,signature:u.signature}:d},decode$2}var JsonWebTokenError_1,hasRequiredJsonWebTokenError;function requireJsonWebTokenError(){if(hasRequiredJsonWebTokenError)return JsonWebTokenError_1;hasRequiredJsonWebTokenError=1;var t=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,JsonWebTokenError_1=t,JsonWebTokenError_1}var NotBeforeError_1,hasRequiredNotBeforeError;function requireNotBeforeError(){if(hasRequiredNotBeforeError)return NotBeforeError_1;hasRequiredNotBeforeError=1;var t=requireJsonWebTokenError(),e=function(r,u){t.call(this,r),this.name="NotBeforeError",this.date=u};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,NotBeforeError_1=e,NotBeforeError_1}var TokenExpiredError_1,hasRequiredTokenExpiredError;function requireTokenExpiredError(){if(hasRequiredTokenExpiredError)return TokenExpiredError_1;hasRequiredTokenExpiredError=1;var t=requireJsonWebTokenError(),e=function(r,u){t.call(this,r),this.name="TokenExpiredError",this.expiredAt=u};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,TokenExpiredError_1=e,TokenExpiredError_1}var timespan,hasRequiredTimespan;function requireTimespan(){if(hasRequiredTimespan)return timespan;hasRequiredTimespan=1;var t=requireMs();return timespan=function(e,r){var u=r||Math.floor(Date.now()/1e3);if(typeof e=="string"){var d=t(e);return typeof d>"u"?void 0:Math.floor(u+d/1e3)}else return typeof e=="number"?u+e:void 0},timespan}var re$1={exports:{}},constants$1,hasRequiredConstants$1;function requireConstants$1(){if(hasRequiredConstants$1)return constants$1;hasRequiredConstants$1=1;const t="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,u=16,d=e-6;return constants$1={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:u,MAX_SAFE_BUILD_LENGTH:d,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants$1}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var t={};return debug_1=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{},debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:u,MAX_LENGTH:d}=requireConstants$1(),m=requireDebug();e=t.exports={};const c=e.re=[],a=e.safeRe=[],o=e.src=[],s=e.safeSrc=[],h=e.t={};let v=0;const E="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",d],[E,u]],A=I=>{for(const[_,S]of y)I=I.split(`${_}*`).join(`${_}{0,${S}}`).split(`${_}+`).join(`${_}{1,${S}}`);return I},w=(I,_,S)=>{const j=A(_),K=v++;m(I,K,_),h[I]=K,o[K]=_,s[K]=j,c[K]=new RegExp(_,S?"g":void 0),a[K]=new RegExp(j,S?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","\\d+"),w("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${E}*`),w("MAINVERSION",`(${o[h.NUMERICIDENTIFIER]})\\.(${o[h.NUMERICIDENTIFIER]})\\.(${o[h.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${o[h.NUMERICIDENTIFIERLOOSE]})\\.(${o[h.NUMERICIDENTIFIERLOOSE]})\\.(${o[h.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${o[h.NONNUMERICIDENTIFIER]}|${o[h.NUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${o[h.NONNUMERICIDENTIFIER]}|${o[h.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASE",`(?:-(${o[h.PRERELEASEIDENTIFIER]}(?:\\.${o[h.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${o[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[h.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER",`${E}+`),w("BUILD",`(?:\\+(${o[h.BUILDIDENTIFIER]}(?:\\.${o[h.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${o[h.MAINVERSION]}${o[h.PRERELEASE]}?${o[h.BUILD]}?`),w("FULL",`^${o[h.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${o[h.MAINVERSIONLOOSE]}${o[h.PRERELEASELOOSE]}?${o[h.BUILD]}?`),w("LOOSE",`^${o[h.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${o[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${o[h.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${o[h.XRANGEIDENTIFIER]})(?:\\.(${o[h.XRANGEIDENTIFIER]})(?:\\.(${o[h.XRANGEIDENTIFIER]})(?:${o[h.PRERELEASE]})?${o[h.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${o[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[h.XRANGEIDENTIFIERLOOSE]})(?:${o[h.PRERELEASELOOSE]})?${o[h.BUILD]}?)?)?`),w("XRANGE",`^${o[h.GTLT]}\\s*${o[h.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${o[h.GTLT]}\\s*${o[h.XRANGEPLAINLOOSE]}$`),w("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),w("COERCE",`${o[h.COERCEPLAIN]}(?:$|[^\\d])`),w("COERCEFULL",o[h.COERCEPLAIN]+`(?:${o[h.PRERELEASE]})?(?:${o[h.BUILD]})?(?:$|[^\\d])`),w("COERCERTL",o[h.COERCE],!0),w("COERCERTLFULL",o[h.COERCEFULL],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${o[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",w("TILDE",`^${o[h.LONETILDE]}${o[h.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${o[h.LONETILDE]}${o[h.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${o[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",w("CARET",`^${o[h.LONECARET]}${o[h.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${o[h.LONECARET]}${o[h.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${o[h.GTLT]}\\s*(${o[h.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${o[h.GTLT]}\\s*(${o[h.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${o[h.GTLT]}\\s*(${o[h.LOOSEPLAIN]}|${o[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${o[h.XRANGEPLAIN]})\\s+-\\s+(${o[h.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${o[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[h.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re$1,re$1.exports)),re$1.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return parseOptions_1=u=>u?typeof u!="object"?t:u:e,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const t=/^[0-9]+$/,e=(u,d)=>{const m=t.test(u),c=t.test(d);return m&&c&&(u=+u,d=+d),u===d?0:m&&!c?-1:c&&!m?1:u<d?-1:1};return identifiers={compareIdentifiers:e,rcompareIdentifiers:(u,d)=>e(d,u)},identifiers}var semver$1,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const t=requireDebug(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=requireConstants$1(),{safeRe:u,t:d}=requireRe(),m=requireParseOptions(),{compareIdentifiers:c}=requireIdentifiers();class a{constructor(s,h){if(h=m(h),s instanceof a){if(s.loose===!!h.loose&&s.includePrerelease===!!h.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",s,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const v=s.trim().match(h.loose?u[d.LOOSE]:u[d.FULL]);if(!v)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+v[1],this.minor=+v[2],this.patch=+v[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");v[4]?this.prerelease=v[4].split(".").map(E=>{if(/^[0-9]+$/.test(E)){const y=+E;if(y>=0&&y<r)return y}return E}):this.prerelease=[],this.build=v[5]?v[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(t("SemVer.compare",this.version,this.options,s),!(s instanceof a)){if(typeof s=="string"&&s===this.version)return 0;s=new a(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof a||(s=new a(s,this.options)),c(this.major,s.major)||c(this.minor,s.minor)||c(this.patch,s.patch)}comparePre(s){if(s instanceof a||(s=new a(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let h=0;do{const v=this.prerelease[h],E=s.prerelease[h];if(t("prerelease compare",h,v,E),v===void 0&&E===void 0)return 0;if(E===void 0)return 1;if(v===void 0)return-1;if(v===E)continue;return c(v,E)}while(++h)}compareBuild(s){s instanceof a||(s=new a(s,this.options));let h=0;do{const v=this.build[h],E=s.build[h];if(t("build compare",h,v,E),v===void 0&&E===void 0)return 0;if(E===void 0)return 1;if(v===void 0)return-1;if(v===E)continue;return c(v,E)}while(++h)}inc(s,h,v){if(s.startsWith("pre")){if(!h&&v===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const E=`-${h}`.match(this.options.loose?u[d.PRERELEASELOOSE]:u[d.PRERELEASE]);if(!E||E[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,v),this.inc("pre",h,v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,v),this.inc("pre",h,v);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const E=Number(v)?1:0;if(this.prerelease.length===0)this.prerelease=[E];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(h===this.prerelease.join(".")&&v===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(E)}}if(h){let y=[h,E];v===!1&&(y=[h]),c(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${s}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=a,semver$1}var parse_1$1,hasRequiredParse$3;function requireParse$3(){if(hasRequiredParse$3)return parse_1$1;hasRequiredParse$3=1;const t=requireSemver$1();return parse_1$1=(r,u,d=!1)=>{if(r instanceof t)return r;try{return new t(r,u)}catch(m){if(!d)return null;throw m}},parse_1$1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const t=requireParse$3();return valid_1=(r,u)=>{const d=t(r,u);return d?d.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const t=requireParse$3();return clean_1=(r,u)=>{const d=t(r.trim().replace(/^[=v]+/,""),u);return d?d.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const t=requireSemver$1();return inc_1=(r,u,d,m,c)=>{typeof d=="string"&&(c=m,m=d,d=void 0);try{return new t(r instanceof t?r.version:r,d).inc(u,m,c).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const t=requireParse$3();return diff_1=(r,u)=>{const d=t(r,null,!0),m=t(u,null,!0),c=d.compare(m);if(c===0)return null;const a=c>0,o=a?d:m,s=a?m:d,h=!!o.prerelease.length;if(!!s.prerelease.length&&!h){if(!s.patch&&!s.minor)return"major";if(s.compareMain(o)===0)return s.minor&&!s.patch?"minor":"patch"}const E=h?"pre":"";return d.major!==m.major?E+"major":d.minor!==m.minor?E+"minor":d.patch!==m.patch?E+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const t=requireSemver$1();return major_1=(r,u)=>new t(r,u).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const t=requireSemver$1();return minor_1=(r,u)=>new t(r,u).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const t=requireSemver$1();return patch_1=(r,u)=>new t(r,u).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const t=requireParse$3();return prerelease_1=(r,u)=>{const d=t(r,u);return d&&d.prerelease.length?d.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const t=requireSemver$1();return compare_1=(r,u,d)=>new t(r,d).compare(new t(u,d)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const t=requireCompare();return rcompare_1=(r,u,d)=>t(u,r,d),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const t=requireCompare();return compareLoose_1=(r,u)=>t(r,u,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const t=requireSemver$1();return compareBuild_1=(r,u,d)=>{const m=new t(r,d),c=new t(u,d);return m.compare(c)||m.compareBuild(c)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const t=requireCompareBuild();return sort_1=(r,u)=>r.sort((d,m)=>t(d,m,u)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const t=requireCompareBuild();return rsort_1=(r,u)=>r.sort((d,m)=>t(m,d,u)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const t=requireCompare();return gt_1=(r,u,d)=>t(r,u,d)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const t=requireCompare();return lt_1=(r,u,d)=>t(r,u,d)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const t=requireCompare();return eq_1=(r,u,d)=>t(r,u,d)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const t=requireCompare();return neq_1=(r,u,d)=>t(r,u,d)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const t=requireCompare();return gte_1=(r,u,d)=>t(r,u,d)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const t=requireCompare();return lte_1=(r,u,d)=>t(r,u,d)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const t=requireEq(),e=requireNeq(),r=requireGt(),u=requireGte(),d=requireLt(),m=requireLte();return cmp_1=(a,o,s,h)=>{switch(o){case"===":return typeof a=="object"&&(a=a.version),typeof s=="object"&&(s=s.version),a===s;case"!==":return typeof a=="object"&&(a=a.version),typeof s=="object"&&(s=s.version),a!==s;case"":case"=":case"==":return t(a,s,h);case"!=":return e(a,s,h);case">":return r(a,s,h);case">=":return u(a,s,h);case"<":return d(a,s,h);case"<=":return m(a,s,h);default:throw new TypeError(`Invalid operator: ${o}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const t=requireSemver$1(),e=requireParse$3(),{safeRe:r,t:u}=requireRe();return coerce_1=(m,c)=>{if(m instanceof t)return m;if(typeof m=="number"&&(m=String(m)),typeof m!="string")return null;c=c||{};let a=null;if(!c.rtl)a=m.match(c.includePrerelease?r[u.COERCEFULL]:r[u.COERCE]);else{const y=c.includePrerelease?r[u.COERCERTLFULL]:r[u.COERCERTL];let A;for(;(A=y.exec(m))&&(!a||a.index+a[0].length!==m.length);)(!a||A.index+A[0].length!==a.index+a[0].length)&&(a=A),y.lastIndex=A.index+A[1].length+A[2].length;y.lastIndex=-1}if(a===null)return null;const o=a[2],s=a[3]||"0",h=a[4]||"0",v=c.includePrerelease&&a[5]?`-${a[5]}`:"",E=c.includePrerelease&&a[6]?`+${a[6]}`:"";return e(`${o}.${s}.${h}${v}${E}`,c)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class t{constructor(){this.max=1e3,this.map=new Map}get(r){const u=this.map.get(r);if(u!==void 0)return this.map.delete(r),this.map.set(r,u),u}delete(r){return this.map.delete(r)}set(r,u){if(!this.delete(r)&&u!==void 0){if(this.map.size>=this.max){const m=this.map.keys().next().value;this.delete(m)}this.map.set(r,u)}return this}}return lrucache=t,lrucache}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const t=/\s+/g;class e{constructor(fe,Te){if(Te=d(Te),fe instanceof e)return fe.loose===!!Te.loose&&fe.includePrerelease===!!Te.includePrerelease?fe:new e(fe.raw,Te);if(fe instanceof m)return this.raw=fe.value,this.set=[[fe]],this.formatted=void 0,this;if(this.options=Te,this.loose=!!Te.loose,this.includePrerelease=!!Te.includePrerelease,this.raw=fe.trim().replace(t," "),this.set=this.raw.split("||").map(Ae=>this.parseRange(Ae.trim())).filter(Ae=>Ae.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Ae=this.set[0];if(this.set=this.set.filter(Se=>!w(Se[0])),this.set.length===0)this.set=[Ae];else if(this.set.length>1){for(const Se of this.set)if(Se.length===1&&I(Se[0])){this.set=[Se];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let fe=0;fe<this.set.length;fe++){fe>0&&(this.formatted+="||");const Te=this.set[fe];for(let Ae=0;Ae<Te.length;Ae++)Ae>0&&(this.formatted+=" "),this.formatted+=Te[Ae].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(fe){const Ae=((this.options.includePrerelease&&y)|(this.options.loose&&A))+":"+fe,Se=u.get(Ae);if(Se)return Se;const be=this.options.loose,we=be?o[s.HYPHENRANGELOOSE]:o[s.HYPHENRANGE];fe=fe.replace(we,le(this.options.includePrerelease)),c("hyphen replace",fe),fe=fe.replace(o[s.COMPARATORTRIM],h),c("comparator trim",fe),fe=fe.replace(o[s.TILDETRIM],v),c("tilde trim",fe),fe=fe.replace(o[s.CARETTRIM],E),c("caret trim",fe);let Ce=fe.split(" ").map(Ge=>S(Ge,this.options)).join(" ").split(/\s+/).map(Ge=>ue(Ge,this.options));be&&(Ce=Ce.filter(Ge=>(c("loose invalid filter",Ge,this.options),!!Ge.match(o[s.COMPARATORLOOSE])))),c("range list",Ce);const je=new Map,Fe=Ce.map(Ge=>new m(Ge,this.options));for(const Ge of Fe){if(w(Ge))return[Ge];je.set(Ge.value,Ge)}je.size>1&&je.has("")&&je.delete("");const Ve=[...je.values()];return u.set(Ae,Ve),Ve}intersects(fe,Te){if(!(fe instanceof e))throw new TypeError("a Range is required");return this.set.some(Ae=>_(Ae,Te)&&fe.set.some(Se=>_(Se,Te)&&Ae.every(be=>Se.every(we=>be.intersects(we,Te)))))}test(fe){if(!fe)return!1;if(typeof fe=="string")try{fe=new a(fe,this.options)}catch{return!1}for(let Te=0;Te<this.set.length;Te++)if(ne(this.set[Te],fe,this.options))return!0;return!1}}range=e;const r=requireLrucache(),u=new r,d=requireParseOptions(),m=requireComparator(),c=requireDebug(),a=requireSemver$1(),{safeRe:o,t:s,comparatorTrimReplace:h,tildeTrimReplace:v,caretTrimReplace:E}=requireRe(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:A}=requireConstants$1(),w=ye=>ye.value==="<0.0.0-0",I=ye=>ye.value==="",_=(ye,fe)=>{let Te=!0;const Ae=ye.slice();let Se=Ae.pop();for(;Te&&Ae.length;)Te=Ae.every(be=>Se.intersects(be,fe)),Se=Ae.pop();return Te},S=(ye,fe)=>(c("comp",ye,fe),ye=H(ye,fe),c("caret",ye),ye=K(ye,fe),c("tildes",ye),ye=P(ye,fe),c("xrange",ye),ye=ie(ye,fe),c("stars",ye),ye),j=ye=>!ye||ye.toLowerCase()==="x"||ye==="*",K=(ye,fe)=>ye.trim().split(/\s+/).map(Te=>J(Te,fe)).join(" "),J=(ye,fe)=>{const Te=fe.loose?o[s.TILDELOOSE]:o[s.TILDE];return ye.replace(Te,(Ae,Se,be,we,Ce)=>{c("tilde",ye,Ae,Se,be,we,Ce);let je;return j(Se)?je="":j(be)?je=`>=${Se}.0.0 <${+Se+1}.0.0-0`:j(we)?je=`>=${Se}.${be}.0 <${Se}.${+be+1}.0-0`:Ce?(c("replaceTilde pr",Ce),je=`>=${Se}.${be}.${we}-${Ce} <${Se}.${+be+1}.0-0`):je=`>=${Se}.${be}.${we} <${Se}.${+be+1}.0-0`,c("tilde return",je),je})},H=(ye,fe)=>ye.trim().split(/\s+/).map(Te=>U(Te,fe)).join(" "),U=(ye,fe)=>{c("caret",ye,fe);const Te=fe.loose?o[s.CARETLOOSE]:o[s.CARET],Ae=fe.includePrerelease?"-0":"";return ye.replace(Te,(Se,be,we,Ce,je)=>{c("caret",ye,Se,be,we,Ce,je);let Fe;return j(be)?Fe="":j(we)?Fe=`>=${be}.0.0${Ae} <${+be+1}.0.0-0`:j(Ce)?be==="0"?Fe=`>=${be}.${we}.0${Ae} <${be}.${+we+1}.0-0`:Fe=`>=${be}.${we}.0${Ae} <${+be+1}.0.0-0`:je?(c("replaceCaret pr",je),be==="0"?we==="0"?Fe=`>=${be}.${we}.${Ce}-${je} <${be}.${we}.${+Ce+1}-0`:Fe=`>=${be}.${we}.${Ce}-${je} <${be}.${+we+1}.0-0`:Fe=`>=${be}.${we}.${Ce}-${je} <${+be+1}.0.0-0`):(c("no pr"),be==="0"?we==="0"?Fe=`>=${be}.${we}.${Ce}${Ae} <${be}.${we}.${+Ce+1}-0`:Fe=`>=${be}.${we}.${Ce}${Ae} <${be}.${+we+1}.0-0`:Fe=`>=${be}.${we}.${Ce} <${+be+1}.0.0-0`),c("caret return",Fe),Fe})},P=(ye,fe)=>(c("replaceXRanges",ye,fe),ye.split(/\s+/).map(Te=>Z(Te,fe)).join(" ")),Z=(ye,fe)=>{ye=ye.trim();const Te=fe.loose?o[s.XRANGELOOSE]:o[s.XRANGE];return ye.replace(Te,(Ae,Se,be,we,Ce,je)=>{c("xRange",ye,Ae,Se,be,we,Ce,je);const Fe=j(be),Ve=Fe||j(we),Ge=Ve||j(Ce),Le=Ge;return Se==="="&&Le&&(Se=""),je=fe.includePrerelease?"-0":"",Fe?Se===">"||Se==="<"?Ae="<0.0.0-0":Ae="*":Se&&Le?(Ve&&(we=0),Ce=0,Se===">"?(Se=">=",Ve?(be=+be+1,we=0,Ce=0):(we=+we+1,Ce=0)):Se==="<="&&(Se="<",Ve?be=+be+1:we=+we+1),Se==="<"&&(je="-0"),Ae=`${Se+be}.${we}.${Ce}${je}`):Ve?Ae=`>=${be}.0.0${je} <${+be+1}.0.0-0`:Ge&&(Ae=`>=${be}.${we}.0${je} <${be}.${+we+1}.0-0`),c("xRange return",Ae),Ae})},ie=(ye,fe)=>(c("replaceStars",ye,fe),ye.trim().replace(o[s.STAR],"")),ue=(ye,fe)=>(c("replaceGTE0",ye,fe),ye.trim().replace(o[fe.includePrerelease?s.GTE0PRE:s.GTE0],"")),le=ye=>(fe,Te,Ae,Se,be,we,Ce,je,Fe,Ve,Ge,Le)=>(j(Ae)?Te="":j(Se)?Te=`>=${Ae}.0.0${ye?"-0":""}`:j(be)?Te=`>=${Ae}.${Se}.0${ye?"-0":""}`:we?Te=`>=${Te}`:Te=`>=${Te}${ye?"-0":""}`,j(Fe)?je="":j(Ve)?je=`<${+Fe+1}.0.0-0`:j(Ge)?je=`<${Fe}.${+Ve+1}.0-0`:Le?je=`<=${Fe}.${Ve}.${Ge}-${Le}`:ye?je=`<${Fe}.${Ve}.${+Ge+1}-0`:je=`<=${je}`,`${Te} ${je}`.trim()),ne=(ye,fe,Te)=>{for(let Ae=0;Ae<ye.length;Ae++)if(!ye[Ae].test(fe))return!1;if(fe.prerelease.length&&!Te.includePrerelease){for(let Ae=0;Ae<ye.length;Ae++)if(c(ye[Ae].semver),ye[Ae].semver!==m.ANY&&ye[Ae].semver.prerelease.length>0){const Se=ye[Ae].semver;if(Se.major===fe.major&&Se.minor===fe.minor&&Se.patch===fe.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(h,v){if(v=r(v),h instanceof e){if(h.loose===!!v.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),c("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===t?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(h){const v=this.options.loose?u[d.COMPARATORLOOSE]:u[d.COMPARATOR],E=h.match(v);if(!E)throw new TypeError(`Invalid comparator: ${h}`);this.operator=E[1]!==void 0?E[1]:"",this.operator==="="&&(this.operator=""),E[2]?this.semver=new a(E[2],this.options.loose):this.semver=t}toString(){return this.value}test(h){if(c("Comparator.test",h,this.options.loose),this.semver===t||h===t)return!0;if(typeof h=="string")try{h=new a(h,this.options)}catch{return!1}return m(h,this.operator,this.semver,this.options)}intersects(h,v){if(!(h instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(h.value,v).test(this.value):h.operator===""?h.value===""?!0:new o(this.value,v).test(h.semver):(v=r(v),v.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!v.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||m(this.semver,"<",h.semver,v)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||m(this.semver,">",h.semver,v)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}comparator=e;const r=requireParseOptions(),{safeRe:u,t:d}=requireRe(),m=requireCmp(),c=requireDebug(),a=requireSemver$1(),o=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const t=requireRange();return satisfies_1=(r,u,d)=>{try{u=new t(u,d)}catch{return!1}return u.test(r)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const t=requireRange();return toComparators_1=(r,u)=>new t(r,u).set.map(d=>d.map(m=>m.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const t=requireSemver$1(),e=requireRange();return maxSatisfying_1=(u,d,m)=>{let c=null,a=null,o=null;try{o=new e(d,m)}catch{return null}return u.forEach(s=>{o.test(s)&&(!c||a.compare(s)===-1)&&(c=s,a=new t(c,m))}),c},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const t=requireSemver$1(),e=requireRange();return minSatisfying_1=(u,d,m)=>{let c=null,a=null,o=null;try{o=new e(d,m)}catch{return null}return u.forEach(s=>{o.test(s)&&(!c||a.compare(s)===1)&&(c=s,a=new t(c,m))}),c},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const t=requireSemver$1(),e=requireRange(),r=requireGt();return minVersion_1=(d,m)=>{d=new e(d,m);let c=new t("0.0.0");if(d.test(c)||(c=new t("0.0.0-0"),d.test(c)))return c;c=null;for(let a=0;a<d.set.length;++a){const o=d.set[a];let s=null;o.forEach(h=>{const v=new t(h.semver.version);switch(h.operator){case">":v.prerelease.length===0?v.patch++:v.prerelease.push(0),v.raw=v.format();case"":case">=":(!s||r(v,s))&&(s=v);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),s&&(!c||r(c,s))&&(c=s)}return c&&d.test(c)?c:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const t=requireRange();return valid=(r,u)=>{try{return new t(r,u).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const t=requireSemver$1(),e=requireComparator(),{ANY:r}=e,u=requireRange(),d=requireSatisfies(),m=requireGt(),c=requireLt(),a=requireLte(),o=requireGte();return outside_1=(h,v,E,y)=>{h=new t(h,y),v=new u(v,y);let A,w,I,_,S;switch(E){case">":A=m,w=a,I=c,_=">",S=">=";break;case"<":A=c,w=o,I=m,_="<",S="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(d(h,v,y))return!1;for(let j=0;j<v.set.length;++j){const K=v.set[j];let J=null,H=null;if(K.forEach(U=>{U.semver===r&&(U=new e(">=0.0.0")),J=J||U,H=H||U,A(U.semver,J.semver,y)?J=U:I(U.semver,H.semver,y)&&(H=U)}),J.operator===_||J.operator===S||(!H.operator||H.operator===_)&&w(h,H.semver))return!1;if(H.operator===S&&I(h,H.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const t=requireOutside();return gtr_1=(r,u,d)=>t(r,u,">",d),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const t=requireOutside();return ltr_1=(r,u,d)=>t(r,u,"<",d),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const t=requireRange();return intersects_1=(r,u,d)=>(r=new t(r,d),u=new t(u,d),r.intersects(u,d)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const t=requireSatisfies(),e=requireCompare();return simplify=(r,u,d)=>{const m=[];let c=null,a=null;const o=r.sort((E,y)=>e(E,y,d));for(const E of o)t(E,u,d)?(a=E,c||(c=E)):(a&&m.push([c,a]),a=null,c=null);c&&m.push([c,null]);const s=[];for(const[E,y]of m)E===y?s.push(E):!y&&E===o[0]?s.push("*"):y?E===o[0]?s.push(`<=${y}`):s.push(`${E} - ${y}`):s.push(`>=${E}`);const h=s.join(" || "),v=typeof u.raw=="string"?u.raw:String(u);return h.length<v.length?h:u},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const t=requireRange(),e=requireComparator(),{ANY:r}=e,u=requireSatisfies(),d=requireCompare(),m=(v,E,y={})=>{if(v===E)return!0;v=new t(v,y),E=new t(E,y);let A=!1;e:for(const w of v.set){for(const I of E.set){const _=o(w,I,y);if(A=A||_!==null,_)continue e}if(A)return!1}return!0},c=[new e(">=0.0.0-0")],a=[new e(">=0.0.0")],o=(v,E,y)=>{if(v===E)return!0;if(v.length===1&&v[0].semver===r){if(E.length===1&&E[0].semver===r)return!0;y.includePrerelease?v=c:v=a}if(E.length===1&&E[0].semver===r){if(y.includePrerelease)return!0;E=a}const A=new Set;let w,I;for(const P of v)P.operator===">"||P.operator===">="?w=s(w,P,y):P.operator==="<"||P.operator==="<="?I=h(I,P,y):A.add(P.semver);if(A.size>1)return null;let _;if(w&&I){if(_=d(w.semver,I.semver,y),_>0)return null;if(_===0&&(w.operator!==">="||I.operator!=="<="))return null}for(const P of A){if(w&&!u(P,String(w),y)||I&&!u(P,String(I),y))return null;for(const Z of E)if(!u(P,String(Z),y))return!1;return!0}let S,j,K,J,H=I&&!y.includePrerelease&&I.semver.prerelease.length?I.semver:!1,U=w&&!y.includePrerelease&&w.semver.prerelease.length?w.semver:!1;H&&H.prerelease.length===1&&I.operator==="<"&&H.prerelease[0]===0&&(H=!1);for(const P of E){if(J=J||P.operator===">"||P.operator===">=",K=K||P.operator==="<"||P.operator==="<=",w){if(U&&P.semver.prerelease&&P.semver.prerelease.length&&P.semver.major===U.major&&P.semver.minor===U.minor&&P.semver.patch===U.patch&&(U=!1),P.operator===">"||P.operator===">="){if(S=s(w,P,y),S===P&&S!==w)return!1}else if(w.operator===">="&&!u(w.semver,String(P),y))return!1}if(I){if(H&&P.semver.prerelease&&P.semver.prerelease.length&&P.semver.major===H.major&&P.semver.minor===H.minor&&P.semver.patch===H.patch&&(H=!1),P.operator==="<"||P.operator==="<="){if(j=h(I,P,y),j===P&&j!==I)return!1}else if(I.operator==="<="&&!u(I.semver,String(P),y))return!1}if(!P.operator&&(I||w)&&_!==0)return!1}return!(w&&K&&!I&&_!==0||I&&J&&!w&&_!==0||U||H)},s=(v,E,y)=>{if(!v)return E;const A=d(v.semver,E.semver,y);return A>0?v:A<0||E.operator===">"&&v.operator===">="?E:v},h=(v,E,y)=>{if(!v)return E;const A=d(v.semver,E.semver,y);return A<0?v:A>0||E.operator==="<"&&v.operator==="<="?E:v};return subset_1=m,subset_1}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const t=requireRe(),e=requireConstants$1(),r=requireSemver$1(),u=requireIdentifiers(),d=requireParse$3(),m=requireValid$1(),c=requireClean(),a=requireInc(),o=requireDiff(),s=requireMajor(),h=requireMinor(),v=requirePatch(),E=requirePrerelease(),y=requireCompare(),A=requireRcompare(),w=requireCompareLoose(),I=requireCompareBuild(),_=requireSort(),S=requireRsort(),j=requireGt(),K=requireLt(),J=requireEq(),H=requireNeq(),U=requireGte(),P=requireLte(),Z=requireCmp(),ie=requireCoerce(),ue=requireComparator(),le=requireRange(),ne=requireSatisfies(),ye=requireToComparators(),fe=requireMaxSatisfying(),Te=requireMinSatisfying(),Ae=requireMinVersion(),Se=requireValid(),be=requireOutside(),we=requireGtr(),Ce=requireLtr(),je=requireIntersects(),Fe=requireSimplify(),Ve=requireSubset();return semver={parse:d,valid:m,clean:c,inc:a,diff:o,major:s,minor:h,patch:v,prerelease:E,compare:y,rcompare:A,compareLoose:w,compareBuild:I,sort:_,rsort:S,gt:j,lt:K,eq:J,neq:H,gte:U,lte:P,cmp:Z,coerce:ie,Comparator:ue,Range:le,satisfies:ne,toComparators:ye,maxSatisfying:fe,minSatisfying:Te,minVersion:Ae,validRange:Se,outside:be,gtr:we,ltr:Ce,intersects:je,simplifyRange:Fe,subset:Ve,SemVer:r,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:u.compareIdentifiers,rcompareIdentifiers:u.rcompareIdentifiers},semver}var asymmetricKeyDetailsSupported,hasRequiredAsymmetricKeyDetailsSupported;function requireAsymmetricKeyDetailsSupported(){return hasRequiredAsymmetricKeyDetailsSupported||(hasRequiredAsymmetricKeyDetailsSupported=1,asymmetricKeyDetailsSupported=requireSemver().satisfies(process.version,">=15.7.0")),asymmetricKeyDetailsSupported}var rsaPssKeyDetailsSupported,hasRequiredRsaPssKeyDetailsSupported;function requireRsaPssKeyDetailsSupported(){return hasRequiredRsaPssKeyDetailsSupported||(hasRequiredRsaPssKeyDetailsSupported=1,rsaPssKeyDetailsSupported=requireSemver().satisfies(process.version,">=16.9.0")),rsaPssKeyDetailsSupported}var validateAsymmetricKey,hasRequiredValidateAsymmetricKey;function requireValidateAsymmetricKey(){if(hasRequiredValidateAsymmetricKey)return validateAsymmetricKey;hasRequiredValidateAsymmetricKey=1;const t=requireAsymmetricKeyDetailsSupported(),e=requireRsaPssKeyDetailsSupported(),r={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},u={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};return validateAsymmetricKey=function(d,m){if(!d||!m)return;const c=m.asymmetricKeyType;if(!c)return;const a=r[c];if(!a)throw new Error(`Unknown key type "${c}".`);if(!a.includes(d))throw new Error(`"alg" parameter for "${c}" key type must be one of: ${a.join(", ")}.`);if(t)switch(c){case"ec":const o=m.asymmetricKeyDetails.namedCurve,s=u[d];if(o!==s)throw new Error(`"alg" parameter "${d}" requires curve "${s}".`);break;case"rsa-pss":if(e){const h=parseInt(d.slice(-3),10),{hashAlgorithm:v,mgf1HashAlgorithm:E,saltLength:y}=m.asymmetricKeyDetails;if(v!==`sha${h}`||E!==v)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${d}.`);if(y!==void 0&&y>h>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${d}.`)}break}},validateAsymmetricKey}var psSupported,hasRequiredPsSupported;function requirePsSupported(){if(hasRequiredPsSupported)return psSupported;hasRequiredPsSupported=1;var t=requireSemver();return psSupported=t.satisfies(process.version,"^6.12.0 || >=8.0.0"),psSupported}var verify$1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify$1;hasRequiredVerify=1;const t=requireJsonWebTokenError(),e=requireNotBeforeError(),r=requireTokenExpiredError(),u=requireDecode(),d=requireTimespan(),m=requireValidateAsymmetricKey(),c=requirePsSupported(),a=requireJws(),{KeyObject:o,createSecretKey:s,createPublicKey:h}=require$$1$3,v=["RS256","RS384","RS512"],E=["ES256","ES384","ES512"],y=["RS256","RS384","RS512"],A=["HS256","HS384","HS512"];return c&&(v.splice(v.length,0,"PS256","PS384","PS512"),y.splice(y.length,0,"PS256","PS384","PS512")),verify$1=function(w,I,_,S){typeof _=="function"&&!S&&(S=_,_={}),_||(_={}),_=Object.assign({},_);let j;if(S?j=S:j=function(Z,ie){if(Z)throw Z;return ie},_.clockTimestamp&&typeof _.clockTimestamp!="number")return j(new t("clockTimestamp must be a number"));if(_.nonce!==void 0&&(typeof _.nonce!="string"||_.nonce.trim()===""))return j(new t("nonce must be a non-empty string"));if(_.allowInvalidAsymmetricKeyTypes!==void 0&&typeof _.allowInvalidAsymmetricKeyTypes!="boolean")return j(new t("allowInvalidAsymmetricKeyTypes must be a boolean"));const K=_.clockTimestamp||Math.floor(Date.now()/1e3);if(!w)return j(new t("jwt must be provided"));if(typeof w!="string")return j(new t("jwt must be a string"));const J=w.split(".");if(J.length!==3)return j(new t("jwt malformed"));let H;try{H=u(w,{complete:!0})}catch(Z){return j(Z)}if(!H)return j(new t("invalid token"));const U=H.header;let P;if(typeof I=="function"){if(!S)return j(new t("verify must be called asynchronous if secret or public key is provided as a callback"));P=I}else P=function(Z,ie){return ie(null,I)};return P(U,function(Z,ie){if(Z)return j(new t("error in secret or public key callback: "+Z.message));const ue=J[2].trim()!=="";if(!ue&&ie)return j(new t("jwt signature is required"));if(ue&&!ie)return j(new t("secret or public key must be provided"));if(!ue&&!_.algorithms)return j(new t('please specify "none" in "algorithms" to verify unsigned tokens'));if(ie!=null&&!(ie instanceof o))try{ie=h(ie)}catch{try{ie=s(typeof ie=="string"?Buffer.from(ie):ie)}catch{return j(new t("secretOrPublicKey is not valid key material"))}}if(_.algorithms||(ie.type==="secret"?_.algorithms=A:["rsa","rsa-pss"].includes(ie.asymmetricKeyType)?_.algorithms=y:ie.asymmetricKeyType==="ec"?_.algorithms=E:_.algorithms=v),_.algorithms.indexOf(H.header.alg)===-1)return j(new t("invalid algorithm"));if(U.alg.startsWith("HS")&&ie.type!=="secret")return j(new t(`secretOrPublicKey must be a symmetric key when using ${U.alg}`));if(/^(?:RS|PS|ES)/.test(U.alg)&&ie.type!=="public")return j(new t(`secretOrPublicKey must be an asymmetric key when using ${U.alg}`));if(!_.allowInvalidAsymmetricKeyTypes)try{m(U.alg,ie)}catch(ye){return j(ye)}let le;try{le=a.verify(w,H.header.alg,ie)}catch(ye){return j(ye)}if(!le)return j(new t("invalid signature"));const ne=H.payload;if(typeof ne.nbf<"u"&&!_.ignoreNotBefore){if(typeof ne.nbf!="number")return j(new t("invalid nbf value"));if(ne.nbf>K+(_.clockTolerance||0))return j(new e("jwt not active",new Date(ne.nbf*1e3)))}if(typeof ne.exp<"u"&&!_.ignoreExpiration){if(typeof ne.exp!="number")return j(new t("invalid exp value"));if(K>=ne.exp+(_.clockTolerance||0))return j(new r("jwt expired",new Date(ne.exp*1e3)))}if(_.audience){const ye=Array.isArray(_.audience)?_.audience:[_.audience];if(!(Array.isArray(ne.aud)?ne.aud:[ne.aud]).some(function(Ae){return ye.some(function(Se){return Se instanceof RegExp?Se.test(Ae):Se===Ae})}))return j(new t("jwt audience invalid. expected: "+ye.join(" or ")))}if(_.issuer&&(typeof _.issuer=="string"&&ne.iss!==_.issuer||Array.isArray(_.issuer)&&_.issuer.indexOf(ne.iss)===-1))return j(new t("jwt issuer invalid. expected: "+_.issuer));if(_.subject&&ne.sub!==_.subject)return j(new t("jwt subject invalid. expected: "+_.subject));if(_.jwtid&&ne.jti!==_.jwtid)return j(new t("jwt jwtid invalid. expected: "+_.jwtid));if(_.nonce&&ne.nonce!==_.nonce)return j(new t("jwt nonce invalid. expected: "+_.nonce));if(_.maxAge){if(typeof ne.iat!="number")return j(new t("iat required when maxAge is specified"));const ye=d(_.maxAge,ne.iat);if(typeof ye>"u")return j(new t('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(K>=ye+(_.clockTolerance||0))return j(new r("maxAge exceeded",new Date(ye*1e3)))}if(_.complete===!0){const ye=H.signature;return j(null,{header:U,payload:ne,signature:ye})}return j(null,ne)})},verify$1}var lodash_includes,hasRequiredLodash_includes;function requireLodash_includes(){if(hasRequiredLodash_includes)return lodash_includes;hasRequiredLodash_includes=1;var t=1/0,e=9007199254740991,r=17976931348623157e292,u=NaN,d="[object Arguments]",m="[object Function]",c="[object GeneratorFunction]",a="[object String]",o="[object Symbol]",s=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,E=/^0o[0-7]+$/i,y=/^(?:0|[1-9]\d*)$/,A=parseInt;function w(R,ce){for(var Re=-1,ke=R?R.length:0,qe=Array(ke);++Re<ke;)qe[Re]=ce(R[Re],Re,R);return qe}function I(R,ce,Re,ke){for(var qe=R.length,g=Re+-1;++g<qe;)if(ce(R[g],g,R))return g;return-1}function _(R,ce,Re){if(ce!==ce)return I(R,S,Re);for(var ke=Re-1,qe=R.length;++ke<qe;)if(R[ke]===ce)return ke;return-1}function S(R){return R!==R}function j(R,ce){for(var Re=-1,ke=Array(R);++Re<R;)ke[Re]=ce(Re);return ke}function K(R,ce){return w(ce,function(Re){return R[Re]})}function J(R,ce){return function(Re){return R(ce(Re))}}var H=Object.prototype,U=H.hasOwnProperty,P=H.toString,Z=H.propertyIsEnumerable,ie=J(Object.keys,Object),ue=Math.max;function le(R,ce){var Re=Se(R)||Ae(R)?j(R.length,String):[],ke=Re.length,qe=!!ke;for(var g in R)U.call(R,g)&&!(qe&&(g=="length"||ye(g,ke)))&&Re.push(g);return Re}function ne(R){if(!fe(R))return ie(R);var ce=[];for(var Re in Object(R))U.call(R,Re)&&Re!="constructor"&&ce.push(Re);return ce}function ye(R,ce){return ce=ce??e,!!ce&&(typeof R=="number"||y.test(R))&&R>-1&&R%1==0&&R<ce}function fe(R){var ce=R&&R.constructor,Re=typeof ce=="function"&&ce.prototype||H;return R===Re}function Te(R,ce,Re,ke){R=be(R)?R:V(R),Re=Re&&!ke?$e(Re):0;var qe=R.length;return Re<0&&(Re=ue(qe+Re,0)),Ge(R)?Re<=qe&&R.indexOf(ce,Re)>-1:!!qe&&_(R,ce,Re)>-1}function Ae(R){return we(R)&&U.call(R,"callee")&&(!Z.call(R,"callee")||P.call(R)==d)}var Se=Array.isArray;function be(R){return R!=null&&je(R.length)&&!Ce(R)}function we(R){return Ve(R)&&be(R)}function Ce(R){var ce=Fe(R)?P.call(R):"";return ce==m||ce==c}function je(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=e}function Fe(R){var ce=typeof R;return!!R&&(ce=="object"||ce=="function")}function Ve(R){return!!R&&typeof R=="object"}function Ge(R){return typeof R=="string"||!Se(R)&&Ve(R)&&P.call(R)==a}function Le(R){return typeof R=="symbol"||Ve(R)&&P.call(R)==o}function Be(R){if(!R)return R===0?R:0;if(R=he(R),R===t||R===-t){var ce=R<0?-1:1;return ce*r}return R===R?R:0}function $e(R){var ce=Be(R),Re=ce%1;return ce===ce?Re?ce-Re:ce:0}function he(R){if(typeof R=="number")return R;if(Le(R))return u;if(Fe(R)){var ce=typeof R.valueOf=="function"?R.valueOf():R;R=Fe(ce)?ce+"":ce}if(typeof R!="string")return R===0?R:+R;R=R.replace(s,"");var Re=v.test(R);return Re||E.test(R)?A(R.slice(2),Re?2:8):h.test(R)?u:+R}function p(R){return be(R)?le(R):ne(R)}function V(R){return R?K(R,p(R)):[]}return lodash_includes=Te,lodash_includes}var lodash_isboolean,hasRequiredLodash_isboolean;function requireLodash_isboolean(){if(hasRequiredLodash_isboolean)return lodash_isboolean;hasRequiredLodash_isboolean=1;var t="[object Boolean]",e=Object.prototype,r=e.toString;function u(m){return m===!0||m===!1||d(m)&&r.call(m)==t}function d(m){return!!m&&typeof m=="object"}return lodash_isboolean=u,lodash_isboolean}var lodash_isinteger,hasRequiredLodash_isinteger;function requireLodash_isinteger(){if(hasRequiredLodash_isinteger)return lodash_isinteger;hasRequiredLodash_isinteger=1;var t=1/0,e=17976931348623157e292,r=NaN,u="[object Symbol]",d=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,s=Object.prototype,h=s.toString;function v(S){return typeof S=="number"&&S==I(S)}function E(S){var j=typeof S;return!!S&&(j=="object"||j=="function")}function y(S){return!!S&&typeof S=="object"}function A(S){return typeof S=="symbol"||y(S)&&h.call(S)==u}function w(S){if(!S)return S===0?S:0;if(S=_(S),S===t||S===-t){var j=S<0?-1:1;return j*e}return S===S?S:0}function I(S){var j=w(S),K=j%1;return j===j?K?j-K:j:0}function _(S){if(typeof S=="number")return S;if(A(S))return r;if(E(S)){var j=typeof S.valueOf=="function"?S.valueOf():S;S=E(j)?j+"":j}if(typeof S!="string")return S===0?S:+S;S=S.replace(d,"");var K=c.test(S);return K||a.test(S)?o(S.slice(2),K?2:8):m.test(S)?r:+S}return lodash_isinteger=v,lodash_isinteger}var lodash_isnumber,hasRequiredLodash_isnumber;function requireLodash_isnumber(){if(hasRequiredLodash_isnumber)return lodash_isnumber;hasRequiredLodash_isnumber=1;var t="[object Number]",e=Object.prototype,r=e.toString;function u(m){return!!m&&typeof m=="object"}function d(m){return typeof m=="number"||u(m)&&r.call(m)==t}return lodash_isnumber=d,lodash_isnumber}var lodash_isplainobject,hasRequiredLodash_isplainobject;function requireLodash_isplainobject(){if(hasRequiredLodash_isplainobject)return lodash_isplainobject;hasRequiredLodash_isplainobject=1;var t="[object Object]";function e(E){var y=!1;if(E!=null&&typeof E.toString!="function")try{y=!!(E+"")}catch{}return y}function r(E,y){return function(A){return E(y(A))}}var u=Function.prototype,d=Object.prototype,m=u.toString,c=d.hasOwnProperty,a=m.call(Object),o=d.toString,s=r(Object.getPrototypeOf,Object);function h(E){return!!E&&typeof E=="object"}function v(E){if(!h(E)||o.call(E)!=t||e(E))return!1;var y=s(E);if(y===null)return!0;var A=c.call(y,"constructor")&&y.constructor;return typeof A=="function"&&A instanceof A&&m.call(A)==a}return lodash_isplainobject=v,lodash_isplainobject}var lodash_isstring,hasRequiredLodash_isstring;function requireLodash_isstring(){if(hasRequiredLodash_isstring)return lodash_isstring;hasRequiredLodash_isstring=1;var t="[object String]",e=Object.prototype,r=e.toString,u=Array.isArray;function d(c){return!!c&&typeof c=="object"}function m(c){return typeof c=="string"||!u(c)&&d(c)&&r.call(c)==t}return lodash_isstring=m,lodash_isstring}var lodash_once,hasRequiredLodash_once;function requireLodash_once(){if(hasRequiredLodash_once)return lodash_once;hasRequiredLodash_once=1;var t="Expected a function",e=1/0,r=17976931348623157e292,u=NaN,d="[object Symbol]",m=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,h=Object.prototype,v=h.toString;function E(K,J){var H;if(typeof J!="function")throw new TypeError(t);return K=S(K),function(){return--K>0&&(H=J.apply(this,arguments)),K<=1&&(J=void 0),H}}function y(K){return E(2,K)}function A(K){var J=typeof K;return!!K&&(J=="object"||J=="function")}function w(K){return!!K&&typeof K=="object"}function I(K){return typeof K=="symbol"||w(K)&&v.call(K)==d}function _(K){if(!K)return K===0?K:0;if(K=j(K),K===e||K===-e){var J=K<0?-1:1;return J*r}return K===K?K:0}function S(K){var J=_(K),H=J%1;return J===J?H?J-H:J:0}function j(K){if(typeof K=="number")return K;if(I(K))return u;if(A(K)){var J=typeof K.valueOf=="function"?K.valueOf():K;K=A(J)?J+"":J}if(typeof K!="string")return K===0?K:+K;K=K.replace(m,"");var H=a.test(K);return H||o.test(K)?s(K.slice(2),H?2:8):c.test(K)?u:+K}return lodash_once=y,lodash_once}var sign$1,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1;hasRequiredSign=1;const t=requireTimespan(),e=requirePsSupported(),r=requireValidateAsymmetricKey(),u=requireJws(),d=requireLodash_includes(),m=requireLodash_isboolean(),c=requireLodash_isinteger(),a=requireLodash_isnumber(),o=requireLodash_isplainobject(),s=requireLodash_isstring(),h=requireLodash_once(),{KeyObject:v,createSecretKey:E,createPrivateKey:y}=require$$1$3,A=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];e&&A.splice(3,0,"PS256","PS384","PS512");const w={expiresIn:{isValid:function(H){return c(H)||s(H)&&H},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(H){return c(H)||s(H)&&H},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(H){return s(H)||Array.isArray(H)},message:'"audience" must be a string or array'},algorithm:{isValid:d.bind(null,A),message:'"algorithm" must be a valid string enum value'},header:{isValid:o,message:'"header" must be an object'},encoding:{isValid:s,message:'"encoding" must be a string'},issuer:{isValid:s,message:'"issuer" must be a string'},subject:{isValid:s,message:'"subject" must be a string'},jwtid:{isValid:s,message:'"jwtid" must be a string'},noTimestamp:{isValid:m,message:'"noTimestamp" must be a boolean'},keyid:{isValid:s,message:'"keyid" must be a string'},mutatePayload:{isValid:m,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:m,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:m,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},I={iat:{isValid:a,message:'"iat" should be a number of seconds'},exp:{isValid:a,message:'"exp" should be a number of seconds'},nbf:{isValid:a,message:'"nbf" should be a number of seconds'}};function _(H,U,P,Z){if(!o(P))throw new Error('Expected "'+Z+'" to be a plain object.');Object.keys(P).forEach(function(ie){const ue=H[ie];if(!ue){if(!U)throw new Error('"'+ie+'" is not allowed in "'+Z+'"');return}if(!ue.isValid(P[ie]))throw new Error(ue.message)})}function S(H){return _(w,!1,H,"options")}function j(H){return _(I,!0,H,"payload")}const K={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},J=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];return sign$1=function(H,U,P,Z){typeof P=="function"?(Z=P,P={}):P=P||{};const ie=typeof H=="object"&&!Buffer.isBuffer(H),ue=Object.assign({alg:P.algorithm||"HS256",typ:ie?"JWT":void 0,kid:P.keyid},P.header);function le(fe){if(Z)return Z(fe);throw fe}if(!U&&P.algorithm!=="none")return le(new Error("secretOrPrivateKey must have a value"));if(U!=null&&!(U instanceof v))try{U=y(U)}catch{try{U=E(typeof U=="string"?Buffer.from(U):U)}catch{return le(new Error("secretOrPrivateKey is not valid key material"))}}if(ue.alg.startsWith("HS")&&U.type!=="secret")return le(new Error(`secretOrPrivateKey must be a symmetric key when using ${ue.alg}`));if(/^(?:RS|PS|ES)/.test(ue.alg)){if(U.type!=="private")return le(new Error(`secretOrPrivateKey must be an asymmetric key when using ${ue.alg}`));if(!P.allowInsecureKeySizes&&!ue.alg.startsWith("ES")&&U.asymmetricKeyDetails!==void 0&&U.asymmetricKeyDetails.modulusLength<2048)return le(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ue.alg}`))}if(typeof H>"u")return le(new Error("payload is required"));if(ie){try{j(H)}catch(fe){return le(fe)}P.mutatePayload||(H=Object.assign({},H))}else{const fe=J.filter(function(Te){return typeof P[Te]<"u"});if(fe.length>0)return le(new Error("invalid "+fe.join(",")+" option for "+typeof H+" payload"))}if(typeof H.exp<"u"&&typeof P.expiresIn<"u")return le(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof H.nbf<"u"&&typeof P.notBefore<"u")return le(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{S(P)}catch(fe){return le(fe)}if(!P.allowInvalidAsymmetricKeyTypes)try{r(ue.alg,U)}catch(fe){return le(fe)}const ne=H.iat||Math.floor(Date.now()/1e3);if(P.noTimestamp?delete H.iat:ie&&(H.iat=ne),typeof P.notBefore<"u"){try{H.nbf=t(P.notBefore,ne)}catch(fe){return le(fe)}if(typeof H.nbf>"u")return le(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof P.expiresIn<"u"&&typeof H=="object"){try{H.exp=t(P.expiresIn,ne)}catch(fe){return le(fe)}if(typeof H.exp>"u")return le(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(K).forEach(function(fe){const Te=K[fe];if(typeof P[fe]<"u"){if(typeof H[Te]<"u")return le(new Error('Bad "options.'+fe+'" option. The payload already has an "'+Te+'" property.'));H[Te]=P[fe]}});const ye=P.encoding||"utf8";if(typeof Z=="function")Z=Z&&h(Z),u.createSign({header:ue,privateKey:U,payload:H,encoding:ye}).once("error",Z).once("done",function(fe){if(!P.allowInsecureKeySizes&&/^(?:RS|PS)/.test(ue.alg)&&fe.length<256)return Z(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ue.alg}`));Z(null,fe)});else{let fe=u.sign({header:ue,payload:H,secret:U,encoding:ye});if(!P.allowInsecureKeySizes&&/^(?:RS|PS)/.test(ue.alg)&&fe.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ue.alg}`);return fe}},sign$1}var jsonwebtoken,hasRequiredJsonwebtoken;function requireJsonwebtoken(){return hasRequiredJsonwebtoken||(hasRequiredJsonwebtoken=1,jsonwebtoken={decode:requireDecode(),verify:requireVerify(),sign:requireSign(),JsonWebTokenError:requireJsonWebTokenError(),NotBeforeError:requireNotBeforeError(),TokenExpiredError:requireTokenExpiredError()}),jsonwebtoken}var src$a={exports:{}};const crypto$1=crypto,isCryptoKey=t=>t instanceof CryptoKey,digest=async(t,e)=>{const r=`SHA-${t.slice(-3)}`;return new Uint8Array(await crypto$1.subtle.digest(r,e))},encoder=new TextEncoder,decoder=new TextDecoder,MAX_INT32=2**32;function concat(...t){const e=t.reduce((d,{length:m})=>d+m,0),r=new Uint8Array(e);let u=0;return t.forEach(d=>{r.set(d,u),u+=d.length}),r}function p2s(t,e){return concat(encoder.encode(t),new Uint8Array([0]),e)}function writeUInt32BE(t,e,r){if(e<0||e>=MAX_INT32)throw new RangeError(`value must be >= 0 and <= ${MAX_INT32-1}. Received ${e}`);t.set([e>>>24,e>>>16,e>>>8,e&255],r)}function uint64be(t){const e=Math.floor(t/MAX_INT32),r=t%MAX_INT32,u=new Uint8Array(8);return writeUInt32BE(u,e,0),writeUInt32BE(u,r,4),u}function uint32be(t){const e=new Uint8Array(4);return writeUInt32BE(e,t),e}function lengthAndInput(t){return concat(uint32be(t.length),t)}async function concatKdf(t,e,r){const u=Math.ceil((e>>3)/32),d=new Uint8Array(u*32);for(let m=0;m<u;m++){const c=new Uint8Array(4+t.length+r.length);c.set(uint32be(m+1)),c.set(t,4),c.set(r,4+t.length),d.set(await digest("sha256",c),m*32)}return d.slice(0,e>>3)}const encodeBase64=t=>{let e=t;typeof e=="string"&&(e=encoder.encode(e));const r=32768,u=[];for(let d=0;d<e.length;d+=r)u.push(String.fromCharCode.apply(null,e.subarray(d,d+r)));return btoa(u.join(""))},encode$1=t=>encodeBase64(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),decodeBase64=t=>{const e=atob(t),r=new Uint8Array(e.length);for(let u=0;u<e.length;u++)r[u]=e.charCodeAt(u);return r},decode$1=t=>{let e=t;e instanceof Uint8Array&&(e=decoder.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return decodeBase64(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class JOSEError extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var r;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}}class JWTClaimValidationFailed extends JOSEError{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,r="unspecified",u="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=u}}class JWTExpired extends JOSEError{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,r="unspecified",u="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=u}}class JOSEAlgNotAllowed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class JOSENotSupported extends JOSEError{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class JWEDecryptionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class JWEDecompressionFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}class JWEInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class JWSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class JWTInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class JWKInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class JWKSInvalid extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class JWKSNoMatchingKey extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class JWKSMultipleMatchingKeys extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class JWKSTimeout extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class JWSSignatureVerificationFailed extends JOSEError{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const errors$1=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed,JOSEError,JOSENotSupported,JWEDecompressionFailed,JWEDecryptionFailed,JWEInvalid,JWKInvalid,JWKSInvalid,JWKSMultipleMatchingKeys,JWKSNoMatchingKey,JWKSTimeout,JWSInvalid,JWSSignatureVerificationFailed,JWTClaimValidationFailed,JWTExpired,JWTInvalid},Symbol.toStringTag,{value:"Module"})),random=crypto$1.getRandomValues.bind(crypto$1);function bitLength$1(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}const generateIv=t=>random(new Uint8Array(bitLength$1(t)>>3)),checkIvLength=(t,e)=>{if(e.length<<3!==bitLength$1(t))throw new JWEInvalid("Invalid Initialization Vector length")},checkCekLength=(t,e)=>{const r=t.byteLength<<3;if(r!==e)throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${e} bits, got ${r} bits`)},timingSafeEqual=(t,e)=>{if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==e.length)throw new TypeError("Input buffers must have the same length");const r=t.length;let u=0,d=-1;for(;++d<r;)u|=t[d]^e[d];return u===0};function unusable(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function isAlgorithm(t,e){return t.name===e}function getHashLength(t){return parseInt(t.name.slice(4),10)}function getNamedCurve$1(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function checkUsage(t,e){if(e.length&&!e.some(r=>t.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const u=e.pop();r+=`one of ${e.join(", ")}, or ${u}.`}else e.length===2?r+=`one of ${e[0]} or ${e[1]}.`:r+=`${e[0]}.`;throw new TypeError(r)}}function checkSigCryptoKey(t,e,...r){switch(e){case"HS256":case"HS384":case"HS512":{if(!isAlgorithm(t.algorithm,"HMAC"))throw unusable("HMAC");const u=parseInt(e.slice(2),10);if(getHashLength(t.algorithm.hash)!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!isAlgorithm(t.algorithm,"RSASSA-PKCS1-v1_5"))throw unusable("RSASSA-PKCS1-v1_5");const u=parseInt(e.slice(2),10);if(getHashLength(t.algorithm.hash)!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!isAlgorithm(t.algorithm,"RSA-PSS"))throw unusable("RSA-PSS");const u=parseInt(e.slice(2),10);if(getHashLength(t.algorithm.hash)!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}case"EdDSA":{if(t.algorithm.name!=="Ed25519"&&t.algorithm.name!=="Ed448")throw unusable("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!isAlgorithm(t.algorithm,"ECDSA"))throw unusable("ECDSA");const u=getNamedCurve$1(e);if(t.algorithm.namedCurve!==u)throw unusable(u,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(t,r)}function checkEncCryptoKey(t,e,...r){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(t.algorithm,"AES-GCM"))throw unusable("AES-GCM");const u=parseInt(e.slice(1,4),10);if(t.algorithm.length!==u)throw unusable(u,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(t.algorithm,"AES-KW"))throw unusable("AES-KW");const u=parseInt(e.slice(1,4),10);if(t.algorithm.length!==u)throw unusable(u,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw unusable("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(t.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(t.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");const u=parseInt(e.slice(9),10)||1;if(getHashLength(t.algorithm.hash)!==u)throw unusable(`SHA-${u}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(t,r)}function message$1(t,e,...r){if(r.length>2){const u=r.pop();t+=`one of type ${r.join(", ")}, or ${u}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(t+=` Received an instance of ${e.constructor.name}`),t}const invalidKeyInput=(t,...e)=>message$1("Key must be ",t,...e);function withAlg(t,e,...r){return message$1(`Key for the ${t} algorithm must be `,e,...r)}const isKeyLike=t=>isCryptoKey(t),types$4=["CryptoKey"];async function cbcDecrypt(t,e,r,u,d,m){if(!(e instanceof Uint8Array))throw new TypeError(invalidKeyInput(e,"Uint8Array"));const c=parseInt(t.slice(1,4),10),a=await crypto$1.subtle.importKey("raw",e.subarray(c>>3),"AES-CBC",!1,["decrypt"]),o=await crypto$1.subtle.importKey("raw",e.subarray(0,c>>3),{hash:`SHA-${c<<1}`,name:"HMAC"},!1,["sign"]),s=concat(m,u,r,uint64be(m.length<<3)),h=new Uint8Array((await crypto$1.subtle.sign("HMAC",o,s)).slice(0,c>>3));let v;try{v=timingSafeEqual(d,h)}catch{}if(!v)throw new JWEDecryptionFailed;let E;try{E=new Uint8Array(await crypto$1.subtle.decrypt({iv:u,name:"AES-CBC"},a,r))}catch{}if(!E)throw new JWEDecryptionFailed;return E}async function gcmDecrypt(t,e,r,u,d,m){let c;e instanceof Uint8Array?c=await crypto$1.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(checkEncCryptoKey(e,t,"decrypt"),c=e);try{return new Uint8Array(await crypto$1.subtle.decrypt({additionalData:m,iv:u,name:"AES-GCM",tagLength:128},c,concat(r,d)))}catch{throw new JWEDecryptionFailed}}const decrypt$2=async(t,e,r,u,d,m)=>{if(!isCryptoKey(e)&&!(e instanceof Uint8Array))throw new TypeError(invalidKeyInput(e,...types$4,"Uint8Array"));switch(checkIvLength(t,u),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&checkCekLength(e,parseInt(t.slice(-3),10)),cbcDecrypt(t,e,r,u,d,m);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&checkCekLength(e,parseInt(t.slice(1,4),10)),gcmDecrypt(t,e,r,u,d,m);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}},inflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},deflate=async()=>{throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},isDisjoint=(...t)=>{const e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(const u of e){const d=Object.keys(u);if(!r||r.size===0){r=new Set(d);continue}for(const m of d){if(r.has(m))return!1;r.add(m)}}return!0};function isObjectLike(t){return typeof t=="object"&&t!==null}function isObject$1(t){if(!isObjectLike(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const bogusWebCrypto=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function checkKeySize(t,e){if(t.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function getCryptoKey$2(t,e,r){if(isCryptoKey(t))return checkEncCryptoKey(t,e,r),t;if(t instanceof Uint8Array)return crypto$1.subtle.importKey("raw",t,"AES-KW",!0,[r]);throw new TypeError(invalidKeyInput(t,...types$4,"Uint8Array"))}const wrap$3=async(t,e,r)=>{const u=await getCryptoKey$2(e,t,"wrapKey");checkKeySize(u,t);const d=await crypto$1.subtle.importKey("raw",r,...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",d,u,"AES-KW"))},unwrap$3=async(t,e,r)=>{const u=await getCryptoKey$2(e,t,"unwrapKey");checkKeySize(u,t);const d=await crypto$1.subtle.unwrapKey("raw",r,u,"AES-KW",...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.exportKey("raw",d))};async function deriveKey$1(t,e,r,u,d=new Uint8Array(0),m=new Uint8Array(0)){if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types$4));if(checkEncCryptoKey(t,"ECDH"),!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types$4));checkEncCryptoKey(e,"ECDH","deriveBits");const c=concat(lengthAndInput(encoder.encode(r)),lengthAndInput(d),lengthAndInput(m),uint32be(u));let a;t.algorithm.name==="X25519"?a=256:t.algorithm.name==="X448"?a=448:a=Math.ceil(parseInt(t.algorithm.namedCurve.substr(-3),10)/8)<<3;const o=new Uint8Array(await crypto$1.subtle.deriveBits({name:t.algorithm.name,public:t},e,a));return concatKdf(o,u,c)}async function generateEpk(t){if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types$4));return crypto$1.subtle.generateKey(t.algorithm,!0,["deriveBits"])}function ecdhAllowed(t){if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types$4));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)||t.algorithm.name==="X25519"||t.algorithm.name==="X448"}function checkP2s(t){if(!(t instanceof Uint8Array)||t.length<8)throw new JWEInvalid("PBES2 Salt Input must be 8 or more octets")}function getCryptoKey$1(t,e){if(t instanceof Uint8Array)return crypto$1.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(isCryptoKey(t))return checkEncCryptoKey(t,e,"deriveBits","deriveKey"),t;throw new TypeError(invalidKeyInput(t,...types$4,"Uint8Array"))}async function deriveKey(t,e,r,u){checkP2s(t);const d=p2s(e,t),m=parseInt(e.slice(13,16),10),c={hash:`SHA-${e.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:d},a={length:m,name:"AES-KW"},o=await getCryptoKey$1(u,e);if(o.usages.includes("deriveBits"))return new Uint8Array(await crypto$1.subtle.deriveBits(c,o,m));if(o.usages.includes("deriveKey"))return crypto$1.subtle.deriveKey(c,o,a,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const encrypt$2=async(t,e,r,u=2048,d=random(new Uint8Array(16)))=>{const m=await deriveKey(d,t,u,e);return{encryptedKey:await wrap$3(t.slice(-6),m,r),p2c:u,p2s:encode$1(d)}},decrypt$1=async(t,e,r,u,d)=>{const m=await deriveKey(d,t,u,e);return unwrap$3(t.slice(-6),m,r)};function subtleRsaEs(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}const checkKeyLength=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:r}=e.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},encrypt$1=async(t,e,r)=>{if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types$4));if(checkEncCryptoKey(e,t,"encrypt","wrapKey"),checkKeyLength(t,e),e.usages.includes("encrypt"))return new Uint8Array(await crypto$1.subtle.encrypt(subtleRsaEs(t),e,r));if(e.usages.includes("wrapKey")){const u=await crypto$1.subtle.importKey("raw",r,...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.wrapKey("raw",u,e,subtleRsaEs(t)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},decrypt=async(t,e,r)=>{if(!isCryptoKey(e))throw new TypeError(invalidKeyInput(e,...types$4));if(checkEncCryptoKey(e,t,"decrypt","unwrapKey"),checkKeyLength(t,e),e.usages.includes("decrypt"))return new Uint8Array(await crypto$1.subtle.decrypt(subtleRsaEs(t),e,r));if(e.usages.includes("unwrapKey")){const u=await crypto$1.subtle.unwrapKey("raw",r,e,subtleRsaEs(t),...bogusWebCrypto);return new Uint8Array(await crypto$1.subtle.exportKey("raw",u))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function bitLength(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}const generateCek=t=>random(new Uint8Array(bitLength(t)>>3)),formatPEM=(t,e)=>{const r=(t.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${e}-----
${r}
-----END ${e}-----`},genericExport=async(t,e,r)=>{if(!isCryptoKey(r))throw new TypeError(invalidKeyInput(r,...types$4));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==t)throw new TypeError(`key is not a ${t} key`);return formatPEM(encodeBase64(new Uint8Array(await crypto$1.subtle.exportKey(e,r))),`${t.toUpperCase()} KEY`)},toSPKI=t=>genericExport("public","spki",t),toPKCS8=t=>genericExport("private","pkcs8",t),findOid=(t,e,r=0)=>{r===0&&(e.unshift(e.length),e.unshift(6));let u=t.indexOf(e[0],r);if(u===-1)return!1;const d=t.subarray(u,u+e.length);return d.length!==e.length?!1:d.every((m,c)=>m===e[c])||findOid(t,e,u+1)},getNamedCurve=t=>{switch(!0){case findOid(t,[42,134,72,206,61,3,1,7]):return"P-256";case findOid(t,[43,129,4,0,34]):return"P-384";case findOid(t,[43,129,4,0,35]):return"P-521";case findOid(t,[43,101,110]):return"X25519";case findOid(t,[43,101,111]):return"X448";case findOid(t,[43,101,112]):return"Ed25519";case findOid(t,[43,101,113]):return"Ed448";default:throw new JOSENotSupported("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},genericImport=async(t,e,r,u,d)=>{var m;let c,a;const o=new Uint8Array(atob(r.replace(t,"")).split("").map(h=>h.charCodeAt(0))),s=e==="spki";switch(u){case"PS256":case"PS384":case"PS512":c={name:"RSA-PSS",hash:`SHA-${u.slice(-3)}`},a=s?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":c={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${u.slice(-3)}`},a=s?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":c={name:"RSA-OAEP",hash:`SHA-${parseInt(u.slice(-3),10)||1}`},a=s?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":c={name:"ECDSA",namedCurve:"P-256"},a=s?["verify"]:["sign"];break;case"ES384":c={name:"ECDSA",namedCurve:"P-384"},a=s?["verify"]:["sign"];break;case"ES512":c={name:"ECDSA",namedCurve:"P-521"},a=s?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const h=getNamedCurve(o);c=h.startsWith("P-")?{name:"ECDH",namedCurve:h}:{name:h},a=s?[]:["deriveBits"];break}case"EdDSA":c={name:getNamedCurve(o)},a=s?["verify"]:["sign"];break;default:throw new JOSENotSupported('Invalid or unsupported "alg" (Algorithm) value')}return crypto$1.subtle.importKey(e,o,c,(m=d?.extractable)!==null&&m!==void 0?m:!1,a)},fromPKCS8=(t,e,r)=>genericImport(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",t,e,r),fromSPKI=(t,e,r)=>genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",t,e,r);function getElement(t){let e=[],r=0;for(;r<t.length;){let u=parseElement(t.subarray(r));e.push(u),r+=u.byteLength}return e}function parseElement(t){let e=0,r=t[0]&31;if(e++,r===31){for(r=0;t[e]>=128;)r=r*128+t[e]-128,e++;r=r*128+t[e]-128,e++}let u=0;if(t[e]<128)u=t[e],e++;else if(u===128){for(u=0;t[e+u]!==0||t[e+u+1]!==0;){if(u>t.byteLength)throw new TypeError("invalid indefinite form length");u++}const m=e+u+2;return{byteLength:m,contents:t.subarray(e,e+u),raw:t.subarray(0,m)}}else{let m=t[e]&127;e++,u=0;for(let c=0;c<m;c++)u=u*256+t[e],e++}const d=e+u;return{byteLength:d,contents:t.subarray(e,d),raw:t.subarray(0,d)}}function spkiFromX509(t){const e=getElement(getElement(parseElement(t).contents)[0].contents);return encodeBase64(e[e[0].raw[0]===160?6:5].raw)}function getSPKI(t){const e=t.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=decodeBase64(e);return formatPEM(spkiFromX509(r),"PUBLIC KEY")}const fromX509=(t,e,r)=>{let u;try{u=getSPKI(t)}catch(d){throw new TypeError("Failed to parse the X.509 certificate",{cause:d})}return fromSPKI(u,e,r)};function subtleMapping(t){let e,r;switch(t.kty){case"oct":{switch(t.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${t.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new JOSENotSupported(`${t.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},r=["deriveBits"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"EdDSA":e={name:t.crv},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:r}}const parse$3=async t=>{var e,r;if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:u,keyUsages:d}=subtleMapping(t),m=[u,(e=t.ext)!==null&&e!==void 0?e:!1,(r=t.key_ops)!==null&&r!==void 0?r:d];if(u.name==="PBKDF2")return crypto$1.subtle.importKey("raw",decode$1(t.k),...m);const c={...t};return delete c.alg,delete c.use,crypto$1.subtle.importKey("jwk",c,...m)};async function importSPKI(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return fromSPKI(t,e,r)}async function importX509(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return fromX509(t,e,r)}async function importPKCS8(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return fromPKCS8(t,e,r)}async function importJWK(t,e,r){var u;if(!isObject$1(t))throw new TypeError("JWK must be an object");switch(e||(e=t.alg),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r??(r=t.ext!==!0),r?parse$3({...t,alg:e,ext:(u=t.ext)!==null&&u!==void 0?u:!1}):decode$1(t.k);case"RSA":if(t.oth!==void 0)throw new JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return parse$3({...t,alg:e});default:throw new JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}const symmetricTypeCheck=(t,e)=>{if(!(e instanceof Uint8Array)){if(!isKeyLike(e))throw new TypeError(withAlg(t,e,...types$4,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${types$4.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},asymmetricTypeCheck=(t,e,r)=>{if(!isKeyLike(e))throw new TypeError(withAlg(t,e,...types$4));if(e.type==="secret")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&e.type==="public")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&e.type==="public")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&r==="verify"&&e.type==="private")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&r==="encrypt"&&e.type==="private")throw new TypeError(`${types$4.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},checkKeyType=(t,e,r)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?symmetricTypeCheck(t,e):asymmetricTypeCheck(t,e,r)};async function cbcEncrypt(t,e,r,u,d){if(!(r instanceof Uint8Array))throw new TypeError(invalidKeyInput(r,"Uint8Array"));const m=parseInt(t.slice(1,4),10),c=await crypto$1.subtle.importKey("raw",r.subarray(m>>3),"AES-CBC",!1,["encrypt"]),a=await crypto$1.subtle.importKey("raw",r.subarray(0,m>>3),{hash:`SHA-${m<<1}`,name:"HMAC"},!1,["sign"]),o=new Uint8Array(await crypto$1.subtle.encrypt({iv:u,name:"AES-CBC"},c,e)),s=concat(d,u,o,uint64be(d.length<<3)),h=new Uint8Array((await crypto$1.subtle.sign("HMAC",a,s)).slice(0,m>>3));return{ciphertext:o,tag:h}}async function gcmEncrypt(t,e,r,u,d){let m;r instanceof Uint8Array?m=await crypto$1.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(checkEncCryptoKey(r,t,"encrypt"),m=r);const c=new Uint8Array(await crypto$1.subtle.encrypt({additionalData:d,iv:u,name:"AES-GCM",tagLength:128},m,e)),a=c.slice(-16);return{ciphertext:c.slice(0,-16),tag:a}}const encrypt=async(t,e,r,u,d)=>{if(!isCryptoKey(r)&&!(r instanceof Uint8Array))throw new TypeError(invalidKeyInput(r,...types$4,"Uint8Array"));switch(checkIvLength(t,u),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&checkCekLength(r,parseInt(t.slice(-3),10)),cbcEncrypt(t,e,r,u,d);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&checkCekLength(r,parseInt(t.slice(1,4),10)),gcmEncrypt(t,e,r,u,d);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};async function wrap$2(t,e,r,u){const d=t.slice(0,7);u||(u=generateIv(d));const{ciphertext:m,tag:c}=await encrypt(d,r,e,u,new Uint8Array(0));return{encryptedKey:m,iv:encode$1(u),tag:encode$1(c)}}async function unwrap$2(t,e,r,u,d){const m=t.slice(0,7);return decrypt$2(m,e,r,u,d,new Uint8Array(0))}async function decryptKeyManagement(t,e,r,u,d){switch(checkKeyType(t,e,"decrypt"),t){case"dir":{if(r!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(r!==void 0)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!isObject$1(u.epk))throw new JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!ecdhAllowed(e))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const m=await importJWK(u.epk,t);let c,a;if(u.apu!==void 0){if(typeof u.apu!="string")throw new JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{c=decode$1(u.apu)}catch{throw new JWEInvalid("Failed to base64url decode the apu")}}if(u.apv!==void 0){if(typeof u.apv!="string")throw new JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=decode$1(u.apv)}catch{throw new JWEInvalid("Failed to base64url decode the apv")}}const o=await deriveKey$1(m,e,t==="ECDH-ES"?u.enc:t,t==="ECDH-ES"?bitLength(u.enc):parseInt(t.slice(-5,-2),10),c,a);if(t==="ECDH-ES")return o;if(r===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$3(t.slice(-6),o,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return decrypt(t,e,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof u.p2c!="number")throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');const m=d?.maxPBES2Count||1e4;if(u.p2c>m)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof u.p2s!="string")throw new JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let c;try{c=decode$1(u.p2s)}catch{throw new JWEInvalid("Failed to base64url decode the p2s")}return decrypt$1(t,e,r,u.p2c,c)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap$3(t,e,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new JWEInvalid("JWE Encrypted Key missing");if(typeof u.iv!="string")throw new JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof u.tag!="string")throw new JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');let m;try{m=decode$1(u.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}let c;try{c=decode$1(u.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}return unwrap$2(t,e,r,m,c)}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function validateCrit(t,e,r,u,d){if(d.crit!==void 0&&u.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!u||u.crit===void 0)return new Set;if(!Array.isArray(u.crit)||u.crit.length===0||u.crit.some(c=>typeof c!="string"||c.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let m;r!==void 0?m=new Map([...Object.entries(r),...e.entries()]):m=e;for(const c of u.crit){if(!m.has(c))throw new JOSENotSupported(`Extension Header Parameter "${c}" is not recognized`);if(d[c]===void 0)throw new t(`Extension Header Parameter "${c}" is missing`);if(m.get(c)&&u[c]===void 0)throw new t(`Extension Header Parameter "${c}" MUST be integrity protected`)}return new Set(u.crit)}const validateAlgorithms=(t,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(r=>typeof r!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)};async function flattenedDecrypt(t,e,r){var u;if(!isObject$1(t))throw new JWEInvalid("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new JWEInvalid("JOSE Header missing");if(typeof t.iv!="string")throw new JWEInvalid("JWE Initialization Vector missing or incorrect type");if(typeof t.ciphertext!="string")throw new JWEInvalid("JWE Ciphertext missing or incorrect type");if(typeof t.tag!="string")throw new JWEInvalid("JWE Authentication Tag missing or incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new JWEInvalid("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new JWEInvalid("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new JWEInvalid("JWE AAD incorrect type");if(t.header!==void 0&&!isObject$1(t.header))throw new JWEInvalid("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!isObject$1(t.unprotected))throw new JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let d;if(t.protected)try{const K=decode$1(t.protected);d=JSON.parse(decoder.decode(K))}catch{throw new JWEInvalid("JWE Protected Header is invalid")}if(!isDisjoint(d,t.header,t.unprotected))throw new JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const m={...d,...t.header,...t.unprotected};if(validateCrit(JWEInvalid,new Map,r?.crit,d,m),m.zip!==void 0){if(!d||!d.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(m.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:c,enc:a}=m;if(typeof c!="string"||!c)throw new JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if(typeof a!="string"||!a)throw new JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");const o=r&&validateAlgorithms("keyManagementAlgorithms",r.keyManagementAlgorithms),s=r&&validateAlgorithms("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(o&&!o.has(c))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(s&&!s.has(a))throw new JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let h;if(t.encrypted_key!==void 0)try{h=decode$1(t.encrypted_key)}catch{throw new JWEInvalid("Failed to base64url decode the encrypted_key")}let v=!1;typeof e=="function"&&(e=await e(d,t),v=!0);let E;try{E=await decryptKeyManagement(c,e,h,m,r)}catch(K){if(K instanceof TypeError||K instanceof JWEInvalid||K instanceof JOSENotSupported)throw K;E=generateCek(a)}let y,A;try{y=decode$1(t.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}try{A=decode$1(t.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}const w=encoder.encode((u=t.protected)!==null&&u!==void 0?u:"");let I;t.aad!==void 0?I=concat(w,encoder.encode("."),encoder.encode(t.aad)):I=w;let _;try{_=decode$1(t.ciphertext)}catch{throw new JWEInvalid("Failed to base64url decode the ciphertext")}let S=await decrypt$2(a,E,_,y,A,I);m.zip==="DEF"&&(S=await(r?.inflateRaw||inflate)(S));const j={plaintext:S};if(t.protected!==void 0&&(j.protectedHeader=d),t.aad!==void 0)try{j.additionalAuthenticatedData=decode$1(t.aad)}catch{throw new JWEInvalid("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(j.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(j.unprotectedHeader=t.header),v?{...j,key:e}:j}async function compactDecrypt(t,e,r){if(t instanceof Uint8Array&&(t=decoder.decode(t)),typeof t!="string")throw new JWEInvalid("Compact JWE must be a string or Uint8Array");const{0:u,1:d,2:m,3:c,4:a,length:o}=t.split(".");if(o!==5)throw new JWEInvalid("Invalid Compact JWE");const s=await flattenedDecrypt({ciphertext:c,iv:m||void 0,protected:u||void 0,tag:a||void 0,encrypted_key:d||void 0},e,r),h={plaintext:s.plaintext,protectedHeader:s.protectedHeader};return typeof e=="function"?{...h,key:s.key}:h}async function generalDecrypt(t,e,r){if(!isObject$1(t))throw new JWEInvalid("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(isObject$1))throw new JWEInvalid("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new JWEInvalid("JWE Recipients has no members");for(const u of t.recipients)try{return await flattenedDecrypt({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:u.encrypted_key,header:u.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},e,r)}catch{}throw new JWEDecryptionFailed}const keyToJWK=async t=>{if(t instanceof Uint8Array)return{kty:"oct",k:encode$1(t)};if(!isCryptoKey(t))throw new TypeError(invalidKeyInput(t,...types$4,"Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:r,alg:u,use:d,...m}=await crypto$1.subtle.exportKey("jwk",t);return m};async function exportSPKI(t){return toSPKI(t)}async function exportPKCS8(t){return toPKCS8(t)}async function exportJWK(t){return keyToJWK(t)}async function encryptKeyManagement(t,e,r,u,d={}){let m,c,a;switch(checkKeyType(t,r,"encrypt"),t){case"dir":{a=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ecdhAllowed(r))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:o,apv:s}=d;let{epk:h}=d;h||(h=(await generateEpk(r)).privateKey);const{x:v,y:E,crv:y,kty:A}=await exportJWK(h),w=await deriveKey$1(r,h,t==="ECDH-ES"?e:t,t==="ECDH-ES"?bitLength(e):parseInt(t.slice(-5,-2),10),o,s);if(c={epk:{x:v,crv:y,kty:A}},A==="EC"&&(c.epk.y=E),o&&(c.apu=encode$1(o)),s&&(c.apv=encode$1(s)),t==="ECDH-ES"){a=w;break}a=u||generateCek(e);const I=t.slice(-6);m=await wrap$3(I,w,a);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=u||generateCek(e),m=await encrypt$1(t,r,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=u||generateCek(e);const{p2c:o,p2s:s}=d;({encryptedKey:m,...c}=await encrypt$2(t,r,a,o,s));break}case"A128KW":case"A192KW":case"A256KW":{a=u||generateCek(e),m=await wrap$3(t,r,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=u||generateCek(e);const{iv:o}=d;({encryptedKey:m,...c}=await wrap$2(t,r,a,o));break}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:m,parameters:c}}const unprotected=Symbol();class FlattenedEncrypt{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!isDisjoint(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const u={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(validateCrit(JWEInvalid,new Map,r?.crit,this._protectedHeader,u),u.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(u.zip!=="DEF")throw new JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:d,enc:m}=u;if(typeof d!="string"||!d)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof m!="string"||!m)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let c;if(d==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(d==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let a;{let A;({cek:a,encryptedKey:c,parameters:A}=await encryptKeyManagement(d,m,e,this._cek,this._keyManagementParameters)),A&&(r&&unprotected in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...A}:this.setUnprotectedHeader(A):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...A}:this.setProtectedHeader(A))}this._iv||(this._iv=generateIv(m));let o,s,h;this._protectedHeader?s=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):s=encoder.encode(""),this._aad?(h=encode$1(this._aad),o=concat(s,encoder.encode("."),encoder.encode(h))):o=s;let v,E;if(u.zip==="DEF"){const A=await(r?.deflateRaw||deflate)(this._plaintext);({ciphertext:v,tag:E}=await encrypt(m,A,a,this._iv,o))}else({ciphertext:v,tag:E}=await encrypt(m,this._plaintext,a,this._iv,o));const y={ciphertext:encode$1(v),iv:encode$1(this._iv),tag:encode$1(E)};return c&&(y.encrypted_key=encode$1(c)),h&&(y.aad=h),this._protectedHeader&&(y.protected=decoder.decode(s)),this._sharedUnprotectedHeader&&(y.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(y.header=this._unprotectedHeader),y}}class IndividualRecipient{constructor(e,r,u){this.parent=e,this.key=r,this.options=u}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class GeneralEncrypt{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,r){const u=new IndividualRecipient(this,e,{crit:r?.crit});return this._recipients.push(u),u}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var r,u,d;if(!this._recipients.length)throw new JWEInvalid("at least one recipient must be added");if(e={deflateRaw:e?.deflateRaw},this._recipients.length===1){const[o]=this._recipients,s=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).encrypt(o.key,{...o.options,...e});let h={ciphertext:s.ciphertext,iv:s.iv,recipients:[{}],tag:s.tag};return s.aad&&(h.aad=s.aad),s.protected&&(h.protected=s.protected),s.unprotected&&(h.unprotected=s.unprotected),s.encrypted_key&&(h.recipients[0].encrypted_key=s.encrypted_key),s.header&&(h.recipients[0].header=s.header),h}let m;for(let o=0;o<this._recipients.length;o++){const s=this._recipients[o];if(!isDisjoint(this._protectedHeader,this._unprotectedHeader,s.unprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const h={...this._protectedHeader,...this._unprotectedHeader,...s.unprotectedHeader},{alg:v}=h;if(typeof v!="string"||!v)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(v==="dir"||v==="ECDH-ES")throw new JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof h.enc!="string"||!h.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!m)m=h.enc;else if(m!==h.enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(validateCrit(JWEInvalid,new Map,s.options.crit,this._protectedHeader,h),h.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const c=generateCek(m);let a={ciphertext:"",iv:"",recipients:[],tag:""};for(let o=0;o<this._recipients.length;o++){const s=this._recipients[o],h={};a.recipients.push(h);const E={...this._protectedHeader,...this._unprotectedHeader,...s.unprotectedHeader}.alg.startsWith("PBES2")?2048+o:void 0;if(o===0){const w=await new FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(c).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(s.unprotectedHeader).setKeyManagementParameters({p2c:E}).encrypt(s.key,{...s.options,...e,[unprotected]:!0});a.ciphertext=w.ciphertext,a.iv=w.iv,a.tag=w.tag,w.aad&&(a.aad=w.aad),w.protected&&(a.protected=w.protected),w.unprotected&&(a.unprotected=w.unprotected),h.encrypted_key=w.encrypted_key,w.header&&(h.header=w.header);continue}const{encryptedKey:y,parameters:A}=await encryptKeyManagement(((r=s.unprotectedHeader)===null||r===void 0?void 0:r.alg)||((u=this._protectedHeader)===null||u===void 0?void 0:u.alg)||((d=this._unprotectedHeader)===null||d===void 0?void 0:d.alg),m,s.key,c,{p2c:E});h.encrypted_key=encode$1(y),(s.unprotectedHeader||A)&&(h.header={...s.unprotectedHeader,...A})}return a}}function subtleDsa(t,e){const r=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:t.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:e.namedCurve};case"EdDSA":return{name:e.name};default:throw new JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}function getCryptoKey(t,e,r){if(isCryptoKey(e))return checkSigCryptoKey(e,t,r),e;if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(invalidKeyInput(e,...types$4));return crypto$1.subtle.importKey("raw",e,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(invalidKeyInput(e,...types$4,"Uint8Array"))}const verify=async(t,e,r,u)=>{const d=await getCryptoKey(t,e,"verify");checkKeyLength(t,d);const m=subtleDsa(t,d.algorithm);try{return await crypto$1.subtle.verify(m,d,r,u)}catch{return!1}};async function flattenedVerify(t,e,r){var u;if(!isObject$1(t))throw new JWSInvalid("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new JWSInvalid("JWS Protected Header incorrect type");if(t.payload===void 0)throw new JWSInvalid("JWS Payload missing");if(typeof t.signature!="string")throw new JWSInvalid("JWS Signature missing or incorrect type");if(t.header!==void 0&&!isObject$1(t.header))throw new JWSInvalid("JWS Unprotected Header incorrect type");let d={};if(t.protected)try{const I=decode$1(t.protected);d=JSON.parse(decoder.decode(I))}catch{throw new JWSInvalid("JWS Protected Header is invalid")}if(!isDisjoint(d,t.header))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const m={...d,...t.header},c=validateCrit(JWSInvalid,new Map([["b64",!0]]),r?.crit,d,m);let a=!0;if(c.has("b64")&&(a=d.b64,typeof a!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=m;if(typeof o!="string"||!o)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');const s=r&&validateAlgorithms("algorithms",r.algorithms);if(s&&!s.has(o))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(a){if(typeof t.payload!="string")throw new JWSInvalid("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let h=!1;typeof e=="function"&&(e=await e(d,t),h=!0),checkKeyType(o,e,"verify");const v=concat(encoder.encode((u=t.protected)!==null&&u!==void 0?u:""),encoder.encode("."),typeof t.payload=="string"?encoder.encode(t.payload):t.payload);let E;try{E=decode$1(t.signature)}catch{throw new JWSInvalid("Failed to base64url decode the signature")}if(!await verify(o,e,E,v))throw new JWSSignatureVerificationFailed;let A;if(a)try{A=decode$1(t.payload)}catch{throw new JWSInvalid("Failed to base64url decode the payload")}else typeof t.payload=="string"?A=encoder.encode(t.payload):A=t.payload;const w={payload:A};return t.protected!==void 0&&(w.protectedHeader=d),t.header!==void 0&&(w.unprotectedHeader=t.header),h?{...w,key:e}:w}async function compactVerify(t,e,r){if(t instanceof Uint8Array&&(t=decoder.decode(t)),typeof t!="string")throw new JWSInvalid("Compact JWS must be a string or Uint8Array");const{0:u,1:d,2:m,length:c}=t.split(".");if(c!==3)throw new JWSInvalid("Invalid Compact JWS");const a=await flattenedVerify({payload:d,protected:u,signature:m},e,r),o={payload:a.payload,protectedHeader:a.protectedHeader};return typeof e=="function"?{...o,key:a.key}:o}async function generalVerify(t,e,r){if(!isObject$1(t))throw new JWSInvalid("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(isObject$1))throw new JWSInvalid("JWS Signatures missing or incorrect type");for(const u of t.signatures)try{return await flattenedVerify({header:u.header,payload:t.payload,protected:u.protected,signature:u.signature},e,r)}catch{}throw new JWSSignatureVerificationFailed}const epoch=t=>Math.floor(t.getTime()/1e3),minute=60,hour=minute*60,day=hour*24,week=day*7,year=day*365.25,REGEX$1=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,secs=t=>{const e=REGEX$1.exec(t);if(!e)throw new TypeError("Invalid time period format");const r=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(r*minute);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(r*hour);case"day":case"days":case"d":return Math.round(r*day);case"week":case"weeks":case"w":return Math.round(r*week);default:return Math.round(r*year)}},normalizeTyp=t=>t.toLowerCase().replace(/^application\//,""),checkAudiencePresence=(t,e)=>typeof t=="string"?e.includes(t):Array.isArray(t)?e.some(Set.prototype.has.bind(new Set(t))):!1,jwtPayload=(t,e,r={})=>{const{typ:u}=r;if(u&&(typeof t.typ!="string"||normalizeTyp(t.typ)!==normalizeTyp(u)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let d;try{d=JSON.parse(decoder.decode(e))}catch{}if(!isObject$1(d))throw new JWTInvalid("JWT Claims Set must be a top-level JSON object");const{requiredClaims:m=[],issuer:c,subject:a,audience:o,maxTokenAge:s}=r;s!==void 0&&m.push("iat"),o!==void 0&&m.push("aud"),a!==void 0&&m.push("sub"),c!==void 0&&m.push("iss");for(const y of new Set(m.reverse()))if(!(y in d))throw new JWTClaimValidationFailed(`missing required "${y}" claim`,y,"missing");if(c&&!(Array.isArray(c)?c:[c]).includes(d.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(a&&d.sub!==a)throw new JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(o&&!checkAudiencePresence(d.aud,typeof o=="string"?[o]:o))throw new JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");let h;switch(typeof r.clockTolerance){case"string":h=secs(r.clockTolerance);break;case"number":h=r.clockTolerance;break;case"undefined":h=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:v}=r,E=epoch(v||new Date);if((d.iat!==void 0||s)&&typeof d.iat!="number")throw new JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(d.nbf!==void 0){if(typeof d.nbf!="number")throw new JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(d.nbf>E+h)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(d.exp!==void 0){if(typeof d.exp!="number")throw new JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(d.exp<=E-h)throw new JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(s){const y=E-d.iat,A=typeof s=="number"?s:secs(s);if(y-h>A)throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(y<0-h)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return d};async function jwtVerify(t,e,r){var u;const d=await compactVerify(t,e,r);if(!((u=d.protectedHeader.crit)===null||u===void 0)&&u.includes("b64")&&d.protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");const c={payload:jwtPayload(d.protectedHeader,d.payload,r),protectedHeader:d.protectedHeader};return typeof e=="function"?{...c,key:d.key}:c}async function jwtDecrypt(t,e,r){const u=await compactDecrypt(t,e,r),d=jwtPayload(u.protectedHeader,u.plaintext,r),{protectedHeader:m}=u;if(m.iss!==void 0&&m.iss!==d.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(m.sub!==void 0&&m.sub!==d.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(m.aud!==void 0&&JSON.stringify(m.aud)!==JSON.stringify(d.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");const c={payload:d,protectedHeader:m};return typeof e=="function"?{...c,key:u.key}:c}class CompactEncrypt{constructor(e){this._flattened=new FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,r){const u=await this._flattened.encrypt(e,r);return[u.protected,u.encrypted_key,u.iv,u.ciphertext,u.tag].join(".")}}const sign=async(t,e,r)=>{const u=await getCryptoKey(t,e,"sign");checkKeyLength(t,u);const d=await crypto$1.subtle.sign(subtleDsa(t,u.algorithm),u,r);return new Uint8Array(d)};class FlattenedSign{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!isDisjoint(this._protectedHeader,this._unprotectedHeader))throw new JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const u={...this._protectedHeader,...this._unprotectedHeader},d=validateCrit(JWSInvalid,new Map([["b64",!0]]),r?.crit,this._protectedHeader,u);let m=!0;if(d.has("b64")&&(m=this._protectedHeader.b64,typeof m!="boolean"))throw new JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:c}=u;if(typeof c!="string"||!c)throw new JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');checkKeyType(c,e,"sign");let a=this._payload;m&&(a=encoder.encode(encode$1(a)));let o;this._protectedHeader?o=encoder.encode(encode$1(JSON.stringify(this._protectedHeader))):o=encoder.encode("");const s=concat(o,encoder.encode("."),a),h=await sign(c,e,s),v={signature:encode$1(h),payload:""};return m&&(v.payload=decoder.decode(a)),this._unprotectedHeader&&(v.header=this._unprotectedHeader),this._protectedHeader&&(v.protected=decoder.decode(o)),v}}class CompactSign{constructor(e){this._flattened=new FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,r){const u=await this._flattened.sign(e,r);if(u.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${u.protected}.${u.payload}.${u.signature}`}}class IndividualSignature{constructor(e,r,u){this.parent=e,this.key=r,this.options=u}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class GeneralSign{constructor(e){this._signatures=[],this._payload=e}addSignature(e,r){const u=new IndividualSignature(this,e,r);return this._signatures.push(u),u}async sign(){if(!this._signatures.length)throw new JWSInvalid("at least one signature must be added");const e={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){const u=this._signatures[r],d=new FlattenedSign(this._payload);d.setProtectedHeader(u.protectedHeader),d.setUnprotectedHeader(u.unprotectedHeader);const{payload:m,...c}=await d.sign(u.key,u.options);if(r===0)e.payload=m;else if(e.payload!==m)throw new JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(c)}return e}}class ProduceJWT{constructor(e){if(!isObject$1(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:epoch(new Date)+secs(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:epoch(new Date)+secs(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:epoch(new Date)}:this._payload={...this._payload,iat:e},this}}class SignJWT extends ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,r){var u;const d=new CompactSign(encoder.encode(JSON.stringify(this._payload)));if(d.setProtectedHeader(this._protectedHeader),Array.isArray((u=this._protectedHeader)===null||u===void 0?void 0:u.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new JWTInvalid("JWTs MUST NOT use unencoded payload");return d.sign(e,r)}}class EncryptJWT extends ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,r){const u=new CompactEncrypt(encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),u.setProtectedHeader(this._protectedHeader),this._iv&&u.setInitializationVector(this._iv),this._cek&&u.setContentEncryptionKey(this._cek),this._keyManagementParameters&&u.setKeyManagementParameters(this._keyManagementParameters),u.encrypt(e,r)}}const check=(t,e)=>{if(typeof t!="string"||!t)throw new JWKInvalid(`${e} missing or invalid`)};async function calculateJwkThumbprint(t,e){if(!isObject$1(t))throw new TypeError("JWK must be an object");if(e??(e="sha256"),e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(t.kty){case"EC":check(t.crv,'"crv" (Curve) Parameter'),check(t.x,'"x" (X Coordinate) Parameter'),check(t.y,'"y" (Y Coordinate) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":check(t.crv,'"crv" (Subtype of Key Pair) Parameter'),check(t.x,'"x" (Public Key) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":check(t.e,'"e" (Exponent) Parameter'),check(t.n,'"n" (Modulus) Parameter'),r={e:t.e,kty:t.kty,n:t.n};break;case"oct":check(t.k,'"k" (Key Value) Parameter'),r={k:t.k,kty:t.kty};break;default:throw new JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}const u=encoder.encode(JSON.stringify(r));return encode$1(await digest(e,u))}async function calculateJwkThumbprintUri(t,e){e??(e="sha256");const r=await calculateJwkThumbprint(t,e);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${e.slice(-3)}:${r}`}async function EmbeddedJWK(t,e){const r={...t,...e?.header};if(!isObject$1(r.jwk))throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const u=await importJWK({...r.jwk,ext:!0},r.alg,!0);if(u instanceof Uint8Array||u.type!=="public")throw new JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return u}function getKtyFromAlg(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function isJWKSLike(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(isJWKLike)}function isJWKLike(t){return isObject$1(t)}function clone(t){return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}class LocalJWKSet{constructor(e){if(this._cached=new WeakMap,!isJWKSLike(e))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks=clone(e)}async getKey(e,r){const{alg:u,kid:d}={...e,...r?.header},m=getKtyFromAlg(u),c=this._jwks.keys.filter(s=>{let h=m===s.kty;if(h&&typeof d=="string"&&(h=d===s.kid),h&&typeof s.alg=="string"&&(h=u===s.alg),h&&typeof s.use=="string"&&(h=s.use==="sig"),h&&Array.isArray(s.key_ops)&&(h=s.key_ops.includes("verify")),h&&u==="EdDSA"&&(h=s.crv==="Ed25519"||s.crv==="Ed448"),h)switch(u){case"ES256":h=s.crv==="P-256";break;case"ES256K":h=s.crv==="secp256k1";break;case"ES384":h=s.crv==="P-384";break;case"ES512":h=s.crv==="P-521";break}return h}),{0:a,length:o}=c;if(o===0)throw new JWKSNoMatchingKey;if(o!==1){const s=new JWKSMultipleMatchingKeys,{_cached:h}=this;throw s[Symbol.asyncIterator]=async function*(){for(const v of c)try{yield await importWithAlgCache(h,v,u)}catch{continue}},s}return importWithAlgCache(this._cached,a,u)}}async function importWithAlgCache(t,e,r){const u=t.get(e)||t.set(e,{}).get(e);if(u[r]===void 0){const d=await importJWK({...e,ext:!0},r);if(d instanceof Uint8Array||d.type!=="public")throw new JWKSInvalid("JSON Web Key Set members must be public keys");u[r]=d}return u[r]}function createLocalJWKSet(t){const e=new LocalJWKSet(t);return async function(r,u){return e.getKey(r,u)}}const fetchJwks=async(t,e,r)=>{let u,d,m=!1;typeof AbortController=="function"&&(u=new AbortController,d=setTimeout(()=>{m=!0,u.abort()},e));const c=await fetch(t.href,{signal:u?u.signal:void 0,redirect:"manual",headers:r.headers}).catch(a=>{throw m?new JWKSTimeout:a});if(d!==void 0&&clearTimeout(d),c.status!==200)throw new JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await c.json()}catch{throw new JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function isCloudflareWorkers(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}class RemoteJWKSet extends LocalJWKSet{constructor(e,r){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:r?.agent,headers:r?.headers},this._timeoutDuration=typeof r?.timeoutDuration=="number"?r?.timeoutDuration:5e3,this._cooldownDuration=typeof r?.cooldownDuration=="number"?r?.cooldownDuration:3e4,this._cacheMaxAge=typeof r?.cacheMaxAge=="number"?r?.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,r)}catch(u){if(u instanceof JWKSNoMatchingKey&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,r);throw u}}async reload(){this._pendingFetch&&isCloudflareWorkers()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=fetchJwks(this._url,this._timeoutDuration,this._options).then(e=>{if(!isJWKSLike(e))throw new JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function createRemoteJWKSet(t,e){const r=new RemoteJWKSet(t,e);return async function(u,d){return r.getKey(u,d)}}class UnsecuredJWT extends ProduceJWT{encode(){const e=encode$1(JSON.stringify({alg:"none"})),r=encode$1(JSON.stringify(this._payload));return`${e}.${r}.`}static decode(e,r){if(typeof e!="string")throw new JWTInvalid("Unsecured JWT must be a string");const{0:u,1:d,2:m,length:c}=e.split(".");if(c!==3||m!=="")throw new JWTInvalid("Invalid Unsecured JWT");let a;try{if(a=JSON.parse(decoder.decode(decode$1(u))),a.alg!=="none")throw new Error}catch{throw new JWTInvalid("Invalid Unsecured JWT")}return{payload:jwtPayload(a,decode$1(d),r),header:a}}}const encode=encode$1,decode=decode$1,base64url=Object.freeze(Object.defineProperty({__proto__:null,decode,encode},Symbol.toStringTag,{value:"Module"}));function decodeProtectedHeader(t){let e;if(typeof t=="string"){const r=t.split(".");(r.length===3||r.length===5)&&([e]=r)}else if(typeof t=="object"&&t)if("protected"in t)e=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;const r=JSON.parse(decoder.decode(decode(e)));if(!isObject$1(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function decodeJwt(t){if(typeof t!="string")throw new JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:r}=t.split(".");if(r===5)throw new JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new JWTInvalid("Invalid JWT");if(!e)throw new JWTInvalid("JWTs must contain a payload");let u;try{u=decode(e)}catch{throw new JWTInvalid("Failed to base64url decode the payload")}let d;try{d=JSON.parse(decoder.decode(u))}catch{throw new JWTInvalid("Failed to parse the decoded payload as JSON")}if(!isObject$1(d))throw new JWTInvalid("Invalid JWT Claims Set");return d}async function generateSecret$1(t,e){var r;let u,d,m;switch(t){case"HS256":case"HS384":case"HS512":u=parseInt(t.slice(-3),10),d={name:"HMAC",hash:`SHA-${u}`,length:u},m=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return u=parseInt(t.slice(-3),10),random(new Uint8Array(u>>3));case"A128KW":case"A192KW":case"A256KW":u=parseInt(t.slice(1,4),10),d={name:"AES-KW",length:u},m=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":u=parseInt(t.slice(1,4),10),d={name:"AES-GCM",length:u},m=["encrypt","decrypt"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(d,(r=e?.extractable)!==null&&r!==void 0?r:!1,m)}function getModulusLengthOption(t){var e;const r=(e=t?.modulusLength)!==null&&e!==void 0?e:2048;if(typeof r!="number"||r<2048)throw new JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}async function generateKeyPair$1(t,e){var r,u,d;let m,c;switch(t){case"PS256":case"PS384":case"PS512":m={name:"RSA-PSS",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},c=["sign","verify"];break;case"RS256":case"RS384":case"RS512":m={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},c=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":m={name:"RSA-OAEP",hash:`SHA-${parseInt(t.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:getModulusLengthOption(e)},c=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":m={name:"ECDSA",namedCurve:"P-256"},c=["sign","verify"];break;case"ES384":m={name:"ECDSA",namedCurve:"P-384"},c=["sign","verify"];break;case"ES512":m={name:"ECDSA",namedCurve:"P-521"},c=["sign","verify"];break;case"EdDSA":c=["sign","verify"];const a=(r=e?.crv)!==null&&r!==void 0?r:"Ed25519";switch(a){case"Ed25519":case"Ed448":m={name:a};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{c=["deriveKey","deriveBits"];const o=(u=e?.crv)!==null&&u!==void 0?u:"P-256";switch(o){case"P-256":case"P-384":case"P-521":{m={name:"ECDH",namedCurve:o};break}case"X25519":case"X448":m={name:o};break;default:throw new JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto$1.subtle.generateKey(m,(d=e?.extractable)!==null&&d!==void 0?d:!1,c)}async function generateKeyPair(t,e){return generateKeyPair$1(t,e)}async function generateSecret(t,e){return generateSecret$1(t,e)}const value$1="WebCryptoAPI",browser$3=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt,CompactSign,EmbeddedJWK,EncryptJWT,FlattenedEncrypt,FlattenedSign,GeneralEncrypt,GeneralSign,SignJWT,UnsecuredJWT,base64url,calculateJwkThumbprint,calculateJwkThumbprintUri,compactDecrypt,compactVerify,createLocalJWKSet,createRemoteJWKSet,cryptoRuntime:value$1,decodeJwt,decodeProtectedHeader,errors:errors$1,exportJWK,exportPKCS8,exportSPKI,flattenedDecrypt,flattenedVerify,generalDecrypt,generalVerify,generateKeyPair,generateSecret,importJWK,importPKCS8,importSPKI,importX509,jwtDecrypt,jwtVerify},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(browser$3);var JwksError_1,hasRequiredJwksError;function requireJwksError(){if(hasRequiredJwksError)return JwksError_1;hasRequiredJwksError=1;function t(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="JwksError",this.message=e}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,JwksError_1=t,JwksError_1}var utils$1,hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1;const t=require$$0$3,e=requireJwksError();function r(d){if(d.alg)return d.alg;if(d.kty==="RSA")return"RS256";if(d.kty==="EC")switch(d.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-521":return"ES512"}if(d.kty==="OKP")switch(d.crv){case"Ed25519":case"Ed448":return"EdDSA"}throw new e("Unsupported JWK")}async function u(d){const m=[];d=d.filter(({use:c})=>c==="sig"||c===void 0).filter(({kty:c})=>c==="RSA"||c==="EC"||c==="OKP");for(const c of d)try{const a=await t.importJWK({...c,ext:!0},r(c));if(a.type!=="public")continue;let o;switch(a[Symbol.toStringTag]){case"CryptoKey":{const s=await t.exportSPKI(a);o=()=>s;break}case"KeyObject":default:o=()=>a.export({format:"pem",type:"spki"})}m.push({get publicKey(){return o()},get rsaPublicKey(){return o()},getPublicKey(){return o()},...typeof c.kid=="string"&&c.kid?{kid:c.kid}:void 0,...typeof c.alg=="string"&&c.alg?{alg:c.alg}:void 0})}catch{continue}return m}return utils$1={retrieveSigningKeys:u},utils$1}var request={},hasRequiredRequest;function requireRequest(){if(hasRequiredRequest)return request;hasRequiredRequest=1;const t=require$$1$3,e=require$$1$3,r=require$$1$3;return request.default=u=>u.fetcher?u.fetcher(u.uri):new Promise((d,m)=>{const{hostname:c,path:a,port:o,protocol:s}=r.parse(u.uri),h={hostname:c,path:a,port:o,method:"GET",...u.headers&&{headers:{...u.headers}},...u.timeout&&{timeout:u.timeout},...u.agent&&{agent:u.agent}},E=(s==="https:"?e:t).request(h,y=>{let A="";y.setEncoding("utf8"),y.on("data",w=>{A+=w}),y.on("end",()=>{if(y.statusCode<200||y.statusCode>=300){const w=y.body&&(y.body.message||y.body)||y.statusMessage||`Http Error ${y.statusCode}`;m({errorMsg:w})}else try{d(A&&JSON.parse(A))}catch(w){m(w)}})});E.on("timeout",()=>E.destroy()).on("error",y=>m(y)).end()}),request}var cache={},async={},iterator,hasRequiredIterator;function requireIterator(){return hasRequiredIterator||(hasRequiredIterator=1,iterator=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),iterator}var yallist,hasRequiredYallist;function requireYallist(){if(hasRequiredYallist)return yallist;hasRequiredYallist=1,yallist=t,t.Node=d,t.create=t;function t(m){var c=this;if(c instanceof t||(c=new t),c.tail=null,c.head=null,c.length=0,m&&typeof m.forEach=="function")m.forEach(function(s){c.push(s)});else if(arguments.length>0)for(var a=0,o=arguments.length;a<o;a++)c.push(arguments[a]);return c}t.prototype.removeNode=function(m){if(m.list!==this)throw new Error("removing node which does not belong to this list");var c=m.next,a=m.prev;return c&&(c.prev=a),a&&(a.next=c),m===this.head&&(this.head=c),m===this.tail&&(this.tail=a),m.list.length--,m.next=null,m.prev=null,m.list=null,c},t.prototype.unshiftNode=function(m){if(m!==this.head){m.list&&m.list.removeNode(m);var c=this.head;m.list=this,m.next=c,c&&(c.prev=m),this.head=m,this.tail||(this.tail=m),this.length++}},t.prototype.pushNode=function(m){if(m!==this.tail){m.list&&m.list.removeNode(m);var c=this.tail;m.list=this,m.prev=c,c&&(c.next=m),this.tail=m,this.head||(this.head=m),this.length++}},t.prototype.push=function(){for(var m=0,c=arguments.length;m<c;m++)r(this,arguments[m]);return this.length},t.prototype.unshift=function(){for(var m=0,c=arguments.length;m<c;m++)u(this,arguments[m]);return this.length},t.prototype.pop=function(){if(this.tail){var m=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,m}},t.prototype.shift=function(){if(this.head){var m=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,m}},t.prototype.forEach=function(m,c){c=c||this;for(var a=this.head,o=0;a!==null;o++)m.call(c,a.value,o,this),a=a.next},t.prototype.forEachReverse=function(m,c){c=c||this;for(var a=this.tail,o=this.length-1;a!==null;o--)m.call(c,a.value,o,this),a=a.prev},t.prototype.get=function(m){for(var c=0,a=this.head;a!==null&&c<m;c++)a=a.next;if(c===m&&a!==null)return a.value},t.prototype.getReverse=function(m){for(var c=0,a=this.tail;a!==null&&c<m;c++)a=a.prev;if(c===m&&a!==null)return a.value},t.prototype.map=function(m,c){c=c||this;for(var a=new t,o=this.head;o!==null;)a.push(m.call(c,o.value,this)),o=o.next;return a},t.prototype.mapReverse=function(m,c){c=c||this;for(var a=new t,o=this.tail;o!==null;)a.push(m.call(c,o.value,this)),o=o.prev;return a},t.prototype.reduce=function(m,c){var a,o=this.head;if(arguments.length>1)a=c;else if(this.head)o=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;o!==null;s++)a=m(a,o.value,s),o=o.next;return a},t.prototype.reduceReverse=function(m,c){var a,o=this.tail;if(arguments.length>1)a=c;else if(this.tail)o=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;o!==null;s--)a=m(a,o.value,s),o=o.prev;return a},t.prototype.toArray=function(){for(var m=new Array(this.length),c=0,a=this.head;a!==null;c++)m[c]=a.value,a=a.next;return m},t.prototype.toArrayReverse=function(){for(var m=new Array(this.length),c=0,a=this.tail;a!==null;c++)m[c]=a.value,a=a.prev;return m},t.prototype.slice=function(m,c){c=c||this.length,c<0&&(c+=this.length),m=m||0,m<0&&(m+=this.length);var a=new t;if(c<m||c<0)return a;m<0&&(m=0),c>this.length&&(c=this.length);for(var o=0,s=this.head;s!==null&&o<m;o++)s=s.next;for(;s!==null&&o<c;o++,s=s.next)a.push(s.value);return a},t.prototype.sliceReverse=function(m,c){c=c||this.length,c<0&&(c+=this.length),m=m||0,m<0&&(m+=this.length);var a=new t;if(c<m||c<0)return a;m<0&&(m=0),c>this.length&&(c=this.length);for(var o=this.length,s=this.tail;s!==null&&o>c;o--)s=s.prev;for(;s!==null&&o>m;o--,s=s.prev)a.push(s.value);return a},t.prototype.splice=function(m,c,...a){m>this.length&&(m=this.length-1),m<0&&(m=this.length+m);for(var o=0,s=this.head;s!==null&&o<m;o++)s=s.next;for(var h=[],o=0;s&&o<c;o++)h.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var o=0;o<a.length;o++)s=e(this,s,a[o]);return h},t.prototype.reverse=function(){for(var m=this.head,c=this.tail,a=m;a!==null;a=a.prev){var o=a.prev;a.prev=a.next,a.next=o}return this.head=c,this.tail=m,this};function e(m,c,a){var o=c===m.head?new d(a,null,c,m):new d(a,c,c.next,m);return o.next===null&&(m.tail=o),o.prev===null&&(m.head=o),m.length++,o}function r(m,c){m.tail=new d(c,m.tail,null,m),m.head||(m.head=m.tail),m.length++}function u(m,c){m.head=new d(c,null,m.head,m),m.tail||(m.tail=m.head),m.length++}function d(m,c,a,o){if(!(this instanceof d))return new d(m,c,a,o);this.list=o,this.value=m,c?(c.next=this,this.prev=c):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{requireIterator()(t)}catch{}return yallist}var lruCache,hasRequiredLruCache;function requireLruCache(){if(hasRequiredLruCache)return lruCache;hasRequiredLruCache=1;const t=requireYallist(),e=Symbol("max"),r=Symbol("length"),u=Symbol("lengthCalculator"),d=Symbol("allowStale"),m=Symbol("maxAge"),c=Symbol("dispose"),a=Symbol("noDisposeOnSet"),o=Symbol("lruList"),s=Symbol("cache"),h=Symbol("updateAgeOnGet"),v=()=>1;class E{constructor(K){if(typeof K=="number"&&(K={max:K}),K||(K={}),K.max&&(typeof K.max!="number"||K.max<0))throw new TypeError("max must be a non-negative number");this[e]=K.max||1/0;const J=K.length||v;if(this[u]=typeof J!="function"?v:J,this[d]=K.stale||!1,K.maxAge&&typeof K.maxAge!="number")throw new TypeError("maxAge must be a number");this[m]=K.maxAge||0,this[c]=K.dispose,this[a]=K.noDisposeOnSet||!1,this[h]=K.updateAgeOnGet||!1,this.reset()}set max(K){if(typeof K!="number"||K<0)throw new TypeError("max must be a non-negative number");this[e]=K||1/0,w(this)}get max(){return this[e]}set allowStale(K){this[d]=!!K}get allowStale(){return this[d]}set maxAge(K){if(typeof K!="number")throw new TypeError("maxAge must be a non-negative number");this[m]=K,w(this)}get maxAge(){return this[m]}set lengthCalculator(K){typeof K!="function"&&(K=v),K!==this[u]&&(this[u]=K,this[r]=0,this[o].forEach(J=>{J.length=this[u](J.value,J.key),this[r]+=J.length})),w(this)}get lengthCalculator(){return this[u]}get length(){return this[r]}get itemCount(){return this[o].length}rforEach(K,J){J=J||this;for(let H=this[o].tail;H!==null;){const U=H.prev;S(this,K,H,J),H=U}}forEach(K,J){J=J||this;for(let H=this[o].head;H!==null;){const U=H.next;S(this,K,H,J),H=U}}keys(){return this[o].toArray().map(K=>K.key)}values(){return this[o].toArray().map(K=>K.value)}reset(){this[c]&&this[o]&&this[o].length&&this[o].forEach(K=>this[c](K.key,K.value)),this[s]=new Map,this[o]=new t,this[r]=0}dump(){return this[o].map(K=>A(this,K)?!1:{k:K.key,v:K.value,e:K.now+(K.maxAge||0)}).toArray().filter(K=>K)}dumpLru(){return this[o]}set(K,J,H){if(H=H||this[m],H&&typeof H!="number")throw new TypeError("maxAge must be a number");const U=H?Date.now():0,P=this[u](J,K);if(this[s].has(K)){if(P>this[e])return I(this,this[s].get(K)),!1;const ue=this[s].get(K).value;return this[c]&&(this[a]||this[c](K,ue.value)),ue.now=U,ue.maxAge=H,ue.value=J,this[r]+=P-ue.length,ue.length=P,this.get(K),w(this),!0}const Z=new _(K,J,P,U,H);return Z.length>this[e]?(this[c]&&this[c](K,J),!1):(this[r]+=Z.length,this[o].unshift(Z),this[s].set(K,this[o].head),w(this),!0)}has(K){if(!this[s].has(K))return!1;const J=this[s].get(K).value;return!A(this,J)}get(K){return y(this,K,!0)}peek(K){return y(this,K,!1)}pop(){const K=this[o].tail;return K?(I(this,K),K.value):null}del(K){I(this,this[s].get(K))}load(K){this.reset();const J=Date.now();for(let H=K.length-1;H>=0;H--){const U=K[H],P=U.e||0;if(P===0)this.set(U.k,U.v);else{const Z=P-J;Z>0&&this.set(U.k,U.v,Z)}}}prune(){this[s].forEach((K,J)=>y(this,J,!1))}}const y=(j,K,J)=>{const H=j[s].get(K);if(H){const U=H.value;if(A(j,U)){if(I(j,H),!j[d])return}else J&&(j[h]&&(H.value.now=Date.now()),j[o].unshiftNode(H));return U.value}},A=(j,K)=>{if(!K||!K.maxAge&&!j[m])return!1;const J=Date.now()-K.now;return K.maxAge?J>K.maxAge:j[m]&&J>j[m]},w=j=>{if(j[r]>j[e])for(let K=j[o].tail;j[r]>j[e]&&K!==null;){const J=K.prev;I(j,K),K=J}},I=(j,K)=>{if(K){const J=K.value;j[c]&&j[c](J.key,J.value),j[r]-=J.length,j[s].delete(J.key),j[o].removeNode(K)}};class _{constructor(K,J,H,U,P){this.key=K,this.value=J,this.length=H,this.now=U,this.maxAge=P||0}}const S=(j,K,J,H)=>{let U=J.value;A(j,U)&&(I(j,J),j[d]||(U=void 0)),U&&K.call(H,U.value,U.key,j)};return lruCache=E,lruCache}var lodash_clonedeep={exports:{}};lodash_clonedeep.exports;var hasRequiredLodash_clonedeep;function requireLodash_clonedeep(){return hasRequiredLodash_clonedeep||(hasRequiredLodash_clonedeep=1,function(t,e){var r=200,u="__lodash_hash_undefined__",d=9007199254740991,m="[object Arguments]",c="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",h="[object Function]",v="[object GeneratorFunction]",E="[object Map]",y="[object Number]",A="[object Object]",w="[object Promise]",I="[object RegExp]",_="[object Set]",S="[object String]",j="[object Symbol]",K="[object WeakMap]",J="[object ArrayBuffer]",H="[object DataView]",U="[object Float32Array]",P="[object Float64Array]",Z="[object Int8Array]",ie="[object Int16Array]",ue="[object Int32Array]",le="[object Uint8Array]",ne="[object Uint8ClampedArray]",ye="[object Uint16Array]",fe="[object Uint32Array]",Te=/[\\^$.*+?()[\]{}|]/g,Ae=/\w*$/,Se=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,we={};we[m]=we[c]=we[J]=we[H]=we[a]=we[o]=we[U]=we[P]=we[Z]=we[ie]=we[ue]=we[E]=we[y]=we[A]=we[I]=we[_]=we[S]=we[j]=we[le]=we[ne]=we[ye]=we[fe]=!0,we[s]=we[h]=we[K]=!1;var Ce=typeof commonjsGlobal$4=="object"&&commonjsGlobal$4&&commonjsGlobal$4.Object===Object&&commonjsGlobal$4,je=typeof self=="object"&&self&&self.Object===Object&&self,Fe=Ce||je||Function("return this")(),Ve=e&&!e.nodeType&&e,Ge=Ve&&!0&&t&&!t.nodeType&&t,Le=Ge&&Ge.exports===Ve;function Be(Qe,Nt){return Qe.set(Nt[0],Nt[1]),Qe}function $e(Qe,Nt){return Qe.add(Nt),Qe}function he(Qe,Nt){for(var Dt=-1,Ar=Qe?Qe.length:0;++Dt<Ar&&Nt(Qe[Dt],Dt,Qe)!==!1;);return Qe}function p(Qe,Nt){for(var Dt=-1,Ar=Nt.length,Hn=Qe.length;++Dt<Ar;)Qe[Hn+Dt]=Nt[Dt];return Qe}function V(Qe,Nt,Dt,Ar){for(var Hn=-1,Jn=Qe?Qe.length:0;++Hn<Jn;)Dt=Nt(Dt,Qe[Hn],Hn,Qe);return Dt}function R(Qe,Nt){for(var Dt=-1,Ar=Array(Qe);++Dt<Qe;)Ar[Dt]=Nt(Dt);return Ar}function ce(Qe,Nt){return Qe?.[Nt]}function Re(Qe){var Nt=!1;if(Qe!=null&&typeof Qe.toString!="function")try{Nt=!!(Qe+"")}catch{}return Nt}function ke(Qe){var Nt=-1,Dt=Array(Qe.size);return Qe.forEach(function(Ar,Hn){Dt[++Nt]=[Hn,Ar]}),Dt}function qe(Qe,Nt){return function(Dt){return Qe(Nt(Dt))}}function g(Qe){var Nt=-1,Dt=Array(Qe.size);return Qe.forEach(function(Ar){Dt[++Nt]=Ar}),Dt}var ee=Array.prototype,ae=Function.prototype,l=Object.prototype,X=Fe["__core-js_shared__"],oe=function(){var Qe=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return Qe?"Symbol(src)_1."+Qe:""}(),_e=ae.toString,He=l.hasOwnProperty,nt=l.toString,It=RegExp("^"+_e.call(He).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=Le?Fe.Buffer:void 0,ir=Fe.Symbol,_r=Fe.Uint8Array,Rr=qe(Object.getPrototypeOf,Object),Hr=Object.create,Vr=l.propertyIsEnumerable,Tr=ee.splice,$t=Object.getOwnPropertySymbols,qt=wt?wt.isBuffer:void 0,Kt=qe(Object.keys,Object),nr=Lr(Fe,"DataView"),dr=Lr(Fe,"Map"),Er=Lr(Fe,"Promise"),Mr=Lr(Fe,"Set"),jr=Lr(Fe,"WeakMap"),xr=Lr(Object,"create"),kn=ni(nr),gn=ni(dr),bn=ni(Er),Tn=ni(Mr),yn=ni(jr),Xr=ir?ir.prototype:void 0,Rn=Xr?Xr.valueOf:void 0;function yr(Qe){var Nt=-1,Dt=Qe?Qe.length:0;for(this.clear();++Nt<Dt;){var Ar=Qe[Nt];this.set(Ar[0],Ar[1])}}function Wr(){this.__data__=xr?xr(null):{}}function Yr(Qe){return this.has(Qe)&&delete this.__data__[Qe]}function vn(Qe){var Nt=this.__data__;if(xr){var Dt=Nt[Qe];return Dt===u?void 0:Dt}return He.call(Nt,Qe)?Nt[Qe]:void 0}function Ur(Qe){var Nt=this.__data__;return xr?Nt[Qe]!==void 0:He.call(Nt,Qe)}function Zr(Qe,Nt){var Dt=this.__data__;return Dt[Qe]=xr&&Nt===void 0?u:Nt,this}yr.prototype.clear=Wr,yr.prototype.delete=Yr,yr.prototype.get=vn,yr.prototype.has=Ur,yr.prototype.set=Zr;function Fr(Qe){var Nt=-1,Dt=Qe?Qe.length:0;for(this.clear();++Nt<Dt;){var Ar=Qe[Nt];this.set(Ar[0],Ar[1])}}function tt(){this.__data__=[]}function et(Qe){var Nt=this.__data__,Dt=Wn(Nt,Qe);if(Dt<0)return!1;var Ar=Nt.length-1;return Dt==Ar?Nt.pop():Tr.call(Nt,Dt,1),!0}function dt(Qe){var Nt=this.__data__,Dt=Wn(Nt,Qe);return Dt<0?void 0:Nt[Dt][1]}function Bt(Qe){return Wn(this.__data__,Qe)>-1}function Ct(Qe,Nt){var Dt=this.__data__,Ar=Wn(Dt,Qe);return Ar<0?Dt.push([Qe,Nt]):Dt[Ar][1]=Nt,this}Fr.prototype.clear=tt,Fr.prototype.delete=et,Fr.prototype.get=dt,Fr.prototype.has=Bt,Fr.prototype.set=Ct;function pr(Qe){var Nt=-1,Dt=Qe?Qe.length:0;for(this.clear();++Nt<Dt;){var Ar=Qe[Nt];this.set(Ar[0],Ar[1])}}function Sr(){this.__data__={hash:new yr,map:new(dr||Fr),string:new yr}}function un(Qe){return Dn(this,Qe).delete(Qe)}function Ln(Qe){return Dn(this,Qe).get(Qe)}function In(Qe){return Dn(this,Qe).has(Qe)}function Un(Qe,Nt){return Dn(this,Qe).set(Qe,Nt),this}pr.prototype.clear=Sr,pr.prototype.delete=un,pr.prototype.get=Ln,pr.prototype.has=In,pr.prototype.set=Un;function Pr(Qe){this.__data__=new Fr(Qe)}function Ir(){this.__data__=new Fr}function si(Qe){return this.__data__.delete(Qe)}function Dr(Qe){return this.__data__.get(Qe)}function Bn(Qe){return this.__data__.has(Qe)}function ai(Qe,Nt){var Dt=this.__data__;if(Dt instanceof Fr){var Ar=Dt.__data__;if(!dr||Ar.length<r-1)return Ar.push([Qe,Nt]),this;Dt=this.__data__=new pr(Ar)}return Dt.set(Qe,Nt),this}Pr.prototype.clear=Ir,Pr.prototype.delete=si,Pr.prototype.get=Dr,Pr.prototype.has=Bn,Pr.prototype.set=ai;function xn(Qe,Nt){var Dt=vi(Qe)||Xn(Qe)?R(Qe.length,String):[],Ar=Dt.length,Hn=!!Ar;for(var Jn in Qe)He.call(Qe,Jn)&&!(Hn&&(Jn=="length"||ki(Jn,Ar)))&&Dt.push(Jn);return Dt}function mn(Qe,Nt,Dt){var Ar=Qe[Nt];(!(He.call(Qe,Nt)&&Li(Ar,Dt))||Dt===void 0&&!(Nt in Qe))&&(Qe[Nt]=Dt)}function Wn(Qe,Nt){for(var Dt=Qe.length;Dt--;)if(Li(Qe[Dt][0],Nt))return Dt;return-1}function Yn(Qe,Nt){return Qe&&On(Nt,Ci(Nt),Qe)}function Ai(Qe,Nt,Dt,Ar,Hn,Jn,di){var ei;if(Ar&&(ei=Jn?Ar(Qe,Hn,Jn,di):Ar(Qe)),ei!==void 0)return ei;if(!Zn(Qe))return Qe;var n=vi(Qe);if(n){if(ei=zi(Qe),!Nt)return $n(Qe,ei)}else{var b=bi(Qe),T=b==h||b==v;if(Gn(Qe))return er(Qe,Nt);if(b==A||b==m||T&&!Jn){if(Re(Qe))return Jn?Qe:{};if(ei=$i(T?{}:Qe),!Nt)return qn(Qe,Yn(ei,Qe))}else{if(!we[b])return Jn?Qe:{};ei=Ao(Qe,b,Ai,Nt)}}di||(di=new Pr);var Ne=di.get(Qe);if(Ne)return Ne;if(di.set(Qe,ei),!n)var ur=Dt?vr(Qe):Ci(Qe);return he(ur||Qe,function(Pi,Co){ur&&(Co=Pi,Pi=Qe[Co]),mn(ei,Co,Ai(Pi,Nt,Dt,Ar,Co,Qe,di))}),ei}function Ue(Qe){return Zn(Qe)?Hr(Qe):{}}function We(Qe,Nt,Dt){var Ar=Nt(Qe);return vi(Qe)?Ar:p(Ar,Dt(Qe))}function ze(Qe){return nt.call(Qe)}function yt(Qe){if(!Zn(Qe)||yi(Qe))return!1;var Nt=yo(Qe)||Re(Qe)?It:Se;return Nt.test(ni(Qe))}function tr(Qe){if(!Cn(Qe))return Kt(Qe);var Nt=[];for(var Dt in Object(Qe))He.call(Qe,Dt)&&Dt!="constructor"&&Nt.push(Dt);return Nt}function er(Qe,Nt){if(Nt)return Qe.slice();var Dt=new Qe.constructor(Qe.length);return Qe.copy(Dt),Dt}function fr(Qe){var Nt=new Qe.constructor(Qe.byteLength);return new _r(Nt).set(new _r(Qe)),Nt}function sr(Qe,Nt){var Dt=Nt?fr(Qe.buffer):Qe.buffer;return new Qe.constructor(Dt,Qe.byteOffset,Qe.byteLength)}function Qr(Qe,Nt,Dt){var Ar=Nt?Dt(ke(Qe),!0):ke(Qe);return V(Ar,Be,new Qe.constructor)}function Pn(Qe){var Nt=new Qe.constructor(Qe.source,Ae.exec(Qe));return Nt.lastIndex=Qe.lastIndex,Nt}function Qn(Qe,Nt,Dt){var Ar=Nt?Dt(g(Qe),!0):g(Qe);return V(Ar,$e,new Qe.constructor)}function Sn(Qe){return Rn?Object(Rn.call(Qe)):{}}function dn(Qe,Nt){var Dt=Nt?fr(Qe.buffer):Qe.buffer;return new Qe.constructor(Dt,Qe.byteOffset,Qe.length)}function $n(Qe,Nt){var Dt=-1,Ar=Qe.length;for(Nt||(Nt=Array(Ar));++Dt<Ar;)Nt[Dt]=Qe[Dt];return Nt}function On(Qe,Nt,Dt,Ar){Dt||(Dt={});for(var Hn=-1,Jn=Nt.length;++Hn<Jn;){var di=Nt[Hn],ei=void 0;mn(Dt,di,ei===void 0?Qe[di]:ei)}return Dt}function qn(Qe,Nt){return On(Qe,mi(Qe),Nt)}function vr(Qe){return We(Qe,Ci,mi)}function Dn(Qe,Nt){var Dt=Qe.__data__;return ji(Nt)?Dt[typeof Nt=="string"?"string":"hash"]:Dt.map}function Lr(Qe,Nt){var Dt=ce(Qe,Nt);return yt(Dt)?Dt:void 0}var mi=$t?qe($t,Object):li,bi=ze;(nr&&bi(new nr(new ArrayBuffer(1)))!=H||dr&&bi(new dr)!=E||Er&&bi(Er.resolve())!=w||Mr&&bi(new Mr)!=_||jr&&bi(new jr)!=K)&&(bi=function(Qe){var Nt=nt.call(Qe),Dt=Nt==A?Qe.constructor:void 0,Ar=Dt?ni(Dt):void 0;if(Ar)switch(Ar){case kn:return H;case gn:return E;case bn:return w;case Tn:return _;case yn:return K}return Nt});function zi(Qe){var Nt=Qe.length,Dt=Qe.constructor(Nt);return Nt&&typeof Qe[0]=="string"&&He.call(Qe,"index")&&(Dt.index=Qe.index,Dt.input=Qe.input),Dt}function $i(Qe){return typeof Qe.constructor=="function"&&!Cn(Qe)?Ue(Rr(Qe)):{}}function Ao(Qe,Nt,Dt,Ar){var Hn=Qe.constructor;switch(Nt){case J:return fr(Qe);case a:case o:return new Hn(+Qe);case H:return sr(Qe,Ar);case U:case P:case Z:case ie:case ue:case le:case ne:case ye:case fe:return dn(Qe,Ar);case E:return Qr(Qe,Ar,Dt);case y:case S:return new Hn(Qe);case I:return Pn(Qe);case _:return Qn(Qe,Ar,Dt);case j:return Sn(Qe)}}function ki(Qe,Nt){return Nt=Nt??d,!!Nt&&(typeof Qe=="number"||be.test(Qe))&&Qe>-1&&Qe%1==0&&Qe<Nt}function ji(Qe){var Nt=typeof Qe;return Nt=="string"||Nt=="number"||Nt=="symbol"||Nt=="boolean"?Qe!=="__proto__":Qe===null}function yi(Qe){return!!oe&&oe in Qe}function Cn(Qe){var Nt=Qe&&Qe.constructor,Dt=typeof Nt=="function"&&Nt.prototype||l;return Qe===Dt}function ni(Qe){if(Qe!=null){try{return _e.call(Qe)}catch{}try{return Qe+""}catch{}}return""}function Oi(Qe){return Ai(Qe,!0,!0)}function Li(Qe,Nt){return Qe===Nt||Qe!==Qe&&Nt!==Nt}function Xn(Qe){return lo(Qe)&&He.call(Qe,"callee")&&(!Vr.call(Qe,"callee")||nt.call(Qe)==m)}var vi=Array.isArray;function Oo(Qe){return Qe!=null&&wo(Qe.length)&&!yo(Qe)}function lo(Qe){return qi(Qe)&&Oo(Qe)}var Gn=qt||ui;function yo(Qe){var Nt=Zn(Qe)?nt.call(Qe):"";return Nt==h||Nt==v}function wo(Qe){return typeof Qe=="number"&&Qe>-1&&Qe%1==0&&Qe<=d}function Zn(Qe){var Nt=typeof Qe;return!!Qe&&(Nt=="object"||Nt=="function")}function qi(Qe){return!!Qe&&typeof Qe=="object"}function Ci(Qe){return Oo(Qe)?xn(Qe):tr(Qe)}function li(){return[]}function ui(){return!1}t.exports=Oi}(lodash_clonedeep,lodash_clonedeep.exports)),lodash_clonedeep.exports}var freeze={},hasRequiredFreeze;function requireFreeze(){if(hasRequiredFreeze)return freeze;hasRequiredFreeze=1,Object.defineProperty(freeze,"__esModule",{value:!0}),freeze.deepFreeze=void 0;function t(e){return e&&(Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(r){e.hasOwnProperty(r)&&e[r]!==null&&(typeof e[r]=="object"||typeof e[r]=="function")&&e[r].constructor!==Buffer&&!Object.isFrozen(e[r])&&t(e[r])})),e}return freeze.deepFreeze=t,freeze}var sync={},hasRequiredSync;function requireSync(){if(hasRequiredSync)return sync;hasRequiredSync=1;var t=sync&&sync.__read||function(o,s){var h=typeof Symbol=="function"&&o[Symbol.iterator];if(!h)return o;var v=h.call(o),E,y=[],A;try{for(;(s===void 0||s-- >0)&&!(E=v.next()).done;)y.push(E.value)}catch(w){A={error:w}}finally{try{E&&!E.done&&(h=v.return)&&h.call(v)}finally{if(A)throw A.error}}return y},e=sync&&sync.__spread||function(){for(var o=[],s=0;s<arguments.length;s++)o=o.concat(t(arguments[s]));return o},r=sync&&sync.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(sync,"__esModule",{value:!0}),sync.syncMemoizer=void 0;var u=r(requireLruCache()),d=require$$1$3,m=r(requireLodash_clonedeep()),c=requireFreeze();function a(o){var s=new u.default(o),h=o.load,v=o.hash,E=o.bypass,y=o.itemMaxAge,A=o.freeze,w=o.clone,I=new d.EventEmitter,_=Object.assign({del:S,reset:function(){return s.reset()},keys:s.keys.bind(s),on:I.on.bind(I),once:I.once.bind(I)},o);if(o.disable)return Object.assign(h,_);function S(){var U=v.apply(void 0,e(arguments));s.del(U)}function j(U){for(var P=[],Z=1;Z<arguments.length;Z++)P[Z-1]=arguments[Z];I.emit.apply(I,e([U],P))}function K(U){return U&&U.then&&typeof U.then=="function"}function J(U){var P=U;return w&&(K(P)?P=P.then(m.default):P=m.default(P)),A&&(K(P)?P=P.then(c.deepFreeze):c.deepFreeze(P)),P}var H=function(){for(var U=[],P=0;P<arguments.length;P++)U[P]=arguments[P];if(E&&E.apply(void 0,e(U)))return j.apply(void 0,e(["miss"],U)),h.apply(void 0,e(U));var Z=v.apply(void 0,e(U)),ie=s.get(Z);if(ie)return j.apply(void 0,e(["hit"],U)),J(ie);j.apply(void 0,e(["miss"],U));var ue=h.apply(void 0,e(U));return y?s.set(Z,ue,y.apply(void 0,e(U.concat([ue])))):s.set(Z,ue),J(ue)};return Object.assign(H,_)}return sync.syncMemoizer=a,sync}var hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var t=async&&async.__read||function(h,v){var E=typeof Symbol=="function"&&h[Symbol.iterator];if(!E)return h;var y=E.call(h),A,w=[],I;try{for(;(v===void 0||v-- >0)&&!(A=y.next()).done;)w.push(A.value)}catch(_){I={error:_}}finally{try{A&&!A.done&&(E=y.return)&&E.call(y)}finally{if(I)throw I.error}}return w},e=async&&async.__spread||function(){for(var h=[],v=0;v<arguments.length;v++)h=h.concat(t(arguments[v]));return h},r=async&&async.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,E=v&&h[v],y=0;if(E)return E.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&y>=h.length&&(h=void 0),{value:h&&h[y++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},u=async&&async.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(async,"__esModule",{value:!0}),async.asyncMemoizer=void 0;var d=u(requireLruCache()),m=require$$1$3,c=u(requireLodash_clonedeep()),a=requireFreeze(),o=requireSync();function s(h){var v=new d.default(h),E=h.load,y=h.hash,A=h.bypass,w=h.itemMaxAge,I=h.freeze,_=h.clone,S=h.queueMaxAge||1e3,j=new Map,K=new m.EventEmitter,J=Object.assign({del:H,reset:function(){return v.reset()},keys:v.keys.bind(v),on:K.on.bind(K),once:K.once.bind(K)},h);if(h.disable)return Object.assign(E,J);function H(){for(var ue=[],le=0;le<arguments.length;le++)ue[le]=arguments[le];var ne=y.apply(void 0,e(ue));v.del(ne)}function U(ue,le,ne){I&&ne.forEach(a.deepFreeze),w?v.set(ue,ne,w.apply(void 0,e(le.concat(ne)))):v.set(ue,ne)}function P(ue,le){var ne,ye;try{for(var fe=r(ue),Te=fe.next();!Te.done;Te=fe.next()){var Ae=Te.value;_?setImmediate.apply(void 0,e([Ae],le.map(c.default))):setImmediate.apply(void 0,e([Ae],le))}}catch(Se){ne={error:Se}}finally{try{Te&&!Te.done&&(ye=fe.return)&&ye.call(fe)}finally{if(ne)throw ne.error}}}function Z(ue){for(var le=[],ne=1;ne<arguments.length;ne++)le[ne-1]=arguments[ne];K.emit.apply(K,e([ue],le))}function ie(){for(var ue=[],le=0;le<arguments.length;le++)ue[le]=arguments[le];var ne=ue.slice(0,-1),ye=ue.slice(-1).pop(),fe;if(A&&A.apply(void 0,e(ne)))return Z.apply(void 0,e(["miss"],ne)),E.apply(void 0,e(ue));ne.length===0&&!y?fe="_":fe=y.apply(void 0,e(ne));var Te=v.get(fe);if(Te)return Z.apply(void 0,e(["hit"],ne)),P([ye],[null].concat(Te));var Ae=j.get(fe);if(Ae&&Ae.expiresAt>Date.now()){Ae.queue.push(ye),Z.apply(void 0,e(["queue"],ne));return}Z.apply(void 0,e(["miss"],ne));var Se=Date.now(),be=[ye];j.set(fe,{queue:be,expiresAt:Se+S});var we=function(){for(var Ce=[],je=0;je<arguments.length;je++)Ce[je]=arguments[je];var Fe=Ce[0];Fe||U(fe,ne,Ce.slice(1)),j.delete(fe),Z.apply(void 0,e(["loaded",Date.now()-Se],ne)),P(be,Ce)};E.apply(void 0,e(ne,[we]))}return Object.assign(ie,J)}return async.asyncMemoizer=s,s.sync=o.syncMemoizer,async}var lib$2,hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib$2;hasRequiredLib$2=1;var t=requireAsync();return lib$2=t.asyncMemoizer,lib$2}var hasRequiredCache;function requireCache(){if(hasRequiredCache)return cache;hasRequiredCache=1;const t=requireBrowser$2()("jwks"),e=requireLib$2(),{promisify:r,callbackify:u}=require$$1$3;function d(m,{cacheMaxEntries:c=5,cacheMaxAge:a=6e5}){return t(`Configured caching of signing keys. Max: ${c} / Age: ${a}`),r(e({hash:o=>o,load:u(m.getSigningKey.bind(m)),maxAge:a,max:c}))}return cache.default=d,cache}var rateLimit={},limiter={},tokenBucket,hasRequiredTokenBucket;function requireTokenBucket(){if(hasRequiredTokenBucket)return tokenBucket;hasRequiredTokenBucket=1;var t=function(e,r,u,d){if(this.bucketSize=e,this.tokensPerInterval=r,typeof u=="string")switch(u){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=1e3*60;break;case"hr":case"hour":this.interval=1e3*60*60;break;case"day":this.interval=1e3*60*60*24;break;default:throw new Error("Invaid interval "+u)}else this.interval=u;this.parentBucket=d,this.content=0,this.lastDrip=+new Date};return t.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(e,r){var u=this;if(!this.bucketSize)return process.nextTick(r.bind(null,null,e,Number.POSITIVE_INFINITY)),!0;if(e>this.bucketSize)return process.nextTick(r.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null)),!1;if(this.drip(),e>this.content)return d();if(this.parentBucket)return this.parentBucket.removeTokens(e,function(m,c){if(m)return r(m,null);if(e>u.content)return d();u.content-=e,r(null,Math.min(c,u.content))});return this.content-=e,process.nextTick(r.bind(null,null,this.content)),!0;function d(){var m=Math.ceil((e-u.content)*(u.interval/u.tokensPerInterval));return setTimeout(function(){u.removeTokens(e,r)},m),!1}},tryRemoveTokens:function(e){return this.bucketSize?e>this.bucketSize||(this.drip(),e>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)?!1:(this.content-=e,!0):!0},drip:function(){if(!this.tokensPerInterval){this.content=this.bucketSize;return}var e=+new Date,r=Math.max(e-this.lastDrip,0);this.lastDrip=e;var u=r*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+u,this.bucketSize)}},tokenBucket=t,tokenBucket}var clock,hasRequiredClock;function requireClock(){if(hasRequiredClock)return clock;hasRequiredClock=1;var t=function(){if(typeof process<"u"&&process.hrtime){var e=process.hrtime(),r=e[0],u=e[1];return r*1e3+Math.floor(u/1e6)}return new Date().getTime()};return clock=t,clock}var rateLimiter$1,hasRequiredRateLimiter$1;function requireRateLimiter$1(){if(hasRequiredRateLimiter$1)return rateLimiter$1;hasRequiredRateLimiter$1=1;var t=requireTokenBucket(),e=requireClock(),r=function(u,d,m){this.tokenBucket=new t(u,u,d,null),this.tokenBucket.content=u,this.curIntervalStart=e(),this.tokensThisInterval=0,this.fireImmediately=m};return r.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(u,d){if(u>this.tokenBucket.bucketSize)return process.nextTick(d.bind(null,"Requested tokens "+u+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var m=this,c=e();if((c<this.curIntervalStart||c-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=c,this.tokensThisInterval=0),u>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)process.nextTick(d.bind(null,null,-1));else{var a=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-c);setTimeout(function(){m.tokenBucket.removeTokens(u,o)},a)}return!1}return this.tokenBucket.removeTokens(u,o);function o(s,h){if(s)return d(s,null);m.tokensThisInterval+=u,d(null,h)}},tryRemoveTokens:function(u){if(u>this.tokenBucket.bucketSize)return!1;var d=e();if((d<this.curIntervalStart||d-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=d,this.tokensThisInterval=0),u>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var m=this.tokenBucket.tryRemoveTokens(u);return m&&(this.tokensThisInterval+=u),m},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},rateLimiter$1=r,rateLimiter$1}var hasRequiredLimiter;function requireLimiter(){return hasRequiredLimiter||(hasRequiredLimiter=1,limiter.RateLimiter=requireRateLimiter$1(),limiter.TokenBucket=requireTokenBucket()),limiter}var JwksRateLimitError_1,hasRequiredJwksRateLimitError;function requireJwksRateLimitError(){if(hasRequiredJwksRateLimitError)return JwksRateLimitError_1;hasRequiredJwksRateLimitError=1;function t(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="JwksRateLimitError",this.message=e}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,JwksRateLimitError_1=t,JwksRateLimitError_1}var hasRequiredRateLimit;function requireRateLimit(){if(hasRequiredRateLimit)return rateLimit;hasRequiredRateLimit=1;const t=requireBrowser$2()("jwks"),{RateLimiter:e}=requireLimiter(),r=requireJwksRateLimitError();function u(d,{jwksRequestsPerMinute:m=10}){const c=d.getSigningKey.bind(d),a=new e(m,"minute",!0);return t(`Configured rate limiting to JWKS endpoint at ${m}/minute`),async o=>await new Promise((s,h)=>{a.removeTokens(1,async(v,E)=>{if(v&&h(v),t("Requests to the JWKS endpoint available for the next minute:",E),E<0)t("Too many requests to the JWKS endpoint"),h(new r("Too many requests to the JWKS endpoint"));else try{const y=await c(o);s(y)}catch(y){h(y)}})})}return rateLimit.default=u,rateLimit}var interceptor={},hasRequiredInterceptor;function requireInterceptor(){if(hasRequiredInterceptor)return interceptor;hasRequiredInterceptor=1;const t=requireUtils$1().retrieveSigningKeys;function e(r,{getKeysInterceptor:u}){const d=r.getSigningKey.bind(r);return async m=>{const c=await u();let a;if(c&&c.length&&(a=await t(c)),a&&a.length){const o=a.find(s=>!m||s.kid===m);if(o)return o}return d(m)}}return interceptor.default=e,interceptor}var callbackSupport={},hasRequiredCallbackSupport;function requireCallbackSupport(){if(hasRequiredCallbackSupport)return callbackSupport;hasRequiredCallbackSupport=1;const{callbackify:t}=require$$1$3,e=r=>{const u=r.getSigningKey.bind(r);return(d,m)=>m?t(u)(d,m):u(d)};return callbackSupport.default=e,callbackSupport}var wrappers$2,hasRequiredWrappers$2;function requireWrappers$2(){return hasRequiredWrappers$2||(hasRequiredWrappers$2=1,wrappers$2={request:requireRequest().default,cacheSigningKey:requireCache().default,rateLimitSigningKey:requireRateLimit().default,getKeysInterceptor:requireInterceptor().default,callbackSupport:requireCallbackSupport().default}),wrappers$2}var SigningKeyNotFoundError_1,hasRequiredSigningKeyNotFoundError;function requireSigningKeyNotFoundError(){if(hasRequiredSigningKeyNotFoundError)return SigningKeyNotFoundError_1;hasRequiredSigningKeyNotFoundError=1;function t(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="SigningKeyNotFoundError",this.message=e}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,SigningKeyNotFoundError_1=t,SigningKeyNotFoundError_1}var JwksClient_1,hasRequiredJwksClient;function requireJwksClient(){if(hasRequiredJwksClient)return JwksClient_1;hasRequiredJwksClient=1;const t=requireBrowser$2()("jwks"),{retrieveSigningKeys:e}=requireUtils$1(),{request:r,cacheSigningKey:u,rateLimitSigningKey:d,getKeysInterceptor:m,callbackSupport:c}=requireWrappers$2(),a=requireJwksError(),o=requireSigningKeyNotFoundError();class s{constructor(v){this.options={rateLimit:!1,cache:!0,timeout:3e4,...v},this.options.getKeysInterceptor&&(this.getSigningKey=m(this,v)),this.options.rateLimit&&(this.getSigningKey=d(this,v)),this.options.cache&&(this.getSigningKey=u(this,v)),this.getSigningKey=c(this,v)}async getKeys(){t(`Fetching keys from '${this.options.jwksUri}'`);try{const v=await r({uri:this.options.jwksUri,headers:this.options.requestHeaders,agent:this.options.requestAgent,timeout:this.options.timeout,fetcher:this.options.fetcher});return t("Keys:",v.keys),v.keys}catch(v){const{errorMsg:E}=v;throw t("Failure:",E||v),E?new a(E):v}}async getSigningKeys(){const v=await this.getKeys();if(!v||!v.length)throw new a("The JWKS endpoint did not contain any keys");const E=await e(v);if(!E.length)throw new a("The JWKS endpoint did not contain any signing keys");return t("Signing Keys:",E),E}async getSigningKey(v){t(`Fetching signing key for '${v}'`);const E=await this.getSigningKeys(),y=v!=null;if(!y&&E.length>1)throw t("No KID specified and JWKS endpoint returned more than 1 key"),new o("No KID specified and JWKS endpoint returned more than 1 key");const A=E.find(w=>!y||w.kid===v);if(A)return A;throw t(`Unable to find a signing key that matches '${v}'`),new o(`Unable to find a signing key that matches '${v}'`)}}return JwksClient_1={JwksClient:s},JwksClient_1}var ArgumentError_1,hasRequiredArgumentError;function requireArgumentError(){if(hasRequiredArgumentError)return ArgumentError_1;hasRequiredArgumentError=1;function t(e){Error.call(this,e),Error.captureStackTrace(this,this.constructor),this.name="ArgumentError",this.message=e}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,ArgumentError_1=t,ArgumentError_1}var errors,hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,errors={ArgumentError:requireArgumentError(),JwksError:requireJwksError(),JwksRateLimitError:requireJwksRateLimitError(),SigningKeyNotFoundError:requireSigningKeyNotFoundError()}),errors}var hapi={exports:{}},config,hasRequiredConfig;function requireConfig(){return hasRequiredConfig||(hasRequiredConfig=1,config=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES256K","ES384","ES512","EdDSA"]),config}var hasRequiredHapi;function requireHapi(){return hasRequiredHapi||(hasRequiredHapi=1,function(t){const{ArgumentError:e}=requireErrors(),{JwksClient:r}=requireJwksClient(),u=requireConfig(),d=(m,c)=>{if(m&&m.name==="SigningKeyNotFoundError"||m)return c(m,null,null)};t.exports.hapiJwt2KeyAsync=m=>{const c=t.exports.hapiJwt2Key(m);return function(a){return new Promise((o,s)=>{c(a,(v,E)=>{!E||v?s(v):o({key:E})})})}},t.exports.hapiJwt2Key=function(m){if(m==null)throw new e("An options object must be provided when initializing hapiJwt2Key");const c=new r(m),a=m.handleSigningKeyError||d;return function(s,h){if(!s||!s.header)return h(new Error("Cannot find a signing certificate if there is no header"),null,null);if(!u.includes(s.header.alg))return h(new Error("Unsupported algorithm "+s.header.alg+" supplied."),null,null);c.getSigningKey(s.header.kid).then(v=>h(null,v.publicKey||v.rsaPublicKey,v)).catch(v=>a(v,E=>h(E,null,null)))}}}(hapi)),hapi.exports}var express={},hasRequiredExpress;function requireExpress(){if(hasRequiredExpress)return express;hasRequiredExpress=1;const{ArgumentError:t}=requireErrors(),{JwksClient:e}=requireJwksClient(),r=requireConfig(),u=(d,m)=>{if(d&&d.name==="SigningKeyNotFoundError")return m(null);if(d)return m(d)};return express.expressJwtSecret=function(d){if(d==null)throw new t("An options object must be provided when initializing expressJwtSecret");const m=new e(d),c=d.handleSigningKeyError||u,a=async(o,s)=>{if(!s)return;const h=s.header;if(!(!h||!r.includes(h.alg)))try{const v=await m.getSigningKey(h.kid);return v.publicKey||v.rsaPublicKey}catch(v){return new Promise((E,y)=>{c(v,A=>{if(!A)return E();y(A)})})}};return function(s,h,v,E){if(arguments.length===4){a(s,{header:h}).then(y=>{setImmediate(E,null,y)}).catch(y=>{setImmediate(E,y)});return}return a(s,arguments[1])}},express}var koa={},hasRequiredKoa;function requireKoa(){if(hasRequiredKoa)return koa;hasRequiredKoa=1;const{ArgumentError:t}=requireErrors(),{JwksClient:e}=requireJwksClient(),r=requireConfig();return koa.koaJwtSecret=function(u={}){if(!u.jwksUri)throw new t("No JWKS provided. Please provide a jwksUri");const d=new e(u);return function({alg:c,kid:a}={}){return new Promise((o,s)=>{if(!r.includes(c))return s(new Error("Missing / invalid token algorithm"));d.getSigningKey(a).then(h=>{o(h.publicKey||h.rsaPublicKey)}).catch(h=>u.handleSigningKeyError?u.handleSigningKeyError(h).then(s):s(h))})}},koa}var passport={},hasRequiredPassport;function requirePassport(){if(hasRequiredPassport)return passport;hasRequiredPassport=1;const t=require$$0$3,{ArgumentError:e}=requireErrors(),{JwksClient:r}=requireJwksClient(),u=requireConfig(),d=(m,c)=>{if(m&&m.name==="SigningKeyNotFoundError")return c(null);if(m)return c(m)};return passport.passportJwtSecret=function(m){if(m==null)throw new e("An options object must be provided when initializing passportJwtSecret");if(!m.jwksUri)throw new e("No JWKS provided. Please provide a jwksUri");const c=new r(m),a=m.handleSigningKeyError||d;return function(s,h,v){let E;try{E={payload:t.decodeJwt(h),header:t.decodeProtectedHeader(h)}}catch{E=null}if(!E||!u.includes(E.header.alg))return v(null,null);c.getSigningKey(E.header.kid).then(y=>{v(null,y.publicKey||y.rsaPublicKey)}).catch(y=>{a(y,A=>v(A,null))})}},passport}var hasRequiredSrc$a;function requireSrc$a(){if(hasRequiredSrc$a)return src$a.exports;hasRequiredSrc$a=1;const{JwksClient:t}=requireJwksClient(),e=requireErrors(),{hapiJwt2Key:r,hapiJwt2KeyAsync:u}=requireHapi(),{expressJwtSecret:d}=requireExpress(),{koaJwtSecret:m}=requireKoa(),{passportJwtSecret:c}=requirePassport();return src$a.exports=a=>new t(a),src$a.exports.JwksClient=t,src$a.exports.ArgumentError=e.ArgumentError,src$a.exports.JwksError=e.JwksError,src$a.exports.JwksRateLimitError=e.JwksRateLimitError,src$a.exports.SigningKeyNotFoundError=e.SigningKeyNotFoundError,src$a.exports.expressJwtSecret=d,src$a.exports.hapiJwt2Key=r,src$a.exports.hapiJwt2KeyAsync=u,src$a.exports.koaJwtSecret=m,src$a.exports.passportJwtSecret=c,src$a.exports}/*! firebase-admin v13.4.0 */var hasRequiredJwt;function requireJwt(){return hasRequiredJwt||(hasRequiredJwt=1,function(t){/*!
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.JwtErrorCode=t.JwtError=t.EmulatorSignatureVerifier=t.PublicKeySignatureVerifier=t.UrlKeyFetcher=t.JwksFetcher=t.ALGORITHM_RS256=void 0,t.verifyJwtSignature=A,t.decodeJwt=w;const e=requireValidator$1(),r=requireJsonwebtoken(),u=requireSrc$a(),d=requireApiRequest();t.ALGORITHM_RS256="RS256";const m="error in secret or public key callback: ",c="no-matching-kid-error",a="no-kid-in-header-error",o=3600;class s{constructor(j,K){if(this.publicKeysExpireAt=0,!e.isURL(j))throw new Error("The provided JWKS URL is not a valid URL.");this.client=u({jwksUri:j,cache:!1,requestAgent:K})}fetchPublicKeys(){return this.shouldRefresh()?this.refresh():Promise.resolve(this.publicKeys)}shouldRefresh(){return!this.publicKeys||this.publicKeysExpireAt<=Date.now()}refresh(){return this.client.getSigningKeys().then(j=>{this.publicKeysExpireAt=0;const K=j.reduce((J,H)=>(J[H.kid]=H.getPublicKey(),J),{});return this.publicKeysExpireAt=Date.now()+o*6*1e3,this.publicKeys=K,K}).catch(j=>{throw new Error(`Error fetching Json Web Keys: ${j.message}`)})}}t.JwksFetcher=s;class h{constructor(j,K){if(this.clientCertUrl=j,this.httpAgent=K,this.publicKeysExpireAt=0,!e.isURL(j))throw new Error("The provided public client certificate URL is not a valid URL.")}fetchPublicKeys(){return this.shouldRefresh()?this.refresh():Promise.resolve(this.publicKeys)}shouldRefresh(){return!this.publicKeys||this.publicKeysExpireAt<=Date.now()}refresh(){const j=new d.HttpClient,K={method:"GET",url:this.clientCertUrl,httpAgent:this.httpAgent};return j.send(K).then(J=>{if(!J.isJson()||J.data.error)throw new d.RequestResponseError(J);return this.publicKeysExpireAt=0,Object.prototype.hasOwnProperty.call(J.headers,"cache-control")&&J.headers["cache-control"].split(",").forEach(P=>{const Z=P.trim().split("=");if(Z[0]==="max-age"){const ie=+Z[1];this.publicKeysExpireAt=Date.now()+ie*1e3}}),this.publicKeys=J.data,J.data}).catch(J=>{if(J instanceof d.RequestResponseError){let H="Error fetching public keys for Google certs: ";const U=J.response;throw U.isJson()&&U.data.error?(H+=`${U.data.error}`,U.data.error_description&&(H+=" ("+U.data.error_description+")")):H+=`${U.text}`,new Error(H)}throw J})}}t.UrlKeyFetcher=h;class v{constructor(j){if(this.keyFetcher=j,!e.isNonNullObject(j))throw new Error("The provided key fetcher is not an object or null.")}static withCertificateUrl(j,K){return new v(new h(j,K))}static withJwksUrl(j,K){return new v(new s(j,K))}verify(j){return e.isString(j)?A(j,y(this.keyFetcher),{algorithms:[t.ALGORITHM_RS256]}).catch(K=>{if(K.code===_.NO_KID_IN_HEADER)return this.verifyWithoutKid(j);throw K}):Promise.reject(new I(_.INVALID_ARGUMENT,"The provided token must be a string."))}verifyWithoutKid(j){return this.keyFetcher.fetchPublicKeys().then(K=>this.verifyWithAllKeys(j,K))}verifyWithAllKeys(j,K){const J=[];return Object.values(K).forEach(H=>{const U=A(j,H).then(()=>!0).catch(P=>{if(P.code===_.TOKEN_EXPIRED)throw P;return!1});J.push(U)}),Promise.all(J).then(H=>{if(H.every(U=>U===!1))throw new I(_.INVALID_SIGNATURE,"Invalid token signature.")})}}t.PublicKeySignatureVerifier=v;class E{verify(j){return A(j,void 0,{algorithms:["none"]})}}t.EmulatorSignatureVerifier=E;function y(S){return(j,K)=>{j.kid||K(new Error(a));const J=j.kid||"";S.fetchPublicKeys().then(H=>{Object.prototype.hasOwnProperty.call(H,J)?K(null,H[J]):K(new Error(c))}).catch(H=>{K(H)})}}function A(S,j,K){return e.isString(S)?new Promise((J,H)=>{r.verify(S,j,K,U=>{if(!U)return J();if(U.name==="TokenExpiredError")return H(new I(_.TOKEN_EXPIRED,"The provided token has expired. Get a fresh token from your client app and try again."));if(U.name==="JsonWebTokenError"&&U.message&&U.message.includes(m)){const P=U.message.split(m).pop()||"Error fetching public keys.";let Z=_.KEY_FETCH_ERROR;return P===c?Z=_.NO_MATCHING_KID:P===a&&(Z=_.NO_KID_IN_HEADER),H(new I(Z,P))}return H(new I(_.INVALID_SIGNATURE,U.message))})}):Promise.reject(new I(_.INVALID_ARGUMENT,"The provided token must be a string."))}function w(S){if(!e.isString(S))return Promise.reject(new I(_.INVALID_ARGUMENT,"The provided token must be a string."));const j=r.decode(S,{complete:!0});if(!j)return Promise.reject(new I(_.INVALID_ARGUMENT,"Decoding token failed."));const K=j?.header,J=j?.payload;return Promise.resolve({header:K,payload:J})}class I extends Error{constructor(j,K){super(K),this.code=j,this.message=K,this.__proto__=I.prototype}}t.JwtError=I;var _;(function(S){S.INVALID_ARGUMENT="invalid-argument",S.INVALID_CREDENTIAL="invalid-credential",S.TOKEN_EXPIRED="token-expired",S.INVALID_SIGNATURE="invalid-token",S.NO_MATCHING_KID="no-matching-kid-error",S.NO_KID_IN_HEADER="no-kid-error",S.KEY_FETCH_ERROR="key-fetch-error"})(_||(t.JwtErrorCode=_={}))}(jwt)),jwt}/*! firebase-admin v13.4.0 */var hasRequiredTokenVerifier$1;function requireTokenVerifier$1(){return hasRequiredTokenVerifier$1||(hasRequiredTokenVerifier$1=1,function(t){/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseTokenVerifier=t.SESSION_COOKIE_INFO=t.AUTH_BLOCKING_TOKEN_INFO=t.ID_TOKEN_INFO=void 0,t.createIdTokenVerifier=h,t.createAuthBlockingTokenVerifier=v,t.createSessionCookieVerifier=E;const e=requireError(),r=requireUtils$2(),u=requireValidator$1(),d=requireJwt(),m="https://identitytoolkit.googleapis.com/google.identity.identitytoolkit.v1.IdentityToolkit",c="https://www.googleapis.com/robot/v1/metadata/x509/securetoken@system.gserviceaccount.com",a="https://www.googleapis.com/identitytoolkit/v3/relyingparty/publicKeys",o=new d.EmulatorSignatureVerifier;t.ID_TOKEN_INFO={url:"https://firebase.google.com/docs/auth/admin/verify-id-tokens",verifyApiName:"verifyIdToken()",jwtName:"Firebase ID token",shortName:"ID token",expiredErrorCode:e.AuthClientErrorCode.ID_TOKEN_EXPIRED},t.AUTH_BLOCKING_TOKEN_INFO={url:"https://cloud.google.com/identity-platform/docs/blocking-functions",verifyApiName:"_verifyAuthBlockingToken()",jwtName:"Firebase Auth Blocking token",shortName:"Auth Blocking token",expiredErrorCode:e.AuthClientErrorCode.AUTH_BLOCKING_TOKEN_EXPIRED},t.SESSION_COOKIE_INFO={url:"https://firebase.google.com/docs/auth/admin/manage-cookies",verifyApiName:"verifySessionCookie()",jwtName:"Firebase session cookie",shortName:"session cookie",expiredErrorCode:e.AuthClientErrorCode.SESSION_COOKIE_EXPIRED};class s{constructor(A,w,I,_){if(this.issuer=w,this.tokenInfo=I,this.app=_,u.isURL(A))if(u.isURL(w))if(u.isNonNullObject(I))if(u.isURL(I.url))if(u.isNonEmptyString(I.verifyApiName))if(u.isNonEmptyString(I.jwtName))if(u.isNonEmptyString(I.shortName)){if(!u.isNonNullObject(I.expiredErrorCode)||!("code"in I.expiredErrorCode))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT expiration error code must be a non-null ErrorInfo object.")}else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT public short name must be a non-empty string.");else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT public full name must be a non-empty string.");else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The JWT verify API name must be a non-empty string.");else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT verification documentation URL is invalid.");else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT information is not an object or null.");else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The provided JWT issuer is an invalid URL.");else throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,"The provided public client certificate URL is an invalid URL.");this.shortNameArticle=I.shortName.charAt(0).match(/[aeiou]/i)?"an":"a",this.signatureVerifier=d.PublicKeySignatureVerifier.withCertificateUrl(A,_.options.httpAgent)}verifyJWT(A,w=!1){if(!u.isString(A))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,`First argument to ${this.tokenInfo.verifyApiName} must be a ${this.tokenInfo.jwtName} string.`);return this.ensureProjectId().then(I=>this.decodeAndVerify(A,I,w)).then(I=>{const _=I.payload;return _.uid=_.sub,_})}_verifyAuthBlockingToken(A,w,I){if(!u.isString(A))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,`First argument to ${this.tokenInfo.verifyApiName} must be a ${this.tokenInfo.jwtName} string.`);return this.ensureProjectId().then(_=>(typeof I>"u"&&(I=`${_}.cloudfunctions.net/`),this.decodeAndVerify(A,_,w,I))).then(_=>{const S=_.payload;return S.uid=S.sub,S})}ensureProjectId(){return r.findProjectId(this.app).then(A=>{if(!u.isNonEmptyString(A))throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_CREDENTIAL,`Must initialize app with a cert credential or set your Firebase project ID as the GOOGLE_CLOUD_PROJECT environment variable to call ${this.tokenInfo.verifyApiName}.`);return Promise.resolve(A)})}decodeAndVerify(A,w,I,_){return this.safeDecode(A).then(S=>(this.verifyContent(S,w,I,_),this.verifySignature(A,I).then(()=>S)))}safeDecode(A){return(0,d.decodeJwt)(A).catch(w=>{if(w.code===d.JwtErrorCode.INVALID_ARGUMENT){const I=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`,_=`Decoding ${this.tokenInfo.jwtName} failed. Make sure you passed the entire string JWT which represents ${this.shortNameArticle} ${this.tokenInfo.shortName}.`+I;throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,_)}throw new e.FirebaseAuthError(e.AuthClientErrorCode.INTERNAL_ERROR,w.message)})}verifyContent(A,w,I,_){const S=A&&A.header,j=A&&A.payload,K=` Make sure the ${this.tokenInfo.shortName} comes from the same Firebase project as the service account used to authenticate this SDK.`,J=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`;let H;if(!I&&typeof S.kid>"u"){const U=j.aud===m,P=S.alg==="HS256"&&j.v===0&&"d"in j&&"uid"in j.d;U?H=`${this.tokenInfo.verifyApiName} expects ${this.shortNameArticle} ${this.tokenInfo.shortName}, but was given a custom token.`:P?H=`${this.tokenInfo.verifyApiName} expects ${this.shortNameArticle} ${this.tokenInfo.shortName}, but was given a legacy custom token.`:H=`${this.tokenInfo.jwtName} has no "kid" claim.`,H+=J}else!I&&S.alg!==d.ALGORITHM_RS256?H=`${this.tokenInfo.jwtName} has incorrect algorithm. Expected "`+d.ALGORITHM_RS256+'" but got "'+S.alg+'".'+J:typeof _<"u"&&!j.aud.includes(_)?H=`${this.tokenInfo.jwtName} has incorrect "aud" (audience) claim. Expected "`+_+'" but got "'+j.aud+'".'+J:typeof _>"u"&&j.aud!==w?H=`${this.tokenInfo.jwtName} has incorrect "aud" (audience) claim. Expected "`+w+'" but got "'+j.aud+'".'+K+J:j.iss!==this.issuer+w?H=`${this.tokenInfo.jwtName} has incorrect "iss" (issuer) claim. Expected "${this.issuer}`+w+'" but got "'+j.iss+'".'+K+J:j.event_type!==void 0&&(j.event_type==="beforeSendSms"||j.event_type==="beforeSendEmail")||(typeof j.sub!="string"?H=`${this.tokenInfo.jwtName} has no "sub" (subject) claim.`+J:j.sub===""?H=`${this.tokenInfo.jwtName} has an empty "sub" (subject) claim.`+J:j.sub.length>128&&(H=`${this.tokenInfo.jwtName} has a "sub" (subject) claim longer than 128 characters.`+J));if(H)throw new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,H)}verifySignature(A,w){return(w?o:this.signatureVerifier).verify(A).catch(_=>{throw this.mapJwtErrorToAuthError(_)})}mapJwtErrorToAuthError(A){const w=` See ${this.tokenInfo.url} for details on how to retrieve ${this.shortNameArticle} ${this.tokenInfo.shortName}.`;if(A.code===d.JwtErrorCode.TOKEN_EXPIRED){const I=`${this.tokenInfo.jwtName} has expired. Get a fresh ${this.tokenInfo.shortName} from your client app and try again (auth/${this.tokenInfo.expiredErrorCode.code}).`+w;return new e.FirebaseAuthError(this.tokenInfo.expiredErrorCode,I)}else if(A.code===d.JwtErrorCode.INVALID_SIGNATURE){const I=`${this.tokenInfo.jwtName} has invalid signature.`+w;return new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,I)}else if(A.code===d.JwtErrorCode.NO_MATCHING_KID){const I=`${this.tokenInfo.jwtName} has "kid" claim which does not correspond to a known public key. Most likely the ${this.tokenInfo.shortName} is expired, so get a fresh token from your client app and try again.`;return new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,I)}return new e.FirebaseAuthError(e.AuthClientErrorCode.INVALID_ARGUMENT,A.message)}}t.FirebaseTokenVerifier=s;function h(y){return new s(c,"https://securetoken.google.com/",t.ID_TOKEN_INFO,y)}function v(y){return new s(c,"https://securetoken.google.com/",t.AUTH_BLOCKING_TOKEN_INFO,y)}function E(y){return new s(a,"https://session.firebase.google.com/",t.SESSION_COOKIE_INFO,y)}}(tokenVerifier$1)),tokenVerifier$1}var userRecord={};/*! firebase-admin v13.4.0 */var hasRequiredUserRecord;function requireUserRecord(){if(hasRequiredUserRecord)return userRecord;hasRequiredUserRecord=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(userRecord,"__esModule",{value:!0}),userRecord.UserRecord=userRecord.UserInfo=userRecord.UserMetadata=userRecord.MultiFactorSettings=userRecord.TotpMultiFactorInfo=userRecord.TotpInfo=userRecord.PhoneMultiFactorInfo=userRecord.MultiFactorInfo=void 0;const t=requireDeepCopy(),e=requireValidator$1(),r=requireUtils$2(),u=requireError(),d=Buffer.from("REDACTED").toString("base64");function m(w){try{const I=new Date(parseInt(w,10));if(!isNaN(I.getTime()))return I.toUTCString()}catch{}return null}var c;(function(w){w.Phone="phone",w.Totp="totp"})(c||(c={}));class a{static initMultiFactorInfo(I){let _=null;try{I.phoneInfo!==void 0?_=new o(I):I.totpInfo!==void 0&&(_=new h(I))}catch{}return _}constructor(I){this.initFromServerResponse(I)}toJSON(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}}initFromServerResponse(I){const _=I&&this.getFactorId(I);if(!_||!I||!I.mfaEnrollmentId)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor info response");r.addReadonlyGetter(this,"uid",I.mfaEnrollmentId),r.addReadonlyGetter(this,"factorId",_),r.addReadonlyGetter(this,"displayName",I.displayName),I.enrolledAt?r.addReadonlyGetter(this,"enrollmentTime",new Date(I.enrolledAt).toUTCString()):r.addReadonlyGetter(this,"enrollmentTime",null)}}userRecord.MultiFactorInfo=a;class o extends a{constructor(I){super(I),r.addReadonlyGetter(this,"phoneNumber",I.phoneInfo)}toJSON(){return Object.assign(super.toJSON(),{phoneNumber:this.phoneNumber})}getFactorId(I){return I&&I.phoneInfo?c.Phone:null}}userRecord.PhoneMultiFactorInfo=o;class s{}userRecord.TotpInfo=s;class h extends a{constructor(I){super(I),r.addReadonlyGetter(this,"totpInfo",I.totpInfo)}toJSON(){return Object.assign(super.toJSON(),{totpInfo:this.totpInfo})}getFactorId(I){return I&&I.totpInfo?c.Totp:null}}userRecord.TotpMultiFactorInfo=h;class v{constructor(I){const _=[];if((0,e.isNonNullObject)(I))I.mfaInfo&&I.mfaInfo.forEach(S=>{const j=a.initMultiFactorInfo(S);j&&_.push(j)});else throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid multi-factor response");r.addReadonlyGetter(this,"enrolledFactors",Object.freeze(_))}toJSON(){return{enrolledFactors:this.enrolledFactors.map(I=>I.toJSON())}}}userRecord.MultiFactorSettings=v;class E{constructor(I){r.addReadonlyGetter(this,"creationTime",m(I.createdAt)),r.addReadonlyGetter(this,"lastSignInTime",m(I.lastLoginAt));const _=I.lastRefreshAt?new Date(I.lastRefreshAt).toUTCString():null;r.addReadonlyGetter(this,"lastRefreshTime",_)}toJSON(){return{lastSignInTime:this.lastSignInTime,creationTime:this.creationTime,lastRefreshTime:this.lastRefreshTime}}}userRecord.UserMetadata=E;class y{constructor(I){if(!I.rawId||!I.providerId)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user info response");r.addReadonlyGetter(this,"uid",I.rawId),r.addReadonlyGetter(this,"displayName",I.displayName),r.addReadonlyGetter(this,"email",I.email),r.addReadonlyGetter(this,"photoURL",I.photoUrl),r.addReadonlyGetter(this,"providerId",I.providerId),r.addReadonlyGetter(this,"phoneNumber",I.phoneNumber)}toJSON(){return{uid:this.uid,displayName:this.displayName,email:this.email,photoURL:this.photoURL,providerId:this.providerId,phoneNumber:this.phoneNumber}}}userRecord.UserInfo=y;class A{constructor(I){if(!I.localId)throw new u.FirebaseAuthError(u.AuthClientErrorCode.INTERNAL_ERROR,"INTERNAL ASSERT FAILED: Invalid user response");r.addReadonlyGetter(this,"uid",I.localId),r.addReadonlyGetter(this,"email",I.email),r.addReadonlyGetter(this,"emailVerified",!!I.emailVerified),r.addReadonlyGetter(this,"displayName",I.displayName),r.addReadonlyGetter(this,"photoURL",I.photoUrl),r.addReadonlyGetter(this,"phoneNumber",I.phoneNumber),r.addReadonlyGetter(this,"disabled",I.disabled||!1),r.addReadonlyGetter(this,"metadata",new E(I));const _=[];for(const K of I.providerUserInfo||[])_.push(new y(K));r.addReadonlyGetter(this,"providerData",_),I.passwordHash===d?r.addReadonlyGetter(this,"passwordHash",void 0):r.addReadonlyGetter(this,"passwordHash",I.passwordHash),r.addReadonlyGetter(this,"passwordSalt",I.salt),I.customAttributes&&r.addReadonlyGetter(this,"customClaims",JSON.parse(I.customAttributes));let S=null;typeof I.validSince<"u"&&(S=m(parseInt(I.validSince,10)*1e3)),r.addReadonlyGetter(this,"tokensValidAfterTime",S||void 0),r.addReadonlyGetter(this,"tenantId",I.tenantId);const j=new v(I);j.enrolledFactors.length>0&&r.addReadonlyGetter(this,"multiFactor",j)}toJSON(){const I={uid:this.uid,email:this.email,emailVerified:this.emailVerified,displayName:this.displayName,photoURL:this.photoURL,phoneNumber:this.phoneNumber,disabled:this.disabled,metadata:this.metadata.toJSON(),passwordHash:this.passwordHash,passwordSalt:this.passwordSalt,customClaims:(0,t.deepCopy)(this.customClaims),tokensValidAfterTime:this.tokensValidAfterTime,tenantId:this.tenantId};this.multiFactor&&(I.multiFactor=this.multiFactor.toJSON()),I.providerData=[];for(const _ of this.providerData)I.providerData.push(_.toJSON());return I}}return userRecord.UserRecord=A,userRecord}/*! firebase-admin v13.4.0 */var hasRequiredBaseAuth;function requireBaseAuth(){if(hasRequiredBaseAuth)return baseAuth;hasRequiredBaseAuth=1;/*!
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(baseAuth,"__esModule",{value:!0}),baseAuth.BaseAuth=void 0,baseAuth.createFirebaseTokenGenerator=h;const t=requireError(),e=requireDeepCopy(),r=requireValidator$1(),u=requireAuthApiRequest(),d=requireTokenGenerator$1(),m=requireTokenVerifier$1(),c=requireAuthConfig(),a=requireUserRecord(),o=requireIdentifier(),s=requireCryptoSigner();function h(E,y){try{const A=(0,u.useEmulator)()?new d.EmulatedSigner:(0,s.cryptoSignerFromApp)(E);return new d.FirebaseTokenGenerator(A,y)}catch(A){throw(0,d.handleCryptoSignerError)(A)}}class v{constructor(y,A,w){this.authRequestHandler=A,w?this.tokenGenerator=w:this.tokenGenerator=h(y),this.sessionCookieVerifier=(0,m.createSessionCookieVerifier)(y),this.idTokenVerifier=(0,m.createIdTokenVerifier)(y),this.authBlockingTokenVerifier=(0,m.createAuthBlockingTokenVerifier)(y)}createCustomToken(y,A){return this.tokenGenerator.createCustomToken(y,A)}verifyIdToken(y,A=!1){const w=(0,u.useEmulator)();return this.idTokenVerifier.verifyJWT(y,w).then(I=>A||w?this.verifyDecodedJWTNotRevokedOrDisabled(I,t.AuthClientErrorCode.ID_TOKEN_REVOKED):I)}getUser(y){return this.authRequestHandler.getAccountInfoByUid(y).then(A=>new a.UserRecord(A.users[0]))}getUserByEmail(y){return this.authRequestHandler.getAccountInfoByEmail(y).then(A=>new a.UserRecord(A.users[0]))}getUserByPhoneNumber(y){return this.authRequestHandler.getAccountInfoByPhoneNumber(y).then(A=>new a.UserRecord(A.users[0]))}getUserByProviderUid(y,A){return y==="phone"?this.getUserByPhoneNumber(A):y==="email"?this.getUserByEmail(A):this.authRequestHandler.getAccountInfoByFederatedUid(y,A).then(w=>new a.UserRecord(w.users[0]))}getUsers(y){if(!r.isArray(y))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"`identifiers` parameter must be an array");return this.authRequestHandler.getAccountInfoByIdentifiers(y).then(A=>{const w=(S,j)=>!!j.find(K=>{if((0,o.isUidIdentifier)(S))return S.uid===K.uid;if((0,o.isEmailIdentifier)(S))return S.email===K.email;if((0,o.isPhoneIdentifier)(S))return S.phoneNumber===K.phoneNumber;if((0,o.isProviderIdentifier)(S)){const J=K.providerData.find(H=>S.providerId===H.providerId);return!!J&&S.providerUid===J.uid}else throw new t.FirebaseAuthError(t.AuthClientErrorCode.INTERNAL_ERROR,"Unhandled identifier type")}),I=A.users?A.users.map(S=>new a.UserRecord(S)):[],_=y.filter(S=>!w(S,I));return{users:I,notFound:_}})}listUsers(y,A){return this.authRequestHandler.downloadAccount(y,A).then(w=>{const I=[];w.users.forEach(S=>{I.push(new a.UserRecord(S))});const _={users:I,pageToken:w.nextPageToken};return typeof _.pageToken>"u"&&delete _.pageToken,_})}createUser(y){return this.authRequestHandler.createNewAccount(y).then(A=>this.getUser(A)).catch(A=>{throw A.code==="auth/user-not-found"?new t.FirebaseAuthError(t.AuthClientErrorCode.INTERNAL_ERROR,"Unable to create the user record provided."):A})}deleteUser(y){return this.authRequestHandler.deleteAccount(y).then(()=>{})}deleteUsers(y){if(!r.isArray(y))throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"`uids` parameter must be an array");return this.authRequestHandler.deleteAccounts(y,!0).then(A=>{const w={failureCount:0,successCount:y.length,errors:[]};return r.isNonEmptyArray(A.errors)&&(w.failureCount=A.errors.length,w.successCount=y.length-A.errors.length,w.errors=A.errors.map(I=>{if(I.index===void 0)throw new t.FirebaseAuthError(t.AuthClientErrorCode.INTERNAL_ERROR,"Corrupt BatchDeleteAccountsResponse detected");const _=S=>{const j=S&&S.startsWith("NOT_DISABLED")?t.AuthClientErrorCode.USER_NOT_DISABLED:t.AuthClientErrorCode.INTERNAL_ERROR;return new t.FirebaseAuthError(j,I.message)};return{index:I.index,error:_(I.message)}})),w})}updateUser(y,A){if(A=(0,e.deepCopy)(A),A?.providerToLink){if(A.providerToLink.providerId==="email"){if(typeof A.email<"u")throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.email and UpdateRequest.providerToLink.providerId='email' were set. To link to the email/password provider, only specify the UpdateRequest.email field.");A.email=A.providerToLink.uid,delete A.providerToLink}else if(A.providerToLink.providerId==="phone"){if(typeof A.phoneNumber<"u")throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.phoneNumber and UpdateRequest.providerToLink.providerId='phone' were set. To link to a phone provider, only specify the UpdateRequest.phoneNumber field.");A.phoneNumber=A.providerToLink.uid,delete A.providerToLink}}if(A?.providersToUnlink&&A.providersToUnlink.indexOf("phone")!==-1&&A.phoneNumber===null)throw new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,"Both UpdateRequest.phoneNumber=null and UpdateRequest.providersToUnlink=['phone'] were set. To unlink from a phone provider, only specify the UpdateRequest.phoneNumber=null field.");return this.authRequestHandler.updateExistingAccount(y,A).then(w=>this.getUser(w))}setCustomUserClaims(y,A){return this.authRequestHandler.setCustomUserClaims(y,A).then(()=>{})}revokeRefreshTokens(y){return this.authRequestHandler.revokeRefreshTokens(y).then(()=>{})}importUsers(y,A){return this.authRequestHandler.uploadAccount(y,A)}createSessionCookie(y,A){return!r.isNonNullObject(A)||!r.isNumber(A.expiresIn)?Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)):this.authRequestHandler.createSessionCookie(y,A.expiresIn)}verifySessionCookie(y,A=!1){const w=(0,u.useEmulator)();return this.sessionCookieVerifier.verifyJWT(y,w).then(I=>A||w?this.verifyDecodedJWTNotRevokedOrDisabled(I,t.AuthClientErrorCode.SESSION_COOKIE_REVOKED):I)}generatePasswordResetLink(y,A){return this.authRequestHandler.getEmailActionLink("PASSWORD_RESET",y,A)}generateEmailVerificationLink(y,A){return this.authRequestHandler.getEmailActionLink("VERIFY_EMAIL",y,A)}generateVerifyAndChangeEmailLink(y,A,w){return this.authRequestHandler.getEmailActionLink("VERIFY_AND_CHANGE_EMAIL",y,w,A)}generateSignInWithEmailLink(y,A){return this.authRequestHandler.getEmailActionLink("EMAIL_SIGNIN",y,A)}listProviderConfigs(y){const A=(w,I)=>{const _={providerConfigs:I};return Object.prototype.hasOwnProperty.call(w,"nextPageToken")&&(_.pageToken=w.nextPageToken),_};return y&&y.type==="oidc"?this.authRequestHandler.listOAuthIdpConfigs(y.maxResults,y.pageToken).then(w=>{const I=[];return w.oauthIdpConfigs.forEach(_=>{I.push(new c.OIDCConfig(_))}),A(w,I)}):y&&y.type==="saml"?this.authRequestHandler.listInboundSamlConfigs(y.maxResults,y.pageToken).then(w=>{const I=[];return w.inboundSamlConfigs.forEach(_=>{I.push(new c.SAMLConfig(_))}),A(w,I)}):Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_ARGUMENT,'"AuthProviderConfigFilter.type" must be either "saml" or "oidc"'))}getProviderConfig(y){return c.OIDCConfig.isProviderId(y)?this.authRequestHandler.getOAuthIdpConfig(y).then(A=>new c.OIDCConfig(A)):c.SAMLConfig.isProviderId(y)?this.authRequestHandler.getInboundSamlConfig(y).then(A=>new c.SAMLConfig(A)):Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_PROVIDER_ID))}deleteProviderConfig(y){return c.OIDCConfig.isProviderId(y)?this.authRequestHandler.deleteOAuthIdpConfig(y):c.SAMLConfig.isProviderId(y)?this.authRequestHandler.deleteInboundSamlConfig(y):Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_PROVIDER_ID))}updateProviderConfig(y,A){return r.isNonNullObject(A)?c.OIDCConfig.isProviderId(y)?this.authRequestHandler.updateOAuthIdpConfig(y,A).then(w=>new c.OIDCConfig(w)):c.SAMLConfig.isProviderId(y)?this.authRequestHandler.updateInboundSamlConfig(y,A).then(w=>new c.SAMLConfig(w)):Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_PROVIDER_ID)):Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_CONFIG,'Request is missing "UpdateAuthProviderRequest" configuration.'))}createProviderConfig(y){return r.isNonNullObject(y)?c.OIDCConfig.isProviderId(y.providerId)?this.authRequestHandler.createOAuthIdpConfig(y).then(A=>new c.OIDCConfig(A)):c.SAMLConfig.isProviderId(y.providerId)?this.authRequestHandler.createInboundSamlConfig(y).then(A=>new c.SAMLConfig(A)):Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_PROVIDER_ID)):Promise.reject(new t.FirebaseAuthError(t.AuthClientErrorCode.INVALID_CONFIG,'Request is missing "AuthProviderConfig" configuration.'))}_verifyAuthBlockingToken(y,A){const w=(0,u.useEmulator)();return this.authBlockingTokenVerifier._verifyAuthBlockingToken(y,w,A).then(I=>I)}verifyDecodedJWTNotRevokedOrDisabled(y,A){return this.getUser(y.sub).then(w=>{if(w.disabled)throw new t.FirebaseAuthError(t.AuthClientErrorCode.USER_DISABLED,"The user record is disabled.");if(w.tokensValidAfterTime){const I=y.auth_time*1e3,_=new Date(w.tokensValidAfterTime).getTime();if(I<_)throw new t.FirebaseAuthError(A)}return y})}}return baseAuth.BaseAuth=v,baseAuth}/*! firebase-admin v13.4.0 */var hasRequiredTenantManager;function requireTenantManager(){if(hasRequiredTenantManager)return tenantManager;hasRequiredTenantManager=1;/*!
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(tenantManager,"__esModule",{value:!0}),tenantManager.TenantManager=tenantManager.TenantAwareAuth=void 0;const t=requireValidator$1(),e=requireUtils$2(),r=requireError(),u=requireBaseAuth(),d=requireTenant(),m=requireAuthApiRequest();class c extends u.BaseAuth{constructor(s,h){super(s,new m.TenantAwareAuthRequestHandler(s,h),(0,u.createFirebaseTokenGenerator)(s,h)),e.addReadonlyGetter(this,"tenantId",h)}verifyIdToken(s,h=!1){return super.verifyIdToken(s,h).then(v=>{if(v.firebase.tenant!==this.tenantId)throw new r.FirebaseAuthError(r.AuthClientErrorCode.MISMATCHING_TENANT_ID);return v})}createSessionCookie(s,h){return t.isNonEmptyString(s)?!t.isNonNullObject(h)||!t.isNumber(h.expiresIn)?Promise.reject(new r.FirebaseAuthError(r.AuthClientErrorCode.INVALID_SESSION_COOKIE_DURATION)):this.verifyIdToken(s).then(()=>super.createSessionCookie(s,h)):Promise.reject(new r.FirebaseAuthError(r.AuthClientErrorCode.INVALID_ID_TOKEN))}verifySessionCookie(s,h=!1){return super.verifySessionCookie(s,h).then(v=>{if(v.firebase.tenant!==this.tenantId)throw new r.FirebaseAuthError(r.AuthClientErrorCode.MISMATCHING_TENANT_ID);return v})}}tenantManager.TenantAwareAuth=c;class a{constructor(s){this.app=s,this.authRequestHandler=new m.AuthRequestHandler(s),this.tenantsMap={}}authForTenant(s){if(!t.isNonEmptyString(s))throw new r.FirebaseAuthError(r.AuthClientErrorCode.INVALID_TENANT_ID);return typeof this.tenantsMap[s]>"u"&&(this.tenantsMap[s]=new c(this.app,s)),this.tenantsMap[s]}getTenant(s){return this.authRequestHandler.getTenant(s).then(h=>new d.Tenant(h))}listTenants(s,h){return this.authRequestHandler.listTenants(s,h).then(v=>{const E=[];v.tenants.forEach(A=>{E.push(new d.Tenant(A))});const y={tenants:E,pageToken:v.nextPageToken};return typeof y.pageToken>"u"&&delete y.pageToken,y})}deleteTenant(s){return this.authRequestHandler.deleteTenant(s)}createTenant(s){return this.authRequestHandler.createTenant(s).then(h=>new d.Tenant(h))}updateTenant(s,h){return this.authRequestHandler.updateTenant(s,h).then(v=>new d.Tenant(v))}}return tenantManager.TenantManager=a,tenantManager}var projectConfigManager={};/*! firebase-admin v13.4.0 */var hasRequiredProjectConfigManager;function requireProjectConfigManager(){if(hasRequiredProjectConfigManager)return projectConfigManager;hasRequiredProjectConfigManager=1,Object.defineProperty(projectConfigManager,"__esModule",{value:!0}),projectConfigManager.ProjectConfigManager=void 0;const t=requireProjectConfig(),e=requireAuthApiRequest();class r{constructor(d){this.authRequestHandler=new e.AuthRequestHandler(d)}getProjectConfig(){return this.authRequestHandler.getProjectConfig().then(d=>new t.ProjectConfig(d))}updateProjectConfig(d){return this.authRequestHandler.updateProjectConfig(d).then(m=>new t.ProjectConfig(m))}}return projectConfigManager.ProjectConfigManager=r,projectConfigManager}/*! firebase-admin v13.4.0 */var hasRequiredAuth$1;function requireAuth$1(){if(hasRequiredAuth$1)return auth$1;hasRequiredAuth$1=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(auth$1,"__esModule",{value:!0}),auth$1.Auth=void 0;const t=requireAuthApiRequest(),e=requireTenantManager(),r=requireBaseAuth(),u=requireProjectConfigManager();class d extends r.BaseAuth{constructor(c){super(c,new t.AuthRequestHandler(c)),this.app_=c,this.tenantManager_=new e.TenantManager(c),this.projectConfigManager_=new u.ProjectConfigManager(c)}get app(){return this.app_}tenantManager(){return this.tenantManager_}projectConfigManager(){return this.projectConfigManager_}}return auth$1.Auth=d,auth$1}var index_standalone={},index_cjs$2={},postinstall={},hasRequiredPostinstall;function requirePostinstall(){return hasRequiredPostinstall||(hasRequiredPostinstall=1,Object.defineProperty(postinstall,"__esModule",{value:!0}),postinstall.getDefaultsFromPostinstall=()=>{}),postinstall}var hasRequiredIndex_cjs$2;function requireIndex_cjs$2(){if(hasRequiredIndex_cjs$2)return index_cjs$2;hasRequiredIndex_cjs$2=1;var t={};Object.defineProperty(index_cjs$2,"__esModule",{value:!0});var e=requirePostinstall();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u=function(tt,et){if(!tt)throw d(et)},d=function(tt){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+tt)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m=function(tt){const et=[];let dt=0;for(let Bt=0;Bt<tt.length;Bt++){let Ct=tt.charCodeAt(Bt);Ct<128?et[dt++]=Ct:Ct<2048?(et[dt++]=Ct>>6|192,et[dt++]=Ct&63|128):(Ct&64512)===55296&&Bt+1<tt.length&&(tt.charCodeAt(Bt+1)&64512)===56320?(Ct=65536+((Ct&1023)<<10)+(tt.charCodeAt(++Bt)&1023),et[dt++]=Ct>>18|240,et[dt++]=Ct>>12&63|128,et[dt++]=Ct>>6&63|128,et[dt++]=Ct&63|128):(et[dt++]=Ct>>12|224,et[dt++]=Ct>>6&63|128,et[dt++]=Ct&63|128)}return et},c=function(tt){const et=[];let dt=0,Bt=0;for(;dt<tt.length;){const Ct=tt[dt++];if(Ct<128)et[Bt++]=String.fromCharCode(Ct);else if(Ct>191&&Ct<224){const pr=tt[dt++];et[Bt++]=String.fromCharCode((Ct&31)<<6|pr&63)}else if(Ct>239&&Ct<365){const pr=tt[dt++],Sr=tt[dt++],un=tt[dt++],Ln=((Ct&7)<<18|(pr&63)<<12|(Sr&63)<<6|un&63)-65536;et[Bt++]=String.fromCharCode(55296+(Ln>>10)),et[Bt++]=String.fromCharCode(56320+(Ln&1023))}else{const pr=tt[dt++],Sr=tt[dt++];et[Bt++]=String.fromCharCode((Ct&15)<<12|(pr&63)<<6|Sr&63)}}return et.join("")},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(tt,et){if(!Array.isArray(tt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const dt=et?this.byteToCharMapWebSafe_:this.byteToCharMap_,Bt=[];for(let Ct=0;Ct<tt.length;Ct+=3){const pr=tt[Ct],Sr=Ct+1<tt.length,un=Sr?tt[Ct+1]:0,Ln=Ct+2<tt.length,In=Ln?tt[Ct+2]:0,Un=pr>>2,Pr=(pr&3)<<4|un>>4;let Ir=(un&15)<<2|In>>6,si=In&63;Ln||(si=64,Sr||(Ir=64)),Bt.push(dt[Un],dt[Pr],dt[Ir],dt[si])}return Bt.join("")},encodeString(tt,et){return this.HAS_NATIVE_SUPPORT&&!et?btoa(tt):this.encodeByteArray(m(tt),et)},decodeString(tt,et){return this.HAS_NATIVE_SUPPORT&&!et?atob(tt):c(this.decodeStringToByteArray(tt,et))},decodeStringToByteArray(tt,et){this.init_();const dt=et?this.charToByteMapWebSafe_:this.charToByteMap_,Bt=[];for(let Ct=0;Ct<tt.length;){const pr=dt[tt.charAt(Ct++)],un=Ct<tt.length?dt[tt.charAt(Ct)]:0;++Ct;const In=Ct<tt.length?dt[tt.charAt(Ct)]:64;++Ct;const Pr=Ct<tt.length?dt[tt.charAt(Ct)]:64;if(++Ct,pr==null||un==null||In==null||Pr==null)throw new o;const Ir=pr<<2|un>>4;if(Bt.push(Ir),In!==64){const si=un<<4&240|In>>2;if(Bt.push(si),Pr!==64){const Dr=In<<6&192|Pr;Bt.push(Dr)}}}return Bt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let tt=0;tt<this.ENCODED_VALS.length;tt++)this.byteToCharMap_[tt]=this.ENCODED_VALS.charAt(tt),this.charToByteMap_[this.byteToCharMap_[tt]]=tt,this.byteToCharMapWebSafe_[tt]=this.ENCODED_VALS_WEBSAFE.charAt(tt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[tt]]=tt,tt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(tt)]=tt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(tt)]=tt)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(tt){const et=m(tt);return a.encodeByteArray(et,!0)},h=function(tt){return s(tt).replace(/\./g,"")},v=function(tt){try{return a.decodeString(tt,!0)}catch(et){console.error("base64Decode failed: ",et)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(tt){return y(void 0,tt)}function y(tt,et){if(!(et instanceof Object))return et;switch(et.constructor){case Date:const dt=et;return new Date(dt.getTime());case Object:tt===void 0&&(tt={});break;case Array:tt=[];break;default:return et}for(const dt in et)!et.hasOwnProperty(dt)||!A(dt)||(tt[dt]=y(tt[dt],et[dt]));return tt}function A(tt){return tt!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$4<"u")return commonjsGlobal$4;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I=()=>w().__FIREBASE_DEFAULTS__,_=()=>{if(typeof process>"u"||typeof t>"u")return;const tt=t.__FIREBASE_DEFAULTS__;if(tt)return JSON.parse(tt)},S=()=>{if(typeof document>"u")return;let tt;try{tt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const et=tt&&v(tt[1]);return et&&JSON.parse(et)},j=()=>{try{return e.getDefaultsFromPostinstall()||I()||_()||S()}catch(tt){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${tt}`);return}},K=tt=>{var et,dt;return(dt=(et=j())===null||et===void 0?void 0:et.emulatorHosts)===null||dt===void 0?void 0:dt[tt]},J=tt=>{const et=K(tt);if(!et)return;const dt=et.lastIndexOf(":");if(dt<=0||dt+1===et.length)throw new Error(`Invalid host ${et} with no separate hostname and port!`);const Bt=parseInt(et.substring(dt+1),10);return et[0]==="["?[et.substring(1,dt-1),Bt]:[et.substring(0,dt),Bt]},H=()=>{var tt;return(tt=j())===null||tt===void 0?void 0:tt.config},U=tt=>{var et;return(et=j())===null||et===void 0?void 0:et[`_${tt}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((et,dt)=>{this.resolve=et,this.reject=dt})}wrapCallback(et){return(dt,Bt)=>{dt?this.reject(dt):this.resolve(Bt),typeof et=="function"&&(this.promise.catch(()=>{}),et.length===1?et(dt):et(dt,Bt))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(tt){try{return(tt.startsWith("http://")||tt.startsWith("https://")?new URL(tt).hostname:tt).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ie(tt){return(await fetch(tt,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(tt,et){if(tt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const dt={alg:"none",type:"JWT"},Bt=et||"demo-project",Ct=tt.iat||0,pr=tt.sub||tt.user_id;if(!pr)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Sr=Object.assign({iss:`https://securetoken.google.com/${Bt}`,aud:Bt,iat:Ct,exp:Ct+3600,auth_time:Ct,sub:pr,user_id:pr,firebase:{sign_in_provider:"custom",identities:{}}},tt);return[h(JSON.stringify(dt)),h(JSON.stringify(Sr)),""].join(".")}const le={};function ne(){const tt={prod:[],emulator:[]};for(const et of Object.keys(le))le[et]?tt.emulator.push(et):tt.prod.push(et);return tt}function ye(tt){let et=document.getElementById(tt),dt=!1;return et||(et=document.createElement("div"),et.setAttribute("id",tt),dt=!0),{created:dt,element:et}}let fe=!1;function Te(tt,et){if(typeof window>"u"||typeof document>"u"||!Z(window.location.host)||le[tt]===et||le[tt]||fe)return;le[tt]=et;function dt(Ir){return`__firebase__banner__${Ir}`}const Bt="__firebase__banner",pr=ne().prod.length>0;function Sr(){const Ir=document.getElementById(Bt);Ir&&Ir.remove()}function un(Ir){Ir.style.display="flex",Ir.style.background="#7faaf0",Ir.style.position="fixed",Ir.style.bottom="5px",Ir.style.left="5px",Ir.style.padding=".5em",Ir.style.borderRadius="5px",Ir.style.alignItems="center"}function Ln(Ir,si){Ir.setAttribute("width","24"),Ir.setAttribute("id",si),Ir.setAttribute("height","24"),Ir.setAttribute("viewBox","0 0 24 24"),Ir.setAttribute("fill","none"),Ir.style.marginLeft="-6px"}function In(){const Ir=document.createElement("span");return Ir.style.cursor="pointer",Ir.style.marginLeft="16px",Ir.style.fontSize="24px",Ir.innerHTML=" &times;",Ir.onclick=()=>{fe=!0,Sr()},Ir}function Un(Ir,si){Ir.setAttribute("id",si),Ir.innerText="Learn more",Ir.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",Ir.setAttribute("target","__blank"),Ir.style.paddingLeft="5px",Ir.style.textDecoration="underline"}function Pr(){const Ir=ye(Bt),si=dt("text"),Dr=document.getElementById(si)||document.createElement("span"),Bn=dt("learnmore"),ai=document.getElementById(Bn)||document.createElement("a"),xn=dt("preprendIcon"),mn=document.getElementById(xn)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(Ir.created){const Wn=Ir.element;un(Wn),Un(ai,Bn);const Yn=In();Ln(mn,xn),Wn.append(mn,Dr,ai,Yn),document.body.appendChild(Wn)}pr?(Dr.innerText="Preview backend disconnected.",mn.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(mn.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Dr.innerText="Preview backend running in this workspace."),Dr.setAttribute("id",si)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Pr):Pr()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function be(){var tt;const et=(tt=j())===null||tt===void 0?void 0:tt.forceEnvironment;if(et==="node")return!0;if(et==="browser")return!1;try{return Object.prototype.toString.call(commonjsGlobal$4.process)==="[object process]"}catch{return!1}}function we(){return typeof window<"u"||Ce()}function Ce(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function je(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Fe(){const tt=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof tt=="object"&&tt.id!==void 0}function Ve(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ge(){return Ae().indexOf("Electron/")>=0}function Le(){const tt=Ae();return tt.indexOf("MSIE ")>=0||tt.indexOf("Trident/")>=0}function Be(){return Ae().indexOf("MSAppHost/")>=0}function $e(){return r.NODE_CLIENT===!0||r.NODE_ADMIN===!0}function he(){return!be()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function p(){return!be()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function V(){try{return typeof indexedDB=="object"}catch{return!1}}function R(){return new Promise((tt,et)=>{try{let dt=!0;const Bt="validate-browser-context-for-indexeddb-analytics-module",Ct=self.indexedDB.open(Bt);Ct.onsuccess=()=>{Ct.result.close(),dt||self.indexedDB.deleteDatabase(Bt),tt(!0)},Ct.onupgradeneeded=()=>{dt=!1},Ct.onerror=()=>{var pr;et(((pr=Ct.error)===null||pr===void 0?void 0:pr.message)||"")}}catch(dt){et(dt)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re="FirebaseError";class ke extends Error{constructor(et,dt,Bt){super(dt),this.code=et,this.customData=Bt,this.name=Re,Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qe.prototype.create)}}class qe{constructor(et,dt,Bt){this.service=et,this.serviceName=dt,this.errors=Bt}create(et,...dt){const Bt=dt[0]||{},Ct=`${this.service}/${et}`,pr=this.errors[et],Sr=pr?g(pr,Bt):"Error",un=`${this.serviceName}: ${Sr} (${Ct}).`;return new ke(Ct,un,Bt)}}function g(tt,et){return tt.replace(ee,(dt,Bt)=>{const Ct=et[Bt];return Ct!=null?String(Ct):`<${Bt}?>`})}const ee=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(tt){return JSON.parse(tt)}function l(tt){return JSON.stringify(tt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(tt){let et={},dt={},Bt={},Ct="";try{const pr=tt.split(".");et=ae(v(pr[0])||""),dt=ae(v(pr[1])||""),Ct=pr[2],Bt=dt.d||{},delete dt.d}catch{}return{header:et,claims:dt,data:Bt,signature:Ct}},oe=function(tt){const et=X(tt).claims,dt=Math.floor(new Date().getTime()/1e3);let Bt=0,Ct=0;return typeof et=="object"&&(et.hasOwnProperty("nbf")?Bt=et.nbf:et.hasOwnProperty("iat")&&(Bt=et.iat),et.hasOwnProperty("exp")?Ct=et.exp:Ct=Bt+86400),!!dt&&!!Bt&&!!Ct&&dt>=Bt&&dt<=Ct},_e=function(tt){const et=X(tt).claims;return typeof et=="object"&&et.hasOwnProperty("iat")?et.iat:null},He=function(tt){const et=X(tt),dt=et.claims;return!!dt&&typeof dt=="object"&&dt.hasOwnProperty("iat")},nt=function(tt){const et=X(tt).claims;return typeof et=="object"&&et.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(tt,et){return Object.prototype.hasOwnProperty.call(tt,et)}function wt(tt,et){if(Object.prototype.hasOwnProperty.call(tt,et))return tt[et]}function ir(tt){for(const et in tt)if(Object.prototype.hasOwnProperty.call(tt,et))return!1;return!0}function _r(tt,et,dt){const Bt={};for(const Ct in tt)Object.prototype.hasOwnProperty.call(tt,Ct)&&(Bt[Ct]=et.call(dt,tt[Ct],Ct,tt));return Bt}function Rr(tt,et){if(tt===et)return!0;const dt=Object.keys(tt),Bt=Object.keys(et);for(const Ct of dt){if(!Bt.includes(Ct))return!1;const pr=tt[Ct],Sr=et[Ct];if(Hr(pr)&&Hr(Sr)){if(!Rr(pr,Sr))return!1}else if(pr!==Sr)return!1}for(const Ct of Bt)if(!dt.includes(Ct))return!1;return!0}function Hr(tt){return tt!==null&&typeof tt=="object"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(tt,et=2e3){const dt=new P;return setTimeout(()=>dt.reject("timeout!"),et),tt.then(dt.resolve,dt.reject),dt.promise}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(tt){const et=[];for(const[dt,Bt]of Object.entries(tt))Array.isArray(Bt)?Bt.forEach(Ct=>{et.push(encodeURIComponent(dt)+"="+encodeURIComponent(Ct))}):et.push(encodeURIComponent(dt)+"="+encodeURIComponent(Bt));return et.length?"&"+et.join("&"):""}function $t(tt){const et={};return tt.replace(/^\?/,"").split("&").forEach(Bt=>{if(Bt){const[Ct,pr]=Bt.split("=");et[decodeURIComponent(Ct)]=decodeURIComponent(pr)}}),et}function qt(tt){const et=tt.indexOf("?");if(!et)return"";const dt=tt.indexOf("#",et);return tt.substring(et,dt>0?dt:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let et=1;et<this.blockSize;++et)this.pad_[et]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(et,dt){dt||(dt=0);const Bt=this.W_;if(typeof et=="string")for(let Pr=0;Pr<16;Pr++)Bt[Pr]=et.charCodeAt(dt)<<24|et.charCodeAt(dt+1)<<16|et.charCodeAt(dt+2)<<8|et.charCodeAt(dt+3),dt+=4;else for(let Pr=0;Pr<16;Pr++)Bt[Pr]=et[dt]<<24|et[dt+1]<<16|et[dt+2]<<8|et[dt+3],dt+=4;for(let Pr=16;Pr<80;Pr++){const Ir=Bt[Pr-3]^Bt[Pr-8]^Bt[Pr-14]^Bt[Pr-16];Bt[Pr]=(Ir<<1|Ir>>>31)&4294967295}let Ct=this.chain_[0],pr=this.chain_[1],Sr=this.chain_[2],un=this.chain_[3],Ln=this.chain_[4],In,Un;for(let Pr=0;Pr<80;Pr++){Pr<40?Pr<20?(In=un^pr&(Sr^un),Un=1518500249):(In=pr^Sr^un,Un=1859775393):Pr<60?(In=pr&Sr|un&(pr|Sr),Un=2400959708):(In=pr^Sr^un,Un=3395469782);const Ir=(Ct<<5|Ct>>>27)+In+Ln+Un+Bt[Pr]&4294967295;Ln=un,un=Sr,Sr=(pr<<30|pr>>>2)&4294967295,pr=Ct,Ct=Ir}this.chain_[0]=this.chain_[0]+Ct&4294967295,this.chain_[1]=this.chain_[1]+pr&4294967295,this.chain_[2]=this.chain_[2]+Sr&4294967295,this.chain_[3]=this.chain_[3]+un&4294967295,this.chain_[4]=this.chain_[4]+Ln&4294967295}update(et,dt){if(et==null)return;dt===void 0&&(dt=et.length);const Bt=dt-this.blockSize;let Ct=0;const pr=this.buf_;let Sr=this.inbuf_;for(;Ct<dt;){if(Sr===0)for(;Ct<=Bt;)this.compress_(et,Ct),Ct+=this.blockSize;if(typeof et=="string"){for(;Ct<dt;)if(pr[Sr]=et.charCodeAt(Ct),++Sr,++Ct,Sr===this.blockSize){this.compress_(pr),Sr=0;break}}else for(;Ct<dt;)if(pr[Sr]=et[Ct],++Sr,++Ct,Sr===this.blockSize){this.compress_(pr),Sr=0;break}}this.inbuf_=Sr,this.total_+=dt}digest(){const et=[];let dt=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let Ct=this.blockSize-1;Ct>=56;Ct--)this.buf_[Ct]=dt&255,dt/=256;this.compress_(this.buf_);let Bt=0;for(let Ct=0;Ct<5;Ct++)for(let pr=24;pr>=0;pr-=8)et[Bt]=this.chain_[Ct]>>pr&255,++Bt;return et}}function nr(tt,et){const dt=new dr(tt,et);return dt.subscribe.bind(dt)}class dr{constructor(et,dt){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=dt,this.task.then(()=>{et(this)}).catch(Bt=>{this.error(Bt)})}next(et){this.forEachObserver(dt=>{dt.next(et)})}error(et){this.forEachObserver(dt=>{dt.error(et)}),this.close(et)}complete(){this.forEachObserver(et=>{et.complete()}),this.close()}subscribe(et,dt,Bt){let Ct;if(et===void 0&&dt===void 0&&Bt===void 0)throw new Error("Missing Observer.");Mr(et,["next","error","complete"])?Ct=et:Ct={next:et,error:dt,complete:Bt},Ct.next===void 0&&(Ct.next=jr),Ct.error===void 0&&(Ct.error=jr),Ct.complete===void 0&&(Ct.complete=jr);const pr=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ct.error(this.finalError):Ct.complete()}catch{}}),this.observers.push(Ct),pr}unsubscribeOne(et){this.observers===void 0||this.observers[et]===void 0||(delete this.observers[et],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(et){if(!this.finalized)for(let dt=0;dt<this.observers.length;dt++)this.sendOne(dt,et)}sendOne(et,dt){this.task.then(()=>{if(this.observers!==void 0&&this.observers[et]!==void 0)try{dt(this.observers[et])}catch(Bt){typeof console<"u"&&console.error&&console.error(Bt)}})}close(et){this.finalized||(this.finalized=!0,et!==void 0&&(this.finalError=et),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Er(tt,et){return(...dt)=>{Promise.resolve(!0).then(()=>{tt(...dt)}).catch(Bt=>{et&&et(Bt)})}}function Mr(tt,et){if(typeof tt!="object"||tt===null)return!1;for(const dt of et)if(dt in tt&&typeof tt[dt]=="function")return!0;return!1}function jr(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=function(tt,et,dt,Bt){let Ct;if(Bt<et?Ct="at least "+et:Bt>dt&&(Ct=dt===0?"none":"no more than "+dt),Ct){const pr=tt+" failed: Was called with "+Bt+(Bt===1?" argument.":" arguments.")+" Expects "+Ct+".";throw new Error(pr)}};function kn(tt,et){return`${tt} failed: ${et} argument `}function gn(tt,et,dt){if(!(dt&&!et)&&typeof et!="string")throw new Error(kn(tt,"namespace")+"must be a valid firebase namespace.")}function bn(tt,et,dt,Bt){if(!(Bt&&!dt)&&typeof dt!="function")throw new Error(kn(tt,et)+"must be a valid function.")}function Tn(tt,et,dt,Bt){if(!(Bt&&!dt)&&(typeof dt!="object"||dt===null))throw new Error(kn(tt,et)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=function(tt){const et=[];let dt=0;for(let Bt=0;Bt<tt.length;Bt++){let Ct=tt.charCodeAt(Bt);if(Ct>=55296&&Ct<=56319){const pr=Ct-55296;Bt++,u(Bt<tt.length,"Surrogate pair missing trail surrogate.");const Sr=tt.charCodeAt(Bt)-56320;Ct=65536+(pr<<10)+Sr}Ct<128?et[dt++]=Ct:Ct<2048?(et[dt++]=Ct>>6|192,et[dt++]=Ct&63|128):Ct<65536?(et[dt++]=Ct>>12|224,et[dt++]=Ct>>6&63|128,et[dt++]=Ct&63|128):(et[dt++]=Ct>>18|240,et[dt++]=Ct>>12&63|128,et[dt++]=Ct>>6&63|128,et[dt++]=Ct&63|128)}return et},Xr=function(tt){let et=0;for(let dt=0;dt<tt.length;dt++){const Bt=tt.charCodeAt(dt);Bt<128?et++:Bt<2048?et+=2:Bt>=55296&&Bt<=56319?(et+=4,dt++):et+=3}return et};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=1e3,yr=2,Wr=4*60*60*1e3,Yr=.5;function vn(tt,et=Rn,dt=yr){const Bt=et*Math.pow(dt,tt),Ct=Math.round(Yr*Bt*(Math.random()-.5)*2);return Math.min(Wr,Bt+Ct)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(tt){return Number.isFinite(tt)?tt+Zr(tt):`${tt}`}function Zr(tt){tt=Math.abs(tt);const et=tt%100;if(et>=10&&et<=20)return"th";const dt=tt%10;return dt===1?"st":dt===2?"nd":dt===3?"rd":"th"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(tt){return tt&&tt._delegate?tt._delegate:tt}return index_cjs$2.CONSTANTS=r,index_cjs$2.DecodeBase64StringError=o,index_cjs$2.Deferred=P,index_cjs$2.ErrorFactory=qe,index_cjs$2.FirebaseError=ke,index_cjs$2.MAX_VALUE_MILLIS=Wr,index_cjs$2.RANDOM_FACTOR=Yr,index_cjs$2.Sha1=Kt,index_cjs$2.areCookiesEnabled=ce,index_cjs$2.assert=u,index_cjs$2.assertionError=d,index_cjs$2.async=Er,index_cjs$2.base64=a,index_cjs$2.base64Decode=v,index_cjs$2.base64Encode=s,index_cjs$2.base64urlEncodeWithoutPadding=h,index_cjs$2.calculateBackoffMillis=vn,index_cjs$2.contains=It,index_cjs$2.createMockUserToken=ue,index_cjs$2.createSubscribe=nr,index_cjs$2.decode=X,index_cjs$2.deepCopy=E,index_cjs$2.deepEqual=Rr,index_cjs$2.deepExtend=y,index_cjs$2.errorPrefix=kn,index_cjs$2.extractQuerystring=qt,index_cjs$2.getDefaultAppConfig=H,index_cjs$2.getDefaultEmulatorHost=K,index_cjs$2.getDefaultEmulatorHostnameAndPort=J,index_cjs$2.getDefaults=j,index_cjs$2.getExperimentalSetting=U,index_cjs$2.getGlobal=w,index_cjs$2.getModularInstance=Fr,index_cjs$2.getUA=Ae,index_cjs$2.isAdmin=nt,index_cjs$2.isBrowser=we,index_cjs$2.isBrowserExtension=Fe,index_cjs$2.isCloudWorkstation=Z,index_cjs$2.isCloudflareWorker=je,index_cjs$2.isElectron=Ge,index_cjs$2.isEmpty=ir,index_cjs$2.isIE=Le,index_cjs$2.isIndexedDBAvailable=V,index_cjs$2.isMobileCordova=Se,index_cjs$2.isNode=be,index_cjs$2.isNodeSdk=$e,index_cjs$2.isReactNative=Ve,index_cjs$2.isSafari=he,index_cjs$2.isSafariOrWebkit=p,index_cjs$2.isUWP=Be,index_cjs$2.isValidFormat=He,index_cjs$2.isValidTimestamp=oe,index_cjs$2.isWebWorker=Ce,index_cjs$2.issuedAtTime=_e,index_cjs$2.jsonEval=ae,index_cjs$2.map=_r,index_cjs$2.ordinal=Ur,index_cjs$2.pingServer=ie,index_cjs$2.promiseWithTimeout=Vr,index_cjs$2.querystring=Tr,index_cjs$2.querystringDecode=$t,index_cjs$2.safeGet=wt,index_cjs$2.stringLength=Xr,index_cjs$2.stringToByteArray=yn,index_cjs$2.stringify=l,index_cjs$2.updateEmulatorBanner=Te,index_cjs$2.validateArgCount=xr,index_cjs$2.validateCallback=bn,index_cjs$2.validateContextObject=Tn,index_cjs$2.validateIndexedDBOpenable=R,index_cjs$2.validateNamespace=gn,index_cjs$2}var index_cjs$1={},hasRequiredIndex_cjs$1;function requireIndex_cjs$1(){return hasRequiredIndex_cjs$1||(hasRequiredIndex_cjs$1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e=[];t.LogLevel=void 0,function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"}(t.LogLevel||(t.LogLevel={}));const r={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},u=t.LogLevel.INFO,d={[t.LogLevel.DEBUG]:"log",[t.LogLevel.VERBOSE]:"log",[t.LogLevel.INFO]:"info",[t.LogLevel.WARN]:"warn",[t.LogLevel.ERROR]:"error"},m=(s,h,...v)=>{if(h<s.logLevel)return;const E=new Date().toISOString(),y=d[h];if(y)console[y](`[${E}]  ${s.name}:`,...v);else throw new Error(`Attempted to log a message with an invalid logType (value: ${h})`)};class c{constructor(h){this.name=h,this._logLevel=u,this._logHandler=m,this._userLogHandler=null,e.push(this)}get logLevel(){return this._logLevel}set logLevel(h){if(!(h in t.LogLevel))throw new TypeError(`Invalid value "${h}" assigned to \`logLevel\``);this._logLevel=h}setLogLevel(h){this._logLevel=typeof h=="string"?r[h]:h}get logHandler(){return this._logHandler}set logHandler(h){if(typeof h!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=h}get userLogHandler(){return this._userLogHandler}set userLogHandler(h){this._userLogHandler=h}debug(...h){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.DEBUG,...h),this._logHandler(this,t.LogLevel.DEBUG,...h)}log(...h){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.VERBOSE,...h),this._logHandler(this,t.LogLevel.VERBOSE,...h)}info(...h){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.INFO,...h),this._logHandler(this,t.LogLevel.INFO,...h)}warn(...h){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.WARN,...h),this._logHandler(this,t.LogLevel.WARN,...h)}error(...h){this._userLogHandler&&this._userLogHandler(this,t.LogLevel.ERROR,...h),this._logHandler(this,t.LogLevel.ERROR,...h)}}function a(s){e.forEach(h=>{h.setLogLevel(s)})}function o(s,h){for(const v of e){let E=null;h&&h.level&&(E=r[h.level]),s===null?v.userLogHandler=null:v.userLogHandler=(y,A,...w)=>{const I=w.map(_=>{if(_==null)return null;if(typeof _=="string")return _;if(typeof _=="number"||typeof _=="boolean")return _.toString();if(_ instanceof Error)return _.message;try{return JSON.stringify(_)}catch{return null}}).filter(_=>_).join(" ");A>=(E??y.logLevel)&&s({level:t.LogLevel[A].toLowerCase(),message:I,args:w,type:y.name})}}}t.Logger=c,t.setLogLevel=a,t.setUserLogHandler=o}(index_cjs$1)),index_cjs$1}var index_cjs={},hasRequiredIndex_cjs;function requireIndex_cjs(){if(hasRequiredIndex_cjs)return index_cjs;hasRequiredIndex_cjs=1,Object.defineProperty(index_cjs,"__esModule",{value:!0});var t=requireIndex_cjs$2();class e{constructor(o,s,h){this.name=o,this.instanceFactory=s,this.type=h,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(o){return this.instantiationMode=o,this}setMultipleInstances(o){return this.multipleInstances=o,this}setServiceProps(o){return this.serviceProps=o,this}setInstanceCreatedCallback(o){return this.onInstanceCreated=o,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(o,s){this.name=o,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(o){const s=this.normalizeInstanceIdentifier(o);if(!this.instancesDeferred.has(s)){const h=new t.Deferred;if(this.instancesDeferred.set(s,h),this.isInitialized(s)||this.shouldAutoInitialize())try{const v=this.getOrInitializeService({instanceIdentifier:s});v&&h.resolve(v)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(o){var s;const h=this.normalizeInstanceIdentifier(o?.identifier),v=(s=o?.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(h)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:h})}catch(E){if(v)return null;throw E}else{if(v)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(o){if(o.name!==this.name)throw Error(`Mismatching Component ${o.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=o,!!this.shouldAutoInitialize()){if(m(o))try{this.getOrInitializeService({instanceIdentifier:r})}catch{}for(const[s,h]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(s);try{const E=this.getOrInitializeService({instanceIdentifier:v});h.resolve(E)}catch{}}}}clearInstance(o=r){this.instancesDeferred.delete(o),this.instancesOptions.delete(o),this.instances.delete(o)}async delete(){const o=Array.from(this.instances.values());await Promise.all([...o.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...o.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(o=r){return this.instances.has(o)}getOptions(o=r){return this.instancesOptions.get(o)||{}}initialize(o={}){const{options:s={}}=o,h=this.normalizeInstanceIdentifier(o.instanceIdentifier);if(this.isInitialized(h))throw Error(`${this.name}(${h}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const v=this.getOrInitializeService({instanceIdentifier:h,options:s});for(const[E,y]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(E);h===A&&y.resolve(v)}return v}onInit(o,s){var h;const v=this.normalizeInstanceIdentifier(s),E=(h=this.onInitCallbacks.get(v))!==null&&h!==void 0?h:new Set;E.add(o),this.onInitCallbacks.set(v,E);const y=this.instances.get(v);return y&&o(y,v),()=>{E.delete(o)}}invokeOnInitCallbacks(o,s){const h=this.onInitCallbacks.get(s);if(h)for(const v of h)try{v(o,s)}catch{}}getOrInitializeService({instanceIdentifier:o,options:s={}}){let h=this.instances.get(o);if(!h&&this.component&&(h=this.component.instanceFactory(this.container,{instanceIdentifier:d(o),options:s}),this.instances.set(o,h),this.instancesOptions.set(o,s),this.invokeOnInitCallbacks(h,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,o,h)}catch{}return h||null}normalizeInstanceIdentifier(o=r){return this.component?this.component.multipleInstances?o:r:o}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d(a){return a===r?void 0:a}function m(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c{constructor(o){this.name=o,this.providers=new Map}addComponent(o){const s=this.getProvider(o.name);if(s.isComponentSet())throw new Error(`Component ${o.name} has already been registered with ${this.name}`);s.setComponent(o)}addOrOverwriteComponent(o){this.getProvider(o.name).isComponentSet()&&this.providers.delete(o.name),this.addComponent(o)}getProvider(o){if(this.providers.has(o))return this.providers.get(o);const s=new u(o,this);return this.providers.set(o,s),s}getProviders(){return Array.from(this.providers.values())}}return index_cjs.Component=e,index_cjs.ComponentContainer=c,index_cjs.Provider=u,index_cjs}var hasRequiredIndex_standalone;function requireIndex_standalone(){if(hasRequiredIndex_standalone)return index_standalone;hasRequiredIndex_standalone=1;var t={};Object.defineProperty(index_standalone,"__esModule",{value:!0});var e=require$$1$3,r=require$$1$3,u=require$$1$3,d=require$$1$3,m=require$$1$3,c=require$$1$3,a=require$$1$3,o=require$$1$3,s=requireIndex_cjs$2(),h=requireIndex_cjs$1(),v=requireIndex_cjs();function E(Y){return Y&&typeof Y=="object"&&"default"in Y?Y:{default:Y}}var y=E(e),A=E(r),w=E(u),I=E(d),_=E(m),S=E(c),j=E(a),K=E(o),J=E(s),H=E(h),U=E(v);function P(Y){if(Y.__esModule)return Y;var C=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(Y).forEach(function(te){var pe=Object.getOwnPropertyDescriptor(Y,te);Object.defineProperty(C,te,pe.get?pe:{enumerable:!0,get:function(){return Y[te]}})}),C}var Z={},ie={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(Y,C){var te=A.default,pe=te.Buffer;function Ee(De,Ke){for(var Ye in De)Ke[Ye]=De[Ye]}pe.from&&pe.alloc&&pe.allocUnsafe&&pe.allocUnsafeSlow?Y.exports=te:(Ee(te,C),C.Buffer=Pe);function Pe(De,Ke,Ye){return pe(De,Ke,Ye)}Pe.prototype=Object.create(pe.prototype),Ee(pe,Pe),Pe.from=function(De,Ke,Ye){if(typeof De=="number")throw new TypeError("Argument must not be a number");return pe(De,Ke,Ye)},Pe.alloc=function(De,Ke,Ye){if(typeof De!="number")throw new TypeError("Argument must be a number");var Ze=pe(De);return Ke!==void 0?typeof Ye=="string"?Ze.fill(Ke,Ye):Ze.fill(Ke):Ze.fill(0),Ze},Pe.allocUnsafe=function(De){if(typeof De!="number")throw new TypeError("Argument must be a number");return pe(De)},Pe.allocUnsafeSlow=function(De){if(typeof De!="number")throw new TypeError("Argument must be a number");return te.SlowBuffer(De)}})(ie,ie.exports);var ue={},le=I.default.Stream,ne=y.default,ye=function(Y){this.readable=this.writable=!0,this._paused=!1,this._driver=Y};ne.inherits(ye,le),ye.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0},ye.prototype.resume=function(){this._paused=!1,this.emit("drain");var Y=this._driver.messages;Y._paused=!1,Y.emit("drain")},ye.prototype.write=function(Y){return this.writable?(this._driver.parse(Y),!this._paused):!1},ye.prototype.end=function(Y){if(this.writable){Y!==void 0&&this.write(Y),this.writable=!1;var C=this._driver.messages;C.readable&&(C.readable=C.writable=!1,C.emit("end"))}},ye.prototype.destroy=function(){this.end()};var fe=function(Y){this.readable=this.writable=!0,this._paused=!1,this._driver=Y};ne.inherits(fe,le),fe.prototype.pause=function(){this._driver.io._paused=!0},fe.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")},fe.prototype.write=function(Y){return this.writable?(typeof Y=="string"?this._driver.text(Y):this._driver.binary(Y),!this._paused):!1},fe.prototype.end=function(Y){Y!==void 0&&this.write(Y)},fe.prototype.destroy=function(){},ue.IO=ye,ue.Messages=fe;var Te=function(){this.clear()};Te.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"],Te.prototype.clear=function(){this._sent={},this._lines=[]},Te.prototype.set=function(Y,C){if(C!==void 0){Y=this._strip(Y),C=this._strip(C);var te=Y.toLowerCase();(!this._sent.hasOwnProperty(te)||this.ALLOWED_DUPLICATES.indexOf(te)>=0)&&(this._sent[te]=!0,this._lines.push(Y+": "+C+`\r
`))}},Te.prototype.toString=function(){return this._lines.join("")},Te.prototype._strip=function(Y){return Y.toString().replace(/^ */,"").replace(/ *$/,"")};var Ae=Te,Se=ie.exports.Buffer,be=function(){this._queue=[],this._queueSize=0,this._offset=0};be.prototype.put=function(Y){!Y||Y.length===0||(Se.isBuffer(Y)||(Y=Se.from(Y)),this._queue.push(Y),this._queueSize+=Y.length)},be.prototype.read=function(Y){if(Y>this._queueSize)return null;if(Y===0)return Se.alloc(0);this._queueSize-=Y;var C=this._queue,te=Y,pe=C[0],Ee,Pe;if(pe.length>=Y)return pe.length===Y?C.shift():(Pe=pe.slice(0,Y),C[0]=pe.slice(Y),Pe);for(var De=0,Ke=C.length;De<Ke&&!(te<C[De].length);De++)te-=C[De].length;return Ee=C.splice(0,De),te>0&&C.length>0&&(Ee.push(C[0].slice(0,te)),C[0]=C[0].slice(te)),Se.concat(Ee,Y)},be.prototype.eachByte=function(Y,C){for(var te,pe,Ee;this._queue.length>0;){for(te=this._queue[0],pe=te.length;this._offset<pe;)Ee=this._offset,this._offset+=1,Y.call(C,te[Ee]);this._offset=0,this._queue.shift()}};var we=be,Ce=ie.exports.Buffer,je=w.default.EventEmitter,Fe=y.default,Ve=ue,Ge=Ae,Le=we,Be=function(Y,C,te){je.call(this),Be.validateOptions(te||{},["maxLength","masking","requireMasking","protocols"]),this._request=Y,this._reader=new Le,this._options=te||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new Ge,this.__queue=[],this.readyState=0,this.url=C,this.io=new Ve.IO(this),this.messages=new Ve.Messages(this),this._bindEventListeners()};Fe.inherits(Be,je),Be.isWebSocket=function(Y){var C=Y.headers.connection||"",te=Y.headers.upgrade||"";return Y.method==="GET"&&C.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&te.toLowerCase()==="websocket"},Be.validateOptions=function(Y,C){for(var te in Y)if(C.indexOf(te)<0)throw new Error("Unrecognized option: "+te)};var $e={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var Y=this;this.messages.on("error",function(){}),this.on("message",function(C){var te=Y.messages;te.readable&&te.emit("data",C.data)}),this.on("error",function(C){var te=Y.messages;te.readable&&te.emit("error",C)}),this.on("close",function(){var C=Y.messages;C.readable&&(C.readable=C.writable=!1,C.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(Y){return!1},setHeader:function(Y,C){return this.readyState>0?!1:(this._headers.set(Y,C),!0)},start:function(){if(this.readyState!==0)return!1;if(!Be.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var Y;try{Y=this._handshakeResponse()}catch(C){return this._failHandshake(C)}return this._write(Y),this._stage!==-1&&this._open(),!0},_failHandshake:function(Y){var C=new Ge;return C.set("Content-Type","text/plain"),C.set("Content-Length",Ce.byteLength(Y.message,"utf8")),C=["HTTP/1.1 400 Bad Request",C.toString(),Y.message],this._write(Ce.from(C.join(`\r
`),"utf8")),this._fail("protocol_error",Y.message),!1},text:function(Y){return this.frame(Y)},binary:function(Y){return!1},ping:function(){return!1},pong:function(){return!1},close:function(Y,C){return this.readyState!==1?!1:(this.readyState=3,this.emit("close",new Be.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(Y){this.frame.apply(this,Y)},this),this.__queue=[],this.emit("open",new Be.OpenEvent)},_queue:function(Y){return this.__queue.push(Y),!0},_write:function(Y){var C=this.io;C.readable&&C.emit("data",Y)},_fail:function(Y,C){this.readyState=2,this.emit("error",new Error(C)),this.close()}};for(var he in $e)Be.prototype[he]=$e[he];Be.ConnectEvent=function(){},Be.OpenEvent=function(){},Be.CloseEvent=function(Y,C){this.code=Y,this.reason=C},Be.MessageEvent=function(Y){this.data=Y},Be.PingEvent=function(Y){this.data=Y},Be.PongEvent=function(Y){this.data=Y};var p=Be,V={};V.HTTPParser=R;function R(Y){if(Y!==void 0&&Y!==R.REQUEST&&Y!==R.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");Y===void 0||this.initialize(Y),this.maxHeaderSize=R.maxHeaderSize}R.prototype.initialize=function(Y,C){if(Y!==R.REQUEST&&Y!==R.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");this.type=Y,this.state=Y+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1},R.encoding="ascii",R.maxHeaderSize=80*1024,R.REQUEST="REQUEST",R.RESPONSE="RESPONSE";var ce=R.kOnHeaders=1,Re=R.kOnHeadersComplete=2,ke=R.kOnBody=3,qe=R.kOnMessageComplete=4;R.prototype[ce]=R.prototype[Re]=R.prototype[ke]=R.prototype[qe]=function(){};var g=!0;Object.defineProperty(R,"kOnExecute",{get:function(){return g=!1,99}});var ee=V.methods=R.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],ae=ee.indexOf("CONNECT");R.prototype.reinitialize=R,R.prototype.close=R.prototype.pause=R.prototype.resume=R.prototype.remove=R.prototype.free=function(){},R.prototype._compatMode0_11=!1,R.prototype.getAsyncId=function(){return 0};var l={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};R.prototype.execute=function(Y,C,te){if(!(this instanceof R))throw new TypeError("not a HTTPParser");C=C||0,te=typeof te=="number"?te:Y.length,this.chunk=Y,this.offset=C;var pe=this.end=C+te;try{for(;this.offset<pe&&!this[this.state](););}catch(Ee){if(this.isUserCall)throw Ee;return this.hadError=!0,Ee}return this.chunk=null,te=this.offset-C,l[this.state]&&(this.headerSize+=te,this.headerSize>(this.maxHeaderSize||R.maxHeaderSize))?new Error("max header size exceeded"):te};var X={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};R.prototype.finish=function(){if(!this.hadError){if(!X[this.state])return new Error("invalid state for EOF");this.state==="BODY_RAW"&&this.userCall()(this[qe]())}},R.prototype.consume=R.prototype.unconsume=R.prototype.getCurrentBuffer=function(){},R.prototype.userCall=function(){this.isUserCall=!0;var Y=this;return function(C){return Y.isUserCall=!1,C}},R.prototype.nextRequest=function(){this.userCall()(this[qe]()),this.reinitialize(this.type)},R.prototype.consumeLine=function(){for(var Y=this.end,C=this.chunk,te=this.offset;te<Y;te++)if(C[te]===10){var pe=this.line+C.toString(R.encoding,this.offset,te);return pe.charAt(pe.length-1)==="\r"&&(pe=pe.substr(0,pe.length-1)),this.line="",this.offset=te+1,pe}this.line+=C.toString(R.encoding,this.offset,this.end),this.offset=this.end};var oe=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,_e=/^[ \t]+(.*[^ \t])/;R.prototype.parseHeader=function(Y,C){if(Y.indexOf("\r")!==-1)throw It("HPE_LF_EXPECTED");var te=oe.exec(Y),pe=te&&te[1];if(pe)C.push(pe),C.push(te[2]);else{var Ee=_e.exec(Y);Ee&&C.length&&(C[C.length-1]&&(C[C.length-1]+=" "),C[C.length-1]+=Ee[1])}};var He=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;R.prototype.REQUEST_LINE=function(){var Y=this.consumeLine();if(Y){var C=He.exec(Y);if(C===null)throw It("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?C[1]:ee.indexOf(C[1]),this.info.method===-1)throw new Error("invalid request method");this.info.url=C[2],this.info.versionMajor=+C[3],this.info.versionMinor=+C[4],this.body_bytes=0,this.state="HEADER"}};var nt=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;R.prototype.RESPONSE_LINE=function(){var Y=this.consumeLine();if(Y){var C=nt.exec(Y);if(C===null)throw It("HPE_INVALID_CONSTANT");this.info.versionMajor=+C[1],this.info.versionMinor=+C[2];var te=this.info.statusCode=+C[3];this.info.statusMessage=C[4],((te/100|0)===1||te===204||te===304)&&(this.body_bytes=0),this.state="HEADER"}},R.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf("close")!==-1)return!1}else if(this.connection.indexOf("keep-alive")===-1)return!1;return!!(this.body_bytes!==null||this.isChunked)},R.prototype.HEADER=function(){var Y=this.consumeLine();if(Y!==void 0){var C=this.info;if(Y)this.parseHeader(Y,C.headers);else{for(var te=C.headers,pe=!1,Ee,Pe=!1,De=0;De<te.length;De+=2)switch(te[De].toLowerCase()){case"transfer-encoding":this.isChunked=te[De+1].toLowerCase()==="chunked";break;case"content-length":if(Ee=+te[De+1],pe){if(Ee!==this.body_bytes)throw It("HPE_UNEXPECTED_CONTENT_LENGTH")}else pe=!0,this.body_bytes=Ee;break;case"connection":this.connection+=te[De+1].toLowerCase();break;case"upgrade":Pe=!0;break}this.isChunked&&pe&&(pe=!1,this.body_bytes=null),Pe&&this.connection.indexOf("upgrade")!=-1?C.upgrade=this.type===R.REQUEST||C.statusCode===101:C.upgrade=C.method===ae,this.isChunked&&C.upgrade&&(this.isChunked=!1),C.shouldKeepAlive=this.shouldKeepAlive();var Ke;if(g?Ke=this.userCall()(this[Re](C)):Ke=this.userCall()(this[Re](C.versionMajor,C.versionMinor,C.headers,C.method,C.url,C.statusCode,C.statusMessage,C.upgrade,C.shouldKeepAlive)),Ke===2)return this.nextRequest(),!0;if(this.isChunked&&!Ke)this.state="BODY_CHUNKHEAD";else{if(Ke||this.body_bytes===0)return this.nextRequest(),C.upgrade;this.body_bytes===null?this.state="BODY_RAW":this.state="BODY_SIZED"}}}},R.prototype.BODY_CHUNKHEAD=function(){var Y=this.consumeLine();Y!==void 0&&(this.body_bytes=parseInt(Y,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")},R.prototype.BODY_CHUNK=function(){var Y=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[ke](this.chunk.slice(this.offset,this.offset+Y),0,Y)),this.offset+=Y,this.body_bytes-=Y,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")},R.prototype.BODY_CHUNKEMPTYLINE=function(){var Y=this.consumeLine();if(Y!==void 0){if(Y!=="")throw new Error("Expected empty line");this.state="BODY_CHUNKHEAD"}},R.prototype.BODY_CHUNKTRAILERS=function(){var Y=this.consumeLine();Y!==void 0&&(Y?this.parseHeader(Y,this.trailers):(this.trailers.length&&this.userCall()(this[ce](this.trailers,"")),this.nextRequest()))},R.prototype.BODY_RAW=function(){this.userCall()(this[ke](this.chunk.slice(this.offset,this.end),0,this.end-this.offset)),this.offset=this.end},R.prototype.BODY_SIZED=function(){var Y=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[ke](this.chunk.slice(this.offset,this.offset+Y),0,Y)),this.offset+=Y,this.body_bytes-=Y,this.body_bytes||this.nextRequest()},["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(Y){var C=R["kOn"+Y];Object.defineProperty(R.prototype,"on"+Y,{get:function(){return this[C]},set:function(te){return this._compatMode0_11=!0,ae="CONNECT",this[C]=te}})});function It(Y){var C=new Error("Parse Error");return C.code=Y,C}var wt=V.HTTPParser,ir=ie.exports.Buffer,_r={request:wt.REQUEST||"request",response:wt.RESPONSE||"response"},Rr=function(Y){this._type=Y,this._parser=new wt(_r[Y]),this._complete=!1,this.headers={};var C=null,te=this;this._parser.onHeaderField=function(pe,Ee,Pe){C=pe.toString("utf8",Ee,Ee+Pe).toLowerCase()},this._parser.onHeaderValue=function(pe,Ee,Pe){var De=pe.toString("utf8",Ee,Ee+Pe);te.headers.hasOwnProperty(C)?te.headers[C]+=", "+De:te.headers[C]=De},this._parser.onHeadersComplete=this._parser[wt.kOnHeadersComplete]=function(pe,Ee,Pe,De,Ke,Ye){var Ze=arguments[0];if(typeof Ze=="object"&&(De=Ze.method,Ke=Ze.url,Ye=Ze.statusCode,Pe=Ze.headers),te.method=typeof De=="number"?Rr.METHODS[De]:De,te.statusCode=Ye,te.url=Ke,!!Pe){for(var Lt=0,Gt=Pe.length,rr,wr;Lt<Gt;Lt+=2)rr=Pe[Lt].toLowerCase(),wr=Pe[Lt+1],te.headers.hasOwnProperty(rr)?te.headers[rr]+=", "+wr:te.headers[rr]=wr;te._complete=!0}}};Rr.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var Hr=process.version?process.version.match(/[0-9]+/g).map(function(Y){return parseInt(Y,10)}):[];Hr[0]===0&&Hr[1]===12&&(Rr.METHODS[16]="REPORT",Rr.METHODS[17]="MKACTIVITY",Rr.METHODS[18]="CHECKOUT",Rr.METHODS[19]="MERGE",Rr.METHODS[20]="M-SEARCH",Rr.METHODS[21]="NOTIFY",Rr.METHODS[22]="SUBSCRIBE",Rr.METHODS[23]="UNSUBSCRIBE",Rr.METHODS[24]="PATCH",Rr.METHODS[25]="PURGE"),Rr.prototype.isComplete=function(){return this._complete},Rr.prototype.parse=function(Y){var C=this._parser.execute(Y,0,Y.length);if(typeof C!="number"){this.error=C,this._complete=!0;return}this._complete&&(this.body=C<Y.length?Y.slice(C):ir.alloc(0))};var Vr=Rr,Tr=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,$t=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,qt=/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/,Kt=new RegExp(Tr.source+"(?:=(?:"+Tr.source+"|"+qt.source+"))?"),nr=new RegExp(Tr.source+"(?: *; *"+Kt.source+")*","g"),dr=new RegExp("^"+nr.source+"(?: *, *"+nr.source+")*$"),Er=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,Mr=Object.prototype.hasOwnProperty,jr={parseHeader:function(Y){var C=new xr;if(Y===""||Y===void 0)return C;if(!dr.test(Y))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+Y);var te=Y.match(nr);return te.forEach(function(pe){var Ee=pe.match(new RegExp(Kt.source,"g")),Pe=Ee.shift(),De={};Ee.forEach(function(Ke){var Ye=Ke.match(Kt),Ze=Ye[1],Lt;Ye[2]!==void 0?Lt=Ye[2]:Ye[3]!==void 0?Lt=Ye[3].replace(/\\/g,""):Lt=!0,Er.test(Lt)&&(Lt=parseFloat(Lt)),Mr.call(De,Ze)?(De[Ze]=[].concat(De[Ze]),De[Ze].push(Lt)):De[Ze]=Lt},this),C.push(Pe,De)},this),C},serializeParams:function(Y,C){var te=[],pe=function(Pe,De){De instanceof Array?De.forEach(function(Ke){pe(Pe,Ke)}):De===!0?te.push(Pe):typeof De=="number"?te.push(Pe+"="+De):$t.test(De)?te.push(Pe+'="'+De.replace(/"/g,'\\"')+'"'):te.push(Pe+"="+De)};for(var Ee in C)pe(Ee,C[Ee]);return[Y].concat(te).join("; ")}},xr=function(){this._byName={},this._inOrder=[]};xr.prototype.push=function(Y,C){Mr.call(this._byName,Y)||(this._byName[Y]=[]),this._byName[Y].push(C),this._inOrder.push({name:Y,params:C})},xr.prototype.eachOffer=function(Y,C){for(var te=this._inOrder,pe=0,Ee=te.length;pe<Ee;pe++)Y.call(C,te[pe].name,te[pe].params)},xr.prototype.byName=function(Y){return this._byName[Y]||[]},xr.prototype.toArray=function(){return this._inOrder.slice()};var kn=jr,gn=function(Y){this._bufferSize=Y,this.clear()};gn.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0},gn.prototype.push=function(Y){var C=!1,te=!1;this._ringSize<this._bufferSize?C=this._tail===0:this._ringOffset===this._ringSize&&(C=!0,te=this._tail===0),C&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,te&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=Y,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize},gn.prototype.peek=function(){if(this.length!==0)return this._buffer[this._head]},gn.prototype.shift=function(){if(this.length!==0){var Y=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,this._ringOffset===0&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,Y}};var bn=gn,Tn=bn,yn=function(Y,C){this._session=Y,this._method=C,this._queue=new Tn(yn.QUEUE_SIZE),this._stopped=!1,this.pending=0};yn.QUEUE_SIZE=8,yn.prototype.call=function(Y,C,te,pe){if(!this._stopped){var Ee={error:Y,message:C,callback:te,context:pe,done:!1},Pe=!1,De=this;if(this._queue.push(Ee),Ee.error)return Ee.done=!0,this._stop(),this._flushQueue();var Ke=function(Ye,Ze){Pe^(Pe=!0)&&(Ye?(De._stop(),Ee.error=Ye,Ee.message=null):Ee.message=Ze,Ee.done=!0,De._flushQueue())};try{this._session[this._method](C,Ke)}catch(Ye){Ke(Ye)}}},yn.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0},yn.prototype._flushQueue=function(){for(var Y=this._queue,C;Y.length>0&&Y.peek().done;)C=Y.shift(),C.error?(this.pending=0,Y.clear()):this.pending-=1,C.callback.call(C.context,C.error,C.message)};var Xr=yn,Rn=bn,yr=function(){this._complete=!1,this._callbacks=new Rn(yr.QUEUE_SIZE)};yr.QUEUE_SIZE=4,yr.all=function(Y){var C=new yr,te=Y.length,pe=te;for(te===0&&C.done();pe--;)Y[pe].then(function(){te-=1,te===0&&C.done()});return C},yr.prototype.then=function(Y){this._complete?Y():this._callbacks.push(Y)},yr.prototype.done=function(){this._complete=!0;for(var Y=this._callbacks,C;C=Y.shift();)C()};var Wr=yr,Yr=Xr,vn=Wr,Ur=function(Y){this._ext=Y[0],this._session=Y[1],this._functors={incoming:new Yr(this._session,"processIncomingMessage"),outgoing:new Yr(this._session,"processOutgoingMessage")}};Ur.prototype.pending=function(Y){var C=this._functors[Y];C._stopped||(C.pending+=1)},Ur.prototype.incoming=function(Y,C,te,pe){this._exec("incoming",Y,C,te,pe)},Ur.prototype.outgoing=function(Y,C,te,pe){this._exec("outgoing",Y,C,te,pe)},Ur.prototype.close=function(){return this._closed=this._closed||new vn,this._doClose(),this._closed},Ur.prototype._exec=function(Y,C,te,pe,Ee){this._functors[Y].call(C,te,function(Pe,De){Pe&&(Pe.message=this._ext.name+": "+Pe.message),pe.call(Ee,Pe,De),this._doClose()},this)},Ur.prototype._doClose=function(){var Y=this._functors.incoming,C=this._functors.outgoing;!this._closed||Y.pending+C.pending!==0||(this._session&&this._session.close(),this._session=null,this._closed.done())};var Zr=Ur,Fr=Zr,tt=Wr,et=function(Y){this._cells=Y.map(function(C){return new Fr(C)}),this._stopped={incoming:!1,outgoing:!1}};et.prototype.processIncomingMessage=function(Y,C,te){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,Y,C,te)},et.prototype.processOutgoingMessage=function(Y,C,te){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,Y,C,te)},et.prototype.close=function(Y,C){this._stopped={incoming:!0,outgoing:!0};var te=this._cells.map(function(pe){return pe.close()});Y&&tt.all(te).then(function(){Y.call(C)})},et.prototype._loop=function(Y,C,te,pe,Ee,Pe,De){for(var Ke=this._cells,Ye=Ke.length,Ze=this;Ye--;)Ke[Ye].pending(Y);var Lt=function(Gt,rr,wr){if(Gt===te)return Pe.call(De,rr,wr);Ke[Gt][Y](rr,wr,function($r,ri){$r&&(Ze._stopped[Y]=!0),Lt(Gt+pe,$r,ri)})};Lt(C,null,Ee)};var dt=et,Bt=kn,Ct=dt,pr=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};pr.MESSAGE_OPCODES=[1,2];var Sr={add:function(Y){if(typeof Y.name!="string")throw new TypeError("extension.name must be a string");if(Y.type!=="permessage")throw new TypeError('extension.type must be "permessage"');if(typeof Y.rsv1!="boolean")throw new TypeError("extension.rsv1 must be true or false");if(typeof Y.rsv2!="boolean")throw new TypeError("extension.rsv2 must be true or false");if(typeof Y.rsv3!="boolean")throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(Y.name))throw new TypeError('An extension with name "'+Y.name+'" is already registered');this._byName[Y.name]=Y,this._inOrder.push(Y)},generateOffer:function(){var Y=[],C=[],te={};return this._inOrder.forEach(function(pe){var Ee=pe.createClientSession();if(Ee){var Pe=[pe,Ee];Y.push(Pe),te[pe.name]=Pe;var De=Ee.generateOffer();De=De?[].concat(De):[],De.forEach(function(Ke){C.push(Bt.serializeParams(pe.name,Ke))},this)}},this),this._sessions=Y,this._index=te,C.length>0?C.join(", "):null},activate:function(Y){var C=Bt.parseHeader(Y),te=[];C.eachOffer(function(pe,Ee){var Pe=this._index[pe];if(!Pe)throw new Error('Server sent an extension response for unknown extension "'+pe+'"');var De=Pe[0],Ke=Pe[1],Ye=this._reserved(De);if(Ye)throw new Error("Server sent two extension responses that use the RSV"+Ye[0]+' bit: "'+Ye[1]+'" and "'+De.name+'"');if(Ke.activate(Ee)!==!0)throw new Error("Server sent unacceptable extension parameters: "+Bt.serializeParams(pe,Ee));this._reserve(De),te.push(Pe)},this),this._sessions=te,this._pipeline=new Ct(te)},generateResponse:function(Y){var C=[],te=[],pe=Bt.parseHeader(Y);return this._inOrder.forEach(function(Ee){var Pe=pe.byName(Ee.name);if(!(Pe.length===0||this._reserved(Ee))){var De=Ee.createServerSession(Pe);De&&(this._reserve(Ee),C.push([Ee,De]),te.push(Bt.serializeParams(Ee.name,De.generateResponse())))}},this),this._sessions=C,this._pipeline=new Ct(C),te.length>0?te.join(", "):null},validFrameRsv:function(Y){var C={rsv1:!1,rsv2:!1,rsv3:!1},te;if(pr.MESSAGE_OPCODES.indexOf(Y.opcode)>=0)for(var pe=0,Ee=this._sessions.length;pe<Ee;pe++)te=this._sessions[pe][0],C.rsv1=C.rsv1||te.rsv1,C.rsv2=C.rsv2||te.rsv2,C.rsv3=C.rsv3||te.rsv3;return(C.rsv1||!Y.rsv1)&&(C.rsv2||!Y.rsv2)&&(C.rsv3||!Y.rsv3)},processIncomingMessage:function(Y,C,te){this._pipeline.processIncomingMessage(Y,C,te)},processOutgoingMessage:function(Y,C,te){this._pipeline.processOutgoingMessage(Y,C,te)},close:function(Y,C){if(!this._pipeline)return Y.call(C);this._pipeline.close(Y,C)},_reserve:function(Y){this._rsv1=this._rsv1||Y.rsv1&&Y.name,this._rsv2=this._rsv2||Y.rsv2&&Y.name,this._rsv3=this._rsv3||Y.rsv3&&Y.name},_reserved:function(Y){return this._rsv1&&Y.rsv1?[1,this._rsv1]:this._rsv2&&Y.rsv2?[2,this._rsv2]:this._rsv3&&Y.rsv3?[3,this._rsv3]:!1}};for(var un in Sr)pr.prototype[un]=Sr[un];var Ln=pr,In=function(){},Un={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(var Pr in Un)In.prototype[Pr]=Un[Pr];var Ir=In,si=ie.exports.Buffer,Dr=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},Bn={read:function(){return this.data=this.data||si.concat(this._chunks,this.length)},pushFrame:function(Y){this.rsv1=this.rsv1||Y.rsv1,this.rsv2=this.rsv2||Y.rsv2,this.rsv3=this.rsv3||Y.rsv3,this.opcode===null&&(this.opcode=Y.opcode),this._chunks.push(Y.payload),this.length+=Y.length}};for(var ai in Bn)Dr.prototype[ai]=Bn[ai];var xn=Dr,mn=ie.exports.Buffer,Wn=_.default,Yn=y.default,Ai=Ln,Ue=p,We=Ir,ze=xn,yt=function(Y,C,te){if(Ue.apply(this,arguments),this._extensions=new Ai,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},typeof this._protocols=="string"&&(this._protocols=this._protocols.split(/ *, */)),!!this._request){var pe=this._request.headers["sec-websocket-protocol"],Ee=this._protocols;pe!==void 0&&(typeof pe=="string"&&(pe=pe.split(/ *, */)),this.protocol=pe.filter(function(Pe){return Ee.indexOf(Pe)>=0})[0]),this.version="hybi-"+yt.VERSION}};Yn.inherits(yt,Ue),yt.VERSION="13",yt.mask=function(Y,C,te){if(!C||C.length===0)return Y;te=te||0;for(var pe=0,Ee=Y.length-te;pe<Ee;pe++)Y[te+pe]=Y[te+pe]^C[pe%4];return Y},yt.generateAccept=function(Y){var C=Wn.createHash("sha1");return C.update(Y+yt.GUID),C.digest("base64")},yt.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var tr={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(Y){return this._extensions.add(Y),!0},parse:function(Y){this._reader.put(Y);for(var C=!0;C;)switch(this._stage){case 0:C=this._reader.read(1),C&&this._parseOpcode(C[0]);break;case 1:C=this._reader.read(1),C&&this._parseLength(C[0]);break;case 2:C=this._reader.read(this._frame.lengthBytes),C&&this._parseExtendedLength(C);break;case 3:C=this._reader.read(4),C&&(this._stage=4,this._frame.maskingKey=C);break;case 4:C=this._reader.read(this._frame.length),C&&(this._stage=0,this._emitFrame(C));break;default:C=null}},text:function(Y){return this.readyState>1?!1:this.frame(Y,"text")},binary:function(Y){return this.readyState>1?!1:this.frame(Y,"binary")},ping:function(Y,C){return this.readyState>1?!1:(Y=Y||"",C&&(this._pingCallbacks[Y]=C),this.frame(Y,"ping"))},pong:function(Y){return this.readyState>1?!1:(Y=Y||"",this.frame(Y,"pong"))},close:function(Y,C){return Y=Y||"",C=C||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new Ue.CloseEvent(C,Y)),!0):this.readyState===1?(this.readyState=2,this._extensions.close(function(){this.frame(Y,"close",C)},this),!0):!1},frame:function(Y,C,te){if(this.readyState<=0)return this._queue([Y,C,te]);if(this.readyState>2)return!1;Y instanceof Array&&(Y=mn.from(Y)),typeof Y=="number"&&(Y=Y.toString());var pe=new ze,Ee=typeof Y=="string",Pe,De;pe.rsv1=pe.rsv2=pe.rsv3=!1,pe.opcode=this.OPCODES[C||(Ee?"text":"binary")],Pe=Ee?mn.from(Y,"utf8"):Y,te&&(De=Pe,Pe=mn.allocUnsafe(2+De.length),Pe.writeUInt16BE(te,0),De.copy(Pe,2)),pe.data=Pe;var Ke=function(Ye){var Ze=new We;Ze.final=!0,Ze.rsv1=Ye.rsv1,Ze.rsv2=Ye.rsv2,Ze.rsv3=Ye.rsv3,Ze.opcode=Ye.opcode,Ze.masked=!!this._masking,Ze.length=Ye.data.length,Ze.payload=Ye.data,Ze.masked&&(Ze.maskingKey=Wn.randomBytes(4)),this._sendFrame(Ze)};return this.MESSAGE_OPCODES.indexOf(pe.opcode)>=0?this._extensions.processOutgoingMessage(pe,function(Ye,Ze){if(Ye)return this._fail("extension_error",Ye.message);Ke.call(this,Ze)},this):Ke.call(this,pe),!0},_sendFrame:function(Y){var C=Y.length,te=C<=125?2:C<=65535?4:10,pe=te+(Y.masked?4:0),Ee=mn.allocUnsafe(pe+C),Pe=Y.masked?this.MASK:0;Ee[0]=(Y.final?this.FIN:0)|(Y.rsv1?this.RSV1:0)|(Y.rsv2?this.RSV2:0)|(Y.rsv3?this.RSV3:0)|Y.opcode,C<=125?Ee[1]=Pe|C:C<=65535?(Ee[1]=Pe|126,Ee.writeUInt16BE(C,2)):(Ee[1]=Pe|127,Ee.writeUInt32BE(Math.floor(C/4294967296),2),Ee.writeUInt32BE(C%4294967296,6)),Y.payload.copy(Ee,pe),Y.masked&&(Y.maskingKey.copy(Ee,te),yt.mask(Ee,Y.maskingKey,pe)),this._write(Ee)},_handshakeResponse:function(){var Y=this._request.headers["sec-websocket-key"],C=this._request.headers["sec-websocket-version"];if(C!==yt.VERSION)throw new Error("Unsupported WebSocket version: "+C);if(typeof Y!="string")throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",yt.generateAccept(Y)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var te=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);te&&this._headers.set("Sec-WebSocket-Extensions",te);var pe="HTTP/1.1 101 Switching Protocols",Ee=[pe,this._headers.toString(),""];return mn.from(Ee.join(`\r
`),"utf8")},_shutdown:function(Y,C,te){delete this._frame,delete this._message,this._stage=5;var pe=this.readyState===1;this.readyState=2,this._extensions.close(function(){pe&&this.frame(C,"close",Y),this.readyState=3,te&&this.emit("error",new Error(C)),this.emit("close",new Ue.CloseEvent(Y,C))},this)},_fail:function(Y,C){this.readyState>1||this._shutdown(this.ERRORS[Y],C,!0)},_parseOpcode:function(Y){var C=[this.RSV1,this.RSV2,this.RSV3].map(function(pe){return(Y&pe)===pe}),te=this._frame=new We;if(te.final=(Y&this.FIN)===this.FIN,te.rsv1=C[0],te.rsv2=C[1],te.rsv3=C[2],te.opcode=Y&this.OPCODE,this._stage=1,!this._extensions.validFrameRsv(te))return this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(te.rsv1?1:0)+", reserved2 = "+(te.rsv2?1:0)+", reserved3 = "+(te.rsv3?1:0));if(this.OPCODE_CODES.indexOf(te.opcode)<0)return this._fail("protocol_error","Unrecognized frame opcode: "+te.opcode);if(this.MESSAGE_OPCODES.indexOf(te.opcode)<0&&!te.final)return this._fail("protocol_error","Received fragmented control frame: opcode = "+te.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(te.opcode)>=0)return this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished")},_parseLength:function(Y){var C=this._frame;if(C.masked=(Y&this.MASK)===this.MASK,C.length=Y&this.LENGTH,C.length>=0&&C.length<=125){if(this._stage=C.masked?3:4,!this._checkFrameLength())return}else this._stage=2,C.lengthBytes=C.length===126?2:8;if(this._requireMasking&&!C.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(Y){var C=this._frame;if(C.length=this._readUInt(Y),this._stage=C.masked?3:4,this.MESSAGE_OPCODES.indexOf(C.opcode)<0&&C.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+C.length);this._checkFrameLength()},_checkFrameLength:function(){var Y=this._message?this._message.length:0;return Y+this._frame.length>this._maxLength?(this._fail("too_large","WebSocket frame length too large"),!1):!0},_emitFrame:function(Y){var C=this._frame,te=C.payload=yt.mask(Y,C.maskingKey),pe=C.opcode,Ee,Pe,De,Ke,Ye;if(delete this._frame,pe===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(C)}if((pe===this.OPCODES.text||pe===this.OPCODES.binary)&&(this._message=new ze,this._message.pushFrame(C)),C.final&&this.MESSAGE_OPCODES.indexOf(pe)>=0)return this._emitMessage(this._message);pe===this.OPCODES.close&&(Pe=te.length>=2?te.readUInt16BE(0):null,De=te.length>2?this._encode(te.slice(2)):null,te.length!==0&&!(Pe!==null&&Pe>=this.MIN_RESERVED_ERROR&&Pe<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(Pe)<0&&(Pe=this.ERRORS.protocol_error),(te.length>125||te.length>2&&!De)&&(Pe=this.ERRORS.protocol_error),this._shutdown(Pe||this.DEFAULT_ERROR_CODE,De||"")),pe===this.OPCODES.ping&&(this.frame(te,"pong"),this.emit("ping",new Ue.PingEvent(te.toString()))),pe===this.OPCODES.pong&&(Ke=this._pingCallbacks,Ee=this._encode(te),Ye=Ke[Ee],delete Ke[Ee],Ye&&Ye(),this.emit("pong",new Ue.PongEvent(te.toString())))},_emitMessage:function(C){var C=this._message;C.read(),delete this._message,this._extensions.processIncomingMessage(C,function(te,pe){if(te)return this._fail("extension_error",te.message);var Ee=pe.data;if(pe.opcode===this.OPCODES.text&&(Ee=this._encode(Ee)),Ee===null)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new Ue.MessageEvent(Ee))},this)},_encode:function(Y){try{var C=Y.toString("binary",0,Y.length);if(!this.UTF8_MATCH.test(C))return null}catch{}return Y.toString("utf8",0,Y.length)},_readUInt:function(Y){return Y.length===2?Y.readUInt16BE(0):Y.readUInt32BE(0)*4294967296+Y.readUInt32BE(4)}};for(var er in tr)yt.prototype[er]=tr[er];var fr=yt,sr=ie.exports.Buffer,Qr=I.default.Stream,Pn=S.default,Qn=y.default,Sn=p,dn=Ae,$n=Vr,On={"ws:":80,"wss:":443},qn=function(Y,C,te){this._client=Y,this._http=new $n("response"),this._origin=typeof Y.url=="object"?Y.url:Pn.parse(Y.url),this._url=typeof C=="object"?C:Pn.parse(C),this._options=te||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new dn,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var pe=this._url.auth&&sr.from(this._url.auth,"utf8").toString("base64");pe&&this._headers.set("Proxy-Authorization","Basic "+pe)};Qn.inherits(qn,Qr);var vr={setHeader:function(Y,C){return this._state!==0?!1:(this._headers.set(Y,C),!0)},start:function(){if(this._state!==0)return!1;this._state=1;var Y=this._origin,C=Y.port||On[Y.protocol],te="CONNECT "+Y.hostname+":"+C+" HTTP/1.1",pe=[te,this._headers.toString(),""];return this.emit("data",sr.from(pe.join(`\r
`),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(Y){if(!this.writable)return!1;if(this._http.parse(Y),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this.statusCode===200)this.emit("connect",new Sn.ConnectEvent);else{var C="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(C))}return this.end(),!this._paused},end:function(Y){this.writable&&(Y!==void 0&&this.write(Y),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(var Dn in vr)qn.prototype[Dn]=vr[Dn];var Lr=qn,mi=ie.exports.Buffer,bi=_.default,zi=S.default,$i=y.default,Ao=Vr,ki=p,ji=fr,yi=Lr,Cn=function(Y,C){this.version="hybi-"+ji.VERSION,ji.call(this,null,Y,C),this.readyState=-1,this._key=Cn.generateKey(),this._accept=ji.generateAccept(this._key),this._http=new Ao("response");var te=zi.parse(this.url),pe=te.auth&&mi.from(te.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(te.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(te.pathname||"/")+(te.search||""),this._headers.set("Host",te.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",ji.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),pe&&this._headers.set("Authorization","Basic "+pe)};$i.inherits(Cn,ji),Cn.generateKey=function(){return bi.randomBytes(16).toString("base64")};var ni={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(Y,C){return new yi(this,Y,C)},start:function(){return this.readyState!==-1?!1:(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(Y){if(this.readyState!==3){if(this.readyState>0)return ji.prototype.parse.call(this,Y);this._http.parse(Y),this._http.isComplete()&&(this._validateHandshake(),this.readyState!==3&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var Y=this._extensions.generateOffer();Y&&this._headers.set("Sec-WebSocket-Extensions",Y);var C="GET "+this._pathname+" HTTP/1.1",te=[C,this._headers.toString(),""];return mi.from(te.join(`\r
`),"utf8")},_failHandshake:function(Y){Y="Error during WebSocket handshake: "+Y,this.readyState=3,this.emit("error",new Error(Y)),this.emit("close",new ki.CloseEvent(this.ERRORS.protocol_error,Y))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var Y=this._http.headers,C=Y.upgrade||"",te=Y.connection||"",pe=Y["sec-websocket-accept"]||"",Ee=Y["sec-websocket-protocol"]||"";if(C==="")return this._failHandshake("'Upgrade' header is missing");if(C.toLowerCase()!=="websocket")return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(te==="")return this._failHandshake("'Connection' header is missing");if(te.toLowerCase()!=="upgrade")return this._failHandshake("'Connection' header value is not 'Upgrade'");if(pe!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,Ee!==""){if(this._protocols.indexOf(Ee)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=Ee}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(Pe){return this._failHandshake(Pe.message)}}};for(var Oi in ni)Cn.prototype[Oi]=ni[Oi];var Li=Cn,Xn=ie.exports.Buffer,vi=p,Oo=y.default,lo=function(Y,C,te){vi.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};Oo.inherits(lo,vi);var Gn={close:function(){return this.readyState===3?!1:(this.readyState=3,this.emit("close",new vi.CloseEvent(null,null)),!0)},parse:function(Y){this.readyState>1||(this._reader.put(Y),this._reader.eachByte(function(C){var te;switch(this._stage){case-1:this._body.push(C),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(C);break;case 1:if(this._length=(C&127)+128*this._length,this._closing&&this._length===0)return this.close();(C&128)!==128&&(this._length===0?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(C===255)this._stage=0,te=Xn.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new vi.MessageEvent(te));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(C),this._buffer.length>this._maxLength)return this.close();break}},this))},frame:function(Y){if(this.readyState===0)return this._queue([Y]);if(this.readyState>1)return!1;typeof Y!="string"&&(Y=Y.toString());var C=Xn.byteLength(Y),te=Xn.allocUnsafe(C+2);return te[0]=0,te.write(Y,1),te[te.length-1]=255,this._write(te),!0},_handshakeResponse:function(){var Y="HTTP/1.1 101 Web Socket Protocol Handshake",C=[Y,this._headers.toString(),""];return Xn.from(C.join(`\r
`),"utf8")},_parseLeadingByte:function(Y){(Y&128)===128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(var yo in Gn)lo.prototype[yo]=Gn[yo];var wo=lo,Zn=ie.exports.Buffer,qi=p,Ci=wo,li=_.default,ui=y.default,Qe=function(Y){return parseInt((Y.match(/[0-9]/g)||[]).join(""),10)},Nt=function(Y){return(Y.match(/ /g)||[]).length},Dt=function(Y,C,te){Ci.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};ui.inherits(Dt,Ci);var Ar={BODY_SIZE:8,start:function(){return Ci.prototype.start.call(this)?(this._started=!0,this._sendHandshakeBody(),!0):!1},close:function(){return this.readyState===3?!1:(this.readyState===1&&this._write(Zn.from([255,0])),this.readyState=3,this.emit("close",new qi.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var Ke=this._request.headers,Y=Ke["sec-websocket-key1"],C=Ke["sec-websocket-key2"];if(!Y)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!C)throw new Error("Missing required header: Sec-WebSocket-Key2");var te=Qe(Y),pe=Nt(Y),Ee=Qe(C),Pe=Nt(C);if(te%pe!==0||Ee%Pe!==0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[te/pe,Ee/Pe];var De="HTTP/1.1 101 WebSocket Protocol Handshake",Ke=[De,this._headers.toString(),""];return Zn.from(Ke.join(`\r
`),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var Y=li.createHash("md5"),C=Zn.allocUnsafe(8+this.BODY_SIZE);return C.writeUInt32BE(this._keyValues[0],0),C.writeUInt32BE(this._keyValues[1],4),Zn.from(this._body).copy(C,8,0,this.BODY_SIZE),Y.update(C),Zn.from(Y.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var Y=this._handshakeSignature();Y&&(this._write(Y),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(Y){if(Y!==255)return Ci.prototype._parseLeadingByte.call(this,Y);this._closing=!0,this._length=0,this._stage=1}};for(var Hn in Ar)Dt.prototype[Hn]=Ar[Hn];var Jn=Dt,di=y.default,ei=Vr,n=p,b=wo,T=Jn,Ne=fr,ur=function(Y){n.call(this,null,null,Y),this._http=new ei("request")};di.inherits(ur,n);var Pi={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(Y){if(this._delegate)return this._delegate.parse(Y);if(this._http.parse(Y),!!this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var C=this;this._delegate=ur.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(te){this._delegate.on(te,function(pe){C.emit(te,pe)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new n.ConnectEvent)}},_open:function(){this.__queue.forEach(function(Y){this._delegate[Y[0]].apply(this._delegate,Y[1])},this),this.__queue=[]}};["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(Y){Pi[Y]=function(){return this._delegate?this._delegate[Y].apply(this._delegate,arguments):(this.__queue.push([Y,arguments]),!0)}});for(var Co in Pi)ur.prototype[Co]=Pi[Co];ur.isSecureRequest=function(Y){if(Y.connection&&Y.connection.authorized!==void 0||Y.socket&&Y.socket.secure)return!0;var C=Y.headers;return C?C.https==="on"||C["x-forwarded-ssl"]==="on"||C["x-forwarded-scheme"]==="https"||C["x-forwarded-proto"]==="https":!1},ur.determineUrl=function(Y){var C=this.isSecureRequest(Y)?"wss:":"ws:";return C+"//"+Y.headers.host+Y.url},ur.http=function(Y,C){C=C||{},C.requireMasking===void 0&&(C.requireMasking=!0);var te=Y.headers,pe=te["sec-websocket-version"],Ee=te["sec-websocket-key"],Pe=te["sec-websocket-key1"],De=te["sec-websocket-key2"],Ke=this.determineUrl(Y);return pe||Ee?new Ne(Y,Ke,C):Pe||De?new T(Y,Ke,C):new b(Y,Ke,C)};var Fi=ur,uo=p,Ps=Li,eo=Fi,ql={client:function(Y,C){return C=C||{},C.masking===void 0&&(C.masking=!0),new Ps(Y,C)},server:function(Y){return Y=Y||{},Y.requireMasking===void 0&&(Y.requireMasking=!0),new eo(Y)},http:function(){return eo.http.apply(eo,arguments)},isSecureRequest:function(Y){return eo.isSecureRequest(Y)},isWebSocket:function(Y){return uo.isWebSocket(Y)},validateOptions:function(Y,C){uo.validateOptions(Y,C)}},Xo=ql,Mi=function(Y,C){this.type=Y;for(var te in C)this[te]=C[te]};Mi.prototype.initEvent=function(Y,C,te){this.type=Y,this.bubbles=C,this.cancelable=te},Mi.prototype.stopPropagation=function(){},Mi.prototype.preventDefault=function(){},Mi.CAPTURING_PHASE=1,Mi.AT_TARGET=2,Mi.BUBBLING_PHASE=3;var Uo=Mi,ds=Uo,ps={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(Y,C,te){this.on(Y,C)},removeEventListener:function(Y,C,te){this.removeListener(Y,C)},dispatchEvent:function(Y){Y.target=Y.currentTarget=this,Y.eventPhase=ds.AT_TARGET,this["on"+Y.type]&&this["on"+Y.type](Y),this.emit(Y.type,Y)}},fs=ps,ha=I.default.Stream,os=y.default,Ns=Xo,Hs=fs,Gi=Uo,ii=function(Y){Y=Y||{},Ns.validateOptions(Y,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var C=Y.headers;if(C)for(var te in C)this._driver.setHeader(te,C[te]);var pe=Y.extensions;pe&&[].concat(pe).forEach(this._driver.addExtension,this._driver),this._ping=Y.ping,this._pingId=0,this.readyState=ii.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var Ee=this;this._driver.on("open",function(Pe){Ee._open()}),this._driver.on("message",function(Pe){Ee._receiveMessage(Pe.data)}),this._driver.on("close",function(Pe){Ee._beginClose(Pe.reason,Pe.code)}),this._driver.on("error",function(Pe){Ee._emitError(Pe.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){Ee.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){Ee._pingId+=1,Ee.ping(Ee._pingId.toString())},this._ping*1e3)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};os.inherits(ii,ha),ii.CONNECTING=0,ii.OPEN=1,ii.CLOSING=2,ii.CLOSED=3,ii.CLOSE_TIMEOUT=3e4;var Ks={write:function(Y){return this.send(Y)},end:function(Y){Y!==void 0&&this.send(Y),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(Y){return this.readyState>ii.OPEN?!1:(Y instanceof Buffer||(Y=String(Y)),this._driver.messages.write(Y))},ping:function(Y,C){return this.readyState>ii.OPEN?!1:this._driver.ping(Y,C)},close:function(Y,C){if(Y===void 0&&(Y=1e3),C===void 0&&(C=""),Y!==1e3&&(Y<3e3||Y>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+Y+" is neither.");if(this.readyState<ii.CLOSING){var te=this;this._closeTimer=setTimeout(function(){te._beginClose("",1006)},ii.CLOSE_TIMEOUT)}this.readyState!==ii.CLOSED&&(this.readyState=ii.CLOSING),this._driver.close(C,Y)},_configureStream:function(){var Y=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(C){this._stream.on(C,function(){Y._finalizeClose()})},this),this._stream.on("error",function(C){Y._emitError("Network error: "+Y.url+": "+C.message),Y._finalizeClose()})},_open:function(){if(this.readyState===ii.CONNECTING){this.readyState=ii.OPEN,this.protocol=this._driver.protocol||"";var Y=new Gi("open");Y.initEvent("open",!1,!1),this.dispatchEvent(Y)}},_receiveMessage:function(Y){if(this.readyState>ii.OPEN)return!1;this.readable&&this.emit("data",Y);var C=new Gi("message",{data:Y});C.initEvent("message",!1,!1),this.dispatchEvent(C)},_emitError:function(Y){if(!(this.readyState>=ii.CLOSING)){var C=new Gi("error",{message:Y});C.initEvent("error",!1,!1),this.dispatchEvent(C)}},_beginClose:function(Y,C){this.readyState!==ii.CLOSED&&(this.readyState=ii.CLOSING,this._closeParams=[Y,C],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==ii.CLOSED){this.readyState=ii.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var Y=this._closeParams?this._closeParams[0]:"",C=this._closeParams?this._closeParams[1]:1006,te=new Gi("close",{code:C,reason:Y});te.initEvent("close",!1,!1),this.dispatchEvent(te)}}};for(var Ws in Ks)ii.prototype[Ws]=Ks[Ws];for(var xs in Hs)ii.prototype[xs]=Hs[xs];var Vi=ii,to=y.default,ga=j.default,Zo=K.default,ge=S.default,se=Xo,me=Vi,Oe={"http:":80,"https:":443,"ws:":80,"wss:":443},Me=["https:","wss:"],Xe=function(Y,C,te){te=te||{},this.url=Y,this._driver=se.client(this.url,{maxLength:te.maxLength,protocols:C}),["open","error"].forEach(function(rr){this._driver.on(rr,function(){Gt.headers=Gt._driver.headers,Gt.statusCode=Gt._driver.statusCode})},this);var pe=te.proxy||{},Ee=ge.parse(pe.origin||this.url),Pe=Ee.port||Oe[Ee.protocol],De=Me.indexOf(Ee.protocol)>=0,Ke=function(){Gt._onConnect()},Ye=te.net||{},Ze=te.tls||{},Lt=pe.origin?pe.tls||{}:Ze,Gt=this;Ye.host=Lt.host=Ee.hostname,Ye.port=Lt.port=Pe,Ze.ca=Ze.ca||te.ca,Lt.servername=Lt.servername||Ee.hostname,this._stream=De?Zo.connect(Lt,Ke):ga.connect(Ye,Ke),pe.origin&&this._configureProxy(pe,Ze),me.call(this,te)};to.inherits(Xe,me),Xe.prototype._onConnect=function(){var Y=this._proxy||this._driver;Y.start()},Xe.prototype._configureProxy=function(Y,C){var te=ge.parse(this.url),pe=Me.indexOf(te.protocol)>=0,Ee=this,Pe;if(this._proxy=this._driver.proxy(Y.origin),Y.headers)for(Pe in Y.headers)this._proxy.setHeader(Pe,Y.headers[Pe]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(pe){var De={socket:Ee._stream,servername:te.hostname};for(Pe in C)De[Pe]=C[Pe];Ee._stream=Zo.connect(De),Ee._configureStream()}Ee._driver.io.pipe(Ee._stream),Ee._stream.pipe(Ee._driver.io),Ee._driver.start()}),this._proxy.on("error",function(De){Ee._driver.emit("error",De)})};var pt=Xe,ar=I.default.Stream,pn=y.default,Kr=Xo,Jr=Ae,Nn=Vi,ci=fs,Ti=Uo,Ni=function(Y,C,te){this.writable=!0,te=te||{},this._stream=C.socket,this._ping=te.ping||this.DEFAULT_PING,this._retry=te.retry||this.DEFAULT_RETRY;var pe=Kr.isSecureRequest(Y)?"https:":"http:";this.url=pe+"//"+Y.headers.host+Y.url,this.lastEventId=Y.headers["last-event-id"]||"",this.readyState=Nn.CONNECTING;var Ee=new Jr,Pe=this;if(te.headers)for(var De in te.headers)Ee.set(De,te.headers[De]);if(!(!this._stream||!this._stream.writable)){process.nextTick(function(){Pe._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var Ke=`HTTP/1.1 200 OK\r
Content-Type: text/event-stream\r
Cache-Control: no-cache, no-store\r
Connection: close\r
`+Ee.toString()+`\r
retry: `+Math.floor(this._retry*1e3)+`\r
\r
`;this._write(Ke),this._stream.on("drain",function(){Pe.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){Pe.ping()},this._ping*1e3)),["error","end"].forEach(function(Ye){Pe._stream.on(Ye,function(){Pe.close()})})}};pn.inherits(Ni,ar),Ni.isEventSource=function(Y){if(Y.method!=="GET")return!1;var C=(Y.headers.accept||"").split(/\s*,\s*/);return C.indexOf("text/event-stream")>=0};var es={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(Y){if(!this.writable)return!1;try{return this._stream.write(Y,"utf8")}catch{return!1}},_open:function(){if(this.readyState===Nn.CONNECTING){this.readyState=Nn.OPEN;var Y=new Ti("open");Y.initEvent("open",!1,!1),this.dispatchEvent(Y)}},write:function(Y){return this.send(Y)},end:function(Y){Y!==void 0&&this.write(Y),this.close()},send:function(Y,C){if(this.readyState>Nn.OPEN)return!1;Y=String(Y).replace(/(\r\n|\r|\n)/g,"$1data: "),C=C||{};var te="";return C.event&&(te+="event: "+C.event+`\r
`),C.id&&(te+="id: "+C.id+`\r
`),te+="data: "+Y+`\r
\r
`,this._write(te)},ping:function(){return this._write(`:\r
\r
`)},close:function(){if(this.readyState>Nn.OPEN)return!1;this.readyState=Nn.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var Y=new Ti("close");return Y.initEvent("close",!1,!1),this.dispatchEvent(Y),!0}};for(var ma in es)Ni.prototype[ma]=es[ma];for(var kc in ci)Ni.prototype[kc]=ci[kc];var Kd=Ni,Wd=y.default,Js=Xo,Jd=Vi,zs=function(Y,C,te,pe,Ee){Ee=Ee||{},this._stream=C,this._driver=Js.http(Y,{maxLength:Ee.maxLength,protocols:pe});var Pe=this;if(!(!this._stream||!this._stream.writable)){if(!this._stream.readable)return this._stream.end();var De=function(){Pe._stream.removeListener("data",De)};this._stream.on("data",De),Jd.call(this,Ee),process.nextTick(function(){Pe._driver.start(),Pe._driver.io.write(te)})}};Wd.inherits(zs,Jd),zs.isWebSocket=function(Y){return Js.isWebSocket(Y)},zs.validateOptions=function(Y,C){Js.validateOptions(Y,C)},zs.WebSocket=zs,zs.Client=pt,zs.EventSource=Kd;var Wp=zs,jc={};const zd=(Y,C)=>C.some(te=>Y instanceof te);let $a,Ga;function Jp(){return $a||($a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nu(){return Ga||(Ga=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yd=new WeakMap,xu=new WeakMap,Du=new WeakMap,Fl=new WeakMap,ku=new WeakMap;function Qd(Y){const C=new Promise((te,pe)=>{const Ee=()=>{Y.removeEventListener("success",Pe),Y.removeEventListener("error",De)},Pe=()=>{te(hs(Y.result)),Ee()},De=()=>{pe(Y.error),Ee()};Y.addEventListener("success",Pe),Y.addEventListener("error",De)});return C.then(te=>{te instanceof IDBCursor&&Yd.set(te,Y)}).catch(()=>{}),ku.set(C,Y),C}function Xd(Y){if(xu.has(Y))return;const C=new Promise((te,pe)=>{const Ee=()=>{Y.removeEventListener("complete",Pe),Y.removeEventListener("error",De),Y.removeEventListener("abort",De)},Pe=()=>{te(),Ee()},De=()=>{pe(Y.error||new DOMException("AbortError","AbortError")),Ee()};Y.addEventListener("complete",Pe),Y.addEventListener("error",De),Y.addEventListener("abort",De)});xu.set(Y,C)}let Lc={get(Y,C,te){if(Y instanceof IDBTransaction){if(C==="done")return xu.get(Y);if(C==="objectStoreNames")return Y.objectStoreNames||Du.get(Y);if(C==="store")return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return hs(Y[C])},set(Y,C,te){return Y[C]=te,!0},has(Y,C){return Y instanceof IDBTransaction&&(C==="done"||C==="store")?!0:C in Y}};function zp(Y){Lc=Y(Lc)}function Yp(Y){return Y===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(C,...te){const pe=Y.call(Po(this),C,...te);return Du.set(pe,C.sort?C.sort():[C]),hs(pe)}:Nu().includes(Y)?function(...C){return Y.apply(Po(this),C),hs(Yd.get(this))}:function(...C){return hs(Y.apply(Po(this),C))}}function Qp(Y){return typeof Y=="function"?Yp(Y):(Y instanceof IDBTransaction&&Xd(Y),zd(Y,Jp())?new Proxy(Y,Lc):Y)}function hs(Y){if(Y instanceof IDBRequest)return Qd(Y);if(Fl.has(Y))return Fl.get(Y);const C=Qp(Y);return C!==Y&&(Fl.set(Y,C),ku.set(C,Y)),C}const Po=Y=>ku.get(Y);function Ml(Y,C,{blocked:te,upgrade:pe,blocking:Ee,terminated:Pe}={}){const De=indexedDB.open(Y,C),Ke=hs(De);return pe&&De.addEventListener("upgradeneeded",Ye=>{pe(hs(De.result),Ye.oldVersion,Ye.newVersion,hs(De.transaction),Ye)}),te&&De.addEventListener("blocked",Ye=>te(Ye.oldVersion,Ye.newVersion,Ye)),Ke.then(Ye=>{Pe&&Ye.addEventListener("close",()=>Pe()),Ee&&Ye.addEventListener("versionchange",Ze=>Ee(Ze.oldVersion,Ze.newVersion,Ze))}).catch(()=>{}),Ke}function Zd(Y,{blocked:C}={}){const te=indexedDB.deleteDatabase(Y);return C&&te.addEventListener("blocked",pe=>C(pe.oldVersion,pe)),hs(te).then(()=>{})}const ep=["get","getKey","getAll","getAllKeys","count"],tp=["put","add","delete","clear"],ju=new Map;function Lu(Y,C){if(!(Y instanceof IDBDatabase&&!(C in Y)&&typeof C=="string"))return;if(ju.get(C))return ju.get(C);const te=C.replace(/FromIndex$/,""),pe=C!==te,Ee=tp.includes(te);if(!(te in(pe?IDBIndex:IDBObjectStore).prototype)||!(Ee||ep.includes(te)))return;const Pe=async function(De,...Ke){const Ye=this.transaction(De,Ee?"readwrite":"readonly");let Ze=Ye.store;return pe&&(Ze=Ze.index(Ke.shift())),(await Promise.all([Ze[te](...Ke),Ee&&Ye.done]))[0]};return ju.set(C,Pe),Pe}zp(Y=>({...Y,get:(C,te,pe)=>Lu(C,te)||Y.get(C,te,pe),has:(C,te)=>!!Lu(C,te)||Y.has(C,te)}));var Xp=Object.freeze({__proto__:null,deleteDB:Zd,openDB:Ml,unwrap:Po,wrap:hs}),Zp=P(Xp);(function(Y){Object.defineProperty(Y,"__esModule",{value:!0});var C=U.default,te=H.default,pe=J.default,Ee=Zp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(cr){this.container=cr}getPlatformInfoString(){return this.container.getProviders().map(gr=>{if(De(gr)){const hn=gr.getImmediate();return`${hn.library}/${hn.version}`}else return null}).filter(gr=>gr).join(" ")}}function De(br){const cr=br.getComponent();return cr?.type==="VERSION"}const Ke="@firebase/app",Ye="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze=new te.Logger("@firebase/app"),Lt="@firebase/app-compat",Gt="@firebase/analytics-compat",rr="@firebase/analytics",wr="@firebase/app-check-compat",$r="@firebase/app-check",ri="@firebase/auth",mo="@firebase/auth-compat",jl="@firebase/database",Nc="@firebase/data-connect",Ud="@firebase/database-compat",Of="@firebase/functions",ym="@firebase/functions-compat",vm="@firebase/installations",_m="@firebase/installations-compat",Em="@firebase/messaging",bm="@firebase/messaging-compat",Tm="@firebase/performance",Sm="@firebase/performance-compat",Am="@firebase/remote-config",Om="@firebase/remote-config-compat",wm="@firebase/storage",Rm="@firebase/storage-compat",Im="@firebase/firestore",Cm="@firebase/ai",Pm="@firebase/firestore-compat",Nm="firebase",xm="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="[DEFAULT]",Dm={[Ke]:"fire-core",[Lt]:"fire-core-compat",[rr]:"fire-analytics",[Gt]:"fire-analytics-compat",[$r]:"fire-app-check",[wr]:"fire-app-check-compat",[ri]:"fire-auth",[mo]:"fire-auth-compat",[jl]:"fire-rtdb",[Nc]:"fire-data-connect",[Ud]:"fire-rtdb-compat",[Of]:"fire-fn",[ym]:"fire-fn-compat",[vm]:"fire-iid",[_m]:"fire-iid-compat",[Em]:"fire-fcm",[bm]:"fire-fcm-compat",[Tm]:"fire-perf",[Sm]:"fire-perf-compat",[Am]:"fire-rc",[Om]:"fire-rc-compat",[wm]:"fire-gcs",[Rm]:"fire-gcs-compat",[Im]:"fire-fst",[Pm]:"fire-fst-compat",[Cm]:"fire-vertex","fire-js":"fire-js",[Nm]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new Map,xc=new Map,Dc=new Map;function wf(br,cr){try{br.container.addComponent(cr)}catch(gr){Ze.debug(`Component ${cr.name} failed to register with FirebaseApp ${br.name}`,gr)}}function km(br,cr){br.container.addOrOverwriteComponent(cr)}function Kp(br){const cr=br.name;if(Dc.has(cr))return Ze.debug(`There were multiple attempts to register component ${cr}.`),!1;Dc.set(cr,br);for(const gr of Ll.values())wf(gr,br);for(const gr of xc.values())wf(gr,br);return!0}function uh(br,cr){const gr=br.container.getProvider("heartbeat").getImmediate({optional:!0});return gr&&gr.triggerHeartbeat(),br.container.getProvider(cr)}function jm(br,cr,gr=Bd){uh(br,cr).clearInstance(gr)}function ch(br){return br.options!==void 0}function Lm(br){return br==null?!1:br.settings!==void 0}function qm(){Dc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new pe.ErrorFactory("app","Firebase",Fm);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(cr,gr,hn){this._isDeleted=!1,this._options=Object.assign({},cr),this._config=Object.assign({},gr),this._name=gr.name,this._automaticDataCollectionEnabled=gr.automaticDataCollectionEnabled,this._container=hn,this.container.addComponent(new C.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(cr){this.checkDestroyed(),this._automaticDataCollectionEnabled=cr}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(cr){this._isDeleted=cr}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(br,cr){const gr=pe.base64Decode(br.split(".")[1]);if(gr===null){console.error(`FirebaseServerApp ${cr} is invalid: second part could not be parsed.`);return}if(JSON.parse(gr).exp===void 0){console.error(`FirebaseServerApp ${cr} is invalid: expiration claim could not be parsed`);return}const Vn=JSON.parse(gr).exp*1e3,Ei=new Date().getTime();Vn-Ei<=0&&console.error(`FirebaseServerApp ${cr} is invalid: the token has expired.`)}class Mm extends dh{constructor(cr,gr,hn,Vn){const Ei=gr.automaticDataCollectionEnabled!==void 0?gr.automaticDataCollectionEnabled:!0,ao={name:hn,automaticDataCollectionEnabled:Ei};if(cr.apiKey!==void 0)super(cr,ao,Vn);else{const Cs=cr;super(Cs.options,ao,Vn)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:Ei},gr),this._serverConfig.authIdToken&&ph(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&ph(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,gr.releaseOnDeref=void 0,$d(Ke,Ye,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(cr){this.isDeleted||(this._refCount++,cr!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(cr,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){hh(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Is.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=xm;function fh(br,cr={}){let gr=br;typeof cr!="object"&&(cr={name:cr});const hn=Object.assign({name:Bd,automaticDataCollectionEnabled:!0},cr),Vn=hn.name;if(typeof Vn!="string"||!Vn)throw Is.create("bad-app-name",{appName:String(Vn)});if(gr||(gr=pe.getDefaultAppConfig()),!gr)throw Is.create("no-options");const Ei=Ll.get(Vn);if(Ei){if(pe.deepEqual(gr,Ei.options)&&pe.deepEqual(hn,Ei.config))return Ei;throw Is.create("duplicate-app",{appName:Vn})}const ao=new C.ComponentContainer(Vn);for(const Hd of Dc.values())ao.addComponent(Hd);const Cs=new dh(gr,hn,ao);return Ll.set(Vn,Cs),Cs}function Um(br,cr){if(pe.isBrowser()&&!pe.isWebWorker())throw Is.create("invalid-server-app-environment");cr.automaticDataCollectionEnabled===void 0&&(cr.automaticDataCollectionEnabled=!0);let gr;ch(br)?gr=br.options:gr=br;const hn=Object.assign(Object.assign({},cr),gr);hn.releaseOnDeref!==void 0&&delete hn.releaseOnDeref;const Vn=If=>[...If].reduce((ry,ny)=>Math.imul(31,ry)+ny.charCodeAt(0)|0,0);if(cr.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Is.create("finalization-registry-not-supported",{});const Ei=""+Vn(JSON.stringify(hn)),ao=xc.get(Ei);if(ao)return ao.incRefCount(cr.releaseOnDeref),ao;const Cs=new C.ComponentContainer(Ei);for(const If of Dc.values())Cs.addComponent(If);const Hd=new Mm(gr,cr,Ei,Cs);return xc.set(Ei,Hd),Hd}function Bm(br=Bd){const cr=Ll.get(br);if(!cr&&br===Bd&&pe.getDefaultAppConfig())return fh();if(!cr)throw Is.create("no-app",{appName:br});return cr}function $m(){return Array.from(Ll.values())}async function hh(br){let cr=!1;const gr=br.name;Ll.has(gr)?(cr=!0,Ll.delete(gr)):xc.has(gr)&&br.decRefCount()<=0&&(xc.delete(gr),cr=!0),cr&&(await Promise.all(br.container.getProviders().map(hn=>hn.delete())),br.isDeleted=!0)}function $d(br,cr,gr){var hn;let Vn=(hn=Dm[br])!==null&&hn!==void 0?hn:br;gr&&(Vn+=`-${gr}`);const Ei=Vn.match(/\s|\//),ao=cr.match(/\s|\//);if(Ei||ao){const Cs=[`Unable to register library "${Vn}" with version "${cr}":`];Ei&&Cs.push(`library name "${Vn}" contains illegal characters (whitespace or "/")`),Ei&&ao&&Cs.push("and"),ao&&Cs.push(`version name "${cr}" contains illegal characters (whitespace or "/")`),Ze.warn(Cs.join(" "));return}Kp(new C.Component(`${Vn}-version`,()=>({library:Vn,version:cr}),"VERSION"))}function Gm(br,cr){if(br!==null&&typeof br!="function")throw Is.create("invalid-log-argument");te.setUserLogHandler(br,cr)}function Hm(br){te.setLogLevel(br)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="firebase-heartbeat-database",Wm=1,Gd="firebase-heartbeat-store";let Rf=null;function gh(){return Rf||(Rf=Ee.openDB(Km,Wm,{upgrade:(br,cr)=>{switch(cr){case 0:try{br.createObjectStore(Gd)}catch(gr){console.warn(gr)}}}}).catch(br=>{throw Is.create("idb-open",{originalErrorMessage:br.message})})),Rf}async function Jm(br){try{const gr=(await gh()).transaction(Gd),hn=await gr.objectStore(Gd).get(yh(br));return await gr.done,hn}catch(cr){if(cr instanceof pe.FirebaseError)Ze.warn(cr.message);else{const gr=Is.create("idb-get",{originalErrorMessage:cr?.message});Ze.warn(gr.message)}}}async function mh(br,cr){try{const hn=(await gh()).transaction(Gd,"readwrite");await hn.objectStore(Gd).put(cr,yh(br)),await hn.done}catch(gr){if(gr instanceof pe.FirebaseError)Ze.warn(gr.message);else{const hn=Is.create("idb-set",{originalErrorMessage:gr?.message});Ze.warn(hn.message)}}}function yh(br){return`${br.name}!${br.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=1024,Ym=30;class Qm{constructor(cr){this.container=cr,this._heartbeatsCache=null;const gr=this.container.getProvider("app").getImmediate();this._storage=new Zm(gr),this._heartbeatsCachePromise=this._storage.read().then(hn=>(this._heartbeatsCache=hn,hn))}async triggerHeartbeat(){var cr,gr;try{const Vn=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ei=vh();if(((cr=this._heartbeatsCache)===null||cr===void 0?void 0:cr.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((gr=this._heartbeatsCache)===null||gr===void 0?void 0:gr.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===Ei||this._heartbeatsCache.heartbeats.some(ao=>ao.date===Ei))return;if(this._heartbeatsCache.heartbeats.push({date:Ei,agent:Vn}),this._heartbeatsCache.heartbeats.length>Ym){const ao=ey(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(ao,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(hn){Ze.warn(hn)}}async getHeartbeatsHeader(){var cr;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((cr=this._heartbeatsCache)===null||cr===void 0?void 0:cr.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const gr=vh(),{heartbeatsToSend:hn,unsentEntries:Vn}=Xm(this._heartbeatsCache.heartbeats),Ei=pe.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:hn}));return this._heartbeatsCache.lastSentHeartbeatDate=gr,Vn.length>0?(this._heartbeatsCache.heartbeats=Vn,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),Ei}catch(gr){return Ze.warn(gr),""}}}function vh(){return new Date().toISOString().substring(0,10)}function Xm(br,cr=zm){const gr=[];let hn=br.slice();for(const Vn of br){const Ei=gr.find(ao=>ao.agent===Vn.agent);if(Ei){if(Ei.dates.push(Vn.date),_h(gr)>cr){Ei.dates.pop();break}}else if(gr.push({agent:Vn.agent,dates:[Vn.date]}),_h(gr)>cr){gr.pop();break}hn=hn.slice(1)}return{heartbeatsToSend:gr,unsentEntries:hn}}class Zm{constructor(cr){this.app=cr,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pe.isIndexedDBAvailable()?pe.validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const gr=await Jm(this.app);return gr?.heartbeats?gr:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(cr){var gr;if(await this._canUseIndexedDBPromise){const Vn=await this.read();return mh(this.app,{lastSentHeartbeatDate:(gr=cr.lastSentHeartbeatDate)!==null&&gr!==void 0?gr:Vn.lastSentHeartbeatDate,heartbeats:cr.heartbeats})}else return}async add(cr){var gr;if(await this._canUseIndexedDBPromise){const Vn=await this.read();return mh(this.app,{lastSentHeartbeatDate:(gr=cr.lastSentHeartbeatDate)!==null&&gr!==void 0?gr:Vn.lastSentHeartbeatDate,heartbeats:[...Vn.heartbeats,...cr.heartbeats]})}else return}}function _h(br){return pe.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:br})).length}function ey(br){if(br.length===0)return-1;let cr=0,gr=br[0].date;for(let hn=1;hn<br.length;hn++)br[hn].date<gr&&(gr=br[hn].date,cr=hn);return cr}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(br){Kp(new C.Component("platform-logger",cr=>new Pe(cr),"PRIVATE")),Kp(new C.Component("heartbeat",cr=>new Qm(cr),"PRIVATE")),$d(Ke,Ye,br),$d(Ke,Ye,"cjs2017"),$d("fire-js","")}ty("node"),Object.defineProperty(Y,"FirebaseError",{enumerable:!0,get:function(){return pe.FirebaseError}}),Y.SDK_VERSION=Vm,Y._DEFAULT_ENTRY_NAME=Bd,Y._addComponent=wf,Y._addOrOverwriteComponent=km,Y._apps=Ll,Y._clearComponents=qm,Y._components=Dc,Y._getProvider=uh,Y._isFirebaseApp=ch,Y._isFirebaseServerApp=Lm,Y._registerComponent=Kp,Y._removeServiceInstance=jm,Y._serverApps=xc,Y.deleteApp=hh,Y.getApp=Bm,Y.getApps=$m,Y.initializeApp=fh,Y.initializeServerApp=Um,Y.onLog=Gm,Y.registerVersion=$d,Y.setLogLevel=Hm})(jc),Object.defineProperty(Z,"__esModule",{value:!0});var Ha=Wp,bt=J.default,Ka=H.default,qc=jc,Wa=U.default;function qu(Y){return Y&&typeof Y=="object"&&"default"in Y?Y:{default:Y}}var Ja=qu(Ha);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="5",Fc="v",Vl="s",Mc="r",Vc="f",Uc=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Bc="ls",$c="p",Fu="ac",Ds="websocket",Mu="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(C){this.domStorage_=C,this.prefix_="firebase:"}set(C,te){te==null?this.domStorage_.removeItem(this.prefixedName_(C)):this.domStorage_.setItem(this.prefixedName_(C),bt.stringify(te))}get(C){const te=this.domStorage_.getItem(this.prefixedName_(C));return te==null?null:bt.jsonEval(te)}remove(C){this.domStorage_.removeItem(this.prefixedName_(C))}prefixedName_(C){return this.prefix_+C}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(C,te){te==null?delete this.cache_[C]:this.cache_[C]=te}get(C){return bt.contains(this.cache_,C)?this.cache_[C]:null}remove(C){delete this.cache_[C]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=function(Y){try{if(typeof window<"u"&&typeof window[Y]<"u"){const C=window[Y];return C.setItem("firebase:sentinel","cache"),C.removeItem("firebase:sentinel"),new Gc(C)}}catch{}return new ef},ss=rp("localStorage"),Hc=rp("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Ka.Logger("@firebase/database"),Kc=function(){let Y=1;return function(){return Y++}}(),_i=function(Y){const C=bt.stringToByteArray(Y),te=new bt.Sha1;te.update(C);const pe=te.digest();return bt.base64.encodeByteArray(pe)},va=function(...Y){let C="";for(let te=0;te<Y.length;te++){const pe=Y[te];Array.isArray(pe)||pe&&typeof pe=="object"&&typeof pe.length=="number"?C+=va.apply(null,pe):typeof pe=="object"?C+=bt.stringify(pe):C+=pe,C+=" "}return C};let gs=null,Ya=!0;const Wc=function(Y,C){bt.assert(!C||Y===!0||Y===!1,"Can't turn on custom loggers persistently."),Y===!0?(ya.logLevel=Ka.LogLevel.VERBOSE,gs=ya.log.bind(ya),C&&Hc.set("logging_enabled",!0)):typeof Y=="function"?gs=Y:(gs=null,Hc.remove("logging_enabled"))},Hi=function(...Y){if(Ya===!0&&(Ya=!1,gs===null&&Hc.get("logging_enabled")===!0&&Wc(!0)),gs){const C=va.apply(null,Y);gs(C)}},ks=function(Y){return function(...C){Hi(Y,...C)}},Qa=function(...Y){const C="FIREBASE INTERNAL ERROR: "+va(...Y);ya.error(C)},Ro=function(...Y){const C=`FIREBASE FATAL ERROR: ${va(...Y)}`;throw ya.error(C),new Error(C)},co=function(...Y){const C="FIREBASE WARNING: "+va(...Y);ya.warn(C)},tf=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&co("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Vu=function(Y){return typeof Y=="number"&&(Y!==Y||Y===Number.POSITIVE_INFINITY||Y===Number.NEGATIVE_INFINITY)},np=function(Y){if(bt.isNodeSdk()||document.readyState==="complete")Y();else{let C=!1;const te=function(){if(!document.body){setTimeout(te,Math.floor(10));return}C||(C=!0,Y())};document.addEventListener?(document.addEventListener("DOMContentLoaded",te,!1),window.addEventListener("load",te,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&te()}),window.attachEvent("onload",te))}},as="[MIN_NAME]",ts="[MAX_NAME]",js=function(Y,C){if(Y===C)return 0;if(Y===as||C===ts)return-1;if(C===as||Y===ts)return 1;{const te=Za(Y),pe=Za(C);return te!==null?pe!==null?te-pe===0?Y.length-C.length:te-pe:-1:pe!==null?1:Y<C?-1:1}},Jc=function(Y,C){return Y===C?0:Y<C?-1:1},_a=function(Y,C){if(C&&Y in C)return C[Y];throw new Error("Missing required key ("+Y+") in object: "+bt.stringify(C))},Ul=function(Y){if(typeof Y!="object"||Y===null)return bt.stringify(Y);const C=[];for(const pe in Y)C.push(pe);C.sort();let te="{";for(let pe=0;pe<C.length;pe++)pe!==0&&(te+=","),te+=bt.stringify(C[pe]),te+=":",te+=Ul(Y[C[pe]]);return te+="}",te},ip=function(Y,C){const te=Y.length;if(te<=C)return[Y];const pe=[];for(let Ee=0;Ee<te;Ee+=C)Ee+C>te?pe.push(Y.substring(Ee,te)):pe.push(Y.substring(Ee,Ee+C));return pe};function Yi(Y,C){for(const te in Y)Y.hasOwnProperty(te)&&C(te,Y[te])}const op=function(Y){bt.assert(!Vu(Y),"Invalid JSON number");const C=11,te=52,pe=(1<<C-1)-1;let Ee,Pe,De,Ke,Ye;Y===0?(Pe=0,De=0,Ee=1/Y===-1/0?1:0):(Ee=Y<0,Y=Math.abs(Y),Y>=Math.pow(2,1-pe)?(Ke=Math.min(Math.floor(Math.log(Y)/Math.LN2),pe),Pe=Ke+pe,De=Math.round(Y*Math.pow(2,te-Ke)-Math.pow(2,te))):(Pe=0,De=Math.round(Y/Math.pow(2,1-pe-te))));const Ze=[];for(Ye=te;Ye;Ye-=1)Ze.push(De%2?1:0),De=Math.floor(De/2);for(Ye=C;Ye;Ye-=1)Ze.push(Pe%2?1:0),Pe=Math.floor(Pe/2);Ze.push(Ee?1:0),Ze.reverse();const Lt=Ze.join("");let Gt="";for(Ye=0;Ye<64;Ye+=8){let rr=parseInt(Lt.substr(Ye,8),2).toString(16);rr.length===1&&(rr="0"+rr),Gt=Gt+rr}return Gt.toLowerCase()},rf=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zc=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ys(Y,C){let te="Unknown Error";Y==="too_big"?te="The data requested exceeds the maximum size that can be accessed with a single request.":Y==="permission_denied"?te="Client doesn't have permission to access the desired data.":Y==="unavailable"&&(te="The service is unavailable");const pe=new Error(Y+" at "+C._path.toString()+": "+te);return pe.code=Y.toUpperCase(),pe}const sp=new RegExp("^-?(0*)\\d{1,10}$"),Xa=-2147483648,ys=2147483647,Za=function(Y){if(sp.test(Y)){const C=Number(Y);if(C>=Xa&&C<=ys)return C}return null},No=function(Y){try{Y()}catch(C){setTimeout(()=>{const te=C.stack||"";throw co("Exception was thrown by user callback.",te),C},Math.floor(0))}},Yc=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bl=function(Y,C){const te=setTimeout(Y,C);return typeof te=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(te):typeof te=="object"&&te.unref&&te.unref(),te};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(C,te,pe,Ee,Pe=!1,De="",Ke=!1,Ye=!1,Ze=null){this.secure=te,this.namespace=pe,this.webSocketOnly=Ee,this.nodeAdmin=Pe,this.persistenceKey=De,this.includeNamespaceInQueryParams=Ke,this.isUsingEmulator=Ye,this.emulatorOptions=Ze,this._host=C.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ss.get("host:"+C)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(C){C!==this.internalHost&&(this.internalHost=C,this.isCacheableHost()&&ss.set("host:"+this._host,this.internalHost))}toString(){let C=this.toURLString();return this.persistenceKey&&(C+="<"+this.persistenceKey+">"),C}toURLString(){const C=this.secure?"https://":"http://",te=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${C}${this.host}/${te}`}}function Ea(Y){return Y.host!==Y.internalHost||Y.isCustomHost()||Y.includeNamespaceInQueryParams}function el(Y,C,te){bt.assert(typeof C=="string","typeof type must == string"),bt.assert(typeof te=="object","typeof params must == object");let pe;if(C===Ds)pe=(Y.secure?"wss://":"ws://")+Y.internalHost+"/.ws?";else if(C===Mu)pe=(Y.secure?"https://":"http://")+Y.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+C);Ea(Y)&&(te.ns=Y.namespace);const Ee=[];return Yi(te,(Pe,De)=>{Ee.push(Pe+"="+De)}),pe+Ee.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.counters_={}}incrementCounter(C,te=1){bt.contains(this.counters_,C)||(this.counters_[C]=0),this.counters_[C]+=te}get(){return bt.deepCopy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl={},$l={};function Qs(Y){const C=Y.toString();return rl[C]||(rl[C]=new tl),rl[C]}function Xs(Y,C){const te=Y.toString();return $l[te]||($l[te]=C()),$l[te]}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi="";function fi(Y){pi=Y}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=16384,vo=45e3;let ro=null;typeof MozWebSocket<"u"?ro=MozWebSocket:typeof WebSocket<"u"&&(ro=WebSocket);function ba(Y){ro=Y}class po{constructor(C,te,pe,Ee,Pe,De,Ke){this.connId=C,this.applicationId=pe,this.appCheckToken=Ee,this.authToken=Pe,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ks(this.connId),this.stats_=Qs(te),this.connURL=po.connectionURL_(te,De,Ke,Ee,pe),this.nodeAdmin=te.nodeAdmin}static connectionURL_(C,te,pe,Ee,Pe){const De={};return De[Fc]=za,!bt.isNodeSdk()&&typeof location<"u"&&location.hostname&&Uc.test(location.hostname)&&(De[Mc]=Vc),te&&(De[Vl]=te),pe&&(De[Bc]=pe),Ee&&(De[Fu]=Ee),Pe&&(De[$c]=Pe),el(C,Ds,De)}open(C,te){this.onDisconnect=te,this.onMessage=C,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ss.set("previous_websocket_failure",!0);try{let pe;if(bt.isNodeSdk()){const Ee=this.nodeAdmin?"AdminNode":"Node";pe={headers:{"User-Agent":`Firebase/${za}/${pi}/${process.platform}/${Ee}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(pe.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(pe.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Pe=t,De=this.connURL.indexOf("wss://")===0?Pe.HTTPS_PROXY||Pe.https_proxy:Pe.HTTP_PROXY||Pe.http_proxy;De&&(pe.proxy={origin:De})}this.mySock=new ro(this.connURL,[],pe)}catch(pe){this.log_("Error instantiating WebSocket.");const Ee=pe.message||pe.data;Ee&&this.log_(Ee),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=pe=>{this.handleIncomingFrame(pe)},this.mySock.onerror=pe=>{this.log_("WebSocket error.  Closing connection.");const Ee=pe.message||pe.data;Ee&&this.log_(Ee),this.onClosed_()}}start(){}static forceDisallow(){po.forceDisallow_=!0}static isAvailable(){let C=!1;if(typeof navigator<"u"&&navigator.userAgent){const te=/Android ([0-9]{0,}\.[0-9]{0,})/,pe=navigator.userAgent.match(te);pe&&pe.length>1&&parseFloat(pe[1])<4.4&&(C=!0)}return!C&&ro!==null&&!po.forceDisallow_}static previouslyFailed(){return ss.isInMemoryStorage||ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){ss.remove("previous_websocket_failure")}appendFrame_(C){if(this.frames.push(C),this.frames.length===this.totalFrames){const te=this.frames.join("");this.frames=null;const pe=bt.jsonEval(te);this.onMessage(pe)}}handleNewFrameCount_(C){this.totalFrames=C,this.frames=[]}extractFrameCount_(C){if(bt.assert(this.frames===null,"We already have a frame buffer"),C.length<=6){const te=Number(C);if(!isNaN(te))return this.handleNewFrameCount_(te),null}return this.handleNewFrameCount_(1),C}handleIncomingFrame(C){if(this.mySock===null)return;const te=C.data;if(this.bytesReceived+=te.length,this.stats_.incrementCounter("bytes_received",te.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(te);else{const pe=this.extractFrameCount_(te);pe!==null&&this.appendFrame_(pe)}}send(C){this.resetKeepAlive();const te=bt.stringify(C);this.bytesSent+=te.length,this.stats_.incrementCounter("bytes_sent",te.length);const pe=ip(te,Zs);pe.length>1&&this.sendString_(String(pe.length));for(let Ee=0;Ee<pe.length;Ee++)this.sendString_(pe[Ee])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(vo))}sendString_(C){try{this.mySock.send(C)}catch(te){this.log_("Exception thrown from WebSocket.send():",te.message||te.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}po.responsesRequiredToBeHealthy=2,po.healthyTimeout=3e4;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(C,te){this.appCheckProvider=te,this.appName=C.name,qc._isFirebaseServerApp(C)&&C.settings.appCheckToken&&(this.serverAppAppCheckToken=C.settings.appCheckToken),this.appCheck=te?.getImmediate({optional:!0}),this.appCheck||te?.get().then(pe=>this.appCheck=pe)}getToken(C){if(this.serverAppAppCheckToken){if(C)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(C):new Promise((te,pe)=>{setTimeout(()=>{this.appCheck?this.getToken(C).then(te,pe):te(null)},0)})}addTokenChangeListener(C){var te;(te=this.appCheckProvider)===null||te===void 0||te.get().then(pe=>pe.addTokenListener(C))}notifyForInvalidToken(){co(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(C,te,pe){this.appName_=C,this.firebaseOptions_=te,this.authProvider_=pe,this.auth_=null,this.auth_=pe.getImmediate({optional:!0}),this.auth_||pe.onInit(Ee=>this.auth_=Ee)}getToken(C){return this.auth_?this.auth_.getToken(C).catch(te=>te&&te.code==="auth/token-not-initialized"?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(te)):new Promise((te,pe)=>{setTimeout(()=>{this.auth_?this.getToken(C).then(te,pe):te(null)},0)})}addTokenChangeListener(C){this.auth_?this.auth_.addAuthTokenListener(C):this.authProvider_.get().then(te=>te.addAuthTokenListener(C))}removeTokenChangeListener(C){this.authProvider_.get().then(te=>te.removeAuthTokenListener(C))}notifyForInvalidToken(){let C='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?C+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?C+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':C+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',co(C)}}class Ta{constructor(C){this.accessToken=C}getToken(C){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(C){C(this.accessToken)}removeTokenChangeListener(C){}notifyForInvalidToken(){}}Ta.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(C){this.onMessage_=C,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(C,te){this.closeAfterResponse=C,this.onClose=te,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(C,te){for(this.pendingResponses[C]=te;this.pendingResponses[this.currentResponseNum];){const pe=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let Ee=0;Ee<pe.length;++Ee)pe[Ee]&&No(()=>{this.onMessage_(pe[Ee])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl="start",up="close",Ls="pLPCommand",Bu="pRTLPCB",$u="id",Qc="pw",cp="ser",ea="cb",nl="seg",il="ts",Gu="d",Hu="dframe",Bo=1870,$o=30,Sa=Bo-$o,qs=25e3,Fs=3e4;class Do{constructor(C,te,pe,Ee,Pe,De,Ke){this.connId=C,this.repoInfo=te,this.applicationId=pe,this.appCheckToken=Ee,this.authToken=Pe,this.transportSessionId=De,this.lastSessionId=Ke,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ks(C),this.stats_=Qs(te),this.urlFn=Ye=>(this.appCheckToken&&(Ye[Fu]=this.appCheckToken),el(te,Mu,Ye))}open(C,te){this.curSegmentNum=0,this.onDisconnect_=te,this.myPacketOrderer=new lp(C),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Fs)),np(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ku((...Pe)=>{const[De,Ke,Ye,Ze,Lt]=Pe;if(this.incrementIncomingBytes_(Pe),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,De===Gl)this.id=Ke,this.password=Ye;else if(De===up)Ke?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Ke,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+De)},(...Pe)=>{const[De,Ke]=Pe;this.incrementIncomingBytes_(Pe),this.myPacketOrderer.handleResponse(De,Ke)},()=>{this.onClosed_()},this.urlFn);const pe={};pe[Gl]="t",pe[cp]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(pe[ea]=this.scriptTagHolder.uniqueCallbackIdentifier),pe[Fc]=za,this.transportSessionId&&(pe[Vl]=this.transportSessionId),this.lastSessionId&&(pe[Bc]=this.lastSessionId),this.applicationId&&(pe[$c]=this.applicationId),this.appCheckToken&&(pe[Fu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Uc.test(location.hostname)&&(pe[Mc]=Vc);const Ee=this.urlFn(pe);this.log_("Connecting via long-poll to "+Ee),this.scriptTagHolder.addTag(Ee,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Do.forceAllow_=!0}static forceDisallow(){Do.forceDisallow_=!0}static isAvailable(){return bt.isNodeSdk()?!1:Do.forceAllow_?!0:!Do.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rf()&&!zc()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(C){const te=bt.stringify(C);this.bytesSent+=te.length,this.stats_.incrementCounter("bytes_sent",te.length);const pe=bt.base64Encode(te),Ee=ip(pe,Sa);for(let Pe=0;Pe<Ee.length;Pe++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,Ee.length,Ee[Pe]),this.curSegmentNum++}addDisconnectPingFrame(C,te){if(bt.isNodeSdk())return;this.myDisconnFrame=document.createElement("iframe");const pe={};pe[Hu]="t",pe[$u]=C,pe[Qc]=te,this.myDisconnFrame.src=this.urlFn(pe),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(C){const te=bt.stringify(C).length;this.bytesReceived+=te,this.stats_.incrementCounter("bytes_received",te)}}class Ku{constructor(C,te,pe,Ee){if(this.onDisconnect=pe,this.urlFn=Ee,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,bt.isNodeSdk())this.commandCB=C,this.onMessageCB=te;else{this.uniqueCallbackIdentifier=Kc(),window[Ls+this.uniqueCallbackIdentifier]=C,window[Bu+this.uniqueCallbackIdentifier]=te,this.myIFrame=Ku.createIFrame_();let Pe="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(Pe='<script>document.domain="'+document.domain+'";<\/script>');const De="<html><body>"+Pe+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(De),this.myIFrame.doc.close()}catch(Ke){Hi("frame writing exception"),Ke.stack&&Hi(Ke.stack),Hi(Ke)}}}static createIFrame_(){const C=document.createElement("iframe");if(C.style.display="none",document.body){document.body.appendChild(C);try{C.contentWindow.document||Hi("No IE domain setting required")}catch{const pe=document.domain;C.src="javascript:void((function(){document.open();document.domain='"+pe+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return C.contentDocument?C.doc=C.contentDocument:C.contentWindow?C.doc=C.contentWindow.document:C.document&&(C.doc=C.document),C}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const C=this.onDisconnect;C&&(this.onDisconnect=null,C())}startLongPoll(C,te){for(this.myID=C,this.myPW=te,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const C={};C[$u]=this.myID,C[Qc]=this.myPW,C[cp]=this.currentSerial;let te=this.urlFn(C),pe="",Ee=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$o+pe.length<=Bo;){const De=this.pendingSegs.shift();pe=pe+"&"+nl+Ee+"="+De.seg+"&"+il+Ee+"="+De.ts+"&"+Gu+Ee+"="+De.d,Ee++}return te=te+pe,this.addLongPollTag_(te,this.currentSerial),!0}else return!1}enqueueSegment(C,te,pe){this.pendingSegs.push({seg:C,ts:te,d:pe}),this.alive&&this.newRequest_()}addLongPollTag_(C,te){this.outstandingRequests.add(te);const pe=()=>{this.outstandingRequests.delete(te),this.newRequest_()},Ee=setTimeout(pe,Math.floor(qs)),Pe=()=>{clearTimeout(Ee),pe()};this.addTag(C,Pe)}addTag(C,te){bt.isNodeSdk()?this.doNodeLongPoll(C,te):setTimeout(()=>{try{if(!this.sendNewPolls)return;const pe=this.myIFrame.doc.createElement("script");pe.type="text/javascript",pe.async=!0,pe.src=C,pe.onload=pe.onreadystatechange=function(){const Ee=pe.readyState;(!Ee||Ee==="loaded"||Ee==="complete")&&(pe.onload=pe.onreadystatechange=null,pe.parentNode&&pe.parentNode.removeChild(pe),te())},pe.onerror=()=>{Hi("Long-poll script failed to load: "+C),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(pe)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{static get ALL_TRANSPORTS(){return[Do,po]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(C){this.initTransports_(C)}initTransports_(C){const te=po&&po.isAvailable();let pe=te&&!po.previouslyFailed();if(C.webSocketOnly&&(te||co("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),pe=!0),pe)this.transports_=[po];else{const Ee=this.transports_=[];for(const Pe of ta.ALL_TRANSPORTS)Pe&&Pe.isAvailable()&&Ee.push(Pe);ta.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ta.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=6e4,Go=5e3,Ho=10*1024,wi=100*1024,Ko="t",Zc="d",dp="s",Wu="r",ed="e",td="o",Hl="a",rd="n",Aa="p",nd="h";class nf{constructor(C,te,pe,Ee,Pe,De,Ke,Ye,Ze,Lt){this.id=C,this.repoInfo_=te,this.applicationId_=pe,this.appCheckToken_=Ee,this.authToken_=Pe,this.onMessage_=De,this.onReady_=Ke,this.onDisconnect_=Ye,this.onKill_=Ze,this.lastSessionId=Lt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ks("c:"+this.id+":"),this.transportManager_=new ta(te),this.log_("Connection created"),this.start_()}start_(){const C=this.transportManager_.initialTransport();this.conn_=new C(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=C.responsesRequiredToBeHealthy||0;const te=this.connReceiver_(this.conn_),pe=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(te,pe)},Math.floor(0));const Ee=C.healthyTimeout||0;Ee>0&&(this.healthyTimeout_=Bl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>wi?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ho?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(Ee)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(C){return te=>{C===this.conn_?this.onConnectionLost_(te):C===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(C){return te=>{this.state_!==2&&(C===this.rx_?this.onPrimaryMessageReceived_(te):C===this.secondaryConn_?this.onSecondaryMessageReceived_(te):this.log_("message on old connection"))}}sendRequest(C){const te={t:"d",d:C};this.sendData_(te)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(C){if(Ko in C){const te=C[Ko];te===Hl?this.upgradeIfSecondaryHealthy_():te===Wu?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):te===td&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(C){const te=_a("t",C),pe=_a("d",C);if(te==="c")this.onSecondaryControl_(pe);else if(te==="d")this.pendingDataMessages.push(pe);else throw new Error("Unknown protocol layer: "+te)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Aa,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Hl,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(C){const te=_a("t",C),pe=_a("d",C);te==="c"?this.onControl_(pe):te==="d"&&this.onDataMessage_(pe)}onDataMessage_(C){this.onPrimaryResponse_(),this.onMessage_(C)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(C){const te=_a(Ko,C);if(Zc in C){const pe=C[Zc];if(te===nd){const Ee=Object.assign({},pe);this.repoInfo_.isUsingEmulator&&(Ee.h=this.repoInfo_.host),this.onHandshake_(Ee)}else if(te===rd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let Ee=0;Ee<this.pendingDataMessages.length;++Ee)this.onDataMessage_(this.pendingDataMessages[Ee]);this.pendingDataMessages=[],this.tryCleanupConnection()}else te===dp?this.onConnectionShutdown_(pe):te===Wu?this.onReset_(pe):te===ed?Qa("Server Error: "+pe):te===td?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qa("Unknown control packet command: "+te)}}onHandshake_(C){const te=C.ts,pe=C.v,Ee=C.h;this.sessionId=C.s,this.repoInfo_.host=Ee,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,te),za!==pe&&co("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const C=this.transportManager_.upgradeTransport();C&&this.startUpgrade_(C)}startUpgrade_(C){this.secondaryConn_=new C(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=C.responsesRequiredToBeHealthy||0;const te=this.connReceiver_(this.secondaryConn_),pe=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(te,pe),Bl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Xc))}onReset_(C){this.log_("Reset packet received.  New host: "+C),this.repoInfo_.host=C,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(C,te){this.log_("Realtime connection established."),this.conn_=C,this.state_=1,this.onReady_&&(this.onReady_(te,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Go))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Aa,d:{}}}))}onSecondaryConnectionLost_(){const C=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===C||this.rx_===C)&&this.close()}onConnectionLost_(C){this.conn_=null,!C&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(C){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(C),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(C){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(C)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{put(C,te,pe,Ee){}merge(C,te,pe,Ee){}refreshAuthToken(C){}refreshAppCheckToken(C){}onDisconnectPut(C,te,pe){}onDisconnectMerge(C,te,pe){}onDisconnectCancel(C,te){}reportStats(C){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(C){this.allowedEvents_=C,this.listeners_={},bt.assert(Array.isArray(C)&&C.length>0,"Requires a non-empty array")}trigger(C,...te){if(Array.isArray(this.listeners_[C])){const pe=[...this.listeners_[C]];for(let Ee=0;Ee<pe.length;Ee++)pe[Ee].callback.apply(pe[Ee].context,te)}}on(C,te,pe){this.validateEventType_(C),this.listeners_[C]=this.listeners_[C]||[],this.listeners_[C].push({callback:te,context:pe});const Ee=this.getInitialEvent(C);Ee&&te.apply(pe,Ee)}off(C,te,pe){this.validateEventType_(C);const Ee=this.listeners_[C]||[];for(let Pe=0;Pe<Ee.length;Pe++)if(Ee[Pe].callback===te&&(!pe||pe===Ee[Pe].context)){Ee.splice(Pe,1);return}}validateEventType_(C){bt.assert(this.allowedEvents_.find(te=>te===C),"Unknown event: "+C)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends Kl{static getInstance(){return new Wl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bt.isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(C){return bt.assert(C==="online","Unknown event type: "+C),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=32,Oa=768;class ti{constructor(C,te){if(te===void 0){this.pieces_=C.split("/");let pe=0;for(let Ee=0;Ee<this.pieces_.length;Ee++)this.pieces_[Ee].length>0&&(this.pieces_[pe]=this.pieces_[Ee],pe++);this.pieces_.length=pe,this.pieceNum_=0}else this.pieces_=C,this.pieceNum_=te}toString(){let C="";for(let te=this.pieceNum_;te<this.pieces_.length;te++)this.pieces_[te]!==""&&(C+="/"+this.pieces_[te]);return C||"/"}}function Fn(){return new ti("")}function wn(Y){return Y.pieceNum_>=Y.pieces_.length?null:Y.pieces_[Y.pieceNum_]}function Wo(Y){return Y.pieces_.length-Y.pieceNum_}function oi(Y){let C=Y.pieceNum_;return C<Y.pieces_.length&&C++,new ti(Y.pieces_,C)}function Jl(Y){return Y.pieceNum_<Y.pieces_.length?Y.pieces_[Y.pieces_.length-1]:null}function od(Y){let C="";for(let te=Y.pieceNum_;te<Y.pieces_.length;te++)Y.pieces_[te]!==""&&(C+="/"+encodeURIComponent(String(Y.pieces_[te])));return C||"/"}function wa(Y,C=0){return Y.pieces_.slice(Y.pieceNum_+C)}function Ra(Y){if(Y.pieceNum_>=Y.pieces_.length)return null;const C=[];for(let te=Y.pieceNum_;te<Y.pieces_.length-1;te++)C.push(Y.pieces_[te]);return new ti(C,0)}function Mn(Y,C){const te=[];for(let pe=Y.pieceNum_;pe<Y.pieces_.length;pe++)te.push(Y.pieces_[pe]);if(C instanceof ti)for(let pe=C.pieceNum_;pe<C.pieces_.length;pe++)te.push(C.pieces_[pe]);else{const pe=C.split("/");for(let Ee=0;Ee<pe.length;Ee++)pe[Ee].length>0&&te.push(pe[Ee])}return new ti(te,0)}function En(Y){return Y.pieceNum_>=Y.pieces_.length}function fo(Y,C){const te=wn(Y),pe=wn(C);if(te===null)return C;if(te===pe)return fo(oi(Y),oi(C));throw new Error("INTERNAL ERROR: innerPath ("+C+") is not within outerPath ("+Y+")")}function pp(Y,C){const te=wa(Y,0),pe=wa(C,0);for(let Ee=0;Ee<te.length&&Ee<pe.length;Ee++){const Pe=js(te[Ee],pe[Ee]);if(Pe!==0)return Pe}return te.length===pe.length?0:te.length<pe.length?-1:1}function ls(Y,C){if(Wo(Y)!==Wo(C))return!1;for(let te=Y.pieceNum_,pe=C.pieceNum_;te<=Y.pieces_.length;te++,pe++)if(Y.pieces_[te]!==C.pieces_[pe])return!1;return!0}function Qi(Y,C){let te=Y.pieceNum_,pe=C.pieceNum_;if(Wo(Y)>Wo(C))return!1;for(;te<Y.pieces_.length;){if(Y.pieces_[te]!==C.pieces_[pe])return!1;++te,++pe}return!0}class sd{constructor(C,te){this.errorPrefix_=te,this.parts_=wa(C,0),this.byteLength_=Math.max(1,this.parts_.length);for(let pe=0;pe<this.parts_.length;pe++)this.byteLength_+=bt.stringLength(this.parts_[pe]);Vs(this)}}function fp(Y,C){Y.parts_.length>0&&(Y.byteLength_+=1),Y.parts_.push(C),Y.byteLength_+=bt.stringLength(C),Vs(Y)}function Ms(Y){const C=Y.parts_.pop();Y.byteLength_-=bt.stringLength(C),Y.parts_.length>0&&(Y.byteLength_-=1)}function Vs(Y){if(Y.byteLength_>Oa)throw new Error(Y.errorPrefix_+"has a key path longer than "+Oa+" bytes ("+Y.byteLength_+").");if(Y.parts_.length>id)throw new Error(Y.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+id+") or object contains a cycle "+vs(Y))}function vs(Y){return Y.parts_.length===0?"":"in property '"+Y.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Kl{static getInstance(){return new Ju}constructor(){super(["visible"]);let C,te;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(te="visibilitychange",C="hidden"):typeof document.mozHidden<"u"?(te="mozvisibilitychange",C="mozHidden"):typeof document.msHidden<"u"?(te="msvisibilitychange",C="msHidden"):typeof document.webkitHidden<"u"&&(te="webkitvisibilitychange",C="webkitHidden")),this.visible_=!0,te&&document.addEventListener(te,()=>{const pe=!document[C];pe!==this.visible_&&(this.visible_=pe,this.trigger("visible",pe))},!1)}getInitialEvent(C){return bt.assert(C==="visible","Unknown event type: "+C),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=1e3,hp=60*5*1e3,sl=30*1e3,_s=1.3,zl=3e4,Yl="server_kill",na=3;class ko extends ol{constructor(C,te,pe,Ee,Pe,De,Ke,Ye){if(super(),this.repoInfo_=C,this.applicationId_=te,this.onDataUpdate_=pe,this.onConnectStatus_=Ee,this.onServerInfoUpdate_=Pe,this.authTokenProvider_=De,this.appCheckTokenProvider_=Ke,this.authOverride_=Ye,this.id=ko.nextPersistentConnectionId_++,this.log_=ks("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ra,this.maxReconnectDelay_=hp,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ye&&!bt.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ju.getInstance().on("visible",this.onVisible_,this),C.host.indexOf("fblocal")===-1&&Wl.getInstance().on("online",this.onOnline_,this)}sendRequest(C,te,pe){const Ee=++this.requestNumber_,Pe={r:Ee,a:C,b:te};this.log_(bt.stringify(Pe)),bt.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Pe),pe&&(this.requestCBHash_[Ee]=pe)}get(C){this.initConnection_();const te=new bt.Deferred,Ee={action:"g",request:{p:C._path.toString(),q:C._queryObject},onComplete:De=>{const Ke=De.d;De.s==="ok"?te.resolve(Ke):te.reject(Ke)}};this.outstandingGets_.push(Ee),this.outstandingGetCount_++;const Pe=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(Pe),te.promise}listen(C,te,pe,Ee){this.initConnection_();const Pe=C._queryIdentifier,De=C._path.toString();this.log_("Listen called for "+De+" "+Pe),this.listens.has(De)||this.listens.set(De,new Map),bt.assert(C._queryParams.isDefault()||!C._queryParams.loadsAllData(),"listen() called for non-default but complete query"),bt.assert(!this.listens.get(De).has(Pe),"listen() called twice for same path/queryId.");const Ke={onComplete:Ee,hashFn:te,query:C,tag:pe};this.listens.get(De).set(Pe,Ke),this.connected_&&this.sendListen_(Ke)}sendGet_(C){const te=this.outstandingGets_[C];this.sendRequest("g",te.request,pe=>{delete this.outstandingGets_[C],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),te.onComplete&&te.onComplete(pe)})}sendListen_(C){const te=C.query,pe=te._path.toString(),Ee=te._queryIdentifier;this.log_("Listen on "+pe+" for "+Ee);const Pe={p:pe},De="q";C.tag&&(Pe.q=te._queryObject,Pe.t=C.tag),Pe.h=C.hashFn(),this.sendRequest(De,Pe,Ke=>{const Ye=Ke.d,Ze=Ke.s;ko.warnOnListenWarnings_(Ye,te),(this.listens.get(pe)&&this.listens.get(pe).get(Ee))===C&&(this.log_("listen response",Ke),Ze!=="ok"&&this.removeListen_(pe,Ee),C.onComplete&&C.onComplete(Ze,Ye))})}static warnOnListenWarnings_(C,te){if(C&&typeof C=="object"&&bt.contains(C,"w")){const pe=bt.safeGet(C,"w");if(Array.isArray(pe)&&~pe.indexOf("no_index")){const Ee='".indexOn": "'+te._queryParams.getIndex().toString()+'"',Pe=te._path.toString();co(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${Ee} at ${Pe} to your security rules for better performance.`)}}}refreshAuthToken(C){this.authToken_=C,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(C)}reduceReconnectDelayIfAdminCredential_(C){(C&&C.length===40||bt.isAdmin(C))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sl)}refreshAppCheckToken(C){this.appCheckToken_=C,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const C=this.authToken_,te=bt.isValidFormat(C)?"auth":"gauth",pe={cred:C};this.authOverride_===null?pe.noauth=!0:typeof this.authOverride_=="object"&&(pe.authvar=this.authOverride_),this.sendRequest(te,pe,Ee=>{const Pe=Ee.s,De=Ee.d||"error";this.authToken_===C&&(Pe==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(Pe,De))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},C=>{const te=C.s,pe=C.d||"error";te==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(te,pe)})}unlisten(C,te){const pe=C._path.toString(),Ee=C._queryIdentifier;this.log_("Unlisten called for "+pe+" "+Ee),bt.assert(C._queryParams.isDefault()||!C._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(pe,Ee)&&this.connected_&&this.sendUnlisten_(pe,Ee,C._queryObject,te)}sendUnlisten_(C,te,pe,Ee){this.log_("Unlisten on "+C+" for "+te);const Pe={p:C},De="n";Ee&&(Pe.q=pe,Pe.t=Ee),this.sendRequest(De,Pe)}onDisconnectPut(C,te,pe){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",C,te,pe):this.onDisconnectRequestQueue_.push({pathString:C,action:"o",data:te,onComplete:pe})}onDisconnectMerge(C,te,pe){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",C,te,pe):this.onDisconnectRequestQueue_.push({pathString:C,action:"om",data:te,onComplete:pe})}onDisconnectCancel(C,te){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",C,null,te):this.onDisconnectRequestQueue_.push({pathString:C,action:"oc",data:null,onComplete:te})}sendOnDisconnect_(C,te,pe,Ee){const Pe={p:te,d:pe};this.log_("onDisconnect "+C,Pe),this.sendRequest(C,Pe,De=>{Ee&&setTimeout(()=>{Ee(De.s,De.d)},Math.floor(0))})}put(C,te,pe,Ee){this.putInternal("p",C,te,pe,Ee)}merge(C,te,pe,Ee){this.putInternal("m",C,te,pe,Ee)}putInternal(C,te,pe,Ee,Pe){this.initConnection_();const De={p:te,d:pe};Pe!==void 0&&(De.h=Pe),this.outstandingPuts_.push({action:C,request:De,onComplete:Ee}),this.outstandingPutCount_++;const Ke=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(Ke):this.log_("Buffering put: "+te)}sendPut_(C){const te=this.outstandingPuts_[C].action,pe=this.outstandingPuts_[C].request,Ee=this.outstandingPuts_[C].onComplete;this.outstandingPuts_[C].queued=this.connected_,this.sendRequest(te,pe,Pe=>{this.log_(te+" response",Pe),delete this.outstandingPuts_[C],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),Ee&&Ee(Pe.s,Pe.d)})}reportStats(C){if(this.connected_){const te={c:C};this.log_("reportStats",te),this.sendRequest("s",te,pe=>{if(pe.s!=="ok"){const Pe=pe.d;this.log_("reportStats","Error sending stats: "+Pe)}})}}onDataMessage_(C){if("r"in C){this.log_("from server: "+bt.stringify(C));const te=C.r,pe=this.requestCBHash_[te];pe&&(delete this.requestCBHash_[te],pe(C.b))}else{if("error"in C)throw"A server-side error has occurred: "+C.error;"a"in C&&this.onDataPush_(C.a,C.b)}}onDataPush_(C,te){this.log_("handleServerMessage",C,te),C==="d"?this.onDataUpdate_(te.p,te.d,!1,te.t):C==="m"?this.onDataUpdate_(te.p,te.d,!0,te.t):C==="c"?this.onListenRevoked_(te.p,te.q):C==="ac"?this.onAuthRevoked_(te.s,te.d):C==="apc"?this.onAppCheckRevoked_(te.s,te.d):C==="sd"?this.onSecurityDebugPacket_(te):Qa("Unrecognized action received from server: "+bt.stringify(C)+`
Are you using the latest client?`)}onReady_(C,te){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(C),this.lastSessionId=te,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(C){bt.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(C))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(C){C&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ra,this.realtime_||this.scheduleConnect_(0)),this.visible_=C}onOnline_(C){C?(this.log_("Browser went online."),this.reconnectDelay_=ra,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zl&&(this.reconnectDelay_=ra),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const C=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let te=Math.max(0,this.reconnectDelay_-C);te=Math.random()*te,this.log_("Trying to reconnect in "+te+"ms"),this.scheduleConnect_(te),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_s)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const C=this.onDataMessage_.bind(this),te=this.onReady_.bind(this),pe=this.onRealtimeDisconnect_.bind(this),Ee=this.id+":"+ko.nextConnectionId_++,Pe=this.lastSessionId;let De=!1,Ke=null;const Ye=function(){Ke?Ke.close():(De=!0,pe())},Ze=function(Gt){bt.assert(Ke,"sendRequest call when we're not connected not allowed."),Ke.sendRequest(Gt)};this.realtime_={close:Ye,sendRequest:Ze};const Lt=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[Gt,rr]=await Promise.all([this.authTokenProvider_.getToken(Lt),this.appCheckTokenProvider_.getToken(Lt)]);De?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),this.authToken_=Gt&&Gt.accessToken,this.appCheckToken_=rr&&rr.token,Ke=new nf(Ee,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,C,te,pe,wr=>{co(wr+" ("+this.repoInfo_.toString()+")"),this.interrupt(Yl)},Pe))}catch(Gt){this.log_("Failed to get token: "+Gt),De||(this.repoInfo_.nodeAdmin&&co(Gt),Ye())}}}interrupt(C){Hi("Interrupting connection for reason: "+C),this.interruptReasons_[C]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(C){Hi("Resuming connection for reason: "+C),delete this.interruptReasons_[C],bt.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=ra,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(C){const te=C-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:te})}cancelSentTransactions_(){for(let C=0;C<this.outstandingPuts_.length;C++){const te=this.outstandingPuts_[C];te&&"h"in te.request&&te.queued&&(te.onComplete&&te.onComplete("disconnect"),delete this.outstandingPuts_[C],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(C,te){let pe;te?pe=te.map(Pe=>Ul(Pe)).join("$"):pe="default";const Ee=this.removeListen_(C,pe);Ee&&Ee.onComplete&&Ee.onComplete("permission_denied")}removeListen_(C,te){const pe=new ti(C).toString();let Ee;if(this.listens.has(pe)){const Pe=this.listens.get(pe);Ee=Pe.get(te),Pe.delete(te),Pe.size===0&&this.listens.delete(pe)}else Ee=void 0;return Ee}onAuthRevoked_(C,te){Hi("Auth token revoked: "+C+"/"+te),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(C==="invalid_token"||C==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=na&&(this.reconnectDelay_=sl,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(C,te){Hi("App check token revoked: "+C+"/"+te),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(C==="invalid_token"||C==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=na&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(C){this.securityDebugCallback_?this.securityDebugCallback_(C):"msg"in C&&console.log("FIREBASE: "+C.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const C of this.listens.values())for(const te of C.values())this.sendListen_(te);for(let C=0;C<this.outstandingPuts_.length;C++)this.outstandingPuts_[C]&&this.sendPut_(C);for(;this.onDisconnectRequestQueue_.length;){const C=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(C.action,C.pathString,C.data,C.onComplete)}for(let C=0;C<this.outstandingGets_.length;C++)this.outstandingGets_[C]&&this.sendGet_(C)}sendConnectStats_(){const C={};let te="js";bt.isNodeSdk()&&(this.repoInfo_.nodeAdmin?te="admin_node":te="node"),C["sdk."+te+"."+pi.replace(/\./g,"-")]=1,bt.isMobileCordova()?C["framework.cordova"]=1:bt.isReactNative()&&(C["framework.reactnative"]=1),this.reportStats(C)}shouldReconnect_(){const C=Wl.getInstance().currentlyOnline();return bt.isEmpty(this.interruptReasons_)&&C}}ko.nextPersistentConnectionId_=0,ko.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(C,te){this.name=C,this.node=te}static Wrap(C,te){return new An(C,te)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{getCompare(){return this.compare.bind(this)}indexedValueChanged(C,te){const pe=new An(as,C),Ee=new An(as,te);return this.compare(pe,Ee)!==0}minPost(){return An.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al;class Ri extends Ql{static get __EMPTY_NODE(){return al}static set __EMPTY_NODE(C){al=C}compare(C,te){return js(C.name,te.name)}isDefinedOn(C){throw bt.assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(C,te){return!1}minPost(){return An.MIN}maxPost(){return new An(ts,al)}makePost(C,te){return bt.assert(typeof C=="string","KeyIndex indexValue must always be a string."),new An(C,al)}toString(){return".key"}}const Jo=new Ri;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(C,te,pe,Ee,Pe=null){this.isReverse_=Ee,this.resultGenerator_=Pe,this.nodeStack_=[];let De=1;for(;!C.isEmpty();)if(C=C,De=te?pe(C.key,te):1,Ee&&(De*=-1),De<0)this.isReverse_?C=C.left:C=C.right;else if(De===0){this.nodeStack_.push(C);break}else this.nodeStack_.push(C),this.isReverse_?C=C.right:C=C.left}getNext(){if(this.nodeStack_.length===0)return null;let C=this.nodeStack_.pop(),te;if(this.resultGenerator_?te=this.resultGenerator_(C.key,C.value):te={key:C.key,value:C.value},this.isReverse_)for(C=C.left;!C.isEmpty();)this.nodeStack_.push(C),C=C.right;else for(C=C.right;!C.isEmpty();)this.nodeStack_.push(C),C=C.left;return te}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const C=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(C.key,C.value):{key:C.key,value:C.value}}}class Ki{constructor(C,te,pe,Ee,Pe){this.key=C,this.value=te,this.color=pe??Ki.RED,this.left=Ee??_o.EMPTY_NODE,this.right=Pe??_o.EMPTY_NODE}copy(C,te,pe,Ee,Pe){return new Ki(C??this.key,te??this.value,pe??this.color,Ee??this.left,Pe??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(C){return this.left.inorderTraversal(C)||!!C(this.key,this.value)||this.right.inorderTraversal(C)}reverseTraversal(C){return this.right.reverseTraversal(C)||C(this.key,this.value)||this.left.reverseTraversal(C)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(C,te,pe){let Ee=this;const Pe=pe(C,Ee.key);return Pe<0?Ee=Ee.copy(null,null,null,Ee.left.insert(C,te,pe),null):Pe===0?Ee=Ee.copy(null,te,null,null,null):Ee=Ee.copy(null,null,null,null,Ee.right.insert(C,te,pe)),Ee.fixUp_()}removeMin_(){if(this.left.isEmpty())return _o.EMPTY_NODE;let C=this;return!C.left.isRed_()&&!C.left.left.isRed_()&&(C=C.moveRedLeft_()),C=C.copy(null,null,null,C.left.removeMin_(),null),C.fixUp_()}remove(C,te){let pe,Ee;if(pe=this,te(C,pe.key)<0)!pe.left.isEmpty()&&!pe.left.isRed_()&&!pe.left.left.isRed_()&&(pe=pe.moveRedLeft_()),pe=pe.copy(null,null,null,pe.left.remove(C,te),null);else{if(pe.left.isRed_()&&(pe=pe.rotateRight_()),!pe.right.isEmpty()&&!pe.right.isRed_()&&!pe.right.left.isRed_()&&(pe=pe.moveRedRight_()),te(C,pe.key)===0){if(pe.right.isEmpty())return _o.EMPTY_NODE;Ee=pe.right.min_(),pe=pe.copy(Ee.key,Ee.value,null,null,pe.right.removeMin_())}pe=pe.copy(null,null,null,null,pe.right.remove(C,te))}return pe.fixUp_()}isRed_(){return this.color}fixUp_(){let C=this;return C.right.isRed_()&&!C.left.isRed_()&&(C=C.rotateLeft_()),C.left.isRed_()&&C.left.left.isRed_()&&(C=C.rotateRight_()),C.left.isRed_()&&C.right.isRed_()&&(C=C.colorFlip_()),C}moveRedLeft_(){let C=this.colorFlip_();return C.right.left.isRed_()&&(C=C.copy(null,null,null,null,C.right.rotateRight_()),C=C.rotateLeft_(),C=C.colorFlip_()),C}moveRedRight_(){let C=this.colorFlip_();return C.left.left.isRed_()&&(C=C.rotateRight_(),C=C.colorFlip_()),C}rotateLeft_(){const C=this.copy(null,null,Ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,C,null)}rotateRight_(){const C=this.copy(null,null,Ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,C)}colorFlip_(){const C=this.left.copy(null,null,!this.left.color,null,null),te=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,C,te)}checkMaxDepth_(){const C=this.check_();return Math.pow(2,C)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const C=this.left.check_();if(C!==this.right.check_())throw new Error("Black depths differ");return C+(this.isRed_()?0:1)}}Ki.RED=!0,Ki.BLACK=!1;class zu{copy(C,te,pe,Ee,Pe){return this}insert(C,te,pe){return new Ki(C,te,null)}remove(C,te){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(C){return!1}reverseTraversal(C){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class _o{constructor(C,te=_o.EMPTY_NODE){this.comparator_=C,this.root_=te}insert(C,te){return new _o(this.comparator_,this.root_.insert(C,te,this.comparator_).copy(null,null,Ki.BLACK,null,null))}remove(C){return new _o(this.comparator_,this.root_.remove(C,this.comparator_).copy(null,null,Ki.BLACK,null,null))}get(C){let te,pe=this.root_;for(;!pe.isEmpty();){if(te=this.comparator_(C,pe.key),te===0)return pe.value;te<0?pe=pe.left:te>0&&(pe=pe.right)}return null}getPredecessorKey(C){let te,pe=this.root_,Ee=null;for(;!pe.isEmpty();)if(te=this.comparator_(C,pe.key),te===0){if(pe.left.isEmpty())return Ee?Ee.key:null;for(pe=pe.left;!pe.right.isEmpty();)pe=pe.right;return pe.key}else te<0?pe=pe.left:te>0&&(Ee=pe,pe=pe.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(C){return this.root_.inorderTraversal(C)}reverseTraversal(C){return this.root_.reverseTraversal(C)}getIterator(C){return new ll(this.root_,null,this.comparator_,!1,C)}getIteratorFrom(C,te){return new ll(this.root_,C,this.comparator_,!1,te)}getReverseIteratorFrom(C,te){return new ll(this.root_,C,this.comparator_,!0,te)}getReverseIterator(C){return new ll(this.root_,null,this.comparator_,!0,C)}}_o.EMPTY_NODE=new zu;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(Y,C){return js(Y.name,C.name)}function Si(Y,C){return js(Y,C)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ui;function no(Y){Ui=Y}const Xl=function(Y){return typeof Y=="number"?"number:"+op(Y):"string:"+Y},ul=function(Y){if(Y.isLeafNode()){const C=Y.val();bt.assert(typeof C=="string"||typeof C=="number"||typeof C=="object"&&bt.contains(C,".sv"),"Priority must be a string or number.")}else bt.assert(Y===Ui||Y.isEmpty(),"priority of unexpected type.");bt.assert(Y===Ui||Y.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl;class io{static set __childrenNodeConstructor(C){cl=C}static get __childrenNodeConstructor(){return cl}constructor(C,te=io.__childrenNodeConstructor.EMPTY_NODE){this.value_=C,this.priorityNode_=te,this.lazyHash_=null,bt.assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ul(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(C){return new io(this.value_,C)}getImmediateChild(C){return C===".priority"?this.priorityNode_:io.__childrenNodeConstructor.EMPTY_NODE}getChild(C){return En(C)?this:wn(C)===".priority"?this.priorityNode_:io.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(C,te){return null}updateImmediateChild(C,te){return C===".priority"?this.updatePriority(te):te.isEmpty()&&C!==".priority"?this:io.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(C,te).updatePriority(this.priorityNode_)}updateChild(C,te){const pe=wn(C);return pe===null?te:te.isEmpty()&&pe!==".priority"?this:(bt.assert(pe!==".priority"||Wo(C)===1,".priority must be the last token in a path"),this.updateImmediateChild(pe,io.__childrenNodeConstructor.EMPTY_NODE.updateChild(oi(C),te)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(C,te){return!1}val(C){return C&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let C="";this.priorityNode_.isEmpty()||(C+="priority:"+Xl(this.priorityNode_.val())+":");const te=typeof this.value_;C+=te+":",te==="number"?C+=op(this.value_):C+=this.value_,this.lazyHash_=_i(C)}return this.lazyHash_}getValue(){return this.value_}compareTo(C){return C===io.__childrenNodeConstructor.EMPTY_NODE?1:C instanceof io.__childrenNodeConstructor?-1:(bt.assert(C.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(C))}compareToLeafNode_(C){const te=typeof C.value_,pe=typeof this.value_,Ee=io.VALUE_TYPE_ORDER.indexOf(te),Pe=io.VALUE_TYPE_ORDER.indexOf(pe);return bt.assert(Ee>=0,"Unknown leaf type: "+te),bt.assert(Pe>=0,"Unknown leaf type: "+pe),Ee===Pe?pe==="object"?0:this.value_<C.value_?-1:this.value_===C.value_?0:1:Pe-Ee}withIndex(){return this}isIndexed(){return!0}equals(C){if(C===this)return!0;if(C.isLeafNode()){const te=C;return this.value_===te.value_&&this.priorityNode_.equals(te.priorityNode_)}else return!1}}io.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho,Yu;function ad(Y){ho=Y}function ld(Y){Yu=Y}class Es extends Ql{compare(C,te){const pe=C.node.getPriority(),Ee=te.node.getPriority(),Pe=pe.compareTo(Ee);return Pe===0?js(C.name,te.name):Pe}isDefinedOn(C){return!C.getPriority().isEmpty()}indexedValueChanged(C,te){return!C.getPriority().equals(te.getPriority())}minPost(){return An.MIN}maxPost(){return new An(ts,new io("[PRIORITY-POST]",Yu))}makePost(C,te){const pe=ho(C);return new An(te,new io("[PRIORITY-POST]",pe))}toString(){return".priority"}}const jn=new Es;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=Math.log(2);class ud{constructor(C){const te=Pe=>parseInt(Math.log(Pe)/Zl,10),pe=Pe=>parseInt(Array(Pe+1).join("1"),2);this.count=te(C+1),this.current_=this.count-1;const Ee=pe(this.count);this.bits_=C+1&Ee}nextBitIsOne(){const C=!(this.bits_&1<<this.current_);return this.current_--,C}}const dl=function(Y,C,te,pe){Y.sort(C);const Ee=function(Ye,Ze){const Lt=Ze-Ye;let Gt,rr;if(Lt===0)return null;if(Lt===1)return Gt=Y[Ye],rr=te?te(Gt):Gt,new Ki(rr,Gt.node,Ki.BLACK,null,null);{const wr=parseInt(Lt/2,10)+Ye,$r=Ee(Ye,wr),ri=Ee(wr+1,Ze);return Gt=Y[wr],rr=te?te(Gt):Gt,new Ki(rr,Gt.node,Ki.BLACK,$r,ri)}},Pe=function(Ye){let Ze=null,Lt=null,Gt=Y.length;const rr=function($r,ri){const mo=Gt-$r,jl=Gt;Gt-=$r;const Nc=Ee(mo+1,jl),Ud=Y[mo],Of=te?te(Ud):Ud;wr(new Ki(Of,Ud.node,ri,null,Nc))},wr=function($r){Ze?(Ze.left=$r,Ze=$r):(Lt=$r,Ze=$r)};for(let $r=0;$r<Ye.count;++$r){const ri=Ye.nextBitIsOne(),mo=Math.pow(2,Ye.count-($r+1));ri?rr(mo,Ki.BLACK):(rr(mo,Ki.BLACK),rr(mo,Ki.RED))}return Lt},De=new ud(Y.length),Ke=Pe(De);return new _o(pe||C,Ke)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu;const Ca={};class bs{static get Default(){return bt.assert(Ca&&jn,"ChildrenNode.ts has not been loaded"),Qu=Qu||new bs({".priority":Ca},{".priority":jn}),Qu}constructor(C,te){this.indexes_=C,this.indexSet_=te}get(C){const te=bt.safeGet(this.indexes_,C);if(!te)throw new Error("No index defined for "+C);return te instanceof _o?te:null}hasIndex(C){return bt.contains(this.indexSet_,C.toString())}addIndex(C,te){bt.assert(C!==Jo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const pe=[];let Ee=!1;const Pe=te.getIterator(An.Wrap);let De=Pe.getNext();for(;De;)Ee=Ee||C.isDefinedOn(De.node),pe.push(De),De=Pe.getNext();let Ke;Ee?Ke=dl(pe,C.getCompare()):Ke=Ca;const Ye=C.toString(),Ze=Object.assign({},this.indexSet_);Ze[Ye]=C;const Lt=Object.assign({},this.indexes_);return Lt[Ye]=Ke,new bs(Lt,Ze)}addToIndexes(C,te){const pe=bt.map(this.indexes_,(Ee,Pe)=>{const De=bt.safeGet(this.indexSet_,Pe);if(bt.assert(De,"Missing index implementation for "+Pe),Ee===Ca)if(De.isDefinedOn(C.node)){const Ke=[],Ye=te.getIterator(An.Wrap);let Ze=Ye.getNext();for(;Ze;)Ze.name!==C.name&&Ke.push(Ze),Ze=Ye.getNext();return Ke.push(C),dl(Ke,De.getCompare())}else return Ca;else{const Ke=te.get(C.name);let Ye=Ee;return Ke&&(Ye=Ye.remove(new An(C.name,Ke))),Ye.insert(C,C.node)}});return new bs(pe,this.indexSet_)}removeFromIndexes(C,te){const pe=bt.map(this.indexes_,Ee=>{if(Ee===Ca)return Ee;{const Pe=te.get(C.name);return Pe?Ee.remove(new An(C.name,Pe)):Ee}});return new bs(pe,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl;class zr{static get EMPTY_NODE(){return pl||(pl=new zr(new _o(Si),null,bs.Default))}constructor(C,te,pe){this.children_=C,this.priorityNode_=te,this.indexMap_=pe,this.lazyHash_=null,this.priorityNode_&&ul(this.priorityNode_),this.children_.isEmpty()&&bt.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pl}updatePriority(C){return this.children_.isEmpty()?this:new zr(this.children_,C,this.indexMap_)}getImmediateChild(C){if(C===".priority")return this.getPriority();{const te=this.children_.get(C);return te===null?pl:te}}getChild(C){const te=wn(C);return te===null?this:this.getImmediateChild(te).getChild(oi(C))}hasChild(C){return this.children_.get(C)!==null}updateImmediateChild(C,te){if(bt.assert(te,"We should always be passing snapshot nodes"),C===".priority")return this.updatePriority(te);{const pe=new An(C,te);let Ee,Pe;te.isEmpty()?(Ee=this.children_.remove(C),Pe=this.indexMap_.removeFromIndexes(pe,this.children_)):(Ee=this.children_.insert(C,te),Pe=this.indexMap_.addToIndexes(pe,this.children_));const De=Ee.isEmpty()?pl:this.priorityNode_;return new zr(Ee,De,Pe)}}updateChild(C,te){const pe=wn(C);if(pe===null)return te;{bt.assert(wn(C)!==".priority"||Wo(C)===1,".priority must be the last token in a path");const Ee=this.getImmediateChild(pe).updateChild(oi(C),te);return this.updateImmediateChild(pe,Ee)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(C){if(this.isEmpty())return null;const te={};let pe=0,Ee=0,Pe=!0;if(this.forEachChild(jn,(De,Ke)=>{te[De]=Ke.val(C),pe++,Pe&&zr.INTEGER_REGEXP_.test(De)?Ee=Math.max(Ee,Number(De)):Pe=!1}),!C&&Pe&&Ee<2*pe){const De=[];for(const Ke in te)De[Ke]=te[Ke];return De}else return C&&!this.getPriority().isEmpty()&&(te[".priority"]=this.getPriority().val()),te}hash(){if(this.lazyHash_===null){let C="";this.getPriority().isEmpty()||(C+="priority:"+Xl(this.getPriority().val())+":"),this.forEachChild(jn,(te,pe)=>{const Ee=pe.hash();Ee!==""&&(C+=":"+te+":"+Ee)}),this.lazyHash_=C===""?"":_i(C)}return this.lazyHash_}getPredecessorChildName(C,te,pe){const Ee=this.resolveIndex_(pe);if(Ee){const Pe=Ee.getPredecessorKey(new An(C,te));return Pe?Pe.name:null}else return this.children_.getPredecessorKey(C)}getFirstChildName(C){const te=this.resolveIndex_(C);if(te){const pe=te.minKey();return pe&&pe.name}else return this.children_.minKey()}getFirstChild(C){const te=this.getFirstChildName(C);return te?new An(te,this.children_.get(te)):null}getLastChildName(C){const te=this.resolveIndex_(C);if(te){const pe=te.maxKey();return pe&&pe.name}else return this.children_.maxKey()}getLastChild(C){const te=this.getLastChildName(C);return te?new An(te,this.children_.get(te)):null}forEachChild(C,te){const pe=this.resolveIndex_(C);return pe?pe.inorderTraversal(Ee=>te(Ee.name,Ee.node)):this.children_.inorderTraversal(te)}getIterator(C){return this.getIteratorFrom(C.minPost(),C)}getIteratorFrom(C,te){const pe=this.resolveIndex_(te);if(pe)return pe.getIteratorFrom(C,Ee=>Ee);{const Ee=this.children_.getIteratorFrom(C.name,An.Wrap);let Pe=Ee.peek();for(;Pe!=null&&te.compare(Pe,C)<0;)Ee.getNext(),Pe=Ee.peek();return Ee}}getReverseIterator(C){return this.getReverseIteratorFrom(C.maxPost(),C)}getReverseIteratorFrom(C,te){const pe=this.resolveIndex_(te);if(pe)return pe.getReverseIteratorFrom(C,Ee=>Ee);{const Ee=this.children_.getReverseIteratorFrom(C.name,An.Wrap);let Pe=Ee.peek();for(;Pe!=null&&te.compare(Pe,C)>0;)Ee.getNext(),Pe=Ee.peek();return Ee}}compareTo(C){return this.isEmpty()?C.isEmpty()?0:-1:C.isLeafNode()||C.isEmpty()?1:C===fl?-1:0}withIndex(C){if(C===Jo||this.indexMap_.hasIndex(C))return this;{const te=this.indexMap_.addIndex(C,this.children_);return new zr(this.children_,this.priorityNode_,te)}}isIndexed(C){return C===Jo||this.indexMap_.hasIndex(C)}equals(C){if(C===this)return!0;if(C.isLeafNode())return!1;{const te=C;if(this.getPriority().equals(te.getPriority()))if(this.children_.count()===te.children_.count()){const pe=this.getIterator(jn),Ee=te.getIterator(jn);let Pe=pe.getNext(),De=Ee.getNext();for(;Pe&&De;){if(Pe.name!==De.name||!Pe.node.equals(De.node))return!1;Pe=pe.getNext(),De=Ee.getNext()}return Pe===null&&De===null}else return!1;else return!1}}resolveIndex_(C){return C===Jo?null:this.indexMap_.get(C.toString())}}zr.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gp extends zr{constructor(){super(new _o(Si),zr.EMPTY_NODE,bs.Default)}compareTo(C){return C===this?0:1}equals(C){return C===this}getPriority(){return this}getImmediateChild(C){return zr.EMPTY_NODE}isEmpty(){return!1}}const fl=new gp;Object.defineProperties(An,{MIN:{value:new An(as,zr.EMPTY_NODE)},MAX:{value:new An(ts,fl)}}),Ri.__EMPTY_NODE=zr.EMPTY_NODE,io.__childrenNodeConstructor=zr,no(fl),ld(fl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=!0;function hi(Y,C=null){if(Y===null)return zr.EMPTY_NODE;if(typeof Y=="object"&&".priority"in Y&&(C=Y[".priority"]),bt.assert(C===null||typeof C=="string"||typeof C=="number"||typeof C=="object"&&".sv"in C,"Invalid priority type found: "+typeof C),typeof Y=="object"&&".value"in Y&&Y[".value"]!==null&&(Y=Y[".value"]),typeof Y!="object"||".sv"in Y){const te=Y;return new io(te,hi(C))}if(!(Y instanceof Array)&&mp){const te=[];let pe=!1;if(Yi(Y,(De,Ke)=>{if(De.substring(0,1)!=="."){const Ye=hi(Ke);Ye.isEmpty()||(pe=pe||!Ye.getPriority().isEmpty(),te.push(new An(De,Ye)))}}),te.length===0)return zr.EMPTY_NODE;const Pe=dl(te,Ia,De=>De.name,Si);if(pe){const De=dl(te,jn.getCompare());return new zr(Pe,hi(C),new bs({".priority":De},{".priority":jn}))}else return new zr(Pe,hi(C),bs.Default)}else{let te=zr.EMPTY_NODE;return Yi(Y,(pe,Ee)=>{if(bt.contains(Y,pe)&&pe.substring(0,1)!=="."){const Pe=hi(Ee);(Pe.isLeafNode()||!Pe.isEmpty())&&(te=te.updateImmediateChild(pe,Pe))}}),te.updatePriority(hi(C))}}ad(hi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends Ql{constructor(C){super(),this.indexPath_=C,bt.assert(!En(C)&&wn(C)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(C){return C.getChild(this.indexPath_)}isDefinedOn(C){return!C.getChild(this.indexPath_).isEmpty()}compare(C,te){const pe=this.extractChild(C.node),Ee=this.extractChild(te.node),Pe=pe.compareTo(Ee);return Pe===0?js(C.name,te.name):Pe}makePost(C,te){const pe=hi(C),Ee=zr.EMPTY_NODE.updateChild(this.indexPath_,pe);return new An(te,Ee)}maxPost(){const C=zr.EMPTY_NODE.updateChild(this.indexPath_,fl);return new An(ts,C)}toString(){return wa(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends Ql{compare(C,te){const pe=C.node.compareTo(te.node);return pe===0?js(C.name,te.name):pe}isDefinedOn(C){return!0}indexedValueChanged(C,te){return!C.equals(te)}minPost(){return An.MIN}maxPost(){return An.MAX}makePost(C,te){const pe=hi(C);return new An(te,pe)}toString(){return".value"}}const hl=new Zu;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(Y){return{type:"value",snapshotNode:Y}}function ia(Y,C){return{type:"child_added",snapshotNode:C,childName:Y}}function gl(Y,C){return{type:"child_removed",snapshotNode:C,childName:Y}}function ml(Y,C,te){return{type:"child_changed",snapshotNode:C,childName:Y,oldSnap:te}}function yp(Y,C){return{type:"child_moved",snapshotNode:C,childName:Y}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(C){this.index_=C}updateChild(C,te,pe,Ee,Pe,De){bt.assert(C.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Ke=C.getImmediateChild(te);return Ke.getChild(Ee).equals(pe.getChild(Ee))&&Ke.isEmpty()===pe.isEmpty()||(De!=null&&(pe.isEmpty()?C.hasChild(te)?De.trackChildChange(gl(te,Ke)):bt.assert(C.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Ke.isEmpty()?De.trackChildChange(ia(te,pe)):De.trackChildChange(ml(te,pe,Ke))),C.isLeafNode()&&pe.isEmpty())?C:C.updateImmediateChild(te,pe).withIndex(this.index_)}updateFullNode(C,te,pe){return pe!=null&&(C.isLeafNode()||C.forEachChild(jn,(Ee,Pe)=>{te.hasChild(Ee)||pe.trackChildChange(gl(Ee,Pe))}),te.isLeafNode()||te.forEachChild(jn,(Ee,Pe)=>{if(C.hasChild(Ee)){const De=C.getImmediateChild(Ee);De.equals(Pe)||pe.trackChildChange(ml(Ee,Pe,De))}else pe.trackChildChange(ia(Ee,Pe))})),te.withIndex(this.index_)}updatePriority(C,te){return C.isEmpty()?zr.EMPTY_NODE:C.updatePriority(te)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(C){this.indexedFilter_=new ec(C.getIndex()),this.index_=C.getIndex(),this.startPost_=Pa.getStartPost_(C),this.endPost_=Pa.getEndPost_(C),this.startIsInclusive_=!C.startAfterSet_,this.endIsInclusive_=!C.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(C){const te=this.startIsInclusive_?this.index_.compare(this.getStartPost(),C)<=0:this.index_.compare(this.getStartPost(),C)<0,pe=this.endIsInclusive_?this.index_.compare(C,this.getEndPost())<=0:this.index_.compare(C,this.getEndPost())<0;return te&&pe}updateChild(C,te,pe,Ee,Pe,De){return this.matches(new An(te,pe))||(pe=zr.EMPTY_NODE),this.indexedFilter_.updateChild(C,te,pe,Ee,Pe,De)}updateFullNode(C,te,pe){te.isLeafNode()&&(te=zr.EMPTY_NODE);let Ee=te.withIndex(this.index_);Ee=Ee.updatePriority(zr.EMPTY_NODE);const Pe=this;return te.forEachChild(jn,(De,Ke)=>{Pe.matches(new An(De,Ke))||(Ee=Ee.updateImmediateChild(De,zr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(C,Ee,pe)}updatePriority(C,te){return C}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(C){if(C.hasStart()){const te=C.getIndexStartName();return C.getIndex().makePost(C.getIndexStartValue(),te)}else return C.getIndex().minPost()}static getEndPost_(C){if(C.hasEnd()){const te=C.getIndexEndName();return C.getIndex().makePost(C.getIndexEndValue(),te)}else return C.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(C){this.withinDirectionalStart=te=>this.reverse_?this.withinEndPost(te):this.withinStartPost(te),this.withinDirectionalEnd=te=>this.reverse_?this.withinStartPost(te):this.withinEndPost(te),this.withinStartPost=te=>{const pe=this.index_.compare(this.rangedFilter_.getStartPost(),te);return this.startIsInclusive_?pe<=0:pe<0},this.withinEndPost=te=>{const pe=this.index_.compare(te,this.rangedFilter_.getEndPost());return this.endIsInclusive_?pe<=0:pe<0},this.rangedFilter_=new Pa(C),this.index_=C.getIndex(),this.limit_=C.getLimit(),this.reverse_=!C.isViewFromLeft(),this.startIsInclusive_=!C.startAfterSet_,this.endIsInclusive_=!C.endBeforeSet_}updateChild(C,te,pe,Ee,Pe,De){return this.rangedFilter_.matches(new An(te,pe))||(pe=zr.EMPTY_NODE),C.getImmediateChild(te).equals(pe)?C:C.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(C,te,pe,Ee,Pe,De):this.fullLimitUpdateChild_(C,te,pe,Pe,De)}updateFullNode(C,te,pe){let Ee;if(te.isLeafNode()||te.isEmpty())Ee=zr.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<te.numChildren()&&te.isIndexed(this.index_)){Ee=zr.EMPTY_NODE.withIndex(this.index_);let Pe;this.reverse_?Pe=te.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):Pe=te.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let De=0;for(;Pe.hasNext()&&De<this.limit_;){const Ke=Pe.getNext();if(this.withinDirectionalStart(Ke))if(this.withinDirectionalEnd(Ke))Ee=Ee.updateImmediateChild(Ke.name,Ke.node),De++;else break;else continue}}else{Ee=te.withIndex(this.index_),Ee=Ee.updatePriority(zr.EMPTY_NODE);let Pe;this.reverse_?Pe=Ee.getReverseIterator(this.index_):Pe=Ee.getIterator(this.index_);let De=0;for(;Pe.hasNext();){const Ke=Pe.getNext();De<this.limit_&&this.withinDirectionalStart(Ke)&&this.withinDirectionalEnd(Ke)?De++:Ee=Ee.updateImmediateChild(Ke.name,zr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(C,Ee,pe)}updatePriority(C,te){return C}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(C,te,pe,Ee,Pe){let De;if(this.reverse_){const Gt=this.index_.getCompare();De=(rr,wr)=>Gt(wr,rr)}else De=this.index_.getCompare();const Ke=C;bt.assert(Ke.numChildren()===this.limit_,"");const Ye=new An(te,pe),Ze=this.reverse_?Ke.getFirstChild(this.index_):Ke.getLastChild(this.index_),Lt=this.rangedFilter_.matches(Ye);if(Ke.hasChild(te)){const Gt=Ke.getImmediateChild(te);let rr=Ee.getChildAfterChild(this.index_,Ze,this.reverse_);for(;rr!=null&&(rr.name===te||Ke.hasChild(rr.name));)rr=Ee.getChildAfterChild(this.index_,rr,this.reverse_);const wr=rr==null?1:De(rr,Ye);if(Lt&&!pe.isEmpty()&&wr>=0)return Pe?.trackChildChange(ml(te,pe,Gt)),Ke.updateImmediateChild(te,pe);{Pe?.trackChildChange(gl(te,Gt));const ri=Ke.updateImmediateChild(te,zr.EMPTY_NODE);return rr!=null&&this.rangedFilter_.matches(rr)?(Pe?.trackChildChange(ia(rr.name,rr.node)),ri.updateImmediateChild(rr.name,rr.node)):ri}}else return pe.isEmpty()?C:Lt&&De(Ze,Ye)>=0?(Pe!=null&&(Pe.trackChildChange(gl(Ze.name,Ze.node)),Pe.trackChildChange(ia(te,pe))),Ke.updateImmediateChild(te,pe).updateImmediateChild(Ze.name,zr.EMPTY_NODE)):C}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return bt.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return bt.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:as}hasEnd(){return this.endSet_}getIndexEndValue(){return bt.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return bt.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ts}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return bt.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jn}copy(){const C=new eu;return C.limitSet_=this.limitSet_,C.limit_=this.limit_,C.startSet_=this.startSet_,C.startAfterSet_=this.startAfterSet_,C.indexStartValue_=this.indexStartValue_,C.startNameSet_=this.startNameSet_,C.indexStartName_=this.indexStartName_,C.endSet_=this.endSet_,C.endBeforeSet_=this.endBeforeSet_,C.indexEndValue_=this.indexEndValue_,C.endNameSet_=this.endNameSet_,C.indexEndName_=this.indexEndName_,C.index_=this.index_,C.viewFrom_=this.viewFrom_,C}}function _p(Y){return Y.loadsAllData()?new ec(Y.getIndex()):Y.hasLimit()?new vp(Y):new Pa(Y)}function of(Y,C){const te=Y.copy();return te.limitSet_=!0,te.limit_=C,te.viewFrom_="l",te}function Ep(Y,C){const te=Y.copy();return te.limitSet_=!0,te.limit_=C,te.viewFrom_="r",te}function dd(Y,C,te){const pe=Y.copy();return pe.startSet_=!0,C===void 0&&(C=null),pe.indexStartValue_=C,te!=null?(pe.startNameSet_=!0,pe.indexStartName_=te):(pe.startNameSet_=!1,pe.indexStartName_=""),pe}function sf(Y,C,te){let pe;return Y.index_===Jo||te?pe=dd(Y,C,te):pe=dd(Y,C,ts),pe.startAfterSet_=!0,pe}function tc(Y,C,te){const pe=Y.copy();return pe.endSet_=!0,C===void 0&&(C=null),pe.indexEndValue_=C,te!==void 0?(pe.endNameSet_=!0,pe.indexEndName_=te):(pe.endNameSet_=!1,pe.indexEndName_=""),pe}function bp(Y,C,te){let pe;return Y.index_===Jo||te?pe=tc(Y,C,te):pe=tc(Y,C,as),pe.endBeforeSet_=!0,pe}function tu(Y,C){const te=Y.copy();return te.index_=C,te}function ru(Y){const C={};if(Y.isDefault())return C;let te;if(Y.index_===jn?te="$priority":Y.index_===hl?te="$value":Y.index_===Jo?te="$key":(bt.assert(Y.index_ instanceof Xu,"Unrecognized index type!"),te=Y.index_.toString()),C.orderBy=bt.stringify(te),Y.startSet_){const pe=Y.startAfterSet_?"startAfter":"startAt";C[pe]=bt.stringify(Y.indexStartValue_),Y.startNameSet_&&(C[pe]+=","+bt.stringify(Y.indexStartName_))}if(Y.endSet_){const pe=Y.endBeforeSet_?"endBefore":"endAt";C[pe]=bt.stringify(Y.indexEndValue_),Y.endNameSet_&&(C[pe]+=","+bt.stringify(Y.indexEndName_))}return Y.limitSet_&&(Y.isViewFromLeft()?C.limitToFirst=Y.limit_:C.limitToLast=Y.limit_),C}function Tp(Y){const C={};if(Y.startSet_&&(C.sp=Y.indexStartValue_,Y.startNameSet_&&(C.sn=Y.indexStartName_),C.sin=!Y.startAfterSet_),Y.endSet_&&(C.ep=Y.indexEndValue_,Y.endNameSet_&&(C.en=Y.indexEndName_),C.ein=!Y.endBeforeSet_),Y.limitSet_){C.l=Y.limit_;let te=Y.viewFrom_;te===""&&(Y.isViewFromLeft()?te="l":te="r"),C.vf=te}return Y.index_!==jn&&(C.i=Y.index_.toString()),C}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends ol{reportStats(C){throw new Error("Method not implemented.")}static getListenId_(C,te){return te!==void 0?"tag$"+te:(bt.assert(C._queryParams.isDefault(),"should have a tag if it's not a default query."),C._path.toString())}constructor(C,te,pe,Ee){super(),this.repoInfo_=C,this.onDataUpdate_=te,this.authTokenProvider_=pe,this.appCheckTokenProvider_=Ee,this.log_=ks("p:rest:"),this.listens_={}}listen(C,te,pe,Ee){const Pe=C._path.toString();this.log_("Listen called for "+Pe+" "+C._queryIdentifier);const De=rc.getListenId_(C,pe),Ke={};this.listens_[De]=Ke;const Ye=ru(C._queryParams);this.restRequest_(Pe+".json",Ye,(Ze,Lt)=>{let Gt=Lt;if(Ze===404&&(Gt=null,Ze=null),Ze===null&&this.onDataUpdate_(Pe,Gt,!1,pe),bt.safeGet(this.listens_,De)===Ke){let rr;Ze?Ze===401?rr="permission_denied":rr="rest_error:"+Ze:rr="ok",Ee(rr,null)}})}unlisten(C,te){const pe=rc.getListenId_(C,te);delete this.listens_[pe]}get(C){const te=ru(C._queryParams),pe=C._path.toString(),Ee=new bt.Deferred;return this.restRequest_(pe+".json",te,(Pe,De)=>{let Ke=De;Pe===404&&(Ke=null,Pe=null),Pe===null?(this.onDataUpdate_(pe,Ke,!1,null),Ee.resolve(Ke)):Ee.reject(new Error(Ke))}),Ee.promise}refreshAuthToken(C){}restRequest_(C,te={},pe){return te.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([Ee,Pe])=>{Ee&&Ee.accessToken&&(te.auth=Ee.accessToken),Pe&&Pe.token&&(te.ac=Pe.token);const De=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+C+"?ns="+this.repoInfo_.namespace+bt.querystring(te);this.log_("Sending REST request for "+De);const Ke=new XMLHttpRequest;Ke.onreadystatechange=()=>{if(pe&&Ke.readyState===4){this.log_("REST Response for "+De+" received. status:",Ke.status,"response:",Ke.responseText);let Ye=null;if(Ke.status>=200&&Ke.status<300){try{Ye=bt.jsonEval(Ke.responseText)}catch{co("Failed to parse JSON response for "+De+": "+Ke.responseText)}pe(null,Ye)}else Ke.status!==401&&Ke.status!==404&&co("Got unsuccessful REST response for "+De+" Status: "+Ke.status),pe(Ke.status);pe=null}},Ke.open("GET",De,!0),Ke.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this.rootNode_=zr.EMPTY_NODE}getNode(C){return this.rootNode_.getChild(C)}updateSnapshot(C,te){this.rootNode_=this.rootNode_.updateChild(C,te)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(){return{value:null,children:new Map}}function oa(Y,C,te){if(En(C))Y.value=te,Y.children.clear();else if(Y.value!==null)Y.value=Y.value.updateChild(C,te);else{const pe=wn(C);Y.children.has(pe)||Y.children.set(pe,jo());const Ee=Y.children.get(pe);C=oi(C),oa(Ee,C,te)}}function yl(Y,C){if(En(C))return Y.value=null,Y.children.clear(),!0;if(Y.value!==null){if(Y.value.isLeafNode())return!1;{const te=Y.value;return Y.value=null,te.forEachChild(jn,(pe,Ee)=>{oa(Y,new ti(pe),Ee)}),yl(Y,C)}}else if(Y.children.size>0){const te=wn(C);return C=oi(C),Y.children.has(te)&&yl(Y.children.get(te),C)&&Y.children.delete(te),Y.children.size===0}else return!0}function nc(Y,C,te){Y.value!==null?te(C,Y.value):Sp(Y,(pe,Ee)=>{const Pe=new ti(C.toString()+"/"+pe);nc(Ee,Pe,te)})}function Sp(Y,C){Y.children.forEach((te,pe)=>{C(pe,te)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(C){this.collection_=C,this.last_=null}get(){const C=this.collection_.get(),te=Object.assign({},C);return this.last_&&Yi(this.last_,(pe,Ee)=>{te[pe]=te[pe]-Ee}),this.last_=C,te}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=10*1e3,vl=30*1e3,pd=5*60*1e3;class fd{constructor(C,te){this.server_=te,this.statsToReport_={},this.statsListener_=new Ap(C);const pe=ic+(vl-ic)*Math.random();Bl(this.reportStats_.bind(this),Math.floor(pe))}reportStats_(){const C=this.statsListener_.get(),te={};let pe=!1;Yi(C,(Ee,Pe)=>{Pe>0&&bt.contains(this.statsToReport_,Ee)&&(te[Ee]=Pe,pe=!0)}),pe&&this.server_.reportStats(te),Bl(this.reportStats_.bind(this),Math.floor(Math.random()*2*pd))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var us;(function(Y){Y[Y.OVERWRITE=0]="OVERWRITE",Y[Y.MERGE=1]="MERGE",Y[Y.ACK_USER_WRITE=2]="ACK_USER_WRITE",Y[Y.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(us||(us={}));function oc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ac(Y){return{fromUser:!1,fromServer:!0,queryId:Y,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(C,te,pe){this.path=C,this.affectedTree=te,this.revert=pe,this.type=us.ACK_USER_WRITE,this.source=oc()}operationForChild(C){if(En(this.path)){if(this.affectedTree.value!=null)return bt.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const te=this.affectedTree.subtree(new ti(C));return new nu(Fn(),te,this.revert)}}else return bt.assert(wn(this.path)===C,"operationForChild called for unrelated child."),new nu(oi(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(C,te){this.source=C,this.path=te,this.type=us.LISTEN_COMPLETE}operationForChild(C){return En(this.path)?new _l(this.source,Fn()):new _l(this.source,oi(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(C,te,pe){this.source=C,this.path=te,this.snap=pe,this.type=us.OVERWRITE}operationForChild(C){return En(this.path)?new Na(this.source,Fn(),this.snap.getImmediateChild(C)):new Na(this.source,oi(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(C,te,pe){this.source=C,this.path=te,this.children=pe,this.type=us.MERGE}operationForChild(C){if(En(this.path)){const te=this.children.subtree(new ti(C));return te.isEmpty()?null:te.value?new Na(this.source,Fn(),te.value):new Xi(this.source,Fn(),te)}else return bt.assert(wn(this.path)===C,"Can't get a merge for a child not on the path of the operation"),new Xi(this.source,oi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(C,te,pe){this.node_=C,this.fullyInitialized_=te,this.filtered_=pe}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(C){if(En(C))return this.isFullyInitialized()&&!this.filtered_;const te=wn(C);return this.isCompleteForChild(te)}isCompleteForChild(C){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(C)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(C){this.query_=C,this.index_=this.query_._queryParams.getIndex()}}function wp(Y,C,te,pe){const Ee=[],Pe=[];return C.forEach(De=>{De.type==="child_changed"&&Y.index_.indexedValueChanged(De.oldSnap,De.snapshotNode)&&Pe.push(yp(De.childName,De.snapshotNode))}),El(Y,Ee,"child_removed",C,pe,te),El(Y,Ee,"child_added",C,pe,te),El(Y,Ee,"child_moved",Pe,pe,te),El(Y,Ee,"child_changed",C,pe,te),El(Y,Ee,"value",C,pe,te),Ee}function El(Y,C,te,pe,Ee,Pe){const De=pe.filter(Ke=>Ke.type===te);De.sort((Ke,Ye)=>Ip(Y,Ke,Ye)),De.forEach(Ke=>{const Ye=Rp(Y,Ke,Pe);Ee.forEach(Ze=>{Ze.respondsTo(Ke.type)&&C.push(Ze.createEvent(Ye,Y.query_))})})}function Rp(Y,C,te){return C.type==="value"||C.type==="child_removed"||(C.prevName=te.getPredecessorChildName(C.childName,C.snapshotNode,Y.index_)),C}function Ip(Y,C,te){if(C.childName==null||te.childName==null)throw bt.assertionError("Should only compare child_ events.");const pe=new An(C.childName,C.snapshotNode),Ee=new An(te.childName,te.snapshotNode);return Y.index_.compare(pe,Ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(Y,C){return{eventCache:Y,serverCache:C}}function Tl(Y,C,te,pe){return bl(new xi(C,te,pe),Y.serverCache)}function lc(Y,C,te,pe){return bl(Y.eventCache,new xi(C,te,pe))}function iu(Y){return Y.eventCache.isFullyInitialized()?Y.eventCache.getNode():null}function sa(Y){return Y.serverCache.isFullyInitialized()?Y.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou;const hd=()=>(ou||(ou=new _o(Jc)),ou);class gi{static fromObject(C){let te=new gi(null);return Yi(C,(pe,Ee)=>{te=te.set(new ti(pe),Ee)}),te}constructor(C,te=hd()){this.value=C,this.children=te}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(C,te){if(this.value!=null&&te(this.value))return{path:Fn(),value:this.value};if(En(C))return null;{const pe=wn(C),Ee=this.children.get(pe);if(Ee!==null){const Pe=Ee.findRootMostMatchingPathAndValue(oi(C),te);return Pe!=null?{path:Mn(new ti(pe),Pe.path),value:Pe.value}:null}else return null}}findRootMostValueAndPath(C){return this.findRootMostMatchingPathAndValue(C,()=>!0)}subtree(C){if(En(C))return this;{const te=wn(C),pe=this.children.get(te);return pe!==null?pe.subtree(oi(C)):new gi(null)}}set(C,te){if(En(C))return new gi(te,this.children);{const pe=wn(C),Pe=(this.children.get(pe)||new gi(null)).set(oi(C),te),De=this.children.insert(pe,Pe);return new gi(this.value,De)}}remove(C){if(En(C))return this.children.isEmpty()?new gi(null):new gi(null,this.children);{const te=wn(C),pe=this.children.get(te);if(pe){const Ee=pe.remove(oi(C));let Pe;return Ee.isEmpty()?Pe=this.children.remove(te):Pe=this.children.insert(te,Ee),this.value===null&&Pe.isEmpty()?new gi(null):new gi(this.value,Pe)}else return this}}get(C){if(En(C))return this.value;{const te=wn(C),pe=this.children.get(te);return pe?pe.get(oi(C)):null}}setTree(C,te){if(En(C))return te;{const pe=wn(C),Pe=(this.children.get(pe)||new gi(null)).setTree(oi(C),te);let De;return Pe.isEmpty()?De=this.children.remove(pe):De=this.children.insert(pe,Pe),new gi(this.value,De)}}fold(C){return this.fold_(Fn(),C)}fold_(C,te){const pe={};return this.children.inorderTraversal((Ee,Pe)=>{pe[Ee]=Pe.fold_(Mn(C,Ee),te)}),te(C,this.value,pe)}findOnPath(C,te){return this.findOnPath_(C,Fn(),te)}findOnPath_(C,te,pe){const Ee=this.value?pe(te,this.value):!1;if(Ee)return Ee;if(En(C))return null;{const Pe=wn(C),De=this.children.get(Pe);return De?De.findOnPath_(oi(C),Mn(te,Pe),pe):null}}foreachOnPath(C,te){return this.foreachOnPath_(C,Fn(),te)}foreachOnPath_(C,te,pe){if(En(C))return this;{this.value&&pe(te,this.value);const Ee=wn(C),Pe=this.children.get(Ee);return Pe?Pe.foreachOnPath_(oi(C),Mn(te,Ee),pe):new gi(null)}}foreach(C){this.foreach_(Fn(),C)}foreach_(C,te){this.children.inorderTraversal((pe,Ee)=>{Ee.foreach_(Mn(C,pe),te)}),this.value&&te(C,this.value)}foreachChild(C){this.children.inorderTraversal((te,pe)=>{pe.value&&C(te,pe.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(C){this.writeTree_=C}static empty(){return new zo(new gi(null))}}function aa(Y,C,te){if(En(C))return new zo(new gi(te));{const pe=Y.writeTree_.findRootMostValueAndPath(C);if(pe!=null){const Ee=pe.path;let Pe=pe.value;const De=fo(Ee,C);return Pe=Pe.updateChild(De,te),new zo(Y.writeTree_.set(Ee,Pe))}else{const Ee=new gi(te),Pe=Y.writeTree_.setTree(C,Ee);return new zo(Pe)}}}function gd(Y,C,te){let pe=Y;return Yi(te,(Ee,Pe)=>{pe=aa(pe,Mn(C,Ee),Pe)}),pe}function yd(Y,C){if(En(C))return zo.empty();{const te=Y.writeTree_.setTree(C,new gi(null));return new zo(te)}}function su(Y,C){return la(Y,C)!=null}function la(Y,C){const te=Y.writeTree_.findRootMostValueAndPath(C);return te!=null?Y.writeTree_.get(te.path).getChild(fo(te.path,C)):null}function au(Y){const C=[],te=Y.writeTree_.value;return te!=null?te.isLeafNode()||te.forEachChild(jn,(pe,Ee)=>{C.push(new An(pe,Ee))}):Y.writeTree_.children.inorderTraversal((pe,Ee)=>{Ee.value!=null&&C.push(new An(pe,Ee.value))}),C}function Eo(Y,C){if(En(C))return Y;{const te=la(Y,C);return te!=null?new zo(new gi(te)):new zo(Y.writeTree_.subtree(C))}}function vd(Y){return Y.writeTree_.isEmpty()}function xa(Y,C){return uc(Fn(),Y.writeTree_,C)}function uc(Y,C,te){if(C.value!=null)return te.updateChild(Y,C.value);{let pe=null;return C.children.inorderTraversal((Ee,Pe)=>{Ee===".priority"?(bt.assert(Pe.value!==null,"Priority writes must always be leaf nodes"),pe=Pe.value):te=uc(Mn(Y,Ee),Pe,te)}),!te.getChild(Y).isEmpty()&&pe!==null&&(te=te.updateChild(Mn(Y,".priority"),pe)),te}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(Y,C){return rs(C,Y)}function Cp(Y,C,te,pe,Ee){bt.assert(pe>Y.lastWriteId,"Stacking an older write on top of newer ones"),Ee===void 0&&(Ee=!0),Y.allWrites.push({path:C,snap:te,writeId:pe,visible:Ee}),Ee&&(Y.visibleWrites=aa(Y.visibleWrites,C,te)),Y.lastWriteId=pe}function uu(Y,C,te,pe){bt.assert(pe>Y.lastWriteId,"Stacking an older merge on top of newer ones"),Y.allWrites.push({path:C,children:te,writeId:pe,visible:!0}),Y.visibleWrites=gd(Y.visibleWrites,C,te),Y.lastWriteId=pe}function bo(Y,C){for(let te=0;te<Y.allWrites.length;te++){const pe=Y.allWrites[te];if(pe.writeId===C)return pe}return null}function lf(Y,C){const te=Y.allWrites.findIndex(Ke=>Ke.writeId===C);bt.assert(te>=0,"removeWrite called with nonexistent writeId.");const pe=Y.allWrites[te];Y.allWrites.splice(te,1);let Ee=pe.visible,Pe=!1,De=Y.allWrites.length-1;for(;Ee&&De>=0;){const Ke=Y.allWrites[De];Ke.visible&&(De>=te&&uf(Ke,pe.path)?Ee=!1:Qi(pe.path,Ke.path)&&(Pe=!0)),De--}if(Ee){if(Pe)return cc(Y),!0;if(pe.snap)Y.visibleWrites=yd(Y.visibleWrites,pe.path);else{const Ke=pe.children;Yi(Ke,Ye=>{Y.visibleWrites=yd(Y.visibleWrites,Mn(pe.path,Ye))})}return!0}else return!1}function uf(Y,C){if(Y.snap)return Qi(Y.path,C);for(const te in Y.children)if(Y.children.hasOwnProperty(te)&&Qi(Mn(Y.path,te),C))return!0;return!1}function cc(Y){Y.visibleWrites=Pp(Y.allWrites,To,Fn()),Y.allWrites.length>0?Y.lastWriteId=Y.allWrites[Y.allWrites.length-1].writeId:Y.lastWriteId=-1}function To(Y){return Y.visible}function Pp(Y,C,te){let pe=zo.empty();for(let Ee=0;Ee<Y.length;++Ee){const Pe=Y[Ee];if(C(Pe)){const De=Pe.path;let Ke;if(Pe.snap)Qi(te,De)?(Ke=fo(te,De),pe=aa(pe,Ke,Pe.snap)):Qi(De,te)&&(Ke=fo(De,te),pe=aa(pe,Fn(),Pe.snap.getChild(Ke)));else if(Pe.children){if(Qi(te,De))Ke=fo(te,De),pe=gd(pe,Ke,Pe.children);else if(Qi(De,te))if(Ke=fo(De,te),En(Ke))pe=gd(pe,Fn(),Pe.children);else{const Ye=bt.safeGet(Pe.children,wn(Ke));if(Ye){const Ze=Ye.getChild(oi(Ke));pe=aa(pe,Fn(),Ze)}}}else throw bt.assertionError("WriteRecord should have .snap or .children")}}return pe}function Cr(Y,C,te,pe,Ee){if(!pe&&!Ee){const Pe=la(Y.visibleWrites,C);if(Pe!=null)return Pe;{const De=Eo(Y.visibleWrites,C);if(vd(De))return te;if(te==null&&!su(De,Fn()))return null;{const Ke=te||zr.EMPTY_NODE;return xa(De,Ke)}}}else{const Pe=Eo(Y.visibleWrites,C);if(!Ee&&vd(Pe))return te;if(!Ee&&te==null&&!su(Pe,Fn()))return null;{const De=function(Ze){return(Ze.visible||Ee)&&(!pe||!~pe.indexOf(Ze.writeId))&&(Qi(Ze.path,C)||Qi(C,Ze.path))},Ke=Pp(Y.allWrites,De,C),Ye=te||zr.EMPTY_NODE;return xa(Ke,Ye)}}}function Sl(Y,C,te){let pe=zr.EMPTY_NODE;const Ee=la(Y.visibleWrites,C);if(Ee)return Ee.isLeafNode()||Ee.forEachChild(jn,(Pe,De)=>{pe=pe.updateImmediateChild(Pe,De)}),pe;if(te){const Pe=Eo(Y.visibleWrites,C);return te.forEachChild(jn,(De,Ke)=>{const Ye=xa(Eo(Pe,new ti(De)),Ke);pe=pe.updateImmediateChild(De,Ye)}),au(Pe).forEach(De=>{pe=pe.updateImmediateChild(De.name,De.node)}),pe}else{const Pe=Eo(Y.visibleWrites,C);return au(Pe).forEach(De=>{pe=pe.updateImmediateChild(De.name,De.node)}),pe}}function _d(Y,C,te,pe,Ee){bt.assert(pe||Ee,"Either existingEventSnap or existingServerSnap must exist");const Pe=Mn(C,te);if(su(Y.visibleWrites,Pe))return null;{const De=Eo(Y.visibleWrites,Pe);return vd(De)?Ee.getChild(te):xa(De,Ee.getChild(te))}}function Np(Y,C,te,pe){const Ee=Mn(C,te),Pe=la(Y.visibleWrites,Ee);if(Pe!=null)return Pe;if(pe.isCompleteForChild(te)){const De=Eo(Y.visibleWrites,Ee);return xa(De,pe.getNode().getImmediateChild(te))}else return null}function cf(Y,C){return la(Y.visibleWrites,C)}function cu(Y,C,te,pe,Ee,Pe,De){let Ke;const Ye=Eo(Y.visibleWrites,C),Ze=la(Ye,Fn());if(Ze!=null)Ke=Ze;else if(te!=null)Ke=xa(Ye,te);else return[];if(Ke=Ke.withIndex(De),!Ke.isEmpty()&&!Ke.isLeafNode()){const Lt=[],Gt=De.getCompare(),rr=Pe?Ke.getReverseIteratorFrom(pe,De):Ke.getIteratorFrom(pe,De);let wr=rr.getNext();for(;wr&&Lt.length<Ee;)Gt(wr,pe)!==0&&Lt.push(wr),wr=rr.getNext();return Lt}else return[]}function dc(){return{visibleWrites:zo.empty(),allWrites:[],lastWriteId:-1}}function Al(Y,C,te,pe){return Cr(Y.writeTree,Y.treePath,C,te,pe)}function pc(Y,C){return Sl(Y.writeTree,Y.treePath,C)}function Ed(Y,C,te,pe){return _d(Y.writeTree,Y.treePath,C,te,pe)}function du(Y,C){return cf(Y.writeTree,Mn(Y.treePath,C))}function bd(Y,C,te,pe,Ee,Pe){return cu(Y.writeTree,Y.treePath,C,te,pe,Ee,Pe)}function pu(Y,C,te){return Np(Y.writeTree,Y.treePath,C,te)}function oo(Y,C){return rs(Mn(Y.treePath,C),Y.writeTree)}function rs(Y,C){return{treePath:Y,writeTree:C}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.changeMap=new Map}trackChildChange(C){const te=C.type,pe=C.childName;bt.assert(te==="child_added"||te==="child_changed"||te==="child_removed","Only child changes supported for tracking"),bt.assert(pe!==".priority","Only non-priority child changes can be tracked.");const Ee=this.changeMap.get(pe);if(Ee){const Pe=Ee.type;if(te==="child_added"&&Pe==="child_removed")this.changeMap.set(pe,ml(pe,C.snapshotNode,Ee.snapshotNode));else if(te==="child_removed"&&Pe==="child_added")this.changeMap.delete(pe);else if(te==="child_removed"&&Pe==="child_changed")this.changeMap.set(pe,gl(pe,Ee.oldSnap));else if(te==="child_changed"&&Pe==="child_added")this.changeMap.set(pe,ia(pe,C.snapshotNode));else if(te==="child_changed"&&Pe==="child_changed")this.changeMap.set(pe,ml(pe,C.snapshotNode,Ee.oldSnap));else throw bt.assertionError("Illegal combination of changes: "+C+" occurred after "+Ee)}else this.changeMap.set(pe,C)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{getCompleteChild(C){return null}getChildAfterChild(C,te,pe){return null}}const Td=new xp;class Yo{constructor(C,te,pe=null){this.writes_=C,this.viewCache_=te,this.optCompleteServerCache_=pe}getCompleteChild(C){const te=this.viewCache_.eventCache;if(te.isCompleteForChild(C))return te.getNode().getImmediateChild(C);{const pe=this.optCompleteServerCache_!=null?new xi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pu(this.writes_,C,pe)}}getChildAfterChild(C,te,pe){const Ee=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sa(this.viewCache_),Pe=bd(this.writes_,Ee,te,1,pe,C);return Pe.length===0?null:Pe[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(Y){return{filter:Y}}function Ts(Y,C){bt.assert(C.eventCache.getNode().isIndexed(Y.filter.getIndex()),"Event snap not indexed"),bt.assert(C.serverCache.getNode().isIndexed(Y.filter.getIndex()),"Server snap not indexed")}function df(Y,C,te,pe,Ee){const Pe=new ua;let De,Ke;if(te.type===us.OVERWRITE){const Ze=te;Ze.source.fromUser?De=fc(Y,C,Ze.path,Ze.snap,pe,Ee,Pe):(bt.assert(Ze.source.fromServer,"Unknown source."),Ke=Ze.source.tagged||C.serverCache.isFiltered()&&!En(Ze.path),De=fu(Y,C,Ze.path,Ze.snap,pe,Ee,Ke,Pe))}else if(te.type===us.MERGE){const Ze=te;Ze.source.fromUser?De=hc(Y,C,Ze.path,Ze.children,pe,Ee,Pe):(bt.assert(Ze.source.fromServer,"Unknown source."),Ke=Ze.source.tagged||C.serverCache.isFiltered(),De=Lo(Y,C,Ze.path,Ze.children,pe,Ee,Ke,Pe))}else if(te.type===us.ACK_USER_WRITE){const Ze=te;Ze.revert?De=Wi(Y,C,Ze.path,pe,Ee,Pe):De=Kn(Y,C,Ze.path,Ze.affectedTree,pe,Ee,Pe)}else if(te.type===us.LISTEN_COMPLETE)De=so(Y,C,te.path,pe,Pe);else throw bt.assertionError("Unknown operation type: "+te.type);const Ye=Pe.getChanges();return kp(C,De,Ye),{viewCache:De,changes:Ye}}function kp(Y,C,te){const pe=C.eventCache;if(pe.isFullyInitialized()){const Ee=pe.getNode().isLeafNode()||pe.getNode().isEmpty(),Pe=iu(Y);(te.length>0||!Y.eventCache.isFullyInitialized()||Ee&&!pe.getNode().equals(Pe)||!pe.getNode().getPriority().equals(Pe.getPriority()))&&te.push(cd(iu(C)))}}function Sd(Y,C,te,pe,Ee,Pe){const De=C.eventCache;if(du(pe,te)!=null)return C;{let Ke,Ye;if(En(te))if(bt.assert(C.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),C.serverCache.isFiltered()){const Ze=sa(C),Lt=Ze instanceof zr?Ze:zr.EMPTY_NODE,Gt=pc(pe,Lt);Ke=Y.filter.updateFullNode(C.eventCache.getNode(),Gt,Pe)}else{const Ze=Al(pe,sa(C));Ke=Y.filter.updateFullNode(C.eventCache.getNode(),Ze,Pe)}else{const Ze=wn(te);if(Ze===".priority"){bt.assert(Wo(te)===1,"Can't have a priority with additional path components");const Lt=De.getNode();Ye=C.serverCache.getNode();const Gt=Ed(pe,te,Lt,Ye);Gt!=null?Ke=Y.filter.updatePriority(Lt,Gt):Ke=De.getNode()}else{const Lt=oi(te);let Gt;if(De.isCompleteForChild(Ze)){Ye=C.serverCache.getNode();const rr=Ed(pe,te,De.getNode(),Ye);rr!=null?Gt=De.getNode().getImmediateChild(Ze).updateChild(Lt,rr):Gt=De.getNode().getImmediateChild(Ze)}else Gt=pu(pe,Ze,C.serverCache);Gt!=null?Ke=Y.filter.updateChild(De.getNode(),Ze,Gt,Lt,Ee,Pe):Ke=De.getNode()}}return Tl(C,Ke,De.isFullyInitialized()||En(te),Y.filter.filtersNodes())}}function fu(Y,C,te,pe,Ee,Pe,De,Ke){const Ye=C.serverCache;let Ze;const Lt=De?Y.filter:Y.filter.getIndexedFilter();if(En(te))Ze=Lt.updateFullNode(Ye.getNode(),pe,null);else if(Lt.filtersNodes()&&!Ye.isFiltered()){const wr=Ye.getNode().updateChild(te,pe);Ze=Lt.updateFullNode(Ye.getNode(),wr,null)}else{const wr=wn(te);if(!Ye.isCompleteForPath(te)&&Wo(te)>1)return C;const $r=oi(te),mo=Ye.getNode().getImmediateChild(wr).updateChild($r,pe);wr===".priority"?Ze=Lt.updatePriority(Ye.getNode(),mo):Ze=Lt.updateChild(Ye.getNode(),wr,mo,$r,Td,null)}const Gt=lc(C,Ze,Ye.isFullyInitialized()||En(te),Lt.filtersNodes()),rr=new Yo(Ee,Gt,Pe);return Sd(Y,Gt,te,Ee,rr,Ke)}function fc(Y,C,te,pe,Ee,Pe,De){const Ke=C.eventCache;let Ye,Ze;const Lt=new Yo(Ee,C,Pe);if(En(te))Ze=Y.filter.updateFullNode(C.eventCache.getNode(),pe,De),Ye=Tl(C,Ze,!0,Y.filter.filtersNodes());else{const Gt=wn(te);if(Gt===".priority")Ze=Y.filter.updatePriority(C.eventCache.getNode(),pe),Ye=Tl(C,Ze,Ke.isFullyInitialized(),Ke.isFiltered());else{const rr=oi(te),wr=Ke.getNode().getImmediateChild(Gt);let $r;if(En(rr))$r=pe;else{const ri=Lt.getCompleteChild(Gt);ri!=null?Jl(rr)===".priority"&&ri.getChild(Ra(rr)).isEmpty()?$r=ri:$r=ri.updateChild(rr,pe):$r=zr.EMPTY_NODE}if(wr.equals($r))Ye=C;else{const ri=Y.filter.updateChild(Ke.getNode(),Gt,$r,rr,Lt,De);Ye=Tl(C,ri,Ke.isFullyInitialized(),Y.filter.filtersNodes())}}}return Ye}function jp(Y,C){return Y.eventCache.isCompleteForChild(C)}function hc(Y,C,te,pe,Ee,Pe,De){let Ke=C;return pe.foreach((Ye,Ze)=>{const Lt=Mn(te,Ye);jp(C,wn(Lt))&&(Ke=fc(Y,Ke,Lt,Ze,Ee,Pe,De))}),pe.foreach((Ye,Ze)=>{const Lt=Mn(te,Ye);jp(C,wn(Lt))||(Ke=fc(Y,Ke,Lt,Ze,Ee,Pe,De))}),Ke}function gc(Y,C,te){return te.foreach((pe,Ee)=>{C=C.updateChild(pe,Ee)}),C}function Lo(Y,C,te,pe,Ee,Pe,De,Ke){if(C.serverCache.getNode().isEmpty()&&!C.serverCache.isFullyInitialized())return C;let Ye=C,Ze;En(te)?Ze=pe:Ze=new gi(null).setTree(te,pe);const Lt=C.serverCache.getNode();return Ze.children.inorderTraversal((Gt,rr)=>{if(Lt.hasChild(Gt)){const wr=C.serverCache.getNode().getImmediateChild(Gt),$r=gc(Y,wr,rr);Ye=fu(Y,Ye,new ti(Gt),$r,Ee,Pe,De,Ke)}}),Ze.children.inorderTraversal((Gt,rr)=>{const wr=!C.serverCache.isCompleteForChild(Gt)&&rr.value===null;if(!Lt.hasChild(Gt)&&!wr){const $r=C.serverCache.getNode().getImmediateChild(Gt),ri=gc(Y,$r,rr);Ye=fu(Y,Ye,new ti(Gt),ri,Ee,Pe,De,Ke)}}),Ye}function Kn(Y,C,te,pe,Ee,Pe,De){if(du(Ee,te)!=null)return C;const Ke=C.serverCache.isFiltered(),Ye=C.serverCache;if(pe.value!=null){if(En(te)&&Ye.isFullyInitialized()||Ye.isCompleteForPath(te))return fu(Y,C,te,Ye.getNode().getChild(te),Ee,Pe,Ke,De);if(En(te)){let Ze=new gi(null);return Ye.getNode().forEachChild(Jo,(Lt,Gt)=>{Ze=Ze.set(new ti(Lt),Gt)}),Lo(Y,C,te,Ze,Ee,Pe,Ke,De)}else return C}else{let Ze=new gi(null);return pe.foreach((Lt,Gt)=>{const rr=Mn(te,Lt);Ye.isCompleteForPath(rr)&&(Ze=Ze.set(Lt,Ye.getNode().getChild(rr)))}),Lo(Y,C,te,Ze,Ee,Pe,Ke,De)}}function so(Y,C,te,pe,Ee){const Pe=C.serverCache,De=lc(C,Pe.getNode(),Pe.isFullyInitialized()||En(te),Pe.isFiltered());return Sd(Y,De,te,pe,Td,Ee)}function Wi(Y,C,te,pe,Ee,Pe){let De;if(du(pe,te)!=null)return C;{const Ke=new Yo(pe,C,Ee),Ye=C.eventCache.getNode();let Ze;if(En(te)||wn(te)===".priority"){let Lt;if(C.serverCache.isFullyInitialized())Lt=Al(pe,sa(C));else{const Gt=C.serverCache.getNode();bt.assert(Gt instanceof zr,"serverChildren would be complete if leaf node"),Lt=pc(pe,Gt)}Lt=Lt,Ze=Y.filter.updateFullNode(Ye,Lt,Pe)}else{const Lt=wn(te);let Gt=pu(pe,Lt,C.serverCache);Gt==null&&C.serverCache.isCompleteForChild(Lt)&&(Gt=Ye.getImmediateChild(Lt)),Gt!=null?Ze=Y.filter.updateChild(Ye,Lt,Gt,oi(te),Ke,Pe):C.eventCache.getNode().hasChild(Lt)?Ze=Y.filter.updateChild(Ye,Lt,zr.EMPTY_NODE,oi(te),Ke,Pe):Ze=Ye,Ze.isEmpty()&&C.serverCache.isFullyInitialized()&&(De=Al(pe,sa(C)),De.isLeafNode()&&(Ze=Y.filter.updateFullNode(Ze,De,Pe)))}return De=C.serverCache.isFullyInitialized()||du(pe,Fn())!=null,Tl(C,Ze,De,Y.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(C,te){this.query_=C,this.eventRegistrations_=[];const pe=this.query_._queryParams,Ee=new ec(pe.getIndex()),Pe=_p(pe);this.processor_=Dp(Pe);const De=te.serverCache,Ke=te.eventCache,Ye=Ee.updateFullNode(zr.EMPTY_NODE,De.getNode(),null),Ze=Pe.updateFullNode(zr.EMPTY_NODE,Ke.getNode(),null),Lt=new xi(Ye,De.isFullyInitialized(),Ee.filtersNodes()),Gt=new xi(Ze,Ke.isFullyInitialized(),Pe.filtersNodes());this.viewCache_=bl(Gt,Lt),this.eventGenerator_=new Op(this.query_)}get query(){return this.query_}}function Qo(Y){return Y.viewCache_.serverCache.getNode()}function Ol(Y){return iu(Y.viewCache_)}function Zi(Y,C){const te=sa(Y.viewCache_);return te&&(Y.query._queryParams.loadsAllData()||!En(C)&&!te.getImmediateChild(wn(C)).isEmpty())?te.getChild(C):null}function wl(Y){return Y.eventRegistrations_.length===0}function Da(Y,C){Y.eventRegistrations_.push(C)}function hu(Y,C,te){const pe=[];if(te){bt.assert(C==null,"A cancel should cancel all event registrations.");const Ee=Y.query._path;Y.eventRegistrations_.forEach(Pe=>{const De=Pe.createCancelEvent(te,Ee);De&&pe.push(De)})}if(C){let Ee=[];for(let Pe=0;Pe<Y.eventRegistrations_.length;++Pe){const De=Y.eventRegistrations_[Pe];if(!De.matches(C))Ee.push(De);else if(C.hasAnyCallback()){Ee=Ee.concat(Y.eventRegistrations_.slice(Pe+1));break}}Y.eventRegistrations_=Ee}else Y.eventRegistrations_=[];return pe}function mc(Y,C,te,pe){C.type===us.MERGE&&C.source.queryId!==null&&(bt.assert(sa(Y.viewCache_),"We should always have a full cache before handling merges"),bt.assert(iu(Y.viewCache_),"Missing event cache, even though we have a server cache"));const Ee=Y.viewCache_,Pe=df(Y.processor_,Ee,C,te,pe);return Ts(Y.processor_,Pe.viewCache),bt.assert(Pe.viewCache.serverCache.isFullyInitialized()||!Ee.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),Y.viewCache_=Pe.viewCache,Io(Y,Pe.changes,Pe.viewCache.eventCache.getNode(),null)}function gu(Y,C){const te=Y.viewCache_.eventCache,pe=[];return te.getNode().isLeafNode()||te.getNode().forEachChild(jn,(Pe,De)=>{pe.push(ia(Pe,De))}),te.isFullyInitialized()&&pe.push(cd(te.getNode())),Io(Y,pe,te.getNode(),C)}function Io(Y,C,te,pe){const Ee=pe?[pe]:Y.eventRegistrations_;return wp(Y.eventGenerator_,C,te,Ee)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl;class ka{constructor(){this.views=new Map}}function Us(Y){bt.assert(!Rl,"__referenceConstructor has already been defined"),Rl=Y}function yc(){return bt.assert(Rl,"Reference.ts has not been loaded"),Rl}function Ad(Y){return Y.views.size===0}function Ss(Y,C,te,pe){const Ee=C.source.queryId;if(Ee!==null){const Pe=Y.views.get(Ee);return bt.assert(Pe!=null,"SyncTree gave us an op for an invalid query."),mc(Pe,C,te,pe)}else{let Pe=[];for(const De of Y.views.values())Pe=Pe.concat(mc(De,C,te,pe));return Pe}}function mu(Y,C,te,pe,Ee){const Pe=C._queryIdentifier,De=Y.views.get(Pe);if(!De){let Ke=Al(te,Ee?pe:null),Ye=!1;Ke?Ye=!0:pe instanceof zr?(Ke=pc(te,pe),Ye=!1):(Ke=zr.EMPTY_NODE,Ye=!1);const Ze=bl(new xi(Ke,Ye,!1),new xi(pe,Ee,!1));return new go(C,Ze)}return De}function ca(Y,C,te,pe,Ee,Pe){const De=mu(Y,C,pe,Ee,Pe);return Y.views.has(C._queryIdentifier)||Y.views.set(C._queryIdentifier,De),Da(De,te),gu(De,te)}function vc(Y,C,te,pe){const Ee=C._queryIdentifier,Pe=[];let De=[];const Ke=Di(Y);if(Ee==="default")for(const[Ye,Ze]of Y.views.entries())De=De.concat(hu(Ze,te,pe)),wl(Ze)&&(Y.views.delete(Ye),Ze.query._queryParams.loadsAllData()||Pe.push(Ze.query));else{const Ye=Y.views.get(Ee);Ye&&(De=De.concat(hu(Ye,te,pe)),wl(Ye)&&(Y.views.delete(Ee),Ye.query._queryParams.loadsAllData()||Pe.push(Ye.query)))}return Ke&&!Di(Y)&&Pe.push(new(yc())(C._repo,C._path)),{removed:Pe,events:De}}function Il(Y){const C=[];for(const te of Y.views.values())te.query._queryParams.loadsAllData()||C.push(te);return C}function As(Y,C){let te=null;for(const pe of Y.views.values())te=te||Zi(pe,C);return te}function yu(Y,C){if(C._queryParams.loadsAllData())return cs(Y);{const pe=C._queryIdentifier;return Y.views.get(pe)}}function vu(Y,C){return yu(Y,C)!=null}function Di(Y){return cs(Y)!=null}function cs(Y){for(const C of Y.views.values())if(C.query._queryParams.loadsAllData())return C;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo;function Fo(Y){bt.assert(!qo,"__referenceConstructor has already been defined"),qo=Y}function Lp(){return bt.assert(qo,"Reference.ts has not been loaded"),qo}let Od=1;class _c{constructor(C){this.listenProvider_=C,this.syncPointTree_=new gi(null),this.pendingWriteTree_=dc(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wd(Y,C,te,pe,Ee){return Cp(Y.pendingWriteTree_,C,te,pe,Ee),Ee?Fa(Y,new Na(oc(),C,te)):[]}function da(Y,C,te,pe){uu(Y.pendingWriteTree_,C,te,pe);const Ee=gi.fromObject(te);return Fa(Y,new Xi(oc(),C,Ee))}function Bs(Y,C,te=!1){const pe=bo(Y.pendingWriteTree_,C);if(lf(Y.pendingWriteTree_,C)){let Pe=new gi(null);return pe.snap!=null?Pe=Pe.set(Fn(),!0):Yi(pe.children,De=>{Pe=Pe.set(new ti(De),!0)}),Fa(Y,new nu(pe.path,Pe,te))}else return[]}function ja(Y,C,te){return Fa(Y,new Na(sc(),C,te))}function La(Y,C,te){const pe=gi.fromObject(te);return Fa(Y,new Xi(sc(),C,pe))}function Rd(Y,C){return Fa(Y,new _l(sc(),C))}function qa(Y,C,te){const pe=Ii(Y,te);if(pe){const Ee=Nd(pe),Pe=Ee.path,De=Ee.queryId,Ke=fo(Pe,C),Ye=new _l(ac(De),Ke);return bc(Y,Pe,Ye)}else return[]}function _u(Y,C,te,pe,Ee=!1){const Pe=C._path,De=Y.syncPointTree_.get(Pe);let Ke=[];if(De&&(C._queryIdentifier==="default"||vu(De,C))){const Ye=vc(De,C,te,pe);Ad(De)&&(Y.syncPointTree_=Y.syncPointTree_.remove(Pe));const Ze=Ye.removed;if(Ke=Ye.events,!Ee){const Lt=Ze.findIndex(rr=>rr._queryParams.loadsAllData())!==-1,Gt=Y.syncPointTree_.findOnPath(Pe,(rr,wr)=>Di(wr));if(Lt&&!Gt){const rr=Y.syncPointTree_.subtree(Pe);if(!rr.isEmpty()){const wr=ff(rr);for(let $r=0;$r<wr.length;++$r){const ri=wr[$r],mo=ri.query,jl=qp(Y,ri);Y.listenProvider_.startListening(bu(mo),Os(Y,mo),jl.hashFn,jl.onComplete)}}}!Gt&&Ze.length>0&&!pe&&(Lt?Y.listenProvider_.stopListening(bu(C),null):Ze.forEach(rr=>{const wr=Y.queryToTagMap.get(Eu(rr));Y.listenProvider_.stopListening(bu(rr),wr)}))}Fp(Y,Ze)}return Ke}function Id(Y,C,te,pe){const Ee=Ii(Y,pe);if(Ee!=null){const Pe=Nd(Ee),De=Pe.path,Ke=Pe.queryId,Ye=fo(De,C),Ze=new Na(ac(Ke),Ye,te);return bc(Y,De,Ze)}else return[]}function Cd(Y,C,te,pe){const Ee=Ii(Y,pe);if(Ee){const Pe=Nd(Ee),De=Pe.path,Ke=Pe.queryId,Ye=fo(De,C),Ze=gi.fromObject(te),Lt=new Xi(ac(Ke),Ye,Ze);return bc(Y,De,Lt)}else return[]}function Cl(Y,C,te,pe=!1){const Ee=C._path;let Pe=null,De=!1;Y.syncPointTree_.foreachOnPath(Ee,(rr,wr)=>{const $r=fo(rr,Ee);Pe=Pe||As(wr,$r),De=De||Di(wr)});let Ke=Y.syncPointTree_.get(Ee);Ke?(De=De||Di(Ke),Pe=Pe||As(Ke,Fn())):(Ke=new ka,Y.syncPointTree_=Y.syncPointTree_.set(Ee,Ke));let Ye;Pe!=null?Ye=!0:(Ye=!1,Pe=zr.EMPTY_NODE,Y.syncPointTree_.subtree(Ee).foreachChild((wr,$r)=>{const ri=As($r,Fn());ri&&(Pe=Pe.updateImmediateChild(wr,ri))}));const Ze=vu(Ke,C);if(!Ze&&!C._queryParams.loadsAllData()){const rr=Eu(C);bt.assert(!Y.queryToTagMap.has(rr),"View does not exist, but we have a tag");const wr=Mp();Y.queryToTagMap.set(rr,wr),Y.tagToQueryMap.set(wr,rr)}const Lt=lu(Y.pendingWriteTree_,Ee);let Gt=ca(Ke,C,te,Lt,Pe,Ye);if(!Ze&&!De&&!pe){const rr=yu(Ke,C);Gt=Gt.concat(hf(Y,C,rr))}return Gt}function Ec(Y,C,te){const Ee=Y.pendingWriteTree_,Pe=Y.syncPointTree_.findOnPath(C,(De,Ke)=>{const Ye=fo(De,C),Ze=As(Ke,Ye);if(Ze)return Ze});return Cr(Ee,C,Pe,te,!0)}function pf(Y,C){const te=C._path;let pe=null;Y.syncPointTree_.foreachOnPath(te,(Ze,Lt)=>{const Gt=fo(Ze,te);pe=pe||As(Lt,Gt)});let Ee=Y.syncPointTree_.get(te);Ee?pe=pe||As(Ee,Fn()):(Ee=new ka,Y.syncPointTree_=Y.syncPointTree_.set(te,Ee));const Pe=pe!=null,De=Pe?new xi(pe,!0,!1):null,Ke=lu(Y.pendingWriteTree_,C._path),Ye=mu(Ee,C,Ke,Pe?De.getNode():zr.EMPTY_NODE,Pe);return Ol(Ye)}function Fa(Y,C){return Pd(C,Y.syncPointTree_,null,lu(Y.pendingWriteTree_,Fn()))}function Pd(Y,C,te,pe){if(En(Y.path))return pa(Y,C,te,pe);{const Ee=C.get(Fn());te==null&&Ee!=null&&(te=As(Ee,Fn()));let Pe=[];const De=wn(Y.path),Ke=Y.operationForChild(De),Ye=C.children.get(De);if(Ye&&Ke){const Ze=te?te.getImmediateChild(De):null,Lt=oo(pe,De);Pe=Pe.concat(Pd(Ke,Ye,Ze,Lt))}return Ee&&(Pe=Pe.concat(Ss(Ee,Y,pe,te))),Pe}}function pa(Y,C,te,pe){const Ee=C.get(Fn());te==null&&Ee!=null&&(te=As(Ee,Fn()));let Pe=[];return C.children.inorderTraversal((De,Ke)=>{const Ye=te?te.getImmediateChild(De):null,Ze=oo(pe,De),Lt=Y.operationForChild(De);Lt&&(Pe=Pe.concat(pa(Lt,Ke,Ye,Ze)))}),Ee&&(Pe=Pe.concat(Ss(Ee,Y,pe,te))),Pe}function qp(Y,C){const te=C.query,pe=Os(Y,te);return{hashFn:()=>(Qo(C)||zr.EMPTY_NODE).hash(),onComplete:Ee=>{if(Ee==="ok")return pe?qa(Y,te._path,pe):Rd(Y,te._path);{const Pe=Ys(Ee,te);return _u(Y,te,null,Pe)}}}}function Os(Y,C){const te=Eu(C);return Y.queryToTagMap.get(te)}function Eu(Y){return Y._path.toString()+"$"+Y._queryIdentifier}function Ii(Y,C){return Y.tagToQueryMap.get(C)}function Nd(Y){const C=Y.indexOf("$");return bt.assert(C!==-1&&C<Y.length-1,"Bad queryKey."),{queryId:Y.substr(C+1),path:new ti(Y.substr(0,C))}}function bc(Y,C,te){const pe=Y.syncPointTree_.get(C);bt.assert(pe,"Missing sync point for query tag that we're tracking");const Ee=lu(Y.pendingWriteTree_,C);return Ss(pe,te,Ee,null)}function ff(Y){return Y.fold((C,te,pe)=>{if(te&&Di(te))return[cs(te)];{let Ee=[];return te&&(Ee=Il(te)),Yi(pe,(Pe,De)=>{Ee=Ee.concat(De)}),Ee}})}function bu(Y){return Y._queryParams.loadsAllData()&&!Y._queryParams.isDefault()?new(Lp())(Y._repo,Y._path):Y}function Fp(Y,C){for(let te=0;te<C.length;++te){const pe=C[te];if(!pe._queryParams.loadsAllData()){const Ee=Eu(pe),Pe=Y.queryToTagMap.get(Ee);Y.queryToTagMap.delete(Ee),Y.tagToQueryMap.delete(Pe)}}}function Mp(){return Od++}function hf(Y,C,te){const pe=C._path,Ee=Os(Y,C),Pe=qp(Y,te),De=Y.listenProvider_.startListening(bu(C),Ee,Pe.hashFn,Pe.onComplete),Ke=Y.syncPointTree_.subtree(pe);if(Ee)bt.assert(!Di(Ke.value),"If we're adding a query, it shouldn't be shadowed");else{const Ye=Ke.fold((Ze,Lt,Gt)=>{if(!En(Ze)&&Lt&&Di(Lt))return[cs(Lt).query];{let rr=[];return Lt&&(rr=rr.concat(Il(Lt).map(wr=>wr.query))),Yi(Gt,(wr,$r)=>{rr=rr.concat($r)}),rr}});for(let Ze=0;Ze<Ye.length;++Ze){const Lt=Ye[Ze];Y.listenProvider_.stopListening(bu(Lt),Os(Y,Lt))}}return De}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(C){this.node_=C}getImmediateChild(C){const te=this.node_.getImmediateChild(C);return new Mo(te)}node(){return this.node_}}class Tu{constructor(C,te){this.syncTree_=C,this.path_=te}getImmediateChild(C){const te=Mn(this.path_,C);return new Tu(this.syncTree_,te)}node(){return Ec(this.syncTree_,this.path_)}}const gf=function(Y){return Y=Y||{},Y.timestamp=Y.timestamp||new Date().getTime(),Y},$s=function(Y,C,te){if(!Y||typeof Y!="object")return Y;if(bt.assert(".sv"in Y,"Unexpected leaf node or priority contents"),typeof Y[".sv"]=="string")return Tc(Y[".sv"],C,te);if(typeof Y[".sv"]=="object")return Ma(Y[".sv"],C);bt.assert(!1,"Unexpected server value: "+JSON.stringify(Y,null,2))},Tc=function(Y,C,te){switch(Y){case"timestamp":return te.timestamp;default:bt.assert(!1,"Unexpected server value: "+Y)}},Ma=function(Y,C,te){Y.hasOwnProperty("increment")||bt.assert(!1,"Unexpected server value: "+JSON.stringify(Y,null,2));const pe=Y.increment;typeof pe!="number"&&bt.assert(!1,"Unexpected increment value: "+pe);const Ee=C.node();if(bt.assert(Ee!==null&&typeof Ee<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!Ee.isLeafNode())return pe;const De=Ee.getValue();return typeof De!="number"?pe:De+pe},Su=function(Y,C,te,pe){return Ou(C,new Tu(te,Y),pe)},Au=function(Y,C,te){return Ou(Y,new Mo(C),te)};function Ou(Y,C,te){const pe=Y.getPriority().val(),Ee=$s(pe,C.getImmediateChild(".priority"),te);let Pe;if(Y.isLeafNode()){const De=Y,Ke=$s(De.getValue(),C,te);return Ke!==De.getValue()||Ee!==De.getPriority().val()?new io(Ke,hi(Ee)):Y}else{const De=Y;return Pe=De,Ee!==De.getPriority().val()&&(Pe=Pe.updatePriority(new io(Ee))),De.forEachChild(jn,(Ke,Ye)=>{const Ze=Ou(Ye,C.getImmediateChild(Ke),te);Ze!==Ye&&(Pe=Pe.updateImmediateChild(Ke,Ze))}),Pe}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(C="",te=null,pe={children:{},childCount:0}){this.name=C,this.parent=te,this.node=pe}}function Pl(Y,C){let te=C instanceof ti?C:new ti(C),pe=Y,Ee=wn(te);for(;Ee!==null;){const Pe=bt.safeGet(pe.node.children,Ee)||{children:{},childCount:0};pe=new xd(Ee,pe,Pe),te=oi(te),Ee=wn(te)}return pe}function Va(Y){return Y.node.value}function Sc(Y,C){Y.node.value=C,Oc(Y)}function Dd(Y){return Y.node.childCount>0}function Ac(Y){return Va(Y)===void 0&&!Dd(Y)}function Ua(Y,C){Yi(Y.node.children,(te,pe)=>{C(new xd(te,Y,pe))})}function kd(Y,C,te,pe){te&&C(Y),Ua(Y,Ee=>{kd(Ee,C,!0)})}function jd(Y,C,te){let pe=Y.parent;for(;pe!==null;){if(C(pe))return!0;pe=pe.parent}return!1}function wu(Y){return new ti(Y.parent===null?Y.name:wu(Y.parent)+"/"+Y.name)}function Oc(Y){Y.parent!==null&&Ld(Y.parent,Y.name,Y)}function Ld(Y,C,te){const pe=Ac(te),Ee=bt.contains(Y.node.children,C);pe&&Ee?(delete Y.node.children[C],Y.node.childCount--,Oc(Y)):!pe&&!Ee&&(Y.node.children[C]=te.node,Y.node.childCount++,Oc(Y))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=/[\[\].#$\/\u0000-\u001F\u007F]/,qd=/[\[\].#$\u0000-\u001F\u007F]/,Nl=10*1024*1024,Ru=function(Y){return typeof Y=="string"&&Y.length!==0&&!wc.test(Y)},Vp=function(Y){return typeof Y=="string"&&Y.length!==0&&!qd.test(Y)},Rc=function(Y){return Y&&(Y=Y.replace(/^\/*\.info(\/|$)/,"/")),Vp(Y)},Iu=function(Y){return Y===null||typeof Y=="string"||typeof Y=="number"&&!Vu(Y)||Y&&typeof Y=="object"&&bt.contains(Y,".sv")},Vo=function(Y,C,te,pe){pe&&C===void 0||Cu(bt.errorPrefix(Y,"value"),C,te)},Cu=function(Y,C,te){const pe=te instanceof ti?new sd(te,Y):te;if(C===void 0)throw new Error(Y+"contains undefined "+vs(pe));if(typeof C=="function")throw new Error(Y+"contains a function "+vs(pe)+" with contents = "+C.toString());if(Vu(C))throw new Error(Y+"contains "+C.toString()+" "+vs(pe));if(typeof C=="string"&&C.length>Nl/3&&bt.stringLength(C)>Nl)throw new Error(Y+"contains a string greater than "+Nl+" utf8 bytes "+vs(pe)+" ('"+C.substring(0,50)+"...')");if(C&&typeof C=="object"){let Ee=!1,Pe=!1;if(Yi(C,(De,Ke)=>{if(De===".value")Ee=!0;else if(De!==".priority"&&De!==".sv"&&(Pe=!0,!Ru(De)))throw new Error(Y+" contains an invalid key ("+De+") "+vs(pe)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);fp(pe,De),Cu(Y,Ke,pe),Ms(pe)}),Ee&&Pe)throw new Error(Y+' contains ".value" child '+vs(pe)+" in addition to actual children.")}},Ic=function(Y,C){let te,pe;for(te=0;te<C.length;te++){pe=C[te];const Pe=wa(pe);for(let De=0;De<Pe.length;De++)if(!(Pe[De]===".priority"&&De===Pe.length-1)){if(!Ru(Pe[De]))throw new Error(Y+"contains an invalid key ("+Pe[De]+") in path "+pe.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}C.sort(pp);let Ee=null;for(te=0;te<C.length;te++){if(pe=C[te],Ee!==null&&Qi(Ee,pe))throw new Error(Y+"contains a path "+Ee.toString()+" that is ancestor of another path "+pe.toString());Ee=pe}},D=function(Y,C,te,pe){const Ee=bt.errorPrefix(Y,"values");if(!(C&&typeof C=="object")||Array.isArray(C))throw new Error(Ee+" must be an object containing the children to replace.");const Pe=[];Yi(C,(De,Ke)=>{const Ye=new ti(De);if(Cu(Ee,Ke,Mn(te,Ye)),Jl(Ye)===".priority"&&!Iu(Ke))throw new Error(Ee+"contains an invalid value for '"+Ye.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");Pe.push(Ye)}),Ic(Ee,Pe)},W=function(Y,C,te){if(Vu(C))throw new Error(bt.errorPrefix(Y,"priority")+"is "+C.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Iu(C))throw new Error(bt.errorPrefix(Y,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},de=function(Y,C,te,pe){if(te!==void 0&&!Ru(te))throw new Error(bt.errorPrefix(Y,C)+'was an invalid key = "'+te+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ve=function(Y,C,te,pe){if(!(pe&&te===void 0)&&!Vp(te))throw new Error(bt.errorPrefix(Y,C)+'was an invalid path = "'+te+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Ie=function(Y,C,te,pe){te&&(te=te.replace(/^\/*\.info(\/|$)/,"/")),ve(Y,C,te,pe)},xe=function(Y,C){if(wn(C)===".info")throw new Error(Y+" failed = Can't modify data under /.info/")},Je=function(Y,C){const te=C.path.toString();if(typeof C.repoInfo.host!="string"||C.repoInfo.host.length===0||!Ru(C.repoInfo.namespace)&&C.repoInfo.host.split(":")[0]!=="localhost"||te.length!==0&&!Rc(te))throw new Error(bt.errorPrefix(Y,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vt(Y,C){let te=null;for(let pe=0;pe<C.length;pe++){const Ee=C[pe],Pe=Ee.getPath();te!==null&&!ls(Pe,te.path)&&(Y.eventLists_.push(te),te=null),te===null&&(te={events:[],path:Pe}),te.events.push(Ee)}te&&Y.eventLists_.push(te)}function Wt(Y,C,te){vt(Y,te),hr(Y,pe=>ls(pe,C))}function or(Y,C,te){vt(Y,te),hr(Y,pe=>Qi(pe,C)||Qi(C,pe))}function hr(Y,C){Y.recursionDepth_++;let te=!0;for(let pe=0;pe<Y.eventLists_.length;pe++){const Ee=Y.eventLists_[pe];if(Ee){const Pe=Ee.path;C(Pe)?(lr(Y.eventLists_[pe]),Y.eventLists_[pe]=null):te=!1}}te&&(Y.eventLists_=[]),Y.recursionDepth_--}function lr(Y){for(let C=0;C<Y.events.length;C++){const te=Y.events[C];if(te!==null){Y.events[C]=null;const pe=te.getEventRunner();gs&&Hi("event: "+te.toString()),No(pe)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="repo_interrupt",Nr=25;class kr{constructor(C,te,pe,Ee){this.repoInfo_=C,this.forceRestClient_=te,this.authTokenProvider_=pe,this.appCheckProvider_=Ee,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jo(),this.transactionQueueTree_=new xd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Bi(Y,C,te){if(Y.stats_=Qs(Y.repoInfo_),Y.forceRestClient_||Yc())Y.server_=new rc(Y.repoInfo_,(pe,Ee,Pe,De)=>{Ut(Y,pe,Ee,Pe,De)},Y.authTokenProvider_,Y.appCheckProvider_),setTimeout(()=>mr(Y,!0),0);else{if(typeof te<"u"&&te!==null){if(typeof te!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt.stringify(te)}catch(pe){throw new Error("Invalid authOverride provided: "+pe)}}Y.persistentConnection_=new ko(Y.repoInfo_,C,(pe,Ee,Pe,De)=>{Ut(Y,pe,Ee,Pe,De)},pe=>{mr(Y,pe)},pe=>{qr(Y,pe)},Y.authTokenProvider_,Y.appCheckProvider_,te),Y.server_=Y.persistentConnection_}Y.authTokenProvider_.addTokenChangeListener(pe=>{Y.server_.refreshAuthToken(pe)}),Y.appCheckProvider_.addTokenChangeListener(pe=>{Y.server_.refreshAppCheckToken(pe.token)}),Y.statsReporter_=Xs(Y.repoInfo_,()=>new fd(Y.stats_,Y.server_)),Y.infoData_=new af,Y.infoSyncTree_=new _c({startListening:(pe,Ee,Pe,De)=>{let Ke=[];const Ye=Y.infoData_.getNode(pe._path);return Ye.isEmpty()||(Ke=ja(Y.infoSyncTree_,pe._path,Ye),setTimeout(()=>{De("ok")},0)),Ke},stopListening:()=>{}}),Gr(Y,"connected",!1),Y.serverSyncTree_=new _c({startListening:(pe,Ee,Pe,De)=>(Y.server_.listen(pe,Pe,Ee,(Ke,Ye)=>{const Ze=De(Ke,Ye);or(Y.eventQueue_,pe._path,Ze)}),[]),stopListening:(pe,Ee)=>{Y.server_.unlisten(pe,Ee)}})}function kt(Y){const te=Y.infoData_.getNode(new ti(".info/serverTimeOffset")).val()||0;return new Date().getTime()+te}function St(Y){return gf({timestamp:kt(Y)})}function Ut(Y,C,te,pe,Ee){Y.dataUpdateCount++;const Pe=new ti(C);te=Y.interceptServerDataCallback_?Y.interceptServerDataCallback_(C,te):te;let De=[];if(Ee)if(pe){const Ye=bt.map(te,Ze=>hi(Ze));De=Cd(Y.serverSyncTree_,Pe,Ye,Ee)}else{const Ye=hi(te);De=Id(Y.serverSyncTree_,Pe,Ye,Ee)}else if(pe){const Ye=bt.map(te,Ze=>hi(Ze));De=La(Y.serverSyncTree_,Pe,Ye)}else{const Ye=hi(te);De=ja(Y.serverSyncTree_,Pe,Ye)}let Ke=Pe;De.length>0&&(Ke=Pc(Y,Pe)),or(Y.eventQueue_,Ke,De)}function mr(Y,C){Gr(Y,"connected",C),C===!1&&fa(Y)}function qr(Y,C){Yi(C,(te,pe)=>{Gr(Y,te,pe)})}function Gr(Y,C,te){const pe=new ti("/.info/"+C),Ee=hi(te);Y.infoData_.updateSnapshot(pe,Ee);const Pe=ja(Y.infoSyncTree_,pe,Ee);or(Y.eventQueue_,pe,Pe)}function Br(Y){return Y.nextWriteId_++}function fn(Y,C,te){const pe=pf(Y.serverSyncTree_,C);return pe!=null?Promise.resolve(pe):Y.server_.get(C).then(Ee=>{const Pe=hi(Ee).withIndex(C._queryParams.getIndex());Cl(Y.serverSyncTree_,C,te,!0);let De;if(C._queryParams.loadsAllData())De=ja(Y.serverSyncTree_,C._path,Pe);else{const Ke=Os(Y.serverSyncTree_,C);De=Id(Y.serverSyncTree_,C._path,Pe,Ke)}return or(Y.eventQueue_,C._path,De),_u(Y.serverSyncTree_,C,te,null,!0),Pe},Ee=>(Cc(Y,"get for query "+bt.stringify(C)+" failed: "+Ee),Promise.reject(new Error(Ee))))}function Ji(Y,C,te,pe,Ee){Cc(Y,"set",{path:C.toString(),value:te,priority:pe});const Pe=St(Y),De=hi(te,pe),Ke=Ec(Y.serverSyncTree_,C),Ye=Au(De,Ke,Pe),Ze=Br(Y),Lt=wd(Y.serverSyncTree_,C,Ye,Ze,!0);vt(Y.eventQueue_,Lt),Y.server_.put(C.toString(),De.val(!0),(rr,wr)=>{const $r=rr==="ok";$r||co("set at "+C+" failed: "+rr);const ri=Bs(Y.serverSyncTree_,Ze,!$r);or(Y.eventQueue_,C,ri),xl(Y,Ee,rr,wr)});const Gt=_f(Y,C);Pc(Y,Gt),or(Y.eventQueue_,Gt,[])}function zn(Y,C,te,pe){Cc(Y,"update",{path:C.toString(),value:te});let Ee=!0;const Pe=St(Y),De={};if(Yi(te,(Ke,Ye)=>{Ee=!1,De[Ke]=Su(Mn(C,Ke),hi(Ye),Y.serverSyncTree_,Pe)}),Ee)Hi("update() called with empty data.  Don't do anything."),xl(Y,pe,"ok",void 0);else{const Ke=Br(Y),Ye=da(Y.serverSyncTree_,C,De,Ke);vt(Y.eventQueue_,Ye),Y.server_.merge(C.toString(),te,(Ze,Lt)=>{const Gt=Ze==="ok";Gt||co("update at "+C+" failed: "+Ze);const rr=Bs(Y.serverSyncTree_,Ke,!Gt),wr=rr.length>0?Pc(Y,C):C;or(Y.eventQueue_,wr,rr),xl(Y,pe,Ze,Lt)}),Yi(te,Ze=>{const Lt=_f(Y,Mn(C,Ze));Pc(Y,Lt)}),or(Y.eventQueue_,C,[])}}function fa(Y){Cc(Y,"onDisconnectEvents");const C=St(Y),te=jo();nc(Y.onDisconnect_,Fn(),(Ee,Pe)=>{const De=Su(Ee,Pe,Y.serverSyncTree_,C);oa(te,Ee,De)});let pe=[];nc(te,Fn(),(Ee,Pe)=>{pe=pe.concat(ja(Y.serverSyncTree_,Ee,Pe));const De=_f(Y,Ee);Pc(Y,De)}),Y.onDisconnect_=jo(),or(Y.eventQueue_,Fn(),pe)}function mf(Y,C,te){Y.server_.onDisconnectCancel(C.toString(),(pe,Ee)=>{pe==="ok"&&yl(Y.onDisconnect_,C),xl(Y,te,pe,Ee)})}function Nf(Y,C,te,pe){const Ee=hi(te);Y.server_.onDisconnectPut(C.toString(),Ee.val(!0),(Pe,De)=>{Pe==="ok"&&oa(Y.onDisconnect_,C,Ee),xl(Y,pe,Pe,De)})}function Th(Y,C,te,pe,Ee){const Pe=hi(te,pe);Y.server_.onDisconnectPut(C.toString(),Pe.val(!0),(De,Ke)=>{De==="ok"&&oa(Y.onDisconnect_,C,Pe),xl(Y,Ee,De,Ke)})}function Sh(Y,C,te,pe){if(bt.isEmpty(te)){Hi("onDisconnect().update() called with empty data.  Don't do anything."),xl(Y,pe,"ok",void 0);return}Y.server_.onDisconnectMerge(C.toString(),te,(Ee,Pe)=>{Ee==="ok"&&Yi(te,(De,Ke)=>{const Ye=hi(Ke);oa(Y.onDisconnect_,Mn(C,De),Ye)}),xl(Y,pe,Ee,Pe)})}function Ah(Y,C,te){let pe;wn(C._path)===".info"?pe=Cl(Y.infoSyncTree_,C,te):pe=Cl(Y.serverSyncTree_,C,te),Wt(Y.eventQueue_,C._path,pe)}function yf(Y,C,te){let pe;wn(C._path)===".info"?pe=_u(Y.infoSyncTree_,C,te):pe=_u(Y.serverSyncTree_,C,te),Wt(Y.eventQueue_,C._path,pe)}function xf(Y){Y.persistentConnection_&&Y.persistentConnection_.interrupt(Or)}function Oh(Y){Y.persistentConnection_&&Y.persistentConnection_.resume(Or)}function Cc(Y,...C){let te="";Y.persistentConnection_&&(te=Y.persistentConnection_.id+":"),Hi(te,...C)}function xl(Y,C,te,pe){C&&No(()=>{if(te==="ok")C(null);else{const Ee=(te||"error").toUpperCase();let Pe=Ee;pe&&(Pe+=": "+pe);const De=new Error(Pe);De.code=Ee,C(De)}})}function wh(Y,C,te,pe,Ee,Pe){Cc(Y,"transaction on "+C);const De={path:C,update:te,onComplete:pe,status:null,order:Kc(),applyLocally:Pe,retryCount:0,unwatcher:Ee,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Ke=vf(Y,C,void 0);De.currentInputSnapshot=Ke;const Ye=De.update(Ke.val());if(Ye===void 0)De.unwatcher(),De.currentOutputSnapshotRaw=null,De.currentOutputSnapshotResolved=null,De.onComplete&&De.onComplete(null,!1,De.currentInputSnapshot);else{Cu("transaction failed: Data returned ",Ye,De.path),De.status=0;const Ze=Pl(Y.transactionQueueTree_,C),Lt=Va(Ze)||[];Lt.push(De),Sc(Ze,Lt);let Gt;typeof Ye=="object"&&Ye!==null&&bt.contains(Ye,".priority")?(Gt=bt.safeGet(Ye,".priority"),bt.assert(Iu(Gt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Gt=(Ec(Y.serverSyncTree_,C)||zr.EMPTY_NODE).getPriority().val();const rr=St(Y),wr=hi(Ye,Gt),$r=Au(wr,Ke,rr);De.currentOutputSnapshotRaw=wr,De.currentOutputSnapshotResolved=$r,De.currentWriteId=Br(Y);const ri=wd(Y.serverSyncTree_,C,$r,De.currentWriteId,De.applyLocally);or(Y.eventQueue_,C,ri),Up(Y,Y.transactionQueueTree_)}}function vf(Y,C,te){return Ec(Y.serverSyncTree_,C,te)||zr.EMPTY_NODE}function Up(Y,C=Y.transactionQueueTree_){if(C||Bp(Y,C),Va(C)){const te=kf(Y,C);bt.assert(te.length>0,"Sending zero length transaction queue"),te.every(Ee=>Ee.status===0)&&Rh(Y,wu(C),te)}else Dd(C)&&Ua(C,te=>{Up(Y,te)})}function Rh(Y,C,te){const pe=te.map(Ze=>Ze.currentWriteId),Ee=vf(Y,C,pe);let Pe=Ee;const De=Ee.hash();for(let Ze=0;Ze<te.length;Ze++){const Lt=te[Ze];bt.assert(Lt.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),Lt.status=1,Lt.retryCount++;const Gt=fo(C,Lt.path);Pe=Pe.updateChild(Gt,Lt.currentOutputSnapshotRaw)}const Ke=Pe.val(!0),Ye=C;Y.server_.put(Ye.toString(),Ke,Ze=>{Cc(Y,"transaction put response",{path:Ye.toString(),status:Ze});let Lt=[];if(Ze==="ok"){const Gt=[];for(let rr=0;rr<te.length;rr++)te[rr].status=2,Lt=Lt.concat(Bs(Y.serverSyncTree_,te[rr].currentWriteId)),te[rr].onComplete&&Gt.push(()=>te[rr].onComplete(null,!0,te[rr].currentOutputSnapshotResolved)),te[rr].unwatcher();Bp(Y,Pl(Y.transactionQueueTree_,C)),Up(Y,Y.transactionQueueTree_),or(Y.eventQueue_,C,Lt);for(let rr=0;rr<Gt.length;rr++)No(Gt[rr])}else{if(Ze==="datastale")for(let Gt=0;Gt<te.length;Gt++)te[Gt].status===3?te[Gt].status=4:te[Gt].status=0;else{co("transaction at "+Ye.toString()+" failed: "+Ze);for(let Gt=0;Gt<te.length;Gt++)te[Gt].status=4,te[Gt].abortReason=Ze}Pc(Y,C)}},De)}function Pc(Y,C){const te=Df(Y,C),pe=wu(te),Ee=kf(Y,te);return Ih(Y,Ee,pe),pe}function Ih(Y,C,te){if(C.length===0)return;const pe=[];let Ee=[];const De=C.filter(Ke=>Ke.status===0).map(Ke=>Ke.currentWriteId);for(let Ke=0;Ke<C.length;Ke++){const Ye=C[Ke],Ze=fo(te,Ye.path);let Lt=!1,Gt;if(bt.assert(Ze!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),Ye.status===4)Lt=!0,Gt=Ye.abortReason,Ee=Ee.concat(Bs(Y.serverSyncTree_,Ye.currentWriteId,!0));else if(Ye.status===0)if(Ye.retryCount>=Nr)Lt=!0,Gt="maxretry",Ee=Ee.concat(Bs(Y.serverSyncTree_,Ye.currentWriteId,!0));else{const rr=vf(Y,Ye.path,De);Ye.currentInputSnapshot=rr;const wr=C[Ke].update(rr.val());if(wr!==void 0){Cu("transaction failed: Data returned ",wr,Ye.path);let $r=hi(wr);typeof wr=="object"&&wr!=null&&bt.contains(wr,".priority")||($r=$r.updatePriority(rr.getPriority()));const mo=Ye.currentWriteId,jl=St(Y),Nc=Au($r,rr,jl);Ye.currentOutputSnapshotRaw=$r,Ye.currentOutputSnapshotResolved=Nc,Ye.currentWriteId=Br(Y),De.splice(De.indexOf(mo),1),Ee=Ee.concat(wd(Y.serverSyncTree_,Ye.path,Nc,Ye.currentWriteId,Ye.applyLocally)),Ee=Ee.concat(Bs(Y.serverSyncTree_,mo,!0))}else Lt=!0,Gt="nodata",Ee=Ee.concat(Bs(Y.serverSyncTree_,Ye.currentWriteId,!0))}or(Y.eventQueue_,te,Ee),Ee=[],Lt&&(C[Ke].status=2,function(rr){setTimeout(rr,Math.floor(0))}(C[Ke].unwatcher),C[Ke].onComplete&&(Gt==="nodata"?pe.push(()=>C[Ke].onComplete(null,!1,C[Ke].currentInputSnapshot)):pe.push(()=>C[Ke].onComplete(new Error(Gt),!1,null))))}Bp(Y,Y.transactionQueueTree_);for(let Ke=0;Ke<pe.length;Ke++)No(pe[Ke]);Up(Y,Y.transactionQueueTree_)}function Df(Y,C){let te,pe=Y.transactionQueueTree_;for(te=wn(C);te!==null&&Va(pe)===void 0;)pe=Pl(pe,te),C=oi(C),te=wn(C);return pe}function kf(Y,C){const te=[];return jf(Y,C,te),te.sort((pe,Ee)=>pe.order-Ee.order),te}function jf(Y,C,te){const pe=Va(C);if(pe)for(let Ee=0;Ee<pe.length;Ee++)te.push(pe[Ee]);Ua(C,Ee=>{jf(Y,Ee,te)})}function Bp(Y,C){const te=Va(C);if(te){let pe=0;for(let Ee=0;Ee<te.length;Ee++)te[Ee].status!==2&&(te[pe]=te[Ee],pe++);te.length=pe,Sc(C,te.length>0?te:void 0)}Ua(C,pe=>{Bp(Y,pe)})}function _f(Y,C){const te=wu(Df(Y,C)),pe=Pl(Y.transactionQueueTree_,C);return jd(pe,Ee=>{Ef(Y,Ee)}),Ef(Y,pe),kd(pe,Ee=>{Ef(Y,Ee)}),te}function Ef(Y,C){const te=Va(C);if(te){const pe=[];let Ee=[],Pe=-1;for(let De=0;De<te.length;De++)te[De].status===3||(te[De].status===1?(bt.assert(Pe===De-1,"All SENT items should be at beginning of queue."),Pe=De,te[De].status=3,te[De].abortReason="set"):(bt.assert(te[De].status===0,"Unexpected transaction status in abort"),te[De].unwatcher(),Ee=Ee.concat(Bs(Y.serverSyncTree_,te[De].currentWriteId,!0)),te[De].onComplete&&pe.push(te[De].onComplete.bind(null,new Error("set"),!1,null))));Pe===-1?Sc(C,void 0):te.length=Pe+1,or(Y.eventQueue_,wu(C),Ee);for(let De=0;De<pe.length;De++)No(pe[De])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(Y){let C="";const te=Y.split("/");for(let pe=0;pe<te.length;pe++)if(te[pe].length>0){let Ee=te[pe];try{Ee=decodeURIComponent(Ee.replace(/\+/g," "))}catch{}C+="/"+Ee}return C}function Ph(Y){const C={};Y.charAt(0)==="?"&&(Y=Y.substring(1));for(const te of Y.split("&")){if(te.length===0)continue;const pe=te.split("=");pe.length===2?C[decodeURIComponent(pe[0])]=decodeURIComponent(pe[1]):co(`Invalid query segment '${te}' in query '${Y}'`)}return C}const bf=function(Y,C){const te=Nh(Y),pe=te.namespace;te.domain==="firebase.com"&&Ro(te.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!pe||pe==="undefined")&&te.domain!=="localhost"&&Ro("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),te.secure||tf();const Ee=te.scheme==="ws"||te.scheme==="wss";return{repoInfo:new ap(te.host,te.secure,pe,Ee,C,"",pe!==te.subdomain),path:new ti(te.pathString)}},Nh=function(Y){let C="",te="",pe="",Ee="",Pe="",De=!0,Ke="https",Ye=443;if(typeof Y=="string"){let Ze=Y.indexOf("//");Ze>=0&&(Ke=Y.substring(0,Ze-1),Y=Y.substring(Ze+2));let Lt=Y.indexOf("/");Lt===-1&&(Lt=Y.length);let Gt=Y.indexOf("?");Gt===-1&&(Gt=Y.length),C=Y.substring(0,Math.min(Lt,Gt)),Lt<Gt&&(Ee=Ch(Y.substring(Lt,Gt)));const rr=Ph(Y.substring(Math.min(Y.length,Gt)));Ze=C.indexOf(":"),Ze>=0?(De=Ke==="https"||Ke==="wss",Ye=parseInt(C.substring(Ze+1),10)):Ze=C.length;const wr=C.slice(0,Ze);if(wr.toLowerCase()==="localhost")te="localhost";else if(wr.split(".").length<=2)te=wr;else{const $r=C.indexOf(".");pe=C.substring(0,$r).toLowerCase(),te=C.substring($r+1),Pe=pe}"ns"in rr&&(Pe=rr.ns)}return{host:C,port:Ye,domain:te,subdomain:pe,secure:De,scheme:Ke,pathString:Ee,namespace:Pe}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xh=function(){let Y=0;const C=[];return function(te){const pe=te===Y;Y=te;let Ee;const Pe=new Array(8);for(Ee=7;Ee>=0;Ee--)Pe[Ee]=Lf.charAt(te%64),te=Math.floor(te/64);bt.assert(te===0,"Cannot push at time == 0");let De=Pe.join("");if(pe){for(Ee=11;Ee>=0&&C[Ee]===63;Ee--)C[Ee]=0;C[Ee]++}else for(Ee=0;Ee<12;Ee++)C[Ee]=Math.floor(Math.random()*64);for(Ee=0;Ee<12;Ee++)De+=Lf.charAt(C[Ee]);return bt.assert(De.length===20,"nextPushId: Length should be 20."),De}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(C,te,pe,Ee){this.eventType=C,this.eventRegistration=te,this.snapshot=pe,this.prevName=Ee}getPath(){const C=this.snapshot.ref;return this.eventType==="value"?C._path:C.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+bt.stringify(this.snapshot.exportVal())}}class Ff{constructor(C,te,pe){this.eventRegistration=C,this.error=te,this.path=pe}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(C,te){this.snapshotCallback=C,this.cancelCallback=te}onValue(C,te){this.snapshotCallback.call(null,C,te)}onCancel(C){return bt.assert(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,C)}get hasCancelCallback(){return!!this.cancelCallback}matches(C){return this.snapshotCallback===C.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===C.snapshotCallback.userCallback&&this.snapshotCallback.context===C.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(C,te){this._repo=C,this._path=te}cancel(){const C=new bt.Deferred;return mf(this._repo,this._path,C.wrapCallback(()=>{})),C.promise}remove(){xe("OnDisconnect.remove",this._path);const C=new bt.Deferred;return Nf(this._repo,this._path,null,C.wrapCallback(()=>{})),C.promise}set(C){xe("OnDisconnect.set",this._path),Vo("OnDisconnect.set",C,this._path,!1);const te=new bt.Deferred;return Nf(this._repo,this._path,C,te.wrapCallback(()=>{})),te.promise}setWithPriority(C,te){xe("OnDisconnect.setWithPriority",this._path),Vo("OnDisconnect.setWithPriority",C,this._path,!1),W("OnDisconnect.setWithPriority",te);const pe=new bt.Deferred;return Th(this._repo,this._path,C,te,pe.wrapCallback(()=>{})),pe.promise}update(C){xe("OnDisconnect.update",this._path),D("OnDisconnect.update",C,this._path);const te=new bt.Deferred;return Sh(this._repo,this._path,C,te.wrapCallback(()=>{})),te.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(C,te,pe,Ee){this._repo=C,this._path=te,this._queryParams=pe,this._orderByCalled=Ee}get key(){return En(this._path)?null:Jl(this._path)}get ref(){return new ws(this._repo,this._path)}get _queryIdentifier(){const C=Tp(this._queryParams),te=Ul(C);return te==="{}"?"default":te}get _queryObject(){return Tp(this._queryParams)}isEqual(C){if(C=bt.getModularInstance(C),!(C instanceof ns))return!1;const te=this._repo===C._repo,pe=ls(this._path,C._path),Ee=this._queryIdentifier===C._queryIdentifier;return te&&pe&&Ee}toJSON(){return this.toString()}toString(){return this._repo.toString()+od(this._path)}}function $p(Y,C){if(Y._orderByCalled===!0)throw new Error(C+": You can't combine multiple orderBy calls.")}function Dl(Y){let C=null,te=null;if(Y.hasStart()&&(C=Y.getIndexStartValue()),Y.hasEnd()&&(te=Y.getIndexEndValue()),Y.getIndex()===Jo){const pe="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",Ee="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(Y.hasStart()){if(Y.getIndexStartName()!==as)throw new Error(pe);if(typeof C!="string")throw new Error(Ee)}if(Y.hasEnd()){if(Y.getIndexEndName()!==ts)throw new Error(pe);if(typeof te!="string")throw new Error(Ee)}}else if(Y.getIndex()===jn){if(C!=null&&!Iu(C)||te!=null&&!Iu(te))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(bt.assert(Y.getIndex()instanceof Xu||Y.getIndex()===hl,"unknown index type."),C!=null&&typeof C=="object"||te!=null&&typeof te=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Gp(Y){if(Y.hasStart()&&Y.hasEnd()&&Y.hasLimit()&&!Y.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ws extends ns{constructor(C,te){super(C,te,new eu,!1)}get parent(){const C=Ra(this._path);return C===null?null:new ws(this._repo,C)}get root(){let C=this;for(;C.parent!==null;)C=C.parent;return C}}class kl{constructor(C,te,pe){this._node=C,this.ref=te,this._index=pe}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(C){const te=new ti(C),pe=Pu(this.ref,C);return new kl(this._node.getChild(te),pe,jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(C){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(pe,Ee)=>C(new kl(Ee,Pu(this.ref,pe),jn)))}hasChild(C){const te=new ti(C);return!this._node.getChild(te).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vf(Y,C){return Y=bt.getModularInstance(Y),Y._checkNotDeleted("ref"),C!==void 0?Pu(Y._root,C):Y._root}function Dh(Y,C){Y=bt.getModularInstance(Y),Y._checkNotDeleted("refFromURL");const te=bf(C,Y._repo.repoInfo_.nodeAdmin);Je("refFromURL",te);const pe=te.repoInfo;return!Y._repo.repoInfo_.isCustomHost()&&pe.host!==Y._repo.repoInfo_.host&&Ro("refFromURL: Host name does not match the current database: (found "+pe.host+" but expected "+Y._repo.repoInfo_.host+")"),Vf(Y,te.path.toString())}function Pu(Y,C){return Y=bt.getModularInstance(Y),wn(Y._path)===null?Ie("child","path",C,!1):ve("child","path",C,!1),new ws(Y._repo,Mn(Y._path,C))}function kh(Y){return Y=bt.getModularInstance(Y),new Mf(Y._repo,Y._path)}function jh(Y,C){Y=bt.getModularInstance(Y),xe("push",Y._path),Vo("push",C,Y._path,!0);const te=kt(Y._repo),pe=xh(te),Ee=Pu(Y,pe),Pe=Pu(Y,pe);let De;return C!=null?De=Sf(Pe,C).then(()=>Pe):De=Promise.resolve(Pe),Ee.then=De.then.bind(De),Ee.catch=De.then.bind(De,void 0),Ee}function Lh(Y){return xe("remove",Y._path),Sf(Y,null)}function Sf(Y,C){Y=bt.getModularInstance(Y),xe("set",Y._path),Vo("set",C,Y._path,!1);const te=new bt.Deferred;return Ji(Y._repo,Y._path,C,null,te.wrapCallback(()=>{})),te.promise}function qh(Y,C){Y=bt.getModularInstance(Y),xe("setPriority",Y._path),W("setPriority",C);const te=new bt.Deferred;return Ji(Y._repo,Mn(Y._path,".priority"),C,null,te.wrapCallback(()=>{})),te.promise}function Fh(Y,C,te){if(xe("setWithPriority",Y._path),Vo("setWithPriority",C,Y._path,!1),W("setWithPriority",te),Y.key===".length"||Y.key===".keys")throw"setWithPriority failed: "+Y.key+" is a read-only object.";const pe=new bt.Deferred;return Ji(Y._repo,Y._path,C,te,pe.wrapCallback(()=>{})),pe.promise}function Mh(Y,C){D("update",C,Y._path);const te=new bt.Deferred;return zn(Y._repo,Y._path,C,te.wrapCallback(()=>{})),te.promise}function Vh(Y){Y=bt.getModularInstance(Y);const C=new Tf(()=>{}),te=new Fd(C);return fn(Y._repo,Y,te).then(pe=>new kl(pe,new ws(Y._repo,Y._path),Y._queryParams.getIndex()))}class Fd{constructor(C){this.callbackContext=C}respondsTo(C){return C==="value"}createEvent(C,te){const pe=te._queryParams.getIndex();return new qf("value",this,new kl(C.snapshotNode,new ws(te._repo,te._path),pe))}getEventRunner(C){return C.getEventType()==="cancel"?()=>this.callbackContext.onCancel(C.error):()=>this.callbackContext.onValue(C.snapshot,null)}createCancelEvent(C,te){return this.callbackContext.hasCancelCallback?new Ff(this,C,te):null}matches(C){return C instanceof Fd?!C.callbackContext||!this.callbackContext?!0:C.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Hp{constructor(C,te){this.eventType=C,this.callbackContext=te}respondsTo(C){let te=C==="children_added"?"child_added":C;return te=te==="children_removed"?"child_removed":te,this.eventType===te}createCancelEvent(C,te){return this.callbackContext.hasCancelCallback?new Ff(this,C,te):null}createEvent(C,te){bt.assert(C.childName!=null,"Child events should have a childName.");const pe=Pu(new ws(te._repo,te._path),C.childName),Ee=te._queryParams.getIndex();return new qf(C.type,this,new kl(C.snapshotNode,pe,Ee),C.prevName)}getEventRunner(C){return C.getEventType()==="cancel"?()=>this.callbackContext.onCancel(C.error):()=>this.callbackContext.onValue(C.snapshot,C.prevName)}matches(C){return C instanceof Hp?this.eventType===C.eventType&&(!this.callbackContext||!C.callbackContext||this.callbackContext.matches(C.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Md(Y,C,te,pe,Ee){let Pe;if(typeof pe=="object"&&(Pe=void 0,Ee=pe),typeof pe=="function"&&(Pe=pe),Ee&&Ee.onlyOnce){const Ye=te,Ze=(Lt,Gt)=>{yf(Y._repo,Y,Ke),Ye(Lt,Gt)};Ze.userCallback=te.userCallback,Ze.context=te.context,te=Ze}const De=new Tf(te,Pe||void 0),Ke=C==="value"?new Fd(De):new Hp(C,De);return Ah(Y._repo,Y,Ke),()=>yf(Y._repo,Y,Ke)}function Uf(Y,C,te,pe){return Md(Y,"value",C,te,pe)}function Uh(Y,C,te,pe){return Md(Y,"child_added",C,te,pe)}function Bh(Y,C,te,pe){return Md(Y,"child_changed",C,te,pe)}function $h(Y,C,te,pe){return Md(Y,"child_moved",C,te,pe)}function Gh(Y,C,te,pe){return Md(Y,"child_removed",C,te,pe)}function Hh(Y,C,te){let pe=null;const Ee=te?new Tf(te):null;C==="value"?pe=new Fd(Ee):C&&(pe=new Hp(C,Ee)),yf(Y._repo,Y,pe)}class Rs{}class Bf extends Rs{constructor(C,te){super(),this._value=C,this._key=te,this.type="endAt"}_apply(C){Vo("endAt",this._value,C._path,!0);const te=tc(C._queryParams,this._value,this._key);if(Gp(te),Dl(te),C._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ns(C._repo,C._path,te,C._orderByCalled)}}function Kh(Y,C){return de("endAt","key",C),new Bf(Y,C)}class Wh extends Rs{constructor(C,te){super(),this._value=C,this._key=te,this.type="endBefore"}_apply(C){Vo("endBefore",this._value,C._path,!1);const te=bp(C._queryParams,this._value,this._key);if(Gp(te),Dl(te),C._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ns(C._repo,C._path,te,C._orderByCalled)}}function Jh(Y,C){return de("endBefore","key",C),new Wh(Y,C)}class $f extends Rs{constructor(C,te){super(),this._value=C,this._key=te,this.type="startAt"}_apply(C){Vo("startAt",this._value,C._path,!0);const te=dd(C._queryParams,this._value,this._key);if(Gp(te),Dl(te),C._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ns(C._repo,C._path,te,C._orderByCalled)}}function zh(Y=null,C){return de("startAt","key",C),new $f(Y,C)}class Yh extends Rs{constructor(C,te){super(),this._value=C,this._key=te,this.type="startAfter"}_apply(C){Vo("startAfter",this._value,C._path,!1);const te=sf(C._queryParams,this._value,this._key);if(Gp(te),Dl(te),C._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ns(C._repo,C._path,te,C._orderByCalled)}}function Qh(Y,C){return de("startAfter","key",C),new Yh(Y,C)}class Xh extends Rs{constructor(C){super(),this._limit=C,this.type="limitToFirst"}_apply(C){if(C._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ns(C._repo,C._path,of(C._queryParams,this._limit),C._orderByCalled)}}function Zh(Y){if(typeof Y!="number"||Math.floor(Y)!==Y||Y<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Xh(Y)}class eg extends Rs{constructor(C){super(),this._limit=C,this.type="limitToLast"}_apply(C){if(C._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ns(C._repo,C._path,Ep(C._queryParams,this._limit),C._orderByCalled)}}function tg(Y){if(typeof Y!="number"||Math.floor(Y)!==Y||Y<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new eg(Y)}class rg extends Rs{constructor(C){super(),this._path=C,this.type="orderByChild"}_apply(C){$p(C,"orderByChild");const te=new ti(this._path);if(En(te))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const pe=new Xu(te),Ee=tu(C._queryParams,pe);return Dl(Ee),new ns(C._repo,C._path,Ee,!0)}}function ng(Y){if(Y==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(Y==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(Y==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ve("orderByChild","path",Y,!1),new rg(Y)}class ig extends Rs{constructor(){super(...arguments),this.type="orderByKey"}_apply(C){$p(C,"orderByKey");const te=tu(C._queryParams,Jo);return Dl(te),new ns(C._repo,C._path,te,!0)}}function og(){return new ig}class sg extends Rs{constructor(){super(...arguments),this.type="orderByPriority"}_apply(C){$p(C,"orderByPriority");const te=tu(C._queryParams,jn);return Dl(te),new ns(C._repo,C._path,te,!0)}}function ag(){return new sg}class lg extends Rs{constructor(){super(...arguments),this.type="orderByValue"}_apply(C){$p(C,"orderByValue");const te=tu(C._queryParams,hl);return Dl(te),new ns(C._repo,C._path,te,!0)}}function ug(){return new lg}class cg extends Rs{constructor(C,te){super(),this._value=C,this._key=te,this.type="equalTo"}_apply(C){if(Vo("equalTo",this._value,C._path,!1),C._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(C._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Bf(this._value,this._key)._apply(new $f(this._value,this._key)._apply(C))}}function dg(Y,C){return de("equalTo","key",C),new cg(Y,C)}function pg(Y,...C){let te=bt.getModularInstance(Y);for(const pe of C)te=pe._apply(te);return te}Us(ws),Fo(ws);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="FIREBASE_DATABASE_EMULATOR_HOST",Af={};let Gf=!1;function hg(Y,C,te,pe){const Ee=C.lastIndexOf(":"),Pe=C.substring(0,Ee),De=bt.isCloudWorkstation(Pe);Y.repoInfo_=new ap(C,De,Y.repoInfo_.namespace,Y.repoInfo_.webSocketOnly,Y.repoInfo_.nodeAdmin,Y.repoInfo_.persistenceKey,Y.repoInfo_.includeNamespaceInQueryParams,!0,te),pe&&(Y.authTokenProvider_=pe)}function Hf(Y,C,te,pe,Ee){let Pe=pe||Y.options.databaseURL;Pe===void 0&&(Y.options.projectId||Ro("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",Y.options.projectId),Pe=`${Y.options.projectId}-default-rtdb.firebaseio.com`);let De=bf(Pe,Ee),Ke=De.repoInfo,Ye,Ze;typeof process<"u"&&t&&(Ze=t[fg]),Ze?(Ye=!0,Pe=`http://${Ze}?ns=${Ke.namespace}`,De=bf(Pe,Ee),Ke=De.repoInfo):Ye=!De.repoInfo.secure;const Lt=Ee&&Ye?new Ta(Ta.OWNER):new Uu(Y.name,Y.options,C);Je("Invalid Firebase Database URL",De),En(De.path)||Ro("Database URL must point to the root of a Firebase Database (not including a child path).");const Gt=mg(Ke,Y,Lt,new xo(Y,te));return new Kf(Gt,Y)}function gg(Y,C){const te=Af[C];(!te||te[Y.key]!==Y)&&Ro(`Database ${C}(${Y.repoInfo_}) has already been deleted.`),xf(Y),delete te[Y.key]}function mg(Y,C,te,pe){let Ee=Af[C.name];Ee||(Ee={},Af[C.name]=Ee);let Pe=Ee[Y.toURLString()];return Pe&&Ro("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),Pe=new kr(Y,Gf,te,pe),Ee[Y.toURLString()]=Pe,Pe}function yg(Y){Gf=Y}class Kf{constructor(C,te){this._repoInternal=C,this.app=te,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Bi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ws(this._repo,Fn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(gg(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(C){this._rootInternal===null&&Ro("Cannot call "+C+" on a deleted database.")}}function Wf(){ta.IS_TRANSPORT_INITIALIZED&&co("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function vg(){Wf(),Do.forceDisallow()}function _g(){Wf(),po.forceDisallow(),Do.forceAllow()}function Eg(Y,C,te,pe={}){Y=bt.getModularInstance(Y),Y._checkNotDeleted("useEmulator");const Ee=`${C}:${te}`,Pe=Y._repoInternal;if(Y._instanceStarted){if(Ee===Y._repoInternal.repoInfo_.host&&bt.deepEqual(pe,Pe.repoInfo_.emulatorOptions))return;Ro("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let De;if(Pe.repoInfo_.nodeAdmin)pe.mockUserToken&&Ro('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),De=new Ta(Ta.OWNER);else if(pe.mockUserToken){const Ke=typeof pe.mockUserToken=="string"?pe.mockUserToken:bt.createMockUserToken(pe.mockUserToken,Y.app.options.projectId);De=new Ta(Ke)}bt.isCloudWorkstation(C)&&(bt.pingServer(C),bt.updateEmulatorBanner("Database",!0)),hg(Pe,Ee,pe,De)}function bg(Y){Y=bt.getModularInstance(Y),Y._checkNotDeleted("goOffline"),xf(Y._repo)}function Tg(Y){Y=bt.getModularInstance(Y),Y._checkNotDeleted("goOnline"),Oh(Y._repo)}function Sg(Y,C){Wc(Y,C)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag={".sv":"timestamp"};function Og(){return Ag}function wg(Y){return{".sv":{increment:Y}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(C,te){this.committed=C,this.snapshot=te}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Rg(Y,C,te){var pe;if(Y=bt.getModularInstance(Y),xe("Reference.transaction",Y._path),Y.key===".length"||Y.key===".keys")throw"Reference.transaction failed: "+Y.key+" is a read-only object.";const Ee=(pe=te?.applyLocally)!==null&&pe!==void 0?pe:!0,Pe=new bt.Deferred,De=(Ye,Ze,Lt)=>{let Gt=null;Ye?Pe.reject(Ye):(Gt=new kl(Lt,new ws(Y._repo,Y._path),jn),Pe.resolve(new Jf(Ze,Gt)))},Ke=Uf(Y,()=>{});return wh(Y._repo,Y._path,C,De,Ke,Ee),Pe.promise}ko.prototype.simpleListen=function(Y,C){this.sendRequest("q",{p:Y},C)},ko.prototype.echo=function(Y,C){this.sendRequest("echo",{d:Y},C)};const Ig=function(Y){const C=ko.prototype.put;return ko.prototype.put=function(te,pe,Ee,Pe){Pe!==void 0&&(Pe=Y()),C.call(this,te,pe,Ee,Pe)},function(){ko.prototype.put=C}},Cg=function(Y){yg(Y)};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg({app:Y,url:C,version:te,customAuthImpl:pe,customAppCheckImpl:Ee,nodeAdmin:Pe=!1}){fi(te);const De=new Wa.ComponentContainer("database-standalone"),Ke=new Wa.Provider("auth-internal",De);let Ye;return Ee&&(Ye=new Wa.Provider("app-check-internal",De),Ye.setComponent(new Wa.Component("app-check-internal",()=>Ee,"PRIVATE"))),Ke.setComponent(new Wa.Component("auth-internal",()=>pe,"PRIVATE")),Hf(Y,Ke,Ye,C,Pe)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ba(Ja.default.Client),Z.DataSnapshot=kl,Z.Database=Kf;var zf=Z.OnDisconnect=Mf;Z.QueryConstraint=Rs,Z.TransactionResult=Jf;var Ng=Z._QueryImpl=ns,xg=Z._QueryParams=eu,Dg=Z._ReferenceImpl=ws;Z._TEST_ACCESS_forceRestClient=Cg,Z._TEST_ACCESS_hijackHash=Ig,Z._initStandalone=Pg;var kg=Z._repoManagerDatabaseFromApp=Hf,jg=Z._setSDKVersion=fi,Yf=Z._validatePathString=ve,Qf=Z._validateWritablePath=xe,Lg=Z.child=Pu,qg=Z.connectDatabaseEmulator=Eg,Xf=Z.enableLogging=Sg,Fg=Z.endAt=Kh,Mg=Z.endBefore=Jh,Vg=Z.equalTo=dg,Ug=Z.forceLongPolling=_g,Bg=Z.forceWebSockets=vg,$g=Z.get=Vh,Gg=Z.goOffline=bg,Hg=Z.goOnline=Tg,Kg=Z.increment=wg,Wg=Z.limitToFirst=Zh,Jg=Z.limitToLast=tg,Zf=Z.off=Hh,eh=Z.onChildAdded=Uh,th=Z.onChildChanged=Bh,rh=Z.onChildMoved=$h,nh=Z.onChildRemoved=Gh;Z.onDisconnect=kh;var ih=Z.onValue=Uf,zg=Z.orderByChild=ng,Yg=Z.orderByKey=og,Qg=Z.orderByPriority=ag,Xg=Z.orderByValue=ug,Zg=Z.push=jh,Gs=Z.query=pg,em=Z.ref=Vf,oh=Z.refFromURL=Dh,tm=Z.remove=Lh,rm=Z.runTransaction=Rg,nm=Z.serverTimestamp=Og,im=Z.set=Sf,om=Z.setPriority=qh,sm=Z.setWithPriority=Fh,am=Z.startAfter=Qh,lm=Z.startAt=zh,um=Z.update=Mh;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=new h.Logger("@firebase/database-compat"),sh=function(Y){const C="FIREBASE WARNING: "+Y;cm.warn(C)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=function(Y,C,te,pe){if(te!==void 0&&typeof te!="boolean")throw new Error(s.errorPrefix(Y,C)+"must be a boolean.")},pm=function(Y,C,te){if(C!==void 0)switch(C){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(s.errorPrefix(Y,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(C){this._delegate=C}cancel(C){s.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),s.validateCallback("OnDisconnect.cancel","onComplete",C,!0);const te=this._delegate.cancel();return C&&te.then(()=>C(null),pe=>C(pe)),te}remove(C){s.validateArgCount("OnDisconnect.remove",0,1,arguments.length),s.validateCallback("OnDisconnect.remove","onComplete",C,!0);const te=this._delegate.remove();return C&&te.then(()=>C(null),pe=>C(pe)),te}set(C,te){s.validateArgCount("OnDisconnect.set",1,2,arguments.length),s.validateCallback("OnDisconnect.set","onComplete",te,!0);const pe=this._delegate.set(C);return te&&pe.then(()=>te(null),Ee=>te(Ee)),pe}setWithPriority(C,te,pe){s.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),s.validateCallback("OnDisconnect.setWithPriority","onComplete",pe,!0);const Ee=this._delegate.setWithPriority(C,te);return pe&&Ee.then(()=>pe(null),Pe=>pe(Pe)),Ee}update(C,te){if(s.validateArgCount("OnDisconnect.update",1,2,arguments.length),Array.isArray(C)){const Ee={};for(let Pe=0;Pe<C.length;++Pe)Ee[""+Pe]=C[Pe];C=Ee,sh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}s.validateCallback("OnDisconnect.update","onComplete",te,!0);const pe=this._delegate.update(C);return te&&pe.then(()=>te(null),Ee=>te(Ee)),pe}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(C,te){this.committed=C,this.snapshot=te}toJSON(){return s.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(C,te){this._database=C,this._delegate=te}val(){return s.validateArgCount("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return s.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return s.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return s.validateArgCount("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(C){return s.validateArgCount("DataSnapshot.child",0,1,arguments.length),C=String(C),Yf("DataSnapshot.child","path",C,!1),new Ba(this._database,this._delegate.child(C))}hasChild(C){return s.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Yf("DataSnapshot.hasChild","path",C,!1),this._delegate.hasChild(C)}getPriority(){return s.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(C){return s.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),s.validateCallback("DataSnapshot.forEach","action",C,!1),this._delegate.forEach(te=>C(new Ba(this._database,te)))}hasChildren(){return s.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return s.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return s.validateArgCount("DataSnapshot.ref",0,0,arguments.length),new is(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class So{constructor(C,te){this.database=C,this._delegate=te}on(C,te,pe,Ee){var Pe;s.validateArgCount("Query.on",2,4,arguments.length),s.validateCallback("Query.on","callback",te,!1);const De=So.getCancelAndContextArgs_("Query.on",pe,Ee),Ke=(Ze,Lt)=>{te.call(De.context,new Ba(this.database,Ze),Lt)};Ke.userCallback=te,Ke.context=De.context;const Ye=(Pe=De.cancel)===null||Pe===void 0?void 0:Pe.bind(De.context);switch(C){case"value":return ih(this._delegate,Ke,Ye),te;case"child_added":return eh(this._delegate,Ke,Ye),te;case"child_removed":return nh(this._delegate,Ke,Ye),te;case"child_changed":return th(this._delegate,Ke,Ye),te;case"child_moved":return rh(this._delegate,Ke,Ye),te;default:throw new Error(s.errorPrefix("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(C,te,pe){if(s.validateArgCount("Query.off",0,3,arguments.length),pm("Query.off",C),s.validateCallback("Query.off","callback",te,!0),s.validateContextObject("Query.off","context",pe,!0),te){const Ee=()=>{};Ee.userCallback=te,Ee.context=pe,Zf(this._delegate,C,Ee)}else Zf(this._delegate,C)}get(){return $g(this._delegate).then(C=>new Ba(this.database,C))}once(C,te,pe,Ee){s.validateArgCount("Query.once",1,4,arguments.length),s.validateCallback("Query.once","callback",te,!0);const Pe=So.getCancelAndContextArgs_("Query.once",pe,Ee),De=new s.Deferred,Ke=(Ze,Lt)=>{const Gt=new Ba(this.database,Ze);te&&te.call(Pe.context,Gt,Lt),De.resolve(Gt)};Ke.userCallback=te,Ke.context=Pe.context;const Ye=Ze=>{Pe.cancel&&Pe.cancel.call(Pe.context,Ze),De.reject(Ze)};switch(C){case"value":ih(this._delegate,Ke,Ye,{onlyOnce:!0});break;case"child_added":eh(this._delegate,Ke,Ye,{onlyOnce:!0});break;case"child_removed":nh(this._delegate,Ke,Ye,{onlyOnce:!0});break;case"child_changed":th(this._delegate,Ke,Ye,{onlyOnce:!0});break;case"child_moved":rh(this._delegate,Ke,Ye,{onlyOnce:!0});break;default:throw new Error(s.errorPrefix("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return De.promise}limitToFirst(C){return s.validateArgCount("Query.limitToFirst",1,1,arguments.length),new So(this.database,Gs(this._delegate,Wg(C)))}limitToLast(C){return s.validateArgCount("Query.limitToLast",1,1,arguments.length),new So(this.database,Gs(this._delegate,Jg(C)))}orderByChild(C){return s.validateArgCount("Query.orderByChild",1,1,arguments.length),new So(this.database,Gs(this._delegate,zg(C)))}orderByKey(){return s.validateArgCount("Query.orderByKey",0,0,arguments.length),new So(this.database,Gs(this._delegate,Yg()))}orderByPriority(){return s.validateArgCount("Query.orderByPriority",0,0,arguments.length),new So(this.database,Gs(this._delegate,Qg()))}orderByValue(){return s.validateArgCount("Query.orderByValue",0,0,arguments.length),new So(this.database,Gs(this._delegate,Xg()))}startAt(C=null,te){return s.validateArgCount("Query.startAt",0,2,arguments.length),new So(this.database,Gs(this._delegate,lm(C,te)))}startAfter(C=null,te){return s.validateArgCount("Query.startAfter",0,2,arguments.length),new So(this.database,Gs(this._delegate,am(C,te)))}endAt(C=null,te){return s.validateArgCount("Query.endAt",0,2,arguments.length),new So(this.database,Gs(this._delegate,Fg(C,te)))}endBefore(C=null,te){return s.validateArgCount("Query.endBefore",0,2,arguments.length),new So(this.database,Gs(this._delegate,Mg(C,te)))}equalTo(C,te){return s.validateArgCount("Query.equalTo",1,2,arguments.length),new So(this.database,Gs(this._delegate,Vg(C,te)))}toString(){return s.validateArgCount("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return s.validateArgCount("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(C){if(s.validateArgCount("Query.isEqual",1,1,arguments.length),!(C instanceof So)){const te="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(te)}return this._delegate.isEqual(C._delegate)}static getCancelAndContextArgs_(C,te,pe){const Ee={cancel:void 0,context:void 0};if(te&&pe)Ee.cancel=te,s.validateCallback(C,"cancel",Ee.cancel,!0),Ee.context=pe,s.validateContextObject(C,"context",Ee.context,!0);else if(te)if(typeof te=="object"&&te!==null)Ee.context=te;else if(typeof te=="function")Ee.cancel=te;else throw new Error(s.errorPrefix(C,"cancelOrContext")+" must either be a cancel callback or a context object.");return Ee}get ref(){return new is(this.database,new Dg(this._delegate._repo,this._delegate._path))}}class is extends So{constructor(C,te){super(C,new Ng(te._repo,te._path,new xg,!1)),this.database=C,this._delegate=te}getKey(){return s.validateArgCount("Reference.key",0,0,arguments.length),this._delegate.key}child(C){return s.validateArgCount("Reference.child",1,1,arguments.length),typeof C=="number"&&(C=String(C)),new is(this.database,Lg(this._delegate,C))}getParent(){s.validateArgCount("Reference.parent",0,0,arguments.length);const C=this._delegate.parent;return C?new is(this.database,C):null}getRoot(){return s.validateArgCount("Reference.root",0,0,arguments.length),new is(this.database,this._delegate.root)}set(C,te){s.validateArgCount("Reference.set",1,2,arguments.length),s.validateCallback("Reference.set","onComplete",te,!0);const pe=im(this._delegate,C);return te&&pe.then(()=>te(null),Ee=>te(Ee)),pe}update(C,te){if(s.validateArgCount("Reference.update",1,2,arguments.length),Array.isArray(C)){const Ee={};for(let Pe=0;Pe<C.length;++Pe)Ee[""+Pe]=C[Pe];C=Ee,sh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qf("Reference.update",this._delegate._path),s.validateCallback("Reference.update","onComplete",te,!0);const pe=um(this._delegate,C);return te&&pe.then(()=>te(null),Ee=>te(Ee)),pe}setWithPriority(C,te,pe){s.validateArgCount("Reference.setWithPriority",2,3,arguments.length),s.validateCallback("Reference.setWithPriority","onComplete",pe,!0);const Ee=sm(this._delegate,C,te);return pe&&Ee.then(()=>pe(null),Pe=>pe(Pe)),Ee}remove(C){s.validateArgCount("Reference.remove",0,1,arguments.length),s.validateCallback("Reference.remove","onComplete",C,!0);const te=tm(this._delegate);return C&&te.then(()=>C(null),pe=>C(pe)),te}transaction(C,te,pe){s.validateArgCount("Reference.transaction",1,3,arguments.length),s.validateCallback("Reference.transaction","transactionUpdate",C,!1),s.validateCallback("Reference.transaction","onComplete",te,!0),dm("Reference.transaction","applyLocally",pe);const Ee=rm(this._delegate,C,{applyLocally:pe}).then(Pe=>new hm(Pe.committed,new Ba(this.database,Pe.snapshot)));return te&&Ee.then(Pe=>te(null,Pe.committed,Pe.snapshot),Pe=>te(Pe,!1,null)),Ee}setPriority(C,te){s.validateArgCount("Reference.setPriority",1,2,arguments.length),s.validateCallback("Reference.setPriority","onComplete",te,!0);const pe=om(this._delegate,C);return te&&pe.then(()=>te(null),Ee=>te(Ee)),pe}push(C,te){s.validateArgCount("Reference.push",0,2,arguments.length),s.validateCallback("Reference.push","onComplete",te,!0);const pe=Zg(this._delegate,C),Ee=pe.then(De=>new is(this.database,De));te&&Ee.then(()=>te(null),De=>te(De));const Pe=new is(this.database,pe);return Pe.then=Ee.then.bind(Ee),Pe.catch=Ee.catch.bind(Ee,void 0),Pe}onDisconnect(){return Qf("Reference.onDisconnect",this._delegate._path),new fm(new zf(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(C,te){this._delegate=C,this.app=te,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Bg,forceLongPolling:Ug}}useEmulator(C,te,pe={}){qg(this._delegate,C,te,pe)}ref(C){if(s.validateArgCount("database.ref",0,1,arguments.length),C instanceof is){const te=oh(this._delegate,C.toString());return new is(this,te)}else{const te=em(this._delegate,C);return new is(this,te)}}refFromURL(C){s.validateArgCount("database.refFromURL",1,1,arguments.length);const pe=oh(this._delegate,C);return new is(this,pe)}goOffline(){return s.validateArgCount("database.goOffline",0,0,arguments.length),Gg(this._delegate)}goOnline(){return s.validateArgCount("database.goOnline",0,0,arguments.length),Hg(this._delegate)}}Vd.ServerValue={TIMESTAMP:nm(),increment:Y=>Kg(Y)};function ah({app:Y,url:C,version:te,customAuthImpl:pe,customAppCheckImpl:Ee,namespace:Pe,nodeAdmin:De=!1}){jg(te);const Ke=new v.ComponentContainer("database-standalone"),Ye=new v.Provider("auth-internal",Ke);Ye.setComponent(new v.Component("auth-internal",()=>pe,"PRIVATE"));let Ze;return Ee&&(Ze=new v.Provider("app-check-internal",Ke),Ze.setComponent(new v.Component("app-check-internal",()=>Ee,"PRIVATE"))),{instance:new Vd(kg(Y,Ye,Ze,C,De),Y),namespace:Pe}}var gm=Object.freeze({__proto__:null,initStandalone:ah});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=Vd.ServerValue;function mm(Y,C,te,pe=!0){return s.CONSTANTS.NODE_ADMIN=pe,ah({app:Y,url:C,version:te,customAuthImpl:Y.INTERNAL,namespace:{Reference:is,Query:So,Database:Vd,DataSnapshot:Ba,enableLogging:Xf,INTERNAL:gm,ServerValue:lh},nodeAdmin:pe})}return index_standalone.DataSnapshot=Ba,index_standalone.Database=Vd,index_standalone.OnDisconnect=zf,index_standalone.Query=So,index_standalone.Reference=is,index_standalone.ServerValue=lh,index_standalone.enableLogging=Xf,index_standalone.initStandalone=mm,index_standalone}var messaging$1={},messagingInternal={};/*! firebase-admin v13.4.0 */var hasRequiredMessagingInternal;function requireMessagingInternal(){if(hasRequiredMessagingInternal)return messagingInternal;hasRequiredMessagingInternal=1;/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(messagingInternal,"__esModule",{value:!0}),messagingInternal.BLACKLISTED_OPTIONS_KEYS=messagingInternal.BLACKLISTED_DATA_PAYLOAD_KEYS=void 0,messagingInternal.validateMessage=u;const t=requireUtils$2(),e=requireError(),r=requireValidator$1();messagingInternal.BLACKLISTED_DATA_PAYLOAD_KEYS=["from"],messagingInternal.BLACKLISTED_OPTIONS_KEYS=["condition","data","notification","registrationIds","registration_ids","to"];function u(S){if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"Message must be a non-null object");const j=S;if(j.topic&&(j.topic.startsWith("/topics/")&&(j.topic=j.topic.replace(/^\/topics\//,"")),!/^[a-zA-Z0-9-_.~%]+$/.test(j.topic)))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"Malformed topic name");if([j.token,j.topic,j.condition].filter(J=>r.isNonEmptyString(J)).length!==1)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"Exactly one of topic, token or condition is required");d(S.data,"data"),A(S.android),m(S.webpush),c(S.apns),o(S.fcmOptions),s(S.notification)}function d(S,j){if(!(typeof S>"u")){if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,`${j} must be a non-null object`);Object.keys(S).forEach(K=>{if(!r.isString(S[K]))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,`${j} must only contain string values`)})}}function m(S){if(!(typeof S>"u")){if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"webpush must be a non-null object");d(S.headers,"webpush.headers"),d(S.data,"webpush.data")}}function c(S){if(!(typeof S>"u")){if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns must be a non-null object");d(S.headers,"apns.headers"),h(S.payload),a(S.fcmOptions)}}function a(S){if(typeof S>"u")return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"fcmOptions must be a non-null object");if(typeof S.imageUrl<"u"&&!r.isURL(S.imageUrl))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"imageUrl must be a valid URL string");if(typeof S.analyticsLabel<"u"&&!r.isString(S.analyticsLabel))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"analyticsLabel must be a string value");const j={imageUrl:"image"};Object.keys(j).forEach(K=>{if(K in S&&j[K]in S)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,`Multiple specifications for ${K} in ApnsFcmOptions`)}),(0,t.renameProperties)(S,j)}function o(S){if(!(typeof S>"u")){if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"fcmOptions must be a non-null object");if(typeof S.analyticsLabel<"u"&&!r.isString(S.analyticsLabel))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"analyticsLabel must be a string value")}}function s(S){if(typeof S>"u")return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"notification must be a non-null object");if(typeof S.imageUrl<"u"&&!r.isURL(S.imageUrl))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"notification.imageUrl must be a valid URL string");const j={imageUrl:"image"};Object.keys(j).forEach(K=>{if(K in S&&j[K]in S)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,`Multiple specifications for ${K} in Notification`)}),(0,t.renameProperties)(S,j)}function h(S){if(!(typeof S>"u")){if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload must be a non-null object");v(S.aps)}}function v(S){if(typeof S>"u")return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps must be a non-null object");y(S.alert),E(S.sound);const j={contentAvailable:"content-available",mutableContent:"mutable-content",threadId:"thread-id"};Object.keys(j).forEach(H=>{if(H in S&&j[H]in S)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,`Multiple specifications for ${H} in Aps`)}),(0,t.renameProperties)(S,j);const K=S["content-available"];typeof K<"u"&&K!==1&&(K===!0?S["content-available"]=1:delete S["content-available"]);const J=S["mutable-content"];typeof J<"u"&&J!==1&&(J===!0?S["mutable-content"]=1:delete S["mutable-content"])}function E(S){if(typeof S>"u"||r.isNonEmptyString(S))return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound must be a non-empty string or a non-null object");if(!r.isNonEmptyString(S.name))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound.name must be a non-empty string");const j=S.volume;if(typeof j<"u"){if(!r.isNumber(j))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound.volume must be a number");if(j<0||j>1)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.sound.volume must be in the interval [0, 1]")}const K=S,J="critical",H=K[J];typeof H<"u"&&H!==1&&(H===!0?K[J]=1:delete K[J])}function y(S){if(typeof S>"u"||r.isString(S))return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert must be a string or a non-null object");const j=S;if(r.isNonEmptyArray(j.locArgs)&&!r.isNonEmptyString(j.locKey))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert.locKey is required when specifying locArgs");if(r.isNonEmptyArray(j.titleLocArgs)&&!r.isNonEmptyString(j.titleLocKey))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert.titleLocKey is required when specifying titleLocArgs");if(r.isNonEmptyArray(j.subtitleLocArgs)&&!r.isNonEmptyString(j.subtitleLocKey))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"apns.payload.aps.alert.subtitleLocKey is required when specifying subtitleLocArgs");const K={locKey:"loc-key",locArgs:"loc-args",titleLocKey:"title-loc-key",titleLocArgs:"title-loc-args",subtitleLocKey:"subtitle-loc-key",subtitleLocArgs:"subtitle-loc-args",actionLocKey:"action-loc-key",launchImage:"launch-image"};(0,t.renameProperties)(j,K)}function A(S){if(typeof S>"u")return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android must be a non-null object");if(typeof S.ttl<"u"){if(!r.isNumber(S.ttl)||S.ttl<0)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"TTL must be a non-negative duration in milliseconds");const K=(0,t.transformMillisecondsToSecondsString)(S.ttl);S.ttl=K}d(S.data,"android.data"),w(S.notification),_(S.fcmOptions);const j={collapseKey:"collapse_key",restrictedPackageName:"restricted_package_name",directBootOk:"direct_boot_ok"};(0,t.renameProperties)(S,j)}function w(S){if(typeof S>"u")return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification must be a non-null object");if(typeof S.color<"u"&&!/^#[0-9a-fA-F]{6}$/.test(S.color))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.color must be in the form #RRGGBB");if(r.isNonEmptyArray(S.bodyLocArgs)&&!r.isNonEmptyString(S.bodyLocKey))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.bodyLocKey is required when specifying bodyLocArgs");if(r.isNonEmptyArray(S.titleLocArgs)&&!r.isNonEmptyString(S.titleLocKey))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.titleLocKey is required when specifying titleLocArgs");if(typeof S.imageUrl<"u"&&!r.isURL(S.imageUrl))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.imageUrl must be a valid URL string");if(typeof S.eventTimestamp<"u"){if(!(S.eventTimestamp instanceof Date))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.eventTimestamp must be a valid `Date` object");const K=S.eventTimestamp.toISOString();S.eventTimestamp=K}if(typeof S.vibrateTimingsMillis<"u"){if(!r.isNonEmptyArray(S.vibrateTimingsMillis))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.vibrateTimingsMillis must be a non-empty array of numbers");const K=[];S.vibrateTimingsMillis.forEach(J=>{if(!r.isNumber(J)||J<0)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.vibrateTimingsMillis must be non-negative durations in milliseconds");const H=(0,t.transformMillisecondsToSecondsString)(J);K.push(H)}),S.vibrateTimingsMillis=K}if(typeof S.priority<"u"){const K="PRIORITY_"+S.priority.toUpperCase();S.priority=K}if(typeof S.proxy<"u"){const K=S.proxy.toUpperCase();S.proxy=K}if(typeof S.visibility<"u"){const K=S.visibility.toUpperCase();S.visibility=K}I(S.lightSettings);const j={clickAction:"click_action",bodyLocKey:"body_loc_key",bodyLocArgs:"body_loc_args",titleLocKey:"title_loc_key",titleLocArgs:"title_loc_args",channelId:"channel_id",imageUrl:"image",eventTimestamp:"event_time",localOnly:"local_only",priority:"notification_priority",vibrateTimingsMillis:"vibrate_timings",defaultVibrateTimings:"default_vibrate_timings",defaultSound:"default_sound",lightSettings:"light_settings",defaultLightSettings:"default_light_settings",notificationCount:"notification_count"};(0,t.renameProperties)(S,j)}function I(S){if(typeof S>"u")return;if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings must be a non-null object");if(!r.isNumber(S.lightOnDurationMillis)||S.lightOnDurationMillis<0)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings.lightOnDurationMillis must be a non-negative duration in milliseconds");const j=(0,t.transformMillisecondsToSecondsString)(S.lightOnDurationMillis);if(S.lightOnDurationMillis=j,!r.isNumber(S.lightOffDurationMillis)||S.lightOffDurationMillis<0)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings.lightOffDurationMillis must be a non-negative duration in milliseconds");const K=(0,t.transformMillisecondsToSecondsString)(S.lightOffDurationMillis);if(S.lightOffDurationMillis=K,!r.isString(S.color)||!/^#[0-9a-fA-F]{6}$/.test(S.color)&&!/^#[0-9a-fA-F]{8}$/.test(S.color))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"android.notification.lightSettings.color must be in the form #RRGGBB or #RRGGBBAA format");const J=S.color.length===7?S.color+"FF":S.color,H=/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/i.exec(J);if(!H||H.length<4)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INTERNAL_ERROR,"regex to extract rgba values from "+J+" failed.");const U={red:parseInt(H[1],16)/255,green:parseInt(H[2],16)/255,blue:parseInt(H[3],16)/255,alpha:parseInt(H[4],16)/255};S.color=U;const P={lightOnDurationMillis:"light_on_duration",lightOffDurationMillis:"light_off_duration"};(0,t.renameProperties)(S,P)}function _(S){if(!(typeof S>"u")){if(!r.isNonNullObject(S))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"fcmOptions must be a non-null object");if(typeof S.analyticsLabel<"u"&&!r.isString(S.analyticsLabel))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_PAYLOAD,"analyticsLabel must be a string value")}}return messagingInternal}var messagingApiRequestInternal={},messagingErrorsInternal={};/*! firebase-admin v13.4.0 */var hasRequiredMessagingErrorsInternal;function requireMessagingErrorsInternal(){if(hasRequiredMessagingErrorsInternal)return messagingErrorsInternal;hasRequiredMessagingErrorsInternal=1;/*!
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(messagingErrorsInternal,"__esModule",{value:!0}),messagingErrorsInternal.createFirebaseError=r,messagingErrorsInternal.getErrorCode=u;const t=requireError(),e=requireValidator$1();function r(m){if(m.response.isJson()){const a=m.response.data,o=u(a),s=d(a);return t.FirebaseMessagingError.fromServerError(o,s,a)}let c;switch(m.response.status){case 400:c=t.MessagingClientErrorCode.INVALID_ARGUMENT;break;case 401:case 403:c=t.MessagingClientErrorCode.AUTHENTICATION_ERROR;break;case 500:c=t.MessagingClientErrorCode.INTERNAL_ERROR;break;case 503:c=t.MessagingClientErrorCode.SERVER_UNAVAILABLE;break;default:c=t.MessagingClientErrorCode.UNKNOWN_ERROR}return new t.FirebaseMessagingError({code:c.code,message:`${c.message} Raw server response: "${m.response.text}". Status code: ${m.response.status}.`})}function u(m){if(e.isNonNullObject(m)&&"error"in m){const c=m.error;if(e.isString(c))return c;if(e.isArray(c.details)){const a="type.googleapis.com/google.firebase.fcm.v1.FcmError";for(const o of c.details)if(o["@type"]===a)return o.errorCode}return"status"in c?c.status:c.message}return null}function d(m){return e.isNonNullObject(m)&&"error"in m&&e.isNonEmptyString(m.error.message)?m.error.message:null}return messagingErrorsInternal}/*! firebase-admin v13.4.0 */var hasRequiredMessagingApiRequestInternal;function requireMessagingApiRequestInternal(){if(hasRequiredMessagingApiRequestInternal)return messagingApiRequestInternal;hasRequiredMessagingApiRequestInternal=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(messagingApiRequestInternal,"__esModule",{value:!0}),messagingApiRequestInternal.FirebaseMessagingRequestHandler=void 0;const t=requireApiRequest(),e=requireMessagingErrorsInternal(),r=requireUtils$2(),u=15e3,d="POST",m={"X-Firebase-Client":`fire-admin-node/${(0,r.getSdkVersion)()}`,access_token_auth:"true"};class c{constructor(o){this.httpClient=new t.AuthorizedHttpClient(o),this.http2Client=new t.AuthorizedHttp2Client(o)}invokeRequestHandler(o,s,h){const v={method:d,url:`https://${o}${s}`,data:h,headers:m,timeout:u};return this.httpClient.send(v).then(E=>{if(!E.isJson())throw new t.RequestResponseError(E);if((0,e.getErrorCode)(E.data))throw new t.RequestResponseError(E);return E.data}).catch(E=>{throw E instanceof t.RequestResponseError?(0,e.createFirebaseError)(E):E})}invokeHttpRequestHandlerForSendResponse(o,s,h){const v={method:d,url:`https://${o}${s}`,data:h,headers:m,timeout:u};return this.httpClient.send(v).then(E=>this.buildSendResponse(E)).catch(E=>{if(E instanceof t.RequestResponseError)return this.buildSendResponseFromError(E);throw E})}invokeHttp2RequestHandlerForSendResponse(o,s,h,v){const E={method:d,url:`https://${o}${s}`,data:h,headers:m,timeout:u,http2SessionHandler:v};return this.http2Client.send(E).then(y=>this.buildSendResponse(y)).catch(y=>{if(y instanceof t.RequestResponseError)return this.buildSendResponseFromError(y);throw y})}buildSendResponse(o){const s={success:o.status===200};return s.success?s.messageId=o.data.name:s.error=(0,e.createFirebaseError)(new t.RequestResponseError(o)),s}buildSendResponseFromError(o){return{success:!1,error:(0,e.createFirebaseError)(o)}}}return messagingApiRequestInternal.FirebaseMessagingRequestHandler=c,messagingApiRequestInternal}/*! firebase-admin v13.4.0 */var hasRequiredMessaging$1;function requireMessaging$1(){if(hasRequiredMessaging$1)return messaging$1;hasRequiredMessaging$1=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(messaging$1,"__esModule",{value:!0}),messaging$1.Messaging=void 0;const t=requireDeepCopy(),e=requireError(),r=requireUtils$2(),u=requireValidator$1(),d=requireMessagingInternal(),m=requireMessagingApiRequestInternal(),c=requireApiRequest(),a="fcm.googleapis.com",o="iid.googleapis.com",s="/iid/v1:batchAdd",h="/iid/v1:batchRemove",v=500;function E(A){const w={successCount:0,failureCount:0,errors:[]};return"results"in A&&A.results.forEach((I,_)=>{if("error"in I){w.failureCount+=1;const S=e.FirebaseMessagingError.fromTopicManagementServerError(I.error,void 0,I.error);w.errors.push({index:_,error:S})}else w.successCount+=1}),w}class y{constructor(w){if(this.useLegacyTransport=!1,!u.isNonNullObject(w)||!("options"in w))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,"First argument passed to admin.messaging() must be a valid Firebase app instance.");this.appInternal=w,this.messagingRequestHandler=new m.FirebaseMessagingRequestHandler(w)}get app(){return this.appInternal}enableLegacyHttpTransport(){this.useLegacyTransport=!0}send(w,I){const _=(0,t.deepCopy)(w);if((0,d.validateMessage)(_),typeof I<"u"&&!u.isBoolean(I))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,"dryRun must be a boolean");return this.getUrlPath().then(S=>{const j={message:_};return I&&(j.validate_only=!0),this.messagingRequestHandler.invokeRequestHandler(a,S,j)}).then(S=>S.name)}sendEach(w,I){u.isArray(w)&&w.constructor!==Array&&(w=Array.from(w));const _=(0,t.deepCopy)(w);if(!u.isNonEmptyArray(_))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,"messages must be a non-empty array");if(_.length>v)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,`messages list must not contain more than ${v} items`);if(typeof I<"u"&&!u.isBoolean(I))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,"dryRun must be a boolean");const S=this.useLegacyTransport?void 0:new c.Http2SessionHandler(`https://${a}`);return this.getUrlPath().then(j=>{if(S){let K;return new Promise((J,H)=>{S.invoke().catch(P=>{const Z=K?K.then(this.parseSendResponses):void 0;H(new e.FirebaseMessagingSessionError(P,void 0,Z))});const U=_.map(async P=>{(0,d.validateMessage)(P);const Z={message:P};return I&&(Z.validate_only=!0),this.messagingRequestHandler.invokeHttp2RequestHandlerForSendResponse(a,j,Z,S)});K=Promise.allSettled(U),K.then(J)})}else{const K=_.map(async J=>{(0,d.validateMessage)(J);const H={message:J};return I&&(H.validate_only=!0),this.messagingRequestHandler.invokeHttpRequestHandlerForSendResponse(a,j,H)});return Promise.allSettled(K)}}).then(this.parseSendResponses).finally(()=>{S?.close()})}parseSendResponses(w){const I=[];w.forEach(S=>{S.status==="fulfilled"?I.push(S.value):I.push({success:!1,error:S.reason})});const _=I.filter(S=>S.success).length;return{responses:I,successCount:_,failureCount:I.length-_}}sendEachForMulticast(w,I){const _=(0,t.deepCopy)(w);if(!u.isNonNullObject(_))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,"MulticastMessage must be a non-null object");if(!u.isNonEmptyArray(_.tokens))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,"tokens must be a non-empty array");if(_.tokens.length>v)throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,`tokens list must not contain more than ${v} items`);const S=_.tokens.map(j=>({token:j,android:_.android,apns:_.apns,data:_.data,notification:_.notification,webpush:_.webpush,fcmOptions:_.fcmOptions}));return this.sendEach(S,I)}subscribeToTopic(w,I){return this.sendTopicManagementRequest(w,I,"subscribeToTopic",s)}unsubscribeFromTopic(w,I){return this.sendTopicManagementRequest(w,I,"unsubscribeFromTopic",h)}getUrlPath(){return this.urlPath?Promise.resolve(this.urlPath):r.findProjectId(this.app).then(w=>{if(!u.isNonEmptyString(w))throw new e.FirebaseMessagingError(e.MessagingClientErrorCode.INVALID_ARGUMENT,"Failed to determine project ID for Messaging. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.");return this.urlPath=`/v1/projects/${w}/messages:send`,this.urlPath})}sendTopicManagementRequest(w,I,_,S){return this.validateRegistrationTokensType(w,_),this.validateTopicType(I,_),I=this.normalizeTopic(I),Promise.resolve().then(()=>{this.validateRegistrationTokens(w,_),this.validateTopic(I,_);let j=w;u.isString(w)&&(j=[w]);const K={to:I,registration_tokens:j};return this.messagingRequestHandler.invokeRequestHandler(o,S,K)}).then(j=>E(j))}validateRegistrationTokensType(w,I,_=e.MessagingClientErrorCode.INVALID_ARGUMENT){if(!u.isNonEmptyArray(w)&&!u.isNonEmptyString(w))throw new e.FirebaseMessagingError(_,`Registration token(s) provided to ${I}() must be a non-empty string or a non-empty array.`)}validateRegistrationTokens(w,I,_=e.MessagingClientErrorCode.INVALID_ARGUMENT){if(u.isArray(w)){if(w.length>1e3)throw new e.FirebaseMessagingError(_,`Too many registration tokens provided in a single request to ${I}(). Batch your requests to contain no more than 1,000 registration tokens per request.`);w.forEach((S,j)=>{if(!u.isNonEmptyString(S))throw new e.FirebaseMessagingError(_,`Registration token provided to ${I}() at index ${j} must be a non-empty string.`)})}}validateTopicType(w,I,_=e.MessagingClientErrorCode.INVALID_ARGUMENT){if(!u.isNonEmptyString(w))throw new e.FirebaseMessagingError(_,`Topic provided to ${I}() must be a string which matches the format "/topics/[a-zA-Z0-9-_.~%]+".`)}validateTopic(w,I,_=e.MessagingClientErrorCode.INVALID_ARGUMENT){if(!u.isTopic(w))throw new e.FirebaseMessagingError(_,`Topic provided to ${I}() must be a string which matches the format "/topics/[a-zA-Z0-9-_.~%]+".`)}normalizeTopic(w){return/^\/topics\//.test(w)||(w=`/topics/${w}`),w}}return messaging$1.Messaging=y,messaging$1}var storage$2={},src$9={},nodejsCommon={},service$2={},getRandomValues,rnds8=new Uint8Array(16);function rng$2(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$3(t){return typeof t=="string"&&REGEX.test(t)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify$2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]).toLowerCase();if(!validate$3(r))throw TypeError("Stringified UUID is invalid");return r}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1$3(t,e,r){var u=e&&r||0,d=e||new Array(16);t=t||{};var m=t.node||_nodeId,c=t.clockseq!==void 0?t.clockseq:_clockseq;if(m==null||c==null){var a=t.random||(t.rng||rng$2)();m==null&&(m=_nodeId=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),c==null&&(c=_clockseq=(a[6]<<8|a[7])&16383)}var o=t.msecs!==void 0?t.msecs:Date.now(),s=t.nsecs!==void 0?t.nsecs:_lastNSecs+1,h=o-_lastMSecs+(s-_lastNSecs)/1e4;if(h<0&&t.clockseq===void 0&&(c=c+1&16383),(h<0||o>_lastMSecs)&&t.nsecs===void 0&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=o,_lastNSecs=s,_clockseq=c,o+=122192928e5;var v=((o&268435455)*1e4+s)%4294967296;d[u++]=v>>>24&255,d[u++]=v>>>16&255,d[u++]=v>>>8&255,d[u++]=v&255;var E=o/4294967296*1e4&268435455;d[u++]=E>>>8&255,d[u++]=E&255,d[u++]=E>>>24&15|16,d[u++]=E>>>16&255,d[u++]=c>>>8|128,d[u++]=c&255;for(var y=0;y<6;++y)d[u+y]=m[y];return e||stringify$2(d)}function parse$2(t){if(!validate$3(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function stringToBytes(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35$2(t,e,r){function u(d,m,c,a){if(typeof d=="string"&&(d=stringToBytes(d)),typeof m=="string"&&(m=parse$2(m)),m.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+d.length);if(o.set(m),o.set(d,m.length),o=r(o),o[6]=o[6]&15|e,o[8]=o[8]&63|128,c){a=a||0;for(var s=0;s<16;++s)c[a+s]=o[s];return c}return stringify$2(o)}try{u.name=t}catch{}return u.DNS=DNS,u.URL=URL$1,u}function md5$2(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(t),t.length*8))}function md5ToHexEncodedArray(t){for(var e=[],r=t.length*32,u="0123456789abcdef",d=0;d<r;d+=8){var m=t[d>>5]>>>d%32&255,c=parseInt(u.charAt(m>>>4&15)+u.charAt(m&15),16);e.push(c)}return e}function getOutputLength(t){return(t+64>>>9<<4)+14+1}function wordsToMd5(t,e){t[e>>5]|=128<<e%32,t[getOutputLength(e)-1]=e;for(var r=1732584193,u=-271733879,d=-1732584194,m=271733878,c=0;c<t.length;c+=16){var a=r,o=u,s=d,h=m;r=md5ff(r,u,d,m,t[c],7,-680876936),m=md5ff(m,r,u,d,t[c+1],12,-389564586),d=md5ff(d,m,r,u,t[c+2],17,606105819),u=md5ff(u,d,m,r,t[c+3],22,-1044525330),r=md5ff(r,u,d,m,t[c+4],7,-176418897),m=md5ff(m,r,u,d,t[c+5],12,1200080426),d=md5ff(d,m,r,u,t[c+6],17,-1473231341),u=md5ff(u,d,m,r,t[c+7],22,-45705983),r=md5ff(r,u,d,m,t[c+8],7,1770035416),m=md5ff(m,r,u,d,t[c+9],12,-1958414417),d=md5ff(d,m,r,u,t[c+10],17,-42063),u=md5ff(u,d,m,r,t[c+11],22,-1990404162),r=md5ff(r,u,d,m,t[c+12],7,1804603682),m=md5ff(m,r,u,d,t[c+13],12,-40341101),d=md5ff(d,m,r,u,t[c+14],17,-1502002290),u=md5ff(u,d,m,r,t[c+15],22,1236535329),r=md5gg(r,u,d,m,t[c+1],5,-165796510),m=md5gg(m,r,u,d,t[c+6],9,-1069501632),d=md5gg(d,m,r,u,t[c+11],14,643717713),u=md5gg(u,d,m,r,t[c],20,-373897302),r=md5gg(r,u,d,m,t[c+5],5,-701558691),m=md5gg(m,r,u,d,t[c+10],9,38016083),d=md5gg(d,m,r,u,t[c+15],14,-660478335),u=md5gg(u,d,m,r,t[c+4],20,-405537848),r=md5gg(r,u,d,m,t[c+9],5,568446438),m=md5gg(m,r,u,d,t[c+14],9,-1019803690),d=md5gg(d,m,r,u,t[c+3],14,-187363961),u=md5gg(u,d,m,r,t[c+8],20,1163531501),r=md5gg(r,u,d,m,t[c+13],5,-1444681467),m=md5gg(m,r,u,d,t[c+2],9,-51403784),d=md5gg(d,m,r,u,t[c+7],14,1735328473),u=md5gg(u,d,m,r,t[c+12],20,-1926607734),r=md5hh(r,u,d,m,t[c+5],4,-378558),m=md5hh(m,r,u,d,t[c+8],11,-2022574463),d=md5hh(d,m,r,u,t[c+11],16,1839030562),u=md5hh(u,d,m,r,t[c+14],23,-35309556),r=md5hh(r,u,d,m,t[c+1],4,-1530992060),m=md5hh(m,r,u,d,t[c+4],11,1272893353),d=md5hh(d,m,r,u,t[c+7],16,-155497632),u=md5hh(u,d,m,r,t[c+10],23,-1094730640),r=md5hh(r,u,d,m,t[c+13],4,681279174),m=md5hh(m,r,u,d,t[c],11,-358537222),d=md5hh(d,m,r,u,t[c+3],16,-722521979),u=md5hh(u,d,m,r,t[c+6],23,76029189),r=md5hh(r,u,d,m,t[c+9],4,-640364487),m=md5hh(m,r,u,d,t[c+12],11,-421815835),d=md5hh(d,m,r,u,t[c+15],16,530742520),u=md5hh(u,d,m,r,t[c+2],23,-995338651),r=md5ii(r,u,d,m,t[c],6,-198630844),m=md5ii(m,r,u,d,t[c+7],10,1126891415),d=md5ii(d,m,r,u,t[c+14],15,-1416354905),u=md5ii(u,d,m,r,t[c+5],21,-57434055),r=md5ii(r,u,d,m,t[c+12],6,1700485571),m=md5ii(m,r,u,d,t[c+3],10,-1894986606),d=md5ii(d,m,r,u,t[c+10],15,-1051523),u=md5ii(u,d,m,r,t[c+1],21,-2054922799),r=md5ii(r,u,d,m,t[c+8],6,1873313359),m=md5ii(m,r,u,d,t[c+15],10,-30611744),d=md5ii(d,m,r,u,t[c+6],15,-1560198380),u=md5ii(u,d,m,r,t[c+13],21,1309151649),r=md5ii(r,u,d,m,t[c+4],6,-145523070),m=md5ii(m,r,u,d,t[c+11],10,-1120210379),d=md5ii(d,m,r,u,t[c+2],15,718787259),u=md5ii(u,d,m,r,t[c+9],21,-343485551),r=safeAdd(r,a),u=safeAdd(u,o),d=safeAdd(d,s),m=safeAdd(m,h)}return[r,u,d,m]}function bytesToWords(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(getOutputLength(e)),u=0;u<e;u+=8)r[u>>5]|=(t[u/8]&255)<<u%32;return r}function safeAdd(t,e){var r=(t&65535)+(e&65535),u=(t>>16)+(e>>16)+(r>>16);return u<<16|r&65535}function bitRotateLeft(t,e){return t<<e|t>>>32-e}function md5cmn(t,e,r,u,d,m){return safeAdd(bitRotateLeft(safeAdd(safeAdd(e,t),safeAdd(u,m)),d),r)}function md5ff(t,e,r,u,d,m,c){return md5cmn(e&r|~e&u,t,e,d,m,c)}function md5gg(t,e,r,u,d,m,c){return md5cmn(e&u|r&~u,t,e,d,m,c)}function md5hh(t,e,r,u,d,m,c){return md5cmn(e^r^u,t,e,d,m,c)}function md5ii(t,e,r,u,d,m,c){return md5cmn(r^(e|~u),t,e,d,m,c)}var v3$2=v35$2("v3",48,md5$2);function v4$2(t,e,r){t=t||{};var u=t.random||(t.rng||rng$2)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,e){r=r||0;for(var d=0;d<16;++d)e[r+d]=u[d];return e}return stringify$2(u)}function f(t,e,r,u){switch(t){case 0:return e&r^~e&u;case 1:return e^r^u;case 2:return e&r^e&u^r&u;case 3:return e^r^u}}function ROTL(t,e){return t<<e|t>>>32-e}function sha1$2(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var u=unescape(encodeURIComponent(t));t=[];for(var d=0;d<u.length;++d)t.push(u.charCodeAt(d))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var m=t.length/4+2,c=Math.ceil(m/16),a=new Array(c),o=0;o<c;++o){for(var s=new Uint32Array(16),h=0;h<16;++h)s[h]=t[o*64+h*4]<<24|t[o*64+h*4+1]<<16|t[o*64+h*4+2]<<8|t[o*64+h*4+3];a[o]=s}a[c-1][14]=(t.length-1)*8/Math.pow(2,32),a[c-1][14]=Math.floor(a[c-1][14]),a[c-1][15]=(t.length-1)*8&4294967295;for(var v=0;v<c;++v){for(var E=new Uint32Array(80),y=0;y<16;++y)E[y]=a[v][y];for(var A=16;A<80;++A)E[A]=ROTL(E[A-3]^E[A-8]^E[A-14]^E[A-16],1);for(var w=r[0],I=r[1],_=r[2],S=r[3],j=r[4],K=0;K<80;++K){var J=Math.floor(K/20),H=ROTL(w,5)+f(J,I,_,S)+j+e[J]+E[K]>>>0;j=S,S=_,_=ROTL(I,30)>>>0,I=w,w=H}r[0]=r[0]+w>>>0,r[1]=r[1]+I>>>0,r[2]=r[2]+_>>>0,r[3]=r[3]+S>>>0,r[4]=r[4]+j>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var v5$2=v35$2("v5",80,sha1$2);const nil$2="00000000-0000-0000-0000-000000000000";function version$8(t){if(!validate$3(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil$2,parse:parse$2,stringify:stringify$2,v1:v1$3,v3:v3$2,v4:v4$2,v5:v5$2,validate:validate$3,version:version$8},Symbol.toStringTag,{value:"Module"})),require$$6$1=getAugmentedNamespace(esmBrowser);var util$6={},src$8={},hasRequiredSrc$9;function requireSrc$9(){if(hasRequiredSrc$9)return src$8;hasRequiredSrc$9=1,Object.defineProperty(src$8,"__esModule",{value:!0}),src$8.MissingProjectIdError=src$8.replaceProjectIdToken=void 0;const t=require$$1$3;function e(u,d){if(Array.isArray(u)&&(u=u.map(m=>e(m,d))),u!==null&&typeof u=="object"&&!(u instanceof Buffer)&&!(u instanceof t.Stream)&&typeof u.hasOwnProperty=="function")for(const m in u)u.hasOwnProperty(m)&&(u[m]=e(u[m],d));if(typeof u=="string"&&u.indexOf("{{projectId}}")>-1){if(!d||d==="{{projectId}}")throw new r;u=u.replace(/{{projectId}}/g,d)}return u}src$8.replaceProjectIdToken=e;class r extends Error{constructor(){super(...arguments),this.message=`Sorry, we cannot connect to Cloud Services without a project
    ID. You may specify one with an environment variable named
    "GOOGLE_CLOUD_PROJECT".`.replace(/ +/g," ")}}return src$8.MissingProjectIdError=r,src$8}var commonjs={},namedReferences={},hasRequiredNamedReferences;function requireNamedReferences(){return hasRequiredNamedReferences||(hasRequiredNamedReferences=1,function(t){var e=namedReferences&&namedReferences.__assign||function(){return e=Object.assign||function(m){for(var c,a=1,o=arguments.length;a<o;a++){c=arguments[a];for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&(m[s]=c[s])}return m},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.namedReferences=t.bodyRegExps=void 0;var r="~",u="~~";function d(m,c){for(var a={},o={},s=m.split(u),h=!1,v=0;s.length>v;v++){for(var E=s[v].split(r),y=0;y<E.length;y+=2){var A=E[y],w=E[y+1],I="&"+A+";";a[I]=w,h&&(a["&"+A]=w),o[w]=I}h=!0}return c?{entities:e(e({},a),c.entities),characters:e(e({},o),c.characters)}:{entities:a,characters:o}}t.bodyRegExps={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},t.namedReferences={},t.namedReferences.xml=d(`lt~<~gt~>~quot~"~apos~'~amp~&`),t.namedReferences.html4=d(`apos~'~OElig~~oelig~~Scaron~~scaron~~Yuml~~circ~~tilde~~ensp~~emsp~~thinsp~~zwnj~~zwj~~lrm~~rlm~~ndash~~mdash~~lsquo~~rsquo~~sbquo~~ldquo~~rdquo~~bdquo~~dagger~~Dagger~~permil~~lsaquo~~rsaquo~~euro~~fnof~~Alpha~~Beta~~Gamma~~Delta~~Epsilon~~Zeta~~Eta~~Theta~~Iota~~Kappa~~Lambda~~Mu~~Nu~~Xi~~Omicron~~Pi~~Rho~~Sigma~~Tau~~Upsilon~~Phi~~Chi~~Psi~~Omega~~alpha~~beta~~gamma~~delta~~epsilon~~zeta~~eta~~theta~~iota~~kappa~~lambda~~mu~~nu~~xi~~omicron~~pi~~rho~~sigmaf~~sigma~~tau~~upsilon~~phi~~chi~~psi~~omega~~thetasym~~upsih~~piv~~bull~~hellip~~prime~~Prime~~oline~~frasl~~weierp~~image~~real~~trade~~alefsym~~larr~~uarr~~rarr~~darr~~harr~~crarr~~lArr~~uArr~~rArr~~dArr~~hArr~~forall~~part~~exist~~empty~~nabla~~isin~~notin~~ni~~prod~~sum~~minus~~lowast~~radic~~prop~~infin~~ang~~and~~or~~cap~~cup~~int~~there4~~sim~~cong~~asymp~~ne~~equiv~~le~~ge~~sub~~sup~~nsub~~sube~~supe~~oplus~~otimes~~perp~~sdot~~lceil~~rceil~~lfloor~~rfloor~~lang~~rang~~loz~~spades~~clubs~~hearts~~diams~~~nbsp~~iexcl~~cent~~pound~~curren~~yen~~brvbar~~sect~~uml~~copy~~ordf~~laquo~~not~~shy~~reg~~macr~~deg~~plusmn~~sup2~~sup3~~acute~~micro~~para~~middot~~cedil~~sup1~~ordm~~raquo~~frac14~~frac12~~frac34~~iquest~~Agrave~~Aacute~~Acirc~~Atilde~~Auml~~Aring~~AElig~~Ccedil~~Egrave~~Eacute~~Ecirc~~Euml~~Igrave~~Iacute~~Icirc~~Iuml~~ETH~~Ntilde~~Ograve~~Oacute~~Ocirc~~Otilde~~Ouml~~times~~Oslash~~Ugrave~~Uacute~~Ucirc~~Uuml~~Yacute~~THORN~~szlig~~agrave~~aacute~~acirc~~atilde~~auml~~aring~~aelig~~ccedil~~egrave~~eacute~~ecirc~~euml~~igrave~~iacute~~icirc~~iuml~~eth~~ntilde~~ograve~~oacute~~ocirc~~otilde~~ouml~~divide~~oslash~~ugrave~~uacute~~ucirc~~uuml~~yacute~~thorn~~yuml~~quot~"~amp~&~lt~<~gt~>`),t.namedReferences.html5=d('Abreve~~Acy~~Afr~~Amacr~~And~~Aogon~~Aopf~~ApplyFunction~~Ascr~~Assign~~Backslash~~Barv~~Barwed~~Bcy~~Because~~Bernoullis~~Bfr~~Bopf~~Breve~~Bscr~~Bumpeq~~CHcy~~Cacute~~Cap~~CapitalDifferentialD~~Cayleys~~Ccaron~~Ccirc~~Cconint~~Cdot~~Cedilla~~CenterDot~~Cfr~~CircleDot~~CircleMinus~~CirclePlus~~CircleTimes~~ClockwiseContourIntegral~~CloseCurlyDoubleQuote~~CloseCurlyQuote~~Colon~~Colone~~Congruent~~Conint~~ContourIntegral~~Copf~~Coproduct~~CounterClockwiseContourIntegral~~Cross~~Cscr~~Cup~~CupCap~~DD~~DDotrahd~~DJcy~~DScy~~DZcy~~Darr~~Dashv~~Dcaron~~Dcy~~Del~~Dfr~~DiacriticalAcute~~DiacriticalDot~~DiacriticalDoubleAcute~~DiacriticalGrave~`~DiacriticalTilde~~Diamond~~DifferentialD~~Dopf~~Dot~~DotDot~~DotEqual~~DoubleContourIntegral~~DoubleDot~~DoubleDownArrow~~DoubleLeftArrow~~DoubleLeftRightArrow~~DoubleLeftTee~~DoubleLongLeftArrow~~DoubleLongLeftRightArrow~~DoubleLongRightArrow~~DoubleRightArrow~~DoubleRightTee~~DoubleUpArrow~~DoubleUpDownArrow~~DoubleVerticalBar~~DownArrow~~DownArrowBar~~DownArrowUpArrow~~DownBreve~~DownLeftRightVector~~DownLeftTeeVector~~DownLeftVector~~DownLeftVectorBar~~DownRightTeeVector~~DownRightVector~~DownRightVectorBar~~DownTee~~DownTeeArrow~~Downarrow~~Dscr~~Dstrok~~ENG~~Ecaron~~Ecy~~Edot~~Efr~~Element~~Emacr~~EmptySmallSquare~~EmptyVerySmallSquare~~Eogon~~Eopf~~Equal~~EqualTilde~~Equilibrium~~Escr~~Esim~~Exists~~ExponentialE~~Fcy~~Ffr~~FilledSmallSquare~~FilledVerySmallSquare~~Fopf~~ForAll~~Fouriertrf~~Fscr~~GJcy~~Gammad~~Gbreve~~Gcedil~~Gcirc~~Gcy~~Gdot~~Gfr~~Gg~~Gopf~~GreaterEqual~~GreaterEqualLess~~GreaterFullEqual~~GreaterGreater~~GreaterLess~~GreaterSlantEqual~~GreaterTilde~~Gscr~~Gt~~HARDcy~~Hacek~~Hat~^~Hcirc~~Hfr~~HilbertSpace~~Hopf~~HorizontalLine~~Hscr~~Hstrok~~HumpDownHump~~HumpEqual~~IEcy~~IJlig~~IOcy~~Icy~~Idot~~Ifr~~Im~~Imacr~~ImaginaryI~~Implies~~Int~~Integral~~Intersection~~InvisibleComma~~InvisibleTimes~~Iogon~~Iopf~~Iscr~~Itilde~~Iukcy~~Jcirc~~Jcy~~Jfr~~Jopf~~Jscr~~Jsercy~~Jukcy~~KHcy~~KJcy~~Kcedil~~Kcy~~Kfr~~Kopf~~Kscr~~LJcy~~Lacute~~Lang~~Laplacetrf~~Larr~~Lcaron~~Lcedil~~Lcy~~LeftAngleBracket~~LeftArrow~~LeftArrowBar~~LeftArrowRightArrow~~LeftCeiling~~LeftDoubleBracket~~LeftDownTeeVector~~LeftDownVector~~LeftDownVectorBar~~LeftFloor~~LeftRightArrow~~LeftRightVector~~LeftTee~~LeftTeeArrow~~LeftTeeVector~~LeftTriangle~~LeftTriangleBar~~LeftTriangleEqual~~LeftUpDownVector~~LeftUpTeeVector~~LeftUpVector~~LeftUpVectorBar~~LeftVector~~LeftVectorBar~~Leftarrow~~Leftrightarrow~~LessEqualGreater~~LessFullEqual~~LessGreater~~LessLess~~LessSlantEqual~~LessTilde~~Lfr~~Ll~~Lleftarrow~~Lmidot~~LongLeftArrow~~LongLeftRightArrow~~LongRightArrow~~Longleftarrow~~Longleftrightarrow~~Longrightarrow~~Lopf~~LowerLeftArrow~~LowerRightArrow~~Lscr~~Lsh~~Lstrok~~Lt~~Map~~Mcy~~MediumSpace~~Mellintrf~~Mfr~~MinusPlus~~Mopf~~Mscr~~NJcy~~Nacute~~Ncaron~~Ncedil~~Ncy~~NegativeMediumSpace~~NegativeThickSpace~~NegativeThinSpace~~NegativeVeryThinSpace~~NestedGreaterGreater~~NestedLessLess~~NewLine~\n~Nfr~~NoBreak~~NonBreakingSpace~~Nopf~~Not~~NotCongruent~~NotCupCap~~NotDoubleVerticalBar~~NotElement~~NotEqual~~NotEqualTilde~~NotExists~~NotGreater~~NotGreaterEqual~~NotGreaterFullEqual~~NotGreaterGreater~~NotGreaterLess~~NotGreaterSlantEqual~~NotGreaterTilde~~NotHumpDownHump~~NotHumpEqual~~NotLeftTriangle~~NotLeftTriangleBar~~NotLeftTriangleEqual~~NotLess~~NotLessEqual~~NotLessGreater~~NotLessLess~~NotLessSlantEqual~~NotLessTilde~~NotNestedGreaterGreater~~NotNestedLessLess~~NotPrecedes~~NotPrecedesEqual~~NotPrecedesSlantEqual~~NotReverseElement~~NotRightTriangle~~NotRightTriangleBar~~NotRightTriangleEqual~~NotSquareSubset~~NotSquareSubsetEqual~~NotSquareSuperset~~NotSquareSupersetEqual~~NotSubset~~NotSubsetEqual~~NotSucceeds~~NotSucceedsEqual~~NotSucceedsSlantEqual~~NotSucceedsTilde~~NotSuperset~~NotSupersetEqual~~NotTilde~~NotTildeEqual~~NotTildeFullEqual~~NotTildeTilde~~NotVerticalBar~~Nscr~~Ocy~~Odblac~~Ofr~~Omacr~~Oopf~~OpenCurlyDoubleQuote~~OpenCurlyQuote~~Or~~Oscr~~Otimes~~OverBar~~OverBrace~~OverBracket~~OverParenthesis~~PartialD~~Pcy~~Pfr~~PlusMinus~~Poincareplane~~Popf~~Pr~~Precedes~~PrecedesEqual~~PrecedesSlantEqual~~PrecedesTilde~~Product~~Proportion~~Proportional~~Pscr~~Qfr~~Qopf~~Qscr~~RBarr~~Racute~~Rang~~Rarr~~Rarrtl~~Rcaron~~Rcedil~~Rcy~~Re~~ReverseElement~~ReverseEquilibrium~~ReverseUpEquilibrium~~Rfr~~RightAngleBracket~~RightArrow~~RightArrowBar~~RightArrowLeftArrow~~RightCeiling~~RightDoubleBracket~~RightDownTeeVector~~RightDownVector~~RightDownVectorBar~~RightFloor~~RightTee~~RightTeeArrow~~RightTeeVector~~RightTriangle~~RightTriangleBar~~RightTriangleEqual~~RightUpDownVector~~RightUpTeeVector~~RightUpVector~~RightUpVectorBar~~RightVector~~RightVectorBar~~Rightarrow~~Ropf~~RoundImplies~~Rrightarrow~~Rscr~~Rsh~~RuleDelayed~~SHCHcy~~SHcy~~SOFTcy~~Sacute~~Sc~~Scedil~~Scirc~~Scy~~Sfr~~ShortDownArrow~~ShortLeftArrow~~ShortRightArrow~~ShortUpArrow~~SmallCircle~~Sopf~~Sqrt~~Square~~SquareIntersection~~SquareSubset~~SquareSubsetEqual~~SquareSuperset~~SquareSupersetEqual~~SquareUnion~~Sscr~~Star~~Sub~~Subset~~SubsetEqual~~Succeeds~~SucceedsEqual~~SucceedsSlantEqual~~SucceedsTilde~~SuchThat~~Sum~~Sup~~Superset~~SupersetEqual~~Supset~~TRADE~~TSHcy~~TScy~~Tab~	~Tcaron~~Tcedil~~Tcy~~Tfr~~Therefore~~ThickSpace~~ThinSpace~~Tilde~~TildeEqual~~TildeFullEqual~~TildeTilde~~Topf~~TripleDot~~Tscr~~Tstrok~~Uarr~~Uarrocir~~Ubrcy~~Ubreve~~Ucy~~Udblac~~Ufr~~Umacr~~UnderBar~_~UnderBrace~~UnderBracket~~UnderParenthesis~~Union~~UnionPlus~~Uogon~~Uopf~~UpArrow~~UpArrowBar~~UpArrowDownArrow~~UpDownArrow~~UpEquilibrium~~UpTee~~UpTeeArrow~~Uparrow~~Updownarrow~~UpperLeftArrow~~UpperRightArrow~~Upsi~~Uring~~Uscr~~Utilde~~VDash~~Vbar~~Vcy~~Vdash~~Vdashl~~Vee~~Verbar~~Vert~~VerticalBar~~VerticalLine~|~VerticalSeparator~~VerticalTilde~~VeryThinSpace~~Vfr~~Vopf~~Vscr~~Vvdash~~Wcirc~~Wedge~~Wfr~~Wopf~~Wscr~~Xfr~~Xopf~~Xscr~~YAcy~~YIcy~~YUcy~~Ycirc~~Ycy~~Yfr~~Yopf~~Yscr~~ZHcy~~Zacute~~Zcaron~~Zcy~~Zdot~~ZeroWidthSpace~~Zfr~~Zopf~~Zscr~~abreve~~ac~~acE~~acd~~acy~~af~~afr~~aleph~~amacr~~amalg~~andand~~andd~~andslope~~andv~~ange~~angle~~angmsd~~angmsdaa~~angmsdab~~angmsdac~~angmsdad~~angmsdae~~angmsdaf~~angmsdag~~angmsdah~~angrt~~angrtvb~~angrtvbd~~angsph~~angst~~angzarr~~aogon~~aopf~~ap~~apE~~apacir~~ape~~apid~~approx~~approxeq~~ascr~~ast~*~asympeq~~awconint~~awint~~bNot~~backcong~~backepsilon~~backprime~~backsim~~backsimeq~~barvee~~barwed~~barwedge~~bbrk~~bbrktbrk~~bcong~~bcy~~becaus~~because~~bemptyv~~bepsi~~bernou~~beth~~between~~bfr~~bigcap~~bigcirc~~bigcup~~bigodot~~bigoplus~~bigotimes~~bigsqcup~~bigstar~~bigtriangledown~~bigtriangleup~~biguplus~~bigvee~~bigwedge~~bkarow~~blacklozenge~~blacksquare~~blacktriangle~~blacktriangledown~~blacktriangleleft~~blacktriangleright~~blank~~blk12~~blk14~~blk34~~block~~bne~=~bnequiv~~bnot~~bopf~~bot~~bottom~~bowtie~~boxDL~~boxDR~~boxDl~~boxDr~~boxH~~boxHD~~boxHU~~boxHd~~boxHu~~boxUL~~boxUR~~boxUl~~boxUr~~boxV~~boxVH~~boxVL~~boxVR~~boxVh~~boxVl~~boxVr~~boxbox~~boxdL~~boxdR~~boxdl~~boxdr~~boxh~~boxhD~~boxhU~~boxhd~~boxhu~~boxminus~~boxplus~~boxtimes~~boxuL~~boxuR~~boxul~~boxur~~boxv~~boxvH~~boxvL~~boxvR~~boxvh~~boxvl~~boxvr~~bprime~~breve~~bscr~~bsemi~~bsim~~bsime~~bsol~\\~bsolb~~bsolhsub~~bullet~~bump~~bumpE~~bumpe~~bumpeq~~cacute~~capand~~capbrcup~~capcap~~capcup~~capdot~~caps~~caret~~caron~~ccaps~~ccaron~~ccirc~~ccups~~ccupssm~~cdot~~cemptyv~~centerdot~~cfr~~chcy~~check~~checkmark~~cir~~cirE~~circeq~~circlearrowleft~~circlearrowright~~circledR~~circledS~~circledast~~circledcirc~~circleddash~~cire~~cirfnint~~cirmid~~cirscir~~clubsuit~~colon~:~colone~~coloneq~~comma~,~commat~@~comp~~compfn~~complement~~complexes~~congdot~~conint~~copf~~coprod~~copysr~~cross~~cscr~~csub~~csube~~csup~~csupe~~ctdot~~cudarrl~~cudarrr~~cuepr~~cuesc~~cularr~~cularrp~~cupbrcap~~cupcap~~cupcup~~cupdot~~cupor~~cups~~curarr~~curarrm~~curlyeqprec~~curlyeqsucc~~curlyvee~~curlywedge~~curvearrowleft~~curvearrowright~~cuvee~~cuwed~~cwconint~~cwint~~cylcty~~dHar~~daleth~~dash~~dashv~~dbkarow~~dblac~~dcaron~~dcy~~dd~~ddagger~~ddarr~~ddotseq~~demptyv~~dfisht~~dfr~~dharl~~dharr~~diam~~diamond~~diamondsuit~~die~~digamma~~disin~~div~~divideontimes~~divonx~~djcy~~dlcorn~~dlcrop~~dollar~$~dopf~~dot~~doteq~~doteqdot~~dotminus~~dotplus~~dotsquare~~doublebarwedge~~downarrow~~downdownarrows~~downharpoonleft~~downharpoonright~~drbkarow~~drcorn~~drcrop~~dscr~~dscy~~dsol~~dstrok~~dtdot~~dtri~~dtrif~~duarr~~duhar~~dwangle~~dzcy~~dzigrarr~~eDDot~~eDot~~easter~~ecaron~~ecir~~ecolon~~ecy~~edot~~ee~~efDot~~efr~~eg~~egs~~egsdot~~el~~elinters~~ell~~els~~elsdot~~emacr~~emptyset~~emptyv~~emsp13~~emsp14~~eng~~eogon~~eopf~~epar~~eparsl~~eplus~~epsi~~epsiv~~eqcirc~~eqcolon~~eqsim~~eqslantgtr~~eqslantless~~equals~=~equest~~equivDD~~eqvparsl~~erDot~~erarr~~escr~~esdot~~esim~~excl~!~expectation~~exponentiale~~fallingdotseq~~fcy~~female~~ffilig~~fflig~~ffllig~~ffr~~filig~~fjlig~fj~flat~~fllig~~fltns~~fopf~~fork~~forkv~~fpartint~~frac13~~frac15~~frac16~~frac18~~frac23~~frac25~~frac35~~frac38~~frac45~~frac56~~frac58~~frac78~~frown~~fscr~~gE~~gEl~~gacute~~gammad~~gap~~gbreve~~gcirc~~gcy~~gdot~~gel~~geq~~geqq~~geqslant~~ges~~gescc~~gesdot~~gesdoto~~gesdotol~~gesl~~gesles~~gfr~~gg~~ggg~~gimel~~gjcy~~gl~~glE~~gla~~glj~~gnE~~gnap~~gnapprox~~gne~~gneq~~gneqq~~gnsim~~gopf~~grave~`~gscr~~gsim~~gsime~~gsiml~~gtcc~~gtcir~~gtdot~~gtlPar~~gtquest~~gtrapprox~~gtrarr~~gtrdot~~gtreqless~~gtreqqless~~gtrless~~gtrsim~~gvertneqq~~gvnE~~hairsp~~half~~hamilt~~hardcy~~harrcir~~harrw~~hbar~~hcirc~~heartsuit~~hercon~~hfr~~hksearow~~hkswarow~~hoarr~~homtht~~hookleftarrow~~hookrightarrow~~hopf~~horbar~~hscr~~hslash~~hstrok~~hybull~~hyphen~~ic~~icy~~iecy~~iff~~ifr~~ii~~iiiint~~iiint~~iinfin~~iiota~~ijlig~~imacr~~imagline~~imagpart~~imath~~imof~~imped~~in~~incare~~infintie~~inodot~~intcal~~integers~~intercal~~intlarhk~~intprod~~iocy~~iogon~~iopf~~iprod~~iscr~~isinE~~isindot~~isins~~isinsv~~isinv~~it~~itilde~~iukcy~~jcirc~~jcy~~jfr~~jmath~~jopf~~jscr~~jsercy~~jukcy~~kappav~~kcedil~~kcy~~kfr~~kgreen~~khcy~~kjcy~~kopf~~kscr~~lAarr~~lAtail~~lBarr~~lE~~lEg~~lHar~~lacute~~laemptyv~~lagran~~langd~~langle~~lap~~larrb~~larrbfs~~larrfs~~larrhk~~larrlp~~larrpl~~larrsim~~larrtl~~lat~~latail~~late~~lates~~lbarr~~lbbrk~~lbrace~{~lbrack~[~lbrke~~lbrksld~~lbrkslu~~lcaron~~lcedil~~lcub~{~lcy~~ldca~~ldquor~~ldrdhar~~ldrushar~~ldsh~~leftarrow~~leftarrowtail~~leftharpoondown~~leftharpoonup~~leftleftarrows~~leftrightarrow~~leftrightarrows~~leftrightharpoons~~leftrightsquigarrow~~leftthreetimes~~leg~~leq~~leqq~~leqslant~~les~~lescc~~lesdot~~lesdoto~~lesdotor~~lesg~~lesges~~lessapprox~~lessdot~~lesseqgtr~~lesseqqgtr~~lessgtr~~lesssim~~lfisht~~lfr~~lg~~lgE~~lhard~~lharu~~lharul~~lhblk~~ljcy~~ll~~llarr~~llcorner~~llhard~~lltri~~lmidot~~lmoust~~lmoustache~~lnE~~lnap~~lnapprox~~lne~~lneq~~lneqq~~lnsim~~loang~~loarr~~lobrk~~longleftarrow~~longleftrightarrow~~longmapsto~~longrightarrow~~looparrowleft~~looparrowright~~lopar~~lopf~~loplus~~lotimes~~lowbar~_~lozenge~~lozf~~lpar~(~lparlt~~lrarr~~lrcorner~~lrhar~~lrhard~~lrtri~~lscr~~lsh~~lsim~~lsime~~lsimg~~lsqb~[~lsquor~~lstrok~~ltcc~~ltcir~~ltdot~~lthree~~ltimes~~ltlarr~~ltquest~~ltrPar~~ltri~~ltrie~~ltrif~~lurdshar~~luruhar~~lvertneqq~~lvnE~~mDDot~~male~~malt~~maltese~~map~~mapsto~~mapstodown~~mapstoleft~~mapstoup~~marker~~mcomma~~mcy~~measuredangle~~mfr~~mho~~mid~~midast~*~midcir~~minusb~~minusd~~minusdu~~mlcp~~mldr~~mnplus~~models~~mopf~~mp~~mscr~~mstpos~~multimap~~mumap~~nGg~~nGt~~nGtv~~nLeftarrow~~nLeftrightarrow~~nLl~~nLt~~nLtv~~nRightarrow~~nVDash~~nVdash~~nacute~~nang~~nap~~napE~~napid~~napos~~napprox~~natur~~natural~~naturals~~nbump~~nbumpe~~ncap~~ncaron~~ncedil~~ncong~~ncongdot~~ncup~~ncy~~neArr~~nearhk~~nearr~~nearrow~~nedot~~nequiv~~nesear~~nesim~~nexist~~nexists~~nfr~~ngE~~nge~~ngeq~~ngeqq~~ngeqslant~~nges~~ngsim~~ngt~~ngtr~~nhArr~~nharr~~nhpar~~nis~~nisd~~niv~~njcy~~nlArr~~nlE~~nlarr~~nldr~~nle~~nleftarrow~~nleftrightarrow~~nleq~~nleqq~~nleqslant~~nles~~nless~~nlsim~~nlt~~nltri~~nltrie~~nmid~~nopf~~notinE~~notindot~~notinva~~notinvb~~notinvc~~notni~~notniva~~notnivb~~notnivc~~npar~~nparallel~~nparsl~~npart~~npolint~~npr~~nprcue~~npre~~nprec~~npreceq~~nrArr~~nrarr~~nrarrc~~nrarrw~~nrightarrow~~nrtri~~nrtrie~~nsc~~nsccue~~nsce~~nscr~~nshortmid~~nshortparallel~~nsim~~nsime~~nsimeq~~nsmid~~nspar~~nsqsube~~nsqsupe~~nsubE~~nsube~~nsubset~~nsubseteq~~nsubseteqq~~nsucc~~nsucceq~~nsup~~nsupE~~nsupe~~nsupset~~nsupseteq~~nsupseteqq~~ntgl~~ntlg~~ntriangleleft~~ntrianglelefteq~~ntriangleright~~ntrianglerighteq~~num~#~numero~~numsp~~nvDash~~nvHarr~~nvap~~nvdash~~nvge~~nvgt~>~nvinfin~~nvlArr~~nvle~~nvlt~<~nvltrie~~nvrArr~~nvrtrie~~nvsim~~nwArr~~nwarhk~~nwarr~~nwarrow~~nwnear~~oS~~oast~~ocir~~ocy~~odash~~odblac~~odiv~~odot~~odsold~~ofcir~~ofr~~ogon~~ogt~~ohbar~~ohm~~oint~~olarr~~olcir~~olcross~~olt~~omacr~~omid~~ominus~~oopf~~opar~~operp~~orarr~~ord~~order~~orderof~~origof~~oror~~orslope~~orv~~oscr~~osol~~otimesas~~ovbar~~par~~parallel~~parsim~~parsl~~pcy~~percnt~%~period~.~pertenk~~pfr~~phiv~~phmmat~~phone~~pitchfork~~planck~~planckh~~plankv~~plus~+~plusacir~~plusb~~pluscir~~plusdo~~plusdu~~pluse~~plussim~~plustwo~~pm~~pointint~~popf~~pr~~prE~~prap~~prcue~~pre~~prec~~precapprox~~preccurlyeq~~preceq~~precnapprox~~precneqq~~precnsim~~precsim~~primes~~prnE~~prnap~~prnsim~~profalar~~profline~~profsurf~~propto~~prsim~~prurel~~pscr~~puncsp~~qfr~~qint~~qopf~~qprime~~qscr~~quaternions~~quatint~~quest~?~questeq~~rAarr~~rAtail~~rBarr~~rHar~~race~~racute~~raemptyv~~rangd~~range~~rangle~~rarrap~~rarrb~~rarrbfs~~rarrc~~rarrfs~~rarrhk~~rarrlp~~rarrpl~~rarrsim~~rarrtl~~rarrw~~ratail~~ratio~~rationals~~rbarr~~rbbrk~~rbrace~}~rbrack~]~rbrke~~rbrksld~~rbrkslu~~rcaron~~rcedil~~rcub~}~rcy~~rdca~~rdldhar~~rdquor~~rdsh~~realine~~realpart~~reals~~rect~~rfisht~~rfr~~rhard~~rharu~~rharul~~rhov~~rightarrow~~rightarrowtail~~rightharpoondown~~rightharpoonup~~rightleftarrows~~rightleftharpoons~~rightrightarrows~~rightsquigarrow~~rightthreetimes~~ring~~risingdotseq~~rlarr~~rlhar~~rmoust~~rmoustache~~rnmid~~roang~~roarr~~robrk~~ropar~~ropf~~roplus~~rotimes~~rpar~)~rpargt~~rppolint~~rrarr~~rscr~~rsh~~rsqb~]~rsquor~~rthree~~rtimes~~rtri~~rtrie~~rtrif~~rtriltri~~ruluhar~~rx~~sacute~~sc~~scE~~scap~~sccue~~sce~~scedil~~scirc~~scnE~~scnap~~scnsim~~scpolint~~scsim~~scy~~sdotb~~sdote~~seArr~~searhk~~searr~~searrow~~semi~;~seswar~~setminus~~setmn~~sext~~sfr~~sfrown~~sharp~~shchcy~~shcy~~shortmid~~shortparallel~~sigmav~~simdot~~sime~~simeq~~simg~~simgE~~siml~~simlE~~simne~~simplus~~simrarr~~slarr~~smallsetminus~~smashp~~smeparsl~~smid~~smile~~smt~~smte~~smtes~~softcy~~sol~/~solb~~solbar~~sopf~~spadesuit~~spar~~sqcap~~sqcaps~~sqcup~~sqcups~~sqsub~~sqsube~~sqsubset~~sqsubseteq~~sqsup~~sqsupe~~sqsupset~~sqsupseteq~~squ~~square~~squarf~~squf~~srarr~~sscr~~ssetmn~~ssmile~~sstarf~~star~~starf~~straightepsilon~~straightphi~~strns~~subE~~subdot~~subedot~~submult~~subnE~~subne~~subplus~~subrarr~~subset~~subseteq~~subseteqq~~subsetneq~~subsetneqq~~subsim~~subsub~~subsup~~succ~~succapprox~~succcurlyeq~~succeq~~succnapprox~~succneqq~~succnsim~~succsim~~sung~~supE~~supdot~~supdsub~~supedot~~suphsol~~suphsub~~suplarr~~supmult~~supnE~~supne~~supplus~~supset~~supseteq~~supseteqq~~supsetneq~~supsetneqq~~supsim~~supsub~~supsup~~swArr~~swarhk~~swarr~~swarrow~~swnwar~~target~~tbrk~~tcaron~~tcedil~~tcy~~tdot~~telrec~~tfr~~therefore~~thetav~~thickapprox~~thicksim~~thkap~~thksim~~timesb~~timesbar~~timesd~~tint~~toea~~top~~topbot~~topcir~~topf~~topfork~~tosa~~tprime~~triangle~~triangledown~~triangleleft~~trianglelefteq~~triangleq~~triangleright~~trianglerighteq~~tridot~~trie~~triminus~~triplus~~trisb~~tritime~~trpezium~~tscr~~tscy~~tshcy~~tstrok~~twixt~~twoheadleftarrow~~twoheadrightarrow~~uHar~~ubrcy~~ubreve~~ucy~~udarr~~udblac~~udhar~~ufisht~~ufr~~uharl~~uharr~~uhblk~~ulcorn~~ulcorner~~ulcrop~~ultri~~umacr~~uogon~~uopf~~uparrow~~updownarrow~~upharpoonleft~~upharpoonright~~uplus~~upsi~~upuparrows~~urcorn~~urcorner~~urcrop~~uring~~urtri~~uscr~~utdot~~utilde~~utri~~utrif~~uuarr~~uwangle~~vArr~~vBar~~vBarv~~vDash~~vangrt~~varepsilon~~varkappa~~varnothing~~varphi~~varpi~~varpropto~~varr~~varrho~~varsigma~~varsubsetneq~~varsubsetneqq~~varsupsetneq~~varsupsetneqq~~vartheta~~vartriangleleft~~vartriangleright~~vcy~~vdash~~vee~~veebar~~veeeq~~vellip~~verbar~|~vert~|~vfr~~vltri~~vnsub~~vnsup~~vopf~~vprop~~vrtri~~vscr~~vsubnE~~vsubne~~vsupnE~~vsupne~~vzigzag~~wcirc~~wedbar~~wedge~~wedgeq~~wfr~~wopf~~wp~~wr~~wreath~~wscr~~xcap~~xcirc~~xcup~~xdtri~~xfr~~xhArr~~xharr~~xlArr~~xlarr~~xmap~~xnis~~xodot~~xopf~~xoplus~~xotime~~xrArr~~xrarr~~xscr~~xsqcup~~xuplus~~xutri~~xvee~~xwedge~~yacy~~ycirc~~ycy~~yfr~~yicy~~yopf~~yscr~~yucy~~zacute~~zcaron~~zcy~~zdot~~zeetrf~~zfr~~zhcy~~zigrarr~~zopf~~zscr~~~AMP~&~COPY~~GT~>~LT~<~QUOT~"~REG~',t.namedReferences.html4)}(namedReferences)),namedReferences}var numericUnicodeMap={},hasRequiredNumericUnicodeMap;function requireNumericUnicodeMap(){return hasRequiredNumericUnicodeMap||(hasRequiredNumericUnicodeMap=1,Object.defineProperty(numericUnicodeMap,"__esModule",{value:!0}),numericUnicodeMap.numericUnicodeMap=void 0,numericUnicodeMap.numericUnicodeMap={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}),numericUnicodeMap}var surrogatePairs={},hasRequiredSurrogatePairs;function requireSurrogatePairs(){return hasRequiredSurrogatePairs||(hasRequiredSurrogatePairs=1,Object.defineProperty(surrogatePairs,"__esModule",{value:!0}),surrogatePairs.highSurrogateTo=surrogatePairs.highSurrogateFrom=surrogatePairs.getCodePoint=surrogatePairs.fromCodePoint=void 0,surrogatePairs.fromCodePoint=String.fromCodePoint||function(t){return String.fromCharCode(Math.floor((t-65536)/1024)+55296,(t-65536)%1024+56320)},surrogatePairs.getCodePoint=String.prototype.codePointAt?function(t,e){return t.codePointAt(e)}:function(t,e){return(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536},surrogatePairs.highSurrogateFrom=55296,surrogatePairs.highSurrogateTo=56319),surrogatePairs}var hasRequiredCommonjs;function requireCommonjs(){if(hasRequiredCommonjs)return commonjs;hasRequiredCommonjs=1;var t=commonjs&&commonjs.__assign||function(){return t=Object.assign||function(j){for(var K,J=1,H=arguments.length;J<H;J++){K=arguments[J];for(var U in K)Object.prototype.hasOwnProperty.call(K,U)&&(j[U]=K[U])}return j},t.apply(this,arguments)};Object.defineProperty(commonjs,"__esModule",{value:!0}),commonjs.encode=a,commonjs.decodeEntity=_,commonjs.decode=S;var e=requireNamedReferences(),r=requireNumericUnicodeMap(),u=requireSurrogatePairs(),d=t(t({},e.namedReferences),{all:e.namedReferences.html5}),m={specialChars:/[<>'"&]/g,nonAscii:/[<>'"&\u0080-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,nonAsciiPrintable:/[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,nonAsciiPrintableOnly:/[\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,extensive:/[\x01-\x0c\x0e-\x1f\x21-\x2c\x2e-\x2f\x3a-\x40\x5b-\x60\x7b-\x7d\x7f-\uD7FF\uE000-\uFFFF\uDC00-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g},c={mode:"specialChars",level:"all",numeric:"decimal"};function a(j,K){var J=K===void 0?c:K,H=J.mode,U=H===void 0?"specialChars":H,P=J.numeric,Z=P===void 0?"decimal":P,ie=J.level,ue=ie===void 0?"all":ie;if(!j)return"";var le=m[U],ne=d[ue].characters,ye=Z==="hexadecimal";return String.prototype.replace.call(j,le,function(fe){var Te=ne[fe];if(!Te){var Ae=fe.length>1?(0,u.getCodePoint)(fe,0):fe.charCodeAt(0);Te=(ye?"&#x"+Ae.toString(16):"&#"+Ae)+";"}return Te})}var o={scope:"body",level:"all"},s=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,h=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,v={xml:{strict:s,attribute:h,body:e.bodyRegExps.xml},html4:{strict:s,attribute:h,body:e.bodyRegExps.html4},html5:{strict:s,attribute:h,body:e.bodyRegExps.html5}},E=t(t({},v),{all:v.html5}),y=String.fromCharCode,A=y(65533),w={level:"all"};function I(j,K,J,H){var U=j,P=j[j.length-1];if(J&&P==="=")U=j;else if(H&&P!==";")U=j;else{var Z=K[j];if(Z)U=Z;else if(j[0]==="&"&&j[1]==="#"){var ie=j[2],ue=ie=="x"||ie=="X"?parseInt(j.substr(3),16):parseInt(j.substr(2));U=ue>=1114111?A:ue>65535?(0,u.fromCodePoint)(ue):y(r.numericUnicodeMap[ue]||ue)}}return U}function _(j,K){var J=K===void 0?w:K,H=J.level,U=H===void 0?"all":H;return j?I(j,d[U].entities,!1,!1):""}function S(j,K){var J=K===void 0?o:K,H=J.level,U=H===void 0?"all":H,P=J.scope,Z=P===void 0?U==="xml"?"strict":"body":P;if(!j)return"";var ie=E[U][Z],ue=d[U].entities,le=Z==="attribute",ne=Z==="strict";return j.replace(ie,function(ye){return I(ye,ue,le,ne)})}return commonjs}var retryRequest={exports:{}},hasRequiredRetryRequest;function requireRetryRequest(){if(hasRequiredRetryRequest)return retryRequest.exports;hasRequiredRetryRequest=1;var t={};const{PassThrough:e}=require$$1$3,r=requireExtend();let u=()=>{};typeof process<"u"&&"env"in process&&typeof t=="object"&&t.DEBUG==="retry-request"&&(u=a=>{console.log("retry-request:",a)});const d={objectMode:!1,retries:2,maxRetryDelay:64,retryDelayMultiplier:2,totalTimeout:600,noResponseRetries:2,currentRetryAttempt:0,shouldRetryFn:function(a){const o=[[100,199],[429,429],[500,599]],s=a.statusCode;u(`Response status: ${s}`);let h;for(;h=o.shift();)if(s>=h[0]&&s<=h[1])return!0}};function m(a,o,s){typeof a=="string"&&(a={url:a});const h=typeof arguments[arguments.length-1]!="function";typeof o=="function"&&(s=o);const v=o&&typeof o.currentRetryAttempt=="number";if(o=r({},d,o),typeof o.request>"u")throw new Error("A request library must be provided to retry-request.");let E=o.currentRetryAttempt,y=0,A=!1,w,I,_,S;const j={abort:function(){S&&S.abort&&S.abort()}};h&&(w=new e({objectMode:o.objectMode}),w.abort=J);const K=Date.now();if(E>0?U(E):H(),h)return w;return j;function J(){_=null,I&&(I.abort&&I.abort(),I.cancel&&I.cancel(),I.destroy?I.destroy():I.end&&I.end())}function H(){let Z=!1;E++,u(`Current retry attempt: ${E}`);function ie(ue=[]){Z||(Z=!0,w.emit("complete",...ue))}h?(A=!1,_=new e({objectMode:o.objectMode}),I=o.request(a),setImmediate(()=>{w.emit("request")}),I.on("error",ue=>{A||(A=!0,P(ue))}).on("response",(ue,le)=>{A||(A=!0,P(null,ue,le))}).on("complete",(...ue)=>ie(ue)).on("finish",(...ue)=>ie(ue)),I.pipe(_)):S=o.request(a,P)}function U(Z){h&&J();const ie=c({maxRetryDelay:o.maxRetryDelay,retryDelayMultiplier:o.retryDelayMultiplier,retryNumber:Z,timeOfFirstRequest:K,totalTimeout:o.totalTimeout});if(u(`Next retry delay: ${ie}`),ie<=0){y=o.noResponseRetries+1;return}setTimeout(H,ie)}function P(Z,ie,ue){if(Z){y++,y<=o.noResponseRetries?U(y):h?(w.emit("error",Z),w.end()):s(Z,ie,ue);return}if((v?E:E-1)<o.retries&&o.shouldRetryFn(ie)){U(E);return}h?(w.emit("response",ie),_.pipe(w),I.on("error",ne=>{w.destroy(ne)})):s(Z,ie,ue)}}retryRequest.exports=m;function c(a){const{maxRetryDelay:o,retryDelayMultiplier:s,retryNumber:h,timeOfFirstRequest:v,totalTimeout:E}=a,y=o*1e3,A=E*1e3,w=Math.floor(Math.random()*1e3),I=Math.pow(s,h)*1e3+w,_=A-(Date.now()-v);return Math.min(I,_,y)}return retryRequest.exports.defaults=d,retryRequest.exports.getNextRetryDelay=c,retryRequest.exports}var src$7={},commonjsBrowser$1={},v1$2={},rng$1={},hasRequiredRng$1;function requireRng$1(){if(hasRequiredRng$1)return rng$1;hasRequiredRng$1=1,Object.defineProperty(rng$1,"__esModule",{value:!0}),rng$1.default=r;let t;const e=new Uint8Array(16);function r(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return rng$1}var stringify$1={},validate$2={},regex$1={},hasRequiredRegex$1;function requireRegex$1(){if(hasRequiredRegex$1)return regex$1;hasRequiredRegex$1=1,Object.defineProperty(regex$1,"__esModule",{value:!0}),regex$1.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return regex$1.default=t,regex$1}var hasRequiredValidate$2;function requireValidate$2(){if(hasRequiredValidate$2)return validate$2;hasRequiredValidate$2=1,Object.defineProperty(validate$2,"__esModule",{value:!0}),validate$2.default=void 0;var t=e(requireRegex$1());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){return typeof d=="string"&&t.default.test(d)}var u=r;return validate$2.default=u,validate$2}var hasRequiredStringify$1;function requireStringify$1(){if(hasRequiredStringify$1)return stringify$1;hasRequiredStringify$1=1,Object.defineProperty(stringify$1,"__esModule",{value:!0}),stringify$1.default=void 0,stringify$1.unsafeStringify=u;var t=e(requireValidate$2());function e(c){return c&&c.__esModule?c:{default:c}}const r=[];for(let c=0;c<256;++c)r.push((c+256).toString(16).slice(1));function u(c,a=0){return r[c[a+0]]+r[c[a+1]]+r[c[a+2]]+r[c[a+3]]+"-"+r[c[a+4]]+r[c[a+5]]+"-"+r[c[a+6]]+r[c[a+7]]+"-"+r[c[a+8]]+r[c[a+9]]+"-"+r[c[a+10]]+r[c[a+11]]+r[c[a+12]]+r[c[a+13]]+r[c[a+14]]+r[c[a+15]]}function d(c,a=0){const o=u(c,a);if(!(0,t.default)(o))throw TypeError("Stringified UUID is invalid");return o}var m=d;return stringify$1.default=m,stringify$1}var hasRequiredV1$2;function requireV1$2(){if(hasRequiredV1$2)return v1$2;hasRequiredV1$2=1,Object.defineProperty(v1$2,"__esModule",{value:!0}),v1$2.default=void 0;var t=r(requireRng$1()),e=requireStringify$1();function r(s){return s&&s.__esModule?s:{default:s}}let u,d,m=0,c=0;function a(s,h,v){let E=h&&v||0;const y=h||new Array(16);s=s||{};let A=s.node||u,w=s.clockseq!==void 0?s.clockseq:d;if(A==null||w==null){const J=s.random||(s.rng||t.default)();A==null&&(A=u=[J[0]|1,J[1],J[2],J[3],J[4],J[5]]),w==null&&(w=d=(J[6]<<8|J[7])&16383)}let I=s.msecs!==void 0?s.msecs:Date.now(),_=s.nsecs!==void 0?s.nsecs:c+1;const S=I-m+(_-c)/1e4;if(S<0&&s.clockseq===void 0&&(w=w+1&16383),(S<0||I>m)&&s.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=I,c=_,d=w,I+=122192928e5;const j=((I&268435455)*1e4+_)%4294967296;y[E++]=j>>>24&255,y[E++]=j>>>16&255,y[E++]=j>>>8&255,y[E++]=j&255;const K=I/4294967296*1e4&268435455;y[E++]=K>>>8&255,y[E++]=K&255,y[E++]=K>>>24&15|16,y[E++]=K>>>16&255,y[E++]=w>>>8|128,y[E++]=w&255;for(let J=0;J<6;++J)y[E+J]=A[J];return h||(0,e.unsafeStringify)(y)}var o=a;return v1$2.default=o,v1$2}var v3$1={},v35$1={},parse$1={},hasRequiredParse$2;function requireParse$2(){if(hasRequiredParse$2)return parse$1;hasRequiredParse$2=1,Object.defineProperty(parse$1,"__esModule",{value:!0}),parse$1.default=void 0;var t=e(requireValidate$2());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){if(!(0,t.default)(d))throw TypeError("Invalid UUID");let m;const c=new Uint8Array(16);return c[0]=(m=parseInt(d.slice(0,8),16))>>>24,c[1]=m>>>16&255,c[2]=m>>>8&255,c[3]=m&255,c[4]=(m=parseInt(d.slice(9,13),16))>>>8,c[5]=m&255,c[6]=(m=parseInt(d.slice(14,18),16))>>>8,c[7]=m&255,c[8]=(m=parseInt(d.slice(19,23),16))>>>8,c[9]=m&255,c[10]=(m=parseInt(d.slice(24,36),16))/1099511627776&255,c[11]=m/4294967296&255,c[12]=m>>>24&255,c[13]=m>>>16&255,c[14]=m>>>8&255,c[15]=m&255,c}var u=r;return parse$1.default=u,parse$1}var hasRequiredV35$1;function requireV35$1(){if(hasRequiredV35$1)return v35$1;hasRequiredV35$1=1,Object.defineProperty(v35$1,"__esModule",{value:!0}),v35$1.URL=v35$1.DNS=void 0,v35$1.default=c;var t=requireStringify$1(),e=r(requireParse$2());function r(a){return a&&a.__esModule?a:{default:a}}function u(a){a=unescape(encodeURIComponent(a));const o=[];for(let s=0;s<a.length;++s)o.push(a.charCodeAt(s));return o}const d="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35$1.DNS=d;const m="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35$1.URL=m;function c(a,o,s){function h(v,E,y,A){var w;if(typeof v=="string"&&(v=u(v)),typeof E=="string"&&(E=(0,e.default)(E)),((w=E)===null||w===void 0?void 0:w.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+v.length);if(I.set(E),I.set(v,E.length),I=s(I),I[6]=I[6]&15|o,I[8]=I[8]&63|128,y){A=A||0;for(let _=0;_<16;++_)y[A+_]=I[_];return y}return(0,t.unsafeStringify)(I)}try{h.name=a}catch{}return h.DNS=d,h.URL=m,h}return v35$1}var md5$1={},hasRequiredMd5$1;function requireMd5$1(){if(hasRequiredMd5$1)return md5$1;hasRequiredMd5$1=1,Object.defineProperty(md5$1,"__esModule",{value:!0}),md5$1.default=void 0;function t(y){if(typeof y=="string"){const A=unescape(encodeURIComponent(y));y=new Uint8Array(A.length);for(let w=0;w<A.length;++w)y[w]=A.charCodeAt(w)}return e(u(d(y),y.length*8))}function e(y){const A=[],w=y.length*32,I="0123456789abcdef";for(let _=0;_<w;_+=8){const S=y[_>>5]>>>_%32&255,j=parseInt(I.charAt(S>>>4&15)+I.charAt(S&15),16);A.push(j)}return A}function r(y){return(y+64>>>9<<4)+14+1}function u(y,A){y[A>>5]|=128<<A%32,y[r(A)-1]=A;let w=1732584193,I=-271733879,_=-1732584194,S=271733878;for(let j=0;j<y.length;j+=16){const K=w,J=I,H=_,U=S;w=o(w,I,_,S,y[j],7,-680876936),S=o(S,w,I,_,y[j+1],12,-389564586),_=o(_,S,w,I,y[j+2],17,606105819),I=o(I,_,S,w,y[j+3],22,-1044525330),w=o(w,I,_,S,y[j+4],7,-176418897),S=o(S,w,I,_,y[j+5],12,1200080426),_=o(_,S,w,I,y[j+6],17,-1473231341),I=o(I,_,S,w,y[j+7],22,-45705983),w=o(w,I,_,S,y[j+8],7,1770035416),S=o(S,w,I,_,y[j+9],12,-1958414417),_=o(_,S,w,I,y[j+10],17,-42063),I=o(I,_,S,w,y[j+11],22,-1990404162),w=o(w,I,_,S,y[j+12],7,1804603682),S=o(S,w,I,_,y[j+13],12,-40341101),_=o(_,S,w,I,y[j+14],17,-1502002290),I=o(I,_,S,w,y[j+15],22,1236535329),w=s(w,I,_,S,y[j+1],5,-165796510),S=s(S,w,I,_,y[j+6],9,-1069501632),_=s(_,S,w,I,y[j+11],14,643717713),I=s(I,_,S,w,y[j],20,-373897302),w=s(w,I,_,S,y[j+5],5,-701558691),S=s(S,w,I,_,y[j+10],9,38016083),_=s(_,S,w,I,y[j+15],14,-660478335),I=s(I,_,S,w,y[j+4],20,-405537848),w=s(w,I,_,S,y[j+9],5,568446438),S=s(S,w,I,_,y[j+14],9,-1019803690),_=s(_,S,w,I,y[j+3],14,-187363961),I=s(I,_,S,w,y[j+8],20,1163531501),w=s(w,I,_,S,y[j+13],5,-1444681467),S=s(S,w,I,_,y[j+2],9,-51403784),_=s(_,S,w,I,y[j+7],14,1735328473),I=s(I,_,S,w,y[j+12],20,-1926607734),w=h(w,I,_,S,y[j+5],4,-378558),S=h(S,w,I,_,y[j+8],11,-2022574463),_=h(_,S,w,I,y[j+11],16,1839030562),I=h(I,_,S,w,y[j+14],23,-35309556),w=h(w,I,_,S,y[j+1],4,-1530992060),S=h(S,w,I,_,y[j+4],11,1272893353),_=h(_,S,w,I,y[j+7],16,-155497632),I=h(I,_,S,w,y[j+10],23,-1094730640),w=h(w,I,_,S,y[j+13],4,681279174),S=h(S,w,I,_,y[j],11,-358537222),_=h(_,S,w,I,y[j+3],16,-722521979),I=h(I,_,S,w,y[j+6],23,76029189),w=h(w,I,_,S,y[j+9],4,-640364487),S=h(S,w,I,_,y[j+12],11,-421815835),_=h(_,S,w,I,y[j+15],16,530742520),I=h(I,_,S,w,y[j+2],23,-995338651),w=v(w,I,_,S,y[j],6,-198630844),S=v(S,w,I,_,y[j+7],10,1126891415),_=v(_,S,w,I,y[j+14],15,-1416354905),I=v(I,_,S,w,y[j+5],21,-57434055),w=v(w,I,_,S,y[j+12],6,1700485571),S=v(S,w,I,_,y[j+3],10,-1894986606),_=v(_,S,w,I,y[j+10],15,-1051523),I=v(I,_,S,w,y[j+1],21,-2054922799),w=v(w,I,_,S,y[j+8],6,1873313359),S=v(S,w,I,_,y[j+15],10,-30611744),_=v(_,S,w,I,y[j+6],15,-1560198380),I=v(I,_,S,w,y[j+13],21,1309151649),w=v(w,I,_,S,y[j+4],6,-145523070),S=v(S,w,I,_,y[j+11],10,-1120210379),_=v(_,S,w,I,y[j+2],15,718787259),I=v(I,_,S,w,y[j+9],21,-343485551),w=m(w,K),I=m(I,J),_=m(_,H),S=m(S,U)}return[w,I,_,S]}function d(y){if(y.length===0)return[];const A=y.length*8,w=new Uint32Array(r(A));for(let I=0;I<A;I+=8)w[I>>5]|=(y[I/8]&255)<<I%32;return w}function m(y,A){const w=(y&65535)+(A&65535);return(y>>16)+(A>>16)+(w>>16)<<16|w&65535}function c(y,A){return y<<A|y>>>32-A}function a(y,A,w,I,_,S){return m(c(m(m(A,y),m(I,S)),_),w)}function o(y,A,w,I,_,S,j){return a(A&w|~A&I,y,A,_,S,j)}function s(y,A,w,I,_,S,j){return a(A&I|w&~I,y,A,_,S,j)}function h(y,A,w,I,_,S,j){return a(A^w^I,y,A,_,S,j)}function v(y,A,w,I,_,S,j){return a(w^(A|~I),y,A,_,S,j)}var E=t;return md5$1.default=E,md5$1}var hasRequiredV3$1;function requireV3$1(){if(hasRequiredV3$1)return v3$1;hasRequiredV3$1=1,Object.defineProperty(v3$1,"__esModule",{value:!0}),v3$1.default=void 0;var t=r(requireV35$1()),e=r(requireMd5$1());function r(m){return m&&m.__esModule?m:{default:m}}var d=(0,t.default)("v3",48,e.default);return v3$1.default=d,v3$1}var v4$1={},native$1={},hasRequiredNative$1;function requireNative$1(){if(hasRequiredNative$1)return native$1;hasRequiredNative$1=1,Object.defineProperty(native$1,"__esModule",{value:!0}),native$1.default=void 0;var e={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return native$1.default=e,native$1}var hasRequiredV4$1;function requireV4$1(){if(hasRequiredV4$1)return v4$1;hasRequiredV4$1=1,Object.defineProperty(v4$1,"__esModule",{value:!0}),v4$1.default=void 0;var t=u(requireNative$1()),e=u(requireRng$1()),r=requireStringify$1();function u(c){return c&&c.__esModule?c:{default:c}}function d(c,a,o){if(t.default.randomUUID&&!a&&!c)return t.default.randomUUID();c=c||{};const s=c.random||(c.rng||e.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,a){o=o||0;for(let h=0;h<16;++h)a[o+h]=s[h];return a}return(0,r.unsafeStringify)(s)}var m=d;return v4$1.default=m,v4$1}var v5$1={},sha1$1={},hasRequiredSha1$1;function requireSha1$1(){if(hasRequiredSha1$1)return sha1$1;hasRequiredSha1$1=1,Object.defineProperty(sha1$1,"__esModule",{value:!0}),sha1$1.default=void 0;function t(d,m,c,a){switch(d){case 0:return m&c^~m&a;case 1:return m^c^a;case 2:return m&c^m&a^c&a;case 3:return m^c^a}}function e(d,m){return d<<m|d>>>32-m}function r(d){const m=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof d=="string"){const h=unescape(encodeURIComponent(d));d=[];for(let v=0;v<h.length;++v)d.push(h.charCodeAt(v))}else Array.isArray(d)||(d=Array.prototype.slice.call(d));d.push(128);const a=d.length/4+2,o=Math.ceil(a/16),s=new Array(o);for(let h=0;h<o;++h){const v=new Uint32Array(16);for(let E=0;E<16;++E)v[E]=d[h*64+E*4]<<24|d[h*64+E*4+1]<<16|d[h*64+E*4+2]<<8|d[h*64+E*4+3];s[h]=v}s[o-1][14]=(d.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(d.length-1)*8&4294967295;for(let h=0;h<o;++h){const v=new Uint32Array(80);for(let _=0;_<16;++_)v[_]=s[h][_];for(let _=16;_<80;++_)v[_]=e(v[_-3]^v[_-8]^v[_-14]^v[_-16],1);let E=c[0],y=c[1],A=c[2],w=c[3],I=c[4];for(let _=0;_<80;++_){const S=Math.floor(_/20),j=e(E,5)+t(S,y,A,w)+I+m[S]+v[_]>>>0;I=w,w=A,A=e(y,30)>>>0,y=E,E=j}c[0]=c[0]+E>>>0,c[1]=c[1]+y>>>0,c[2]=c[2]+A>>>0,c[3]=c[3]+w>>>0,c[4]=c[4]+I>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,c[0]&255,c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,c[1]&255,c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,c[2]&255,c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,c[3]&255,c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,c[4]&255]}var u=r;return sha1$1.default=u,sha1$1}var hasRequiredV5$1;function requireV5$1(){if(hasRequiredV5$1)return v5$1;hasRequiredV5$1=1,Object.defineProperty(v5$1,"__esModule",{value:!0}),v5$1.default=void 0;var t=r(requireV35$1()),e=r(requireSha1$1());function r(m){return m&&m.__esModule?m:{default:m}}var d=(0,t.default)("v5",80,e.default);return v5$1.default=d,v5$1}var nil$1={},hasRequiredNil$1;function requireNil$1(){if(hasRequiredNil$1)return nil$1;hasRequiredNil$1=1,Object.defineProperty(nil$1,"__esModule",{value:!0}),nil$1.default=void 0;var t="00000000-0000-0000-0000-000000000000";return nil$1.default=t,nil$1}var version$7={},hasRequiredVersion$1;function requireVersion$1(){if(hasRequiredVersion$1)return version$7;hasRequiredVersion$1=1,Object.defineProperty(version$7,"__esModule",{value:!0}),version$7.default=void 0;var t=e(requireValidate$2());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){if(!(0,t.default)(d))throw TypeError("Invalid UUID");return parseInt(d.slice(14,15),16)}var u=r;return version$7.default=u,version$7}var hasRequiredCommonjsBrowser$1;function requireCommonjsBrowser$1(){return hasRequiredCommonjsBrowser$1||(hasRequiredCommonjsBrowser$1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var e=h(requireV1$2()),r=h(requireV3$1()),u=h(requireV4$1()),d=h(requireV5$1()),m=h(requireNil$1()),c=h(requireVersion$1()),a=h(requireValidate$2()),o=h(requireStringify$1()),s=h(requireParse$2());function h(v){return v&&v.__esModule?v:{default:v}}}(commonjsBrowser$1)),commonjsBrowser$1}var agents={},agent$1={},dist$2={},hasRequiredDist$2;function requireDist$2(){if(hasRequiredDist$2)return dist$2;hasRequiredDist$2=1,Object.defineProperty(dist$2,"__esModule",{value:!0});function t(e,r,{signal:u}={}){return new Promise((d,m)=>{function c(){u?.removeEventListener("abort",c),e.removeListener(r,a),e.removeListener("error",o)}function a(...s){c(),d(s)}function o(s){c(),m(s)}u?.addEventListener("abort",c),e.on(r,a),e.on("error",o)})}return dist$2.default=t,dist$2}var promisify$1={},hasRequiredPromisify$1;function requirePromisify$1(){if(hasRequiredPromisify$1)return promisify$1;hasRequiredPromisify$1=1,Object.defineProperty(promisify$1,"__esModule",{value:!0});function t(e){return function(r,u){return new Promise((d,m)=>{e.call(this,r,u,(c,a)=>{c?m(c):d(a)})})}}return promisify$1.default=t,promisify$1}var src$6,hasRequiredSrc$8;function requireSrc$8(){if(hasRequiredSrc$8)return src$6;hasRequiredSrc$8=1;var t=src$6&&src$6.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};const e=require$$1$3,r=t(requireBrowser$2()),u=t(requirePromisify$1()),d=r.default("agent-base");function m(o){return!!o&&typeof o.addRequest=="function"}function c(){const{stack:o}=new Error;return typeof o!="string"?!1:o.split(`
`).some(s=>s.indexOf("(https.js:")!==-1||s.indexOf("node:https:")!==-1)}function a(o,s){return new a.Agent(o,s)}return function(o){class s extends e.EventEmitter{constructor(v,E){super();let y=E;typeof v=="function"?this.callback=v:v&&(y=v),this.timeout=null,y&&typeof y.timeout=="number"&&(this.timeout=y.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:c()?443:80}set defaultPort(v){this.explicitDefaultPort=v}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:c()?"https:":"http:"}set protocol(v){this.explicitProtocol=v}callback(v,E,y){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(v,E){const y=Object.assign({},E);typeof y.secureEndpoint!="boolean"&&(y.secureEndpoint=c()),y.host==null&&(y.host="localhost"),y.port==null&&(y.port=y.secureEndpoint?443:80),y.protocol==null&&(y.protocol=y.secureEndpoint?"https:":"http:"),y.host&&y.path&&delete y.path,delete y.agent,delete y.hostname,delete y._defaultAgent,delete y.defaultPort,delete y.createConnection,v._last=!0,v.shouldKeepAlive=!1;let A=!1,w=null;const I=y.timeout||this.timeout,_=J=>{v._hadError||(v.emit("error",J),v._hadError=!0)},S=()=>{w=null,A=!0;const J=new Error(`A "socket" was not created for HTTP request before ${I}ms`);J.code="ETIMEOUT",_(J)},j=J=>{A||(w!==null&&(clearTimeout(w),w=null),_(J))},K=J=>{if(A)return;if(w!=null&&(clearTimeout(w),w=null),m(J)){d("Callback returned another Agent instance %o",J.constructor.name),J.addRequest(v,y);return}if(J){J.once("free",()=>{this.freeSocket(J,y)}),v.onSocket(J);return}const H=new Error(`no Duplex stream was returned to agent-base for \`${v.method} ${v.path}\``);_(H)};if(typeof this.callback!="function"){_(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(d("Converting legacy callback function to promise"),this.promisifiedCallback=u.default(this.callback)):this.promisifiedCallback=this.callback),typeof I=="number"&&I>0&&(w=setTimeout(S,I)),"port"in y&&typeof y.port!="number"&&(y.port=Number(y.port));try{d("Resolving socket for %o request: %o",y.protocol,`${v.method} ${v.path}`),Promise.resolve(this.promisifiedCallback(v,y)).then(K,j)}catch(J){Promise.reject(J).catch(j)}}freeSocket(v,E){d("Freeing socket %o %o",v.constructor.name,E),v.destroy()}destroy(){d("Destroying agent %o",this.constructor.name)}}o.Agent=s,o.prototype=o.Agent.prototype}(a||(a={})),src$6=a,src$6}var hasRequiredAgent$1;function requireAgent$1(){if(hasRequiredAgent$1)return agent$1;hasRequiredAgent$1=1;var t=agent$1&&agent$1.__awaiter||function(v,E,y,A){function w(I){return I instanceof y?I:new y(function(_){_(I)})}return new(y||(y=Promise))(function(I,_){function S(J){try{K(A.next(J))}catch(H){_(H)}}function j(J){try{K(A.throw(J))}catch(H){_(H)}}function K(J){J.done?I(J.value):w(J.value).then(S,j)}K((A=A.apply(v,E||[])).next())})},e=agent$1&&agent$1.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(agent$1,"__esModule",{value:!0});const r=e(require$$1$3),u=e(require$$1$3),d=e(require$$1$3),m=e(requireBrowser$2()),c=e(requireDist$2()),a=requireSrc$8(),o=(0,m.default)("http-proxy-agent");function s(v){return typeof v=="string"?/^https:?$/i.test(v):!1}class h extends a.Agent{constructor(E){let y;if(typeof E=="string"?y=d.default.parse(E):y=E,!y)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");o("Creating new HttpProxyAgent instance: %o",y),super(y);const A=Object.assign({},y);this.secureProxy=y.secureProxy||s(A.protocol),A.host=A.hostname||A.host,typeof A.port=="string"&&(A.port=parseInt(A.port,10)),!A.port&&A.host&&(A.port=this.secureProxy?443:80),A.host&&A.path&&(delete A.path,delete A.pathname),this.proxy=A}callback(E,y){return t(this,void 0,void 0,function*(){const{proxy:A,secureProxy:w}=this,I=d.default.parse(E.path);I.protocol||(I.protocol="http:"),I.hostname||(I.hostname=y.hostname||y.host||null),I.port==null&&typeof y.port&&(I.port=String(y.port)),I.port==="80"&&(I.port=""),E.path=d.default.format(I),A.auth&&E.setHeader("Proxy-Authorization",`Basic ${Buffer.from(A.auth).toString("base64")}`);let _;if(w?(o("Creating `tls.Socket`: %o",A),_=u.default.connect(A)):(o("Creating `net.Socket`: %o",A),_=r.default.connect(A)),E._header){let S,j;o("Regenerating stored HTTP header string for request"),E._header=null,E._implicitHeader(),E.output&&E.output.length>0?(o("Patching connection write() output buffer with updated header"),S=E.output[0],j=S.indexOf(`\r
\r
`)+4,E.output[0]=E._header+S.substring(j),o("Output buffer: %o",E.output)):E.outputData&&E.outputData.length>0&&(o("Patching connection write() output buffer with updated header"),S=E.outputData[0].data,j=S.indexOf(`\r
\r
`)+4,E.outputData[0].data=E._header+S.substring(j),o("Output buffer: %o",E.outputData[0].data))}return yield(0,c.default)(_,"connect"),_})}}return agent$1.default=h,agent$1}var dist$1,hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1;var t=dist$1&&dist$1.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};const e=t(requireAgent$1());function r(u){return new e.default(u)}return function(u){u.HttpProxyAgent=e.default,u.prototype=e.default.prototype}(r||(r={})),dist$1=r,dist$1}var agent={},promisify={},hasRequiredPromisify;function requirePromisify(){if(hasRequiredPromisify)return promisify;hasRequiredPromisify=1,Object.defineProperty(promisify,"__esModule",{value:!0});function t(e){return function(r,u){return new Promise((d,m)=>{e.call(this,r,u,(c,a)=>{c?m(c):d(a)})})}}return promisify.default=t,promisify}var src$5,hasRequiredSrc$7;function requireSrc$7(){if(hasRequiredSrc$7)return src$5;hasRequiredSrc$7=1;var t=src$5&&src$5.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};const e=require$$1$3,r=t(requireBrowser$2()),u=t(requirePromisify()),d=r.default("agent-base");function m(o){return!!o&&typeof o.addRequest=="function"}function c(){const{stack:o}=new Error;return typeof o!="string"?!1:o.split(`
`).some(s=>s.indexOf("(https.js:")!==-1||s.indexOf("node:https:")!==-1)}function a(o,s){return new a.Agent(o,s)}return function(o){class s extends e.EventEmitter{constructor(v,E){super();let y=E;typeof v=="function"?this.callback=v:v&&(y=v),this.timeout=null,y&&typeof y.timeout=="number"&&(this.timeout=y.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:c()?443:80}set defaultPort(v){this.explicitDefaultPort=v}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:c()?"https:":"http:"}set protocol(v){this.explicitProtocol=v}callback(v,E,y){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(v,E){const y=Object.assign({},E);typeof y.secureEndpoint!="boolean"&&(y.secureEndpoint=c()),y.host==null&&(y.host="localhost"),y.port==null&&(y.port=y.secureEndpoint?443:80),y.protocol==null&&(y.protocol=y.secureEndpoint?"https:":"http:"),y.host&&y.path&&delete y.path,delete y.agent,delete y.hostname,delete y._defaultAgent,delete y.defaultPort,delete y.createConnection,v._last=!0,v.shouldKeepAlive=!1;let A=!1,w=null;const I=y.timeout||this.timeout,_=J=>{v._hadError||(v.emit("error",J),v._hadError=!0)},S=()=>{w=null,A=!0;const J=new Error(`A "socket" was not created for HTTP request before ${I}ms`);J.code="ETIMEOUT",_(J)},j=J=>{A||(w!==null&&(clearTimeout(w),w=null),_(J))},K=J=>{if(A)return;if(w!=null&&(clearTimeout(w),w=null),m(J)){d("Callback returned another Agent instance %o",J.constructor.name),J.addRequest(v,y);return}if(J){J.once("free",()=>{this.freeSocket(J,y)}),v.onSocket(J);return}const H=new Error(`no Duplex stream was returned to agent-base for \`${v.method} ${v.path}\``);_(H)};if(typeof this.callback!="function"){_(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(d("Converting legacy callback function to promise"),this.promisifiedCallback=u.default(this.callback)):this.promisifiedCallback=this.callback),typeof I=="number"&&I>0&&(w=setTimeout(S,I)),"port"in y&&typeof y.port!="number"&&(y.port=Number(y.port));try{d("Resolving socket for %o request: %o",y.protocol,`${v.method} ${v.path}`),Promise.resolve(this.promisifiedCallback(v,y)).then(K,j)}catch(J){Promise.reject(J).catch(j)}}freeSocket(v,E){d("Freeing socket %o %o",v.constructor.name,E),v.destroy()}destroy(){d("Destroying agent %o",this.constructor.name)}}o.Agent=s,o.prototype=o.Agent.prototype}(a||(a={})),src$5=a,src$5}var parseProxyResponse={},hasRequiredParseProxyResponse;function requireParseProxyResponse(){if(hasRequiredParseProxyResponse)return parseProxyResponse;hasRequiredParseProxyResponse=1;var t=parseProxyResponse&&parseProxyResponse.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(parseProxyResponse,"__esModule",{value:!0});const r=t(requireBrowser$2()).default("https-proxy-agent:parse-proxy-response");function u(d){return new Promise((m,c)=>{let a=0;const o=[];function s(){const w=d.read();w?A(w):d.once("readable",s)}function h(){d.removeListener("end",E),d.removeListener("error",y),d.removeListener("close",v),d.removeListener("readable",s)}function v(w){r("onclose had error %o",w)}function E(){r("onend")}function y(w){h(),r("onerror %o",w),c(w)}function A(w){o.push(w),a+=w.length;const I=Buffer.concat(o,a);if(I.indexOf(`\r
\r
`)===-1){r("have not received end of HTTP headers yet..."),s();return}const S=I.toString("ascii",0,I.indexOf(`\r
`)),j=+S.split(" ")[1];r("got proxy server response: %o",S),m({statusCode:j,buffered:I})}d.on("error",y),d.on("close",v),d.on("end",E),s()})}return parseProxyResponse.default=u,parseProxyResponse}var hasRequiredAgent;function requireAgent(){if(hasRequiredAgent)return agent;hasRequiredAgent=1;var t=agent&&agent.__awaiter||function(w,I,_,S){function j(K){return K instanceof _?K:new _(function(J){J(K)})}return new(_||(_=Promise))(function(K,J){function H(Z){try{P(S.next(Z))}catch(ie){J(ie)}}function U(Z){try{P(S.throw(Z))}catch(ie){J(ie)}}function P(Z){Z.done?K(Z.value):j(Z.value).then(H,U)}P((S=S.apply(w,I||[])).next())})},e=agent&&agent.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(agent,"__esModule",{value:!0});const r=e(require$$1$3),u=e(require$$1$3),d=e(require$$1$3),m=e(require$$1$3),c=e(requireBrowser$2()),a=requireSrc$7(),o=e(requireParseProxyResponse()),s=c.default("https-proxy-agent:agent");class h extends a.Agent{constructor(I){let _;if(typeof I=="string"?_=d.default.parse(I):_=I,!_)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");s("creating new HttpsProxyAgent instance: %o",_),super(_);const S=Object.assign({},_);this.secureProxy=_.secureProxy||y(S.protocol),S.host=S.hostname||S.host,typeof S.port=="string"&&(S.port=parseInt(S.port,10)),!S.port&&S.host&&(S.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in S)&&(S.ALPNProtocols=["http 1.1"]),S.host&&S.path&&(delete S.path,delete S.pathname),this.proxy=S}callback(I,_){return t(this,void 0,void 0,function*(){const{proxy:S,secureProxy:j}=this;let K;j?(s("Creating `tls.Socket`: %o",S),K=u.default.connect(S)):(s("Creating `net.Socket`: %o",S),K=r.default.connect(S));const J=Object.assign({},S.headers);let U=`CONNECT ${`${_.host}:${_.port}`} HTTP/1.1\r
`;S.auth&&(J["Proxy-Authorization"]=`Basic ${Buffer.from(S.auth).toString("base64")}`);let{host:P,port:Z,secureEndpoint:ie}=_;E(Z,ie)||(P+=`:${Z}`),J.Host=P,J.Connection="close";for(const fe of Object.keys(J))U+=`${fe}: ${J[fe]}\r
`;const ue=o.default(K);K.write(`${U}\r
`);const{statusCode:le,buffered:ne}=yield ue;if(le===200){if(I.once("socket",v),_.secureEndpoint){s("Upgrading socket connection to TLS");const fe=_.servername||_.host;return u.default.connect(Object.assign(Object.assign({},A(_,"host","hostname","path","port")),{socket:K,servername:fe}))}return K}K.destroy();const ye=new r.default.Socket({writable:!1});return ye.readable=!0,I.once("socket",fe=>{s("replaying proxy buffer for failed request"),m.default(fe.listenerCount("data")>0),fe.push(ne),fe.push(null)}),ye})}}agent.default=h;function v(w){w.resume()}function E(w,I){return!!(!I&&w===80||I&&w===443)}function y(w){return typeof w=="string"?/^https:?$/i.test(w):!1}function A(w,...I){const _={};let S;for(S in w)I.includes(S)||(_[S]=w[S]);return _}return agent}var dist,hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1;var t=dist&&dist.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};const e=t(requireAgent());function r(u){return new e.default(u)}return function(u){u.HttpsProxyAgent=e.default,u.prototype=e.default.prototype}(r||(r={})),dist=r,dist}var hasRequiredAgents;function requireAgents(){return hasRequiredAgents||(hasRequiredAgents=1,function(t){var e={};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.getAgent=t.pool=void 0;const r=require$$1$3,u=require$$1$3,d=require$$1$3;t.pool=new Map;function m(a){const o=e.NO_PROXY||e.no_proxy;if(!o)return!0;const s=new URL(a);for(const h of o.split(",")){const v=h.trim();if(v===s.origin||v===s.hostname)return!1;if(v.startsWith("*.")||v.startsWith(".")){const E=v.replace(/^\*\./,".");if(s.hostname.endsWith(E))return!1}}return!0}function c(a,o){const s=a.startsWith("http://"),h=o.proxy||e.HTTP_PROXY||e.http_proxy||e.HTTPS_PROXY||e.https_proxy,v=Object.assign({},o.pool),y=!!o.proxy||m(a);if(h&&y){const w=s?requireDist$1():requireDist(),I={...(0,d.parse)(h),...v};return new w(I)}let A=s?"http":"https";if(o.forever&&(A+=":forever",!t.pool.has(A))){const w=s?r.Agent:u.Agent;t.pool.set(A,new w({...v,keepAlive:!0}))}return t.pool.get(A)}t.getAgent=c}(agents)),agents}var TeenyStatistics={},hasRequiredTeenyStatistics;function requireTeenyStatistics(){if(hasRequiredTeenyStatistics)return TeenyStatistics;hasRequiredTeenyStatistics=1;var t={};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(TeenyStatistics,"__esModule",{value:!0}),TeenyStatistics.TeenyStatistics=TeenyStatistics.TeenyStatisticsWarning=void 0;class e extends Error{constructor(d){super(d),this.threshold=0,this.type="",this.value=0,this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}TeenyStatistics.TeenyStatisticsWarning=e,e.CONCURRENT_REQUESTS="ConcurrentRequestsExceededWarning";let r=class Cf{constructor(d){this._concurrentRequests=0,this._didConcurrentRequestWarn=!1,this._options=Cf._prepareOptions(d)}getOptions(){return Object.assign({},this._options)}setOptions(d){const m=this._options;return this._options=Cf._prepareOptions(d),m}get counters(){return{concurrentRequests:this._concurrentRequests}}requestStarting(){if(this._concurrentRequests++,this._options.concurrentRequests>0&&this._concurrentRequests>=this._options.concurrentRequests&&!this._didConcurrentRequestWarn){this._didConcurrentRequestWarn=!0;const d=new e("Possible excessive concurrent requests detected. "+this._concurrentRequests+" requests in-flight, which exceeds the configured threshold of "+this._options.concurrentRequests+". Use the TEENY_REQUEST_WARN_CONCURRENT_REQUESTS environment variable or the concurrentRequests option of teeny-request to increase or disable (0) this warning.");d.type=e.CONCURRENT_REQUESTS,d.value=this._concurrentRequests,d.threshold=this._options.concurrentRequests,process.emitWarning(d)}}requestFinished(){this._concurrentRequests--}static _prepareOptions({concurrentRequests:d}={}){let m=this.DEFAULT_WARN_CONCURRENT_REQUESTS;const c=Number(t.TEENY_REQUEST_WARN_CONCURRENT_REQUESTS);return d!==void 0?m=d:Number.isNaN(c)||(m=c),{concurrentRequests:m}}};return TeenyStatistics.TeenyStatistics=r,r.DEFAULT_WARN_CONCURRENT_REQUESTS=5e3,TeenyStatistics}var stubs,hasRequiredStubs;function requireStubs(){return hasRequiredStubs||(hasRequiredStubs=1,stubs=function(e,r,u,d){if(!e||!r||!e[r])throw new Error("You must provide an object and a key for an existing method");d||(d=u,u={}),d=d||function(){},u.callthrough=u.callthrough||!1,u.calls=u.calls||0;var m=u.calls===0,c=e[r].bind(e);e[r]=function(){var a=[].slice.call(arguments),o;return u.callthrough&&(o=c.apply(e,a)),o=d.apply(e,a)||o,!m&&--u.calls===0&&(e[r]=c),o}}),stubs}var streamEvents,hasRequiredStreamEvents;function requireStreamEvents(){if(hasRequiredStreamEvents)return streamEvents;hasRequiredStreamEvents=1;var t=requireStubs();function e(r){r=r||this;var u={callthrough:!0,calls:1};return t(r,"_read",u,r.emit.bind(r,"reading")),t(r,"_write",u,r.emit.bind(r,"writing")),r}return streamEvents=e,streamEvents}var hasRequiredSrc$6;function requireSrc$6(){if(hasRequiredSrc$6)return src$7;hasRequiredSrc$6=1;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(src$7,"__esModule",{value:!0}),src$7.teenyRequest=src$7.RequestError=void 0;const t=requireBrowser$3(),e=require$$1$3,r=requireCommonjsBrowser$1(),u=requireAgents(),d=requireTeenyStatistics(),m=requireStreamEvents();class c extends Error{}src$7.RequestError=c;function a(v){const E={method:v.method||"GET",...v.timeout&&{timeout:v.timeout},...typeof v.gzip=="boolean"&&{compress:v.gzip}};typeof v.json=="object"?(v.headers=v.headers||{},v.headers["Content-Type"]="application/json",E.body=JSON.stringify(v.json)):Buffer.isBuffer(v.body)?E.body=v.body:typeof v.body!="string"?E.body=JSON.stringify(v.body):E.body=v.body,E.headers=v.headers;let y=v.uri||v.url;if(!y)throw new Error("Missing uri or url in reqOpts.");if(v.useQuerystring===!0||typeof v.qs=="object"){const w=require$$1$3.stringify(v.qs);y=y+"?"+w}return E.agent=(0,u.getAgent)(y,v),{uri:y,options:E}}function o(v,E){const y={};y.agent=v.agent||!1,y.headers=v.headers||{},y.href=E.url;const A={};return E.headers.forEach((I,_)=>A[_]=I),Object.assign(E.body,{statusCode:E.status,statusMessage:E.statusText,request:y,body:E.body,headers:A,toJSON:()=>({headers:A})})}function s(v,E){const y=`--${v}--`,A=new e.PassThrough;for(const w of E){const I=`--${v}\r
Content-Type: ${w["Content-Type"]}\r
\r
`;A.write(I),typeof w.body=="string"?(A.write(w.body),A.write(`\r
`)):(w.body.pipe(A,{end:!1}),w.body.on("end",()=>{A.write(`\r
`),A.write(y),A.end()}))}return A}function h(v,E){const{uri:y,options:A}=a(v),w=v.multipart;if(v.multipart&&w.length===2){if(!E)throw new Error("Multipart without callback is not implemented.");const I=r.v4();A.headers["Content-Type"]=`multipart/related; boundary=${I}`,A.body=s(I,w),h.stats.requestStarting(),(0,t.default)(y,A).then(_=>{h.stats.requestFinished();const S=_.headers.get("content-type"),j=o(A,_),K=j.body;if(S==="application/json"||S==="application/json; charset=utf-8"){_.json().then(J=>{j.body=J,E(null,j,J)},J=>{E(J,j,K)});return}_.text().then(J=>{j.body=J,E(null,j,J)},J=>{E(J,j,K)})},_=>{h.stats.requestFinished(),E(_,null,null)});return}if(E===void 0){const I=m(new e.PassThrough);let _;return I.once("reading",()=>{_?(0,e.pipeline)(_,I,()=>{}):I.once("response",()=>{(0,e.pipeline)(_,I,()=>{})})}),A.compress=!1,h.stats.requestStarting(),(0,t.default)(y,A).then(S=>{h.stats.requestFinished(),_=S.body,_.on("error",K=>{I.emit("error",K)});const j=o(A,S);I.emit("response",j)},S=>{h.stats.requestFinished(),I.emit("error",S)}),I}h.stats.requestStarting(),(0,t.default)(y,A).then(I=>{h.stats.requestFinished();const _=I.headers.get("content-type"),S=o(A,I),j=S.body;if(_==="application/json"||_==="application/json; charset=utf-8"){if(S.statusCode===204){E(null,S,j);return}I.json().then(K=>{S.body=K,E(null,S,K)},K=>{E(K,S,j)});return}I.text().then(K=>{const J=o(A,I);J.body=K,E(null,J,K)},K=>{E(K,S,j)})},I=>{h.stats.requestFinished(),E(I,null,null)})}return src$7.teenyRequest=h,h.defaults=v=>(E,y)=>{const A={...v,...E};if(y===void 0)return h(A);h(A,y)},h.stats=new d.TeenyStatistics,h.resetStats=()=>{h.stats=new d.TeenyStatistics(h.stats.getOptions())},src$7}var util$5={},packageJsonHelper={};const name$t="@google-cloud/storage",description="Cloud Storage Client Library for Node.js",version$6="7.16.0",license="Apache-2.0",author="Google Inc.",engines={node:">=14"},repository="googleapis/nodejs-storage",main="./build/cjs/src/index.js",types$3="./build/cjs/src/index.d.ts",type$1="module",exports={".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},files=["build/cjs/src","build/cjs/package.json","!build/cjs/src/**/*.map","build/esm/src","!build/esm/src/**/*.map"],keywords=["google apis client","google api client","google apis","google api","google","google cloud platform","google cloud","cloud","google storage","storage"],scripts={"all-test":"npm test && npm run system-test && npm run samples-test",benchwrapper:"node bin/benchwrapper.js",check:"gts check",clean:"rm -rf build/","compile:cjs":"tsc -p ./tsconfig.cjs.json","compile:esm":"tsc -p .",compile:"npm run compile:cjs && npm run compile:esm","conformance-test":"mocha --parallel build/cjs/conformance-test/ --require build/cjs/conformance-test/globalHooks.js","docs-test":"linkinator docs",docs:"jsdoc -c .jsdoc.json",fix:"gts fix",lint:"gts check",postcompile:"cp ./src/package-json-helper.cjs ./build/cjs/src && cp ./src/package-json-helper.cjs ./build/esm/src","postcompile:cjs":"babel --plugins gapic-tools/build/src/replaceImportMetaUrl,gapic-tools/build/src/toggleESMFlagVariable build/cjs/src/util.js -o build/cjs/src/util.js && cp internal-tooling/helpers/package.cjs.json build/cjs/package.json",precompile:"rm -rf build/","preconformance-test":"npm run compile:cjs -- --sourceMap","predocs-test":"npm run docs",predocs:"npm run compile:cjs -- --sourceMap",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test:esm":"npm run compile:esm","presystem-test":"npm run compile -- --sourceMap",pretest:"npm run compile -- --sourceMap","samples-test":"npm link && cd samples/ && npm link ../ && npm test && cd ../","system-test:esm":"mocha build/esm/system-test --timeout 600000 --exit","system-test":"mocha build/cjs/system-test --timeout 600000 --exit",test:"c8 mocha build/cjs/test"},dependencies={"@google-cloud/paginator":"^5.0.0","@google-cloud/projectify":"^4.0.0","@google-cloud/promisify":"<4.1.0","abort-controller":"^3.0.0","async-retry":"^1.3.3",duplexify:"^4.1.3","fast-xml-parser":"^4.4.1",gaxios:"^6.0.2","google-auth-library":"^9.6.3","html-entities":"^2.5.2",mime:"^3.0.0","p-limit":"^3.0.1","retry-request":"^7.0.0","teeny-request":"^9.0.0",uuid:"^8.0.0"},devDependencies={"@babel/cli":"^7.22.10","@babel/core":"^7.22.11","@google-cloud/pubsub":"^4.0.0","@grpc/grpc-js":"^1.0.3","@grpc/proto-loader":"^0.7.0","@types/async-retry":"^1.4.3","@types/duplexify":"^3.6.4","@types/mime":"^3.0.0","@types/mocha":"^9.1.1","@types/mockery":"^1.4.29","@types/node":"^22.0.0","@types/node-fetch":"^2.1.3","@types/proxyquire":"^1.3.28","@types/request":"^2.48.4","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","@types/uuid":"^8.0.0","@types/yargs":"^17.0.10",c8:"^9.0.0","form-data":"^4.0.0","gapic-tools":"^0.4.0",gts:"^5.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^3.0.0","jsdoc-region-tag":"^3.0.0",linkinator:"^3.0.0",mocha:"^9.2.2",mockery:"^2.1.0",nock:"~13.5.0","node-fetch":"^2.6.7","pack-n-play":"^2.0.0",proxyquire:"^2.1.3",sinon:"^18.0.0",nise:"6.0.0","path-to-regexp":"6.3.0",tmp:"^0.2.0",typescript:"^5.1.6",yargs:"^17.3.1"},require$$0$2={name:name$t,description,version:version$6,license,author,engines,repository,main,types:types$3,type:type$1,exports,files,keywords,scripts,dependencies,devDependencies};var hasRequiredPackageJsonHelper;function requirePackageJsonHelper(){if(hasRequiredPackageJsonHelper)return packageJsonHelper;hasRequiredPackageJsonHelper=1;function t(){return require$$0$2}return packageJsonHelper.getPackageJSON=t,packageJsonHelper}var hasRequiredUtil$6;function requireUtil$6(){if(hasRequiredUtil$6)return util$5;hasRequiredUtil$6=1;var t=util$5&&util$5.__createBinding||(Object.create?function(H,U,P,Z){Z===void 0&&(Z=P);var ie=Object.getOwnPropertyDescriptor(U,P);(!ie||("get"in ie?!U.__esModule:ie.writable||ie.configurable))&&(ie={enumerable:!0,get:function(){return U[P]}}),Object.defineProperty(H,Z,ie)}:function(H,U,P,Z){Z===void 0&&(Z=P),H[Z]=U[P]}),e=util$5&&util$5.__setModuleDefault||(Object.create?function(H,U){Object.defineProperty(H,"default",{enumerable:!0,value:U})}:function(H,U){H.default=U}),r=util$5&&util$5.__importStar||function(){var H=function(U){return H=Object.getOwnPropertyNames||function(P){var Z=[];for(var ie in P)Object.prototype.hasOwnProperty.call(P,ie)&&(Z[Z.length]=ie);return Z},H(U)};return function(U){if(U&&U.__esModule)return U;var P={};if(U!=null)for(var Z=H(U),ie=0;ie<Z.length;ie++)Z[ie]!=="default"&&t(P,U,Z[ie]);return e(P,U),P}}();Object.defineProperty(util$5,"__esModule",{value:!0}),util$5.PassThroughShim=void 0,util$5.normalize=o,util$5.objectEntries=s,util$5.fixedEncodeURIComponent=h,util$5.encodeURI=v,util$5.qsStringify=E,util$5.objectKeyToLowercase=y,util$5.unicodeJSONStringify=A,util$5.convertObjKeysToSnakeCase=w,util$5.formatAsUTCISO=I,util$5.getRuntimeTrackingString=_,util$5.getUserAgentString=S,util$5.getDirName=j,util$5.getModuleFormat=K,r(require$$1$3);const u=r(require$$1$3),d=require$$1$3,m=r(require$$1$3),c=requirePackageJsonHelper();m.fileURLToPath;const a=!1;function o(H,U){return{options:typeof H=="object"?H:{},callback:typeof H=="function"?H:U}}function s(H){return Object.keys(H).map(U=>[U,H[U]])}function h(H){return encodeURIComponent(H).replace(/[!'()*]/g,U=>"%"+U.charCodeAt(0).toString(16).toUpperCase())}function v(H,U){return H.split("/").map(h).join(U?"%2F":"/")}function E(H){return u.stringify(H,"&","=",{encodeURIComponent:U=>v(U,!0)})}function y(H){const U={};for(let P of Object.keys(H)){const Z=H[P];P=P.toLowerCase(),U[P]=Z}return U}function A(H){return JSON.stringify(H).replace(/[\u0080-\uFFFF]/g,U=>"\\u"+("0000"+U.charCodeAt(0).toString(16)).slice(-4))}function w(H){return H instanceof Date||H instanceof RegExp?H:Array.isArray(H)?H.map(w):H instanceof Object?Object.keys(H).reduce((U,P)=>{const Z=P[0].toLocaleLowerCase()+P.slice(1).replace(/([A-Z]+)/g,(ie,ue)=>`_${ue.toLowerCase()}`);return U[Z]=w(H[P]),U},Object()):H}function I(H,U=!1,P="",Z=""){const ie=H.getUTCFullYear(),ue=H.getUTCMonth()+1,le=H.getUTCDate(),ne=H.getUTCHours(),ye=H.getUTCMinutes(),fe=H.getUTCSeconds();let Te=`${ie.toString().padStart(4,"0")}${P}${ue.toString().padStart(2,"0")}${P}${le.toString().padStart(2,"0")}`;return U&&(Te=`${Te}T${ne.toString().padStart(2,"0")}${Z}${ye.toString().padStart(2,"0")}${Z}${fe.toString().padStart(2,"0")}Z`),Te}function _(){return globalThis.Deno&&globalThis.Deno.version&&globalThis.Deno.version.deno?`gl-deno/${globalThis.Deno.version.deno}`:`gl-node/${process.versions.node}`}function S(){const H=(0,c.getPackageJSON)();return H.name.replace("@google-cloud","gcloud-node").replace("/","-")+"/"+H.version}function j(){let H="";try{H=__dirname}catch{H=__dirname}return H}function K(){return a?"ESM":"CJS"}class J extends d.PassThrough{constructor(){super(...arguments),this.shouldEmitReading=!0,this.shouldEmitWriting=!0}_read(U){this.shouldEmitReading&&(this.emit("reading"),this.shouldEmitReading=!1),super._read(U)}_write(U,P,Z){this.shouldEmitWriting&&(this.emit("writing"),this.shouldEmitWriting=!1),process.nextTick(()=>{super._write(U,P,Z)})}_final(U){this.shouldEmitReading&&(this.emit("reading"),this.shouldEmitReading=!1),this.shouldEmitWriting&&(this.emit("writing"),this.shouldEmitWriting=!1),U(null)}}return util$5.PassThroughShim=J,util$5}var readableBrowser={exports:{}},streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=require$$1$3.EventEmitter),streamBrowser}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(A,w){var I=Object.keys(A);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(A);w&&(_=_.filter(function(S){return Object.getOwnPropertyDescriptor(A,S).enumerable})),I.push.apply(I,_)}return I}function e(A){for(var w=1;w<arguments.length;w++){var I=arguments[w]!=null?arguments[w]:{};w%2?t(Object(I),!0).forEach(function(_){r(A,_,I[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(I)):t(Object(I)).forEach(function(_){Object.defineProperty(A,_,Object.getOwnPropertyDescriptor(I,_))})}return A}function r(A,w,I){return w=c(w),w in A?Object.defineProperty(A,w,{value:I,enumerable:!0,configurable:!0,writable:!0}):A[w]=I,A}function u(A,w){if(!(A instanceof w))throw new TypeError("Cannot call a class as a function")}function d(A,w){for(var I=0;I<w.length;I++){var _=w[I];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(A,c(_.key),_)}}function m(A,w,I){return w&&d(A.prototype,w),Object.defineProperty(A,"prototype",{writable:!1}),A}function c(A){var w=a(A,"string");return typeof w=="symbol"?w:String(w)}function a(A,w){if(typeof A!="object"||A===null)return A;var I=A[Symbol.toPrimitive];if(I!==void 0){var _=I.call(A,w);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(A)}var o=require$$1$3,s=o.Buffer,h=require$$1$3,v=h.inspect,E=v&&v.custom||"inspect";function y(A,w,I){s.prototype.copy.call(A,w,I)}return buffer_list=function(){function A(){u(this,A),this.head=null,this.tail=null,this.length=0}return m(A,[{key:"push",value:function(I){var _={data:I,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(I){var _={data:I,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var I=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(this.length===0)return"";for(var _=this.head,S=""+_.data;_=_.next;)S+=I+_.data;return S}},{key:"concat",value:function(I){if(this.length===0)return s.alloc(0);for(var _=s.allocUnsafe(I>>>0),S=this.head,j=0;S;)y(S.data,_,j),j+=S.data.length,S=S.next;return _}},{key:"consume",value:function(I,_){var S;return I<this.head.data.length?(S=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):I===this.head.data.length?S=this.shift():S=_?this._getString(I):this._getBuffer(I),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var _=this.head,S=1,j=_.data;for(I-=j.length;_=_.next;){var K=_.data,J=I>K.length?K.length:I;if(J===K.length?j+=K:j+=K.slice(0,I),I-=J,I===0){J===K.length?(++S,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=K.slice(J));break}++S}return this.length-=S,j}},{key:"_getBuffer",value:function(I){var _=s.allocUnsafe(I),S=this.head,j=1;for(S.data.copy(_),I-=S.data.length;S=S.next;){var K=S.data,J=I>K.length?K.length:I;if(K.copy(_,_.length-I,0,J),I-=J,I===0){J===K.length?(++j,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=K.slice(J));break}++j}return this.length-=j,_}},{key:E,value:function(I,_){return v(this,e(e({},_),{},{depth:0,customInspect:!1}))}}]),A}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function t(c,a){var o=this,s=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return s||h?(a?a(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(d,this,c)):process.nextTick(d,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(v){!a&&v?o._writableState?o._writableState.errorEmitted?process.nextTick(r,o):(o._writableState.errorEmitted=!0,process.nextTick(e,o,v)):process.nextTick(e,o,v):a?(process.nextTick(r,o),a(v)):process.nextTick(r,o)}),this)}function e(c,a){d(c,a),r(c)}function r(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function u(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d(c,a){c.emit("error",a)}function m(c,a){var o=c._readableState,s=c._writableState;o&&o.autoDestroy||s&&s.autoDestroy?c.destroy(a):c.emit("error",a)}return destroy_1={destroy:t,undestroy:u,errorOrDestroy:m},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o}var e={};function r(a,o,s){s||(s=Error);function h(E,y,A){return typeof o=="string"?o:o(E,y,A)}var v=function(E){t(y,E);function y(A,w,I){return E.call(this,h(A,w,I))||this}return y}(s);v.prototype.name=s.name,v.prototype.code=a,e[a]=v}function u(a,o){if(Array.isArray(a)){var s=a.length;return a=a.map(function(h){return String(h)}),s>2?"one of ".concat(o," ").concat(a.slice(0,s-1).join(", "),", or ")+a[s-1]:s===2?"one of ".concat(o," ").concat(a[0]," or ").concat(a[1]):"of ".concat(o," ").concat(a[0])}else return"of ".concat(o," ").concat(String(a))}function d(a,o,s){return a.substr(0,o.length)===o}function m(a,o,s){return(s===void 0||s>a.length)&&(s=a.length),a.substring(s-o.length,s)===o}function c(a,o,s){return typeof s!="number"&&(s=0),s+o.length>a.length?!1:a.indexOf(o,s)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,o){return'The value "'+o+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,o,s){var h;typeof o=="string"&&d(o,"not ")?(h="must not be",o=o.replace(/^not /,"")):h="must be";var v;if(m(a," argument"))v="The ".concat(a," ").concat(h," ").concat(u(o,"type"));else{var E=c(a,".")?"property":"argument";v='The "'.concat(a,'" ').concat(E," ").concat(h," ").concat(u(o,"type"))}return v+=". Received type ".concat(typeof s),v},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(u,d,m){return u.highWaterMark!=null?u.highWaterMark:d?u[m]:null}function r(u,d,m,c){var a=e(d,c,m);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var o=c?m:"highWaterMark";throw new t(o,a)}return Math.floor(a)}return u.objectMode?16:16*1024}return state={getHighWaterMark:r},state}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,r){if(r){e.super_=r;var u=function(){};u.prototype=r.prototype,e.prototype=new u,e.prototype.constructor=e}}),inherits_browser.exports}var browser$2,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$2;hasRequiredBrowser$1=1,browser$2=t;function t(r,u){if(e("noDeprecation"))return r;var d=!1;function m(){if(!d){if(e("throwDeprecation"))throw new Error(u);e("traceDeprecation")?console.trace(u):console.warn(u),d=!0}return r.apply(this,arguments)}return m}function e(r){try{if(!commonjsGlobal$4.localStorage)return!1}catch{return!1}var u=commonjsGlobal$4.localStorage[r];return u==null?!1:String(u).toLowerCase()==="true"}return browser$2}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=P;function t(Le){var Be=this;this.next=null,this.entry=null,this.finish=function(){Ge(Be,Le)}}var e;P.WritableState=H;var r={deprecate:requireBrowser$1()},u=requireStreamBrowser(),d=require$$1$3.Buffer,m=(typeof commonjsGlobal$4<"u"?commonjsGlobal$4:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(Le){return d.from(Le)}function a(Le){return d.isBuffer(Le)||Le instanceof m}var o=requireDestroy(),s=requireState(),h=s.getHighWaterMark,v=requireErrorsBrowser().codes,E=v.ERR_INVALID_ARG_TYPE,y=v.ERR_METHOD_NOT_IMPLEMENTED,A=v.ERR_MULTIPLE_CALLBACK,w=v.ERR_STREAM_CANNOT_PIPE,I=v.ERR_STREAM_DESTROYED,_=v.ERR_STREAM_NULL_VALUES,S=v.ERR_STREAM_WRITE_AFTER_END,j=v.ERR_UNKNOWN_ENCODING,K=o.errorOrDestroy;requireInherits_browser()(P,u);function J(){}function H(Le,Be,$e){e=e||require_stream_duplex(),Le=Le||{},typeof $e!="boolean"&&($e=Be instanceof e),this.objectMode=!!Le.objectMode,$e&&(this.objectMode=this.objectMode||!!Le.writableObjectMode),this.highWaterMark=h(this,Le,"writableHighWaterMark",$e),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var he=Le.decodeStrings===!1;this.decodeStrings=!he,this.defaultEncoding=Le.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(p){Te(Be,p)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Le.emitClose!==!1,this.autoDestroy=!!Le.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}H.prototype.getBuffer=function(){for(var Be=this.bufferedRequest,$e=[];Be;)$e.push(Be),Be=Be.next;return $e},function(){try{Object.defineProperty(H.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var U;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(U=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(Be){return U.call(this,Be)?!0:this!==P?!1:Be&&Be._writableState instanceof H}})):U=function(Be){return Be instanceof this};function P(Le){e=e||require_stream_duplex();var Be=this instanceof e;if(!Be&&!U.call(P,this))return new P(Le);this._writableState=new H(Le,this,Be),this.writable=!0,Le&&(typeof Le.write=="function"&&(this._write=Le.write),typeof Le.writev=="function"&&(this._writev=Le.writev),typeof Le.destroy=="function"&&(this._destroy=Le.destroy),typeof Le.final=="function"&&(this._final=Le.final)),u.call(this)}P.prototype.pipe=function(){K(this,new w)};function Z(Le,Be){var $e=new S;K(Le,$e),process.nextTick(Be,$e)}function ie(Le,Be,$e,he){var p;return $e===null?p=new _:typeof $e!="string"&&!Be.objectMode&&(p=new E("chunk",["string","Buffer"],$e)),p?(K(Le,p),process.nextTick(he,p),!1):!0}P.prototype.write=function(Le,Be,$e){var he=this._writableState,p=!1,V=!he.objectMode&&a(Le);return V&&!d.isBuffer(Le)&&(Le=c(Le)),typeof Be=="function"&&($e=Be,Be=null),V?Be="buffer":Be||(Be=he.defaultEncoding),typeof $e!="function"&&($e=J),he.ending?Z(this,$e):(V||ie(this,he,Le,$e))&&(he.pendingcb++,p=le(this,he,V,Le,Be,$e)),p},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var Le=this._writableState;Le.corked&&(Le.corked--,!Le.writing&&!Le.corked&&!Le.bufferProcessing&&Le.bufferedRequest&&be(this,Le))},P.prototype.setDefaultEncoding=function(Be){if(typeof Be=="string"&&(Be=Be.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Be+"").toLowerCase())>-1))throw new j(Be);return this._writableState.defaultEncoding=Be,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ue(Le,Be,$e){return!Le.objectMode&&Le.decodeStrings!==!1&&typeof Be=="string"&&(Be=d.from(Be,$e)),Be}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function le(Le,Be,$e,he,p,V){if(!$e){var R=ue(Be,he,p);he!==R&&($e=!0,p="buffer",he=R)}var ce=Be.objectMode?1:he.length;Be.length+=ce;var Re=Be.length<Be.highWaterMark;if(Re||(Be.needDrain=!0),Be.writing||Be.corked){var ke=Be.lastBufferedRequest;Be.lastBufferedRequest={chunk:he,encoding:p,isBuf:$e,callback:V,next:null},ke?ke.next=Be.lastBufferedRequest:Be.bufferedRequest=Be.lastBufferedRequest,Be.bufferedRequestCount+=1}else ne(Le,Be,!1,ce,he,p,V);return Re}function ne(Le,Be,$e,he,p,V,R){Be.writelen=he,Be.writecb=R,Be.writing=!0,Be.sync=!0,Be.destroyed?Be.onwrite(new I("write")):$e?Le._writev(p,Be.onwrite):Le._write(p,V,Be.onwrite),Be.sync=!1}function ye(Le,Be,$e,he,p){--Be.pendingcb,$e?(process.nextTick(p,he),process.nextTick(Fe,Le,Be),Le._writableState.errorEmitted=!0,K(Le,he)):(p(he),Le._writableState.errorEmitted=!0,K(Le,he),Fe(Le,Be))}function fe(Le){Le.writing=!1,Le.writecb=null,Le.length-=Le.writelen,Le.writelen=0}function Te(Le,Be){var $e=Le._writableState,he=$e.sync,p=$e.writecb;if(typeof p!="function")throw new A;if(fe($e),Be)ye(Le,$e,he,Be,p);else{var V=we($e)||Le.destroyed;!V&&!$e.corked&&!$e.bufferProcessing&&$e.bufferedRequest&&be(Le,$e),he?process.nextTick(Ae,Le,$e,V,p):Ae(Le,$e,V,p)}}function Ae(Le,Be,$e,he){$e||Se(Le,Be),Be.pendingcb--,he(),Fe(Le,Be)}function Se(Le,Be){Be.length===0&&Be.needDrain&&(Be.needDrain=!1,Le.emit("drain"))}function be(Le,Be){Be.bufferProcessing=!0;var $e=Be.bufferedRequest;if(Le._writev&&$e&&$e.next){var he=Be.bufferedRequestCount,p=new Array(he),V=Be.corkedRequestsFree;V.entry=$e;for(var R=0,ce=!0;$e;)p[R]=$e,$e.isBuf||(ce=!1),$e=$e.next,R+=1;p.allBuffers=ce,ne(Le,Be,!0,Be.length,p,"",V.finish),Be.pendingcb++,Be.lastBufferedRequest=null,V.next?(Be.corkedRequestsFree=V.next,V.next=null):Be.corkedRequestsFree=new t(Be),Be.bufferedRequestCount=0}else{for(;$e;){var Re=$e.chunk,ke=$e.encoding,qe=$e.callback,g=Be.objectMode?1:Re.length;if(ne(Le,Be,!1,g,Re,ke,qe),$e=$e.next,Be.bufferedRequestCount--,Be.writing)break}$e===null&&(Be.lastBufferedRequest=null)}Be.bufferedRequest=$e,Be.bufferProcessing=!1}P.prototype._write=function(Le,Be,$e){$e(new y("_write()"))},P.prototype._writev=null,P.prototype.end=function(Le,Be,$e){var he=this._writableState;return typeof Le=="function"?($e=Le,Le=null,Be=null):typeof Be=="function"&&($e=Be,Be=null),Le!=null&&this.write(Le,Be),he.corked&&(he.corked=1,this.uncork()),he.ending||Ve(this,he,$e),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function we(Le){return Le.ending&&Le.length===0&&Le.bufferedRequest===null&&!Le.finished&&!Le.writing}function Ce(Le,Be){Le._final(function($e){Be.pendingcb--,$e&&K(Le,$e),Be.prefinished=!0,Le.emit("prefinish"),Fe(Le,Be)})}function je(Le,Be){!Be.prefinished&&!Be.finalCalled&&(typeof Le._final=="function"&&!Be.destroyed?(Be.pendingcb++,Be.finalCalled=!0,process.nextTick(Ce,Le,Be)):(Be.prefinished=!0,Le.emit("prefinish")))}function Fe(Le,Be){var $e=we(Be);if($e&&(je(Le,Be),Be.pendingcb===0&&(Be.finished=!0,Le.emit("finish"),Be.autoDestroy))){var he=Le._readableState;(!he||he.autoDestroy&&he.endEmitted)&&Le.destroy()}return $e}function Ve(Le,Be,$e){Be.ending=!0,Fe(Le,Be),$e&&(Be.finished?process.nextTick($e):Le.once("finish",$e)),Be.ended=!0,Le.writable=!1}function Ge(Le,Be,$e){var he=Le.entry;for(Le.entry=null;he;){var p=he.callback;Be.pendingcb--,p($e),he=he.next}Be.corkedRequestsFree.next=Le}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Be){this._writableState&&(this._writableState.destroyed=Be)}}),P.prototype.destroy=o.destroy,P.prototype._undestroy=o.undestroy,P.prototype._destroy=function(Le,Be){Be(Le)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(s){var h=[];for(var v in s)h.push(v);return h};_stream_duplex=c;var e=require_stream_readable(),r=require_stream_writable();requireInherits_browser()(c,e);for(var u=t(r.prototype),d=0;d<u.length;d++){var m=u[d];c.prototype[m]||(c.prototype[m]=r.prototype[m])}function c(s){if(!(this instanceof c))return new c(s);e.call(this,s),r.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(o,this)}function o(s){s.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),_stream_duplex}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=requireSafeBuffer().Buffer,e=t.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(_){if(!_)return"utf8";for(var S;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(S)return;_=(""+_).toLowerCase(),S=!0}}function u(_){var S=r(_);if(typeof S!="string"&&(t.isEncoding===e||!e(_)))throw new Error("Unknown encoding: "+_);return S||_}string_decoder.StringDecoder=d;function d(_){this.encoding=u(_);var S;switch(this.encoding){case"utf16le":this.text=v,this.end=E,S=4;break;case"utf8":this.fillLast=o,S=4;break;case"base64":this.text=y,this.end=A,S=3;break;default:this.write=w,this.end=I;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(S)}d.prototype.write=function(_){if(_.length===0)return"";var S,j;if(this.lastNeed){if(S=this.fillLast(_),S===void 0)return"";j=this.lastNeed,this.lastNeed=0}else j=0;return j<_.length?S?S+this.text(_,j):this.text(_,j):S||""},d.prototype.end=h,d.prototype.text=s,d.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function m(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function c(_,S,j){var K=S.length-1;if(K<j)return 0;var J=m(S[K]);return J>=0?(J>0&&(_.lastNeed=J-1),J):--K<j||J===-2?0:(J=m(S[K]),J>=0?(J>0&&(_.lastNeed=J-2),J):--K<j||J===-2?0:(J=m(S[K]),J>=0?(J>0&&(J===2?J=0:_.lastNeed=J-3),J):0))}function a(_,S,j){if((S[0]&192)!==128)return _.lastNeed=0,"";if(_.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return _.lastNeed=1,"";if(_.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return _.lastNeed=2,""}}function o(_){var S=this.lastTotal-this.lastNeed,j=a(this,_);if(j!==void 0)return j;if(this.lastNeed<=_.length)return _.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,S,0,_.length),this.lastNeed-=_.length}function s(_,S){var j=c(this,_,S);if(!this.lastNeed)return _.toString("utf8",S);this.lastTotal=j;var K=_.length-(j-this.lastNeed);return _.copy(this.lastChar,0,K),_.toString("utf8",S,K)}function h(_){var S=_&&_.length?this.write(_):"";return this.lastNeed?S+"":S}function v(_,S){if((_.length-S)%2===0){var j=_.toString("utf16le",S);if(j){var K=j.charCodeAt(j.length-1);if(K>=55296&&K<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],j.slice(0,-1)}return j}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",S,_.length-1)}function E(_){var S=_&&_.length?this.write(_):"";if(this.lastNeed){var j=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,j)}return S}function y(_,S){var j=(_.length-S)%3;return j===0?_.toString("base64",S):(this.lastNeed=3-j,this.lastTotal=3,j===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",S,_.length-j))}function A(_){var S=_&&_.length?this.write(_):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function w(_){return _.toString(this.encoding)}function I(_){return _&&_.length?this.write(_):""}return string_decoder}var endOfStream$1,hasRequiredEndOfStream$1;function requireEndOfStream$1(){if(hasRequiredEndOfStream$1)return endOfStream$1;hasRequiredEndOfStream$1=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(m){var c=!1;return function(){if(!c){c=!0;for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];m.apply(this,o)}}}function r(){}function u(m){return m.setHeader&&typeof m.abort=="function"}function d(m,c,a){if(typeof c=="function")return d(m,null,c);c||(c={}),a=e(a||r);var o=c.readable||c.readable!==!1&&m.readable,s=c.writable||c.writable!==!1&&m.writable,h=function(){m.writable||E()},v=m._writableState&&m._writableState.finished,E=function(){s=!1,v=!0,o||a.call(m)},y=m._readableState&&m._readableState.endEmitted,A=function(){o=!1,y=!0,s||a.call(m)},w=function(j){a.call(m,j)},I=function(){var j;if(o&&!y)return(!m._readableState||!m._readableState.ended)&&(j=new t),a.call(m,j);if(s&&!v)return(!m._writableState||!m._writableState.ended)&&(j=new t),a.call(m,j)},_=function(){m.req.on("finish",E)};return u(m)?(m.on("complete",E),m.on("abort",I),m.req?_():m.on("request",_)):s&&!m._writableState&&(m.on("end",h),m.on("close",h)),m.on("end",A),m.on("finish",E),c.error!==!1&&m.on("error",w),m.on("close",I),function(){m.removeListener("complete",E),m.removeListener("abort",I),m.removeListener("request",_),m.req&&m.req.removeListener("finish",E),m.removeListener("end",h),m.removeListener("close",h),m.removeListener("finish",E),m.removeListener("end",A),m.removeListener("error",w),m.removeListener("close",I)}}return endOfStream$1=d,endOfStream$1}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(j,K,J){return K=r(K),K in j?Object.defineProperty(j,K,{value:J,enumerable:!0,configurable:!0,writable:!0}):j[K]=J,j}function r(j){var K=u(j,"string");return typeof K=="symbol"?K:String(K)}function u(j,K){if(typeof j!="object"||j===null)return j;var J=j[Symbol.toPrimitive];if(J!==void 0){var H=J.call(j,K);if(typeof H!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(j)}var d=requireEndOfStream$1(),m=Symbol("lastResolve"),c=Symbol("lastReject"),a=Symbol("error"),o=Symbol("ended"),s=Symbol("lastPromise"),h=Symbol("handlePromise"),v=Symbol("stream");function E(j,K){return{value:j,done:K}}function y(j){var K=j[m];if(K!==null){var J=j[v].read();J!==null&&(j[s]=null,j[m]=null,j[c]=null,K(E(J,!1)))}}function A(j){process.nextTick(y,j)}function w(j,K){return function(J,H){j.then(function(){if(K[o]){J(E(void 0,!0));return}K[h](J,H)},H)}}var I=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((t={get stream(){return this[v]},next:function(){var K=this,J=this[a];if(J!==null)return Promise.reject(J);if(this[o])return Promise.resolve(E(void 0,!0));if(this[v].destroyed)return new Promise(function(Z,ie){process.nextTick(function(){K[a]?ie(K[a]):Z(E(void 0,!0))})});var H=this[s],U;if(H)U=new Promise(w(H,this));else{var P=this[v].read();if(P!==null)return Promise.resolve(E(P,!1));U=new Promise(this[h])}return this[s]=U,U}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var K=this;return new Promise(function(J,H){K[v].destroy(null,function(U){if(U){H(U);return}J(E(void 0,!0))})})}),t),I),S=function(K){var J,H=Object.create(_,(J={},e(J,v,{value:K,writable:!0}),e(J,m,{value:null,writable:!0}),e(J,c,{value:null,writable:!0}),e(J,a,{value:null,writable:!0}),e(J,o,{value:K._readableState.endEmitted,writable:!0}),e(J,h,{value:function(P,Z){var ie=H[v].read();ie?(H[s]=null,H[m]=null,H[c]=null,P(E(ie,!1))):(H[m]=P,H[c]=Z)},writable:!0}),J));return H[s]=null,d(K,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=H[c];P!==null&&(H[s]=null,H[m]=null,H[c]=null,P(U)),H[a]=U;return}var Z=H[m];Z!==null&&(H[s]=null,H[m]=null,H[c]=null,Z(E(void 0,!0))),H[o]=!0}),K.on("readable",A.bind(null,H)),H};return async_iterator=S,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=Z;var t;Z.ReadableState=P,require$$1$3.EventEmitter;var e=function(R,ce){return R.listeners(ce).length},r=requireStreamBrowser(),u=require$$1$3.Buffer,d=(typeof commonjsGlobal$4<"u"?commonjsGlobal$4:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function m(V){return u.from(V)}function c(V){return u.isBuffer(V)||V instanceof d}var a=require$$1$3,o;a&&a.debuglog?o=a.debuglog("stream"):o=function(){};var s=requireBuffer_list(),h=requireDestroy(),v=requireState(),E=v.getHighWaterMark,y=requireErrorsBrowser().codes,A=y.ERR_INVALID_ARG_TYPE,w=y.ERR_STREAM_PUSH_AFTER_EOF,I=y.ERR_METHOD_NOT_IMPLEMENTED,_=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,j,K;requireInherits_browser()(Z,r);var J=h.errorOrDestroy,H=["error","close","destroy","pause","resume"];function U(V,R,ce){if(typeof V.prependListener=="function")return V.prependListener(R,ce);!V._events||!V._events[R]?V.on(R,ce):Array.isArray(V._events[R])?V._events[R].unshift(ce):V._events[R]=[ce,V._events[R]]}function P(V,R,ce){t=t||require_stream_duplex(),V=V||{},typeof ce!="boolean"&&(ce=R instanceof t),this.objectMode=!!V.objectMode,ce&&(this.objectMode=this.objectMode||!!V.readableObjectMode),this.highWaterMark=E(this,V,"readableHighWaterMark",ce),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.destroyed=!1,this.defaultEncoding=V.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,V.encoding&&(S||(S=requireString_decoder().StringDecoder),this.decoder=new S(V.encoding),this.encoding=V.encoding)}function Z(V){if(t=t||require_stream_duplex(),!(this instanceof Z))return new Z(V);var R=this instanceof t;this._readableState=new P(V,this,R),this.readable=!0,V&&(typeof V.read=="function"&&(this._read=V.read),typeof V.destroy=="function"&&(this._destroy=V.destroy)),r.call(this)}Object.defineProperty(Z.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),Z.prototype.destroy=h.destroy,Z.prototype._undestroy=h.undestroy,Z.prototype._destroy=function(V,R){R(V)},Z.prototype.push=function(V,R){var ce=this._readableState,Re;return ce.objectMode?Re=!0:typeof V=="string"&&(R=R||ce.defaultEncoding,R!==ce.encoding&&(V=u.from(V,R),R=""),Re=!0),ie(this,V,R,!1,Re)},Z.prototype.unshift=function(V){return ie(this,V,null,!0,!1)};function ie(V,R,ce,Re,ke){o("readableAddChunk",R);var qe=V._readableState;if(R===null)qe.reading=!1,Te(V,qe);else{var g;if(ke||(g=le(qe,R)),g)J(V,g);else if(qe.objectMode||R&&R.length>0)if(typeof R!="string"&&!qe.objectMode&&Object.getPrototypeOf(R)!==u.prototype&&(R=m(R)),Re)qe.endEmitted?J(V,new _):ue(V,qe,R,!0);else if(qe.ended)J(V,new w);else{if(qe.destroyed)return!1;qe.reading=!1,qe.decoder&&!ce?(R=qe.decoder.write(R),qe.objectMode||R.length!==0?ue(V,qe,R,!1):be(V,qe)):ue(V,qe,R,!1)}else Re||(qe.reading=!1,be(V,qe))}return!qe.ended&&(qe.length<qe.highWaterMark||qe.length===0)}function ue(V,R,ce,Re){R.flowing&&R.length===0&&!R.sync?(R.awaitDrain=0,V.emit("data",ce)):(R.length+=R.objectMode?1:ce.length,Re?R.buffer.unshift(ce):R.buffer.push(ce),R.needReadable&&Ae(V)),be(V,R)}function le(V,R){var ce;return!c(R)&&typeof R!="string"&&R!==void 0&&!V.objectMode&&(ce=new A("chunk",["string","Buffer","Uint8Array"],R)),ce}Z.prototype.isPaused=function(){return this._readableState.flowing===!1},Z.prototype.setEncoding=function(V){S||(S=requireString_decoder().StringDecoder);var R=new S(V);this._readableState.decoder=R,this._readableState.encoding=this._readableState.decoder.encoding;for(var ce=this._readableState.buffer.head,Re="";ce!==null;)Re+=R.write(ce.data),ce=ce.next;return this._readableState.buffer.clear(),Re!==""&&this._readableState.buffer.push(Re),this._readableState.length=Re.length,this};var ne=1073741824;function ye(V){return V>=ne?V=ne:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}function fe(V,R){return V<=0||R.length===0&&R.ended?0:R.objectMode?1:V!==V?R.flowing&&R.length?R.buffer.head.data.length:R.length:(V>R.highWaterMark&&(R.highWaterMark=ye(V)),V<=R.length?V:R.ended?R.length:(R.needReadable=!0,0))}Z.prototype.read=function(V){o("read",V),V=parseInt(V,10);var R=this._readableState,ce=V;if(V!==0&&(R.emittedReadable=!1),V===0&&R.needReadable&&((R.highWaterMark!==0?R.length>=R.highWaterMark:R.length>0)||R.ended))return o("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?$e(this):Ae(this),null;if(V=fe(V,R),V===0&&R.ended)return R.length===0&&$e(this),null;var Re=R.needReadable;o("need readable",Re),(R.length===0||R.length-V<R.highWaterMark)&&(Re=!0,o("length less than watermark",Re)),R.ended||R.reading?(Re=!1,o("reading or ended",Re)):Re&&(o("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(V=fe(ce,R)));var ke;return V>0?ke=Be(V,R):ke=null,ke===null?(R.needReadable=R.length<=R.highWaterMark,V=0):(R.length-=V,R.awaitDrain=0),R.length===0&&(R.ended||(R.needReadable=!0),ce!==V&&R.ended&&$e(this)),ke!==null&&this.emit("data",ke),ke};function Te(V,R){if(o("onEofChunk"),!R.ended){if(R.decoder){var ce=R.decoder.end();ce&&ce.length&&(R.buffer.push(ce),R.length+=R.objectMode?1:ce.length)}R.ended=!0,R.sync?Ae(V):(R.needReadable=!1,R.emittedReadable||(R.emittedReadable=!0,Se(V)))}}function Ae(V){var R=V._readableState;o("emitReadable",R.needReadable,R.emittedReadable),R.needReadable=!1,R.emittedReadable||(o("emitReadable",R.flowing),R.emittedReadable=!0,process.nextTick(Se,V))}function Se(V){var R=V._readableState;o("emitReadable_",R.destroyed,R.length,R.ended),!R.destroyed&&(R.length||R.ended)&&(V.emit("readable"),R.emittedReadable=!1),R.needReadable=!R.flowing&&!R.ended&&R.length<=R.highWaterMark,Le(V)}function be(V,R){R.readingMore||(R.readingMore=!0,process.nextTick(we,V,R))}function we(V,R){for(;!R.reading&&!R.ended&&(R.length<R.highWaterMark||R.flowing&&R.length===0);){var ce=R.length;if(o("maybeReadMore read 0"),V.read(0),ce===R.length)break}R.readingMore=!1}Z.prototype._read=function(V){J(this,new I("_read()"))},Z.prototype.pipe=function(V,R){var ce=this,Re=this._readableState;switch(Re.pipesCount){case 0:Re.pipes=V;break;case 1:Re.pipes=[Re.pipes,V];break;default:Re.pipes.push(V);break}Re.pipesCount+=1,o("pipe count=%d opts=%j",Re.pipesCount,R);var ke=(!R||R.end!==!1)&&V!==process.stdout&&V!==process.stderr,qe=ke?ee:It;Re.endEmitted?process.nextTick(qe):ce.once("end",qe),V.on("unpipe",g);function g(wt,ir){o("onunpipe"),wt===ce&&ir&&ir.hasUnpiped===!1&&(ir.hasUnpiped=!0,X())}function ee(){o("onend"),V.end()}var ae=Ce(ce);V.on("drain",ae);var l=!1;function X(){o("cleanup"),V.removeListener("close",He),V.removeListener("finish",nt),V.removeListener("drain",ae),V.removeListener("error",_e),V.removeListener("unpipe",g),ce.removeListener("end",ee),ce.removeListener("end",It),ce.removeListener("data",oe),l=!0,Re.awaitDrain&&(!V._writableState||V._writableState.needDrain)&&ae()}ce.on("data",oe);function oe(wt){o("ondata");var ir=V.write(wt);o("dest.write",ir),ir===!1&&((Re.pipesCount===1&&Re.pipes===V||Re.pipesCount>1&&p(Re.pipes,V)!==-1)&&!l&&(o("false write response, pause",Re.awaitDrain),Re.awaitDrain++),ce.pause())}function _e(wt){o("onerror",wt),It(),V.removeListener("error",_e),e(V,"error")===0&&J(V,wt)}U(V,"error",_e);function He(){V.removeListener("finish",nt),It()}V.once("close",He);function nt(){o("onfinish"),V.removeListener("close",He),It()}V.once("finish",nt);function It(){o("unpipe"),ce.unpipe(V)}return V.emit("pipe",ce),Re.flowing||(o("pipe resume"),ce.resume()),V};function Ce(V){return function(){var ce=V._readableState;o("pipeOnDrain",ce.awaitDrain),ce.awaitDrain&&ce.awaitDrain--,ce.awaitDrain===0&&e(V,"data")&&(ce.flowing=!0,Le(V))}}Z.prototype.unpipe=function(V){var R=this._readableState,ce={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return V&&V!==R.pipes?this:(V||(V=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,V&&V.emit("unpipe",this,ce),this);if(!V){var Re=R.pipes,ke=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var qe=0;qe<ke;qe++)Re[qe].emit("unpipe",this,{hasUnpiped:!1});return this}var g=p(R.pipes,V);return g===-1?this:(R.pipes.splice(g,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),V.emit("unpipe",this,ce),this)},Z.prototype.on=function(V,R){var ce=r.prototype.on.call(this,V,R),Re=this._readableState;return V==="data"?(Re.readableListening=this.listenerCount("readable")>0,Re.flowing!==!1&&this.resume()):V==="readable"&&!Re.endEmitted&&!Re.readableListening&&(Re.readableListening=Re.needReadable=!0,Re.flowing=!1,Re.emittedReadable=!1,o("on readable",Re.length,Re.reading),Re.length?Ae(this):Re.reading||process.nextTick(Fe,this)),ce},Z.prototype.addListener=Z.prototype.on,Z.prototype.removeListener=function(V,R){var ce=r.prototype.removeListener.call(this,V,R);return V==="readable"&&process.nextTick(je,this),ce},Z.prototype.removeAllListeners=function(V){var R=r.prototype.removeAllListeners.apply(this,arguments);return(V==="readable"||V===void 0)&&process.nextTick(je,this),R};function je(V){var R=V._readableState;R.readableListening=V.listenerCount("readable")>0,R.resumeScheduled&&!R.paused?R.flowing=!0:V.listenerCount("data")>0&&V.resume()}function Fe(V){o("readable nexttick read 0"),V.read(0)}Z.prototype.resume=function(){var V=this._readableState;return V.flowing||(o("resume"),V.flowing=!V.readableListening,Ve(this,V)),V.paused=!1,this};function Ve(V,R){R.resumeScheduled||(R.resumeScheduled=!0,process.nextTick(Ge,V,R))}function Ge(V,R){o("resume",R.reading),R.reading||V.read(0),R.resumeScheduled=!1,V.emit("resume"),Le(V),R.flowing&&!R.reading&&V.read(0)}Z.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Le(V){var R=V._readableState;for(o("flow",R.flowing);R.flowing&&V.read()!==null;);}Z.prototype.wrap=function(V){var R=this,ce=this._readableState,Re=!1;V.on("end",function(){if(o("wrapped end"),ce.decoder&&!ce.ended){var g=ce.decoder.end();g&&g.length&&R.push(g)}R.push(null)}),V.on("data",function(g){if(o("wrapped data"),ce.decoder&&(g=ce.decoder.write(g)),!(ce.objectMode&&g==null)&&!(!ce.objectMode&&(!g||!g.length))){var ee=R.push(g);ee||(Re=!0,V.pause())}});for(var ke in V)this[ke]===void 0&&typeof V[ke]=="function"&&(this[ke]=function(ee){return function(){return V[ee].apply(V,arguments)}}(ke));for(var qe=0;qe<H.length;qe++)V.on(H[qe],this.emit.bind(this,H[qe]));return this._read=function(g){o("wrapped _read",g),Re&&(Re=!1,V.resume())},this},typeof Symbol=="function"&&(Z.prototype[Symbol.asyncIterator]=function(){return j===void 0&&(j=requireAsync_iterator()),j(this)}),Object.defineProperty(Z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Z.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Z.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),Z._fromList=Be,Object.defineProperty(Z.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Be(V,R){if(R.length===0)return null;var ce;return R.objectMode?ce=R.buffer.shift():!V||V>=R.length?(R.decoder?ce=R.buffer.join(""):R.buffer.length===1?ce=R.buffer.first():ce=R.buffer.concat(R.length),R.buffer.clear()):ce=R.buffer.consume(V,R.decoder),ce}function $e(V){var R=V._readableState;o("endReadable",R.endEmitted),R.endEmitted||(R.ended=!0,process.nextTick(he,R,V))}function he(V,R){if(o("endReadableNT",V.endEmitted,V.length),!V.endEmitted&&V.length===0&&(V.endEmitted=!0,R.readable=!1,R.emit("end"),V.autoDestroy)){var ce=R._writableState;(!ce||ce.autoDestroy&&ce.finished)&&R.destroy()}}typeof Symbol=="function"&&(Z.from=function(V,R){return K===void 0&&(K=requireFromBrowser()),K(Z,V,R)});function p(V,R){for(var ce=0,Re=V.length;ce<Re;ce++)if(V[ce]===R)return ce;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=a;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,r=t.ERR_MULTIPLE_CALLBACK,u=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,d=t.ERR_TRANSFORM_WITH_LENGTH_0,m=require_stream_duplex();requireInherits_browser()(a,m);function c(h,v){var E=this._transformState;E.transforming=!1;var y=E.writecb;if(y===null)return this.emit("error",new r);E.writechunk=null,E.writecb=null,v!=null&&this.push(v),y(h);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function a(h){if(!(this instanceof a))return new a(h);m.call(this,h),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",o)}function o(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(v,E){s(h,v,E)}):s(this,null,null)}a.prototype.push=function(h,v){return this._transformState.needTransform=!1,m.prototype.push.call(this,h,v)},a.prototype._transform=function(h,v,E){E(new e("_transform()"))},a.prototype._write=function(h,v,E){var y=this._transformState;if(y.writecb=E,y.writechunk=h,y.writeencoding=v,!y.transforming){var A=this._readableState;(y.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},a.prototype._read=function(h){var v=this._transformState;v.writechunk!==null&&!v.transforming?(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform)):v.needTransform=!0},a.prototype._destroy=function(h,v){m.prototype._destroy.call(this,h,function(E){v(E)})};function s(h,v,E){if(v)return h.emit("error",v);if(E!=null&&h.push(E),h._writableState.length)throw new d;if(h._transformState.transforming)throw new u;return h.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=e;var t=require_stream_transform();requireInherits_browser()(e,t);function e(r){if(!(this instanceof e))return new e(r);t.call(this,r)}return e.prototype._transform=function(r,u,d){d(null,r)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(E){var y=!1;return function(){y||(y=!0,E.apply(void 0,arguments))}}var r=requireErrorsBrowser().codes,u=r.ERR_MISSING_ARGS,d=r.ERR_STREAM_DESTROYED;function m(E){if(E)throw E}function c(E){return E.setHeader&&typeof E.abort=="function"}function a(E,y,A,w){w=e(w);var I=!1;E.on("close",function(){I=!0}),t===void 0&&(t=requireEndOfStream$1()),t(E,{readable:y,writable:A},function(S){if(S)return w(S);I=!0,w()});var _=!1;return function(S){if(!I&&!_){if(_=!0,c(E))return E.abort();if(typeof E.destroy=="function")return E.destroy();w(S||new d("pipe"))}}}function o(E){E()}function s(E,y){return E.pipe(y)}function h(E){return!E.length||typeof E[E.length-1]!="function"?m:E.pop()}function v(){for(var E=arguments.length,y=new Array(E),A=0;A<E;A++)y[A]=arguments[A];var w=h(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new u("streams");var I,_=y.map(function(S,j){var K=j<y.length-1,J=j>0;return a(S,K,J,function(H){I||(I=H),H&&_.forEach(o),!K&&(_.forEach(o),w(I))})});return y.reduce(s)}return pipeline_1=v,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough(),e.finished=requireEndOfStream$1(),e.pipeline=requirePipeline()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var once={exports:{}},wrappy_1,hasRequiredWrappy;function requireWrappy(){if(hasRequiredWrappy)return wrappy_1;hasRequiredWrappy=1,wrappy_1=t;function t(e,r){if(e&&r)return t(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(d){u[d]=e[d]}),u;function u(){for(var d=new Array(arguments.length),m=0;m<d.length;m++)d[m]=arguments[m];var c=e.apply(this,d),a=d[d.length-1];return typeof c=="function"&&c!==a&&Object.keys(a).forEach(function(o){c[o]=a[o]}),c}}return wrappy_1}var hasRequiredOnce;function requireOnce(){if(hasRequiredOnce)return once.exports;hasRequiredOnce=1;var t=requireWrappy();once.exports=t(e),once.exports.strict=t(r),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return r(this)},configurable:!0})});function e(u){var d=function(){return d.called?d.value:(d.called=!0,d.value=u.apply(this,arguments))};return d.called=!1,d}function r(u){var d=function(){if(d.called)throw new Error(d.onceError);return d.called=!0,d.value=u.apply(this,arguments)},m=u.name||"Function wrapped with `once`";return d.onceError=m+" shouldn't be called more than once",d.called=!1,d}return once.exports}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireOnce(),e=function(){},r=commonjsGlobal$4.Bare?queueMicrotask:process.nextTick.bind(process),u=function(c){return c.setHeader&&typeof c.abort=="function"},d=function(c){return c.stdio&&Array.isArray(c.stdio)&&c.stdio.length===3},m=function(c,a,o){if(typeof a=="function")return m(c,null,a);a||(a={}),o=t(o||e);var s=c._writableState,h=c._readableState,v=a.readable||a.readable!==!1&&c.readable,E=a.writable||a.writable!==!1&&c.writable,y=!1,A=function(){c.writable||w()},w=function(){E=!1,v||o.call(c)},I=function(){v=!1,E||o.call(c)},_=function(H){o.call(c,H?new Error("exited with error code: "+H):null)},S=function(H){o.call(c,H)},j=function(){r(K)},K=function(){if(!y){if(v&&!(h&&h.ended&&!h.destroyed))return o.call(c,new Error("premature close"));if(E&&!(s&&s.ended&&!s.destroyed))return o.call(c,new Error("premature close"))}},J=function(){c.req.on("finish",w)};return u(c)?(c.on("complete",w),c.on("abort",j),c.req?J():c.on("request",J)):E&&!s&&(c.on("end",A),c.on("close",A)),d(c)&&c.on("exit",_),c.on("end",I),c.on("finish",w),a.error!==!1&&c.on("error",S),c.on("close",j),function(){y=!0,c.removeListener("complete",w),c.removeListener("abort",j),c.removeListener("request",J),c.req&&c.req.removeListener("finish",w),c.removeListener("end",A),c.removeListener("close",A),c.removeListener("finish",w),c.removeListener("exit",_),c.removeListener("end",I),c.removeListener("error",S),c.removeListener("close",j)}};return endOfStream=m,endOfStream}var streamShift,hasRequiredStreamShift;function requireStreamShift(){if(hasRequiredStreamShift)return streamShift;hasRequiredStreamShift=1,streamShift=t;function t(r){var u=r._readableState;return u?u.objectMode||typeof r._duplexState=="number"?r.read():r.read(e(u)):null}function e(r){if(r.buffer.length){var u=r.bufferIndex||0;if(r.buffer.head)return r.buffer.head.data.length;if(r.buffer.length-u>0&&r.buffer[u])return r.buffer[u].length}return r.length}return streamShift}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;var t=requireReadableBrowser(),e=requireEndOfStream(),r=requireInherits_browser(),u=requireStreamShift(),d=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),m=function(E,y){E._corked?E.once("uncork",y):y()},c=function(E,y){E._autoDestroy&&E.destroy(y)},a=function(E,y){return function(A){A?c(E,A.message==="premature close"?null:A):y&&!E._ended&&E.end()}},o=function(E,y){if(!E||E._writableState&&E._writableState.finished)return y();if(E._writableState)return E.end(y);E.end(),y()},s=function(){},h=function(E){return new t.Readable({objectMode:!0,highWaterMark:16}).wrap(E)},v=function(E,y,A){if(!(this instanceof v))return new v(E,y,A);t.Duplex.call(this,A),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!A||A.autoDestroy!==!1,this._forwardDestroy=!A||A.destroy!==!1,this._forwardEnd=!A||A.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,E&&this.setWritable(E),y&&this.setReadable(y)};return r(v,t.Duplex),v.obj=function(E,y,A){return A||(A={}),A.objectMode=!0,A.highWaterMark=16,new v(E,y,A)},v.prototype.cork=function(){++this._corked===1&&this.emit("cork")},v.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},v.prototype.setWritable=function(E){if(this._unwrite&&this._unwrite(),this.destroyed){E&&E.destroy&&E.destroy();return}if(E===null||E===!1){this.end();return}var y=this,A=e(E,{writable:!0,readable:!1},a(this,this._forwardEnd)),w=function(){var _=y._ondrain;y._ondrain=null,_&&_()},I=function(){y._writable.removeListener("drain",w),A()};this._unwrite&&process.nextTick(w),this._writable=E,this._writable.on("drain",w),this._unwrite=I,this.uncork()},v.prototype.setReadable=function(E){if(this._unread&&this._unread(),this.destroyed){E&&E.destroy&&E.destroy();return}if(E===null||E===!1){this.push(null),this.resume();return}var y=this,A=e(E,{writable:!1,readable:!0},a(this)),w=function(){y._forward()},I=function(){y.push(null)},_=function(){y._readable2.removeListener("readable",w),y._readable2.removeListener("end",I),A()};this._drained=!0,this._readable=E,this._readable2=E._readableState?E:h(E),this._readable2.on("readable",w),this._readable2.on("end",I),this._unread=_,this._forward()},v.prototype._read=function(){this._drained=!0,this._forward()},v.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var E;this._drained&&(E=u(this._readable2))!==null;)this.destroyed||(this._drained=this.push(E));this._forwarding=!1}},v.prototype.destroy=function(E,y){if(y||(y=s),this.destroyed)return y(null);this.destroyed=!0;var A=this;process.nextTick(function(){A._destroy(E),y(null)})},v.prototype._destroy=function(E){if(E){var y=this._ondrain;this._ondrain=null,y?y(E):this.emit("error",E)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},v.prototype._write=function(E,y,A){if(!this.destroyed){if(this._corked)return m(this,this._write.bind(this,E,y,A));if(E===d)return this._finish(A);if(!this._writable)return A();this._writable.write(E)===!1?this._ondrain=A:this.destroyed||A()}},v.prototype._finish=function(E){var y=this;this.emit("preend"),m(this,function(){o(y._forwardEnd&&y._writable,function(){y._writableState.prefinished===!1&&(y._writableState.prefinished=!0),y.emit("prefinish"),m(y,E)})})},v.prototype.end=function(E,y,A){return typeof E=="function"?this.end(null,null,E):typeof y=="function"?this.end(E,null,y):(this._ended=!0,E&&this.write(E),!this._writableState.ending&&!this._writableState.destroyed&&this.write(d),t.Writable.prototype.end.call(this,A))},duplexify=v,duplexify}var hasRequiredUtil$5;function requireUtil$5(){return hasRequiredUtil$5||(hasRequiredUtil$5=1,function(t){/*!
 * Copyright 2022 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e=util$6&&util$6.__createBinding||(Object.create?function(Z,ie,ue,le){le===void 0&&(le=ue);var ne=Object.getOwnPropertyDescriptor(ie,ue);(!ne||("get"in ne?!ie.__esModule:ne.writable||ne.configurable))&&(ne={enumerable:!0,get:function(){return ie[ue]}}),Object.defineProperty(Z,le,ne)}:function(Z,ie,ue,le){le===void 0&&(le=ue),Z[le]=ie[ue]}),r=util$6&&util$6.__setModuleDefault||(Object.create?function(Z,ie){Object.defineProperty(Z,"default",{enumerable:!0,value:ie})}:function(Z,ie){Z.default=ie}),u=util$6&&util$6.__importStar||function(){var Z=function(ie){return Z=Object.getOwnPropertyNames||function(ue){var le=[];for(var ne in ue)Object.prototype.hasOwnProperty.call(ue,ne)&&(le[le.length]=ne);return le},Z(ie)};return function(ie){if(ie&&ie.__esModule)return ie;var ue={};if(ie!=null)for(var le=Z(ie),ne=0;ne<le.length;ne++)le[ne]!=="default"&&e(ue,ie,le[ne]);return r(ue,ie),ue}}(),d=util$6&&util$6.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(t,"__esModule",{value:!0}),t.util=t.Util=t.PartialFailureError=t.ApiError=t.GCCL_GCS_CMD_KEY=void 0;/*!
 * @module common/util
 */const m=requireSrc$9(),c=u(requireCommonjs()),a=requireSrc$b(),o=d(requireRetryRequest()),s=require$$1$3,h=requireSrc$6(),v=u(require$$6$1),E=requireService$2(),y=requireUtil$6(),A=d(requireDuplexify()),I=(0,requirePackageJsonHelper().getPackageJSON)();t.GCCL_GCS_CMD_KEY=Symbol.for("GCCL_GCS_CMD");const _={timeout:6e4,gzip:!0,forever:!0,pool:{maxSockets:1/0}},S=!0,j=3;class K extends Error{constructor(ie){if(super(),typeof ie!="object"){this.message=ie||"";return}const ue=ie;this.code=ue.code,this.errors=ue.errors,this.response=ue.response;try{this.errors=JSON.parse(this.response.body).error.errors}catch{this.errors=ue.errors}this.message=K.createMultiErrorMessage(ue,this.errors),Error.captureStackTrace(this)}static createMultiErrorMessage(ie,ue){const le=new Set;ie.message&&le.add(ie.message),ue&&ue.length?ue.forEach(({message:ye})=>le.add(ye)):ie.response&&ie.response.body?le.add(c.decode(ie.response.body.toString())):ie.message||le.add("A failure occurred during this request.");let ne=Array.from(le);return ne.length>1&&(ne=ne.map((ye,fe)=>`    ${fe+1}. ${ye}`),ne.unshift("Multiple errors occurred during the request. Please see the `errors` array for complete details.\n"),ne.push(`
`)),ne.join(`
`)}}t.ApiError=K;class J extends Error{constructor(ie){super();const ue=ie;this.errors=ue.errors,this.name="PartialFailureError",this.response=ue.response,this.message=K.createMultiErrorMessage(ue,this.errors)}}t.PartialFailureError=J;class H{constructor(){this.ApiError=K,this.PartialFailureError=J}noop(){}handleResp(ie,ue,le,ne){ne=ne||P.noop;const ye={err:ie||null,...ue&&P.parseHttpRespMessage(ue),...le&&P.parseHttpRespBody(le)};!ye.err&&ue&&typeof ye.body=="object"&&(ye.resp.body=ye.body),ye.err&&ue&&(ye.err.response=ue),ne(ye.err,ye.body,ye.resp)}parseHttpRespMessage(ie){const ue={resp:ie};return(ie.statusCode<200||ie.statusCode>299)&&(ue.err=new K({errors:new Array,code:ie.statusCode,message:ie.statusMessage,response:ie})),ue}parseHttpRespBody(ie){const ue={body:ie};if(typeof ie=="string")try{ue.body=JSON.parse(ie)}catch{ue.body=ie}return ue.body&&ue.body.error&&(ue.err=new K(ue.body.error)),ue}makeWritableStream(ie,ue,le){var ne;le=le||P.noop;const ye=new U;ye.on("progress",Se=>ie.emit("progress",Se)),ie.setWritable(ye);const fe={method:"POST",qs:{uploadType:"multipart"},timeout:0,maxRetries:0},Te=ue.metadata||{},Ae={...fe,...ue.request,qs:{...fe.qs,...(ne=ue.request)===null||ne===void 0?void 0:ne.qs},multipart:[{"Content-Type":"application/json",body:JSON.stringify(Te)},{"Content-Type":Te.contentType||"application/octet-stream",body:ye}]};ue.makeAuthenticatedRequest(Ae,{onAuthenticated(Se,be){if(Se){ie.destroy(Se);return}_.headers=P._getDefaultHeaders(Ae[t.GCCL_GCS_CMD_KEY]),h.teenyRequest.defaults(_)(be,(Ce,je,Fe)=>{P.handleResp(Ce,je,Fe,(Ve,Ge)=>{if(Ve){ie.destroy(Ve);return}ie.emit("response",je),le(Ge)})})}})}shouldRetryRequest(ie){if(ie){if([408,429,500,502,503,504].indexOf(ie.code)!==-1)return!0;if(ie.errors)for(const ue of ie.errors){const le=ue.reason;if(le==="rateLimitExceeded"||le==="userRateLimitExceeded"||le&&le.includes("EAI_AGAIN"))return!0}}return!1}makeAuthenticatedRequestFactory(ie){const ue={...ie};ue.projectId===E.DEFAULT_PROJECT_ID_TOKEN&&delete ue.projectId;let le;ue.authClient instanceof a.GoogleAuth?le=ue.authClient:le=new a.GoogleAuth({...ue,authClient:ue.authClient,clientOptions:ue.clientOptions});function ne(fe,Te){let Ae,Se;const be={...ie};let we;Te||(Ae=(0,A.default)(),be.stream=Ae);const Ce=typeof Te=="object"?Te:void 0,je=typeof Te=="function"?Te:void 0;async function Fe(){Se=await le.getProjectId()}const Ve=async(Le,Be)=>{const $e=Le,he=Le&&typeof Le.message=="string"&&Le.message.indexOf("Could not load the default credentials")>-1;if(he&&(Be=fe),!Le||he)try{Be=P.decorateRequest(Be,Se),Le=null}catch(p){if(p instanceof m.MissingProjectIdError)try{await Fe(),Be=P.decorateRequest(Be,Se),Le=null}catch(V){Le=Le||V}else Le=Le||p}if(Le){Ae?Ae.destroy(Le):(Ce&&Ce.onAuthenticated?Ce.onAuthenticated:je)(Le);return}Ce&&Ce.onAuthenticated?Ce.onAuthenticated(null,Be):we=P.makeRequest(Be,be,(p,...V)=>{p&&p.code===401&&$e&&(p=$e),je(p,...V)})};return(async()=>{try{const Le=async()=>ie.projectId&&ie.projectId!==E.DEFAULT_PROJECT_ID_TOKEN?ie.projectId:ie.projectIdRequired===!1?E.DEFAULT_PROJECT_ID_TOKEN:Fe(),Be=async()=>be.customEndpoint&&!be.useAuthWithCustomEndpoint?fe:le.authorizeRequest(fe),[$e,he]=await Promise.all([Le(),Be()]);return $e&&(Se=$e),Ve(null,he)}catch(Le){return Ve(Le)}})(),Ae||{abort(){setImmediate(()=>{we&&(we.abort(),we=null)})}}}const ye=ne;return ye.getCredentials=le.getCredentials.bind(le),ye.authClient=le,ye}makeRequest(ie,ue,le){var ne,ye,fe,Te,Ae;let Se=S;ue.autoRetry!==void 0?Se=ue.autoRetry:((ne=ue.retryOptions)===null||ne===void 0?void 0:ne.autoRetry)!==void 0&&(Se=ue.retryOptions.autoRetry);let be=j;ue.maxRetries!==void 0?be=ue.maxRetries:((ye=ue.retryOptions)===null||ye===void 0?void 0:ye.maxRetries)!==void 0&&(be=ue.retryOptions.maxRetries),_.headers=this._getDefaultHeaders(ie[t.GCCL_GCS_CMD_KEY]);const we={request:h.teenyRequest.defaults(_),retries:Se!==!1?be:0,noResponseRetries:Se!==!1?be:0,shouldRetryFn(Ve){var Ge,Le;const Be=P.parseHttpRespMessage(Ve).err;return!((Ge=ue.retryOptions)===null||Ge===void 0)&&Ge.retryableErrorFn?Be&&((Le=ue.retryOptions)===null||Le===void 0?void 0:Le.retryableErrorFn(Be)):Be&&P.shouldRetryRequest(Be)},maxRetryDelay:(fe=ue.retryOptions)===null||fe===void 0?void 0:fe.maxRetryDelay,retryDelayMultiplier:(Te=ue.retryOptions)===null||Te===void 0?void 0:Te.retryDelayMultiplier,totalTimeout:(Ae=ue.retryOptions)===null||Ae===void 0?void 0:Ae.totalTimeout};if(typeof ie.maxRetries=="number"&&(we.retries=ie.maxRetries,we.noResponseRetries=ie.maxRetries),!ue.stream)return(0,o.default)(ie,we,(Ve,Ge,Le)=>{P.handleResp(Ve,Ge,Le,le)});const Ce=ue.stream;let je;return(ie.method||"GET").toUpperCase()==="GET"?(je=(0,o.default)(ie,we),Ce.setReadable(je)):(je=we.request(ie),Ce.setWritable(je)),je.on("error",Ce.destroy.bind(Ce)).on("response",Ce.emit.bind(Ce,"response")).on("complete",Ce.emit.bind(Ce,"complete")),Ce.abort=je.abort,Ce}decorateRequest(ie,ue){return delete ie.autoPaginate,delete ie.autoPaginateVal,delete ie.objectMode,ie.qs!==null&&typeof ie.qs=="object"&&(delete ie.qs.autoPaginate,delete ie.qs.autoPaginateVal,ie.qs=(0,m.replaceProjectIdToken)(ie.qs,ue)),Array.isArray(ie.multipart)&&(ie.multipart=ie.multipart.map(le=>(0,m.replaceProjectIdToken)(le,ue))),ie.json!==null&&typeof ie.json=="object"&&(delete ie.json.autoPaginate,delete ie.json.autoPaginateVal,ie.json=(0,m.replaceProjectIdToken)(ie.json,ue)),ie.uri=(0,m.replaceProjectIdToken)(ie.uri,ue),ie}isCustomType(ie,ue){function le(Ae){return Ae.constructor&&Ae.constructor.name.toLowerCase()}const ne=ue.split("/"),ye=ne[0]&&ne[0].toLowerCase(),fe=ne[1]&&ne[1].toLowerCase();if(fe&&le(ie)!==fe)return!1;let Te=ie;for(;;){if(le(Te)===ye)return!0;if(Te=Te.parent,!Te)return!1}}maybeOptionsOrCallback(ie,ue){return typeof ie=="function"?[{},ie]:[ie,ue]}_getDefaultHeaders(ie){const ue={"User-Agent":(0,y.getUserAgentString)(),"x-goog-api-client":`${(0,y.getRuntimeTrackingString)()} gccl/${I.version}-${(0,y.getModuleFormat)()} gccl-invocation-id/${v.v4()}`};return ie&&(ue["x-goog-api-client"]+=` gccl-gcs-cmd/${ie}`),ue}}t.Util=H;class U extends s.Transform{constructor(){super(...arguments),this.bytesRead=0}_transform(ie,ue,le){this.bytesRead+=ie.length,this.emit("progress",{bytesWritten:this.bytesRead,contentLength:"*"}),this.push(ie),le()}}const P=new H;t.util=P}(util$6)),util$6}var hasRequiredService$2;function requireService$2(){return hasRequiredService$2||(hasRequiredService$2=1,function(t){var e={},r=service$2&&service$2.__createBinding||(Object.create?function(h,v,E,y){y===void 0&&(y=E);var A=Object.getOwnPropertyDescriptor(v,E);(!A||("get"in A?!v.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return v[E]}}),Object.defineProperty(h,y,A)}:function(h,v,E,y){y===void 0&&(y=E),h[y]=v[E]}),u=service$2&&service$2.__setModuleDefault||(Object.create?function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}:function(h,v){h.default=v}),d=service$2&&service$2.__importStar||function(){var h=function(v){return h=Object.getOwnPropertyNames||function(E){var y=[];for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(y[y.length]=A);return y},h(v)};return function(v){if(v&&v.__esModule)return v;var E={};if(v!=null)for(var y=h(v),A=0;A<y.length;A++)y[A]!=="default"&&r(E,v,y[A]);return u(E,v),E}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Service=t.DEFAULT_PROJECT_ID_TOKEN=void 0;/*!
 * Copyright 2022 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m=requireSrc$b(),c=d(require$$6$1),a=requireUtil$5(),o=requireUtil$6();t.DEFAULT_PROJECT_ID_TOKEN="{{projectId}}";class s{constructor(v,E={}){this.baseUrl=v.baseUrl,this.apiEndpoint=v.apiEndpoint,this.timeout=E.timeout,this.globalInterceptors=Array.isArray(E.interceptors_)?E.interceptors_:[],this.interceptors=[],this.packageJson=v.packageJson,this.projectId=E.projectId||t.DEFAULT_PROJECT_ID_TOKEN,this.projectIdRequired=v.projectIdRequired!==!1,this.providedUserAgent=E.userAgent,this.universeDomain=E.universeDomain||m.DEFAULT_UNIVERSE,this.customEndpoint=v.customEndpoint||!1,this.makeAuthenticatedRequest=a.util.makeAuthenticatedRequestFactory({...v,projectIdRequired:this.projectIdRequired,projectId:this.projectId,authClient:E.authClient||v.authClient,credentials:E.credentials,keyFile:E.keyFilename,email:E.email,clientOptions:{universeDomain:E.universeDomain,...E.clientOptions}}),this.authClient=this.makeAuthenticatedRequest.authClient,!!e.FUNCTION_NAME&&this.interceptors.push({request(A){return A.forever=!1,A}})}getRequestInterceptors(){return[].slice.call(this.globalInterceptors).concat(this.interceptors).filter(v=>typeof v.request=="function").map(v=>v.request)}getProjectId(v){if(!v)return this.getProjectIdAsync();this.getProjectIdAsync().then(E=>v(null,E),v)}async getProjectIdAsync(){const v=await this.authClient.getProjectId();return this.projectId===t.DEFAULT_PROJECT_ID_TOKEN&&v&&(this.projectId=v),this.projectId}request_(v,E){v={...v,timeout:this.timeout};const y=v.uri.indexOf("http")===0,A=[this.baseUrl];this.projectIdRequired&&(v.projectId?(A.push("projects"),A.push(v.projectId)):(A.push("projects"),A.push(this.projectId))),A.push(v.uri),y&&A.splice(0,A.indexOf(v.uri)),v.uri=A.map(j=>{const K=/^\/*|\/*$/g;return j.replace(K,"")}).join("/").replace(/\/:/g,":");const w=this.getRequestInterceptors();(Array.isArray(v.interceptors_)?v.interceptors_:[]).forEach(j=>{typeof j.request=="function"&&w.push(j.request)}),w.forEach(j=>{v=j(v)}),delete v.interceptors_;const _=this.packageJson;let S=(0,o.getUserAgentString)();if(this.providedUserAgent&&(S=`${this.providedUserAgent} ${S}`),v.headers={...v.headers,"User-Agent":S,"x-goog-api-client":`${(0,o.getRuntimeTrackingString)()} gccl/${_.version}-${(0,o.getModuleFormat)()} gccl-invocation-id/${c.v4()}`},v[a.GCCL_GCS_CMD_KEY]&&(v.headers["x-goog-api-client"]+=` gccl-gcs-cmd/${v[a.GCCL_GCS_CMD_KEY]}`),v.shouldReturnStream)return this.makeAuthenticatedRequest(v);this.makeAuthenticatedRequest(v,E)}request(v,E){s.prototype.request_.call(this,v,E)}requestStream(v){const E={...v,shouldReturnStream:!0};return s.prototype.request_.call(this,E)}}t.Service=s}(service$2)),service$2}var serviceObject={},src$4={},hasRequiredSrc$5;function requireSrc$5(){return hasRequiredSrc$5||(hasRequiredSrc$5=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.callbackifyAll=t.callbackify=t.promisifyAll=t.promisify=void 0;function e(m,c){if(m.promisified_)return m;c=c||{};const a=Array.prototype.slice,o=function(){let s;for(s=arguments.length-1;s>=0;s--){const E=arguments[s];if(!(typeof E>"u")){if(typeof E!="function")break;return m.apply(this,arguments)}}const h=a.call(arguments,0,s+1);let v=Promise;return this&&this.Promise&&(v=this.Promise),new v((E,y)=>{h.push((...A)=>{const w=a.call(A),I=w.shift();if(I)return y(I);c.singular&&w.length===1?E(w[0]):E(w)}),m.apply(this,h)})};return o.promisified_=!0,o}t.promisify=e;function r(m,c){const a=c&&c.exclude||[];Object.getOwnPropertyNames(m.prototype).filter(h=>!a.includes(h)&&typeof m.prototype[h]=="function"&&!/(^_|(Stream|_)|promise$)|^constructor$/.test(h)).forEach(h=>{const v=m.prototype[h];v.promisified_||(m.prototype[h]=t.promisify(v,c))})}t.promisifyAll=r;function u(m){if(m.callbackified_)return m;const c=function(){if(typeof arguments[arguments.length-1]!="function")return m.apply(this,arguments);const a=Array.prototype.pop.call(arguments);m.apply(this,arguments).then(o=>{o=Array.isArray(o)?o:[o],a(null,...o)},o=>a(o))};return c.callbackified_=!0,c}t.callbackify=u;function d(m,c){const a=c&&c.exclude||[];Object.getOwnPropertyNames(m.prototype).filter(h=>!a.includes(h)&&typeof m.prototype[h]=="function"&&!/^_|(Stream|_)|^constructor$/.test(h)).forEach(h=>{const v=m.prototype[h];v.callbackified_||(m.prototype[h]=t.callbackify(v))})}t.callbackifyAll=d}(src$4)),src$4}var hasRequiredServiceObject;function requireServiceObject(){if(hasRequiredServiceObject)return serviceObject;hasRequiredServiceObject=1,Object.defineProperty(serviceObject,"__esModule",{value:!0}),serviceObject.ServiceObject=void 0;/*!
 * Copyright 2022 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t=requireSrc$5(),e=require$$1$3,r=requireUtil$5();class u extends e.EventEmitter{constructor(m){super(),this.metadata={},this.baseUrl=m.baseUrl,this.parent=m.parent,this.id=m.id,this.createMethod=m.createMethod,this.methods=m.methods||{},this.interceptors=[],this.projectId=m.projectId,m.methods&&Object.getOwnPropertyNames(u.prototype).filter(c=>!/^request/.test(c)&&!/^getRequestInterceptors/.test(c)&&this[c]===u.prototype[c]&&!m.methods[c]).forEach(c=>{this[c]=void 0})}create(m,c){const a=this,o=[this.id];typeof m=="function"&&(c=m),typeof m=="object"&&o.push(m);function s(...h){const[v,E]=h;v||(a.metadata=E.metadata,a.id&&E.metadata&&(a.id=E.metadata.id),h[1]=a),c(...h)}o.push(s),this.createMethod.apply(null,o)}delete(m,c){var a;const[o,s]=r.util.maybeOptionsOrCallback(m,c),h=o.ignoreNotFound;delete o.ignoreNotFound;const v=typeof this.methods.delete=="object"&&this.methods.delete||{},E={method:"DELETE",uri:"",...v.reqOpts,qs:{...(a=v.reqOpts)===null||a===void 0?void 0:a.qs,...o}};u.prototype.request.call(this,E,(y,A,w)=>{y&&y.code===404&&h&&(y=null),s(y,w)})}exists(m,c){const[a,o]=r.util.maybeOptionsOrCallback(m,c);this.get(a,s=>{if(s){s.code===404?o(null,!1):o(s);return}o(null,!0)})}get(m,c){const a=this,[o,s]=r.util.maybeOptionsOrCallback(m,c),h=Object.assign({},o),v=h.autoCreate&&typeof this.create=="function";delete h.autoCreate;function E(y,A,w){if(y){if(y.code===409){a.get(h,s);return}s(y,null,w);return}s(null,A,w)}this.getMetadata(h,(y,A)=>{if(y){if(y.code===404&&v){const w=[];Object.keys(h).length>0&&w.push(h),w.push(E),a.create(...w);return}s(y,null,A);return}s(null,a,A)})}getMetadata(m,c){var a;const[o,s]=r.util.maybeOptionsOrCallback(m,c),h=typeof this.methods.getMetadata=="object"&&this.methods.getMetadata||{},v={uri:"",...h.reqOpts,qs:{...(a=h.reqOpts)===null||a===void 0?void 0:a.qs,...o}};u.prototype.request.call(this,v,(E,y,A)=>{this.metadata=y,s(E,this.metadata,A)})}getRequestInterceptors(){const m=this.interceptors.filter(c=>typeof c.request=="function").map(c=>c.request);return this.parent.getRequestInterceptors().concat(m)}setMetadata(m,c,a){var o,s;const[h,v]=r.util.maybeOptionsOrCallback(c,a),E=typeof this.methods.setMetadata=="object"&&this.methods.setMetadata||{},y={method:"PATCH",uri:"",...E.reqOpts,json:{...(o=E.reqOpts)===null||o===void 0?void 0:o.json,...m},qs:{...(s=E.reqOpts)===null||s===void 0?void 0:s.qs,...h}};u.prototype.request.call(this,y,(A,w,I)=>{this.metadata=w,v(A,this.metadata,I)})}request_(m,c){m={...m},this.projectId&&(m.projectId=this.projectId);const a=m.uri.indexOf("http")===0,o=[this.baseUrl,this.id||"",m.uri];a&&o.splice(0,o.indexOf(m.uri)),m.uri=o.filter(v=>v.trim()).map(v=>{const E=/^\/*|\/*$/g;return v.replace(E,"")}).join("/");const s=Array.isArray(m.interceptors_)?m.interceptors_:[],h=[].slice.call(this.interceptors);if(m.interceptors_=s.concat(h),m.shouldReturnStream)return this.parent.requestStream(m);this.parent.request(m,c)}request(m,c){this.request_(m,c)}requestStream(m){const c={...m,shouldReturnStream:!0};return this.request_(c)}}return serviceObject.ServiceObject=u,(0,t.promisifyAll)(u,{exclude:["getRequestInterceptors"]}),serviceObject}var hasRequiredNodejsCommon;function requireNodejsCommon(){return hasRequiredNodejsCommon||(hasRequiredNodejsCommon=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.util=t.ApiError=t.ServiceObject=t.Service=void 0;var e=requireService$2();Object.defineProperty(t,"Service",{enumerable:!0,get:function(){return e.Service}});var r=requireServiceObject();Object.defineProperty(t,"ServiceObject",{enumerable:!0,get:function(){return r.ServiceObject}});var u=requireUtil$5();Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return u.ApiError}}),Object.defineProperty(t,"util",{enumerable:!0,get:function(){return u.util}})}(nodejsCommon)),nodejsCommon}var storage$1={},src$3={},arrify_1,hasRequiredArrify;function requireArrify(){return hasRequiredArrify||(hasRequiredArrify=1,arrify_1=e=>e==null?[]:Array.isArray(e)?e:typeof e=="string"?[e]:typeof e[Symbol.iterator]=="function"?[...e]:[e]),arrify_1}var resourceStream={},hasRequiredResourceStream;function requireResourceStream(){if(hasRequiredResourceStream)return resourceStream;hasRequiredResourceStream=1;/*!
 * Copyright 2019 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(resourceStream,"__esModule",{value:!0}),resourceStream.ResourceStream=void 0;const t=require$$1$3;class e extends t.Transform{constructor(u,d){const m=Object.assign({objectMode:!0},u.streamOptions);super(m),this._ended=!1,this._maxApiCalls=u.maxApiCalls===-1?1/0:u.maxApiCalls,this._nextQuery=u.query,this._reading=!1,this._requestFn=d,this._requestsMade=0,this._resultsToSend=u.maxResults===-1?1/0:u.maxResults,this._otherArgs=[]}end(...u){return this._ended=!0,super.end(...u)}_read(){if(!this._reading){this._reading=!0;try{this._requestFn(this._nextQuery,(u,d,m,...c)=>{if(u){this.destroy(u);return}this._otherArgs=c,this._nextQuery=m,this._resultsToSend!==1/0&&(d=d.splice(0,this._resultsToSend),this._resultsToSend-=d.length);let a=!0;for(const h of d){if(this._ended)break;a=this.push(h)}const o=!this._nextQuery||this._resultsToSend<1,s=++this._requestsMade>=this._maxApiCalls;(o||s)&&this.end(),a&&!this._ended&&setImmediate(()=>this._read()),this._reading=!1})}catch(u){this.destroy(u)}}}}return resourceStream.ResourceStream=e,resourceStream}var hasRequiredSrc$4;function requireSrc$4(){return hasRequiredSrc$4||(hasRequiredSrc$4=1,function(t){/*!
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceStream=t.paginator=t.Paginator=void 0;/*!
 * @module common/paginator
 */const e=requireArrify(),r=requireExtend(),u=requireResourceStream();Object.defineProperty(t,"ResourceStream",{enumerable:!0,get:function(){return u.ResourceStream}});/*! Developer Documentation
 *
 * paginator is used to auto-paginate `nextQuery` methods as well as
 * streamifying them.
 *
 * Before:
 *
 *   search.query('done=true', function(err, results, nextQuery) {
 *     search.query(nextQuery, function(err, results, nextQuery) {});
 *   });
 *
 * After:
 *
 *   search.query('done=true', function(err, results) {});
 *
 * Methods to extend should be written to accept callbacks and return a
 * `nextQuery`.
 */class d{extend(a,o){o=e(o),o.forEach(s=>{const h=a.prototype[s];a.prototype[s+"_"]=h,a.prototype[s]=function(...v){const E=m.parseArguments_(v);return m.run_(E,h.bind(this))}})}streamify(a){return function(...o){const s=m.parseArguments_(o),h=this[a+"_"]||this[a];return m.runAsStream_(s,h.bind(this))}}parseArguments_(a){let o,s=!0,h=-1,v=-1,E;const y=a[0],A=a[a.length-1];typeof y=="function"?E=y:o=y,typeof A=="function"&&(E=A),typeof o=="object"&&(o=r(!0,{},o),o.maxResults&&typeof o.maxResults=="number"?v=o.maxResults:typeof o.pageSize=="number"&&(v=o.pageSize),o.maxApiCalls&&typeof o.maxApiCalls=="number"&&(h=o.maxApiCalls,delete o.maxApiCalls),(v!==-1||o.autoPaginate===!1)&&(s=!1));const w={query:o||{},autoPaginate:s,maxApiCalls:h,maxResults:v,callback:E};return w.streamOptions=r(!0,{},w.query),delete w.streamOptions.autoPaginate,delete w.streamOptions.maxResults,delete w.streamOptions.pageSize,w}run_(a,o){const s=a.query,h=a.callback;if(!a.autoPaginate)return o(s,h);const v=new Array;let E=[];const y=new Promise((A,w)=>{const I=m.runAsStream_(a,o);I.on("error",w).on("data",_=>v.push(_)).on("end",()=>{E=I._otherArgs||[],A(v)})});if(!h)return y.then(A=>[A,s,...E]);y.then(A=>h(null,A,s,...E),A=>h(A))}runAsStream_(a,o){return new u.ResourceStream(a,o)}}t.Paginator=d;const m=new d;t.paginator=m}(src$3)),src$3}var bucket={},Mime_1,hasRequiredMime$1;function requireMime$1(){if(hasRequiredMime$1)return Mime_1;hasRequiredMime$1=1;function t(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}return t.prototype.define=function(e,r){for(let u in e){let d=e[u].map(function(m){return m.toLowerCase()});u=u.toLowerCase();for(let m=0;m<d.length;m++){const c=d[m];if(c[0]!=="*"){if(!r&&c in this._types)throw new Error('Attempt to change mapping for "'+c+'" extension from "'+this._types[c]+'" to "'+u+'". Pass `force=true` to allow this, otherwise remove "'+c+'" from the list of extensions for "'+u+'".');this._types[c]=u}}if(r||!this._extensions[u]){const m=d[0];this._extensions[u]=m[0]!=="*"?m:m.substr(1)}}},t.prototype.getType=function(e){e=String(e);let r=e.replace(/^.*[/\\]/,"").toLowerCase(),u=r.replace(/^.*\./,"").toLowerCase(),d=r.length<e.length;return(u.length<r.length-1||!d)&&this._types[u]||null},t.prototype.getExtension=function(e){return e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1,e&&this._extensions[e.toLowerCase()]||null},Mime_1=t,Mime_1}var standard,hasRequiredStandard;function requireStandard(){return hasRequiredStandard||(hasRequiredStandard=1,standard={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}),standard}var other,hasRequiredOther;function requireOther(){return hasRequiredOther||(hasRequiredOther=1,other={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}),other}var mime,hasRequiredMime;function requireMime(){if(hasRequiredMime)return mime;hasRequiredMime=1;let t=requireMime$1();return mime=new t(requireStandard(),requireOther()),mime}var yoctoQueue,hasRequiredYoctoQueue;function requireYoctoQueue(){if(hasRequiredYoctoQueue)return yoctoQueue;hasRequiredYoctoQueue=1;class t{constructor(u){this.value=u,this.next=void 0}}class e{constructor(){this.clear()}enqueue(u){const d=new t(u);this._head?(this._tail.next=d,this._tail=d):(this._head=d,this._tail=d),this._size++}dequeue(){const u=this._head;if(u)return this._head=this._head.next,this._size--,u.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let u=this._head;for(;u;)yield u.value,u=u.next}}return yoctoQueue=e,yoctoQueue}var pLimit_1,hasRequiredPLimit;function requirePLimit(){if(hasRequiredPLimit)return pLimit_1;hasRequiredPLimit=1;const t=requireYoctoQueue();return pLimit_1=r=>{if(!((Number.isInteger(r)||r===1/0)&&r>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const u=new t;let d=0;const m=()=>{d--,u.size>0&&u.dequeue()()},c=async(s,h,...v)=>{d++;const E=(async()=>s(...v))();h(E);try{await E}catch{}m()},a=(s,h,...v)=>{u.enqueue(c.bind(null,s,h,...v)),(async()=>(await Promise.resolve(),d<r&&u.size>0&&u.dequeue()()))()},o=(s,...h)=>new Promise(v=>{a(s,v,...h)});return Object.defineProperties(o,{activeCount:{get:()=>d},pendingCount:{get:()=>u.size},clearQueue:{value:()=>{u.clear()}}}),o},pLimit_1}var retry$1={},retry_operation,hasRequiredRetry_operation;function requireRetry_operation(){if(hasRequiredRetry_operation)return retry_operation;hasRequiredRetry_operation=1;function t(e,r){typeof r=="boolean"&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return retry_operation=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var r=new Date().getTime();if(e&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var u=this._timeouts.shift();if(u===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),u=this._cachedTimeouts.slice(-1);else return!1;var d=this;return this._timer=setTimeout(function(){d._attempts++,d._operationTimeoutCb&&(d._timeout=setTimeout(function(){d._operationTimeoutCb(d._attempts)},d._operationTimeout),d._options.unref&&d._timeout.unref()),d._fn(d._attempts)},u),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,r){this._fn=e,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var u=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){u._operationTimeoutCb()},u._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},r=null,u=0,d=0;d<this._errors.length;d++){var m=this._errors[d],c=m.message,a=(e[c]||0)+1;e[c]=a,a>=u&&(r=m,u=a)}return r},retry_operation}var hasRequiredRetry$1;function requireRetry$1(){return hasRequiredRetry$1||(hasRequiredRetry$1=1,function(t){var e=requireRetry_operation();t.operation=function(r){var u=t.timeouts(r);return new e(u,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var u={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var d in r)u[d]=r[d];if(u.minTimeout>u.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var m=[],c=0;c<u.retries;c++)m.push(this.createTimeout(c,u));return r&&r.forever&&!m.length&&m.push(this.createTimeout(c,u)),m.sort(function(a,o){return a-o}),m},t.createTimeout=function(r,u){var d=u.randomize?Math.random()+1:1,m=Math.round(d*Math.max(u.minTimeout,1)*Math.pow(u.factor,r));return m=Math.min(m,u.maxTimeout),m},t.wrap=function(r,u,d){if(u instanceof Array&&(d=u,u=null),!d){d=[];for(var m in r)typeof r[m]=="function"&&d.push(m)}for(var c=0;c<d.length;c++){var a=d[c],o=r[a];r[a]=(function(h){var v=t.operation(u),E=Array.prototype.slice.call(arguments,1),y=E.pop();E.push(function(A){v.retry(A)||(A&&(arguments[0]=v.mainError()),y.apply(this,arguments))}),v.attempt(function(){h.apply(r,E)})}).bind(r,o),r[a].options=u}}}(retry$1)),retry$1}var retry,hasRequiredRetry;function requireRetry(){return hasRequiredRetry||(hasRequiredRetry=1,retry=requireRetry$1()),retry}var lib$1,hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$1;hasRequiredLib$1=1;var t=requireRetry();function e(r,u){function d(m,c){var a=u||{},o;"randomize"in a||(a.randomize=!0),o=t.operation(a);function s(E){c(E||new Error("Aborted"))}function h(E,y){if(E.bail){s(E);return}o.retry(E)?a.onRetry&&a.onRetry(E,y):c(o.mainError())}function v(E){var y;try{y=r(s,E)}catch(A){h(A,E);return}Promise.resolve(y).then(m).catch(function(w){h(w,E)})}o.attempt(v)}return new Promise(d)}return lib$1=e,lib$1}var acl={},hasRequiredAcl;function requireAcl(){if(hasRequiredAcl)return acl;hasRequiredAcl=1,Object.defineProperty(acl,"__esModule",{value:!0}),acl.AclRoleAccessorMethods=acl.Acl=void 0;const t=requireSrc$5();class e{constructor(){this.owners={},this.readers={},this.writers={},this.owners={},this.readers={},this.writers={},e.roles.forEach(this._assignAccessMethods.bind(this))}_assignAccessMethods(d){const m=e.accessMethods,c=e.entities,a=d.toLowerCase()+"s";this[a]=c.reduce((o,s)=>{const h=s.charAt(s.length-1)==="-";return m.forEach(v=>{let E=v+s[0].toUpperCase()+s.substring(1);h&&(E=E.replace("-","")),o[E]=(y,A,w)=>{let I;typeof A=="function"&&(w=A,A={}),h?I=s+y:(I=s,w=y),A=Object.assign({entity:I,role:d},A);const _=[A];return typeof w=="function"&&_.push(w),this[v].apply(this,_)}}),o},{})}}acl.AclRoleAccessorMethods=e,e.accessMethods=["add","delete"],e.entities=["allAuthenticatedUsers","allUsers","domain-","group-","project-","user-"],e.roles=["OWNER","READER","WRITER"];class r extends e{constructor(d){super(),this.pathPrefix=d.pathPrefix,this.request_=d.request}add(d,m){const c={};d.generation&&(c.generation=d.generation),d.userProject&&(c.userProject=d.userProject),this.request({method:"POST",uri:"",qs:c,maxRetries:0,json:{entity:d.entity,role:d.role.toUpperCase()}},(a,o)=>{if(a){m(a,null,o);return}m(null,this.makeAclObject_(o),o)})}delete(d,m){const c={};d.generation&&(c.generation=d.generation),d.userProject&&(c.userProject=d.userProject),this.request({method:"DELETE",uri:"/"+encodeURIComponent(d.entity),qs:c},(a,o)=>{m(a,o)})}get(d,m){const c=typeof d=="object"?d:null,a=typeof d=="function"?d:m;let o="";const s={};c&&(o="/"+encodeURIComponent(c.entity),c.generation&&(s.generation=c.generation),c.userProject&&(s.userProject=c.userProject)),this.request({uri:o,qs:s},(h,v)=>{if(h){a(h,null,v);return}let E;v.items?E=v.items.map(this.makeAclObject_):E=this.makeAclObject_(v),a(null,E,v)})}update(d,m){const c={};d.generation&&(c.generation=d.generation),d.userProject&&(c.userProject=d.userProject),this.request({method:"PUT",uri:"/"+encodeURIComponent(d.entity),qs:c,json:{role:d.role.toUpperCase()}},(a,o)=>{if(a){m(a,null,o);return}m(null,this.makeAclObject_(o),o)})}makeAclObject_(d){const m={entity:d.entity,role:d.role};return d.projectTeam&&(m.projectTeam=d.projectTeam),m}request(d,m){d.uri=this.pathPrefix+d.uri,this.request_(d,m)}}acl.Acl=r;/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */return(0,t.promisifyAll)(r,{exclude:["request"]}),acl}var file={},resumableUpload={},browser$1={exports:{}},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1.exports;hasRequiredBrowser=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=t,browser$1.exports.AbortSignal=e,browser$1.exports.default=t,browser$1.exports}var hasRequiredResumableUpload;function requireResumableUpload(){return hasRequiredResumableUpload||(hasRequiredResumableUpload=1,function(t){var e=resumableUpload&&resumableUpload.__createBinding||(Object.create?function(le,ne,ye,fe){fe===void 0&&(fe=ye);var Te=Object.getOwnPropertyDescriptor(ne,ye);(!Te||("get"in Te?!ne.__esModule:Te.writable||Te.configurable))&&(Te={enumerable:!0,get:function(){return ne[ye]}}),Object.defineProperty(le,fe,Te)}:function(le,ne,ye,fe){fe===void 0&&(fe=ye),le[fe]=ne[ye]}),r=resumableUpload&&resumableUpload.__setModuleDefault||(Object.create?function(le,ne){Object.defineProperty(le,"default",{enumerable:!0,value:ne})}:function(le,ne){le.default=ne}),u=resumableUpload&&resumableUpload.__importStar||function(){var le=function(ne){return le=Object.getOwnPropertyNames||function(ye){var fe=[];for(var Te in ye)Object.prototype.hasOwnProperty.call(ye,Te)&&(fe[fe.length]=Te);return fe},le(ne)};return function(ne){if(ne&&ne.__esModule)return ne;var ye={};if(ne!=null)for(var fe=le(ne),Te=0;Te<fe.length;Te++)fe[Te]!=="default"&&e(ye,ne,fe[Te]);return r(ye,ne),ye}}(),d=resumableUpload&&resumableUpload.__classPrivateFieldSet||function(le,ne,ye,fe,Te){if(fe==="m")throw new TypeError("Private method is not writable");if(fe==="a"&&!Te)throw new TypeError("Private accessor was defined without a setter");if(typeof ne=="function"?le!==ne||!Te:!ne.has(le))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fe==="a"?Te.call(le,ye):Te?Te.value=ye:ne.set(le,ye),ye},m=resumableUpload&&resumableUpload.__classPrivateFieldGet||function(le,ne,ye,fe){if(ye==="a"&&!fe)throw new TypeError("Private accessor was defined without a getter");if(typeof ne=="function"?le!==ne||!fe:!ne.has(le))throw new TypeError("Cannot read private member from an object whose class did not declare it");return ye==="m"?fe:ye==="a"?fe.call(le):fe?fe.value:ne.get(le)},c=resumableUpload&&resumableUpload.__importDefault||function(le){return le&&le.__esModule?le:{default:le}},a,o,s,h;Object.defineProperty(t,"__esModule",{value:!0}),t.Upload=t.PROTOCOL_REGEX=void 0,t.upload=Z,t.createURI=ie,t.checkUploadStatus=ue;const v=c(requireBrowser()),E=require$$1$3,y=u(requireSrc$f()),A=requireSrc$b(),w=require$$1$3,I=c(requireLib$1()),_=u(require$$6$1),S=requireUtil$6(),j=requireUtil$5(),K=requirePackageJsonHelper(),J=404,H=308,U=(0,K.getPackageJSON)();t.PROTOCOL_REGEX=/^(\w*):\/\//;class P extends w.Writable{constructor(ne){var ye;if(super(ne),a.add(this),this.numBytesWritten=0,this.numRetries=0,this.currentInvocationId={checkUploadStatus:_.v4(),chunk:_.v4(),uri:_.v4()},this.writeBuffers=[],this.numChunksReadInRequest=0,this.localWriteCache=[],this.localWriteCacheByteLength=0,this.upstreamEnded=!1,o.set(this,void 0),ne=ne||{},!ne.bucket||!ne.file)throw new Error("A bucket and file name are required");if(ne.offset&&!ne.uri)throw new RangeError("Cannot provide an `offset` without providing a `uri`");if(ne.isPartialUpload&&!ne.chunkSize)throw new RangeError("Cannot set `isPartialUpload` without providing a `chunkSize`");ne.authConfig=ne.authConfig||{},ne.authConfig.scopes=["https://www.googleapis.com/auth/devstorage.full_control"],this.authClient=ne.authClient||new A.GoogleAuth(ne.authConfig);const fe=ne.universeDomain||A.DEFAULT_UNIVERSE;if(this.apiEndpoint=`https://storage.${fe}`,ne.apiEndpoint&&ne.apiEndpoint!==this.apiEndpoint){this.apiEndpoint=this.sanitizeEndpoint(ne.apiEndpoint);const be=new URL(this.apiEndpoint).hostname,we=be===fe,Ce=be===A.DEFAULT_UNIVERSE,je=be.slice(-(fe.length+1))===`.${fe}`,Fe=be.slice(-(A.DEFAULT_UNIVERSE.length+1))===`.${A.DEFAULT_UNIVERSE}`;!we&&!Ce&&!je&&!Fe&&(this.authClient=y)}this.baseURI=`${this.apiEndpoint}/upload/storage/v1/b`,this.bucket=ne.bucket;const Te=[ne.bucket,ne.file];if(typeof ne.generation=="number"&&Te.push(`${ne.generation}`),this.cacheKey=Te.join("/"),this.customRequestOptions=ne.customRequestOptions||{},this.file=ne.file,this.generation=ne.generation,this.kmsKeyName=ne.kmsKeyName,this.metadata=ne.metadata||{},this.offset=ne.offset,this.origin=ne.origin,this.params=ne.params||{},this.userProject=ne.userProject,this.chunkSize=ne.chunkSize,this.retryOptions=ne.retryOptions,this.isPartialUpload=(ye=ne.isPartialUpload)!==null&&ye!==void 0?ye:!1,ne.key)if(typeof ne.key=="string"){const be=Buffer.from(ne.key).toString("base64");this.encryption={key:be,hash:(0,E.createHash)("sha256").update(ne.key).digest("base64")}}else{const be=ne.key.toString("base64");this.encryption={key:be,hash:(0,E.createHash)("sha256").update(ne.key).digest("base64")}}this.predefinedAcl=ne.predefinedAcl,ne.private&&(this.predefinedAcl="private"),ne.public&&(this.predefinedAcl="publicRead");const Ae=ne.retryOptions.autoRetry;this.uriProvidedManually=!!ne.uri,this.uri=ne.uri,this.offset&&(this.numBytesWritten=this.offset),this.numRetries=0,Ae||(ne.retryOptions.maxRetries=0),this.timeOfFirstRequest=Date.now();const Se=ne.metadata?Number(ne.metadata.contentLength):NaN;this.contentLength=isNaN(Se)?"*":Se,d(this,o,ne[j.GCCL_GCS_CMD_KEY],"f"),this.once("writing",()=>{this.uri?this.continueUploading():this.createURI(be=>{if(be)return this.destroy(be);this.startUploading()})})}_final(ne=()=>{}){this.upstreamEnded=!0,this.once("uploadFinished",ne),process.nextTick(()=>{this.emit("upstreamFinished"),this.emit("writing")})}_write(ne,ye,fe=()=>{}){this.emit("writing"),this.writeBuffers.push(typeof ne=="string"?Buffer.from(ne,ye):ne),this.once("readFromChunkBuffer",fe),process.nextTick(()=>this.emit("wroteToChunkBuffer"))}prependLocalBufferToUpstream(ne){let ye=[];if(ne){let Te=0;for(;ne>Te;){let Ae=this.localWriteCache.pop();if(!Ae)break;if(Te+=Ae.byteLength,Te>ne){const Se=Te-ne;Ae=Ae.subarray(Se),Te-=Se}ye.unshift(Ae)}}else ye=this.localWriteCache;const fe=this.writeBuffers;this.writeBuffers=ye;for(const Te of fe)this.writeBuffers.push(Te);m(this,a,"m",s).call(this)}*pullFromChunkBuffer(ne){for(;ne;){const ye=this.writeBuffers.shift();if(!ye)break;let fe=ye;ye.byteLength>ne?(fe=ye.subarray(0,ne),this.writeBuffers.unshift(ye.subarray(ne)),ne=0):ne-=ye.byteLength,yield fe,this.emit("readFromChunkBuffer")}}async waitForNextChunk(){return await new Promise(ye=>{if(this.writeBuffers.length)return ye(!0);if(this.upstreamEnded)return ye(!1);const fe=()=>(Ae(),ye(!0)),Te=()=>(Ae(),this.writeBuffers.length?ye(!0):ye(!1)),Ae=()=>{this.removeListener("wroteToChunkBuffer",fe),this.removeListener("upstreamFinished",Te)};this.once("wroteToChunkBuffer",fe),this.once("upstreamFinished",Te)})}async*upstreamIterator(ne=1/0){for(;ne&&await this.waitForNextChunk();)for(const ye of this.pullFromChunkBuffer(ne))ne-=ye.byteLength,yield ye}createURI(ne){if(!ne)return this.createURIAsync();this.createURIAsync().then(ye=>ne(null,ye),ne)}async createURIAsync(){const ne={...this.metadata},ye={};ne.contentLength&&(ye["X-Upload-Content-Length"]=ne.contentLength.toString(),delete ne.contentLength),ne.contentType&&(ye["X-Upload-Content-Type"]=ne.contentType,delete ne.contentType);let fe=`${(0,S.getRuntimeTrackingString)()} gccl/${U.version}-${(0,S.getModuleFormat)()} gccl-invocation-id/${this.currentInvocationId.uri}`;m(this,o,"f")&&(fe+=` gccl-gcs-cmd/${m(this,o,"f")}`);const Te={method:"POST",url:[this.baseURI,this.bucket,"o"].join("/"),params:Object.assign({name:this.file,uploadType:"resumable"},this.params),data:ne,headers:{"User-Agent":(0,S.getUserAgentString)(),"x-goog-api-client":fe,...ye}};ne.contentLength&&(Te.headers["X-Upload-Content-Length"]=ne.contentLength.toString()),ne.contentType&&(Te.headers["X-Upload-Content-Type"]=ne.contentType),typeof this.generation<"u"&&(Te.params.ifGenerationMatch=this.generation),this.kmsKeyName&&(Te.params.kmsKeyName=this.kmsKeyName),this.predefinedAcl&&(Te.params.predefinedAcl=this.predefinedAcl),this.origin&&(Te.headers.Origin=this.origin);const Ae=await(0,I.default)(async Se=>{var be,we,Ce;try{const je=await this.makeRequest(Te);return this.currentInvocationId.uri=_.v4(),je.headers.location}catch(je){const Fe=je,Ve={code:(be=Fe.response)===null||be===void 0?void 0:be.status,name:(we=Fe.response)===null||we===void 0?void 0:we.statusText,message:(Ce=Fe.response)===null||Ce===void 0?void 0:Ce.statusText,errors:[{reason:Fe.code}]};if(this.retryOptions.maxRetries>0&&this.retryOptions.retryableErrorFn(Ve))throw Fe;return Se(Fe)}},{retries:this.retryOptions.maxRetries,factor:this.retryOptions.retryDelayMultiplier,maxTimeout:this.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.retryOptions.totalTimeout*1e3});return this.uri=Ae,this.offset=0,this.emit("uri",Ae),Ae}async continueUploading(){var ne;return(ne=this.offset)!==null&&ne!==void 0||await this.getAndSetOffset(),this.startUploading()}async startUploading(){const ne=!!this.chunkSize;let ye=!1;if(this.numChunksReadInRequest=0,this.offset||(this.offset=0),this.offset<this.numBytesWritten){const Ce=this.numBytesWritten-this.offset,je=`The offset is lower than the number of bytes written. The server has ${this.offset} bytes and while ${this.numBytesWritten} bytes has been uploaded - thus ${Ce} bytes are missing. Stopping as this could result in data loss. Initiate a new upload to continue.`;this.emit("error",new RangeError(je));return}if(this.numBytesWritten<this.offset){const Ce=this.offset-this.numBytesWritten;for await(const je of this.upstreamIterator(Ce));this.numBytesWritten=this.offset}let fe;typeof this.contentLength=="number"&&(fe=this.contentLength-this.numBytesWritten),this.chunkSize&&(fe=fe?Math.min(this.chunkSize,fe):this.chunkSize);const Te=this.upstreamIterator(fe),Ae=new w.Readable({read:async()=>{ye&&Ae.push(null);const Ce=await Te.next();Ce.value&&(this.numChunksReadInRequest++,ne?m(this,a,"m",h).call(this,Ce.value):(m(this,a,"m",s).call(this),m(this,a,"m",h).call(this,Ce.value)),this.numBytesWritten+=Ce.value.byteLength,this.emit("progress",{bytesWritten:this.numBytesWritten,contentLength:this.contentLength}),Ae.push(Ce.value)),Ce.done&&Ae.push(null)}});let Se=`${(0,S.getRuntimeTrackingString)()} gccl/${U.version}-${(0,S.getModuleFormat)()} gccl-invocation-id/${this.currentInvocationId.chunk}`;m(this,o,"f")&&(Se+=` gccl-gcs-cmd/${m(this,o,"f")}`);const be={"User-Agent":(0,S.getUserAgentString)(),"x-goog-api-client":Se};if(ne){for await(const Ge of this.upstreamIterator(fe))m(this,a,"m",h).call(this,Ge);const Ce=this.localWriteCacheByteLength,je=!await this.waitForNextChunk();this.prependLocalBufferToUpstream();let Fe=this.contentLength;typeof this.contentLength!="number"&&je&&!this.isPartialUpload&&(Fe=Ce+this.numBytesWritten);const Ve=Ce+this.numBytesWritten-1;be["Content-Length"]=Ce,be["Content-Range"]=`bytes ${this.offset}-${Ve}/${Fe}`}else be["Content-Range"]=`bytes ${this.offset}-*/${this.contentLength}`;const we={method:"PUT",url:this.uri,headers:be,body:Ae};try{const Ce=await this.makeRequestStream(we);Ce&&(ye=!0,await this.responseHandler(Ce))}catch(Ce){const je=Ce;if(this.retryOptions.retryableErrorFn(je)){this.attemptDelayedRetry({status:NaN,data:je});return}this.destroy(je)}}async responseHandler(ne){if(ne.data.error){this.destroy(ne.data.error);return}this.currentInvocationId.chunk=_.v4();const ye=await this.waitForNextChunk(),fe=this.chunkSize&&ne.status===H&&ne.headers.range&&ye,Te=this.isPartialUpload&&ne.status===H&&!ye;if(fe){const Ae=ne.headers.range;this.offset=Number(Ae.split("-")[1])+1;const Se=this.numBytesWritten-this.offset;Se?(this.prependLocalBufferToUpstream(Se),this.numBytesWritten-=Se):m(this,a,"m",s).call(this),this.continueUploading()}else if(!this.isSuccessfulResponse(ne.status)&&!Te){const Ae=new Error("Upload failed");Ae.code=ne.status,Ae.name="Upload failed",ne?.data&&(Ae.errors=[ne?.data]),this.destroy(Ae)}else m(this,a,"m",s).call(this),ne&&ne.data&&(ne.data.size=Number(ne.data.size)),this.emit("metadata",ne.data),this.emit("uploadFinished")}async checkUploadStatus(ne={}){let ye=`${(0,S.getRuntimeTrackingString)()} gccl/${U.version}-${(0,S.getModuleFormat)()} gccl-invocation-id/${this.currentInvocationId.checkUploadStatus}`;m(this,o,"f")&&(ye+=` gccl-gcs-cmd/${m(this,o,"f")}`);const fe={method:"PUT",url:this.uri,headers:{"Content-Length":0,"Content-Range":"bytes */*","User-Agent":(0,S.getUserAgentString)(),"x-goog-api-client":ye}};try{const Te=await this.makeRequest(fe);return this.currentInvocationId.checkUploadStatus=_.v4(),Te}catch(Te){if(ne.retry===!1||!(Te instanceof Error)||!this.retryOptions.retryableErrorFn(Te))throw Te;const Ae=this.getRetryDelay();if(Ae<=0)throw Te;return await new Promise(Se=>setTimeout(Se,Ae)),this.checkUploadStatus(ne)}}async getAndSetOffset(){try{const ne=await this.checkUploadStatus({retry:!1});if(ne.status===H&&typeof ne.headers.range=="string"){this.offset=Number(ne.headers.range.split("-")[1])+1;return}this.offset=0}catch(ne){const ye=ne;if(this.retryOptions.retryableErrorFn(ye)){this.attemptDelayedRetry({status:NaN,data:ye});return}this.destroy(ye)}}async makeRequest(ne){this.encryption&&(ne.headers=ne.headers||{},ne.headers["x-goog-encryption-algorithm"]="AES256",ne.headers["x-goog-encryption-key"]=this.encryption.key.toString(),ne.headers["x-goog-encryption-key-sha256"]=this.encryption.hash.toString()),this.userProject&&(ne.params=ne.params||{},ne.params.userProject=this.userProject),ne.validateStatus=Te=>this.isSuccessfulResponse(Te)||Te===H;const ye={...this.customRequestOptions,...ne,headers:{...this.customRequestOptions.headers,...ne.headers}},fe=await this.authClient.request(ye);if(fe.data&&fe.data.error)throw fe.data.error;return fe}async makeRequestStream(ne){const ye=new v.default,fe=()=>ye.abort();this.once("error",fe),this.userProject&&(ne.params=ne.params||{},ne.params.userProject=this.userProject),ne.signal=ye.signal,ne.validateStatus=()=>!0;const Te={...this.customRequestOptions,...ne,headers:{...this.customRequestOptions.headers,...ne.headers}},Ae=await this.authClient.request(Te),Se=this.onResponse(Ae);return this.removeListener("error",fe),Se?Ae:null}onResponse(ne){return ne.status!==200&&this.retryOptions.retryableErrorFn({code:ne.status,message:ne.statusText,name:ne.statusText})?(this.attemptDelayedRetry(ne),!1):(this.emit("response",ne),!0)}attemptDelayedRetry(ne){if(this.numRetries<this.retryOptions.maxRetries){if(ne.status===J&&this.numChunksReadInRequest===0)this.startUploading();else{const ye=this.getRetryDelay();if(ye<=0){this.destroy(new Error(`Retry total time limit exceeded - ${JSON.stringify(ne.data)}`));return}this.numBytesWritten-=this.localWriteCacheByteLength,this.prependLocalBufferToUpstream(),this.offset=void 0,setTimeout(this.continueUploading.bind(this),ye)}this.numRetries++}else this.destroy(new Error(`Retry limit exceeded - ${JSON.stringify(ne.data)}`))}getRetryDelay(){const ne=Math.round(Math.random()*1e3),ye=Math.pow(this.retryOptions.retryDelayMultiplier,this.numRetries)*1e3+ne,fe=this.retryOptions.totalTimeout*1e3-(Date.now()-this.timeOfFirstRequest),Te=this.retryOptions.maxRetryDelay*1e3;return Math.min(ye,Te,fe)}sanitizeEndpoint(ne){return t.PROTOCOL_REGEX.test(ne)||(ne=`https://${ne}`),ne.replace(/\/+$/,"")}isSuccessfulResponse(ne){return ne>=200&&ne<300}}t.Upload=P,o=new WeakMap,a=new WeakSet,s=function(){this.localWriteCache=[],this.localWriteCacheByteLength=0},h=function(ne){this.localWriteCache.push(ne),this.localWriteCacheByteLength+=ne.byteLength};function Z(le){return new P(le)}function ie(le,ne){const ye=new P(le);if(!ne)return ye.createURI();ye.createURI().then(fe=>ne(null,fe),ne)}function ue(le){return new P(le).checkUploadStatus()}}(resumableUpload)),resumableUpload}var signer={},hasRequiredSigner;function requireSigner(){if(hasRequiredSigner)return signer;hasRequiredSigner=1;var t=signer&&signer.__createBinding||(Object.create?function(E,y,A,w){w===void 0&&(w=A);var I=Object.getOwnPropertyDescriptor(y,A);(!I||("get"in I?!y.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return y[A]}}),Object.defineProperty(E,w,I)}:function(E,y,A,w){w===void 0&&(w=A),E[w]=y[A]}),e=signer&&signer.__setModuleDefault||(Object.create?function(E,y){Object.defineProperty(E,"default",{enumerable:!0,value:y})}:function(E,y){E.default=y}),r=signer&&signer.__importStar||function(){var E=function(y){return E=Object.getOwnPropertyNames||function(A){var w=[];for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&(w[w.length]=I);return w},E(y)};return function(y){if(y&&y.__esModule)return y;var A={};if(y!=null)for(var w=E(y),I=0;I<w.length;I++)w[I]!=="default"&&t(A,y,w[I]);return e(A,y),A}}();Object.defineProperty(signer,"__esModule",{value:!0}),signer.SigningError=signer.URLSigner=signer.PATH_STYLED_HOST=signer.SignerExceptionMessages=void 0;const u=r(require$$1$3),d=r(require$$1$3),m=requireStorage$2(),c=requireUtil$6();var a;(function(E){E.ACCESSIBLE_DATE_INVALID="The accessible at date provided was invalid.",E.EXPIRATION_BEFORE_ACCESSIBLE_DATE="An expiration date cannot be before accessible date.",E.X_GOOG_CONTENT_SHA256="The header X-Goog-Content-SHA256 must be a hexadecimal string."})(a||(signer.SignerExceptionMessages=a={}));const o="v2",s=7*24*60*60;signer.PATH_STYLED_HOST="https://storage.googleapis.com";class h{constructor(y,A,w,I=new m.Storage){this.auth=y,this.bucket=A,this.file=w,this.storage=I}getSignedUrl(y){const A=this.parseExpires(y.expires),w=y.method,I=this.parseAccessibleAt(y.accessibleAt);if(A<I)throw new Error(a.EXPIRATION_BEFORE_ACCESSIBLE_DATE);let _;const S=y.virtualHostedStyle||!1;y.cname?_=y.cname:S&&(_=`https://${this.bucket.name}.storage.${this.storage.universeDomain}`);const j=1e3,K=Object.assign({},y,{method:w,expiration:A,accessibleAt:new Date(j*I),bucket:this.bucket.name,file:this.file?(0,c.encodeURI)(this.file.name,!1):void 0});_&&(K.cname=_);const J=y.version||o;let H;if(J==="v2")H=this.getSignedUrlV2(K);else if(J==="v4")H=this.getSignedUrlV4(K);else throw new Error(`Invalid signed URL version: ${J}. Supported versions are 'v2' and 'v4'.`);return H.then(U=>{var P;U=Object.assign(U,y.queryParams);const Z=new d.URL(((P=y.host)===null||P===void 0?void 0:P.toString())||K.cname||this.storage.apiEndpoint);return Z.pathname=this.getResourcePath(!!K.cname,this.bucket.name,K.file),Z.search=(0,c.qsStringify)(U),Z.href})}getSignedUrlV2(y){const A=this.getCanonicalHeaders(y.extensionHeaders||{}),w=this.getResourcePath(!1,y.bucket,y.file),I=[y.method,y.contentMd5||"",y.contentType||"",y.expiration,A+w].join(`
`);return(async()=>{var S;const j=this.auth;try{const K=await j.sign(I,(S=y.signingEndpoint)===null||S===void 0?void 0:S.toString());return{GoogleAccessId:(await j.getCredentials()).client_email,Expires:y.expiration,Signature:K}}catch(K){const J=K,H=new v(J.message);throw H.stack=J.stack,H}})()}getSignedUrlV4(y){var A;y.accessibleAt=y.accessibleAt?y.accessibleAt:new Date;const w=1/1e3,I=y.expiration-y.accessibleAt.valueOf()*w;if(I>s)throw new Error(`Max allowed expiration is seven days (${s} seconds).`);const _=Object.assign({},y.extensionHeaders),S=new d.URL(((A=y.host)===null||A===void 0?void 0:A.toString())||y.cname||this.storage.apiEndpoint);_.host=S.hostname,y.contentMd5&&(_["content-md5"]=y.contentMd5),y.contentType&&(_["content-type"]=y.contentType);let j;const K=_["x-goog-content-sha256"];if(K){if(typeof K!="string"||!/[A-Fa-f0-9]{40}/.test(K))throw new Error(a.X_GOOG_CONTENT_SHA256);j=K}const J=Object.keys(_).map(ie=>ie.toLowerCase()).sort().join(";"),H=this.getCanonicalHeaders(_),P=`${(0,c.formatAsUTCISO)(y.accessibleAt)}/auto/storage/goog4_request`;return(async()=>{var ie;const le=`${(await this.auth.getCredentials()).client_email}/${P}`,ne=(0,c.formatAsUTCISO)(y.accessibleAt?y.accessibleAt:new Date,!0),ye={"X-Goog-Algorithm":"GOOG4-RSA-SHA256","X-Goog-Credential":le,"X-Goog-Date":ne,"X-Goog-Expires":I.toString(10),"X-Goog-SignedHeaders":J,...y.queryParams||{}},fe=this.getCanonicalQueryParams(ye),Te=this.getCanonicalRequest(y.method,this.getResourcePath(!!y.cname,y.bucket,y.file),fe,H,J,j),Ae=u.createHash("sha256").update(Te).digest("hex"),Se=["GOOG4-RSA-SHA256",ne,P,Ae].join(`
`);try{const be=await this.auth.sign(Se,(ie=y.signingEndpoint)===null||ie===void 0?void 0:ie.toString()),we=Buffer.from(be,"base64").toString("hex");return Object.assign({},ye,{"X-Goog-Signature":we})}catch(be){const we=be,Ce=new v(we.message);throw Ce.stack=we.stack,Ce}})()}getCanonicalHeaders(y){return(0,c.objectEntries)(y).map(([w,I])=>[w.toLowerCase(),I]).sort((w,I)=>w[0].localeCompare(I[0])).filter(([,w])=>w!==void 0).map(([w,I])=>{const _=`${I}`.trim().replace(/\s{2,}/g," ");return`${w}:${_}
`}).join("")}getCanonicalRequest(y,A,w,I,_,S){return[y,A,w,I,_,S||"UNSIGNED-PAYLOAD"].join(`
`)}getCanonicalQueryParams(y){return(0,c.objectEntries)(y).map(([A,w])=>[(0,c.encodeURI)(A,!0),(0,c.encodeURI)(w,!0)]).sort((A,w)=>A[0]<w[0]?-1:1).map(([A,w])=>`${A}=${w}`).join("&")}getResourcePath(y,A,w){return y?"/"+(w||""):w?`/${A}/${w}`:`/${A}`}parseExpires(y,A=new Date){const w=new Date(y).valueOf();if(isNaN(w))throw new Error(m.ExceptionMessages.EXPIRATION_DATE_INVALID);if(w<A.valueOf())throw new Error(m.ExceptionMessages.EXPIRATION_DATE_PAST);return Math.floor(w/1e3)}parseAccessibleAt(y){const A=new Date(y||new Date).valueOf();if(isNaN(A))throw new Error(a.ACCESSIBLE_DATE_INVALID);return Math.floor(A/1e3)}}signer.URLSigner=h;class v extends Error{constructor(){super(...arguments),this.name="SigningError"}}return signer.SigningError=v,signer}var crc32c={},hasRequiredCrc32c;function requireCrc32c(){if(hasRequiredCrc32c)return crc32c;hasRequiredCrc32c=1;var t=crc32c&&crc32c.__classPrivateFieldSet||function(s,h,v,E,y){if(E==="m")throw new TypeError("Private method is not writable");if(E==="a"&&!y)throw new TypeError("Private accessor was defined without a setter");if(typeof h=="function"?s!==h||!y:!h.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return E==="a"?y.call(s,v):y?y.value=v:h.set(s,v),v},e=crc32c&&crc32c.__classPrivateFieldGet||function(s,h,v,E){if(v==="a"&&!E)throw new TypeError("Private accessor was defined without a getter");if(typeof h=="function"?s!==h||!E:!h.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return v==="m"?E:v==="a"?E.call(s):E?E.value:h.get(s)},r;Object.defineProperty(crc32c,"__esModule",{value:!0}),crc32c.CRC32C_EXTENSION_TABLE=crc32c.CRC32C_EXTENSIONS=crc32c.CRC32C_EXCEPTION_MESSAGES=crc32c.CRC32C_DEFAULT_VALIDATOR_GENERATOR=crc32c.CRC32C=void 0;const u=require$$1$3,d=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697];crc32c.CRC32C_EXTENSIONS=d;const m=new Int32Array(d);crc32c.CRC32C_EXTENSION_TABLE=m;const c=()=>new o;crc32c.CRC32C_DEFAULT_VALIDATOR_GENERATOR=c;const a={INVALID_INIT_BASE64_RANGE:s=>`base64-encoded data expected to equal 4 bytes, not ${s}`,INVALID_INIT_BUFFER_LENGTH:s=>`Buffer expected to equal 4 bytes, not ${s}`,INVALID_INIT_INTEGER:s=>`Number expected to be a safe, unsigned 32-bit integer, not ${s}`};crc32c.CRC32C_EXCEPTION_MESSAGES=a;class o{constructor(h=0){r.set(this,0),t(this,r,h,"f")}update(h){let v=e(this,r,"f")^4294967295;for(const E of h)v=o.CRC32C_EXTENSION_TABLE[(E^v)&255]^v>>>8;t(this,r,v^4294967295,"f")}validate(h){return typeof h=="number"?h===e(this,r,"f"):typeof h=="string"?h===this.toString():Buffer.isBuffer(h)?Buffer.compare(h,this.toBuffer())===0:h.toString()===this.toString()}toBuffer(){const h=Buffer.alloc(4);return h.writeInt32BE(e(this,r,"f")),h}toJSON(){return this.toString()}toString(){return this.toBuffer().toString("base64")}valueOf(){return e(this,r,"f")}static fromBuffer(h){let v;if(Buffer.isBuffer(h)?v=h:"buffer"in h?v=Buffer.from(h.buffer):v=Buffer.from(h),v.byteLength!==4)throw new RangeError(a.INVALID_INIT_BUFFER_LENGTH(v.byteLength));return new o(v.readInt32BE())}static async fromFile(h){const v=new o;return await new Promise((E,y)=>{(0,u.createReadStream)(h).on("data",A=>{typeof A=="string"?v.update(Buffer.from(A)):v.update(A)}).on("end",()=>E()).on("error",y)}),v}static fromString(h){const v=Buffer.from(h,"base64");if(v.byteLength!==4)throw new RangeError(a.INVALID_INIT_BASE64_RANGE(v.byteLength));return this.fromBuffer(v)}static fromNumber(h){if(!Number.isSafeInteger(h)||h>2**32||h<-4294967296)throw new RangeError(a.INVALID_INIT_INTEGER(h));return new o(h)}static from(h){return typeof h=="number"?this.fromNumber(h):typeof h=="string"?this.fromString(h):"byteLength"in h?this.fromBuffer(h):this.fromString(h.toString())}}return crc32c.CRC32C=o,r=new WeakMap,o.CRC32C_EXTENSIONS=d,o.CRC32C_EXTENSION_TABLE=m,crc32c}var hashStreamValidator={},hasRequiredHashStreamValidator;function requireHashStreamValidator(){if(hasRequiredHashStreamValidator)return hashStreamValidator;hasRequiredHashStreamValidator=1;var t=hashStreamValidator&&hashStreamValidator.__classPrivateFieldSet||function(h,v,E,y,A){if(y==="m")throw new TypeError("Private method is not writable");if(y==="a"&&!A)throw new TypeError("Private accessor was defined without a setter");if(typeof v=="function"?h!==v||!A:!v.has(h))throw new TypeError("Cannot write private member to an object whose class did not declare it");return y==="a"?A.call(h,E):A?A.value=E:v.set(h,E),E},e=hashStreamValidator&&hashStreamValidator.__classPrivateFieldGet||function(h,v,E,y){if(E==="a"&&!y)throw new TypeError("Private accessor was defined without a getter");if(typeof v=="function"?h!==v||!y:!v.has(h))throw new TypeError("Cannot read private member from an object whose class did not declare it");return E==="m"?y:E==="a"?y.call(h):y?y.value:v.get(h)},r,u,d;Object.defineProperty(hashStreamValidator,"__esModule",{value:!0}),hashStreamValidator.HashStreamValidator=void 0;const m=require$$1$3,c=require$$1$3,a=requireCrc32c(),o=requireFile();class s extends c.Transform{constructor(v={}){if(super(),this.updateHashesOnly=!1,r.set(this,void 0),u.set(this,void 0),d.set(this,""),this.crc32cEnabled=!!v.crc32c,this.md5Enabled=!!v.md5,this.updateHashesOnly=!!v.updateHashesOnly,this.crc32cExpected=v.crc32cExpected,this.md5Expected=v.md5Expected,this.crc32cEnabled)if(v.crc32cInstance)t(this,r,v.crc32cInstance,"f");else{const E=v.crc32cGenerator||a.CRC32C_DEFAULT_VALIDATOR_GENERATOR;t(this,r,E(),"f")}this.md5Enabled&&t(this,u,(0,m.createHash)("md5"),"f")}get crc32c(){var v;return(v=e(this,r,"f"))===null||v===void 0?void 0:v.toString()}_flush(v){if(e(this,u,"f")&&t(this,d,e(this,u,"f").digest("base64"),"f"),this.updateHashesOnly){v();return}let E=this.crc32cEnabled||this.md5Enabled;if(this.crc32cEnabled&&this.crc32cExpected&&(E=!this.test("crc32c",this.crc32cExpected)),this.md5Enabled&&this.md5Expected&&(E=!this.test("md5",this.md5Expected)),E){const y=new o.RequestError(o.FileExceptionMessages.DOWNLOAD_MISMATCH);y.code="CONTENT_DOWNLOAD_MISMATCH",v(y)}else v()}_transform(v,E,y){this.push(v,E);try{e(this,r,"f")&&e(this,r,"f").update(v),e(this,u,"f")&&e(this,u,"f").update(v),y()}catch(A){y(A)}}test(v,E){const y=Buffer.isBuffer(E)?E.toString("base64"):E;return v==="crc32c"&&e(this,r,"f")?e(this,r,"f").validate(y):v==="md5"&&e(this,u,"f")?e(this,d,"f")===y:!1}}return hashStreamValidator.HashStreamValidator=s,r=new WeakMap,u=new WeakMap,d=new WeakMap,hashStreamValidator}var hasRequiredFile;function requireFile(){if(hasRequiredFile)return file;hasRequiredFile=1;var t=file&&file.__createBinding||(Object.create?function(Se,be,we,Ce){Ce===void 0&&(Ce=we);var je=Object.getOwnPropertyDescriptor(be,we);(!je||("get"in je?!be.__esModule:je.writable||je.configurable))&&(je={enumerable:!0,get:function(){return be[we]}}),Object.defineProperty(Se,Ce,je)}:function(Se,be,we,Ce){Ce===void 0&&(Ce=we),Se[Ce]=be[we]}),e=file&&file.__setModuleDefault||(Object.create?function(Se,be){Object.defineProperty(Se,"default",{enumerable:!0,value:be})}:function(Se,be){Se.default=be}),r=file&&file.__importStar||function(){var Se=function(be){return Se=Object.getOwnPropertyNames||function(we){var Ce=[];for(var je in we)Object.prototype.hasOwnProperty.call(we,je)&&(Ce[Ce.length]=je);return Ce},Se(be)};return function(be){if(be&&be.__esModule)return be;var we={};if(be!=null)for(var Ce=Se(be),je=0;je<Ce.length;je++)Ce[je]!=="default"&&t(we,be,Ce[je]);return e(we,be),we}}(),u=file&&file.__classPrivateFieldGet||function(Se,be,we,Ce){if(we==="a"&&!Ce)throw new TypeError("Private accessor was defined without a getter");if(typeof be=="function"?Se!==be||!Ce:!be.has(Se))throw new TypeError("Cannot read private member from an object whose class did not declare it");return we==="m"?Ce:we==="a"?Ce.call(Se):Ce?Ce.value:be.get(Se)},d=file&&file.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}},m,c;Object.defineProperty(file,"__esModule",{value:!0}),file.File=file.FileExceptionMessages=file.RequestError=file.STORAGE_POST_POLICY_BASE_URL=file.ActionToHTTPMethod=void 0;const a=requireNodejsCommon(),o=requireSrc$5(),s=r(require$$1$3),h=r(require$$1$3),v=d(requireMime()),E=r(requireResumableUpload()),y=require$$1$3,A=r(require$$1$3),w=requireStorage$2(),I=requireBucket(),_=requireAcl(),S=requireSigner(),j=requireUtil$5(),K=d(requireDuplexify()),J=requireUtil$6(),H=requireCrc32c(),U=requireHashStreamValidator(),P=d(requireLib$1());var Z;(function(Se){Se.read="GET",Se.write="PUT",Se.delete="DELETE",Se.resumable="POST"})(Z||(file.ActionToHTTPMethod=Z={})),file.STORAGE_POST_POLICY_BASE_URL="https://storage.googleapis.com";const ie=/^gs:\/\/([a-z0-9_.-]+)\/(.+)$/,ue=new RegExp([/^text\/|application\/ecmascript|application\/javascript|application\/json/,/|application\/postscript|application\/rtf|application\/toml|application\/vnd.dart/,/|application\/vnd.ms-fontobject|application\/wasm|application\/x-httpd-php|application\/x-ns-proxy-autoconfig/,/|application\/x-sh(?!ockwave-flash)|application\/x-tar|application\/x-virtualbox-hdd|application\/x-virtualbox-ova|application\/x-virtualbox-ovf/,/|^application\/x-virtualbox-vbox$|application\/x-virtualbox-vdi|application\/x-virtualbox-vhd|application\/x-virtualbox-vmdk/,/|application\/xml|application\/xml-dtd|font\/otf|font\/ttf|image\/bmp|image\/vnd.adobe.photoshop|image\/vnd.microsoft.icon/,/|image\/vnd.ms-dds|image\/x-icon|image\/x-ms-bmp|message\/rfc822|model\/gltf-binary|\+json|\+text|\+xml|\+yaml/].map(Se=>Se.source).join(""),"i");class le extends Error{}file.RequestError=le;const ne=7*24*60*60,ye=/(gs):\/\/([a-z0-9_.-]+)\/(.+)/g,fe=/(https):\/\/(storage\.googleapis\.com)\/([a-z0-9_.-]+)\/(.+)/g;var Te;(function(Se){Se.EXPIRATION_TIME_NA="An expiration time is not available.",Se.DESTINATION_NO_NAME="Destination file should have a name.",Se.INVALID_VALIDATION_FILE_RANGE="Cannot use validation with file ranges (start/end).",Se.MD5_NOT_AVAILABLE="MD5 verification was specified, but is not available for the requested object. MD5 is not available for composite objects.",Se.EQUALS_CONDITION_TWO_ELEMENTS="Equals condition must be an array of 2 elements.",Se.STARTS_WITH_TWO_ELEMENTS="StartsWith condition must be an array of 2 elements.",Se.CONTENT_LENGTH_RANGE_MIN_MAX="ContentLengthRange must have numeric min & max fields.",Se.DOWNLOAD_MISMATCH="The downloaded data did not match the data from the server. To be sure the content is the same, you should download the file again.",Se.UPLOAD_MISMATCH_DELETE_FAIL=`The uploaded data did not match the data from the server.
    As a precaution, we attempted to delete the file, but it was not successful.
    To be sure the content is the same, you should try removing the file manually,
    then uploading the file again.
    

The delete attempt failed with this message:

  `,Se.UPLOAD_MISMATCH=`The uploaded data did not match the data from the server.
    As a precaution, the file has been deleted.
    To be sure the content is the same, you should try uploading the file again.`,Se.MD5_RESUMED_UPLOAD="MD5 cannot be used with a continued resumable upload as MD5 cannot be extended from an existing value",Se.MISSING_RESUME_CRC32C_FINAL_UPLOAD="The CRC32C is missing for the final portion of a resumed upload, which is required for validation. Please provide `resumeCRC32C` if validation is required, or disable `validation`."})(Te||(file.FileExceptionMessages=Te={}));class Ae extends a.ServiceObject{constructor(be,we,Ce={}){var je,Fe;const Ve={};let Ge;Ce.generation!==null&&(typeof Ce.generation=="string"?Ge=Number(Ce.generation):Ge=Ce.generation,isNaN(Ge)||(Ve.generation=Ge)),Object.assign(Ve,Ce.preconditionOpts);const Le=Ce.userProject||be.userProject;typeof Le=="string"&&(Ve.userProject=Le);const Be={delete:{reqOpts:{qs:Ve}},exists:{reqOpts:{qs:Ve}},get:{reqOpts:{qs:Ve}},getMetadata:{reqOpts:{qs:Ve}},setMetadata:{reqOpts:{qs:Ve}}};if(super({parent:be,baseUrl:"/o",id:encodeURIComponent(we),methods:Be}),m.add(this),this.bucket=be,this.storage=be.parent,Ce.generation!==null){let $e;typeof Ce.generation=="string"?$e=Number(Ce.generation):$e=Ce.generation,isNaN($e)||(this.generation=$e)}this.kmsKeyName=Ce.kmsKeyName,this.userProject=Le,this.name=we,Ce.encryptionKey&&this.setEncryptionKey(Ce.encryptionKey),this.acl=new _.Acl({request:this.request.bind(this),pathPrefix:"/acl"}),this.crc32cGenerator=Ce.crc32cGenerator||this.bucket.crc32cGenerator,this.instanceRetryValue=(Fe=(je=this.storage)===null||je===void 0?void 0:je.retryOptions)===null||Fe===void 0?void 0:Fe.autoRetry,this.instancePreconditionOpts=Ce?.preconditionOpts}get cloudStorageURI(){const be=this.bucket.cloudStorageURI;return be.pathname=this.name,be}shouldRetryBasedOnPreconditionAndIdempotencyStrat(be){var we;return!(be?.ifGenerationMatch===void 0&&((we=this.instancePreconditionOpts)===null||we===void 0?void 0:we.ifGenerationMatch)===void 0&&this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryNever)}copy(be,we,Ce){var je,Fe;const Ve=new Error(Te.DESTINATION_NO_NAME);if(!be)throw Ve;let Ge={};typeof we=="function"?Ce=we:we&&(Ge={...we}),Ce=Ce||a.util.noop;let Le,Be,$e;if(typeof be=="string"){const V=ie.exec(be);V!==null&&V.length===3?(Le=this.storage.bucket(V[1]),Be=V[2]):(Le=this.bucket,Be=be)}else if(be instanceof I.Bucket)Le=be,Be=this.name;else if(be instanceof Ae)Le=be.bucket,Be=be.name,$e=be;else throw Ve;const he={};this.generation!==void 0&&(he.sourceGeneration=this.generation),Ge.token!==void 0&&(he.rewriteToken=Ge.token),Ge.userProject!==void 0&&(he.userProject=Ge.userProject,delete Ge.userProject),Ge.predefinedAcl!==void 0&&(he.destinationPredefinedAcl=Ge.predefinedAcl,delete Ge.predefinedAcl),$e=$e||Le.file(Be);const p={};if(this.encryptionKey!==void 0&&(p["x-goog-copy-source-encryption-algorithm"]="AES256",p["x-goog-copy-source-encryption-key"]=this.encryptionKeyBase64,p["x-goog-copy-source-encryption-key-sha256"]=this.encryptionKeyHash),$e.encryptionKey!==void 0?this.setEncryptionKey($e.encryptionKey):Ge.destinationKmsKeyName!==void 0?(he.destinationKmsKeyName=Ge.destinationKmsKeyName,delete Ge.destinationKmsKeyName):$e.kmsKeyName!==void 0&&(he.destinationKmsKeyName=$e.kmsKeyName),he.destinationKmsKeyName){this.kmsKeyName=he.destinationKmsKeyName;const V=this.interceptors.indexOf(this.encryptionKeyInterceptor);V>-1&&this.interceptors.splice(V,1)}this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(Ge?.preconditionOpts)||(this.storage.retryOptions.autoRetry=!1),((je=Ge.preconditionOpts)===null||je===void 0?void 0:je.ifGenerationMatch)!==void 0&&(he.ifGenerationMatch=(Fe=Ge.preconditionOpts)===null||Fe===void 0?void 0:Fe.ifGenerationMatch,delete Ge.preconditionOpts),this.request({method:"POST",uri:`/rewriteTo/b/${Le.name}/o/${encodeURIComponent($e.name)}`,qs:he,json:Ge,headers:p},(V,R)=>{if(this.storage.retryOptions.autoRetry=this.instanceRetryValue,V){Ce(V,null,R);return}if(R.rewriteToken){const ce={token:R.rewriteToken};he.userProject&&(ce.userProject=he.userProject),he.destinationKmsKeyName&&(ce.destinationKmsKeyName=he.destinationKmsKeyName),this.copy($e,ce,Ce);return}Ce(null,$e,R)})}createReadStream(be={}){be=Object.assign({decompress:!0},be);const we=typeof be.start=="number"||typeof be.end=="number",Ce=be.end<0;let je,Fe;const Ve=new J.PassThroughShim;let Ge=!0,Le=!1;if(typeof be.validation=="string"){const V=be.validation.toLowerCase().trim();Ge=V==="crc32c",Le=V==="md5"}else be.validation===!1&&(Ge=!1);const Be=!we&&(Ge||Le);if(we){if(typeof be.validation=="string"||be.validation===!0)throw new Error(Te.INVALID_VALIDATION_FILE_RANGE);Ge=!1,Le=!1}const $e=V=>{V&&(Fe?.agent&&Fe.agent.destroy(),Ve.destroy(V))},he=(V,R,ce)=>{if(V){this.getBufferFromReadable(ce).then(ae=>{V.message=ae.toString("utf8"),Ve.destroy(V)});return}Fe=ce.request;const Re=ce.toJSON().headers,ke=Re["content-encoding"]==="gzip",qe={},g=Re["x-goog-stored-content-encoding"]==="gzip"&&ke||Re["x-goog-stored-content-encoding"]==="identity",ee=[];if(Be&&(typeof Re["x-goog-hash"]=="string"&&Re["x-goog-hash"].split(",").forEach(ae=>{const l=ae.indexOf("="),X=ae.substring(0,l),oe=ae.substring(l+1);qe[X]=oe}),je=new U.HashStreamValidator({crc32c:Ge,md5:Le,crc32cGenerator:this.crc32cGenerator,crc32cExpected:qe.crc32c,md5Expected:qe.md5})),Le&&!qe.md5){const ae=new le(Te.MD5_NOT_AVAILABLE);ae.code="MD5_NOT_AVAILABLE",Ve.destroy(ae);return}g&&Be&&je&&ee.push(je),ke&&be.decompress&&ee.push(A.createGunzip()),(0,y.pipeline)(ce,...ee,Ve,$e)},p=()=>{const V={alt:"media"};this.generation&&(V.generation=this.generation),be.userProject&&(V.userProject=be.userProject);const R={"Accept-Encoding":"gzip","Cache-Control":"no-store"};if(we){const Re=typeof be.start=="number"?be.start:"0",ke=typeof be.end=="number"?be.end:"";R.Range=`bytes=${Ce?ke:`${Re}-${ke}`}`}const ce={uri:"",headers:R,qs:V};be[j.GCCL_GCS_CMD_KEY]&&(ce[j.GCCL_GCS_CMD_KEY]=be[j.GCCL_GCS_CMD_KEY]),this.requestStream(ce).on("error",Re=>{Ve.destroy(Re)}).on("response",Re=>{Ve.emit("response",Re),a.util.handleResp(null,Re,null,he)}).resume()};return Ve.on("reading",p),Ve}createResumableUpload(be,we){var Ce,je;const Fe=typeof be=="object"?be:{};we=typeof be=="function"?be:we;const Ve=this.storage.retryOptions;(((Ce=Fe?.preconditionOpts)===null||Ce===void 0?void 0:Ce.ifGenerationMatch)===void 0&&((je=this.instancePreconditionOpts)===null||je===void 0?void 0:je.ifGenerationMatch)===void 0&&this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryNever)&&(Ve.autoRetry=!1),E.createURI({authClient:this.storage.authClient,apiEndpoint:this.storage.apiEndpoint,bucket:this.bucket.name,customRequestOptions:this.getRequestInterceptors().reduce((Ge,Le)=>Le(Ge),{}),file:this.name,generation:this.generation,key:this.encryptionKey,kmsKeyName:this.kmsKeyName,metadata:Fe.metadata,offset:Fe.offset,origin:Fe.origin,predefinedAcl:Fe.predefinedAcl,private:Fe.private,public:Fe.public,userProject:Fe.userProject||this.userProject,retryOptions:Ve,params:Fe?.preconditionOpts||this.instancePreconditionOpts,universeDomain:this.bucket.storage.universeDomain,[j.GCCL_GCS_CMD_KEY]:Fe[j.GCCL_GCS_CMD_KEY]},we),this.storage.retryOptions.autoRetry=this.instanceRetryValue}createWriteStream(be={}){var we;if((we=be.metadata)!==null&&we!==void 0||(be.metadata={}),be.contentType&&(be.metadata.contentType=be.contentType),!be.metadata.contentType||be.metadata.contentType==="auto"){const V=v.default.getType(this.name);V&&(be.metadata.contentType=V)}let Ce=be.gzip;Ce==="auto"&&(Ce=ue.test(be.metadata.contentType||"")),Ce&&(be.metadata.contentEncoding="gzip");let je=!0,Fe=!1;if(typeof be.validation=="string"?(be.validation=be.validation.toLowerCase(),je=be.validation==="crc32c",Fe=be.validation==="md5"):be.validation===!1&&(je=!1,Fe=!1),be.offset){if(Fe)throw new RangeError(Te.MD5_RESUMED_UPLOAD);if(je&&!be.isPartialUpload&&!be.resumeCRC32C)throw new RangeError(Te.MISSING_RESUME_CRC32C_FINAL_UPLOAD)}let Ve=V=>{Ge.destroy(V||void 0)};const Ge=new y.Writable({final(V){Ve=V,Be.end()},write(V,R,ce){Be.write(V,R,ce)}});Ge.once("error",V=>{Be.destroy(V)}),Ge.once("close",()=>{Be.destroy()});const Le=[];Ce&&Le.push(A.createGzip());const Be=new J.PassThroughShim;let $e=null;if(je||Fe){const V=be.resumeCRC32C?H.CRC32C.from(be.resumeCRC32C):void 0;$e=new U.HashStreamValidator({crc32c:je,crc32cInstance:V,md5:Fe,crc32cGenerator:this.crc32cGenerator,updateHashesOnly:!0}),Le.push($e)}const he=(0,K.default)();let p=!1;return Be.on("reading",()=>Ge.emit("reading")),Be.on("writing",()=>Ge.emit("writing")),he.on("uri",V=>Ge.emit("uri",V)),he.on("progress",V=>Ge.emit("progress",V)),he.on("response",V=>Ge.emit("response",V)),he.once("metadata",()=>{p=!0}),Ge.once("writing",()=>{be.resumable===!1?this.startSimpleUpload_(he,be):this.startResumableUpload_(he,be),(0,y.pipeline)(Be,...Le,he,async V=>{if(V)return Ve(V);if(!p)try{await new Promise((R,ce)=>{he.once("metadata",R),he.once("error",ce)})}catch(R){return Ve(R)}$e?.crc32c&&Ge.emit("crc32c",$e.crc32c);try{const R=be.isPartialUpload&&!this.metadata;$e&&!R&&await u(this,m,"m",c).call(this,$e,{crc32c:je,md5:Fe}),Ve()}catch(R){Ve(R)}})}),Ge}delete(be,we){const Ce=typeof be=="object"?be:{};we=typeof be=="function"?be:we,this.disableAutoRetryConditionallyIdempotent_(this.methods.delete,I.AvailableServiceObjectMethods.delete,Ce),super.delete(Ce).then(je=>we(null,...je)).catch(we).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}download(be,we){let Ce;typeof be=="function"?(we=be,Ce={}):Ce=be;let je=!1;const Fe=(...Be)=>{je||we(...Be),je=!0},Ve=Ce.destination;delete Ce.destination;const Ge=this.createReadStream(Ce);let Le=!1;Ve?Ge.on("error",Fe).once("data",Be=>{Le=!0;const $e=h.createWriteStream(Ve);$e.write(Be),Ge.pipe($e).on("error",he=>{Fe(he,Buffer.from(""))}).on("finish",()=>{Fe(null,Be)})}).on("end",()=>{if(!Le){const Be=Buffer.alloc(0);try{h.writeFileSync(Ve,Be),Fe(null,Be)}catch($e){Fe($e,Be)}}}):this.getBufferFromReadable(Ge).then(Be=>Fe?.(null,Be)).catch(Fe)}setEncryptionKey(be){return this.encryptionKey=be,this.encryptionKeyBase64=Buffer.from(be).toString("base64"),this.encryptionKeyHash=s.createHash("sha256").update(this.encryptionKeyBase64,"base64").digest("base64"),this.encryptionKeyInterceptor={request:we=>(we.headers=we.headers||{},we.headers["x-goog-encryption-algorithm"]="AES256",we.headers["x-goog-encryption-key"]=this.encryptionKeyBase64,we.headers["x-goog-encryption-key-sha256"]=this.encryptionKeyHash,we)},this.interceptors.push(this.encryptionKeyInterceptor),this}static from(be,we,Ce){const je=[...be.matchAll(ye)],Fe=[...be.matchAll(fe)];if(je.length>0){const Ve=new I.Bucket(we,je[0][2]);return new Ae(Ve,je[0][3],Ce)}else if(Fe.length>0){const Ve=new I.Bucket(we,Fe[0][3]);return new Ae(Ve,Fe[0][4],Ce)}else throw new Error("URL string must be of format gs://bucket/file or https://storage.googleapis.com/bucket/file")}get(be,we){const Ce=typeof be=="object"?be:{};we=typeof be=="function"?be:we,super.get(Ce).then(je=>we(null,...je)).catch(we)}getExpirationDate(be){this.getMetadata((we,Ce,je)=>{if(we){be(we,null,je);return}if(!Ce.retentionExpirationTime){const Fe=new Error(Te.EXPIRATION_TIME_NA);be(Fe,null,je);return}be(null,new Date(Ce.retentionExpirationTime),je)})}generateSignedPostPolicyV2(be,we){const Ce=(0,J.normalize)(be,we);let je=Ce.options;const Fe=Ce.callback,Ve=new Date(je.expires);if(isNaN(Ve.getTime()))throw new Error(w.ExceptionMessages.EXPIRATION_DATE_INVALID);if(Ve.valueOf()<Date.now())throw new Error(w.ExceptionMessages.EXPIRATION_DATE_PAST);je=Object.assign({},je);const Ge=[["eq","$key",this.name],{bucket:this.bucket.name}];if(Array.isArray(je.equals)&&(Array.isArray(je.equals[0])||(je.equals=[je.equals]),je.equals.forEach(he=>{if(!Array.isArray(he)||he.length!==2)throw new Error(Te.EQUALS_CONDITION_TWO_ELEMENTS);Ge.push(["eq",he[0],he[1]])})),Array.isArray(je.startsWith)&&(Array.isArray(je.startsWith[0])||(je.startsWith=[je.startsWith]),je.startsWith.forEach(he=>{if(!Array.isArray(he)||he.length!==2)throw new Error(Te.STARTS_WITH_TWO_ELEMENTS);Ge.push(["starts-with",he[0],he[1]])})),je.acl&&Ge.push({acl:je.acl}),je.successRedirect&&Ge.push({success_action_redirect:je.successRedirect}),je.successStatus&&Ge.push({success_action_status:je.successStatus}),je.contentLengthRange){const he=je.contentLengthRange.min,p=je.contentLengthRange.max;if(typeof he!="number"||typeof p!="number")throw new Error(Te.CONTENT_LENGTH_RANGE_MIN_MAX);Ge.push(["content-length-range",he,p])}const Le={expiration:Ve.toISOString(),conditions:Ge},Be=JSON.stringify(Le),$e=Buffer.from(Be).toString("base64");this.storage.authClient.sign($e,je.signingEndpoint).then(he=>{Fe(null,{string:Be,base64:$e,signature:he})},he=>{Fe(new S.SigningError(he.message))})}generateSignedPostPolicyV4(be,we){const Ce=(0,J.normalize)(be,we);let je=Ce.options;const Fe=Ce.callback,Ve=new Date(je.expires);if(isNaN(Ve.getTime()))throw new Error(w.ExceptionMessages.EXPIRATION_DATE_INVALID);if(Ve.valueOf()<Date.now())throw new Error(w.ExceptionMessages.EXPIRATION_DATE_PAST);if(Ve.valueOf()-Date.now()>ne*1e3)throw new Error(`Max allowed expiration is seven days (${ne} seconds).`);je=Object.assign({},je);let Ge=Object.assign({},je.fields);const Le=new Date,Be=(0,J.formatAsUTCISO)(Le,!0),$e=(0,J.formatAsUTCISO)(Le);(async()=>{const{client_email:p}=await this.storage.authClient.getCredentials(),V=`${p}/${$e}/auto/storage/goog4_request`;Ge={...Ge,bucket:this.bucket.name,key:this.name,"x-goog-date":Be,"x-goog-credential":V,"x-goog-algorithm":"GOOG4-RSA-SHA256"};const R=je.conditions||[];Object.entries(Ge).forEach(([g,ee])=>{g.startsWith("x-ignore-")||R.push({[g]:ee})}),delete Ge.bucket;const ce=(0,J.formatAsUTCISO)(Ve,!0,"-",":"),Re={conditions:R,expiration:ce},ke=(0,J.unicodeJSONStringify)(Re),qe=Buffer.from(ke).toString("base64");try{const g=await this.storage.authClient.sign(qe,je.signingEndpoint),ee=Buffer.from(g,"base64").toString("hex"),ae=this.parent.storage.universeDomain;Ge.policy=qe,Ge["x-goog-signature"]=ee;let l;return this.storage.customEndpoint?l=this.storage.apiEndpoint:je.virtualHostedStyle?l=`https://${this.bucket.name}.storage.${ae}/`:je.bucketBoundHostname?l=`${je.bucketBoundHostname}/`:l=`https://storage.${ae}/${this.bucket.name}/`,{url:l,fields:Ge}}catch(g){throw new S.SigningError(g.message)}})().then(p=>Fe(null,p),Fe)}getSignedUrl(be,we){const Ce=Z[be.action],je=(0,J.objectKeyToLowercase)(be.extensionHeaders||{});be.action==="resumable"&&(je["x-goog-resumable"]="start");const Fe=Object.assign({},be.queryParams);typeof be.responseType=="string"&&(Fe["response-content-type"]=be.responseType),typeof be.promptSaveAs=="string"&&(Fe["response-content-disposition"]='attachment; filename="'+be.promptSaveAs+'"'),typeof be.responseDisposition=="string"&&(Fe["response-content-disposition"]=be.responseDisposition),this.generation&&(Fe.generation=this.generation.toString());const Ve={method:Ce,expires:be.expires,accessibleAt:be.accessibleAt,extensionHeaders:je,queryParams:Fe,contentMd5:be.contentMd5,contentType:be.contentType,host:be.host};be.cname&&(Ve.cname=be.cname),be.version&&(Ve.version=be.version),be.virtualHostedStyle&&(Ve.virtualHostedStyle=be.virtualHostedStyle),this.signer||(this.signer=new S.URLSigner(this.storage.authClient,this.bucket,this,this.storage)),this.signer.getSignedUrl(Ve).then(Ge=>we(null,Ge),we)}isPublic(be){var we;const Ce=((we=this.storage)===null||we===void 0?void 0:we.interceptors)||[],je=this.interceptors||[],Ve=Ce.concat(je).reduce((Ge,Le)=>{const Be=Le.request({uri:`${this.storage.apiEndpoint}/${this.bucket.name}/${encodeURIComponent(this.name)}`});return Object.assign(Ge,Be.headers),Ge},{});a.util.makeRequest({method:"GET",uri:`${this.storage.apiEndpoint}/${this.bucket.name}/${encodeURIComponent(this.name)}`,headers:Ve},{retryOptions:this.storage.retryOptions},Ge=>{Ge?Ge.code===403?be(null,!1):be(Ge):be(null,!0)})}makePrivate(be,we){var Ce,je;const Fe=typeof be=="object"?be:{};we=typeof be=="function"?be:we;const Ve={predefinedAcl:Fe.strict?"private":"projectPrivate"};((Ce=Fe.preconditionOpts)===null||Ce===void 0?void 0:Ce.ifMetagenerationMatch)!==void 0&&(Ve.ifMetagenerationMatch=(je=Fe.preconditionOpts)===null||je===void 0?void 0:je.ifMetagenerationMatch,delete Fe.preconditionOpts),Fe.userProject&&(Ve.userProject=Fe.userProject);const Ge={...Fe.metadata,acl:null};this.setMetadata(Ge,Ve,we)}makePublic(be){be=be||a.util.noop,this.acl.add({entity:"allUsers",role:"READER"},(we,Ce,je)=>{be(we,je)})}publicUrl(){return`${this.storage.apiEndpoint}/${this.bucket.name}/${encodeURIComponent(this.name)}`}moveFileAtomic(be,we,Ce){var je,Fe;const Ve=new Error(Te.DESTINATION_NO_NAME);if(!be)throw Ve;let Ge={};typeof we=="function"?Ce=we:we&&(Ge={...we}),Ce=Ce||a.util.noop;let Le,Be;if(typeof be=="string"){const he=ie.exec(be);he!==null&&he.length===3?Le=he[2]:Le=be}else if(be instanceof Ae)Le=be.name,Be=be;else throw Ve;Be=Be||this.bucket.file(Le),this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(Ge?.preconditionOpts)||(this.storage.retryOptions.autoRetry=!1);const $e={};Ge.userProject!==void 0&&($e.userProject=Ge.userProject,delete Ge.userProject),((je=Ge.preconditionOpts)===null||je===void 0?void 0:je.ifGenerationMatch)!==void 0&&($e.ifGenerationMatch=(Fe=Ge.preconditionOpts)===null||Fe===void 0?void 0:Fe.ifGenerationMatch,delete Ge.preconditionOpts),this.request({method:"POST",uri:`/moveTo/o/${encodeURIComponent(Be.name)}`,qs:$e,json:Ge},(he,p)=>{if(this.storage.retryOptions.autoRetry=this.instanceRetryValue,he){Ce(he,null,p);return}Ce(null,Be,p)})}move(be,we,Ce){const je=typeof we=="object"?we:{};Ce=typeof we=="function"?we:Ce,Ce=Ce||a.util.noop,this.copy(be,je,(Fe,Ve,Ge)=>{if(Fe){Fe.message="file#copy failed with an error - "+Fe.message,Ce(Fe,null,Ge);return}this.name!==Ve.name||this.bucket.name!==Ve.bucket.name?this.delete(je,(Le,Be)=>{if(Le){Le.message="file#delete failed with an error - "+Le.message,Ce(Le,Ve,Be);return}Ce(null,Ve,Ge)}):Ce(null,Ve,Ge)})}rename(be,we,Ce){const je=typeof we=="object"?we:{};Ce=typeof we=="function"?we:Ce,Ce=Ce||a.util.noop,this.move(be,je,Ce)}async restore(be){const[we]=await this.request({method:"POST",uri:"/restore",qs:be});return we}request(be,we){return this.parent.request.call(this,be,we)}rotateEncryptionKey(be,we){var Ce;we=typeof be=="function"?be:we;let je={};typeof be=="string"||be instanceof Buffer?je={encryptionKey:be}:typeof be=="object"&&(je=be);const Fe=this.bucket.file(this.id,je),Ve=((Ce=je.preconditionOpts)===null||Ce===void 0?void 0:Ce.ifGenerationMatch)!==void 0?{preconditionOpts:je.preconditionOpts}:{};this.copy(Fe,Ve,we)}save(be,we,Ce){Ce=typeof we=="function"?we:Ce;const je=typeof we=="object"?we:{};let Fe=this.storage.retryOptions.maxRetries;this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(je?.preconditionOpts)||(Fe=0);const Ve=(0,P.default)(async Ge=>new Promise((Le,Be)=>{Fe===0&&(this.storage.retryOptions.autoRetry=!1);const $e=this.createWriteStream(je);je.onUploadProgress&&$e.on("progress",je.onUploadProgress);const he=p=>this.storage.retryOptions.autoRetry&&this.storage.retryOptions.retryableErrorFn(p)?Be(p):Ge(p);typeof be=="string"||Buffer.isBuffer(be)||be instanceof Uint8Array?$e.on("error",he).on("finish",()=>Le()).end(be):(0,y.pipeline)(be,$e,p=>{if(p){if(typeof be!="function")return Ge(p);he(p)}else Le()})}),{retries:Fe,factor:this.storage.retryOptions.retryDelayMultiplier,maxTimeout:this.storage.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.storage.retryOptions.totalTimeout*1e3});return Ce?Ve.then(()=>{if(Ce)return Ce()}).catch(Ce):Ve}setMetadata(be,we,Ce){const je=typeof we=="object"?we:{};Ce=typeof we=="function"?we:Ce,this.disableAutoRetryConditionallyIdempotent_(this.methods.setMetadata,I.AvailableServiceObjectMethods.setMetadata,je),super.setMetadata(be,je).then(Fe=>Ce(null,...Fe)).catch(Ce).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}setStorageClass(be,we,Ce){Ce=typeof we=="function"?we:Ce;const Fe={...typeof we=="object"?we:{},storageClass:be.replace(/-/g,"_").replace(/([a-z])([A-Z])/g,(Ve,Ge,Le)=>Ge+"_"+Le).toUpperCase()};this.copy(this,Fe,(Ve,Ge,Le)=>{if(Ve){Ce(Ve,Le);return}this.metadata=Ge.metadata,Ce(null,Le)})}setUserProject(be){this.bucket.setUserProject.call(this,be)}startResumableUpload_(be,we={}){var Ce;(Ce=we.metadata)!==null&&Ce!==void 0||(we.metadata={});const je=this.storage.retryOptions;this.shouldRetryBasedOnPreconditionAndIdempotencyStrat(we.preconditionOpts)||(je.autoRetry=!1);const Fe={authClient:this.storage.authClient,apiEndpoint:this.storage.apiEndpoint,bucket:this.bucket.name,customRequestOptions:this.getRequestInterceptors().reduce((Ge,Le)=>Le(Ge),{}),file:this.name,generation:this.generation,isPartialUpload:we.isPartialUpload,key:this.encryptionKey,kmsKeyName:this.kmsKeyName,metadata:we.metadata,offset:we.offset,predefinedAcl:we.predefinedAcl,private:we.private,public:we.public,uri:we.uri,userProject:we.userProject||this.userProject,retryOptions:{...je},params:we?.preconditionOpts||this.instancePreconditionOpts,chunkSize:we?.chunkSize,highWaterMark:we?.highWaterMark,universeDomain:this.bucket.storage.universeDomain,[j.GCCL_GCS_CMD_KEY]:we[j.GCCL_GCS_CMD_KEY]};let Ve;try{Ve=E.upload(Fe)}catch(Ge){be.destroy(Ge),this.storage.retryOptions.autoRetry=this.instanceRetryValue;return}Ve.on("response",Ge=>{be.emit("response",Ge)}).on("uri",Ge=>{be.emit("uri",Ge)}).on("metadata",Ge=>{this.metadata=Ge,be.emit("metadata")}).on("finish",()=>{be.emit("complete")}).on("progress",Ge=>be.emit("progress",Ge)),be.setWritable(Ve),this.storage.retryOptions.autoRetry=this.instanceRetryValue}startSimpleUpload_(be,we={}){var Ce;(Ce=we.metadata)!==null&&Ce!==void 0||(we.metadata={});const je=this.storage.apiEndpoint,Fe=this.bucket.name,Ve=`${je}/upload/storage/v1/b/${Fe}/o`,Ge={qs:{name:this.name},uri:Ve,[j.GCCL_GCS_CMD_KEY]:we[j.GCCL_GCS_CMD_KEY]};this.generation!==void 0&&(Ge.qs.ifGenerationMatch=this.generation),this.kmsKeyName!==void 0&&(Ge.qs.kmsKeyName=this.kmsKeyName),typeof we.timeout=="number"&&(Ge.timeout=we.timeout),(we.userProject||this.userProject)&&(Ge.qs.userProject=we.userProject||this.userProject),we.predefinedAcl?Ge.qs.predefinedAcl=we.predefinedAcl:we.private?Ge.qs.predefinedAcl="private":we.public&&(Ge.qs.predefinedAcl="publicRead"),Object.assign(Ge.qs,this.instancePreconditionOpts,we.preconditionOpts),a.util.makeWritableStream(be,{makeAuthenticatedRequest:Le=>{this.request(Le,(Be,$e,he)=>{if(Be){be.destroy(Be);return}this.metadata=$e,be.emit("metadata",$e),be.emit("response",he),be.emit("complete")})},metadata:we.metadata,request:Ge})}disableAutoRetryConditionallyIdempotent_(be,we,Ce){var je,Fe,Ve,Ge;(typeof be=="object"&&((Fe=(je=be?.reqOpts)===null||je===void 0?void 0:je.qs)===null||Fe===void 0?void 0:Fe.ifGenerationMatch)===void 0&&Ce?.ifGenerationMatch===void 0&&we===I.AvailableServiceObjectMethods.delete&&this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryNever)&&(this.storage.retryOptions.autoRetry=!1),(typeof be=="object"&&((Ge=(Ve=be?.reqOpts)===null||Ve===void 0?void 0:Ve.qs)===null||Ge===void 0?void 0:Ge.ifMetagenerationMatch)===void 0&&Ce?.ifMetagenerationMatch===void 0&&we===I.AvailableServiceObjectMethods.setMetadata&&this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===w.IdempotencyStrategy.RetryNever)&&(this.storage.retryOptions.autoRetry=!1)}async getBufferFromReadable(be){const we=[];for await(const Ce of be)we.push(Ce);return Buffer.concat(we)}}file.File=Ae,m=new WeakSet,c=async function(be,we={}){const Ce=this.metadata;let je=!!(we.crc32c||we.md5);if(we.crc32c&&Ce.crc32c&&(je=!be.test("crc32c",Ce.crc32c)),we.md5&&Ce.md5Hash&&(je=!be.test("md5",Ce.md5Hash)),je){const Fe=[];let Ve="",Ge="";try{await this.delete(),we.md5&&!Ce.md5Hash?(Ve="MD5_NOT_AVAILABLE",Ge=Te.MD5_NOT_AVAILABLE):(Ve="FILE_NO_UPLOAD",Ge=Te.UPLOAD_MISMATCH)}catch(Be){const $e=Be;Ve="FILE_NO_UPLOAD_DELETE",Ge=`${Te.UPLOAD_MISMATCH_DELETE_FAIL}${$e.message}`,Fe.push($e)}const Le=new le(Ge);throw Le.code=Ve,Le.errors=Fe,Le}return!0};/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */return(0,o.promisifyAll)(Ae,{exclude:["cloudStorageURI","publicUrl","request","save","setEncryptionKey","shouldRetryBasedOnPreconditionAndIdempotencyStrat","getBufferFromReadable","restore"]}),file}var iam={},hasRequiredIam;function requireIam(){if(hasRequiredIam)return iam;hasRequiredIam=1,Object.defineProperty(iam,"__esModule",{value:!0}),iam.Iam=iam.IAMExceptionMessages=void 0;const t=requireSrc$5(),e=requireUtil$6();var r;(function(d){d.POLICY_OBJECT_REQUIRED="A policy object is required.",d.PERMISSIONS_REQUIRED="Permissions are required."})(r||(iam.IAMExceptionMessages=r={}));class u{constructor(m){this.request_=m.request.bind(m),this.resourceId_="buckets/"+m.getId()}getPolicy(m,c){const{options:a,callback:o}=(0,e.normalize)(m,c),s={};a.userProject&&(s.userProject=a.userProject),a.requestedPolicyVersion!==null&&a.requestedPolicyVersion!==void 0&&(s.optionsRequestedPolicyVersion=a.requestedPolicyVersion),this.request_({uri:"/iam",qs:s},o)}setPolicy(m,c,a){if(m===null||typeof m!="object")throw new Error(r.POLICY_OBJECT_REQUIRED);const{options:o,callback:s}=(0,e.normalize)(c,a);let h;m.etag===void 0&&(h=0),this.request_({method:"PUT",uri:"/iam",maxRetries:h,json:Object.assign({resourceId:this.resourceId_},m),qs:o},s)}testPermissions(m,c,a){if(!Array.isArray(m)&&typeof m!="string")throw new Error(r.PERMISSIONS_REQUIRED);const{options:o,callback:s}=(0,e.normalize)(c,a),h=Array.isArray(m)?m:[m],v=Object.assign({permissions:h},o);this.request_({uri:"/iam/testPermissions",qs:v,useQuerystring:!0},(E,y)=>{if(E){s(E,null,y);return}const A=Array.isArray(y.permissions)?y.permissions:[],w=h.reduce((I,_)=>(I[_]=A.indexOf(_)>-1,I),{});s(null,w,y)})}}iam.Iam=u;/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */return(0,t.promisifyAll)(u),iam}var notification={},hasRequiredNotification;function requireNotification(){if(hasRequiredNotification)return notification;hasRequiredNotification=1,Object.defineProperty(notification,"__esModule",{value:!0}),notification.Notification=void 0;const t=requireNodejsCommon(),e=requireSrc$5();class r extends t.ServiceObject{constructor(d,m){const c={},a={create:!0,delete:{reqOpts:{qs:c}},get:{reqOpts:{qs:c}},getMetadata:{reqOpts:{qs:c}},exists:!0};super({parent:d,baseUrl:"/notificationConfigs",id:m.toString(),createMethod:d.createNotification.bind(d),methods:a})}}notification.Notification=r;/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */return(0,e.promisifyAll)(r),notification}var hasRequiredBucket;function requireBucket(){if(hasRequiredBucket)return bucket;hasRequiredBucket=1;var t=bucket&&bucket.__createBinding||(Object.create?function(ie,ue,le,ne){ne===void 0&&(ne=le);var ye=Object.getOwnPropertyDescriptor(ue,le);(!ye||("get"in ye?!ue.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return ue[le]}}),Object.defineProperty(ie,ne,ye)}:function(ie,ue,le,ne){ne===void 0&&(ne=le),ie[ne]=ue[le]}),e=bucket&&bucket.__setModuleDefault||(Object.create?function(ie,ue){Object.defineProperty(ie,"default",{enumerable:!0,value:ue})}:function(ie,ue){ie.default=ue}),r=bucket&&bucket.__importStar||function(){var ie=function(ue){return ie=Object.getOwnPropertyNames||function(le){var ne=[];for(var ye in le)Object.prototype.hasOwnProperty.call(le,ye)&&(ne[ne.length]=ye);return ne},ie(ue)};return function(ue){if(ue&&ue.__esModule)return ue;var le={};if(ue!=null)for(var ne=ie(ue),ye=0;ye<ne.length;ye++)ne[ye]!=="default"&&t(le,ue,ne[ye]);return e(le,ue),le}}(),u=bucket&&bucket.__importDefault||function(ie){return ie&&ie.__esModule?ie:{default:ie}};Object.defineProperty(bucket,"__esModule",{value:!0}),bucket.Bucket=bucket.BucketExceptionMessages=bucket.AvailableServiceObjectMethods=bucket.BucketActionToHTTPMethod=void 0;const d=requireNodejsCommon(),m=requireSrc$4(),c=requireSrc$5(),a=r(require$$1$3),o=u(requireMime()),s=r(require$$1$3),h=u(requirePLimit()),v=require$$1$3,E=u(requireLib$1()),y=requireUtil$6(),A=requireAcl(),w=requireFile(),I=requireIam(),_=requireNotification(),S=requireStorage$2(),j=requireSigner(),K=require$$1$3,J=require$$1$3;var H;(function(ie){ie.list="GET"})(H||(bucket.BucketActionToHTTPMethod=H={}));var U;(function(ie){ie[ie.setMetadata=0]="setMetadata",ie[ie.delete=1]="delete"})(U||(bucket.AvailableServiceObjectMethods=U={}));var P;(function(ie){ie.PROVIDE_SOURCE_FILE="You must provide at least one source file.",ie.DESTINATION_FILE_NOT_SPECIFIED="A destination file must be specified.",ie.CHANNEL_ID_REQUIRED="An ID is required to create a channel.",ie.TOPIC_NAME_REQUIRED="A valid topic name is required.",ie.CONFIGURATION_OBJECT_PREFIX_REQUIRED="A configuration object with a prefix is required.",ie.SPECIFY_FILE_NAME="A file name must be specified.",ie.METAGENERATION_NOT_PROVIDED="A metageneration must be provided.",ie.SUPPLY_NOTIFICATION_ID="You must supply a notification ID."})(P||(bucket.BucketExceptionMessages=P={}));class Z extends d.ServiceObject{getFilesStream(ue){return new K.Readable}constructor(ue,le,ne){var ye,fe,Te,Ae;ne=ne||{},le=le.replace(/^gs:\/\//,"").replace(/\/+$/,"");const Se={};!((ye=ne?.preconditionOpts)===null||ye===void 0)&&ye.ifGenerationMatch&&(Se.ifGenerationMatch=ne.preconditionOpts.ifGenerationMatch),!((fe=ne?.preconditionOpts)===null||fe===void 0)&&fe.ifGenerationNotMatch&&(Se.ifGenerationNotMatch=ne.preconditionOpts.ifGenerationNotMatch),!((Te=ne?.preconditionOpts)===null||Te===void 0)&&Te.ifMetagenerationMatch&&(Se.ifMetagenerationMatch=ne.preconditionOpts.ifMetagenerationMatch),!((Ae=ne?.preconditionOpts)===null||Ae===void 0)&&Ae.ifMetagenerationNotMatch&&(Se.ifMetagenerationNotMatch=ne.preconditionOpts.ifMetagenerationNotMatch);const be=ne.userProject;typeof be=="string"&&(Se.userProject=be);const we={create:{reqOpts:{qs:Se}},delete:{reqOpts:{qs:Se}},exists:{reqOpts:{qs:Se}},get:{reqOpts:{qs:Se}},getMetadata:{reqOpts:{qs:Se}},setMetadata:{reqOpts:{qs:Se}}};super({parent:ue,baseUrl:"/b",id:le,createMethod:ue.createBucket.bind(ue),methods:we}),this.name=le,this.storage=ue,this.userProject=ne.userProject,this.acl=new A.Acl({request:this.request.bind(this),pathPrefix:"/acl"}),this.acl.default=new A.Acl({request:this.request.bind(this),pathPrefix:"/defaultObjectAcl"}),this.crc32cGenerator=ne.crc32cGenerator||this.storage.crc32cGenerator,this.iam=new I.Iam(this),this.getFilesStream=m.paginator.streamify("getFiles"),this.instanceRetryValue=ue.retryOptions.autoRetry,this.instancePreconditionOpts=ne?.preconditionOpts}get cloudStorageURI(){const ue=new J.URL("gs://");return ue.host=this.name,ue}addLifecycleRule(ue,le,ne){let ye={};typeof le=="function"?ne=le:le&&(ye=le),ye=ye||{};const fe=Array.isArray(ue)?ue:[ue];for(const Te of fe)Te.condition.createdBefore instanceof Date&&(Te.condition.createdBefore=Te.condition.createdBefore.toISOString().replace(/T.+$/,"")),Te.condition.customTimeBefore instanceof Date&&(Te.condition.customTimeBefore=Te.condition.customTimeBefore.toISOString().replace(/T.+$/,"")),Te.condition.noncurrentTimeBefore instanceof Date&&(Te.condition.noncurrentTimeBefore=Te.condition.noncurrentTimeBefore.toISOString().replace(/T.+$/,""));if(ye.append===!1){this.setMetadata({lifecycle:{rule:fe}},ye,ne);return}this.getMetadata((Te,Ae)=>{var Se,be;if(Te){ne(Te);return}const we=Array.isArray((Se=Ae.lifecycle)===null||Se===void 0?void 0:Se.rule)?(be=Ae.lifecycle)===null||be===void 0?void 0:be.rule:[];this.setMetadata({lifecycle:{rule:we.concat(fe)}},ye,ne)})}combine(ue,le,ne,ye){var fe;if(!Array.isArray(ue)||ue.length===0)throw new Error(P.PROVIDE_SOURCE_FILE);if(!le)throw new Error(P.DESTINATION_FILE_NOT_SPECIFIED);let Te={};typeof ne=="function"?ye=ne:ne&&(Te=ne),this.disableAutoRetryConditionallyIdempotent_(this.methods.setMetadata,U.setMetadata,Te);const Ae=we=>we instanceof w.File?we:this.file(we);ue=ue.map(Ae);const Se=Ae(le);if(ye=ye||d.util.noop,!Se.metadata.contentType){const we=o.default.getType(Se.name)||void 0;we&&(Se.metadata.contentType=we)}let be=this.storage.retryOptions.maxRetries;(((fe=Se?.instancePreconditionOpts)===null||fe===void 0?void 0:fe.ifGenerationMatch)===void 0&&Te.ifGenerationMatch===void 0&&this.storage.retryOptions.idempotencyStrategy===S.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===S.IdempotencyStrategy.RetryNever)&&(be=0),Te.ifGenerationMatch===void 0&&Object.assign(Te,Se.instancePreconditionOpts,Te),Se.request({method:"POST",uri:"/compose",maxRetries:be,json:{destination:{contentType:Se.metadata.contentType,contentEncoding:Se.metadata.contentEncoding},sourceObjects:ue.map(we=>{const Ce={name:we.name};return we.metadata&&we.metadata.generation&&(Ce.generation=parseInt(we.metadata.generation.toString())),Ce})},qs:Te},(we,Ce)=>{if(this.storage.retryOptions.autoRetry=this.instanceRetryValue,we){ye(we,null,Ce);return}ye(null,Se,Ce)})}createChannel(ue,le,ne,ye){if(typeof ue!="string")throw new Error(P.CHANNEL_ID_REQUIRED);let fe={};typeof ne=="function"?ye=ne:ne&&(fe=ne),this.request({method:"POST",uri:"/o/watch",json:Object.assign({id:ue,type:"web_hook"},le),qs:fe},(Te,Ae)=>{if(Te){ye(Te,null,Ae);return}const Se=Ae.resourceId,be=this.storage.channel(ue,Se);be.metadata=Ae,ye(null,be,Ae)})}createNotification(ue,le,ne){let ye={};if(typeof le=="function"?ne=le:le&&(ye=le),ue!==null&&typeof ue=="object"&&d.util.isCustomType(ue,"pubsub/topic")&&(ue=ue.name),typeof ue!="string")throw new Error(P.TOPIC_NAME_REQUIRED);const Te=Object.assign({topic:ue},ye);Te.topic.indexOf("projects")!==0&&(Te.topic="projects/{{projectId}}/topics/"+Te.topic),Te.topic=`//pubsub.${this.storage.universeDomain}/`+Te.topic,Te.payloadFormat||(Te.payloadFormat="JSON_API_V1");const Ae={};Te.userProject&&(Ae.userProject=Te.userProject,delete Te.userProject),this.request({method:"POST",uri:"/notificationConfigs",json:(0,y.convertObjKeysToSnakeCase)(Te),qs:Ae,maxRetries:0},(Se,be)=>{if(Se){ne(Se,null,be);return}const we=this.notification(be.id);we.metadata=be,ne(null,we,be)})}deleteFiles(ue,le){let ne={};typeof ue=="function"?le=ue:ue&&(ne=ue);const ye=10,fe=1e3,Te=[],Ae=Se=>Se.delete(ne).catch(be=>{if(!ne.force)throw be;Te.push(be)});(async()=>{try{let Se=[];const be=(0,h.default)(ye),we=this.getFilesStream(ne);for await(const Ce of we)Se.length>=fe&&(await Promise.all(Se),Se=[]),Se.push(be(()=>Ae(Ce)).catch(je=>{throw we.destroy(),je}));await Promise.all(Se),le(Te.length>0?Te:null)}catch(Se){le(Se);return}})()}deleteLabels(ue,le,ne){let ye=new Array,fe={};typeof ue=="function"?ne=ue:typeof ue=="string"?ye=[ue]:Array.isArray(ue)?ye=ue:ue&&(fe=ue),typeof le=="function"?ne=le:le&&(fe=le);const Te=Ae=>{const Se=Ae.reduce((be,we)=>(be[we]=null,be),{});fe?.ifMetagenerationMatch!==void 0?this.setLabels(Se,fe,ne):this.setLabels(Se,ne)};ye.length===0?this.getLabels((Ae,Se)=>{if(Ae){ne(Ae);return}Te(Object.keys(Se))}):Te(ye)}disableRequesterPays(ue,le){let ne={};typeof ue=="function"?le=ue:ue&&(ne=ue),this.setMetadata({billing:{requesterPays:!1}},ne,le)}enableLogging(ue,le){if(!ue||typeof ue=="function"||typeof ue.prefix>"u")throw new Error(P.CONFIGURATION_OBJECT_PREFIX_REQUIRED);let ne=this.id;ue.bucket&&ue.bucket instanceof Z?ne=ue.bucket.id:ue.bucket&&typeof ue.bucket=="string"&&(ne=ue.bucket);const ye={};ue?.ifMetagenerationMatch&&(ye.ifMetagenerationMatch=ue.ifMetagenerationMatch),ue?.ifMetagenerationNotMatch&&(ye.ifMetagenerationNotMatch=ue.ifMetagenerationNotMatch),(async()=>{try{const[fe]=await this.iam.getPolicy();fe.bindings.push({members:["group:cloud-storage-analytics@google.com"],role:"roles/storage.objectCreator"}),await this.iam.setPolicy(fe),this.setMetadata({logging:{logBucket:ne,logObjectPrefix:ue.prefix}},ye,le)}catch(fe){le(fe);return}})()}enableRequesterPays(ue,le){let ne={};typeof ue=="function"?le=ue:ue&&(ne=ue),this.setMetadata({billing:{requesterPays:!0}},ne,le)}file(ue,le){if(!ue)throw Error(P.SPECIFY_FILE_NAME);return new w.File(this,ue,le)}getFiles(ue,le){let ne=typeof ue=="object"?ue:{};le||(le=ue),ne=Object.assign({},ne),ne.fields&&ne.autoPaginate&&!ne.fields.includes("nextPageToken")&&(ne.fields=`${ne.fields},nextPageToken`),this.request({uri:"/o",qs:ne},(ye,fe)=>{if(ye){le(ye,null,null,fe);return}const Ae=(fe.items?fe.items:[]).map(be=>{const we={};if(ne.fields)return be;ne.versions&&(we.generation=be.generation),be.kmsKeyName&&(we.kmsKeyName=be.kmsKeyName);const Ce=this.file(be.name,we);return Ce.metadata=be,Ce});let Se=null;fe.nextPageToken&&(Se=Object.assign({},ne,{pageToken:fe.nextPageToken})),le(null,Ae,Se,fe)})}getLabels(ue,le){let ne={};typeof ue=="function"?le=ue:ue&&(ne=ue),this.getMetadata(ne,(ye,fe)=>{if(ye){le(ye,null);return}le(null,fe?.labels||{})})}getNotifications(ue,le){let ne={};typeof ue=="function"?le=ue:ue&&(ne=ue),this.request({uri:"/notificationConfigs",qs:ne},(ye,fe)=>{if(ye){le(ye,null,fe);return}const Ae=(fe.items?fe.items:[]).map(Se=>{const be=this.notification(Se.id);return be.metadata=Se,be});le(null,Ae,fe)})}getSignedUrl(ue,le){const ye={method:H[ue.action],expires:ue.expires,version:ue.version,cname:ue.cname,extensionHeaders:ue.extensionHeaders||{},queryParams:ue.queryParams||{},host:ue.host,signingEndpoint:ue.signingEndpoint};this.signer||(this.signer=new j.URLSigner(this.storage.authClient,this,void 0,this.storage)),this.signer.getSignedUrl(ye).then(fe=>le(null,fe),le)}lock(ue,le){const ne=typeof ue;if(ne!=="number"&&ne!=="string")throw new Error(P.METAGENERATION_NOT_PROVIDED);this.request({method:"POST",uri:"/lockRetentionPolicy",qs:{ifMetagenerationMatch:ue}},le)}async restore(ue){const[le]=await this.request({method:"POST",uri:"/restore",qs:ue});return le}makePrivate(ue,le){var ne,ye,fe,Te;const Ae=typeof ue=="object"?ue:{};le=typeof ue=="function"?ue:le,Ae.private=!0;const Se={predefinedAcl:"projectPrivate"};Ae.userProject&&(Se.userProject=Ae.userProject),!((ne=Ae.preconditionOpts)===null||ne===void 0)&&ne.ifGenerationMatch&&(Se.ifGenerationMatch=Ae.preconditionOpts.ifGenerationMatch),!((ye=Ae.preconditionOpts)===null||ye===void 0)&&ye.ifGenerationNotMatch&&(Se.ifGenerationNotMatch=Ae.preconditionOpts.ifGenerationNotMatch),!((fe=Ae.preconditionOpts)===null||fe===void 0)&&fe.ifMetagenerationMatch&&(Se.ifMetagenerationMatch=Ae.preconditionOpts.ifMetagenerationMatch),!((Te=Ae.preconditionOpts)===null||Te===void 0)&&Te.ifMetagenerationNotMatch&&(Se.ifMetagenerationNotMatch=Ae.preconditionOpts.ifMetagenerationNotMatch);const be={...Ae.metadata,acl:null};this.setMetadata(be,Se,we=>{we&&le(we),(Ae.includeFiles?(0,v.promisify)(this.makeAllFilesPublicPrivate_).call(this,Ae):Promise.resolve([])).then(je=>le(null,je)).catch(le)})}makePublic(ue,le){const ne=typeof ue=="object"?ue:{};le=typeof ue=="function"?ue:le;const ye={public:!0,...ne};this.acl.add({entity:"allUsers",role:"READER"}).then(()=>this.acl.default.add({entity:"allUsers",role:"READER"})).then(()=>ye.includeFiles?(0,v.promisify)(this.makeAllFilesPublicPrivate_).call(this,ye):[]).then(fe=>le(null,fe),le)}notification(ue){if(!ue)throw new Error(P.SUPPLY_NOTIFICATION_ID);return new _.Notification(this,ue)}removeRetentionPeriod(ue,le){const ne=typeof ue=="object"?ue:{};le=typeof ue=="function"?ue:le,this.setMetadata({retentionPolicy:null},ne,le)}request(ue,le){return this.userProject&&(!ue.qs||!ue.qs.userProject)&&(ue.qs={...ue.qs,userProject:this.userProject}),super.request(ue,le)}setLabels(ue,le,ne){const ye=typeof le=="object"?le:{};ne=typeof le=="function"?le:ne,ne=ne||d.util.noop,this.setMetadata({labels:ue},ye,ne)}setMetadata(ue,le,ne){const ye=typeof le=="object"?le:{};ne=typeof le=="function"?le:ne,this.disableAutoRetryConditionallyIdempotent_(this.methods.setMetadata,U.setMetadata,ye),super.setMetadata(ue,ye).then(fe=>ne(null,...fe)).catch(ne).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}setRetentionPeriod(ue,le,ne){const ye=typeof le=="object"?le:{};ne=typeof le=="function"?le:ne,this.setMetadata({retentionPolicy:{retentionPeriod:ue.toString()}},ye,ne)}setCorsConfiguration(ue,le,ne){const ye=typeof le=="object"?le:{};ne=typeof le=="function"?le:ne,this.setMetadata({cors:ue},ye,ne)}setStorageClass(ue,le,ne){const ye=typeof le=="object"?le:{};ne=typeof le=="function"?le:ne,ue=ue.replace(/-/g,"_").replace(/([a-z])([A-Z])/g,(fe,Te,Ae)=>Te+"_"+Ae).toUpperCase(),this.setMetadata({storageClass:ue},ye,ne)}setUserProject(ue){this.userProject=ue,["create","delete","exists","get","getMetadata","setMetadata"].forEach(ne=>{const ye=this.methods[ne];typeof ye=="object"&&(typeof ye.reqOpts=="object"?Object.assign(ye.reqOpts.qs,{userProject:ue}):ye.reqOpts={qs:{userProject:ue}})})}upload(ue,le,ne){var ye,fe;const Te=we=>{const Ce=(0,E.default)(async je=>{await new Promise((Fe,Ve)=>{var Ge,Le;we===0&&(!((Le=(Ge=be?.storage)===null||Ge===void 0?void 0:Ge.retryOptions)===null||Le===void 0)&&Le.autoRetry)&&(be.storage.retryOptions.autoRetry=!1);const Be=be.createWriteStream(Ae);Ae.onUploadProgress&&Be.on("progress",Ae.onUploadProgress),a.createReadStream(ue).on("error",je).pipe(Be).on("error",$e=>this.storage.retryOptions.autoRetry&&this.storage.retryOptions.retryableErrorFn($e)?Ve($e):je($e)).on("finish",()=>Fe())})},{retries:we,factor:this.storage.retryOptions.retryDelayMultiplier,maxTimeout:this.storage.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.storage.retryOptions.totalTimeout*1e3});return ne?Ce.then(()=>{if(ne)return ne(null,be,be.metadata)}).catch(ne):Ce};if(commonjsGlobal$4.GCLOUD_SANDBOX_ENV)return;let Ae=typeof le=="object"?le:{};ne=typeof le=="function"?le:ne,Ae=Object.assign({metadata:{}},Ae);let Se=this.storage.retryOptions.maxRetries;(((ye=Ae?.preconditionOpts)===null||ye===void 0?void 0:ye.ifGenerationMatch)===void 0&&((fe=this.instancePreconditionOpts)===null||fe===void 0?void 0:fe.ifGenerationMatch)===void 0&&this.storage.retryOptions.idempotencyStrategy===S.IdempotencyStrategy.RetryConditional||this.storage.retryOptions.idempotencyStrategy===S.IdempotencyStrategy.RetryNever)&&(Se=0);let be;if(Ae.destination instanceof w.File)be=Ae.destination;else if(Ae.destination!==null&&typeof Ae.destination=="string")be=this.file(Ae.destination,{encryptionKey:Ae.encryptionKey,kmsKeyName:Ae.kmsKeyName,preconditionOpts:this.instancePreconditionOpts});else{const we=s.basename(ue);be=this.file(we,{encryptionKey:Ae.encryptionKey,kmsKeyName:Ae.kmsKeyName,preconditionOpts:this.instancePreconditionOpts})}Te(Se)}makeAllFilesPublicPrivate_(ue,le){const ye=[],fe=[],Te=typeof ue=="object"?ue:{};le=typeof ue=="function"?ue:le;const Ae=async Se=>{try{await(Te.public?Se.makePublic():Se.makePrivate(Te)),fe.push(Se)}catch(be){if(!Te.force)throw be;ye.push(be)}};this.getFiles(Te).then(([Se])=>{const be=(0,h.default)(10),we=Se.map(Ce=>be(()=>Ae(Ce)));return Promise.all(we)}).then(()=>le(ye.length>0?ye:null,fe),Se=>le(Se,fe))}getId(){return this.id}disableAutoRetryConditionallyIdempotent_(ue,le,ne){var ye,fe;typeof ue=="object"&&((fe=(ye=ue?.reqOpts)===null||ye===void 0?void 0:ye.qs)===null||fe===void 0?void 0:fe.ifMetagenerationMatch)===void 0&&ne?.ifMetagenerationMatch===void 0&&(le===U.setMetadata||le===U.delete)&&this.storage.retryOptions.idempotencyStrategy===S.IdempotencyStrategy.RetryConditional?this.storage.retryOptions.autoRetry=!1:this.storage.retryOptions.idempotencyStrategy===S.IdempotencyStrategy.RetryNever&&(this.storage.retryOptions.autoRetry=!1)}}bucket.Bucket=Z;/*! Developer Documentation
 *
 * These methods can be auto-paginated.
 */m.paginator.extend(Z,"getFiles");/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */return(0,c.promisifyAll)(Z,{exclude:["cloudStorageURI","request","file","notification","restore"]}),bucket}var channel={},hasRequiredChannel;function requireChannel(){if(hasRequiredChannel)return channel;hasRequiredChannel=1,Object.defineProperty(channel,"__esModule",{value:!0}),channel.Channel=void 0;const t=requireNodejsCommon(),e=requireSrc$5();class r extends t.ServiceObject{constructor(d,m,c){const a={parent:d,baseUrl:"/channels",id:"",methods:{}};super(a),this.metadata.id=m,this.metadata.resourceId=c}stop(d){d=d||t.util.noop,this.request({method:"POST",uri:"/stop",json:this.metadata},(m,c)=>{d(m,c)})}}channel.Channel=r;/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */return(0,e.promisifyAll)(r),channel}var hmacKey={},hasRequiredHmacKey;function requireHmacKey(){if(hasRequiredHmacKey)return hmacKey;hasRequiredHmacKey=1,Object.defineProperty(hmacKey,"__esModule",{value:!0}),hmacKey.HmacKey=void 0;const t=requireNodejsCommon(),e=requireStorage$2(),r=requireSrc$5();class u extends t.ServiceObject{constructor(m,c,a){const o={delete:!0,get:!0,getMetadata:!0,setMetadata:{reqOpts:{method:"PUT"}}},s=a&&a.projectId||m.projectId;super({parent:m,id:c,baseUrl:`/projects/${s}/hmacKeys`,methods:o}),this.storage=m,this.instanceRetryValue=m.retryOptions.autoRetry}setMetadata(m,c,a){this.storage.retryOptions.idempotencyStrategy!==e.IdempotencyStrategy.RetryAlways&&(this.storage.retryOptions.autoRetry=!1);const o=typeof c=="object"?c:{};a=typeof c=="function"?c:a,super.setMetadata(m,o).then(s=>a(null,...s)).catch(a).finally(()=>{this.storage.retryOptions.autoRetry=this.instanceRetryValue})}}hmacKey.HmacKey=u;/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */return(0,r.promisifyAll)(u),hmacKey}var hasRequiredStorage$2;function requireStorage$2(){return hasRequiredStorage$2||(hasRequiredStorage$2=1,function(t){var e={};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.RETRYABLE_ERR_FN_DEFAULT=t.MAX_RETRY_DELAY_DEFAULT=t.TOTAL_TIMEOUT_DEFAULT=t.RETRY_DELAY_MULTIPLIER_DEFAULT=t.MAX_RETRY_DEFAULT=t.AUTO_RETRY_DEFAULT=t.PROTOCOL_REGEX=t.StorageExceptionMessages=t.ExceptionMessages=t.IdempotencyStrategy=void 0;const r=requireNodejsCommon(),u=requireSrc$4(),d=requireSrc$5(),m=require$$1$3,c=requireBucket(),a=requireChannel(),o=requireFile(),s=requireUtil$6(),h=requirePackageJsonHelper(),v=requireHmacKey(),E=requireCrc32c(),y=requireSrc$b();var A;(function(K){K[K.RetryAlways=0]="RetryAlways",K[K.RetryConditional=1]="RetryConditional",K[K.RetryNever=2]="RetryNever"})(A||(t.IdempotencyStrategy=A={}));var w;(function(K){K.EXPIRATION_DATE_INVALID="The expiration date provided was invalid.",K.EXPIRATION_DATE_PAST="An expiration date cannot be in the past."})(w||(t.ExceptionMessages=w={}));var I;(function(K){K.BUCKET_NAME_REQUIRED="A bucket name is needed to use Cloud Storage.",K.BUCKET_NAME_REQUIRED_CREATE="A name is required to create a bucket.",K.HMAC_SERVICE_ACCOUNT="The first argument must be a service account email to create an HMAC key.",K.HMAC_ACCESS_ID="An access ID is needed to create an HmacKey object."})(I||(t.StorageExceptionMessages=I={})),t.PROTOCOL_REGEX=/^(\w*):\/\//,t.AUTO_RETRY_DEFAULT=!0,t.MAX_RETRY_DEFAULT=3,t.RETRY_DELAY_MULTIPLIER_DEFAULT=2,t.TOTAL_TIMEOUT_DEFAULT=600,t.MAX_RETRY_DELAY_DEFAULT=64;const _=A.RetryConditional,S=function(K){var J;const H=U=>U.includes("eai_again")||U==="econnreset"||U==="unexpected connection closure"||U==="epipe"||U==="socket connection timeout";if(K){if([408,429,500,502,503,504].indexOf(K.code)!==-1)return!0;if(typeof K.code=="string"){if(["408","429","500","502","503","504"].indexOf(K.code)!==-1)return!0;const U=K.code.toLowerCase();if(H(U))return!0}if(K.errors)for(const U of K.errors){const P=(J=U?.reason)===null||J===void 0?void 0:J.toString().toLowerCase();if(P&&H(P))return!0}}return!1};t.RETRYABLE_ERR_FN_DEFAULT=S;/*! Developer Documentation
 *
 * Invoke this method to create a new Storage object bound with pre-determined
 * configuration options. For each object that can be created (e.g., a bucket),
 * there is an equivalent static and instance method. While they are classes,
 * they can be instantiated without use of the `new` keyword.
 */class j extends r.Service{getBucketsStream(){return new m.Readable}getHmacKeysStream(){return new m.Readable}constructor(J={}){var H,U,P,Z,ie,ue,le,ne,ye,fe,Te,Ae,Se,be;let Ce=`https://storage.${J.universeDomain||y.DEFAULT_UNIVERSE}`,je=!1;const Fe=e.STORAGE_EMULATOR_HOST;typeof Fe=="string"&&(Ce=j.sanitizeEndpoint(Fe),je=!0),J.apiEndpoint&&J.apiEndpoint!==Ce&&(Ce=j.sanitizeEndpoint(J.apiEndpoint),je=!0),J=Object.assign({},J,{apiEndpoint:Ce});const Ve=Fe||`${J.apiEndpoint}/storage/v1`,Ge={apiEndpoint:J.apiEndpoint,retryOptions:{autoRetry:((H=J.retryOptions)===null||H===void 0?void 0:H.autoRetry)!==void 0?(U=J.retryOptions)===null||U===void 0?void 0:U.autoRetry:t.AUTO_RETRY_DEFAULT,maxRetries:!((P=J.retryOptions)===null||P===void 0)&&P.maxRetries?(Z=J.retryOptions)===null||Z===void 0?void 0:Z.maxRetries:t.MAX_RETRY_DEFAULT,retryDelayMultiplier:!((ie=J.retryOptions)===null||ie===void 0)&&ie.retryDelayMultiplier?(ue=J.retryOptions)===null||ue===void 0?void 0:ue.retryDelayMultiplier:t.RETRY_DELAY_MULTIPLIER_DEFAULT,totalTimeout:!((le=J.retryOptions)===null||le===void 0)&&le.totalTimeout?(ne=J.retryOptions)===null||ne===void 0?void 0:ne.totalTimeout:t.TOTAL_TIMEOUT_DEFAULT,maxRetryDelay:!((ye=J.retryOptions)===null||ye===void 0)&&ye.maxRetryDelay?(fe=J.retryOptions)===null||fe===void 0?void 0:fe.maxRetryDelay:t.MAX_RETRY_DELAY_DEFAULT,retryableErrorFn:!((Te=J.retryOptions)===null||Te===void 0)&&Te.retryableErrorFn?(Ae=J.retryOptions)===null||Ae===void 0?void 0:Ae.retryableErrorFn:t.RETRYABLE_ERR_FN_DEFAULT,idempotencyStrategy:((Se=J.retryOptions)===null||Se===void 0?void 0:Se.idempotencyStrategy)!==void 0?(be=J.retryOptions)===null||be===void 0?void 0:be.idempotencyStrategy:_},baseUrl:Ve,customEndpoint:je,useAuthWithCustomEndpoint:J?.useAuthWithCustomEndpoint,projectIdRequired:!1,scopes:["https://www.googleapis.com/auth/iam","https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/devstorage.full_control"],packageJson:(0,h.getPackageJSON)()};super(Ge,J),this.acl=j.acl,this.crc32cGenerator=J.crc32cGenerator||E.CRC32C_DEFAULT_VALIDATOR_GENERATOR,this.retryOptions=Ge.retryOptions,this.getBucketsStream=u.paginator.streamify("getBuckets"),this.getHmacKeysStream=u.paginator.streamify("getHmacKeys")}static sanitizeEndpoint(J){return t.PROTOCOL_REGEX.test(J)||(J=`https://${J}`),J.replace(/\/+$/,"")}bucket(J,H){if(!J)throw new Error(I.BUCKET_NAME_REQUIRED);return new c.Bucket(this,J,H)}channel(J,H){return new a.Channel(this,J,H)}createBucket(J,H,U){if(!J)throw new Error(I.BUCKET_NAME_REQUIRED_CREATE);let P;U?P=H:(U=H,P={});const Z={...P,name:J},ie={archive:"ARCHIVE",coldline:"COLDLINE",dra:"DURABLE_REDUCED_AVAILABILITY",multiRegional:"MULTI_REGIONAL",nearline:"NEARLINE",regional:"REGIONAL",standard:"STANDARD"},ue=Object.keys(ie);for(const ne of ue)if(Z[ne]){if(P.storageClass&&P.storageClass!==ne)throw new Error(`Both \`${ne}\` and \`storageClass\` were provided.`);Z.storageClass=ie[ne],delete Z[ne]}Z.requesterPays&&(Z.billing={requesterPays:Z.requesterPays},delete Z.requesterPays);const le={project:this.projectId};Z.userProject&&(le.userProject=Z.userProject,delete Z.userProject),Z.enableObjectRetention&&(le.enableObjectRetention=Z.enableObjectRetention,delete Z.enableObjectRetention),Z.predefinedAcl&&(le.predefinedAcl=Z.predefinedAcl,delete Z.predefinedAcl),Z.predefinedDefaultObjectAcl&&(le.predefinedDefaultObjectAcl=Z.predefinedDefaultObjectAcl,delete Z.predefinedDefaultObjectAcl),Z.projection&&(le.projection=Z.projection,delete Z.projection),this.request({method:"POST",uri:"/b",qs:le,json:Z},(ne,ye)=>{if(ne){U(ne,null,ye);return}const fe=this.bucket(J);fe.metadata=ye,U(null,fe,ye)})}createHmacKey(J,H,U){if(typeof J!="string")throw new Error(I.HMAC_SERVICE_ACCOUNT);const{options:P,callback:Z}=(0,s.normalize)(H,U),ie=Object.assign({},P,{serviceAccountEmail:J}),ue=ie.projectId||this.projectId;delete ie.projectId,this.request({method:"POST",uri:`/projects/${ue}/hmacKeys`,qs:ie,maxRetries:0},(le,ne)=>{if(le){Z(le,null,null,ne);return}const ye=ne.metadata,fe=this.hmacKey(ye.accessId,{projectId:ye.projectId});fe.metadata=ne.metadata,Z(null,fe,ne.secret,ne)})}getBuckets(J,H){const{options:U,callback:P}=(0,s.normalize)(J,H);U.project=U.project||this.projectId,this.request({uri:"/b",qs:U},(Z,ie)=>{if(Z){P(Z,null,null,ie);return}const le=(ie.items?ie.items:[]).map(ye=>{const fe=this.bucket(ye.id);return fe.metadata=ye,fe}),ne=ie.nextPageToken?Object.assign({},U,{pageToken:ie.nextPageToken}):null;P(null,le,ne,ie)})}getHmacKeys(J,H){const{options:U,callback:P}=(0,s.normalize)(J,H),Z=Object.assign({},U),ie=Z.projectId||this.projectId;delete Z.projectId,this.request({uri:`/projects/${ie}/hmacKeys`,qs:Z},(ue,le)=>{if(ue){P(ue,null,null,le);return}const ye=(le.items?le.items:[]).map(Te=>{const Ae=this.hmacKey(Te.accessId,{projectId:Te.projectId});return Ae.metadata=Te,Ae}),fe=le.nextPageToken?Object.assign({},U,{pageToken:le.nextPageToken}):null;P(null,ye,fe,le)})}getServiceAccount(J,H){const{options:U,callback:P}=(0,s.normalize)(J,H);this.request({uri:`/projects/${this.projectId}/serviceAccount`,qs:U},(Z,ie)=>{if(Z){P(Z,null,ie);return}const ue={};for(const le in ie)if(ie.hasOwnProperty(le)){const ne=le.replace(/_(\w)/g,(ye,fe)=>fe.toUpperCase());ue[ne]=ie[le]}P(null,ue,ie)})}hmacKey(J,H){if(!J)throw new Error(I.HMAC_ACCESS_ID);return new v.HmacKey(this,J,H)}}t.Storage=j,j.Bucket=c.Bucket,j.Channel=a.Channel,j.File=o.File,j.HmacKey=v.HmacKey,j.acl={OWNER_ROLE:"OWNER",READER_ROLE:"READER",WRITER_ROLE:"WRITER"};/*! Developer Documentation
 *
 * These methods can be auto-paginated.
 */u.paginator.extend(j,["getBuckets","getHmacKeys"]);/*! Developer Documentation
 *
 * All async methods (except for streams) will return a Promise in the event
 * that a callback is omitted.
 */(0,d.promisifyAll)(j,{exclude:["bucket","channel","hmacKey"]})}(storage$1)),storage$1}var transferManager={},validator={},util$4={},hasRequiredUtil$4;function requireUtil$4(){return hasRequiredUtil$4||(hasRequiredUtil$4=1,function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+e+"]["+r+"]*",d=new RegExp("^"+u+"$"),m=function(a,o){const s=[];let h=o.exec(a);for(;h;){const v=[];v.startIndex=o.lastIndex-h[0].length;const E=h.length;for(let y=0;y<E;y++)v.push(h[y]);s.push(v),h=o.exec(a)}return s},c=function(a){const o=d.exec(a);return!(o===null||typeof o>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,o,s){if(o){const h=Object.keys(o),v=h.length;for(let E=0;E<v;E++)s==="strict"?a[h[E]]=[o[h[E]]]:a[h[E]]=o[h[E]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=c,t.getAllMatches=m,t.nameRegexp=u}(util$4)),util$4}var hasRequiredValidator;function requireValidator(){if(hasRequiredValidator)return validator;hasRequiredValidator=1;const t=requireUtil$4(),e={allowBooleanAttributes:!1,unpairedTags:[]};validator.validate=function(_,S){S=Object.assign({},e,S);const j=[];let K=!1,J=!1;_[0]==="\uFEFF"&&(_=_.substr(1));for(let H=0;H<_.length;H++)if(_[H]==="<"&&_[H+1]==="?"){if(H+=2,H=u(_,H),H.err)return H}else if(_[H]==="<"){let U=H;if(H++,_[H]==="!"){H=d(_,H);continue}else{let P=!1;_[H]==="/"&&(P=!0,H++);let Z="";for(;H<_.length&&_[H]!==">"&&_[H]!==" "&&_[H]!=="	"&&_[H]!==`
`&&_[H]!=="\r";H++)Z+=_[H];if(Z=Z.trim(),Z[Z.length-1]==="/"&&(Z=Z.substring(0,Z.length-1),H--),!A(Z)){let le;return Z.trim().length===0?le="Invalid space after '<'.":le="Tag '"+Z+"' is an invalid name.",E("InvalidTag",le,w(_,H))}const ie=a(_,H);if(ie===!1)return E("InvalidAttr","Attributes for '"+Z+"' have open quote.",w(_,H));let ue=ie.value;if(H=ie.index,ue[ue.length-1]==="/"){const le=H-ue.length;ue=ue.substring(0,ue.length-1);const ne=s(ue,S);if(ne===!0)K=!0;else return E(ne.err.code,ne.err.msg,w(_,le+ne.err.line))}else if(P)if(ie.tagClosed){if(ue.trim().length>0)return E("InvalidTag","Closing tag '"+Z+"' can't have attributes or invalid starting.",w(_,U));if(j.length===0)return E("InvalidTag","Closing tag '"+Z+"' has not been opened.",w(_,U));{const le=j.pop();if(Z!==le.tagName){let ne=w(_,le.tagStartPos);return E("InvalidTag","Expected closing tag '"+le.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+Z+"'.",w(_,U))}j.length==0&&(J=!0)}}else return E("InvalidTag","Closing tag '"+Z+"' doesn't have proper closing.",w(_,H));else{const le=s(ue,S);if(le!==!0)return E(le.err.code,le.err.msg,w(_,H-ue.length+le.err.line));if(J===!0)return E("InvalidXml","Multiple possible root nodes found.",w(_,H));S.unpairedTags.indexOf(Z)!==-1||j.push({tagName:Z,tagStartPos:U}),K=!0}for(H++;H<_.length;H++)if(_[H]==="<")if(_[H+1]==="!"){H++,H=d(_,H);continue}else if(_[H+1]==="?"){if(H=u(_,++H),H.err)return H}else break;else if(_[H]==="&"){const le=v(_,H);if(le==-1)return E("InvalidChar","char '&' is not expected.",w(_,H));H=le}else if(J===!0&&!r(_[H]))return E("InvalidXml","Extra text at the end",w(_,H));_[H]==="<"&&H--}}else{if(r(_[H]))continue;return E("InvalidChar","char '"+_[H]+"' is not expected.",w(_,H))}if(K){if(j.length==1)return E("InvalidTag","Unclosed tag '"+j[0].tagName+"'.",w(_,j[0].tagStartPos));if(j.length>0)return E("InvalidXml","Invalid '"+JSON.stringify(j.map(H=>H.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return E("InvalidXml","Start tag expected.",1);return!0};function r(_){return _===" "||_==="	"||_===`
`||_==="\r"}function u(_,S){const j=S;for(;S<_.length;S++)if(_[S]=="?"||_[S]==" "){const K=_.substr(j,S-j);if(S>5&&K==="xml")return E("InvalidXml","XML declaration allowed only at the start of the document.",w(_,S));if(_[S]=="?"&&_[S+1]==">"){S++;break}else continue}return S}function d(_,S){if(_.length>S+5&&_[S+1]==="-"&&_[S+2]==="-"){for(S+=3;S<_.length;S++)if(_[S]==="-"&&_[S+1]==="-"&&_[S+2]===">"){S+=2;break}}else if(_.length>S+8&&_[S+1]==="D"&&_[S+2]==="O"&&_[S+3]==="C"&&_[S+4]==="T"&&_[S+5]==="Y"&&_[S+6]==="P"&&_[S+7]==="E"){let j=1;for(S+=8;S<_.length;S++)if(_[S]==="<")j++;else if(_[S]===">"&&(j--,j===0))break}else if(_.length>S+9&&_[S+1]==="["&&_[S+2]==="C"&&_[S+3]==="D"&&_[S+4]==="A"&&_[S+5]==="T"&&_[S+6]==="A"&&_[S+7]==="["){for(S+=8;S<_.length;S++)if(_[S]==="]"&&_[S+1]==="]"&&_[S+2]===">"){S+=2;break}}return S}const m='"',c="'";function a(_,S){let j="",K="",J=!1;for(;S<_.length;S++){if(_[S]===m||_[S]===c)K===""?K=_[S]:K!==_[S]||(K="");else if(_[S]===">"&&K===""){J=!0;break}j+=_[S]}return K!==""?!1:{value:j,index:S,tagClosed:J}}const o=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function s(_,S){const j=t.getAllMatches(_,o),K={};for(let J=0;J<j.length;J++){if(j[J][1].length===0)return E("InvalidAttr","Attribute '"+j[J][2]+"' has no space in starting.",I(j[J]));if(j[J][3]!==void 0&&j[J][4]===void 0)return E("InvalidAttr","Attribute '"+j[J][2]+"' is without value.",I(j[J]));if(j[J][3]===void 0&&!S.allowBooleanAttributes)return E("InvalidAttr","boolean attribute '"+j[J][2]+"' is not allowed.",I(j[J]));const H=j[J][2];if(!y(H))return E("InvalidAttr","Attribute '"+H+"' is an invalid name.",I(j[J]));if(!K.hasOwnProperty(H))K[H]=1;else return E("InvalidAttr","Attribute '"+H+"' is repeated.",I(j[J]))}return!0}function h(_,S){let j=/\d/;for(_[S]==="x"&&(S++,j=/[\da-fA-F]/);S<_.length;S++){if(_[S]===";")return S;if(!_[S].match(j))break}return-1}function v(_,S){if(S++,_[S]===";")return-1;if(_[S]==="#")return S++,h(_,S);let j=0;for(;S<_.length;S++,j++)if(!(_[S].match(/\w/)&&j<20)){if(_[S]===";")break;return-1}return S}function E(_,S,j){return{err:{code:_,msg:S,line:j.line||j,col:j.col}}}function y(_){return t.isName(_)}function A(_){return t.isName(_)}function w(_,S){const j=_.substring(0,S).split(/\r?\n/);return{line:j.length,col:j[j.length-1].length+1}}function I(_){return _.startIndex+_[1].length}return validator}var OptionsBuilder={},hasRequiredOptionsBuilder;function requireOptionsBuilder(){if(hasRequiredOptionsBuilder)return OptionsBuilder;hasRequiredOptionsBuilder=1;const t={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,u){return u},attributeValueProcessor:function(r,u){return u},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(r,u,d){return r}},e=function(r){return Object.assign({},t,r)};return OptionsBuilder.buildOptions=e,OptionsBuilder.defaultOptions=t,OptionsBuilder}var xmlNode,hasRequiredXmlNode;function requireXmlNode(){if(hasRequiredXmlNode)return xmlNode;hasRequiredXmlNode=1;class t{constructor(r){this.tagname=r,this.child=[],this[":@"]={}}add(r,u){r==="__proto__"&&(r="#__proto__"),this.child.push({[r]:u})}addChild(r){r.tagname==="__proto__"&&(r.tagname="#__proto__"),r[":@"]&&Object.keys(r[":@"]).length>0?this.child.push({[r.tagname]:r.child,":@":r[":@"]}):this.child.push({[r.tagname]:r.child})}}return xmlNode=t,xmlNode}var DocTypeReader,hasRequiredDocTypeReader;function requireDocTypeReader(){if(hasRequiredDocTypeReader)return DocTypeReader;hasRequiredDocTypeReader=1;const t=requireUtil$4();function e(s,h){const v={};if(s[h+3]==="O"&&s[h+4]==="C"&&s[h+5]==="T"&&s[h+6]==="Y"&&s[h+7]==="P"&&s[h+8]==="E"){h=h+9;let E=1,y=!1,A=!1,w="";for(;h<s.length;h++)if(s[h]==="<"&&!A){if(y&&d(s,h)){h+=7;let I,_;[I,_,h]=r(s,h+1),_.indexOf("&")===-1&&(v[o(I)]={regx:RegExp(`&${I};`,"g"),val:_})}else if(y&&m(s,h))h+=8;else if(y&&c(s,h))h+=8;else if(y&&a(s,h))h+=9;else if(u)A=!0;else throw new Error("Invalid DOCTYPE");E++,w=""}else if(s[h]===">"){if(A?s[h-1]==="-"&&s[h-2]==="-"&&(A=!1,E--):E--,E===0)break}else s[h]==="["?y=!0:w+=s[h];if(E!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:v,i:h}}function r(s,h){let v="";for(;h<s.length&&s[h]!=="'"&&s[h]!=='"';h++)v+=s[h];if(v=v.trim(),v.indexOf(" ")!==-1)throw new Error("External entites are not supported");const E=s[h++];let y="";for(;h<s.length&&s[h]!==E;h++)y+=s[h];return[v,y,h]}function u(s,h){return s[h+1]==="!"&&s[h+2]==="-"&&s[h+3]==="-"}function d(s,h){return s[h+1]==="!"&&s[h+2]==="E"&&s[h+3]==="N"&&s[h+4]==="T"&&s[h+5]==="I"&&s[h+6]==="T"&&s[h+7]==="Y"}function m(s,h){return s[h+1]==="!"&&s[h+2]==="E"&&s[h+3]==="L"&&s[h+4]==="E"&&s[h+5]==="M"&&s[h+6]==="E"&&s[h+7]==="N"&&s[h+8]==="T"}function c(s,h){return s[h+1]==="!"&&s[h+2]==="A"&&s[h+3]==="T"&&s[h+4]==="T"&&s[h+5]==="L"&&s[h+6]==="I"&&s[h+7]==="S"&&s[h+8]==="T"}function a(s,h){return s[h+1]==="!"&&s[h+2]==="N"&&s[h+3]==="O"&&s[h+4]==="T"&&s[h+5]==="A"&&s[h+6]==="T"&&s[h+7]==="I"&&s[h+8]==="O"&&s[h+9]==="N"}function o(s){if(t.isName(s))return s;throw new Error(`Invalid entity name ${s}`)}return DocTypeReader=e,DocTypeReader}var strnum,hasRequiredStrnum;function requireStrnum(){if(hasRequiredStrnum)return strnum;hasRequiredStrnum=1;const t=/^[-+]?0x[a-fA-F0-9]+$/,e=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,r={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function u(c,a={}){if(a=Object.assign({},r,a),!c||typeof c!="string")return c;let o=c.trim();if(a.skipLike!==void 0&&a.skipLike.test(o))return c;if(c==="0")return 0;if(a.hex&&t.test(o))return m(o,16);if(o.search(/[eE]/)!==-1){const s=o.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(s){if(a.leadingZeros)o=(s[1]||"")+s[3];else if(!(s[2]==="0"&&s[3][0]==="."))return c;return a.eNotation?Number(o):c}else return c}else{const s=e.exec(o);if(s){const h=s[1],v=s[2];let E=d(s[3]);if(!a.leadingZeros&&v.length>0&&h&&o[2]!==".")return c;if(!a.leadingZeros&&v.length>0&&!h&&o[1]!==".")return c;if(a.leadingZeros&&v===c)return 0;{const y=Number(o),A=""+y;return A.search(/[eE]/)!==-1?a.eNotation?y:c:o.indexOf(".")!==-1?A==="0"&&E===""||A===E||h&&A==="-"+E?y:c:v?E===A||h+E===A?y:c:o===A||o===h+A?y:c}}else return c}}function d(c){return c&&c.indexOf(".")!==-1&&(c=c.replace(/0+$/,""),c==="."?c="0":c[0]==="."?c="0"+c:c[c.length-1]==="."&&(c=c.substr(0,c.length-1))),c}function m(c,a){if(parseInt)return parseInt(c,a);if(Number.parseInt)return Number.parseInt(c,a);if(window&&window.parseInt)return window.parseInt(c,a);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return strnum=u,strnum}var ignoreAttributes,hasRequiredIgnoreAttributes;function requireIgnoreAttributes(){if(hasRequiredIgnoreAttributes)return ignoreAttributes;hasRequiredIgnoreAttributes=1;function t(e){return typeof e=="function"?e:Array.isArray(e)?r=>{for(const u of e)if(typeof u=="string"&&r===u||u instanceof RegExp&&u.test(r))return!0}:()=>!1}return ignoreAttributes=t,ignoreAttributes}var OrderedObjParser_1,hasRequiredOrderedObjParser;function requireOrderedObjParser(){if(hasRequiredOrderedObjParser)return OrderedObjParser_1;hasRequiredOrderedObjParser=1;const t=requireUtil$4(),e=requireXmlNode(),r=requireDocTypeReader(),u=requireStrnum(),d=requireIgnoreAttributes();class m{constructor(H){this.options=H,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(U,P)=>String.fromCharCode(Number.parseInt(P,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(U,P)=>String.fromCharCode(Number.parseInt(P,16))}},this.addExternalEntities=c,this.parseXml=v,this.parseTextData=a,this.resolveNameSpace=o,this.buildAttributesMap=h,this.isItStopNode=w,this.replaceEntitiesValue=y,this.readStopNodeData=j,this.saveTextToParentTag=A,this.addChild=E,this.ignoreAttributesFn=d(this.options.ignoreAttributes)}}function c(J){const H=Object.keys(J);for(let U=0;U<H.length;U++){const P=H[U];this.lastEntities[P]={regex:new RegExp("&"+P+";","g"),val:J[P]}}}function a(J,H,U,P,Z,ie,ue){if(J!==void 0&&(this.options.trimValues&&!P&&(J=J.trim()),J.length>0)){ue||(J=this.replaceEntitiesValue(J));const le=this.options.tagValueProcessor(H,J,U,Z,ie);return le==null?J:typeof le!=typeof J||le!==J?le:this.options.trimValues?K(J,this.options.parseTagValue,this.options.numberParseOptions):J.trim()===J?K(J,this.options.parseTagValue,this.options.numberParseOptions):J}}function o(J){if(this.options.removeNSPrefix){const H=J.split(":"),U=J.charAt(0)==="/"?"/":"";if(H[0]==="xmlns")return"";H.length===2&&(J=U+H[1])}return J}const s=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function h(J,H,U){if(this.options.ignoreAttributes!==!0&&typeof J=="string"){const P=t.getAllMatches(J,s),Z=P.length,ie={};for(let ue=0;ue<Z;ue++){const le=this.resolveNameSpace(P[ue][1]);if(this.ignoreAttributesFn(le,H))continue;let ne=P[ue][4],ye=this.options.attributeNamePrefix+le;if(le.length)if(this.options.transformAttributeName&&(ye=this.options.transformAttributeName(ye)),ye==="__proto__"&&(ye="#__proto__"),ne!==void 0){this.options.trimValues&&(ne=ne.trim()),ne=this.replaceEntitiesValue(ne);const fe=this.options.attributeValueProcessor(le,ne,H);fe==null?ie[ye]=ne:typeof fe!=typeof ne||fe!==ne?ie[ye]=fe:ie[ye]=K(ne,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ie[ye]=!0)}if(!Object.keys(ie).length)return;if(this.options.attributesGroupName){const ue={};return ue[this.options.attributesGroupName]=ie,ue}return ie}}const v=function(J){J=J.replace(/\r\n?/g,`
`);const H=new e("!xml");let U=H,P="",Z="";for(let ie=0;ie<J.length;ie++)if(J[ie]==="<")if(J[ie+1]==="/"){const le=_(J,">",ie,"Closing Tag is not closed.");let ne=J.substring(ie+2,le).trim();if(this.options.removeNSPrefix){const Te=ne.indexOf(":");Te!==-1&&(ne=ne.substr(Te+1))}this.options.transformTagName&&(ne=this.options.transformTagName(ne)),U&&(P=this.saveTextToParentTag(P,U,Z));const ye=Z.substring(Z.lastIndexOf(".")+1);if(ne&&this.options.unpairedTags.indexOf(ne)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${ne}>`);let fe=0;ye&&this.options.unpairedTags.indexOf(ye)!==-1?(fe=Z.lastIndexOf(".",Z.lastIndexOf(".")-1),this.tagsNodeStack.pop()):fe=Z.lastIndexOf("."),Z=Z.substring(0,fe),U=this.tagsNodeStack.pop(),P="",ie=le}else if(J[ie+1]==="?"){let le=S(J,ie,!1,"?>");if(!le)throw new Error("Pi Tag is not closed.");if(P=this.saveTextToParentTag(P,U,Z),!(this.options.ignoreDeclaration&&le.tagName==="?xml"||this.options.ignorePiTags)){const ne=new e(le.tagName);ne.add(this.options.textNodeName,""),le.tagName!==le.tagExp&&le.attrExpPresent&&(ne[":@"]=this.buildAttributesMap(le.tagExp,Z,le.tagName)),this.addChild(U,ne,Z)}ie=le.closeIndex+1}else if(J.substr(ie+1,3)==="!--"){const le=_(J,"-->",ie+4,"Comment is not closed.");if(this.options.commentPropName){const ne=J.substring(ie+4,le-2);P=this.saveTextToParentTag(P,U,Z),U.add(this.options.commentPropName,[{[this.options.textNodeName]:ne}])}ie=le}else if(J.substr(ie+1,2)==="!D"){const le=r(J,ie);this.docTypeEntities=le.entities,ie=le.i}else if(J.substr(ie+1,2)==="!["){const le=_(J,"]]>",ie,"CDATA is not closed.")-2,ne=J.substring(ie+9,le);P=this.saveTextToParentTag(P,U,Z);let ye=this.parseTextData(ne,U.tagname,Z,!0,!1,!0,!0);ye==null&&(ye=""),this.options.cdataPropName?U.add(this.options.cdataPropName,[{[this.options.textNodeName]:ne}]):U.add(this.options.textNodeName,ye),ie=le+2}else{let le=S(J,ie,this.options.removeNSPrefix),ne=le.tagName;const ye=le.rawTagName;let fe=le.tagExp,Te=le.attrExpPresent,Ae=le.closeIndex;this.options.transformTagName&&(ne=this.options.transformTagName(ne)),U&&P&&U.tagname!=="!xml"&&(P=this.saveTextToParentTag(P,U,Z,!1));const Se=U;if(Se&&this.options.unpairedTags.indexOf(Se.tagname)!==-1&&(U=this.tagsNodeStack.pop(),Z=Z.substring(0,Z.lastIndexOf("."))),ne!==H.tagname&&(Z+=Z?"."+ne:ne),this.isItStopNode(this.options.stopNodes,Z,ne)){let be="";if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1)ne[ne.length-1]==="/"?(ne=ne.substr(0,ne.length-1),Z=Z.substr(0,Z.length-1),fe=ne):fe=fe.substr(0,fe.length-1),ie=le.closeIndex;else if(this.options.unpairedTags.indexOf(ne)!==-1)ie=le.closeIndex;else{const Ce=this.readStopNodeData(J,ye,Ae+1);if(!Ce)throw new Error(`Unexpected end of ${ye}`);ie=Ce.i,be=Ce.tagContent}const we=new e(ne);ne!==fe&&Te&&(we[":@"]=this.buildAttributesMap(fe,Z,ne)),be&&(be=this.parseTextData(be,ne,Z,!0,Te,!0,!0)),Z=Z.substr(0,Z.lastIndexOf(".")),we.add(this.options.textNodeName,be),this.addChild(U,we,Z)}else{if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1){ne[ne.length-1]==="/"?(ne=ne.substr(0,ne.length-1),Z=Z.substr(0,Z.length-1),fe=ne):fe=fe.substr(0,fe.length-1),this.options.transformTagName&&(ne=this.options.transformTagName(ne));const be=new e(ne);ne!==fe&&Te&&(be[":@"]=this.buildAttributesMap(fe,Z,ne)),this.addChild(U,be,Z),Z=Z.substr(0,Z.lastIndexOf("."))}else{const be=new e(ne);this.tagsNodeStack.push(U),ne!==fe&&Te&&(be[":@"]=this.buildAttributesMap(fe,Z,ne)),this.addChild(U,be,Z),U=be}P="",ie=Ae}}else P+=J[ie];return H.child};function E(J,H,U){const P=this.options.updateTag(H.tagname,U,H[":@"]);P===!1||(typeof P=="string"&&(H.tagname=P),J.addChild(H))}const y=function(J){if(this.options.processEntities){for(let H in this.docTypeEntities){const U=this.docTypeEntities[H];J=J.replace(U.regx,U.val)}for(let H in this.lastEntities){const U=this.lastEntities[H];J=J.replace(U.regex,U.val)}if(this.options.htmlEntities)for(let H in this.htmlEntities){const U=this.htmlEntities[H];J=J.replace(U.regex,U.val)}J=J.replace(this.ampEntity.regex,this.ampEntity.val)}return J};function A(J,H,U,P){return J&&(P===void 0&&(P=H.child.length===0),J=this.parseTextData(J,H.tagname,U,!1,H[":@"]?Object.keys(H[":@"]).length!==0:!1,P),J!==void 0&&J!==""&&H.add(this.options.textNodeName,J),J=""),J}function w(J,H,U){const P="*."+U;for(const Z in J){const ie=J[Z];if(P===ie||H===ie)return!0}return!1}function I(J,H,U=">"){let P,Z="";for(let ie=H;ie<J.length;ie++){let ue=J[ie];if(P)ue===P&&(P="");else if(ue==='"'||ue==="'")P=ue;else if(ue===U[0])if(U[1]){if(J[ie+1]===U[1])return{data:Z,index:ie}}else return{data:Z,index:ie};else ue==="	"&&(ue=" ");Z+=ue}}function _(J,H,U,P){const Z=J.indexOf(H,U);if(Z===-1)throw new Error(P);return Z+H.length-1}function S(J,H,U,P=">"){const Z=I(J,H+1,P);if(!Z)return;let ie=Z.data;const ue=Z.index,le=ie.search(/\s/);let ne=ie,ye=!0;le!==-1&&(ne=ie.substring(0,le),ie=ie.substring(le+1).trimStart());const fe=ne;if(U){const Te=ne.indexOf(":");Te!==-1&&(ne=ne.substr(Te+1),ye=ne!==Z.data.substr(Te+1))}return{tagName:ne,tagExp:ie,closeIndex:ue,attrExpPresent:ye,rawTagName:fe}}function j(J,H,U){const P=U;let Z=1;for(;U<J.length;U++)if(J[U]==="<")if(J[U+1]==="/"){const ie=_(J,">",U,`${H} is not closed`);if(J.substring(U+2,ie).trim()===H&&(Z--,Z===0))return{tagContent:J.substring(P,U),i:ie};U=ie}else if(J[U+1]==="?")U=_(J,"?>",U+1,"StopNode is not closed.");else if(J.substr(U+1,3)==="!--")U=_(J,"-->",U+3,"StopNode is not closed.");else if(J.substr(U+1,2)==="![")U=_(J,"]]>",U,"StopNode is not closed.")-2;else{const ie=S(J,U,">");ie&&((ie&&ie.tagName)===H&&ie.tagExp[ie.tagExp.length-1]!=="/"&&Z++,U=ie.closeIndex)}}function K(J,H,U){if(H&&typeof J=="string"){const P=J.trim();return P==="true"?!0:P==="false"?!1:u(J,U)}else return t.isExist(J)?J:""}return OrderedObjParser_1=m,OrderedObjParser_1}var node2json={},hasRequiredNode2json;function requireNode2json(){if(hasRequiredNode2json)return node2json;hasRequiredNode2json=1;function t(m,c){return e(m,c)}function e(m,c,a){let o;const s={};for(let h=0;h<m.length;h++){const v=m[h],E=r(v);let y="";if(a===void 0?y=E:y=a+"."+E,E===c.textNodeName)o===void 0?o=v[E]:o+=""+v[E];else{if(E===void 0)continue;if(v[E]){let A=e(v[E],c,y);const w=d(A,c);v[":@"]?u(A,v[":@"],y,c):Object.keys(A).length===1&&A[c.textNodeName]!==void 0&&!c.alwaysCreateTextNode?A=A[c.textNodeName]:Object.keys(A).length===0&&(c.alwaysCreateTextNode?A[c.textNodeName]="":A=""),s[E]!==void 0&&s.hasOwnProperty(E)?(Array.isArray(s[E])||(s[E]=[s[E]]),s[E].push(A)):c.isArray(E,y,w)?s[E]=[A]:s[E]=A}}}return typeof o=="string"?o.length>0&&(s[c.textNodeName]=o):o!==void 0&&(s[c.textNodeName]=o),s}function r(m){const c=Object.keys(m);for(let a=0;a<c.length;a++){const o=c[a];if(o!==":@")return o}}function u(m,c,a,o){if(c){const s=Object.keys(c),h=s.length;for(let v=0;v<h;v++){const E=s[v];o.isArray(E,a+"."+E,!0,!0)?m[E]=[c[E]]:m[E]=c[E]}}}function d(m,c){const{textNodeName:a}=c,o=Object.keys(m).length;return!!(o===0||o===1&&(m[a]||typeof m[a]=="boolean"||m[a]===0))}return node2json.prettify=t,node2json}var XMLParser_1,hasRequiredXMLParser;function requireXMLParser(){if(hasRequiredXMLParser)return XMLParser_1;hasRequiredXMLParser=1;const{buildOptions:t}=requireOptionsBuilder(),e=requireOrderedObjParser(),{prettify:r}=requireNode2json(),u=requireValidator();class d{constructor(c){this.externalEntities={},this.options=t(c)}parse(c,a){if(typeof c!="string")if(c.toString)c=c.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(a){a===!0&&(a={});const h=u.validate(c,a);if(h!==!0)throw Error(`${h.err.msg}:${h.err.line}:${h.err.col}`)}const o=new e(this.options);o.addExternalEntities(this.externalEntities);const s=o.parseXml(c);return this.options.preserveOrder||s===void 0?s:r(s,this.options)}addEntity(c,a){if(a.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(c.indexOf("&")!==-1||c.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(a==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[c]=a}}return XMLParser_1=d,XMLParser_1}var orderedJs2Xml,hasRequiredOrderedJs2Xml;function requireOrderedJs2Xml(){if(hasRequiredOrderedJs2Xml)return orderedJs2Xml;hasRequiredOrderedJs2Xml=1;const t=`
`;function e(a,o){let s="";return o.format&&o.indentBy.length>0&&(s=t),r(a,o,"",s)}function r(a,o,s,h){let v="",E=!1;for(let y=0;y<a.length;y++){const A=a[y],w=u(A);if(w===void 0)continue;let I="";if(s.length===0?I=w:I=`${s}.${w}`,w===o.textNodeName){let J=A[w];m(I,o)||(J=o.tagValueProcessor(w,J),J=c(J,o)),E&&(v+=h),v+=J,E=!1;continue}else if(w===o.cdataPropName){E&&(v+=h),v+=`<![CDATA[${A[w][0][o.textNodeName]}]]>`,E=!1;continue}else if(w===o.commentPropName){v+=h+`<!--${A[w][0][o.textNodeName]}-->`,E=!0;continue}else if(w[0]==="?"){const J=d(A[":@"],o),H=w==="?xml"?"":h;let U=A[w][0][o.textNodeName];U=U.length!==0?" "+U:"",v+=H+`<${w}${U}${J}?>`,E=!0;continue}let _=h;_!==""&&(_+=o.indentBy);const S=d(A[":@"],o),j=h+`<${w}${S}`,K=r(A[w],o,I,_);o.unpairedTags.indexOf(w)!==-1?o.suppressUnpairedNode?v+=j+">":v+=j+"/>":(!K||K.length===0)&&o.suppressEmptyNode?v+=j+"/>":K&&K.endsWith(">")?v+=j+`>${K}${h}</${w}>`:(v+=j+">",K&&h!==""&&(K.includes("/>")||K.includes("</"))?v+=h+o.indentBy+K+h:v+=K,v+=`</${w}>`),E=!0}return v}function u(a){const o=Object.keys(a);for(let s=0;s<o.length;s++){const h=o[s];if(a.hasOwnProperty(h)&&h!==":@")return h}}function d(a,o){let s="";if(a&&!o.ignoreAttributes)for(let h in a){if(!a.hasOwnProperty(h))continue;let v=o.attributeValueProcessor(h,a[h]);v=c(v,o),v===!0&&o.suppressBooleanAttributes?s+=` ${h.substr(o.attributeNamePrefix.length)}`:s+=` ${h.substr(o.attributeNamePrefix.length)}="${v}"`}return s}function m(a,o){a=a.substr(0,a.length-o.textNodeName.length-1);let s=a.substr(a.lastIndexOf(".")+1);for(let h in o.stopNodes)if(o.stopNodes[h]===a||o.stopNodes[h]==="*."+s)return!0;return!1}function c(a,o){if(a&&a.length>0&&o.processEntities)for(let s=0;s<o.entities.length;s++){const h=o.entities[s];a=a.replace(h.regex,h.val)}return a}return orderedJs2Xml=e,orderedJs2Xml}var json2xml,hasRequiredJson2xml;function requireJson2xml(){if(hasRequiredJson2xml)return json2xml;hasRequiredJson2xml=1;const t=requireOrderedJs2Xml(),e=requireIgnoreAttributes(),r={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(a,o){return o},attributeValueProcessor:function(a,o){return o},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(a){this.options=Object.assign({},r,a),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=e(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=d,this.options.format?(this.indentate=m,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(a){return this.options.preserveOrder?t(a,this.options):(Array.isArray(a)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(a={[this.options.arrayNodeName]:a}),this.j2x(a,0,[]).val)},u.prototype.j2x=function(a,o,s){let h="",v="";const E=s.join(".");for(let y in a)if(Object.prototype.hasOwnProperty.call(a,y))if(typeof a[y]>"u")this.isAttribute(y)&&(v+="");else if(a[y]===null)this.isAttribute(y)||y===this.options.cdataPropName?v+="":y[0]==="?"?v+=this.indentate(o)+"<"+y+"?"+this.tagEndChar:v+=this.indentate(o)+"<"+y+"/"+this.tagEndChar;else if(a[y]instanceof Date)v+=this.buildTextValNode(a[y],y,"",o);else if(typeof a[y]!="object"){const A=this.isAttribute(y);if(A&&!this.ignoreAttributesFn(A,E))h+=this.buildAttrPairStr(A,""+a[y]);else if(!A)if(y===this.options.textNodeName){let w=this.options.tagValueProcessor(y,""+a[y]);v+=this.replaceEntitiesValue(w)}else v+=this.buildTextValNode(a[y],y,"",o)}else if(Array.isArray(a[y])){const A=a[y].length;let w="",I="";for(let _=0;_<A;_++){const S=a[y][_];if(!(typeof S>"u"))if(S===null)y[0]==="?"?v+=this.indentate(o)+"<"+y+"?"+this.tagEndChar:v+=this.indentate(o)+"<"+y+"/"+this.tagEndChar;else if(typeof S=="object")if(this.options.oneListGroup){const j=this.j2x(S,o+1,s.concat(y));w+=j.val,this.options.attributesGroupName&&S.hasOwnProperty(this.options.attributesGroupName)&&(I+=j.attrStr)}else w+=this.processTextOrObjNode(S,y,o,s);else if(this.options.oneListGroup){let j=this.options.tagValueProcessor(y,S);j=this.replaceEntitiesValue(j),w+=j}else w+=this.buildTextValNode(S,y,"",o)}this.options.oneListGroup&&(w=this.buildObjectNode(w,y,I,o)),v+=w}else if(this.options.attributesGroupName&&y===this.options.attributesGroupName){const A=Object.keys(a[y]),w=A.length;for(let I=0;I<w;I++)h+=this.buildAttrPairStr(A[I],""+a[y][A[I]])}else v+=this.processTextOrObjNode(a[y],y,o,s);return{attrStr:h,val:v}},u.prototype.buildAttrPairStr=function(a,o){return o=this.options.attributeValueProcessor(a,""+o),o=this.replaceEntitiesValue(o),this.options.suppressBooleanAttributes&&o==="true"?" "+a:" "+a+'="'+o+'"'};function d(a,o,s,h){const v=this.j2x(a,s+1,h.concat(o));return a[this.options.textNodeName]!==void 0&&Object.keys(a).length===1?this.buildTextValNode(a[this.options.textNodeName],o,v.attrStr,s):this.buildObjectNode(v.val,o,v.attrStr,s)}u.prototype.buildObjectNode=function(a,o,s,h){if(a==="")return o[0]==="?"?this.indentate(h)+"<"+o+s+"?"+this.tagEndChar:this.indentate(h)+"<"+o+s+this.closeTag(o)+this.tagEndChar;{let v="</"+o+this.tagEndChar,E="";return o[0]==="?"&&(E="?",v=""),(s||s==="")&&a.indexOf("<")===-1?this.indentate(h)+"<"+o+s+E+">"+a+v:this.options.commentPropName!==!1&&o===this.options.commentPropName&&E.length===0?this.indentate(h)+`<!--${a}-->`+this.newLine:this.indentate(h)+"<"+o+s+E+this.tagEndChar+a+this.indentate(h)+v}},u.prototype.closeTag=function(a){let o="";return this.options.unpairedTags.indexOf(a)!==-1?this.options.suppressUnpairedNode||(o="/"):this.options.suppressEmptyNode?o="/":o=`></${a}`,o},u.prototype.buildTextValNode=function(a,o,s,h){if(this.options.cdataPropName!==!1&&o===this.options.cdataPropName)return this.indentate(h)+`<![CDATA[${a}]]>`+this.newLine;if(this.options.commentPropName!==!1&&o===this.options.commentPropName)return this.indentate(h)+`<!--${a}-->`+this.newLine;if(o[0]==="?")return this.indentate(h)+"<"+o+s+"?"+this.tagEndChar;{let v=this.options.tagValueProcessor(o,a);return v=this.replaceEntitiesValue(v),v===""?this.indentate(h)+"<"+o+s+this.closeTag(o)+this.tagEndChar:this.indentate(h)+"<"+o+s+">"+v+"</"+o+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(a){if(a&&a.length>0&&this.options.processEntities)for(let o=0;o<this.options.entities.length;o++){const s=this.options.entities[o];a=a.replace(s.regex,s.val)}return a};function m(a){return this.options.indentBy.repeat(a)}function c(a){return a.startsWith(this.options.attributeNamePrefix)&&a!==this.options.textNodeName?a.substr(this.attrPrefixLen):!1}return json2xml=u,json2xml}var fxp,hasRequiredFxp;function requireFxp(){if(hasRequiredFxp)return fxp;hasRequiredFxp=1;const t=requireValidator(),e=requireXMLParser(),r=requireJson2xml();return fxp={XMLParser:e,XMLValidator:t,XMLBuilder:r},fxp}var hasRequiredTransferManager;function requireTransferManager(){if(hasRequiredTransferManager)return transferManager;hasRequiredTransferManager=1;/*!
 * Copyright 2022 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t=transferManager&&transferManager.__createBinding||(Object.create?function(Se,be,we,Ce){Ce===void 0&&(Ce=we);var je=Object.getOwnPropertyDescriptor(be,we);(!je||("get"in je?!be.__esModule:je.writable||je.configurable))&&(je={enumerable:!0,get:function(){return be[we]}}),Object.defineProperty(Se,Ce,je)}:function(Se,be,we,Ce){Ce===void 0&&(Ce=we),Se[Ce]=be[we]}),e=transferManager&&transferManager.__setModuleDefault||(Object.create?function(Se,be){Object.defineProperty(Se,"default",{enumerable:!0,value:be})}:function(Se,be){Se.default=be}),r=transferManager&&transferManager.__importStar||function(){var Se=function(be){return Se=Object.getOwnPropertyNames||function(we){var Ce=[];for(var je in we)Object.prototype.hasOwnProperty.call(we,je)&&(Ce[Ce.length]=je);return Ce},Se(be)};return function(be){if(be&&be.__esModule)return be;var we={};if(be!=null)for(var Ce=Se(be),je=0;je<Ce.length;je++)Ce[je]!=="default"&&t(we,be,Ce[je]);return e(we,be),we}}(),u=transferManager&&transferManager.__classPrivateFieldGet||function(Se,be,we,Ce){if(we==="a"&&!Ce)throw new TypeError("Private accessor was defined without a getter");if(typeof be=="function"?Se!==be||!Ce:!be.has(Se))throw new TypeError("Cannot read private member from an object whose class did not declare it");return we==="m"?Ce:we==="a"?Ce.call(Se):Ce?Ce.value:be.get(Se)},d=transferManager&&transferManager.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}},m,c,a;Object.defineProperty(transferManager,"__esModule",{value:!0}),transferManager.TransferManager=transferManager.MultiPartUploadError=void 0;const o=requireFile(),s=d(requirePLimit()),h=r(require$$1$3),v=require$$1$3,E=requireCrc32c(),y=requireSrc$b(),A=requireFxp(),w=d(requireLib$1()),I=require$$1$3,_=requireUtil$5(),S=requireUtil$6(),K=(0,requirePackageJsonHelper().getPackageJSON)(),J=5,H=5,U=5,P=32*1024*1024,Z=32*1024*1024,ie=32*1024*1024,ue=5,le="(?:)",ne={UPLOAD_MANY:"tm.upload_many",DOWNLOAD_MANY:"tm.download_many",UPLOAD_SHARDED:"tm.upload_sharded",DOWNLOAD_SHARDED:"tm.download_sharded"},ye=(Se,be,we,Ce)=>new Te(Se,be,we,Ce);class fe extends Error{constructor(be,we,Ce){super(be),this.uploadId=we,this.partsMap=Ce}}transferManager.MultiPartUploadError=fe;class Te{constructor(be,we,Ce,je){m.add(this),this.authClient=be.storage.authClient||new y.GoogleAuth,this.uploadId=Ce||"",this.bucket=be,this.fileName=we,this.baseUrl=`https://${be.name}.${new URL(this.bucket.storage.apiEndpoint).hostname}/${we}`,this.xmlBuilder=new A.XMLBuilder({arrayNodeName:"Part"}),this.xmlParser=new A.XMLParser,this.partsMap=je||new Map,this.retryOptions={retries:this.bucket.storage.retryOptions.maxRetries,factor:this.bucket.storage.retryOptions.retryDelayMultiplier,maxTimeout:this.bucket.storage.retryOptions.maxRetryDelay*1e3,maxRetryTime:this.bucket.storage.retryOptions.totalTimeout*1e3}}async initiateUpload(be={}){const we=`${this.baseUrl}?uploads`;return(0,w.default)(async Ce=>{try{const je=await this.authClient.request({headers:u(this,m,"m",c).call(this,be),method:"POST",url:we});if(je.data&&je.data.error)throw je.data.error;const Fe=this.xmlParser.parse(je.data);this.uploadId=Fe.InitiateMultipartUploadResult.UploadId}catch(je){u(this,m,"m",a).call(this,je,Ce)}},this.retryOptions)}async uploadPart(be,we,Ce){const je=`${this.baseUrl}?partNumber=${be}&uploadId=${this.uploadId}`;let Fe=u(this,m,"m",c).call(this);return Ce==="md5"&&(Fe={"Content-MD5":(0,I.createHash)("md5").update(we).digest("base64")}),(0,w.default)(async Ve=>{try{const Ge=await this.authClient.request({url:je,method:"PUT",body:we,headers:Fe});if(Ge.data&&Ge.data.error)throw Ge.data.error;this.partsMap.set(be,Ge.headers.etag)}catch(Ge){u(this,m,"m",a).call(this,Ge,Ve)}},this.retryOptions)}async completeUpload(){const be=`${this.baseUrl}?uploadId=${this.uploadId}`,we=new Map([...this.partsMap.entries()].sort((Fe,Ve)=>Fe[0]-Ve[0])),Ce=[];for(const Fe of we.entries())Ce.push({PartNumber:Fe[0],ETag:Fe[1]});const je=`<CompleteMultipartUpload>${this.xmlBuilder.build(Ce)}</CompleteMultipartUpload>`;return(0,w.default)(async Fe=>{try{const Ve=await this.authClient.request({headers:u(this,m,"m",c).call(this),url:be,method:"POST",body:je});if(Ve.data&&Ve.data.error)throw Ve.data.error;return Ve}catch(Ve){u(this,m,"m",a).call(this,Ve,Fe);return}},this.retryOptions)}async abortUpload(){const be=`${this.baseUrl}?uploadId=${this.uploadId}`;return(0,w.default)(async we=>{try{const Ce=await this.authClient.request({url:be,method:"DELETE"});if(Ce.data&&Ce.data.error)throw Ce.data.error}catch(Ce){u(this,m,"m",a).call(this,Ce,we);return}},this.retryOptions)}}m=new WeakSet,c=function(be={}){let we=!1,Ce=!1;for(const[je,Fe]of Object.entries(be))je.toLocaleLowerCase().trim()==="x-goog-api-client"?(we=!0,Fe.includes(ne.UPLOAD_SHARDED)||(be[je]=`${Fe} gccl-gcs-cmd/${ne.UPLOAD_SHARDED}`)):je.toLocaleLowerCase().trim()==="user-agent"&&(Ce=!0);return we||(be["x-goog-api-client"]=`${(0,S.getRuntimeTrackingString)()} gccl/${K.version} gccl-gcs-cmd/${ne.UPLOAD_SHARDED}`),Ce||(be["User-Agent"]=(0,S.getUserAgentString)()),be},a=function(be,we){if(this.bucket.storage.retryOptions.autoRetry&&this.bucket.storage.retryOptions.retryableErrorFn(be))throw be;we(be)};class Ae{constructor(be){this.bucket=be}async uploadManyFiles(be,we={}){var Ce;we.skipIfExists&&(!((Ce=we.passthroughOptions)===null||Ce===void 0)&&Ce.preconditionOpts)?we.passthroughOptions.preconditionOpts.ifGenerationMatch=0:we.skipIfExists&&we.passthroughOptions===void 0&&(we.passthroughOptions={preconditionOpts:{ifGenerationMatch:0}});const je=(0,s.default)(we.concurrencyLimit||J),Fe=[];let Ve=[];if(Array.isArray(be))Ve=be;else for await(const Ge of this.getPathsFromDirectory(be))Ve.push(Ge);for(const Ge of Ve){if((await v.promises.lstat(Ge)).isDirectory())continue;const Be={...we.passthroughOptions,[_.GCCL_GCS_CMD_KEY]:ne.UPLOAD_MANY};Be.destination=we.customDestinationBuilder?we.customDestinationBuilder(Ge,we):Ge.split(h.sep).join(h.posix.sep),we.prefix&&(Be.destination=h.posix.join(...we.prefix.split(h.sep),Be.destination)),Fe.push(je(()=>this.bucket.upload(Ge,Be)))}return Promise.all(Fe)}async downloadManyFiles(be,we={}){const Ce=(0,s.default)(we.concurrencyLimit||H),je=[];let Fe=[];Array.isArray(be)?Fe=be.map(Le=>typeof Le=="string"?this.bucket.file(Le):Le):Fe=(await this.bucket.getFiles({prefix:be}))[0];const Ve=we.stripPrefix?`^${we.stripPrefix}`:le,Ge=new RegExp(Ve,"g");for(const Le of Fe){const Be={...we.passthroughOptions,[_.GCCL_GCS_CMD_KEY]:ne.DOWNLOAD_MANY};(we.prefix||Be.destination)&&(Be.destination=h.join(we.prefix||"",Be.destination||"",Le.name)),we.stripPrefix&&(Be.destination=Le.name.replace(Ge,"")),!(we.skipIfExists&&(0,v.existsSync)(Be.destination||""))&&je.push(Ce(async()=>{const $e=Be.destination;return $e&&$e.endsWith(h.sep)?(await v.promises.mkdir($e,{recursive:!0}),Promise.resolve([Buffer.alloc(0)])):Le.download(Be)}))}return Promise.all(je)}async downloadFileInChunks(be,we={}){let Ce=we.chunkSizeBytes||Z,je=(0,s.default)(we.concurrencyLimit||U);const Fe=!!we.noReturnData,Ve=[],Ge=typeof be=="string"?this.bucket.file(be):be,Le=await Ge.get(),Be=parseInt(Le[0].metadata.size.toString());Be<P&&(je=(0,s.default)(1),Ce=Be);let $e=0;const he=we.destination||h.basename(Ge.name),p=await v.promises.open(he,"w");for(;$e<Be;){const R=$e;let ce=$e+Ce-1;ce=ce>Be?Be:ce,Ve.push(je(async()=>{const Re=await Ge.download({start:R,end:ce,[_.GCCL_GCS_CMD_KEY]:ne.DOWNLOAD_SHARDED}),ke=await p.write(Re[0],0,Re[0].length,R);if(!Fe)return ke.buffer})),$e+=Ce}let V;try{V=await Promise.all(Ve)}finally{await p.close()}if(we.validation==="crc32c"&&Le[0].metadata.crc32c&&!(await E.CRC32C.fromFile(he)).validate(Le[0].metadata.crc32c)){const ce=new o.RequestError(o.FileExceptionMessages.DOWNLOAD_MISMATCH);throw ce.code="CONTENT_DOWNLOAD_MISMATCH",ce}if(!Fe)return[Buffer.concat(V,Be)]}async uploadFileInChunks(be,we={},Ce=ye){const je=we.chunkSizeBytes||ie,Fe=(0,s.default)(we.concurrencyLimit||ue),Ve=we.maxQueueSize||we.concurrencyLimit||ue,Ge=we.uploadName||h.basename(be),Le=Ce(this.bucket,Ge,we.uploadId,we.partsMap);let Be=1,$e=[];try{we.uploadId===void 0&&await Le.initiateUpload(we.headers);const he=Le.partsMap.size*je,p=(0,v.createReadStream)(be,{highWaterMark:je,start:he});for await(const V of p)$e.length>=Ve&&(await Promise.all($e),$e=[]),$e.push(Fe(()=>Le.uploadPart(Be++,V,we.validation)));return await Promise.all($e),await Le.completeUpload()}catch(he){if((we.autoAbortFailure===void 0||we.autoAbortFailure)&&Le.uploadId)try{await Le.abortUpload();return}catch(p){throw new fe(p.message,Le.uploadId,Le.partsMap)}throw new fe(he.message,Le.uploadId,Le.partsMap)}}async*getPathsFromDirectory(be){const we=await v.promises.readdir(be,{withFileTypes:!0});for(const Ce of we){const je=h.join(be,Ce.name);Ce.isDirectory()?yield*this.getPathsFromDirectory(je):yield je}}}return transferManager.TransferManager=Ae,transferManager}var hasRequiredSrc$3;function requireSrc$3(){return hasRequiredSrc$3||(hasRequiredSrc$3=1,function(t){var e=src$9&&src$9.__createBinding||(Object.create?function(v,E,y,A){A===void 0&&(A=y);var w=Object.getOwnPropertyDescriptor(E,y);(!w||("get"in w?!E.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return E[y]}}),Object.defineProperty(v,A,w)}:function(v,E,y,A){A===void 0&&(A=y),v[A]=E[y]}),r=src$9&&src$9.__exportStar||function(v,E){for(var y in v)y!=="default"&&!Object.prototype.hasOwnProperty.call(E,y)&&e(E,v,y)};Object.defineProperty(t,"__esModule",{value:!0}),t.Notification=t.Iam=t.HmacKey=t.File=t.Channel=t.Bucket=t.Storage=t.RETRYABLE_ERR_FN_DEFAULT=t.IdempotencyStrategy=t.ApiError=void 0;var u=requireNodejsCommon();Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return u.ApiError}});var d=requireStorage$2();Object.defineProperty(t,"IdempotencyStrategy",{enumerable:!0,get:function(){return d.IdempotencyStrategy}}),Object.defineProperty(t,"RETRYABLE_ERR_FN_DEFAULT",{enumerable:!0,get:function(){return d.RETRYABLE_ERR_FN_DEFAULT}}),Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return d.Storage}});var m=requireBucket();Object.defineProperty(t,"Bucket",{enumerable:!0,get:function(){return m.Bucket}}),r(requireCrc32c(),t);var c=requireChannel();Object.defineProperty(t,"Channel",{enumerable:!0,get:function(){return c.Channel}});var a=requireFile();Object.defineProperty(t,"File",{enumerable:!0,get:function(){return a.File}}),r(requireHashStreamValidator(),t);var o=requireHmacKey();Object.defineProperty(t,"HmacKey",{enumerable:!0,get:function(){return o.HmacKey}});var s=requireIam();Object.defineProperty(t,"Iam",{enumerable:!0,get:function(){return s.Iam}});var h=requireNotification();Object.defineProperty(t,"Notification",{enumerable:!0,get:function(){return h.Notification}}),r(requireTransferManager(),t)}(src$9)),src$9}var hasRequiredStorage$1;function requireStorage$1(){if(hasRequiredStorage$1)return storage$2;hasRequiredStorage$1=1;var t={};/*! firebase-admin v13.4.0 *//*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(storage$2,"__esModule",{value:!0}),storage$2.Storage=void 0;const e=requireError(),r=requireCredentialInternal(),u=requireUtils$2(),d=requireValidator$1();class m{constructor(a){if(!d.isNonNullObject(a)||!("options"in a))throw new e.FirebaseError({code:"storage/invalid-argument",message:"First argument passed to admin.storage() must be a valid Firebase app instance."});if(!t.STORAGE_EMULATOR_HOST&&t.FIREBASE_STORAGE_EMULATOR_HOST){if(t.FIREBASE_STORAGE_EMULATOR_HOST.match(/https?:\/\//))throw new e.FirebaseError({code:"storage/invalid-emulator-host",message:"FIREBASE_STORAGE_EMULATOR_HOST should not contain a protocol (http or https)."});t.STORAGE_EMULATOR_HOST=`http://${t.FIREBASE_STORAGE_EMULATOR_HOST}`}let o;try{o=requireSrc$3().Storage}catch(v){throw new e.FirebaseError({code:"storage/missing-dependencies",message:`Failed to import the Cloud Storage client library for Node.js. Make sure to install the "@google-cloud/storage" npm package. Original error: ${v}`})}const s=u.getExplicitProjectId(a),h=a.options.credential;if(h instanceof r.ServiceAccountCredential)this.storageClient=new o({projectId:s,credentials:{private_key:h.privateKey,client_email:h.clientEmail}});else if((0,r.isApplicationDefault)(a.options.credential))this.storageClient=new o;else throw new e.FirebaseError({code:"storage/invalid-credential",message:"Failed to initialize Google Cloud Storage client with the available credential. Must initialize the SDK with a certificate credential or application default credentials to use Cloud Storage API."});this.appInternal=a}bucket(a){const o=typeof a<"u"?a:this.appInternal.options.storageBucket;if(d.isNonEmptyString(o))return this.storageClient.bucket(o);throw new e.FirebaseError({code:"storage/invalid-argument",message:"Bucket name not specified or invalid. Specify a valid bucket name via the storageBucket option when initializing the app, or specify the bucket name explicitly when calling the getBucket() method."})}get app(){return this.appInternal}}return storage$2.Storage=m,storage$2}var src$2={exports:{}},backoff={},logger$2={},validate$1={},util$3={};const interfaces$5={"google.firestore.v1.Firestore":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"],deadline_exceeded_resource_exhausted_internal_unavailable:["DEADLINE_EXCEEDED","RESOURCE_EXHAUSTED","INTERNAL","UNAVAILABLE"],resource_exhausted_unavailable:["RESOURCE_EXHAUSTED","UNAVAILABLE"],resource_exhausted_aborted_unavailable:["RESOURCE_EXHAUSTED","ABORTED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{GetDocument:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},ListDocuments:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},UpdateDocument:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_unavailable",retry_params_name:"default"},DeleteDocument:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},BatchGetDocuments:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},BeginTransaction:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},Commit:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_unavailable",retry_params_name:"default"},Rollback:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},RunQuery:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},RunAggregationQuery:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},PartitionQuery:{timeout_millis:3e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},Write:{timeout_millis:864e5,retry_codes_name:"non_idempotent",retry_params_name:"default"},Listen:{timeout_millis:864e5,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},ListCollectionIds:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_resource_exhausted_internal_unavailable",retry_params_name:"default"},BatchWrite:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_aborted_unavailable",retry_params_name:"default"},CreateDocument:{timeout_millis:6e4,retry_codes_name:"resource_exhausted_unavailable",retry_params_name:"default"}}}},require$$19={interfaces:interfaces$5};var fallback={exports:{}};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var object_hash={exports:{}},hasRequiredObject_hash;function requireObject_hash(){return hasRequiredObject_hash||(hasRequiredObject_hash=1,function(t,e){(function(r){t.exports=r()})(function(){return function r(u,d,m){function c(s,h){if(!d[s]){if(!u[s]){var v=typeof commonjsRequire=="function"&&commonjsRequire;if(!h&&v)return v(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}h=d[s]={exports:{}},u[s][0].call(h.exports,function(E){var y=u[s][1][E];return c(y||E)},h,h.exports,r,u,d,m)}return d[s].exports}for(var a=typeof commonjsRequire=="function"&&commonjsRequire,o=0;o<m.length;o++)c(m[o]);return c}({1:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){var A=r("crypto");function w(H,U){U=S(H,U);var P;return(P=U.algorithm!=="passthrough"?A.createHash(U.algorithm):new J).write===void 0&&(P.write=P.update,P.end=P.update),K(U,P).dispatch(H),P.update||P.end(""),P.digest?P.digest(U.encoding==="buffer"?void 0:U.encoding):(H=P.read(),U.encoding!=="buffer"?H.toString(U.encoding):H)}(d=u.exports=w).sha1=function(H){return w(H)},d.keys=function(H){return w(H,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},d.MD5=function(H){return w(H,{algorithm:"md5",encoding:"hex"})},d.keysMD5=function(H){return w(H,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var I=A.getHashes?A.getHashes().slice():["sha1","md5"],_=(I.push("passthrough"),["buffer","hex","binary","base64"]);function S(H,U){var P={};if(P.algorithm=(U=U||{}).algorithm||"sha1",P.encoding=U.encoding||"hex",P.excludeValues=!!U.excludeValues,P.algorithm=P.algorithm.toLowerCase(),P.encoding=P.encoding.toLowerCase(),P.ignoreUnknown=U.ignoreUnknown===!0,P.respectType=U.respectType!==!1,P.respectFunctionNames=U.respectFunctionNames!==!1,P.respectFunctionProperties=U.respectFunctionProperties!==!1,P.unorderedArrays=U.unorderedArrays===!0,P.unorderedSets=U.unorderedSets!==!1,P.unorderedObjects=U.unorderedObjects!==!1,P.replacer=U.replacer||void 0,P.excludeKeys=U.excludeKeys||void 0,H===void 0)throw new Error("Object argument required.");for(var Z=0;Z<I.length;++Z)I[Z].toLowerCase()===P.algorithm.toLowerCase()&&(P.algorithm=I[Z]);if(I.indexOf(P.algorithm)===-1)throw new Error('Algorithm "'+P.algorithm+'"  not supported. supported values: '+I.join(", "));if(_.indexOf(P.encoding)===-1&&P.algorithm!=="passthrough")throw new Error('Encoding "'+P.encoding+'"  not supported. supported values: '+_.join(", "));return P}function j(H){if(typeof H=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(H))!=null}function K(H,U,P){P=P||[];function Z(ie){return U.update?U.update(ie,"utf8"):U.write(ie,"utf8")}return{dispatch:function(ie){return this["_"+((ie=H.replacer?H.replacer(ie):ie)===null?"null":typeof ie)](ie)},_object:function(ie){var ue,le=Object.prototype.toString.call(ie),ne=/\[object (.*)\]/i.exec(le);if(ne=(ne=ne?ne[1]:"unknown:["+le+"]").toLowerCase(),0<=(le=P.indexOf(ie)))return this.dispatch("[CIRCULAR:"+le+"]");if(P.push(ie),a!==void 0&&a.isBuffer&&a.isBuffer(ie))return Z("buffer:"),Z(ie);if(ne==="object"||ne==="function"||ne==="asyncfunction")return le=Object.keys(ie),H.unorderedObjects&&(le=le.sort()),H.respectType===!1||j(ie)||le.splice(0,0,"prototype","__proto__","constructor"),H.excludeKeys&&(le=le.filter(function(ye){return!H.excludeKeys(ye)})),Z("object:"+le.length+":"),ue=this,le.forEach(function(ye){ue.dispatch(ye),Z(":"),H.excludeValues||ue.dispatch(ie[ye]),Z(",")});if(!this["_"+ne]){if(H.ignoreUnknown)return Z("["+ne+"]");throw new Error('Unknown object type "'+ne+'"')}this["_"+ne](ie)},_array:function(ie,ye){ye=ye!==void 0?ye:H.unorderedArrays!==!1;var le=this;if(Z("array:"+ie.length+":"),!ye||ie.length<=1)return ie.forEach(function(fe){return le.dispatch(fe)});var ne=[],ye=ie.map(function(fe){var Te=new J,Ae=P.slice();return K(H,Te,Ae).dispatch(fe),ne=ne.concat(Ae.slice(P.length)),Te.read().toString()});return P=P.concat(ne),ye.sort(),this._array(ye,!1)},_date:function(ie){return Z("date:"+ie.toJSON())},_symbol:function(ie){return Z("symbol:"+ie.toString())},_error:function(ie){return Z("error:"+ie.toString())},_boolean:function(ie){return Z("bool:"+ie.toString())},_string:function(ie){Z("string:"+ie.length+":"),Z(ie.toString())},_function:function(ie){Z("fn:"),j(ie)?this.dispatch("[native]"):this.dispatch(ie.toString()),H.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(ie.name)),H.respectFunctionProperties&&this._object(ie)},_number:function(ie){return Z("number:"+ie.toString())},_xml:function(ie){return Z("xml:"+ie.toString())},_null:function(){return Z("Null")},_undefined:function(){return Z("Undefined")},_regexp:function(ie){return Z("regex:"+ie.toString())},_uint8array:function(ie){return Z("uint8array:"),this.dispatch(Array.prototype.slice.call(ie))},_uint8clampedarray:function(ie){return Z("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(ie))},_int8array:function(ie){return Z("int8array:"),this.dispatch(Array.prototype.slice.call(ie))},_uint16array:function(ie){return Z("uint16array:"),this.dispatch(Array.prototype.slice.call(ie))},_int16array:function(ie){return Z("int16array:"),this.dispatch(Array.prototype.slice.call(ie))},_uint32array:function(ie){return Z("uint32array:"),this.dispatch(Array.prototype.slice.call(ie))},_int32array:function(ie){return Z("int32array:"),this.dispatch(Array.prototype.slice.call(ie))},_float32array:function(ie){return Z("float32array:"),this.dispatch(Array.prototype.slice.call(ie))},_float64array:function(ie){return Z("float64array:"),this.dispatch(Array.prototype.slice.call(ie))},_arraybuffer:function(ie){return Z("arraybuffer:"),this.dispatch(new Uint8Array(ie))},_url:function(ie){return Z("url:"+ie.toString())},_map:function(ie){return Z("map:"),ie=Array.from(ie),this._array(ie,H.unorderedSets!==!1)},_set:function(ie){return Z("set:"),ie=Array.from(ie),this._array(ie,H.unorderedSets!==!1)},_file:function(ie){return Z("file:"),this.dispatch([ie.name,ie.size,ie.type,ie.lastModfied])},_blob:function(){if(H.ignoreUnknown)return Z("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return Z("domwindow")},_bigint:function(ie){return Z("bigint:"+ie.toString())},_process:function(){return Z("process")},_timer:function(){return Z("timer")},_pipe:function(){return Z("pipe")},_tcp:function(){return Z("tcp")},_udp:function(){return Z("udp")},_tty:function(){return Z("tty")},_statwatcher:function(){return Z("statwatcher")},_securecontext:function(){return Z("securecontext")},_connection:function(){return Z("connection")},_zlib:function(){return Z("zlib")},_context:function(){return Z("context")},_nodescript:function(){return Z("nodescript")},_httpparser:function(){return Z("httpparser")},_dataview:function(){return Z("dataview")},_signal:function(){return Z("signal")},_fsevent:function(){return Z("fsevent")},_tlswrap:function(){return Z("tlswrap")}}}function J(){return{buf:"",write:function(H){this.buf+=H},end:function(H){this.buf+=H},read:function(){return this.buf}}}d.writeToStream=function(H,U,P){return P===void 0&&(P=U,U={}),K(U=S(H,U),P).dispatch(H)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){(function(A){var w=typeof Uint8Array<"u"?Uint8Array:Array,I=43,_=47,S=48,j=97,K=65,J=45,H=95;function U(P){return P=P.charCodeAt(0),P===I||P===J?62:P===_||P===H?63:P<S?-1:P<S+10?P-S+26+26:P<K+26?P-K:P<j+26?P-j+26:void 0}A.toByteArray=function(P){var Z,ie;if(0<P.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ue=P.length,ue=P.charAt(ue-2)==="="?2:P.charAt(ue-1)==="="?1:0,le=new w(3*P.length/4-ue),ne=0<ue?P.length-4:P.length,ye=0;function fe(Te){le[ye++]=Te}for(Z=0;Z<ne;Z+=4,0)fe((16711680&(ie=U(P.charAt(Z))<<18|U(P.charAt(Z+1))<<12|U(P.charAt(Z+2))<<6|U(P.charAt(Z+3))))>>16),fe((65280&ie)>>8),fe(255&ie);return ue==2?fe(255&(ie=U(P.charAt(Z))<<2|U(P.charAt(Z+1))>>4)):ue==1&&(fe((ie=U(P.charAt(Z))<<10|U(P.charAt(Z+1))<<4|U(P.charAt(Z+2))>>2)>>8&255),fe(255&ie)),le},A.fromByteArray=function(P){var Z,ie,ue,le,ne=P.length%3,ye="";function fe(Te){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Te)}for(Z=0,ue=P.length-ne;Z<ue;Z+=3)ie=(P[Z]<<16)+(P[Z+1]<<8)+P[Z+2],ye+=fe((le=ie)>>18&63)+fe(le>>12&63)+fe(le>>6&63)+fe(63&le);switch(ne){case 1:ye=(ye+=fe((ie=P[P.length-1])>>2))+fe(ie<<4&63)+"==";break;case 2:ye=(ye=(ye+=fe((ie=(P[P.length-2]<<8)+P[P.length-1])>>10))+fe(ie>>4&63))+fe(ie<<2&63)+"="}return ye}})(d===void 0?this.base64js={}:d)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(r,u,d){(function(m,c,I,o,s,h,v,E,y){var A=r("base64-js"),w=r("ieee754");function I(he,p,V){if(!(this instanceof I))return new I(he,p,V);var R,ce,Re,ke,qe=typeof he;if(p==="base64"&&qe=="string")for(he=(ke=he).trim?ke.trim():ke.replace(/^\s+|\s+$/g,"");he.length%4!=0;)he+="=";if(qe=="number")R=Se(he);else if(qe=="string")R=I.byteLength(he,p);else{if(qe!="object")throw new Error("First argument needs to be a number, array or string.");R=Se(he.length)}if(I._useTypedArrays?ce=I._augment(new Uint8Array(R)):((ce=this).length=R,ce._isBuffer=!0),I._useTypedArrays&&typeof he.byteLength=="number")ce._set(he);else if(be(ke=he)||I.isBuffer(ke)||ke&&typeof ke=="object"&&typeof ke.length=="number")for(Re=0;Re<R;Re++)I.isBuffer(he)?ce[Re]=he.readUInt8(Re):ce[Re]=he[Re];else if(qe=="string")ce.write(he,0,p);else if(qe=="number"&&!I._useTypedArrays&&!V)for(Re=0;Re<R;Re++)ce[Re]=0;return ce}function _(he,p,V,R){return I._charsWritten=Fe(function(ce){for(var Re=[],ke=0;ke<ce.length;ke++)Re.push(255&ce.charCodeAt(ke));return Re}(p),he,V,R)}function S(he,p,V,R){return I._charsWritten=Fe(function(ce){for(var Re,ke,qe=[],g=0;g<ce.length;g++)ke=ce.charCodeAt(g),Re=ke>>8,ke=ke%256,qe.push(ke),qe.push(Re);return qe}(p),he,V,R)}function j(he,p,V){var R="";V=Math.min(he.length,V);for(var ce=p;ce<V;ce++)R+=String.fromCharCode(he[ce]);return R}function K(he,p,V,Re){Re||($e(typeof V=="boolean","missing or invalid endian"),$e(p!=null,"missing offset"),$e(p+1<he.length,"Trying to read beyond buffer length"));var ce,Re=he.length;if(!(Re<=p))return V?(ce=he[p],p+1<Re&&(ce|=he[p+1]<<8)):(ce=he[p]<<8,p+1<Re&&(ce|=he[p+1])),ce}function J(he,p,V,Re){Re||($e(typeof V=="boolean","missing or invalid endian"),$e(p!=null,"missing offset"),$e(p+3<he.length,"Trying to read beyond buffer length"));var ce,Re=he.length;if(!(Re<=p))return V?(p+2<Re&&(ce=he[p+2]<<16),p+1<Re&&(ce|=he[p+1]<<8),ce|=he[p],p+3<Re&&(ce+=he[p+3]<<24>>>0)):(p+1<Re&&(ce=he[p+1]<<16),p+2<Re&&(ce|=he[p+2]<<8),p+3<Re&&(ce|=he[p+3]),ce+=he[p]<<24>>>0),ce}function H(he,p,V,R){if(R||($e(typeof V=="boolean","missing or invalid endian"),$e(p!=null,"missing offset"),$e(p+1<he.length,"Trying to read beyond buffer length")),!(he.length<=p))return R=K(he,p,V,!0),32768&R?-1*(65535-R+1):R}function U(he,p,V,R){if(R||($e(typeof V=="boolean","missing or invalid endian"),$e(p!=null,"missing offset"),$e(p+3<he.length,"Trying to read beyond buffer length")),!(he.length<=p))return R=J(he,p,V,!0),2147483648&R?-1*(4294967295-R+1):R}function P(he,p,V,R){return R||($e(typeof V=="boolean","missing or invalid endian"),$e(p+3<he.length,"Trying to read beyond buffer length")),w.read(he,p,V,23,4)}function Z(he,p,V,R){return R||($e(typeof V=="boolean","missing or invalid endian"),$e(p+7<he.length,"Trying to read beyond buffer length")),w.read(he,p,V,52,8)}function ie(he,p,V,R,ce){if(ce||($e(p!=null,"missing value"),$e(typeof R=="boolean","missing or invalid endian"),$e(V!=null,"missing offset"),$e(V+1<he.length,"trying to write beyond buffer length"),Ge(p,65535)),ce=he.length,!(ce<=V))for(var Re=0,ke=Math.min(ce-V,2);Re<ke;Re++)he[V+Re]=(p&255<<8*(R?Re:1-Re))>>>8*(R?Re:1-Re)}function ue(he,p,V,R,ce){if(ce||($e(p!=null,"missing value"),$e(typeof R=="boolean","missing or invalid endian"),$e(V!=null,"missing offset"),$e(V+3<he.length,"trying to write beyond buffer length"),Ge(p,4294967295)),ce=he.length,!(ce<=V))for(var Re=0,ke=Math.min(ce-V,4);Re<ke;Re++)he[V+Re]=p>>>8*(R?Re:3-Re)&255}function le(he,p,V,R,ce){ce||($e(p!=null,"missing value"),$e(typeof R=="boolean","missing or invalid endian"),$e(V!=null,"missing offset"),$e(V+1<he.length,"Trying to write beyond buffer length"),Le(p,32767,-32768)),he.length<=V||ie(he,0<=p?p:65535+p+1,V,R,ce)}function ne(he,p,V,R,ce){ce||($e(p!=null,"missing value"),$e(typeof R=="boolean","missing or invalid endian"),$e(V!=null,"missing offset"),$e(V+3<he.length,"Trying to write beyond buffer length"),Le(p,2147483647,-2147483648)),he.length<=V||ue(he,0<=p?p:4294967295+p+1,V,R,ce)}function ye(he,p,V,R,ce){ce||($e(p!=null,"missing value"),$e(typeof R=="boolean","missing or invalid endian"),$e(V!=null,"missing offset"),$e(V+3<he.length,"Trying to write beyond buffer length"),Be(p,34028234663852886e22,-34028234663852886e22)),he.length<=V||w.write(he,p,V,R,23,4)}function fe(he,p,V,R,ce){ce||($e(p!=null,"missing value"),$e(typeof R=="boolean","missing or invalid endian"),$e(V!=null,"missing offset"),$e(V+7<he.length,"Trying to write beyond buffer length"),Be(p,17976931348623157e292,-17976931348623157e292)),he.length<=V||w.write(he,p,V,R,52,8)}d.Buffer=I,d.SlowBuffer=I,d.INSPECT_MAX_BYTES=50,I.poolSize=8192,I._useTypedArrays=function(){try{var he=new ArrayBuffer(0),p=new Uint8Array(he);return p.foo=function(){return 42},p.foo()===42&&typeof p.subarray=="function"}catch{return!1}}(),I.isEncoding=function(he){switch(String(he).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},I.isBuffer=function(he){return!(he==null||!he._isBuffer)},I.byteLength=function(he,p){var V;switch(he+="",p||"utf8"){case"hex":V=he.length/2;break;case"utf8":case"utf-8":V=Ce(he).length;break;case"ascii":case"binary":case"raw":V=he.length;break;case"base64":V=je(he).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":V=2*he.length;break;default:throw new Error("Unknown encoding")}return V},I.concat=function(he,p){if($e(be(he),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),he.length===0)return new I(0);if(he.length===1)return he[0];if(typeof p!="number")for(ce=p=0;ce<he.length;ce++)p+=he[ce].length;for(var V=new I(p),R=0,ce=0;ce<he.length;ce++){var Re=he[ce];Re.copy(V,R),R+=Re.length}return V},I.prototype.write=function(he,p,V,R){isFinite(p)?isFinite(V)||(R=V,V=void 0):(g=R,R=p,p=V,V=g),p=Number(p)||0;var ce,Re,ke,qe,g=this.length-p;switch((!V||g<(V=Number(V)))&&(V=g),R=String(R||"utf8").toLowerCase()){case"hex":ce=function(ee,ae,l,X){l=Number(l)||0;var oe=ee.length-l;(!X||oe<(X=Number(X)))&&(X=oe),$e((oe=ae.length)%2==0,"Invalid hex string"),oe/2<X&&(X=oe/2);for(var _e=0;_e<X;_e++){var He=parseInt(ae.substr(2*_e,2),16);$e(!isNaN(He),"Invalid hex string"),ee[l+_e]=He}return I._charsWritten=2*_e,_e}(this,he,p,V);break;case"utf8":case"utf-8":Re=this,ke=p,qe=V,ce=I._charsWritten=Fe(Ce(he),Re,ke,qe);break;case"ascii":case"binary":ce=_(this,he,p,V);break;case"base64":Re=this,ke=p,qe=V,ce=I._charsWritten=Fe(je(he),Re,ke,qe);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ce=S(this,he,p,V);break;default:throw new Error("Unknown encoding")}return ce},I.prototype.toString=function(he,p,V){var R,ce,Re,ke,qe=this;if(he=String(he||"utf8").toLowerCase(),p=Number(p)||0,(V=V!==void 0?Number(V):qe.length)===p)return"";switch(he){case"hex":R=function(g,ee,ae){var l=g.length;(!ee||ee<0)&&(ee=0),(!ae||ae<0||l<ae)&&(ae=l);for(var X="",oe=ee;oe<ae;oe++)X+=we(g[oe]);return X}(qe,p,V);break;case"utf8":case"utf-8":R=function(g,ee,ae){var l="",X="";ae=Math.min(g.length,ae);for(var oe=ee;oe<ae;oe++)g[oe]<=127?(l+=Ve(X)+String.fromCharCode(g[oe]),X=""):X+="%"+g[oe].toString(16);return l+Ve(X)}(qe,p,V);break;case"ascii":case"binary":R=j(qe,p,V);break;case"base64":ce=qe,ke=V,R=(Re=p)===0&&ke===ce.length?A.fromByteArray(ce):A.fromByteArray(ce.slice(Re,ke));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":R=function(g,ee,ae){for(var l=g.slice(ee,ae),X="",oe=0;oe<l.length;oe+=2)X+=String.fromCharCode(l[oe]+256*l[oe+1]);return X}(qe,p,V);break;default:throw new Error("Unknown encoding")}return R},I.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},I.prototype.copy=function(he,p,V,R){if(p=p||0,(R=R||R===0?R:this.length)!==(V=V||0)&&he.length!==0&&this.length!==0){$e(V<=R,"sourceEnd < sourceStart"),$e(0<=p&&p<he.length,"targetStart out of bounds"),$e(0<=V&&V<this.length,"sourceStart out of bounds"),$e(0<=R&&R<=this.length,"sourceEnd out of bounds"),R>this.length&&(R=this.length);var ce=(R=he.length-p<R-V?he.length-p+V:R)-V;if(ce<100||!I._useTypedArrays)for(var Re=0;Re<ce;Re++)he[Re+p]=this[Re+V];else he._set(this.subarray(V,V+ce),p)}},I.prototype.slice=function(he,p){var V=this.length;if(he=Ae(he,V,0),p=Ae(p,V,V),I._useTypedArrays)return I._augment(this.subarray(he,p));for(var R=p-he,ce=new I(R,void 0,!0),Re=0;Re<R;Re++)ce[Re]=this[Re+he];return ce},I.prototype.get=function(he){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(he)},I.prototype.set=function(he,p){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(he,p)},I.prototype.readUInt8=function(he,p){if(p||($e(he!=null,"missing offset"),$e(he<this.length,"Trying to read beyond buffer length")),!(he>=this.length))return this[he]},I.prototype.readUInt16LE=function(he,p){return K(this,he,!0,p)},I.prototype.readUInt16BE=function(he,p){return K(this,he,!1,p)},I.prototype.readUInt32LE=function(he,p){return J(this,he,!0,p)},I.prototype.readUInt32BE=function(he,p){return J(this,he,!1,p)},I.prototype.readInt8=function(he,p){if(p||($e(he!=null,"missing offset"),$e(he<this.length,"Trying to read beyond buffer length")),!(he>=this.length))return 128&this[he]?-1*(255-this[he]+1):this[he]},I.prototype.readInt16LE=function(he,p){return H(this,he,!0,p)},I.prototype.readInt16BE=function(he,p){return H(this,he,!1,p)},I.prototype.readInt32LE=function(he,p){return U(this,he,!0,p)},I.prototype.readInt32BE=function(he,p){return U(this,he,!1,p)},I.prototype.readFloatLE=function(he,p){return P(this,he,!0,p)},I.prototype.readFloatBE=function(he,p){return P(this,he,!1,p)},I.prototype.readDoubleLE=function(he,p){return Z(this,he,!0,p)},I.prototype.readDoubleBE=function(he,p){return Z(this,he,!1,p)},I.prototype.writeUInt8=function(he,p,V){V||($e(he!=null,"missing value"),$e(p!=null,"missing offset"),$e(p<this.length,"trying to write beyond buffer length"),Ge(he,255)),p>=this.length||(this[p]=he)},I.prototype.writeUInt16LE=function(he,p,V){ie(this,he,p,!0,V)},I.prototype.writeUInt16BE=function(he,p,V){ie(this,he,p,!1,V)},I.prototype.writeUInt32LE=function(he,p,V){ue(this,he,p,!0,V)},I.prototype.writeUInt32BE=function(he,p,V){ue(this,he,p,!1,V)},I.prototype.writeInt8=function(he,p,V){V||($e(he!=null,"missing value"),$e(p!=null,"missing offset"),$e(p<this.length,"Trying to write beyond buffer length"),Le(he,127,-128)),p>=this.length||(0<=he?this.writeUInt8(he,p,V):this.writeUInt8(255+he+1,p,V))},I.prototype.writeInt16LE=function(he,p,V){le(this,he,p,!0,V)},I.prototype.writeInt16BE=function(he,p,V){le(this,he,p,!1,V)},I.prototype.writeInt32LE=function(he,p,V){ne(this,he,p,!0,V)},I.prototype.writeInt32BE=function(he,p,V){ne(this,he,p,!1,V)},I.prototype.writeFloatLE=function(he,p,V){ye(this,he,p,!0,V)},I.prototype.writeFloatBE=function(he,p,V){ye(this,he,p,!1,V)},I.prototype.writeDoubleLE=function(he,p,V){fe(this,he,p,!0,V)},I.prototype.writeDoubleBE=function(he,p,V){fe(this,he,p,!1,V)},I.prototype.fill=function(he,p,V){if(p=p||0,V=V||this.length,$e(typeof(he=typeof(he=he||0)=="string"?he.charCodeAt(0):he)=="number"&&!isNaN(he),"value is not a number"),$e(p<=V,"end < start"),V!==p&&this.length!==0){$e(0<=p&&p<this.length,"start out of bounds"),$e(0<=V&&V<=this.length,"end out of bounds");for(var R=p;R<V;R++)this[R]=he}},I.prototype.inspect=function(){for(var he=[],p=this.length,V=0;V<p;V++)if(he[V]=we(this[V]),V===d.INSPECT_MAX_BYTES){he[V+1]="...";break}return"<Buffer "+he.join(" ")+">"},I.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(I._useTypedArrays)return new I(this).buffer;for(var he=new Uint8Array(this.length),p=0,V=he.length;p<V;p+=1)he[p]=this[p];return he.buffer};var Te=I.prototype;function Ae(he,p,V){return typeof he!="number"?V:p<=(he=~~he)?p:0<=he||0<=(he+=p)?he:0}function Se(he){return(he=~~Math.ceil(+he))<0?0:he}function be(he){return(Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"})(he)}function we(he){return he<16?"0"+he.toString(16):he.toString(16)}function Ce(he){for(var p=[],V=0;V<he.length;V++){var R=he.charCodeAt(V);if(R<=127)p.push(he.charCodeAt(V));else for(var ce=V,Re=(55296<=R&&R<=57343&&V++,encodeURIComponent(he.slice(ce,V+1)).substr(1).split("%")),ke=0;ke<Re.length;ke++)p.push(parseInt(Re[ke],16))}return p}function je(he){return A.toByteArray(he)}function Fe(he,p,V,R){for(var ce=0;ce<R&&!(ce+V>=p.length||ce>=he.length);ce++)p[ce+V]=he[ce];return ce}function Ve(he){try{return decodeURIComponent(he)}catch{return""}}function Ge(he,p){$e(typeof he=="number","cannot write a non-number as a number"),$e(0<=he,"specified a negative value for writing an unsigned value"),$e(he<=p,"value is larger than maximum value for type"),$e(Math.floor(he)===he,"value has a fractional component")}function Le(he,p,V){$e(typeof he=="number","cannot write a non-number as a number"),$e(he<=p,"value larger than maximum allowed value"),$e(V<=he,"value smaller than minimum allowed value"),$e(Math.floor(he)===he,"value has a fractional component")}function Be(he,p,V){$e(typeof he=="number","cannot write a non-number as a number"),$e(he<=p,"value larger than maximum allowed value"),$e(V<=he,"value smaller than minimum allowed value")}function $e(he,p){if(!he)throw new Error(p||"Failed assertion")}I._augment=function(he){return he._isBuffer=!0,he._get=he.get,he._set=he.set,he.get=Te.get,he.set=Te.set,he.write=Te.write,he.toString=Te.toString,he.toLocaleString=Te.toString,he.toJSON=Te.toJSON,he.copy=Te.copy,he.slice=Te.slice,he.readUInt8=Te.readUInt8,he.readUInt16LE=Te.readUInt16LE,he.readUInt16BE=Te.readUInt16BE,he.readUInt32LE=Te.readUInt32LE,he.readUInt32BE=Te.readUInt32BE,he.readInt8=Te.readInt8,he.readInt16LE=Te.readInt16LE,he.readInt16BE=Te.readInt16BE,he.readInt32LE=Te.readInt32LE,he.readInt32BE=Te.readInt32BE,he.readFloatLE=Te.readFloatLE,he.readFloatBE=Te.readFloatBE,he.readDoubleLE=Te.readDoubleLE,he.readDoubleBE=Te.readDoubleBE,he.writeUInt8=Te.writeUInt8,he.writeUInt16LE=Te.writeUInt16LE,he.writeUInt16BE=Te.writeUInt16BE,he.writeUInt32LE=Te.writeUInt32LE,he.writeUInt32BE=Te.writeUInt32BE,he.writeInt8=Te.writeInt8,he.writeInt16LE=Te.writeInt16LE,he.writeInt16BE=Te.writeInt16BE,he.writeInt32LE=Te.writeInt32LE,he.writeInt32BE=Te.writeInt32BE,he.writeFloatLE=Te.writeFloatLE,he.writeFloatBE=Te.writeFloatBE,he.writeDoubleLE=Te.writeDoubleLE,he.writeDoubleBE=Te.writeDoubleBE,he.fill=Te.fill,he.inspect=Te.inspect,he.toArrayBuffer=Te.toArrayBuffer,he}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(r,u,d){(function(m,c,A,o,s,h,v,E,y){var A=r("buffer").Buffer,w=4,I=new A(w);I.fill(0),u.exports={hash:function(_,S,j,K){for(var J=S(function(ie,ue){ie.length%w!=0&&(le=ie.length+(w-ie.length%w),ie=A.concat([ie,I],le));for(var le,ne=[],ye=ue?ie.readInt32BE:ie.readInt32LE,fe=0;fe<ie.length;fe+=w)ne.push(ye.call(ie,fe));return ne}(_=A.isBuffer(_)?_:new A(_),K),8*_.length),S=K,H=new A(j),U=S?H.writeInt32BE:H.writeInt32LE,P=0;P<J.length;P++)U.call(H,J[P],4*P,!0);return H}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(r,u,d){(function(m,c,A,o,s,h,v,E,y){var A=r("buffer").Buffer,w=r("./sha"),I=r("./sha256"),_=r("./rng"),S={sha1:w,sha256:I,md5:r("./md5")},j=64,K=new A(j);function J(ie,ue){var le=S[ie=ie||"sha1"],ne=[];return le||H("algorithm:",ie,"is not yet supported"),{update:function(ye){return A.isBuffer(ye)||(ye=new A(ye)),ne.push(ye),ye.length,this},digest:function(ye){var fe=A.concat(ne),fe=ue?function(Te,Ae,Se){A.isBuffer(Ae)||(Ae=new A(Ae)),A.isBuffer(Se)||(Se=new A(Se)),Ae.length>j?Ae=Te(Ae):Ae.length<j&&(Ae=A.concat([Ae,K],j));for(var be=new A(j),we=new A(j),Ce=0;Ce<j;Ce++)be[Ce]=54^Ae[Ce],we[Ce]=92^Ae[Ce];return Se=Te(A.concat([be,Se])),Te(A.concat([we,Se]))}(le,ue,fe):le(fe);return ne=null,ye?fe.toString(ye):fe}}}function H(){var ie=[].slice.call(arguments).join(" ");throw new Error([ie,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}K.fill(0),d.createHash=function(ie){return J(ie)},d.createHmac=J,d.randomBytes=function(ie,ue){if(!ue||!ue.call)return new A(_(ie));try{ue.call(this,void 0,new A(_(ie)))}catch(le){ue(le)}};var U,P=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],Z=function(ie){d[ie]=function(){H("sorry,",ie,"is not implemented yet")}};for(U in P)Z(P[U])}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){var A=r("./helpers");function w(H,U){H[U>>5]|=128<<U%32,H[14+(U+64>>>9<<4)]=U;for(var P=1732584193,Z=-271733879,ie=-1732584194,ue=271733878,le=0;le<H.length;le+=16){var ne=P,ye=Z,fe=ie,Te=ue,P=_(P,Z,ie,ue,H[le+0],7,-680876936),ue=_(ue,P,Z,ie,H[le+1],12,-389564586),ie=_(ie,ue,P,Z,H[le+2],17,606105819),Z=_(Z,ie,ue,P,H[le+3],22,-1044525330);P=_(P,Z,ie,ue,H[le+4],7,-176418897),ue=_(ue,P,Z,ie,H[le+5],12,1200080426),ie=_(ie,ue,P,Z,H[le+6],17,-1473231341),Z=_(Z,ie,ue,P,H[le+7],22,-45705983),P=_(P,Z,ie,ue,H[le+8],7,1770035416),ue=_(ue,P,Z,ie,H[le+9],12,-1958414417),ie=_(ie,ue,P,Z,H[le+10],17,-42063),Z=_(Z,ie,ue,P,H[le+11],22,-1990404162),P=_(P,Z,ie,ue,H[le+12],7,1804603682),ue=_(ue,P,Z,ie,H[le+13],12,-40341101),ie=_(ie,ue,P,Z,H[le+14],17,-1502002290),P=S(P,Z=_(Z,ie,ue,P,H[le+15],22,1236535329),ie,ue,H[le+1],5,-165796510),ue=S(ue,P,Z,ie,H[le+6],9,-1069501632),ie=S(ie,ue,P,Z,H[le+11],14,643717713),Z=S(Z,ie,ue,P,H[le+0],20,-373897302),P=S(P,Z,ie,ue,H[le+5],5,-701558691),ue=S(ue,P,Z,ie,H[le+10],9,38016083),ie=S(ie,ue,P,Z,H[le+15],14,-660478335),Z=S(Z,ie,ue,P,H[le+4],20,-405537848),P=S(P,Z,ie,ue,H[le+9],5,568446438),ue=S(ue,P,Z,ie,H[le+14],9,-1019803690),ie=S(ie,ue,P,Z,H[le+3],14,-187363961),Z=S(Z,ie,ue,P,H[le+8],20,1163531501),P=S(P,Z,ie,ue,H[le+13],5,-1444681467),ue=S(ue,P,Z,ie,H[le+2],9,-51403784),ie=S(ie,ue,P,Z,H[le+7],14,1735328473),P=j(P,Z=S(Z,ie,ue,P,H[le+12],20,-1926607734),ie,ue,H[le+5],4,-378558),ue=j(ue,P,Z,ie,H[le+8],11,-2022574463),ie=j(ie,ue,P,Z,H[le+11],16,1839030562),Z=j(Z,ie,ue,P,H[le+14],23,-35309556),P=j(P,Z,ie,ue,H[le+1],4,-1530992060),ue=j(ue,P,Z,ie,H[le+4],11,1272893353),ie=j(ie,ue,P,Z,H[le+7],16,-155497632),Z=j(Z,ie,ue,P,H[le+10],23,-1094730640),P=j(P,Z,ie,ue,H[le+13],4,681279174),ue=j(ue,P,Z,ie,H[le+0],11,-358537222),ie=j(ie,ue,P,Z,H[le+3],16,-722521979),Z=j(Z,ie,ue,P,H[le+6],23,76029189),P=j(P,Z,ie,ue,H[le+9],4,-640364487),ue=j(ue,P,Z,ie,H[le+12],11,-421815835),ie=j(ie,ue,P,Z,H[le+15],16,530742520),P=K(P,Z=j(Z,ie,ue,P,H[le+2],23,-995338651),ie,ue,H[le+0],6,-198630844),ue=K(ue,P,Z,ie,H[le+7],10,1126891415),ie=K(ie,ue,P,Z,H[le+14],15,-1416354905),Z=K(Z,ie,ue,P,H[le+5],21,-57434055),P=K(P,Z,ie,ue,H[le+12],6,1700485571),ue=K(ue,P,Z,ie,H[le+3],10,-1894986606),ie=K(ie,ue,P,Z,H[le+10],15,-1051523),Z=K(Z,ie,ue,P,H[le+1],21,-2054922799),P=K(P,Z,ie,ue,H[le+8],6,1873313359),ue=K(ue,P,Z,ie,H[le+15],10,-30611744),ie=K(ie,ue,P,Z,H[le+6],15,-1560198380),Z=K(Z,ie,ue,P,H[le+13],21,1309151649),P=K(P,Z,ie,ue,H[le+4],6,-145523070),ue=K(ue,P,Z,ie,H[le+11],10,-1120210379),ie=K(ie,ue,P,Z,H[le+2],15,718787259),Z=K(Z,ie,ue,P,H[le+9],21,-343485551),P=J(P,ne),Z=J(Z,ye),ie=J(ie,fe),ue=J(ue,Te)}return Array(P,Z,ie,ue)}function I(H,U,P,Z,ie,ue){return J((U=J(J(U,H),J(Z,ue)))<<ie|U>>>32-ie,P)}function _(H,U,P,Z,ie,ue,le){return I(U&P|~U&Z,H,U,ie,ue,le)}function S(H,U,P,Z,ie,ue,le){return I(U&Z|P&~Z,H,U,ie,ue,le)}function j(H,U,P,Z,ie,ue,le){return I(U^P^Z,H,U,ie,ue,le)}function K(H,U,P,Z,ie,ue,le){return I(P^(U|~Z),H,U,ie,ue,le)}function J(H,U){var P=(65535&H)+(65535&U);return(H>>16)+(U>>16)+(P>>16)<<16|65535&P}u.exports=function(H){return A.hash(H,w,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){u.exports=function(A){for(var w,I=new Array(A),_=0;_<A;_++)(3&_)==0&&(w=4294967296*Math.random()),I[_]=w>>>((3&_)<<3)&255;return I}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){var A=r("./helpers");function w(S,j){S[j>>5]|=128<<24-j%32,S[15+(j+64>>9<<4)]=j;for(var K,J,H,U=Array(80),P=1732584193,Z=-271733879,ie=-1732584194,ue=271733878,le=-1009589776,ne=0;ne<S.length;ne+=16){for(var ye=P,fe=Z,Te=ie,Ae=ue,Se=le,be=0;be<80;be++){U[be]=be<16?S[ne+be]:_(U[be-3]^U[be-8]^U[be-14]^U[be-16],1);var we=I(I(_(P,5),(we=Z,J=ie,H=ue,(K=be)<20?we&J|~we&H:!(K<40)&&K<60?we&J|we&H|J&H:we^J^H)),I(I(le,U[be]),(K=be)<20?1518500249:K<40?1859775393:K<60?-1894007588:-899497514)),le=ue,ue=ie,ie=_(Z,30),Z=P,P=we}P=I(P,ye),Z=I(Z,fe),ie=I(ie,Te),ue=I(ue,Ae),le=I(le,Se)}return Array(P,Z,ie,ue,le)}function I(S,j){var K=(65535&S)+(65535&j);return(S>>16)+(j>>16)+(K>>16)<<16|65535&K}function _(S,j){return S<<j|S>>>32-j}u.exports=function(S){return A.hash(S,w,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){function A(j,K){var J=(65535&j)+(65535&K);return(j>>16)+(K>>16)+(J>>16)<<16|65535&J}function w(j,K){var J,H=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),U=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),P=new Array(64);j[K>>5]|=128<<24-K%32,j[15+(K+64>>9<<4)]=K;for(var Z,ie,ue=0;ue<j.length;ue+=16){for(var le=U[0],ne=U[1],ye=U[2],fe=U[3],Te=U[4],Ae=U[5],Se=U[6],be=U[7],we=0;we<64;we++)P[we]=we<16?j[we+ue]:A(A(A((ie=P[we-2],_(ie,17)^_(ie,19)^S(ie,10)),P[we-7]),(ie=P[we-15],_(ie,7)^_(ie,18)^S(ie,3))),P[we-16]),J=A(A(A(A(be,_(ie=Te,6)^_(ie,11)^_(ie,25)),Te&Ae^~Te&Se),H[we]),P[we]),Z=A(_(Z=le,2)^_(Z,13)^_(Z,22),le&ne^le&ye^ne&ye),be=Se,Se=Ae,Ae=Te,Te=A(fe,J),fe=ye,ye=ne,ne=le,le=A(J,Z);U[0]=A(le,U[0]),U[1]=A(ne,U[1]),U[2]=A(ye,U[2]),U[3]=A(fe,U[3]),U[4]=A(Te,U[4]),U[5]=A(Ae,U[5]),U[6]=A(Se,U[6]),U[7]=A(be,U[7])}return U}var I=r("./helpers"),_=function(j,K){return j>>>K|j<<32-K},S=function(j,K){return j>>>K};u.exports=function(j){return I.hash(j,w,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){d.read=function(A,w,I,_,ue){var j,K,J=8*ue-_-1,H=(1<<J)-1,U=H>>1,P=-7,Z=I?ue-1:0,ie=I?-1:1,ue=A[w+Z];for(Z+=ie,j=ue&(1<<-P)-1,ue>>=-P,P+=J;0<P;j=256*j+A[w+Z],Z+=ie,P-=8);for(K=j&(1<<-P)-1,j>>=-P,P+=_;0<P;K=256*K+A[w+Z],Z+=ie,P-=8);if(j===0)j=1-U;else{if(j===H)return K?NaN:1/0*(ue?-1:1);K+=Math.pow(2,_),j-=U}return(ue?-1:1)*K*Math.pow(2,j-_)},d.write=function(A,w,I,_,S,le){var K,J,H=8*le-S-1,U=(1<<H)-1,P=U>>1,Z=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=_?0:le-1,ue=_?1:-1,le=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(J=isNaN(w)?1:0,K=U):(K=Math.floor(Math.log(w)/Math.LN2),w*(_=Math.pow(2,-K))<1&&(K--,_*=2),2<=(w+=1<=K+P?Z/_:Z*Math.pow(2,1-P))*_&&(K++,_/=2),U<=K+P?(J=0,K=U):1<=K+P?(J=(w*_-1)*Math.pow(2,S),K+=P):(J=w*Math.pow(2,P-1)*Math.pow(2,S),K=0));8<=S;A[I+ie]=255&J,ie+=ue,J/=256,S-=8);for(K=K<<S|J,H+=S;0<H;A[I+ie]=255&K,ie+=ue,K/=256,H-=8);A[I+ie-ue]|=128*le}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(r,u,d){(function(m,c,a,o,s,h,v,E,y){var A,w,I;function _(){}(m=u.exports={}).nextTick=(w=typeof window<"u"&&window.setImmediate,I=typeof window<"u"&&window.postMessage&&window.addEventListener,w?function(S){return window.setImmediate(S)}:I?(A=[],window.addEventListener("message",function(S){var j=S.source;j!==window&&j!==null||S.data!=="process-tick"||(S.stopPropagation(),0<A.length&&A.shift()())},!0),function(S){A.push(S),window.postMessage("process-tick","*")}):function(S){setTimeout(S,0)}),m.title="browser",m.browser=!0,m.env={},m.argv=[],m.on=_,m.addListener=_,m.once=_,m.off=_,m.removeListener=_,m.removeAllListeners=_,m.emit=_,m.binding=function(S){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(S){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})}(object_hash)),object_hash.exports}var src$1={exports:{}},indexLight={exports:{}},indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=t;function t(e,r){for(var u=new Array(arguments.length-1),d=0,m=2,c=!0;m<arguments.length;)u[d++]=arguments[m++];return new Promise(function(o,s){u[d]=function(v){if(c)if(c=!1,v)s(v);else{for(var E=new Array(arguments.length-1),y=0;y<E.length;)E[y++]=arguments[y];o.apply(null,E)}};try{e.apply(r||null,u)}catch(h){c&&(c=!1,s(h))}})}return aspromise}var base64$2={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(t){var e=t;e.length=function(a){var o=a.length;if(!o)return 0;for(var s=0;--o%4>1&&a.charAt(o)==="=";)++s;return Math.ceil(a.length*3)/4-s};for(var r=new Array(64),u=new Array(123),d=0;d<64;)u[r[d]=d<26?d+65:d<52?d+71:d<62?d-4:d-59|43]=d++;e.encode=function(a,o,s){for(var h=null,v=[],E=0,y=0,A;o<s;){var w=a[o++];switch(y){case 0:v[E++]=r[w>>2],A=(w&3)<<4,y=1;break;case 1:v[E++]=r[A|w>>4],A=(w&15)<<2,y=2;break;case 2:v[E++]=r[A|w>>6],v[E++]=r[w&63],y=0;break}E>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,v)),E=0)}return y&&(v[E++]=r[A],v[E++]=61,y===1&&(v[E++]=61)),h?(E&&h.push(String.fromCharCode.apply(String,v.slice(0,E))),h.join("")):String.fromCharCode.apply(String,v.slice(0,E))};var m="invalid encoding";e.decode=function(a,o,s){for(var h=s,v=0,E,y=0;y<a.length;){var A=a.charCodeAt(y++);if(A===61&&v>1)break;if((A=u[A])===void 0)throw Error(m);switch(v){case 0:E=A,v=1;break;case 1:o[s++]=E<<2|(A&48)>>4,E=A,v=2;break;case 2:o[s++]=(E&15)<<4|(A&60)>>2,E=A,v=3;break;case 3:o[s++]=(E&3)<<6|A,v=0;break}}if(v===1)throw Error(m);return s-h},e.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}}(base64$2)),base64$2}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=t;function t(){this._listeners={}}return t.prototype.on=function(r,u,d){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:u,ctx:d||this}),this},t.prototype.off=function(r,u){if(r===void 0)this._listeners={};else if(u===void 0)this._listeners[r]=[];else for(var d=this._listeners[r],m=0;m<d.length;)d[m].fn===u?d.splice(m,1):++m;return this},t.prototype.emit=function(r){var u=this._listeners[r];if(u){for(var d=[],m=1;m<arguments.length;)d.push(arguments[m++]);for(m=0;m<u.length;)u[m].fn.apply(u[m++].ctx,d)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=t(t);function t(m){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),a=new Uint8Array(c.buffer),o=a[3]===128;function s(y,A,w){c[0]=y,A[w]=a[0],A[w+1]=a[1],A[w+2]=a[2],A[w+3]=a[3]}function h(y,A,w){c[0]=y,A[w]=a[3],A[w+1]=a[2],A[w+2]=a[1],A[w+3]=a[0]}m.writeFloatLE=o?s:h,m.writeFloatBE=o?h:s;function v(y,A){return a[0]=y[A],a[1]=y[A+1],a[2]=y[A+2],a[3]=y[A+3],c[0]}function E(y,A){return a[3]=y[A],a[2]=y[A+1],a[1]=y[A+2],a[0]=y[A+3],c[0]}m.readFloatLE=o?v:E,m.readFloatBE=o?E:v}():function(){function c(o,s,h,v){var E=s<0?1:0;if(E&&(s=-s),s===0)o(1/s>0?0:2147483648,h,v);else if(isNaN(s))o(2143289344,h,v);else if(s>34028234663852886e22)o((E<<31|2139095040)>>>0,h,v);else if(s<11754943508222875e-54)o((E<<31|Math.round(s/1401298464324817e-60))>>>0,h,v);else{var y=Math.floor(Math.log(s)/Math.LN2),A=Math.round(s*Math.pow(2,-y)*8388608)&8388607;o((E<<31|y+127<<23|A)>>>0,h,v)}}m.writeFloatLE=c.bind(null,e),m.writeFloatBE=c.bind(null,r);function a(o,s,h){var v=o(s,h),E=(v>>31)*2+1,y=v>>>23&255,A=v&8388607;return y===255?A?NaN:E*(1/0):y===0?E*1401298464324817e-60*A:E*Math.pow(2,y-150)*(A+8388608)}m.readFloatLE=a.bind(null,u),m.readFloatBE=a.bind(null,d)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),a=new Uint8Array(c.buffer),o=a[7]===128;function s(y,A,w){c[0]=y,A[w]=a[0],A[w+1]=a[1],A[w+2]=a[2],A[w+3]=a[3],A[w+4]=a[4],A[w+5]=a[5],A[w+6]=a[6],A[w+7]=a[7]}function h(y,A,w){c[0]=y,A[w]=a[7],A[w+1]=a[6],A[w+2]=a[5],A[w+3]=a[4],A[w+4]=a[3],A[w+5]=a[2],A[w+6]=a[1],A[w+7]=a[0]}m.writeDoubleLE=o?s:h,m.writeDoubleBE=o?h:s;function v(y,A){return a[0]=y[A],a[1]=y[A+1],a[2]=y[A+2],a[3]=y[A+3],a[4]=y[A+4],a[5]=y[A+5],a[6]=y[A+6],a[7]=y[A+7],c[0]}function E(y,A){return a[7]=y[A],a[6]=y[A+1],a[5]=y[A+2],a[4]=y[A+3],a[3]=y[A+4],a[2]=y[A+5],a[1]=y[A+6],a[0]=y[A+7],c[0]}m.readDoubleLE=o?v:E,m.readDoubleBE=o?E:v}():function(){function c(o,s,h,v,E,y){var A=v<0?1:0;if(A&&(v=-v),v===0)o(0,E,y+s),o(1/v>0?0:2147483648,E,y+h);else if(isNaN(v))o(0,E,y+s),o(2146959360,E,y+h);else if(v>17976931348623157e292)o(0,E,y+s),o((A<<31|2146435072)>>>0,E,y+h);else{var w;if(v<22250738585072014e-324)w=v/5e-324,o(w>>>0,E,y+s),o((A<<31|w/4294967296)>>>0,E,y+h);else{var I=Math.floor(Math.log(v)/Math.LN2);I===1024&&(I=1023),w=v*Math.pow(2,-I),o(w*4503599627370496>>>0,E,y+s),o((A<<31|I+1023<<20|w*1048576&1048575)>>>0,E,y+h)}}}m.writeDoubleLE=c.bind(null,e,0,4),m.writeDoubleBE=c.bind(null,r,4,0);function a(o,s,h,v,E){var y=o(v,E+s),A=o(v,E+h),w=(A>>31)*2+1,I=A>>>20&2047,_=4294967296*(A&1048575)+y;return I===2047?_?NaN:w*(1/0):I===0?w*5e-324*_:w*Math.pow(2,I-1075)*(_+4503599627370496)}m.readDoubleLE=a.bind(null,u,0,4),m.readDoubleBE=a.bind(null,d,4,0)}(),m}function e(m,c,a){c[a]=m&255,c[a+1]=m>>>8&255,c[a+2]=m>>>16&255,c[a+3]=m>>>24}function r(m,c,a){c[a]=m>>>24,c[a+1]=m>>>16&255,c[a+2]=m>>>8&255,c[a+3]=m&255}function u(m,c){return(m[c]|m[c+1]<<8|m[c+2]<<16|m[c+3]<<24)>>>0}function d(m,c){return(m[c]<<24|m[c+1]<<16|m[c+2]<<8|m[c+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(t){var e=t;e.length=function(u){for(var d=0,m=0,c=0;c<u.length;++c)m=u.charCodeAt(c),m<128?d+=1:m<2048?d+=2:(m&64512)===55296&&(u.charCodeAt(c+1)&64512)===56320?(++c,d+=4):d+=3;return d},e.read=function(u,d,m){var c=m-d;if(c<1)return"";for(var a=null,o=[],s=0,h;d<m;)h=u[d++],h<128?o[s++]=h:h>191&&h<224?o[s++]=(h&31)<<6|u[d++]&63:h>239&&h<365?(h=((h&7)<<18|(u[d++]&63)<<12|(u[d++]&63)<<6|u[d++]&63)-65536,o[s++]=55296+(h>>10),o[s++]=56320+(h&1023)):o[s++]=(h&15)<<12|(u[d++]&63)<<6|u[d++]&63,s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0);return a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))},e.write=function(u,d,m){for(var c=m,a,o,s=0;s<u.length;++s)a=u.charCodeAt(s),a<128?d[m++]=a:a<2048?(d[m++]=a>>6|192,d[m++]=a&63|128):(a&64512)===55296&&((o=u.charCodeAt(s+1))&64512)===56320?(a=65536+((a&1023)<<10)+(o&1023),++s,d[m++]=a>>18|240,d[m++]=a>>12&63|128,d[m++]=a>>6&63|128,d[m++]=a&63|128):(d[m++]=a>>12|224,d[m++]=a>>6&63|128,d[m++]=a&63|128);return m-c}}(utf8)),utf8}var pool_1,hasRequiredPool$1;function requirePool$1(){if(hasRequiredPool$1)return pool_1;hasRequiredPool$1=1,pool_1=t;function t(e,r,u){var d=u||8192,m=d>>>1,c=null,a=d;return function(s){if(s<1||s>m)return e(s);a+s>d&&(c=e(d),a=0);var h=r.call(c,a,a+=s);return a&7&&(a=(a|7)+1),h}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal$1();function e(m,c){this.lo=m>>>0,this.hi=c>>>0}var r=e.zero=new e(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var u=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(c){if(c===0)return r;var a=c<0;a&&(c=-c);var o=c>>>0,s=(c-o)/4294967296>>>0;return a&&(s=~s>>>0,o=~o>>>0,++o>4294967295&&(o=0,++s>4294967295&&(s=0))),new e(o,s)},e.from=function(c){if(typeof c=="number")return e.fromNumber(c);if(t.isString(c))if(t.Long)c=t.Long.fromString(c);else return e.fromNumber(parseInt(c,10));return c.low||c.high?new e(c.low>>>0,c.high>>>0):r},e.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var a=~this.lo+1>>>0,o=~this.hi>>>0;return a||(o=o+1>>>0),-(a+o*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(c){return t.Long?new t.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var d=String.prototype.charCodeAt;return e.fromHash=function(c){return c===u?r:new e((d.call(c,0)|d.call(c,1)<<8|d.call(c,2)<<16|d.call(c,3)<<24)>>>0,(d.call(c,4)|d.call(c,5)<<8|d.call(c,6)<<16|d.call(c,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},e.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},e.prototype.length=function(){var c=this.lo,a=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return o===0?a===0?c<16384?c<128?1:2:c<2097152?3:4:a<16384?a<128?5:6:a<2097152?7:8:o<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(t){var e=t;e.asPromise=requireAspromise(),e.base64=requireBase64(),e.EventEmitter=requireEventemitter(),e.float=requireFloat(),e.inquire=requireInquire(),e.utf8=requireUtf8(),e.pool=requirePool$1(),e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal$4<"u"&&commonjsGlobal$4&&commonjsGlobal$4.process&&commonjsGlobal$4.process.versions&&commonjsGlobal$4.process.versions.node),e.global=e.isNode&&commonjsGlobal$4||typeof window<"u"&&window||typeof self<"u"&&self||minimal$1,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(m){return typeof m=="number"&&isFinite(m)&&Math.floor(m)===m},e.isString=function(m){return typeof m=="string"||m instanceof String},e.isObject=function(m){return m&&typeof m=="object"},e.isset=e.isSet=function(m,c){var a=m[c];return a!=null&&m.hasOwnProperty(c)?typeof a!="object"||(Array.isArray(a)?a.length:Object.keys(a).length)>0:!1},e.Buffer=function(){try{var d=e.inquire("buffer").Buffer;return d.prototype.utf8Write?d:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(m){return typeof m=="number"?e.Buffer?e._Buffer_allocUnsafe(m):new e.Array(m):e.Buffer?e._Buffer_from(m):typeof Uint8Array>"u"?m:new Uint8Array(m)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(m){return m?e.LongBits.from(m).toHash():e.LongBits.zeroHash},e.longFromHash=function(m,c){var a=e.LongBits.fromHash(m);return e.Long?e.Long.fromBits(a.lo,a.hi,c):a.toNumber(!!c)};function r(d,m,c){for(var a=Object.keys(m),o=0;o<a.length;++o)(d[a[o]]===void 0||!c)&&(d[a[o]]=m[a[o]]);return d}e.merge=r,e.lcFirst=function(m){return m.charAt(0).toLowerCase()+m.substring(1)};function u(d){function m(c,a){if(!(this instanceof m))return new m(c,a);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,m):Object.defineProperty(this,"stack",{value:new Error().stack||""}),a&&r(this,a)}return m.prototype=Object.create(Error.prototype,{constructor:{value:m,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return d},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),m}e.newError=u,e.ProtocolError=u("ProtocolError"),e.oneOfGetter=function(m){for(var c={},a=0;a<m.length;++a)c[m[a]]=1;return function(){for(var o=Object.keys(this),s=o.length-1;s>-1;--s)if(c[o[s]]===1&&this[o[s]]!==void 0&&this[o[s]]!==null)return o[s]}},e.oneOfSetter=function(m){return function(c){for(var a=0;a<m.length;++a)m[a]!==c&&delete this[m[a]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var d=e.Buffer;if(!d){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=d.from!==Uint8Array.from&&d.from||function(c,a){return new d(c,a)},e._Buffer_allocUnsafe=d.allocUnsafe||function(c){return new d(c)}}}(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=o;var t=requireMinimal$1(),e,r=t.LongBits,u=t.base64,d=t.utf8;function m(I,_,S){this.fn=I,this.len=_,this.next=void 0,this.val=S}function c(){}function a(I){this.head=I.head,this.tail=I.tail,this.len=I.len,this.next=I.states}function o(){this.len=0,this.head=new m(c,0,0),this.tail=this.head,this.states=null}var s=function(){return t.Buffer?function(){return(o.create=function(){return new e})()}:function(){return new o}};o.create=s(),o.alloc=function(_){return new t.Array(_)},t.Array!==Array&&(o.alloc=t.pool(o.alloc,t.Array.prototype.subarray)),o.prototype._push=function(_,S,j){return this.tail=this.tail.next=new m(_,S,j),this.len+=S,this};function h(I,_,S){_[S]=I&255}function v(I,_,S){for(;I>127;)_[S++]=I&127|128,I>>>=7;_[S]=I}function E(I,_){this.len=I,this.next=void 0,this.val=_}E.prototype=Object.create(m.prototype),E.prototype.fn=v,o.prototype.uint32=function(_){return this.len+=(this.tail=this.tail.next=new E((_=_>>>0)<128?1:_<16384?2:_<2097152?3:_<268435456?4:5,_)).len,this},o.prototype.int32=function(_){return _<0?this._push(y,10,r.fromNumber(_)):this.uint32(_)},o.prototype.sint32=function(_){return this.uint32((_<<1^_>>31)>>>0)};function y(I,_,S){for(;I.hi;)_[S++]=I.lo&127|128,I.lo=(I.lo>>>7|I.hi<<25)>>>0,I.hi>>>=7;for(;I.lo>127;)_[S++]=I.lo&127|128,I.lo=I.lo>>>7;_[S++]=I.lo}o.prototype.uint64=function(_){var S=r.from(_);return this._push(y,S.length(),S)},o.prototype.int64=o.prototype.uint64,o.prototype.sint64=function(_){var S=r.from(_).zzEncode();return this._push(y,S.length(),S)},o.prototype.bool=function(_){return this._push(h,1,_?1:0)};function A(I,_,S){_[S]=I&255,_[S+1]=I>>>8&255,_[S+2]=I>>>16&255,_[S+3]=I>>>24}o.prototype.fixed32=function(_){return this._push(A,4,_>>>0)},o.prototype.sfixed32=o.prototype.fixed32,o.prototype.fixed64=function(_){var S=r.from(_);return this._push(A,4,S.lo)._push(A,4,S.hi)},o.prototype.sfixed64=o.prototype.fixed64,o.prototype.float=function(_){return this._push(t.float.writeFloatLE,4,_)},o.prototype.double=function(_){return this._push(t.float.writeDoubleLE,8,_)};var w=t.Array.prototype.set?function(_,S,j){S.set(_,j)}:function(_,S,j){for(var K=0;K<_.length;++K)S[j+K]=_[K]};return o.prototype.bytes=function(_){var S=_.length>>>0;if(!S)return this._push(h,1,0);if(t.isString(_)){var j=o.alloc(S=u.length(_));u.decode(_,j,0),_=j}return this.uint32(S)._push(w,S,_)},o.prototype.string=function(_){var S=d.length(_);return S?this.uint32(S)._push(d.write,S,_):this._push(h,1,0)},o.prototype.fork=function(){return this.states=new a(this),this.head=this.tail=new m(c,0,0),this.len=0,this},o.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new m(c,0,0),this.len=0),this},o.prototype.ldelim=function(){var _=this.head,S=this.tail,j=this.len;return this.reset().uint32(j),j&&(this.tail.next=_.next,this.tail=S,this.len+=j),this},o.prototype.finish=function(){for(var _=this.head.next,S=this.constructor.alloc(this.len),j=0;_;)_.fn(_.val,S,j),j+=_.len,_=_.next;return S},o._configure=function(I){e=I,o.create=s(),e._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=r;var t=requireWriter();(r.prototype=Object.create(t.prototype)).constructor=r;var e=requireMinimal$1();function r(){t.call(this)}r._configure=function(){r.alloc=e._Buffer_allocUnsafe,r.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&e.Buffer.prototype.set.name==="set"?function(m,c,a){c.set(m,a)}:function(m,c,a){if(m.copy)m.copy(c,a,0,m.length);else for(var o=0;o<m.length;)c[a++]=m[o++]}},r.prototype.bytes=function(m){e.isString(m)&&(m=e._Buffer_from(m,"base64"));var c=m.length>>>0;return this.uint32(c),c&&this._push(r.writeBytesBuffer,c,m),this};function u(d,m,c){d.length<40?e.utf8.write(d,m,c):m.utf8Write?m.utf8Write(d,c):m.write(d,c)}return r.prototype.string=function(m){var c=e.Buffer.byteLength(m);return this.uint32(c),c&&this._push(u,c,m),this},r._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=m;var t=requireMinimal$1(),e,r=t.LongBits,u=t.utf8;function d(v,E){return RangeError("index out of range: "+v.pos+" + "+(E||1)+" > "+v.len)}function m(v){this.buf=v,this.pos=0,this.len=v.length}var c=typeof Uint8Array<"u"?function(E){if(E instanceof Uint8Array||Array.isArray(E))return new m(E);throw Error("illegal buffer")}:function(E){if(Array.isArray(E))return new m(E);throw Error("illegal buffer")},a=function(){return t.Buffer?function(y){return(m.create=function(w){return t.Buffer.isBuffer(w)?new e(w):c(w)})(y)}:c};m.create=a(),m.prototype._slice=t.Array.prototype.subarray||t.Array.prototype.slice,m.prototype.uint32=function(){var E=4294967295;return function(){if(E=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(E=(E|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(E=(E|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(E=(E|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(E=(E|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return E;if((this.pos+=5)>this.len)throw this.pos=this.len,d(this,10);return E}}(),m.prototype.int32=function(){return this.uint32()|0},m.prototype.sint32=function(){var E=this.uint32();return E>>>1^-(E&1)|0};function o(){var v=new r(0,0),E=0;if(this.len-this.pos>4){for(;E<4;++E)if(v.lo=(v.lo|(this.buf[this.pos]&127)<<E*7)>>>0,this.buf[this.pos++]<128)return v;if(v.lo=(v.lo|(this.buf[this.pos]&127)<<28)>>>0,v.hi=(v.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return v;E=0}else{for(;E<3;++E){if(this.pos>=this.len)throw d(this);if(v.lo=(v.lo|(this.buf[this.pos]&127)<<E*7)>>>0,this.buf[this.pos++]<128)return v}return v.lo=(v.lo|(this.buf[this.pos++]&127)<<E*7)>>>0,v}if(this.len-this.pos>4){for(;E<5;++E)if(v.hi=(v.hi|(this.buf[this.pos]&127)<<E*7+3)>>>0,this.buf[this.pos++]<128)return v}else for(;E<5;++E){if(this.pos>=this.len)throw d(this);if(v.hi=(v.hi|(this.buf[this.pos]&127)<<E*7+3)>>>0,this.buf[this.pos++]<128)return v}throw Error("invalid varint encoding")}m.prototype.bool=function(){return this.uint32()!==0};function s(v,E){return(v[E-4]|v[E-3]<<8|v[E-2]<<16|v[E-1]<<24)>>>0}m.prototype.fixed32=function(){if(this.pos+4>this.len)throw d(this,4);return s(this.buf,this.pos+=4)},m.prototype.sfixed32=function(){if(this.pos+4>this.len)throw d(this,4);return s(this.buf,this.pos+=4)|0};function h(){if(this.pos+8>this.len)throw d(this,8);return new r(s(this.buf,this.pos+=4),s(this.buf,this.pos+=4))}return m.prototype.float=function(){if(this.pos+4>this.len)throw d(this,4);var E=t.float.readFloatLE(this.buf,this.pos);return this.pos+=4,E},m.prototype.double=function(){if(this.pos+8>this.len)throw d(this,4);var E=t.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,E},m.prototype.bytes=function(){var E=this.uint32(),y=this.pos,A=this.pos+E;if(A>this.len)throw d(this,E);if(this.pos+=E,Array.isArray(this.buf))return this.buf.slice(y,A);if(y===A){var w=t.Buffer;return w?w.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,y,A)},m.prototype.string=function(){var E=this.bytes();return u.read(E,0,E.length)},m.prototype.skip=function(E){if(typeof E=="number"){if(this.pos+E>this.len)throw d(this,E);this.pos+=E}else do if(this.pos>=this.len)throw d(this);while(this.buf[this.pos++]&128);return this},m.prototype.skipType=function(v){switch(v){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(v=this.uint32()&7)!==4;)this.skipType(v);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+v+" at offset "+this.pos)}return this},m._configure=function(v){e=v,m.create=a(),e._configure();var E=t.Long?"toLong":"toNumber";t.merge(m.prototype,{int64:function(){return o.call(this)[E](!1)},uint64:function(){return o.call(this)[E](!0)},sint64:function(){return o.call(this).zzDecode()[E](!1)},fixed64:function(){return h.call(this)[E](!0)},sfixed64:function(){return h.call(this)[E](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=r;var t=requireReader();(r.prototype=Object.create(t.prototype)).constructor=r;var e=requireMinimal$1();function r(u){t.call(this,u)}return r._configure=function(){e.Buffer&&(r.prototype._slice=e.Buffer.prototype.slice)},r.prototype.string=function(){var d=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+d,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+d,this.len))},r._configure(),reader_buffer}var rpc={},service$1,hasRequiredService$1;function requireService$1(){if(hasRequiredService$1)return service$1;hasRequiredService$1=1,service$1=e;var t=requireMinimal$1();(e.prototype=Object.create(t.EventEmitter.prototype)).constructor=e;function e(r,u,d){if(typeof r!="function")throw TypeError("rpcImpl must be a function");t.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!u,this.responseDelimited=!!d}return e.prototype.rpcCall=function r(u,d,m,c,a){if(!c)throw TypeError("request must be specified");var o=this;if(!a)return t.asPromise(r,o,u,d,m,c);if(!o.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return o.rpcImpl(u,d[o.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(h,v){if(h)return o.emit("error",h,u),a(h);if(v===null){o.end(!0);return}if(!(v instanceof m))try{v=m[o.responseDelimited?"decodeDelimited":"decode"](v)}catch(E){return o.emit("error",E,u),a(E)}return o.emit("data",v,u),a(null,v)})}catch(s){o.emit("error",s,u),setTimeout(function(){a(s)},0);return}},e.prototype.end=function(u){return this.rpcImpl&&(u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service$1}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(t){var e=t;e.Service=requireService$1()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(t){var e=t;e.build="minimal",e.Writer=requireWriter(),e.BufferWriter=requireWriter_buffer(),e.Reader=requireReader(),e.BufferReader=requireReader_buffer(),e.util=requireMinimal$1(),e.rpc=requireRpc(),e.roots=requireRoots(),e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()}(indexMinimal)),indexMinimal}var types$2={},util$2={exports:{}},codegen_1,hasRequiredCodegen;function requireCodegen(){if(hasRequiredCodegen)return codegen_1;hasRequiredCodegen=1,codegen_1=t;function t(e,r){typeof e=="string"&&(r=e,e=void 0);var u=[];function d(c){if(typeof c!="string"){var a=m();if(t.verbose&&console.log("codegen: "+a),a="return "+a,c){for(var o=Object.keys(c),s=new Array(o.length+1),h=new Array(o.length),v=0;v<o.length;)s[v]=o[v],h[v]=c[o[v++]];return s[v]=a,Function.apply(null,s).apply(null,h)}return Function(a)()}for(var E=new Array(arguments.length-1),y=0;y<E.length;)E[y]=arguments[++y];if(y=0,c=c.replace(/%([%dfijs])/g,function(w,I){var _=E[y++];switch(I){case"d":case"f":return String(Number(_));case"i":return String(Math.floor(_));case"j":return JSON.stringify(_);case"s":return String(_)}return"%"}),y!==E.length)throw Error("parameter count mismatch");return u.push(c),d}function m(c){return"function "+(c||r||"")+"("+(e&&e.join(",")||"")+`){
  `+u.join(`
  `)+`
}`}return d.toString=m,d}return t.verbose=!1,codegen_1}var fetch_1,hasRequiredFetch;function requireFetch(){if(hasRequiredFetch)return fetch_1;hasRequiredFetch=1,fetch_1=u;var t=requireAspromise(),e=requireInquire(),r=e("fs");function u(d,m,c){return typeof m=="function"?(c=m,m={}):m||(m={}),c?!m.xhr&&r&&r.readFile?r.readFile(d,function(o,s){return o&&typeof XMLHttpRequest<"u"?u.xhr(d,m,c):o?c(o):c(null,m.binary?s:s.toString("utf8"))}):u.xhr(d,m,c):t(u,this,d,m)}return u.xhr=function(m,c,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(o.readyState===4){if(o.status!==0&&o.status!==200)return a(Error("status "+o.status));if(c.binary){var h=o.response;if(!h){h=[];for(var v=0;v<o.responseText.length;++v)h.push(o.responseText.charCodeAt(v)&255)}return a(null,typeof Uint8Array<"u"?new Uint8Array(h):h)}return a(null,o.responseText)}},c.binary&&("overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.responseType="arraybuffer"),o.open("GET",m),o.send()},fetch_1}var path$1={},hasRequiredPath$1;function requirePath$1(){return hasRequiredPath$1||(hasRequiredPath$1=1,function(t){var e=t,r=e.isAbsolute=function(m){return/^(?:\/|\w+:)/.test(m)},u=e.normalize=function(m){m=m.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var c=m.split("/"),a=r(m),o="";a&&(o=c.shift()+"/");for(var s=0;s<c.length;)c[s]===".."?s>0&&c[s-1]!==".."?c.splice(--s,2):a?c.splice(s,1):++s:c[s]==="."?c.splice(s,1):++s;return o+c.join("/")};e.resolve=function(m,c,a){return a||(c=u(c)),r(c)?c:(a||(m=u(m)),(m=m.replace(/(?:\/|^)[^/]+$/,"")).length?u(m+"/"+c):c)}}(path$1)),path$1}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=o;var t=requireObject();((o.prototype=Object.create(t.prototype)).constructor=o).className="Namespace";var e=requireField(),r=requireUtil$3(),u=requireOneof(),d,m,c;o.fromJSON=function(v,E){return new o(v,E.options).addJSON(E.nested)};function a(h,v){if(h&&h.length){for(var E={},y=0;y<h.length;++y)E[h[y].name]=h[y].toJSON(v);return E}}o.arrayToJSON=a,o.isReservedId=function(v,E){if(v){for(var y=0;y<v.length;++y)if(typeof v[y]!="string"&&v[y][0]<=E&&v[y][1]>E)return!0}return!1},o.isReservedName=function(v,E){if(v){for(var y=0;y<v.length;++y)if(v[y]===E)return!0}return!1};function o(h,v){t.call(this,h,v),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function s(h){h._nestedArray=null,h._lookupCache={};for(var v=h;v=v.parent;)v._lookupCache={};return h}return Object.defineProperty(o.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=r.toArray(this.nested))}}),o.prototype.toJSON=function(v){return r.toObject(["options",this.options,"nested",a(this.nestedArray,v)])},o.prototype.addJSON=function(v){var E=this;if(v)for(var y=Object.keys(v),A=0,w;A<y.length;++A)w=v[y[A]],E.add((w.fields!==void 0?d.fromJSON:w.values!==void 0?c.fromJSON:w.methods!==void 0?m.fromJSON:w.id!==void 0?e.fromJSON:o.fromJSON)(y[A],w));return this},o.prototype.get=function(v){return this.nested&&this.nested[v]||null},o.prototype.getEnum=function(v){if(this.nested&&this.nested[v]instanceof c)return this.nested[v].values;throw Error("no such enum: "+v)},o.prototype.add=function(v){if(!(v instanceof e&&v.extend!==void 0||v instanceof d||v instanceof u||v instanceof c||v instanceof m||v instanceof o))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var E=this.get(v.name);if(E)if(E instanceof o&&v instanceof o&&!(E instanceof d||E instanceof m)){for(var y=E.nestedArray,A=0;A<y.length;++A)v.add(y[A]);this.remove(E),this.nested||(this.nested={}),v.setOptions(E.options,!0)}else throw Error("duplicate name '"+v.name+"' in "+this)}this.nested[v.name]=v,this instanceof d||this instanceof m||this instanceof c||this instanceof e||v._edition||(v._edition=v._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var w=this;w=w.parent;)w._needsRecursiveFeatureResolution=!0,w._needsRecursiveResolve=!0;return v.onAdd(this),s(this)},o.prototype.remove=function(v){if(!(v instanceof t))throw TypeError("object must be a ReflectionObject");if(v.parent!==this)throw Error(v+" is not a member of "+this);return delete this.nested[v.name],Object.keys(this.nested).length||(this.nested=void 0),v.onRemove(this),s(this)},o.prototype.define=function(v,E){if(r.isString(v))v=v.split(".");else if(!Array.isArray(v))throw TypeError("illegal path");if(v&&v.length&&v[0]==="")throw Error("path must be relative");for(var y=this;v.length>0;){var A=v.shift();if(y.nested&&y.nested[A]){if(y=y.nested[A],!(y instanceof o))throw Error("path conflicts with non-namespace objects")}else y.add(y=new o(A))}return E&&y.addJSON(E),y},o.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var v=this.nestedArray,E=0;for(this.resolve();E<v.length;)v[E]instanceof o?v[E++].resolveAll():v[E++].resolve();return this._needsRecursiveResolve=!1,this},o.prototype._resolveFeaturesRecursive=function(v){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,v=this._edition||v,t.prototype._resolveFeaturesRecursive.call(this,v),this.nestedArray.forEach(E=>{E._resolveFeaturesRecursive(v)}),this):this},o.prototype.lookup=function(v,E,y){if(typeof E=="boolean"?(y=E,E=void 0):E&&!Array.isArray(E)&&(E=[E]),r.isString(v)&&v.length){if(v===".")return this.root;v=v.split(".")}else if(!v.length)return this;var A=v.join(".");if(v[0]==="")return this.root.lookup(v.slice(1),E);var w=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+A];if(w&&(!E||E.indexOf(w.constructor)>-1)||(w=this._lookupImpl(v,A),w&&(!E||E.indexOf(w.constructor)>-1)))return w;if(y)return null;for(var I=this;I.parent;){if(w=I.parent._lookupImpl(v,A),w&&(!E||E.indexOf(w.constructor)>-1))return w;I=I.parent}return null},o.prototype._lookupImpl=function(v,E){if(Object.prototype.hasOwnProperty.call(this._lookupCache,E))return this._lookupCache[E];var y=this.get(v[0]),A=null;if(y)v.length===1?A=y:y instanceof o&&(v=v.slice(1),A=y._lookupImpl(v,v.join(".")));else for(var w=0;w<this.nestedArray.length;++w)this._nestedArray[w]instanceof o&&(y=this._nestedArray[w]._lookupImpl(v,E))&&(A=y);return this._lookupCache[E]=A,A},o.prototype.lookupType=function(v){var E=this.lookup(v,[d]);if(!E)throw Error("no such type: "+v);return E},o.prototype.lookupEnum=function(v){var E=this.lookup(v,[c]);if(!E)throw Error("no such Enum '"+v+"' in "+this);return E},o.prototype.lookupTypeOrEnum=function(v){var E=this.lookup(v,[d,c]);if(!E)throw Error("no such Type or Enum '"+v+"' in "+this);return E},o.prototype.lookupService=function(v){var E=this.lookup(v,[m]);if(!E)throw Error("no such Service '"+v+"' in "+this);return E},o._configure=function(h,v,E){d=h,m=v,c=E},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=u;var t=requireField();((u.prototype=Object.create(t.prototype)).constructor=u).className="MapField";var e=requireTypes$2(),r=requireUtil$3();function u(d,m,c,a,o,s){if(t.call(this,d,m,a,void 0,void 0,o,s),!r.isString(c))throw TypeError("keyType must be a string");this.keyType=c,this.resolvedKeyType=null,this.map=!0}return u.fromJSON=function(m,c){return new u(m,c.id,c.keyType,c.type,c.options,c.comment)},u.prototype.toJSON=function(m){var c=m?!!m.keepComments:!1;return r.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",c?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(e.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return t.prototype.resolve.call(this)},u.d=function(m,c,a){return typeof a=="function"?a=r.decorateType(a).name:a&&typeof a=="object"&&(a=r.decorateEnum(a).name),function(s,h){r.decorateType(s.constructor).add(new u(h,m,c,a))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=r;var t=requireObject();((r.prototype=Object.create(t.prototype)).constructor=r).className="Method";var e=requireUtil$3();function r(u,d,m,c,a,o,s,h,v){if(e.isObject(a)?(s=a,a=o=void 0):e.isObject(o)&&(s=o,o=void 0),!(d===void 0||e.isString(d)))throw TypeError("type must be a string");if(!e.isString(m))throw TypeError("requestType must be a string");if(!e.isString(c))throw TypeError("responseType must be a string");t.call(this,u,s),this.type=d||"rpc",this.requestType=m,this.requestStream=a?!0:void 0,this.responseType=c,this.responseStream=o?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=h,this.parsedOptions=v}return r.fromJSON=function(d,m){return new r(d,m.type,m.requestType,m.responseType,m.requestStream,m.responseStream,m.options,m.comment,m.parsedOptions)},r.prototype.toJSON=function(d){var m=d?!!d.keepComments:!1;return e.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",m?this.comment:void 0,"parsedOptions",this.parsedOptions])},r.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),t.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=d;var t=requireNamespace();((d.prototype=Object.create(t.prototype)).constructor=d).className="Service";var e=requireMethod(),r=requireUtil$3(),u=requireRpc();function d(c,a){t.call(this,c,a),this.methods={},this._methodsArray=null}d.fromJSON=function(a,o){var s=new d(a,o.options);if(o.methods)for(var h=Object.keys(o.methods),v=0;v<h.length;++v)s.add(e.fromJSON(h[v],o.methods[h[v]]));return o.nested&&s.addJSON(o.nested),o.edition&&(s._edition=o.edition),s.comment=o.comment,s._defaultEdition="proto3",s},d.prototype.toJSON=function(a){var o=t.prototype.toJSON.call(this,a),s=a?!!a.keepComments:!1;return r.toObject(["edition",this._editionToJSON(),"options",o&&o.options||void 0,"methods",t.arrayToJSON(this.methodsArray,a)||{},"nested",o&&o.nested||void 0,"comment",s?this.comment:void 0])},Object.defineProperty(d.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=r.toArray(this.methods))}});function m(c){return c._methodsArray=null,c}return d.prototype.get=function(a){return this.methods[a]||t.prototype.get.call(this,a)},d.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;t.prototype.resolve.call(this);for(var a=this.methodsArray,o=0;o<a.length;++o)a[o].resolve();return this},d.prototype._resolveFeaturesRecursive=function(a){return this._needsRecursiveFeatureResolution?(a=this._edition||a,t.prototype._resolveFeaturesRecursive.call(this,a),this.methodsArray.forEach(o=>{o._resolveFeaturesRecursive(a)}),this):this},d.prototype.add=function(a){if(this.get(a.name))throw Error("duplicate name '"+a.name+"' in "+this);return a instanceof e?(this.methods[a.name]=a,a.parent=this,m(this)):t.prototype.add.call(this,a)},d.prototype.remove=function(a){if(a instanceof e){if(this.methods[a.name]!==a)throw Error(a+" is not a member of "+this);return delete this.methods[a.name],a.parent=null,m(this)}return t.prototype.remove.call(this,a)},d.prototype.create=function(a,o,s){for(var h=new u.Service(a,o,s),v=0,E;v<this.methodsArray.length;++v){var y=r.lcFirst((E=this._methodsArray[v]).resolve().name).replace(/[^$\w_]/g,"");h[y]=r.codegen(["r","c"],r.isReserved(y)?y+"_":y)("return this.rpcCall(m,q,s,r,c)")({m:E,q:E.resolvedRequestType.ctor,s:E.resolvedResponseType.ctor})}return h},service}var message,hasRequiredMessage;function requireMessage(){if(hasRequiredMessage)return message;hasRequiredMessage=1,message=e;var t=requireMinimal$1();function e(r){if(r)for(var u=Object.keys(r),d=0;d<u.length;++d)this[u[d]]=r[u[d]]}return e.create=function(u){return this.$type.create(u)},e.encode=function(u,d){return this.$type.encode(u,d)},e.encodeDelimited=function(u,d){return this.$type.encodeDelimited(u,d)},e.decode=function(u){return this.$type.decode(u)},e.decodeDelimited=function(u){return this.$type.decodeDelimited(u)},e.verify=function(u){return this.$type.verify(u)},e.fromObject=function(u){return this.$type.fromObject(u)},e.toObject=function(u,d){return this.$type.toObject(u,d)},e.prototype.toJSON=function(){return this.$type.toObject(this,t.toJSONOptions)},message}var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=d;var t=require_enum$1(),e=requireTypes$2(),r=requireUtil$3();function u(m){return"missing required '"+m.name+"'"}function d(m){for(var c=r.codegen(["r","l","e"],m.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(m.fieldsArray.filter(function(E){return E.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),a=0;a<m.fieldsArray.length;++a){var o=m._fieldsArray[a].resolve(),s=o.resolvedType instanceof t?"int32":o.type,h="m"+r.safeProp(o.name);c("case %i: {",o.id),o.map?(c("if(%s===util.emptyObject)",h)("%s={}",h)("var c2 = r.uint32()+r.pos"),e.defaults[o.keyType]!==void 0?c("k=%j",e.defaults[o.keyType]):c("k=null"),e.defaults[s]!==void 0?c("value=%j",e.defaults[s]):c("value=null"),c("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),e.basic[s]===void 0?c("value=types[%i].decode(r,r.uint32())",a):c("value=r.%s()",s),c("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),e.long[o.keyType]!==void 0?c('%s[typeof k==="object"?util.longToHash(k):k]=value',h):c("%s[k]=value",h)):o.repeated?(c("if(!(%s&&%s.length))",h,h)("%s=[]",h),e.packed[s]!==void 0&&c("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",h,s)("}else"),e.basic[s]===void 0?c(o.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",h,a):c("%s.push(r.%s())",h,s)):e.basic[s]===void 0?c(o.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",h,a):c("%s=r.%s()",h,s),c("break")("}")}for(c("default:")("r.skipType(t&7)")("break")("}")("}"),a=0;a<m._fieldsArray.length;++a){var v=m._fieldsArray[a];v.required&&c("if(!m.hasOwnProperty(%j))",v.name)("throw util.ProtocolError(%j,{instance:m})",u(v))}return c("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=m;var t=require_enum$1(),e=requireUtil$3();function r(c,a){return c.name+": "+a+(c.repeated&&a!=="array"?"[]":c.map&&a!=="object"?"{k:"+c.keyType+"}":"")+" expected"}function u(c,a,o,s){if(a.resolvedType)if(a.resolvedType instanceof t){c("switch(%s){",s)("default:")("return%j",r(a,"enum value"));for(var h=Object.keys(a.resolvedType.values),v=0;v<h.length;++v)c("case %i:",a.resolvedType.values[h[v]]);c("break")("}")}else c("{")("var e=types[%i].verify(%s);",o,s)("if(e)")("return%j+e",a.name+".")("}");else switch(a.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":c("if(!util.isInteger(%s))",s)("return%j",r(a,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":c("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",r(a,"integer|Long"));break;case"float":case"double":c('if(typeof %s!=="number")',s)("return%j",r(a,"number"));break;case"bool":c('if(typeof %s!=="boolean")',s)("return%j",r(a,"boolean"));break;case"string":c("if(!util.isString(%s))",s)("return%j",r(a,"string"));break;case"bytes":c('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",r(a,"buffer"));break}return c}function d(c,a,o){switch(a.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":c("if(!util.key32Re.test(%s))",o)("return%j",r(a,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":c("if(!util.key64Re.test(%s))",o)("return%j",r(a,"integer|Long key"));break;case"bool":c("if(!util.key2Re.test(%s))",o)("return%j",r(a,"boolean key"));break}return c}function m(c){var a=e.codegen(["m"],c.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),o=c.oneofsArray,s={};o.length&&a("var p={}");for(var h=0;h<c.fieldsArray.length;++h){var v=c._fieldsArray[h].resolve(),E="m"+e.safeProp(v.name);if(v.optional&&a("if(%s!=null&&m.hasOwnProperty(%j)){",E,v.name),v.map)a("if(!util.isObject(%s))",E)("return%j",r(v,"object"))("var k=Object.keys(%s)",E)("for(var i=0;i<k.length;++i){"),d(a,v,"k[i]"),u(a,v,h,E+"[k[i]]")("}");else if(v.repeated)a("if(!Array.isArray(%s))",E)("return%j",r(v,"array"))("for(var i=0;i<%s.length;++i){",E),u(a,v,h,E+"[i]")("}");else{if(v.partOf){var y=e.safeProp(v.partOf.name);s[v.partOf.name]===1&&a("if(p%s===1)",y)("return%j",v.partOf.name+": multiple values"),s[v.partOf.name]=1,a("p%s=1",y)}u(a,v,h,E)}v.optional&&a("}")}return a("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(t){var e=t,r=require_enum$1(),u=requireUtil$3();function d(c,a,o,s){var h=!1;if(a.resolvedType)if(a.resolvedType instanceof r){c("switch(d%s){",s);for(var v=a.resolvedType.values,E=Object.keys(v),y=0;y<E.length;++y)v[E[y]]===a.typeDefault&&!h&&(c("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',s,s,s),a.repeated||c("break"),h=!0),c("case%j:",E[y])("case %i:",v[E[y]])("m%s=%j",s,v[E[y]])("break");c("}")}else c('if(typeof d%s!=="object")',s)("throw TypeError(%j)",a.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",s,o,s);else{var A=!1;switch(a.type){case"double":case"float":c("m%s=Number(d%s)",s,s);break;case"uint32":case"fixed32":c("m%s=d%s>>>0",s,s);break;case"int32":case"sint32":case"sfixed32":c("m%s=d%s|0",s,s);break;case"uint64":A=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":c("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",s,s,A)('else if(typeof d%s==="string")',s)("m%s=parseInt(d%s,10)",s,s)('else if(typeof d%s==="number")',s)("m%s=d%s",s,s)('else if(typeof d%s==="object")',s)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",s,s,s,A?"true":"");break;case"bytes":c('if(typeof d%s==="string")',s)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",s,s,s)("else if(d%s.length >= 0)",s)("m%s=d%s",s,s);break;case"string":c("m%s=String(d%s)",s,s);break;case"bool":c("m%s=Boolean(d%s)",s,s);break}}return c}e.fromObject=function(a){var o=a.fieldsArray,s=u.codegen(["d"],a.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!o.length)return s("return new this.ctor");s("var m=new this.ctor");for(var h=0;h<o.length;++h){var v=o[h].resolve(),E=u.safeProp(v.name);v.map?(s("if(d%s){",E)('if(typeof d%s!=="object")',E)("throw TypeError(%j)",v.fullName+": object expected")("m%s={}",E)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",E),d(s,v,h,E+"[ks[i]]")("}")("}")):v.repeated?(s("if(d%s){",E)("if(!Array.isArray(d%s))",E)("throw TypeError(%j)",v.fullName+": array expected")("m%s=[]",E)("for(var i=0;i<d%s.length;++i){",E),d(s,v,h,E+"[i]")("}")("}")):(v.resolvedType instanceof r||s("if(d%s!=null){",E),d(s,v,h,E),v.resolvedType instanceof r||s("}"))}return s("return m")};function m(c,a,o,s){if(a.resolvedType)a.resolvedType instanceof r?c("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",s,o,s,s,o,s,s):c("d%s=types[%i].toObject(m%s,o)",s,o,s);else{var h=!1;switch(a.type){case"double":case"float":c("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",s,s,s,s);break;case"uint64":h=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":c('if(typeof m%s==="number")',s)("d%s=o.longs===String?String(m%s):m%s",s,s,s)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",s,s,s,s,h?"true":"",s);break;case"bytes":c("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",s,s,s,s,s);break;default:c("d%s=m%s",s,s);break}}return c}e.toObject=function(a){var o=a.fieldsArray.slice().sort(u.compareFieldsById);if(!o.length)return u.codegen()("return {}");for(var s=u.codegen(["m","o"],a.name+"$toObject")("if(!o)")("o={}")("var d={}"),h=[],v=[],E=[],y=0;y<o.length;++y)o[y].partOf||(o[y].resolve().repeated?h:o[y].map?v:E).push(o[y]);if(h.length){for(s("if(o.arrays||o.defaults){"),y=0;y<h.length;++y)s("d%s=[]",u.safeProp(h[y].name));s("}")}if(v.length){for(s("if(o.objects||o.defaults){"),y=0;y<v.length;++y)s("d%s={}",u.safeProp(v[y].name));s("}")}if(E.length){for(s("if(o.defaults){"),y=0;y<E.length;++y){var A=E[y],w=u.safeProp(A.name);if(A.resolvedType instanceof r)s("d%s=o.enums===String?%j:%j",w,A.resolvedType.valuesById[A.typeDefault],A.typeDefault);else if(A.long)s("if(util.Long){")("var n=new util.Long(%i,%i,%j)",A.typeDefault.low,A.typeDefault.high,A.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",w)("}else")("d%s=o.longs===String?%j:%i",w,A.typeDefault.toString(),A.typeDefault.toNumber());else if(A.bytes){var I="["+Array.prototype.slice.call(A.typeDefault).join(",")+"]";s("if(o.bytes===String)d%s=%j",w,String.fromCharCode.apply(String,A.typeDefault))("else{")("d%s=%s",w,I)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",w,w)("}")}else s("d%s=%j",w,A.typeDefault)}s("}")}var _=!1;for(y=0;y<o.length;++y){var A=o[y],S=a._fieldsArray.indexOf(A),w=u.safeProp(A.name);A.map?(_||(_=!0,s("var ks2")),s("if(m%s&&(ks2=Object.keys(m%s)).length){",w,w)("d%s={}",w)("for(var j=0;j<ks2.length;++j){"),m(s,A,S,w+"[ks2[j]]")("}")):A.repeated?(s("if(m%s&&m%s.length){",w,w)("d%s=[]",w)("for(var j=0;j<m%s.length;++j){",w),m(s,A,S,w+"[j]")("}")):(s("if(m%s!=null&&m.hasOwnProperty(%j)){",w,A.name),m(s,A,S,w),A.partOf&&s("if(o.oneofs)")("d%s=%j",u.safeProp(A.partOf.name),A.name)),s("}")}return s("return d")}}(converter)),converter}var wrappers$1={},hasRequiredWrappers$1;function requireWrappers$1(){return hasRequiredWrappers$1||(hasRequiredWrappers$1=1,function(t){var e=t,r=requireMessage();e[".google.protobuf.Any"]={fromObject:function(u){if(u&&u["@type"]){var d=u["@type"].substring(u["@type"].lastIndexOf("/")+1),m=this.lookup(d);if(m){var c=u["@type"].charAt(0)==="."?u["@type"].slice(1):u["@type"];return c.indexOf("/")===-1&&(c="/"+c),this.create({type_url:c,value:m.encode(m.fromObject(u)).finish()})}}return this.fromObject(u)},toObject:function(u,d){var m="type.googleapis.com/",c="",a="";if(d&&d.json&&u.type_url&&u.value){a=u.type_url.substring(u.type_url.lastIndexOf("/")+1),c=u.type_url.substring(0,u.type_url.lastIndexOf("/")+1);var o=this.lookup(a);o&&(u=o.decode(u.value))}if(!(u instanceof this.ctor)&&u instanceof r){var s=u.$type.toObject(u,d),h=u.$type.fullName[0]==="."?u.$type.fullName.slice(1):u.$type.fullName;return c===""&&(c=m),a=c+h,s["@type"]=a,s}return this.toObject(u,d)}}}(wrappers$1)),wrappers$1}var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=w;var t=requireNamespace();((w.prototype=Object.create(t.prototype)).constructor=w).className="Type";var e=require_enum$1(),r=requireOneof(),u=requireField(),d=requireMapfield(),m=requireService(),c=requireMessage(),a=requireReader(),o=requireWriter(),s=requireUtil$3(),h=requireEncoder(),v=requireDecoder(),E=requireVerifier(),y=requireConverter(),A=requireWrappers$1();function w(_,S){t.call(this,_,S),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(w.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var _=Object.keys(this.fields),S=0;S<_.length;++S){var j=this.fields[_[S]],K=j.id;if(this._fieldsById[K])throw Error("duplicate id "+K+" in "+this);this._fieldsById[K]=j}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=s.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=s.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=w.generateConstructor(this)())},set:function(_){var S=_.prototype;S instanceof c||((_.prototype=new c).constructor=_,s.merge(_.prototype,S)),_.$type=_.prototype.$type=this,s.merge(_,c,!0),this._ctor=_;for(var j=0;j<this.fieldsArray.length;++j)this._fieldsArray[j].resolve();var K={};for(j=0;j<this.oneofsArray.length;++j)K[this._oneofsArray[j].resolve().name]={get:s.oneOfGetter(this._oneofsArray[j].oneof),set:s.oneOfSetter(this._oneofsArray[j].oneof)};j&&Object.defineProperties(_.prototype,K)}}}),w.generateConstructor=function(S){for(var j=s.codegen(["p"],S.name),K=0,J;K<S.fieldsArray.length;++K)(J=S._fieldsArray[K]).map?j("this%s={}",s.safeProp(J.name)):J.repeated&&j("this%s=[]",s.safeProp(J.name));return j("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function I(_){return _._fieldsById=_._fieldsArray=_._oneofsArray=null,delete _.encode,delete _.decode,delete _.verify,_}return w.fromJSON=function(S,j){var K=new w(S,j.options);K.extensions=j.extensions,K.reserved=j.reserved;for(var J=Object.keys(j.fields),H=0;H<J.length;++H)K.add((typeof j.fields[J[H]].keyType<"u"?d.fromJSON:u.fromJSON)(J[H],j.fields[J[H]]));if(j.oneofs)for(J=Object.keys(j.oneofs),H=0;H<J.length;++H)K.add(r.fromJSON(J[H],j.oneofs[J[H]]));if(j.nested)for(J=Object.keys(j.nested),H=0;H<J.length;++H){var U=j.nested[J[H]];K.add((U.id!==void 0?u.fromJSON:U.fields!==void 0?w.fromJSON:U.values!==void 0?e.fromJSON:U.methods!==void 0?m.fromJSON:t.fromJSON)(J[H],U))}return j.extensions&&j.extensions.length&&(K.extensions=j.extensions),j.reserved&&j.reserved.length&&(K.reserved=j.reserved),j.group&&(K.group=!0),j.comment&&(K.comment=j.comment),j.edition&&(K._edition=j.edition),K._defaultEdition="proto3",K},w.prototype.toJSON=function(S){var j=t.prototype.toJSON.call(this,S),K=S?!!S.keepComments:!1;return s.toObject(["edition",this._editionToJSON(),"options",j&&j.options||void 0,"oneofs",t.arrayToJSON(this.oneofsArray,S),"fields",t.arrayToJSON(this.fieldsArray.filter(function(J){return!J.declaringField}),S)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",j&&j.nested||void 0,"comment",K?this.comment:void 0])},w.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;t.prototype.resolveAll.call(this);var S=this.oneofsArray;for(K=0;K<S.length;)S[K++].resolve();for(var j=this.fieldsArray,K=0;K<j.length;)j[K++].resolve();return this},w.prototype._resolveFeaturesRecursive=function(S){return this._needsRecursiveFeatureResolution?(S=this._edition||S,t.prototype._resolveFeaturesRecursive.call(this,S),this.oneofsArray.forEach(j=>{j._resolveFeatures(S)}),this.fieldsArray.forEach(j=>{j._resolveFeatures(S)}),this):this},w.prototype.get=function(S){return this.fields[S]||this.oneofs&&this.oneofs[S]||this.nested&&this.nested[S]||null},w.prototype.add=function(S){if(this.get(S.name))throw Error("duplicate name '"+S.name+"' in "+this);if(S instanceof u&&S.extend===void 0){if(this._fieldsById?this._fieldsById[S.id]:this.fieldsById[S.id])throw Error("duplicate id "+S.id+" in "+this);if(this.isReservedId(S.id))throw Error("id "+S.id+" is reserved in "+this);if(this.isReservedName(S.name))throw Error("name '"+S.name+"' is reserved in "+this);return S.parent&&S.parent.remove(S),this.fields[S.name]=S,S.message=this,S.onAdd(this),I(this)}return S instanceof r?(this.oneofs||(this.oneofs={}),this.oneofs[S.name]=S,S.onAdd(this),I(this)):t.prototype.add.call(this,S)},w.prototype.remove=function(S){if(S instanceof u&&S.extend===void 0){if(!this.fields||this.fields[S.name]!==S)throw Error(S+" is not a member of "+this);return delete this.fields[S.name],S.parent=null,S.onRemove(this),I(this)}if(S instanceof r){if(!this.oneofs||this.oneofs[S.name]!==S)throw Error(S+" is not a member of "+this);return delete this.oneofs[S.name],S.parent=null,S.onRemove(this),I(this)}return t.prototype.remove.call(this,S)},w.prototype.isReservedId=function(S){return t.isReservedId(this.reserved,S)},w.prototype.isReservedName=function(S){return t.isReservedName(this.reserved,S)},w.prototype.create=function(S){return new this.ctor(S)},w.prototype.setup=function(){for(var S=this.fullName,j=[],K=0;K<this.fieldsArray.length;++K)j.push(this._fieldsArray[K].resolve().resolvedType);this.encode=h(this)({Writer:o,types:j,util:s}),this.decode=v(this)({Reader:a,types:j,util:s}),this.verify=E(this)({types:j,util:s}),this.fromObject=y.fromObject(this)({types:j,util:s}),this.toObject=y.toObject(this)({types:j,util:s});var J=A[S];if(J){var H=Object.create(this);H.fromObject=this.fromObject,this.fromObject=J.fromObject.bind(H),H.toObject=this.toObject,this.toObject=J.toObject.bind(H)}return this},w.prototype.encode=function(S,j){return this.setup().encode(S,j)},w.prototype.encodeDelimited=function(S,j){return this.encode(S,j&&j.len?j.fork():j).ldelim()},w.prototype.decode=function(S,j){return this.setup().decode(S,j)},w.prototype.decodeDelimited=function(S){return S instanceof a||(S=a.create(S)),this.decode(S,S.uint32())},w.prototype.verify=function(S){return this.setup().verify(S)},w.prototype.fromObject=function(S){return this.setup().fromObject(S)},w.prototype.toObject=function(S,j){return this.setup().toObject(S,j)},w.d=function(S){return function(K){s.decorateType(K,S)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=o;var t=requireNamespace();((o.prototype=Object.create(t.prototype)).constructor=o).className="Root";var e=requireField(),r=require_enum$1(),u=requireOneof(),d=requireUtil$3(),m,c,a;function o(E){t.call(this,"",E),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}o.fromJSON=function(y,A){return A||(A=new o),y.options&&A.setOptions(y.options),A.addJSON(y.nested).resolveAll()},o.prototype.resolvePath=d.path.resolve,o.prototype.fetch=d.fetch;function s(){}o.prototype.load=function E(y,A,w){typeof A=="function"&&(w=A,A=void 0);var I=this;if(!w)return d.asPromise(E,I,y,A);var _=w===s;function S(Z,ie){if(w){if(_)throw Z;ie&&ie.resolveAll();var ue=w;w=null,ue(Z,ie)}}function j(Z){var ie=Z.lastIndexOf("google/protobuf/");if(ie>-1){var ue=Z.substring(ie);if(ue in a)return ue}return null}function K(Z,ie){try{if(d.isString(ie)&&ie.charAt(0)==="{"&&(ie=JSON.parse(ie)),!d.isString(ie))I.setOptions(ie.options).addJSON(ie.nested);else{c.filename=Z;var ue=c(ie,I,A),le,ne=0;if(ue.imports)for(;ne<ue.imports.length;++ne)(le=j(ue.imports[ne])||I.resolvePath(Z,ue.imports[ne]))&&J(le);if(ue.weakImports)for(ne=0;ne<ue.weakImports.length;++ne)(le=j(ue.weakImports[ne])||I.resolvePath(Z,ue.weakImports[ne]))&&J(le,!0)}}catch(ye){S(ye)}!_&&!H&&S(null,I)}function J(Z,ie){if(Z=j(Z)||Z,!(I.files.indexOf(Z)>-1)){if(I.files.push(Z),Z in a){_?K(Z,a[Z]):(++H,setTimeout(function(){--H,K(Z,a[Z])}));return}if(_){var ue;try{ue=d.fs.readFileSync(Z).toString("utf8")}catch(le){ie||S(le);return}K(Z,ue)}else++H,I.fetch(Z,function(le,ne){if(--H,!!w){if(le){ie?H||S(null,I):S(le);return}K(Z,ne)}})}}var H=0;d.isString(y)&&(y=[y]);for(var U=0,P;U<y.length;++U)(P=I.resolvePath("",y[U]))&&J(P);return _?(I.resolveAll(),I):(H||S(null,I),I)},o.prototype.loadSync=function(y,A){if(!d.isNode)throw Error("not supported");return this.load(y,A,s)},o.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(y){return"'extend "+y.extend+"' in "+y.parent.fullName}).join(", "));return t.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function v(E,y){var A=y.parent.lookup(y.extend);if(A){var w=new e(y.fullName,y.id,y.type,y.rule,void 0,y.options);return A.get(w.name)||(w.declaringField=y,y.extensionField=w,A.add(w)),!0}return!1}return o.prototype._handleAdd=function(y){if(y instanceof e)y.extend!==void 0&&!y.extensionField&&(v(this,y)||this.deferred.push(y));else if(y instanceof r)h.test(y.name)&&(y.parent[y.name]=y.values);else if(!(y instanceof u)){if(y instanceof m)for(var A=0;A<this.deferred.length;)v(this,this.deferred[A])?this.deferred.splice(A,1):++A;for(var w=0;w<y.nestedArray.length;++w)this._handleAdd(y._nestedArray[w]);h.test(y.name)&&(y.parent[y.name]=y)}(y instanceof m||y instanceof r||y instanceof e)&&(this._fullyQualifiedObjects[y.fullName]=y)},o.prototype._handleRemove=function(y){if(y instanceof e){if(y.extend!==void 0)if(y.extensionField)y.extensionField.parent.remove(y.extensionField),y.extensionField=null;else{var A=this.deferred.indexOf(y);A>-1&&this.deferred.splice(A,1)}}else if(y instanceof r)h.test(y.name)&&delete y.parent[y.name];else if(y instanceof t){for(var w=0;w<y.nestedArray.length;++w)this._handleRemove(y._nestedArray[w]);h.test(y.name)&&delete y.parent[y.name]}delete this._fullyQualifiedObjects[y.fullName]},o._configure=function(E,y,A){m=E,c=y,a=A},root}var hasRequiredUtil$3;function requireUtil$3(){if(hasRequiredUtil$3)return util$2.exports;hasRequiredUtil$3=1;var t=util$2.exports=requireMinimal$1(),e=requireRoots(),r,u;t.codegen=requireCodegen(),t.fetch=requireFetch(),t.path=requirePath$1(),t.fs=t.inquire("fs"),t.toArray=function(s){if(s){for(var h=Object.keys(s),v=new Array(h.length),E=0;E<h.length;)v[E]=s[h[E++]];return v}return[]},t.toObject=function(s){for(var h={},v=0;v<s.length;){var E=s[v++],y=s[v++];y!==void 0&&(h[E]=y)}return h};var d=/\\/g,m=/"/g;t.isReserved=function(s){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(s)},t.safeProp=function(s){return!/^[$\w_]+$/.test(s)||t.isReserved(s)?'["'+s.replace(d,"\\\\").replace(m,'\\"')+'"]':"."+s},t.ucFirst=function(s){return s.charAt(0).toUpperCase()+s.substring(1)};var c=/_([a-z])/g;t.camelCase=function(s){return s.substring(0,1)+s.substring(1).replace(c,function(h,v){return v.toUpperCase()})},t.compareFieldsById=function(s,h){return s.id-h.id},t.decorateType=function(s,h){if(s.$type)return h&&s.$type.name!==h&&(t.decorateRoot.remove(s.$type),s.$type.name=h,t.decorateRoot.add(s.$type)),s.$type;r||(r=requireType());var v=new r(h||s.name);return t.decorateRoot.add(v),v.ctor=s,Object.defineProperty(s,"$type",{value:v,enumerable:!1}),Object.defineProperty(s.prototype,"$type",{value:v,enumerable:!1}),v};var a=0;return t.decorateEnum=function(s){if(s.$type)return s.$type;u||(u=require_enum$1());var h=new u("Enum"+a++,s);return t.decorateRoot.add(h),Object.defineProperty(s,"$type",{value:h,enumerable:!1}),h},t.setProperty=function(s,h,v,E){function y(A,w,I){var _=w.shift();if(_==="__proto__"||_==="prototype")return A;if(w.length>0)A[_]=y(A[_]||{},w,I);else{var S=A[_];if(S&&E)return A;S&&(I=[].concat(S).concat(I)),A[_]=I}return A}if(typeof s!="object")throw TypeError("dst must be an object");if(!h)throw TypeError("path must be specified");return h=h.split("."),y(s,h,v)},Object.defineProperty(t,"decorateRoot",{get:function(){return e.decorated||(e.decorated=new(requireRoot()))}}),util$2.exports}var hasRequiredTypes$2;function requireTypes$2(){return hasRequiredTypes$2||(hasRequiredTypes$2=1,function(t){var e=t,r=requireUtil$3(),u=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function d(m,c){var a=0,o={};for(c|=0;a<m.length;)o[u[a+c]]=m[a++];return o}e.basic=d([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),e.defaults=d([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),e.long=d([0,0,0,1,1],7),e.mapKey=d([0,0,0,5,5,0,0,0,1,1,0,2],2),e.packed=d([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types$2)),types$2}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=c;var t=requireObject();((c.prototype=Object.create(t.prototype)).constructor=c).className="Field";var e=require_enum$1(),r=requireTypes$2(),u=requireUtil$3(),d,m=/^required|optional|repeated$/;c.fromJSON=function(o,s){var h=new c(o,s.id,s.type,s.rule,s.extend,s.options,s.comment);return s.edition&&(h._edition=s.edition),h._defaultEdition="proto3",h};function c(a,o,s,h,v,E,y){if(u.isObject(h)?(y=v,E=h,h=v=void 0):u.isObject(v)&&(y=E,E=v,v=void 0),t.call(this,a,E),!u.isInteger(o)||o<0)throw TypeError("id must be a non-negative integer");if(!u.isString(s))throw TypeError("type must be a string");if(h!==void 0&&!m.test(h=h.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(v!==void 0&&!u.isString(v))throw TypeError("extend must be a string");h==="proto3_optional"&&(h="optional"),this.rule=h&&h!=="optional"?h:void 0,this.type=s,this.id=o,this.extend=v||void 0,this.repeated=h==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=u.Long?r.long[s]!==void 0:!1,this.bytes=s==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=y}return Object.defineProperty(c.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}}),Object.defineProperty(c.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(c.prototype,"delimited",{get:function(){return this.resolvedType instanceof d&&this._features.message_encoding==="DELIMITED"}}),Object.defineProperty(c.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}}),Object.defineProperty(c.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}}),c.prototype.setOption=function(o,s,h){return t.prototype.setOption.call(this,o,s,h)},c.prototype.toJSON=function(o){var s=o?!!o.keepComments:!1;return u.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",s?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=r.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof d?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof e&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof e)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=u.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var o;u.base64.test(this.typeDefault)?u.base64.decode(this.typeDefault,o=u.newBuffer(u.base64.length(this.typeDefault)),0):u.utf8.write(this.typeDefault,o=u.newBuffer(u.utf8.length(this.typeDefault)),0),this.typeDefault=o}return this.map?this.defaultValue=u.emptyObject:this.repeated?this.defaultValue=u.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof d&&(this.parent.ctor.prototype[this.name]=this.defaultValue),t.prototype.resolve.call(this)},c.prototype._inferLegacyProtoFeatures=function(o){if(o!=="proto2"&&o!=="proto3")return{};var s={};if(this.rule==="required"&&(s.field_presence="LEGACY_REQUIRED"),this.parent&&r.defaults[this.type]===void 0){var h=this.parent.get(this.type.split(".").pop());h&&h instanceof d&&h.group&&(s.message_encoding="DELIMITED")}return this.getOption("packed")===!0?s.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(s.repeated_field_encoding="EXPANDED"),s},c.prototype._resolveFeatures=function(o){return t.prototype._resolveFeatures.call(this,this._edition||o)},c.d=function(o,s,h,v){return typeof s=="function"?s=u.decorateType(s).name:s&&typeof s=="object"&&(s=u.decorateEnum(s).name),function(y,A){u.decorateType(y.constructor).add(new c(A,o,s,h,{default:v}))}},c._configure=function(o){d=o},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=u;var t=requireObject();((u.prototype=Object.create(t.prototype)).constructor=u).className="OneOf";var e=requireField(),r=requireUtil$3();function u(m,c,a,o){if(Array.isArray(c)||(a=c,c=void 0),t.call(this,m,a),!(c===void 0||Array.isArray(c)))throw TypeError("fieldNames must be an Array");this.oneof=c||[],this.fieldsArray=[],this.comment=o}u.fromJSON=function(c,a){return new u(c,a.oneof,a.options,a.comment)},u.prototype.toJSON=function(c){var a=c?!!c.keepComments:!1;return r.toObject(["options",this.options,"oneof",this.oneof,"comment",a?this.comment:void 0])};function d(m){if(m.parent)for(var c=0;c<m.fieldsArray.length;++c)m.fieldsArray[c].parent||m.parent.add(m.fieldsArray[c])}return u.prototype.add=function(c){if(!(c instanceof e))throw TypeError("field must be a Field");return c.parent&&c.parent!==this.parent&&c.parent.remove(c),this.oneof.push(c.name),this.fieldsArray.push(c),c.partOf=this,d(this),this},u.prototype.remove=function(c){if(!(c instanceof e))throw TypeError("field must be a Field");var a=this.fieldsArray.indexOf(c);if(a<0)throw Error(c+" is not a member of "+this);return this.fieldsArray.splice(a,1),a=this.oneof.indexOf(c.name),a>-1&&this.oneof.splice(a,1),c.partOf=null,this},u.prototype.onAdd=function(c){t.prototype.onAdd.call(this,c);for(var a=this,o=0;o<this.oneof.length;++o){var s=c.get(this.oneof[o]);s&&!s.partOf&&(s.partOf=a,a.fieldsArray.push(s))}d(this)},u.prototype.onRemove=function(c){for(var a=0,o;a<this.fieldsArray.length;++a)(o=this.fieldsArray[a]).parent&&o.parent.remove(o);t.prototype.onRemove.call(this,c)},Object.defineProperty(u.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var m=this.fieldsArray[0];return m.options!=null&&m.options.proto3_optional===!0}}),u.d=function(){for(var c=new Array(arguments.length),a=0;a<arguments.length;)c[a]=arguments[a++];return function(s,h){r.decorateType(s.constructor).add(new u(h,c)),Object.defineProperty(s,h,{get:r.oneOfGetter(c),set:r.oneOfSetter(c)})}},oneof}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=c,c.className="ReflectionObject";const t=requireOneof();var e=requireUtil$3(),r,u={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},d={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},m={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function c(a,o){if(!e.isString(a))throw TypeError("name must be a string");if(o&&!e.isObject(o))throw TypeError("options must be an object");this.options=o,this.parsedOptions=null,this.name=a,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(c.prototype,{root:{get:function(){for(var a=this;a.parent!==null;)a=a.parent;return a}},fullName:{get:function(){for(var a=[this.name],o=this.parent;o;)a.unshift(o.name),o=o.parent;return a.join(".")}}}),c.prototype.toJSON=function(){throw Error()},c.prototype.onAdd=function(o){this.parent&&this.parent!==o&&this.parent.remove(this),this.parent=o,this.resolved=!1;var s=o.root;s instanceof r&&s._handleAdd(this)},c.prototype.onRemove=function(o){var s=o.root;s instanceof r&&s._handleRemove(this),this.parent=null,this.resolved=!1},c.prototype.resolve=function(){return this.resolved?this:(this.root instanceof r&&(this.resolved=!0),this)},c.prototype._resolveFeaturesRecursive=function(o){return this._resolveFeatures(this._edition||o)},c.prototype._resolveFeatures=function(o){if(!this._featuresResolved){var s={};if(!o)throw new Error("Unknown edition for "+this.fullName);var h=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(o));if(this._edition){if(o==="proto2")s=Object.assign({},d);else if(o==="proto3")s=Object.assign({},m);else if(o==="2023")s=Object.assign({},u);else throw new Error("Unknown edition: "+o);this._features=Object.assign(s,h||{}),this._featuresResolved=!0;return}if(this.partOf instanceof t){var v=Object.assign({},this.partOf._features);this._features=Object.assign(v,h||{})}else if(!this.declaringField)if(this.parent){var E=Object.assign({},this.parent._features);this._features=Object.assign(E,h||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},c.prototype._inferLegacyProtoFeatures=function(){return{}},c.prototype.getOption=function(o){if(this.options)return this.options[o]},c.prototype.setOption=function(o,s,h){return this.options||(this.options={}),/^features\./.test(o)?e.setProperty(this.options,o,s,h):(!h||this.options[o]===void 0)&&(this.getOption(o)!==s&&(this.resolved=!1),this.options[o]=s),this},c.prototype.setParsedOption=function(o,s,h){this.parsedOptions||(this.parsedOptions=[]);var v=this.parsedOptions;if(h){var E=v.find(function(w){return Object.prototype.hasOwnProperty.call(w,o)});if(E){var y=E[o];e.setProperty(y,h,s)}else E={},E[o]=e.setProperty({},h,s),v.push(E)}else{var A={};A[o]=s,v.push(A)}return this},c.prototype.setOptions=function(o,s){if(o)for(var h=Object.keys(o),v=0;v<h.length;++v)this.setOption(h[v],o[h[v]],s);return this},c.prototype.toString=function(){var o=this.constructor.className,s=this.fullName;return s.length?o+" "+s:o},c.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition},c._configure=function(a){r=a},object}var _enum$1,hasRequired_enum$1;function require_enum$1(){if(hasRequired_enum$1)return _enum$1;hasRequired_enum$1=1,_enum$1=u;var t=requireObject();((u.prototype=Object.create(t.prototype)).constructor=u).className="Enum";var e=requireNamespace(),r=requireUtil$3();function u(d,m,c,a,o,s){if(t.call(this,d,c),m&&typeof m!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=a,this.comments=o||{},this.valuesOptions=s,this._valuesFeatures={},this.reserved=void 0,m)for(var h=Object.keys(m),v=0;v<h.length;++v)typeof m[h[v]]=="number"&&(this.valuesById[this.values[h[v]]=m[h[v]]]=h[v])}return u.prototype._resolveFeatures=function(m){return m=this._edition||m,t.prototype._resolveFeatures.call(this,m),Object.keys(this.values).forEach(c=>{var a=Object.assign({},this._features);this._valuesFeatures[c]=Object.assign(a,this.valuesOptions&&this.valuesOptions[c]&&this.valuesOptions[c].features)}),this},u.fromJSON=function(m,c){var a=new u(m,c.values,c.options,c.comment,c.comments);return a.reserved=c.reserved,c.edition&&(a._edition=c.edition),a._defaultEdition="proto3",a},u.prototype.toJSON=function(m){var c=m?!!m.keepComments:!1;return r.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",c?this.comment:void 0,"comments",c?this.comments:void 0])},u.prototype.add=function(m,c,a,o){if(!r.isString(m))throw TypeError("name must be a string");if(!r.isInteger(c))throw TypeError("id must be an integer");if(this.values[m]!==void 0)throw Error("duplicate name '"+m+"' in "+this);if(this.isReservedId(c))throw Error("id "+c+" is reserved in "+this);if(this.isReservedName(m))throw Error("name '"+m+"' is reserved in "+this);if(this.valuesById[c]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+c+" in "+this);this.values[m]=c}else this.valuesById[this.values[m]=c]=m;return o&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[m]=o||null),this.comments[m]=a||null,this},u.prototype.remove=function(m){if(!r.isString(m))throw TypeError("name must be a string");var c=this.values[m];if(c==null)throw Error("name '"+m+"' does not exist in "+this);return delete this.valuesById[c],delete this.values[m],delete this.comments[m],this.valuesOptions&&delete this.valuesOptions[m],this},u.prototype.isReservedId=function(m){return e.isReservedId(this.reserved,m)},u.prototype.isReservedName=function(m){return e.isReservedName(this.reserved,m)},_enum$1}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=d;var t=require_enum$1(),e=requireTypes$2(),r=requireUtil$3();function u(m,c,a,o){return c.delimited?m("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",a,o,(c.id<<3|3)>>>0,(c.id<<3|4)>>>0):m("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",a,o,(c.id<<3|2)>>>0)}function d(m){for(var c=r.codegen(["m","w"],m.name+"$encode")("if(!w)")("w=Writer.create()"),a,o,s=m.fieldsArray.slice().sort(r.compareFieldsById),a=0;a<s.length;++a){var h=s[a].resolve(),v=m._fieldsArray.indexOf(h),E=h.resolvedType instanceof t?"int32":h.type,y=e.basic[E];o="m"+r.safeProp(h.name),h.map?(c("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",o,h.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",o)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(h.id<<3|2)>>>0,8|e.mapKey[h.keyType],h.keyType),y===void 0?c("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",v,o):c(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|y,E,o),c("}")("}")):h.repeated?(c("if(%s!=null&&%s.length){",o,o),h.packed&&e.packed[E]!==void 0?c("w.uint32(%i).fork()",(h.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",o)("w.%s(%s[i])",E,o)("w.ldelim()"):(c("for(var i=0;i<%s.length;++i)",o),y===void 0?u(c,h,v,o+"[i]"):c("w.uint32(%i).%s(%s[i])",(h.id<<3|y)>>>0,E,o)),c("}")):(h.optional&&c("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",o,h.name),y===void 0?u(c,h,v,o):c("w.uint32(%i).%s(%s)",(h.id<<3|y)>>>0,E,o))}return c("return w")}return encoder_1}var hasRequiredIndexLight;function requireIndexLight(){if(hasRequiredIndexLight)return indexLight.exports;hasRequiredIndexLight=1;var t=indexLight.exports=requireIndexMinimal();t.build="light";function e(u,d,m){return typeof d=="function"?(m=d,d=new t.Root):d||(d=new t.Root),d.load(u,m)}t.load=e;function r(u,d){return d||(d=new t.Root),d.loadSync(u)}return t.loadSync=r,t.encoder=requireEncoder(),t.decoder=requireDecoder(),t.verifier=requireVerifier(),t.converter=requireConverter(),t.ReflectionObject=requireObject(),t.Namespace=requireNamespace(),t.Root=requireRoot(),t.Enum=require_enum$1(),t.Type=requireType(),t.Field=requireField(),t.OneOf=requireOneof(),t.MapField=requireMapfield(),t.Service=requireService(),t.Method=requireMethod(),t.Message=requireMessage(),t.wrappers=requireWrappers$1(),t.types=requireTypes$2(),t.util=requireUtil$3(),t.ReflectionObject._configure(t.Root),t.Namespace._configure(t.Type,t.Service,t.Enum),t.Root._configure(t.Type),t.Field._configure(t.Type),indexLight.exports}var tokenize_1,hasRequiredTokenize;function requireTokenize(){if(hasRequiredTokenize)return tokenize_1;hasRequiredTokenize=1,tokenize_1=h;var t=/[\s{}=;:[\],'"()<>]/g,e=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,r=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,u=/^ *[*/]+ */,d=/^\s*\*?\/*/,m=/\n/g,c=/\s/,a=/\\(.?)/g,o={0:"\0",r:"\r",n:`
`,t:"	"};function s(v){return v.replace(a,function(E,y){switch(y){case"\\":case"":return y;default:return o[y]||""}})}h.unescape=s;function h(v,E){v=v.toString();var y=0,A=v.length,w=1,I=0,_={},S=[],j=null;function K(fe){return Error("illegal "+fe+" (line "+w+")")}function J(){var fe=j==="'"?r:e;fe.lastIndex=y-1;var Te=fe.exec(v);if(!Te)throw K("string");return y=fe.lastIndex,ue(j),j=null,s(Te[1])}function H(fe){return v.charAt(fe)}function U(fe,Te,Ae){var Se={type:v.charAt(fe++),lineEmpty:!1,leading:Ae},be;E?be=2:be=3;var we=fe-be,Ce;do if(--we<0||(Ce=v.charAt(we))===`
`){Se.lineEmpty=!0;break}while(Ce===" "||Ce==="	");for(var je=v.substring(fe,Te).split(m),Fe=0;Fe<je.length;++Fe)je[Fe]=je[Fe].replace(E?d:u,"").trim();Se.text=je.join(`
`).trim(),_[w]=Se,I=w}function P(fe){var Te=Z(fe),Ae=v.substring(fe,Te),Se=/^\s*\/\//.test(Ae);return Se}function Z(fe){for(var Te=fe;Te<A&&H(Te)!==`
`;)Te++;return Te}function ie(){if(S.length>0)return S.shift();if(j)return J();var fe,Te,Ae,Se,be,we=y===0;do{if(y===A)return null;for(fe=!1;c.test(Ae=H(y));)if(Ae===`
`&&(we=!0,++w),++y===A)return null;if(H(y)==="/"){if(++y===A)throw K("comment");if(H(y)==="/")if(E){if(Se=y,be=!1,P(y-1)){be=!0;do if(y=Z(y),y===A||(y++,!we))break;while(P(y))}else y=Math.min(A,Z(y)+1);be&&(U(Se,y,we),we=!0),w++,fe=!0}else{for(be=H(Se=y+1)==="/";H(++y)!==`
`;)if(y===A)return null;++y,be&&(U(Se,y-1,we),we=!0),++w,fe=!0}else if((Ae=H(y))==="*"){Se=y+1,be=E||H(Se)==="*";do{if(Ae===`
`&&++w,++y===A)throw K("comment");Te=Ae,Ae=H(y)}while(Te!=="*"||Ae!=="/");++y,be&&(U(Se,y-2,we),we=!0),fe=!0}else return"/"}}while(fe);var Ce=y;t.lastIndex=0;var je=t.test(H(Ce++));if(!je)for(;Ce<A&&!t.test(H(Ce));)++Ce;var Fe=v.substring(y,y=Ce);return(Fe==='"'||Fe==="'")&&(j=Fe),Fe}function ue(fe){S.push(fe)}function le(){if(!S.length){var fe=ie();if(fe===null)return null;ue(fe)}return S[0]}function ne(fe,Te){var Ae=le(),Se=Ae===fe;if(Se)return ie(),!0;if(!Te)throw K("token '"+Ae+"', '"+fe+"' expected");return!1}function ye(fe){var Te=null,Ae;return fe===void 0?(Ae=_[w-1],delete _[w-1],Ae&&(E||Ae.type==="*"||Ae.lineEmpty)&&(Te=Ae.leading?Ae.text:null)):(I<fe&&le(),Ae=_[fe],delete _[fe],Ae&&!Ae.lineEmpty&&(E||Ae.type==="/")&&(Te=Ae.leading?null:Ae.text)),Te}return Object.defineProperty({next:ie,peek:le,push:ue,skip:ne,cmnt:ye},"line",{get:function(){return w}})}return tokenize_1}var parse_1,hasRequiredParse$1;function requireParse$1(){if(hasRequiredParse$1)return parse_1;hasRequiredParse$1=1,parse_1=J,J.filename=null,J.defaults={keepCase:!1};var t=requireTokenize(),e=requireRoot(),r=requireType(),u=requireField(),d=requireMapfield(),m=requireOneof(),c=require_enum$1(),a=requireService(),o=requireMethod(),s=requireObject(),h=requireTypes$2(),v=requireUtil$3(),E=/^[1-9][0-9]*$/,y=/^-?[1-9][0-9]*$/,A=/^0[x][0-9a-fA-F]+$/,w=/^-?0[x][0-9a-fA-F]+$/,I=/^0[0-7]+$/,_=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,j=/^[a-zA-Z_][a-zA-Z_0-9]*$/,K=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function J(H,U,P){U instanceof e||(P=U,U=new e),P||(P=J.defaults);var Z=P.preferTrailingComment||!1,ie=t(H,P.alternateCommentMode||!1),ue=ie.next,le=ie.push,ne=ie.peek,ye=ie.skip,fe=ie.cmnt,Te=!0,Ae,Se,be,we="proto2",Ce=U,je=[],Fe={},Ve=P.keepCase?function($t){return $t}:v.camelCase;function Ge(){je.forEach($t=>{$t._edition=we,Object.keys(Fe).forEach(qt=>{$t.getOption(qt)===void 0&&$t.setOption(qt,Fe[qt],!0)})})}function Le($t,qt,Kt){var nr=J.filename;return Kt||(J.filename=null),Error("illegal "+(qt||"token")+" '"+$t+"' ("+(nr?nr+", ":"")+"line "+ie.line+")")}function Be(){var $t=[],qt;do{if((qt=ue())!=='"'&&qt!=="'")throw Le(qt);$t.push(ue()),ye(qt),qt=ne()}while(qt==='"'||qt==="'");return $t.join("")}function $e($t){var qt=ue();switch(qt){case"'":case'"':return le(qt),Be();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return p(qt,!0)}catch{if(K.test(qt))return qt;throw Le(qt,"value")}}function he($t,qt){var Kt,nr;do if(qt&&((Kt=ne())==='"'||Kt==="'")){var dr=Be();if($t.push(dr),we>=2023)throw Le(dr,"id")}else try{$t.push([nr=V(ue()),ye("to",!0)?V(ue()):nr])}catch(Mr){if(qt&&K.test(Kt)&&we>=2023)$t.push(Kt);else throw Mr}while(ye(",",!0));var Er={options:void 0};Er.setOption=function(Mr,jr){this.options===void 0&&(this.options={}),this.options[Mr]=jr},g(Er,function(jr){if(jr==="option")nt(Er,jr),ye(";");else throw Le(jr)},function(){_r(Er)})}function p($t,qt){var Kt=1;switch($t.charAt(0)==="-"&&(Kt=-1,$t=$t.substring(1)),$t){case"inf":case"INF":case"Inf":return Kt*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(E.test($t))return Kt*parseInt($t,10);if(A.test($t))return Kt*parseInt($t,16);if(I.test($t))return Kt*parseInt($t,8);if(S.test($t))return Kt*parseFloat($t);throw Le($t,"number",qt)}function V($t,qt){switch($t){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!qt&&$t.charAt(0)==="-")throw Le($t,"id");if(y.test($t))return parseInt($t,10);if(w.test($t))return parseInt($t,16);if(_.test($t))return parseInt($t,8);throw Le($t,"id")}function R(){if(Ae!==void 0)throw Le("package");if(Ae=ue(),!K.test(Ae))throw Le(Ae,"name");Ce=Ce.define(Ae),ye(";")}function ce(){var $t=ne(),qt;switch($t){case"weak":qt=be||(be=[]),ue();break;case"public":ue();default:qt=Se||(Se=[]);break}$t=Be(),ye(";"),qt.push($t)}function Re(){if(ye("="),we=Be(),we<2023)throw Le(we,"syntax");ye(";")}function ke(){if(ye("="),we=Be(),!["2023"].includes(we))throw Le(we,"edition");ye(";")}function qe($t,qt){switch(qt){case"option":return nt($t,qt),ye(";"),!0;case"message":return ee($t,qt),!0;case"enum":return _e($t,qt),!0;case"service":return Rr($t,qt),!0;case"extend":return Vr($t,qt),!0}return!1}function g($t,qt,Kt){var nr=ie.line;if($t&&(typeof $t.comment!="string"&&($t.comment=fe()),$t.filename=J.filename),ye("{",!0)){for(var dr;(dr=ue())!=="}";)qt(dr);ye(";",!0)}else Kt&&Kt(),ye(";"),$t&&(typeof $t.comment!="string"||Z)&&($t.comment=fe(nr)||$t.comment)}function ee($t,qt){if(!j.test(qt=ue()))throw Le(qt,"type name");var Kt=new r(qt);g(Kt,function(dr){if(!qe(Kt,dr))switch(dr){case"map":X(Kt);break;case"required":if(we!=="proto2")throw Le(dr);case"repeated":ae(Kt,dr);break;case"optional":if(we==="proto3")ae(Kt,"proto3_optional");else{if(we!=="proto2")throw Le(dr);ae(Kt,"optional")}break;case"oneof":oe(Kt,dr);break;case"extensions":he(Kt.extensions||(Kt.extensions=[]));break;case"reserved":he(Kt.reserved||(Kt.reserved=[]),!0);break;default:if(we==="proto2"||!K.test(dr))throw Le(dr);le(dr),ae(Kt,"optional");break}}),$t.add(Kt),$t===Ce&&je.push(Kt)}function ae($t,qt,Kt){var nr=ue();if(nr==="group"){l($t,qt);return}for(;nr.endsWith(".")||ne().startsWith(".");)nr+=ue();if(!K.test(nr))throw Le(nr,"type");var dr=ue();if(!j.test(dr))throw Le(dr,"name");dr=Ve(dr),ye("=");var Er=new u(dr,V(ue()),nr,qt,Kt);if(g(Er,function(xr){if(xr==="option")nt(Er,xr),ye(";");else throw Le(xr)},function(){_r(Er)}),qt==="proto3_optional"){var Mr=new m("_"+dr);Er.setOption("proto3_optional",!0),Mr.add(Er),$t.add(Mr)}else $t.add(Er);$t===Ce&&je.push(Er)}function l($t,qt){if(we>=2023)throw Le("group");var Kt=ue();if(!j.test(Kt))throw Le(Kt,"name");var nr=v.lcFirst(Kt);Kt===nr&&(Kt=v.ucFirst(Kt)),ye("=");var dr=V(ue()),Er=new r(Kt);Er.group=!0;var Mr=new u(nr,dr,Kt,qt);Mr.filename=J.filename,g(Er,function(xr){switch(xr){case"option":nt(Er,xr),ye(";");break;case"required":case"repeated":ae(Er,xr);break;case"optional":we==="proto3"?ae(Er,"proto3_optional"):ae(Er,"optional");break;case"message":ee(Er,xr);break;case"enum":_e(Er,xr);break;case"reserved":he(Er.reserved||(Er.reserved=[]),!0);break;default:throw Le(xr)}}),$t.add(Er).add(Mr)}function X($t){ye("<");var qt=ue();if(h.mapKey[qt]===void 0)throw Le(qt,"type");ye(",");var Kt=ue();if(!K.test(Kt))throw Le(Kt,"type");ye(">");var nr=ue();if(!j.test(nr))throw Le(nr,"name");ye("=");var dr=new d(Ve(nr),V(ue()),qt,Kt);g(dr,function(Mr){if(Mr==="option")nt(dr,Mr),ye(";");else throw Le(Mr)},function(){_r(dr)}),$t.add(dr)}function oe($t,qt){if(!j.test(qt=ue()))throw Le(qt,"name");var Kt=new m(Ve(qt));g(Kt,function(dr){dr==="option"?(nt(Kt,dr),ye(";")):(le(dr),ae(Kt,"optional"))}),$t.add(Kt)}function _e($t,qt){if(!j.test(qt=ue()))throw Le(qt,"name");var Kt=new c(qt);g(Kt,function(dr){switch(dr){case"option":nt(Kt,dr),ye(";");break;case"reserved":he(Kt.reserved||(Kt.reserved=[]),!0),Kt.reserved===void 0&&(Kt.reserved=[]);break;default:He(Kt,dr)}}),$t.add(Kt),$t===Ce&&je.push(Kt)}function He($t,qt){if(!j.test(qt))throw Le(qt,"name");ye("=");var Kt=V(ue(),!0),nr={options:void 0};nr.getOption=function(dr){return this.options[dr]},nr.setOption=function(dr,Er){s.prototype.setOption.call(nr,dr,Er)},nr.setParsedOption=function(){},g(nr,function(Er){if(Er==="option")nt(nr,Er),ye(";");else throw Le(Er)},function(){_r(nr)}),$t.add(qt,Kt,nr.comment,nr.parsedOptions||nr.options)}function nt($t,qt){var Kt,nr,dr=!0;for(qt==="option"&&(qt=ue());qt!=="=";){if(qt==="("){var Er=ue();ye(")"),qt="("+Er+")"}if(dr){if(dr=!1,qt.includes(".")&&!qt.includes("(")){var Mr=qt.split(".");Kt=Mr[0]+".",qt=Mr[1];continue}Kt=qt}else nr=nr?nr+=qt:qt;qt=ue()}var jr=nr?Kt.concat(nr):Kt,xr=It($t,jr);nr=nr&&nr[0]==="."?nr.slice(1):nr,Kt=Kt&&Kt[Kt.length-1]==="."?Kt.slice(0,-1):Kt,ir($t,Kt,xr,nr)}function It($t,qt){if(ye("{",!0)){for(var Kt={};!ye("}",!0);){if(!j.test(Tr=ue()))throw Le(Tr,"name");if(Tr===null)throw Le(Tr,"end of input");var nr,dr=Tr;if(ye(":",!0),ne()==="{")nr=It($t,qt+"."+Tr);else if(ne()==="["){nr=[];var Er;if(ye("[",!0)){do Er=$e(),nr.push(Er);while(ye(",",!0));ye("]"),typeof Er<"u"&&wt($t,qt+"."+Tr,Er)}}else nr=$e(),wt($t,qt+"."+Tr,nr);var Mr=Kt[dr];Mr&&(nr=[].concat(Mr).concat(nr)),Kt[dr]=nr,ye(",",!0),ye(";",!0)}return Kt}var jr=$e();return wt($t,qt,jr),jr}function wt($t,qt,Kt){if(Ce===$t&&/^features\./.test(qt)){Fe[qt]=Kt;return}$t.setOption&&$t.setOption(qt,Kt)}function ir($t,qt,Kt,nr){$t.setParsedOption&&$t.setParsedOption(qt,Kt,nr)}function _r($t){if(ye("[",!0)){do nt($t,"option");while(ye(",",!0));ye("]")}return $t}function Rr($t,qt){if(!j.test(qt=ue()))throw Le(qt,"service name");var Kt=new a(qt);g(Kt,function(dr){if(!qe(Kt,dr))if(dr==="rpc")Hr(Kt,dr);else throw Le(dr)}),$t.add(Kt),$t===Ce&&je.push(Kt)}function Hr($t,qt){var Kt=fe(),nr=qt;if(!j.test(qt=ue()))throw Le(qt,"name");var dr=qt,Er,Mr,jr,xr;if(ye("("),ye("stream",!0)&&(Mr=!0),!K.test(qt=ue())||(Er=qt,ye(")"),ye("returns"),ye("("),ye("stream",!0)&&(xr=!0),!K.test(qt=ue())))throw Le(qt);jr=qt,ye(")");var kn=new o(dr,nr,Er,jr,Mr,xr);kn.comment=Kt,g(kn,function(bn){if(bn==="option")nt(kn,bn),ye(";");else throw Le(bn)}),$t.add(kn)}function Vr($t,qt){if(!K.test(qt=ue()))throw Le(qt,"reference");var Kt=qt;g(null,function(dr){switch(dr){case"required":case"repeated":ae($t,dr,Kt);break;case"optional":we==="proto3"?ae($t,"proto3_optional",Kt):ae($t,"optional",Kt);break;default:if(we==="proto2"||!K.test(dr))throw Le(dr);le(dr),ae($t,"optional",Kt);break}})}for(var Tr;(Tr=ue())!==null;)switch(Tr){case"package":if(!Te)throw Le(Tr);R();break;case"import":if(!Te)throw Le(Tr);ce();break;case"syntax":if(!Te)throw Le(Tr);Re();break;case"edition":if(!Te)throw Le(Tr);ke();break;case"option":nt(Ce,Tr),ye(";",!0);break;default:if(qe(Ce,Tr)){Te=!1;continue}throw Le(Tr)}return Ge(),J.filename=null,{package:Ae,imports:Se,weakImports:be,root:U}}return parse_1}var common_1,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common_1;hasRequiredCommon=1,common_1=e;var t=/\/|\./;function e(u,d){t.test(u)||(u="google/protobuf/"+u+".proto",d={nested:{google:{nested:{protobuf:{nested:d}}}}}),e[u]=d}e("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var r;return e("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),e("timestamp",{Timestamp:r}),e("empty",{Empty:{fields:{}}}),e("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),e("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),e("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),e.get=function(d){return e[d]||null},common_1}var hasRequiredSrc$2;function requireSrc$2(){if(hasRequiredSrc$2)return src$1.exports;hasRequiredSrc$2=1;var t=src$1.exports=requireIndexLight();return t.build="full",t.tokenize=requireTokenize(),t.parse=requireParse$1(),t.common=requireCommon(),t.Root._configure(t.Type,t.parse,t.common),src$1.exports}var protobufjs,hasRequiredProtobufjs;function requireProtobufjs(){return hasRequiredProtobufjs||(hasRequiredProtobufjs=1,protobufjs=requireSrc$2()),protobufjs}var gax={},warnings={},featureDetection={},hasRequiredFeatureDetection;function requireFeatureDetection(){if(hasRequiredFeatureDetection)return featureDetection;hasRequiredFeatureDetection=1;var t;Object.defineProperty(featureDetection,"__esModule",{value:!0}),featureDetection.hasWindowFetch=r,featureDetection.isNodeJS=u,featureDetection.hasAbortController=d;const e={windowFetch:typeof window<"u"&&window?.fetch&&typeof window?.fetch=="function",nodeJS:typeof process<"u"&&((t=process==null?void 0:process.versions)===null||t===void 0?void 0:t.node),abortController:typeof AbortController<"u"};function r(){return e.windowFetch}function u(){return e.nodeJS}function d(){return e.abortController}return featureDetection}var hasRequiredWarnings;function requireWarnings(){if(hasRequiredWarnings)return warnings;hasRequiredWarnings=1,Object.defineProperty(warnings,"__esModule",{value:!0}),warnings.warn=r;const t=requireFeatureDetection(),e=new Set;function r(u,d,m){e.has(u)||(e.add(u),(0,t.isNodeJS)()?typeof m<"u"?process.emitWarning(d,{type:m}):process.emitWarning(d):console.warn(d))}return warnings}var util$1={},commonjsBrowser={},v1$1={},rng={},hasRequiredRng;function requireRng(){if(hasRequiredRng)return rng;hasRequiredRng=1,Object.defineProperty(rng,"__esModule",{value:!0}),rng.default=r;let t;const e=new Uint8Array(16);function r(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}return rng}var stringify={},validate={},regex={},hasRequiredRegex;function requireRegex(){if(hasRequiredRegex)return regex;hasRequiredRegex=1,Object.defineProperty(regex,"__esModule",{value:!0}),regex.default=void 0;var t=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;return regex.default=t,regex}var hasRequiredValidate$1;function requireValidate$1(){if(hasRequiredValidate$1)return validate;hasRequiredValidate$1=1,Object.defineProperty(validate,"__esModule",{value:!0}),validate.default=void 0;var t=e(requireRegex());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){return typeof d=="string"&&t.default.test(d)}var u=r;return validate.default=u,validate}var hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1,Object.defineProperty(stringify,"__esModule",{value:!0}),stringify.default=void 0,stringify.unsafeStringify=u;var t=e(requireValidate$1());function e(c){return c&&c.__esModule?c:{default:c}}const r=[];for(let c=0;c<256;++c)r.push((c+256).toString(16).slice(1));function u(c,a=0){return r[c[a+0]]+r[c[a+1]]+r[c[a+2]]+r[c[a+3]]+"-"+r[c[a+4]]+r[c[a+5]]+"-"+r[c[a+6]]+r[c[a+7]]+"-"+r[c[a+8]]+r[c[a+9]]+"-"+r[c[a+10]]+r[c[a+11]]+r[c[a+12]]+r[c[a+13]]+r[c[a+14]]+r[c[a+15]]}function d(c,a=0){const o=u(c,a);if(!(0,t.default)(o))throw TypeError("Stringified UUID is invalid");return o}var m=d;return stringify.default=m,stringify}var hasRequiredV1$1;function requireV1$1(){if(hasRequiredV1$1)return v1$1;hasRequiredV1$1=1,Object.defineProperty(v1$1,"__esModule",{value:!0}),v1$1.default=void 0;var t=r(requireRng()),e=requireStringify();function r(s){return s&&s.__esModule?s:{default:s}}let u,d,m=0,c=0;function a(s,h,v){let E=h&&v||0;const y=h||new Array(16);s=s||{};let A=s.node||u,w=s.clockseq!==void 0?s.clockseq:d;if(A==null||w==null){const J=s.random||(s.rng||t.default)();A==null&&(A=u=[J[0]|1,J[1],J[2],J[3],J[4],J[5]]),w==null&&(w=d=(J[6]<<8|J[7])&16383)}let I=s.msecs!==void 0?s.msecs:Date.now(),_=s.nsecs!==void 0?s.nsecs:c+1;const S=I-m+(_-c)/1e4;if(S<0&&s.clockseq===void 0&&(w=w+1&16383),(S<0||I>m)&&s.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=I,c=_,d=w,I+=122192928e5;const j=((I&268435455)*1e4+_)%4294967296;y[E++]=j>>>24&255,y[E++]=j>>>16&255,y[E++]=j>>>8&255,y[E++]=j&255;const K=I/4294967296*1e4&268435455;y[E++]=K>>>8&255,y[E++]=K&255,y[E++]=K>>>24&15|16,y[E++]=K>>>16&255,y[E++]=w>>>8|128,y[E++]=w&255;for(let J=0;J<6;++J)y[E+J]=A[J];return h||(0,e.unsafeStringify)(y)}var o=a;return v1$1.default=o,v1$1}var v3={},v35={},parse={},hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1,Object.defineProperty(parse,"__esModule",{value:!0}),parse.default=void 0;var t=e(requireValidate$1());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){if(!(0,t.default)(d))throw TypeError("Invalid UUID");let m;const c=new Uint8Array(16);return c[0]=(m=parseInt(d.slice(0,8),16))>>>24,c[1]=m>>>16&255,c[2]=m>>>8&255,c[3]=m&255,c[4]=(m=parseInt(d.slice(9,13),16))>>>8,c[5]=m&255,c[6]=(m=parseInt(d.slice(14,18),16))>>>8,c[7]=m&255,c[8]=(m=parseInt(d.slice(19,23),16))>>>8,c[9]=m&255,c[10]=(m=parseInt(d.slice(24,36),16))/1099511627776&255,c[11]=m/4294967296&255,c[12]=m>>>24&255,c[13]=m>>>16&255,c[14]=m>>>8&255,c[15]=m&255,c}var u=r;return parse.default=u,parse}var hasRequiredV35;function requireV35(){if(hasRequiredV35)return v35;hasRequiredV35=1,Object.defineProperty(v35,"__esModule",{value:!0}),v35.URL=v35.DNS=void 0,v35.default=c;var t=requireStringify(),e=r(requireParse());function r(a){return a&&a.__esModule?a:{default:a}}function u(a){a=unescape(encodeURIComponent(a));const o=[];for(let s=0;s<a.length;++s)o.push(a.charCodeAt(s));return o}const d="6ba7b810-9dad-11d1-80b4-00c04fd430c8";v35.DNS=d;const m="6ba7b811-9dad-11d1-80b4-00c04fd430c8";v35.URL=m;function c(a,o,s){function h(v,E,y,A){var w;if(typeof v=="string"&&(v=u(v)),typeof E=="string"&&(E=(0,e.default)(E)),((w=E)===null||w===void 0?void 0:w.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let I=new Uint8Array(16+v.length);if(I.set(E),I.set(v,E.length),I=s(I),I[6]=I[6]&15|o,I[8]=I[8]&63|128,y){A=A||0;for(let _=0;_<16;++_)y[A+_]=I[_];return y}return(0,t.unsafeStringify)(I)}try{h.name=a}catch{}return h.DNS=d,h.URL=m,h}return v35}var md5={},hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1,Object.defineProperty(md5,"__esModule",{value:!0}),md5.default=void 0;function t(y){if(typeof y=="string"){const A=unescape(encodeURIComponent(y));y=new Uint8Array(A.length);for(let w=0;w<A.length;++w)y[w]=A.charCodeAt(w)}return e(u(d(y),y.length*8))}function e(y){const A=[],w=y.length*32,I="0123456789abcdef";for(let _=0;_<w;_+=8){const S=y[_>>5]>>>_%32&255,j=parseInt(I.charAt(S>>>4&15)+I.charAt(S&15),16);A.push(j)}return A}function r(y){return(y+64>>>9<<4)+14+1}function u(y,A){y[A>>5]|=128<<A%32,y[r(A)-1]=A;let w=1732584193,I=-271733879,_=-1732584194,S=271733878;for(let j=0;j<y.length;j+=16){const K=w,J=I,H=_,U=S;w=o(w,I,_,S,y[j],7,-680876936),S=o(S,w,I,_,y[j+1],12,-389564586),_=o(_,S,w,I,y[j+2],17,606105819),I=o(I,_,S,w,y[j+3],22,-1044525330),w=o(w,I,_,S,y[j+4],7,-176418897),S=o(S,w,I,_,y[j+5],12,1200080426),_=o(_,S,w,I,y[j+6],17,-1473231341),I=o(I,_,S,w,y[j+7],22,-45705983),w=o(w,I,_,S,y[j+8],7,1770035416),S=o(S,w,I,_,y[j+9],12,-1958414417),_=o(_,S,w,I,y[j+10],17,-42063),I=o(I,_,S,w,y[j+11],22,-1990404162),w=o(w,I,_,S,y[j+12],7,1804603682),S=o(S,w,I,_,y[j+13],12,-40341101),_=o(_,S,w,I,y[j+14],17,-1502002290),I=o(I,_,S,w,y[j+15],22,1236535329),w=s(w,I,_,S,y[j+1],5,-165796510),S=s(S,w,I,_,y[j+6],9,-1069501632),_=s(_,S,w,I,y[j+11],14,643717713),I=s(I,_,S,w,y[j],20,-373897302),w=s(w,I,_,S,y[j+5],5,-701558691),S=s(S,w,I,_,y[j+10],9,38016083),_=s(_,S,w,I,y[j+15],14,-660478335),I=s(I,_,S,w,y[j+4],20,-405537848),w=s(w,I,_,S,y[j+9],5,568446438),S=s(S,w,I,_,y[j+14],9,-1019803690),_=s(_,S,w,I,y[j+3],14,-187363961),I=s(I,_,S,w,y[j+8],20,1163531501),w=s(w,I,_,S,y[j+13],5,-1444681467),S=s(S,w,I,_,y[j+2],9,-51403784),_=s(_,S,w,I,y[j+7],14,1735328473),I=s(I,_,S,w,y[j+12],20,-1926607734),w=h(w,I,_,S,y[j+5],4,-378558),S=h(S,w,I,_,y[j+8],11,-2022574463),_=h(_,S,w,I,y[j+11],16,1839030562),I=h(I,_,S,w,y[j+14],23,-35309556),w=h(w,I,_,S,y[j+1],4,-1530992060),S=h(S,w,I,_,y[j+4],11,1272893353),_=h(_,S,w,I,y[j+7],16,-155497632),I=h(I,_,S,w,y[j+10],23,-1094730640),w=h(w,I,_,S,y[j+13],4,681279174),S=h(S,w,I,_,y[j],11,-358537222),_=h(_,S,w,I,y[j+3],16,-722521979),I=h(I,_,S,w,y[j+6],23,76029189),w=h(w,I,_,S,y[j+9],4,-640364487),S=h(S,w,I,_,y[j+12],11,-421815835),_=h(_,S,w,I,y[j+15],16,530742520),I=h(I,_,S,w,y[j+2],23,-995338651),w=v(w,I,_,S,y[j],6,-198630844),S=v(S,w,I,_,y[j+7],10,1126891415),_=v(_,S,w,I,y[j+14],15,-1416354905),I=v(I,_,S,w,y[j+5],21,-57434055),w=v(w,I,_,S,y[j+12],6,1700485571),S=v(S,w,I,_,y[j+3],10,-1894986606),_=v(_,S,w,I,y[j+10],15,-1051523),I=v(I,_,S,w,y[j+1],21,-2054922799),w=v(w,I,_,S,y[j+8],6,1873313359),S=v(S,w,I,_,y[j+15],10,-30611744),_=v(_,S,w,I,y[j+6],15,-1560198380),I=v(I,_,S,w,y[j+13],21,1309151649),w=v(w,I,_,S,y[j+4],6,-145523070),S=v(S,w,I,_,y[j+11],10,-1120210379),_=v(_,S,w,I,y[j+2],15,718787259),I=v(I,_,S,w,y[j+9],21,-343485551),w=m(w,K),I=m(I,J),_=m(_,H),S=m(S,U)}return[w,I,_,S]}function d(y){if(y.length===0)return[];const A=y.length*8,w=new Uint32Array(r(A));for(let I=0;I<A;I+=8)w[I>>5]|=(y[I/8]&255)<<I%32;return w}function m(y,A){const w=(y&65535)+(A&65535);return(y>>16)+(A>>16)+(w>>16)<<16|w&65535}function c(y,A){return y<<A|y>>>32-A}function a(y,A,w,I,_,S){return m(c(m(m(A,y),m(I,S)),_),w)}function o(y,A,w,I,_,S,j){return a(A&w|~A&I,y,A,_,S,j)}function s(y,A,w,I,_,S,j){return a(A&I|w&~I,y,A,_,S,j)}function h(y,A,w,I,_,S,j){return a(A^w^I,y,A,_,S,j)}function v(y,A,w,I,_,S,j){return a(w^(A|~I),y,A,_,S,j)}var E=t;return md5.default=E,md5}var hasRequiredV3;function requireV3(){if(hasRequiredV3)return v3;hasRequiredV3=1,Object.defineProperty(v3,"__esModule",{value:!0}),v3.default=void 0;var t=r(requireV35()),e=r(requireMd5());function r(m){return m&&m.__esModule?m:{default:m}}var d=(0,t.default)("v3",48,e.default);return v3.default=d,v3}var v4={},native={},hasRequiredNative;function requireNative(){if(hasRequiredNative)return native;hasRequiredNative=1,Object.defineProperty(native,"__esModule",{value:!0}),native.default=void 0;var e={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return native.default=e,native}var hasRequiredV4;function requireV4(){if(hasRequiredV4)return v4;hasRequiredV4=1,Object.defineProperty(v4,"__esModule",{value:!0}),v4.default=void 0;var t=u(requireNative()),e=u(requireRng()),r=requireStringify();function u(c){return c&&c.__esModule?c:{default:c}}function d(c,a,o){if(t.default.randomUUID&&!a&&!c)return t.default.randomUUID();c=c||{};const s=c.random||(c.rng||e.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,a){o=o||0;for(let h=0;h<16;++h)a[o+h]=s[h];return a}return(0,r.unsafeStringify)(s)}var m=d;return v4.default=m,v4}var v5={},sha1={},hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1,Object.defineProperty(sha1,"__esModule",{value:!0}),sha1.default=void 0;function t(d,m,c,a){switch(d){case 0:return m&c^~m&a;case 1:return m^c^a;case 2:return m&c^m&a^c&a;case 3:return m^c^a}}function e(d,m){return d<<m|d>>>32-m}function r(d){const m=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof d=="string"){const h=unescape(encodeURIComponent(d));d=[];for(let v=0;v<h.length;++v)d.push(h.charCodeAt(v))}else Array.isArray(d)||(d=Array.prototype.slice.call(d));d.push(128);const a=d.length/4+2,o=Math.ceil(a/16),s=new Array(o);for(let h=0;h<o;++h){const v=new Uint32Array(16);for(let E=0;E<16;++E)v[E]=d[h*64+E*4]<<24|d[h*64+E*4+1]<<16|d[h*64+E*4+2]<<8|d[h*64+E*4+3];s[h]=v}s[o-1][14]=(d.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(d.length-1)*8&4294967295;for(let h=0;h<o;++h){const v=new Uint32Array(80);for(let _=0;_<16;++_)v[_]=s[h][_];for(let _=16;_<80;++_)v[_]=e(v[_-3]^v[_-8]^v[_-14]^v[_-16],1);let E=c[0],y=c[1],A=c[2],w=c[3],I=c[4];for(let _=0;_<80;++_){const S=Math.floor(_/20),j=e(E,5)+t(S,y,A,w)+I+m[S]+v[_]>>>0;I=w,w=A,A=e(y,30)>>>0,y=E,E=j}c[0]=c[0]+E>>>0,c[1]=c[1]+y>>>0,c[2]=c[2]+A>>>0,c[3]=c[3]+w>>>0,c[4]=c[4]+I>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,c[0]&255,c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,c[1]&255,c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,c[2]&255,c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,c[3]&255,c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,c[4]&255]}var u=r;return sha1.default=u,sha1}var hasRequiredV5;function requireV5(){if(hasRequiredV5)return v5;hasRequiredV5=1,Object.defineProperty(v5,"__esModule",{value:!0}),v5.default=void 0;var t=r(requireV35()),e=r(requireSha1());function r(m){return m&&m.__esModule?m:{default:m}}var d=(0,t.default)("v5",80,e.default);return v5.default=d,v5}var nil={},hasRequiredNil;function requireNil(){if(hasRequiredNil)return nil;hasRequiredNil=1,Object.defineProperty(nil,"__esModule",{value:!0}),nil.default=void 0;var t="00000000-0000-0000-0000-000000000000";return nil.default=t,nil}var version$5={},hasRequiredVersion;function requireVersion(){if(hasRequiredVersion)return version$5;hasRequiredVersion=1,Object.defineProperty(version$5,"__esModule",{value:!0}),version$5.default=void 0;var t=e(requireValidate$1());function e(d){return d&&d.__esModule?d:{default:d}}function r(d){if(!(0,t.default)(d))throw TypeError("Invalid UUID");return parseInt(d.slice(14,15),16)}var u=r;return version$5.default=u,version$5}var hasRequiredCommonjsBrowser;function requireCommonjsBrowser(){return hasRequiredCommonjsBrowser||(hasRequiredCommonjsBrowser=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var e=h(requireV1$1()),r=h(requireV3()),u=h(requireV4()),d=h(requireV5()),m=h(requireNil()),c=h(requireVersion()),a=h(requireValidate$1()),o=h(requireStringify()),s=h(requireParse());function h(v){return v&&v.__esModule?v:{default:v}}}(commonjsBrowser)),commonjsBrowser}var hasRequiredUtil$2;function requireUtil$2(){if(hasRequiredUtil$2)return util$1;hasRequiredUtil$2=1,Object.defineProperty(util$1,"__esModule",{value:!0}),util$1.camelToSnakeCase=u,util$1.toCamelCase=m,util$1.toLowerCamelCase=c,util$1.makeUUID=a;const t=requireCommonjsBrowser();function e(o,s=!1){return s&&(o=o.replace(/([A-Z])([A-Z]+)([A-Z])/g,h=>h[0]+h.slice(1,h.length-1).toLowerCase()+h[h.length-1])),o.split(/(?=[A-Z])|[^A-Za-z0-9.]+/).filter(h=>h.length>0).map((h,v)=>v===0?h:h.toLowerCase())}function r(o){return o.length===0?o:o[0].toLowerCase()+o.slice(1)}function u(o){const s=e(o);if(s.length===0)return o;const h=[s[0]];return h.push(...s.slice(1).map(r)),h.join("_")}function d(o){return o.length===0?o:o[0].toUpperCase()+o.slice(1)}function m(o){const s=e(o,!0);if(s.length===0)return o;const h=[s[0]];return h.push(...s.slice(1).map(v=>v.match(/^\d+$/)?"_"+v:d(v))),h.join("")}function c(o){const s=m(o);return s.length===0?s:s[0].toLowerCase()+s.slice(1)}function a(){return(0,t.v4)()}return util$1}var status={},hasRequiredStatus;function requireStatus(){return hasRequiredStatus||(hasRequiredStatus=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpCodeToRpcCodeMap=t.Status=void 0,t.rpcCodeFromHttpStatusCode=r;var e;(function(u){u[u.OK=0]="OK",u[u.CANCELLED=1]="CANCELLED",u[u.UNKNOWN=2]="UNKNOWN",u[u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",u[u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",u[u.NOT_FOUND=5]="NOT_FOUND",u[u.ALREADY_EXISTS=6]="ALREADY_EXISTS",u[u.PERMISSION_DENIED=7]="PERMISSION_DENIED",u[u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",u[u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",u[u.ABORTED=10]="ABORTED",u[u.OUT_OF_RANGE=11]="OUT_OF_RANGE",u[u.UNIMPLEMENTED=12]="UNIMPLEMENTED",u[u.INTERNAL=13]="INTERNAL",u[u.UNAVAILABLE=14]="UNAVAILABLE",u[u.DATA_LOSS=15]="DATA_LOSS",u[u.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(e||(t.Status=e={})),t.HttpCodeToRpcCodeMap=new Map([[400,e.INVALID_ARGUMENT],[401,e.UNAUTHENTICATED],[403,e.PERMISSION_DENIED],[404,e.NOT_FOUND],[409,e.ABORTED],[416,e.OUT_OF_RANGE],[429,e.RESOURCE_EXHAUSTED],[499,e.CANCELLED],[501,e.UNIMPLEMENTED],[503,e.UNAVAILABLE],[504,e.DEADLINE_EXCEEDED]]);function r(u){return t.HttpCodeToRpcCodeMap.has(u)?t.HttpCodeToRpcCodeMap.get(u):u>=200&&u<300?e.OK:u>=400&&u<500?e.FAILED_PRECONDITION:u>=500&&u<600?e.INTERNAL:e.UNKNOWN}}(status)),status}var hasRequiredGax;function requireGax(){if(hasRequiredGax)return gax;hasRequiredGax=1,Object.defineProperty(gax,"__esModule",{value:!0}),gax.CallSettings=gax.RetryOptions=void 0,gax.convertRetryOptions=m,gax.createRetryOptions=c,gax.createBackoffSettings=a,gax.createDefaultBackoffSettings=o,gax.createMaxRetriesBackoffSettings=s,gax.createBundleOptions=h,gax.constructSettings=y,gax.createByteLengthFunction=A;const t=requireWarnings(),e=requireUtil$2(),r=requireStatus();class u{constructor(I,_,S,j){this.retryCodes=I,this.backoffSettings=_,this.shouldRetryFn=S,this.getResumptionRequestFn=j}}gax.RetryOptions=u;class d{constructor(I){var _;I=I||{},this.timeout=I.timeout||30*1e3,this.retry=I.retry,this.autoPaginate="autoPaginate"in I?I.autoPaginate:!0,this.maxResults=I.maxResults,this.otherArgs=I.otherArgs||{},this.bundleOptions=I.bundleOptions,this.isBundling="isBundling"in I?I.isBundling:!0,this.longrunning="longrunning"in I?I.longrunning:void 0,this.apiName=(_=I.apiName)!==null&&_!==void 0?_:void 0,this.retryRequestOptions=I.retryRequestOptions}merge(I){if(!I)return new d(this);let _=this.timeout,S=this.retry,j=this.autoPaginate,K=this.maxResults,J=this.otherArgs,H=this.isBundling,U=this.longrunning,P=this.apiName,Z=this.retryRequestOptions;if("timeout"in I&&(_=I.timeout),S?.retryCodes&&(S.backoffSettings.initialRpcTimeoutMillis=_,S.backoffSettings.maxRpcTimeoutMillis=_,S.backoffSettings.totalTimeoutMillis=_),"retry"in I&&(S=E(S||{},I.retry)),"autoPaginate"in I&&!I.autoPaginate&&(j=!1),"maxResults"in I&&(K=I.maxResults),"otherArgs"in I){J={};for(const ie in this.otherArgs)J[ie]=this.otherArgs[ie];for(const ie in I.otherArgs)J[ie]=I.otherArgs[ie]}return"isBundling"in I&&(H=I.isBundling),"maxRetries"in I&&I.maxRetries!==void 0&&(S.backoffSettings.maxRetries=I.maxRetries,delete S.backoffSettings.totalTimeoutMillis),"longrunning"in I&&(U=I.longrunning),"apiName"in I&&(P=I.apiName),"retryRequestOptions"in I&&(Z=I.retryRequestOptions),new d({timeout:_,retry:S,bundleOptions:this.bundleOptions,longrunning:U,autoPaginate:j,maxResults:K,otherArgs:J,isBundling:H,apiName:P,retryRequestOptions:Z})}}gax.CallSettings=d;function m(w,I){var _,S,j,K;if(!w||!I)return w;if(w.retry&&w.retryRequestOptions)throw new Error("Only one of retry or retryRequestOptions may be set");if(w.retryRequestOptions){w.retryRequestOptions.objectMode!==void 0&&(0,t.warn)("retry_request_options","objectMode override is not supported. It is set to true internally by default in gax.","UnsupportedParameterWarning"),w.retryRequestOptions.noResponseRetries!==void 0&&(0,t.warn)("retry_request_options","noResponseRetries override is not supported. Please specify retry codes or a function to determine retry eligibility.","UnsupportedParameterWarning"),w.retryRequestOptions.currentRetryAttempt!==void 0&&(0,t.warn)("retry_request_options","currentRetryAttempt override is not supported. Retry attempts are tracked internally.","UnsupportedParameterWarning");let J=[r.Status.UNAVAILABLE],H;w.retryRequestOptions.shouldRetryFn&&(J=[],H=w.retryRequestOptions.shouldRetryFn),w.maxRetries=(S=(_=w?.retryRequestOptions)===null||_===void 0?void 0:_.retries)!==null&&S!==void 0?S:w.maxRetries;const U=o();let P,Z;w.retryRequestOptions.maxRetryDelay!==void 0&&(P=w.retryRequestOptions.maxRetryDelay*1e3);const ie=(K=(j=w?.retryRequestOptions)===null||j===void 0?void 0:j.retryDelayMultiplier)!==null&&K!==void 0?K:U.retryDelayMultiplier;w.retryRequestOptions.totalTimeout!==void 0?Z=w.retryRequestOptions.totalTimeout*1e3:w.maxRetries===void 0&&(Z=3e4,(0,t.warn)("retry_request_options_no_max_retries_timeout","Neither maxRetries nor totalTimeout were passed. Defaulting to totalTimeout of 30000ms.","MissingParameterWarning")),U.maxRetryDelayMillis=P??U.maxRetryDelayMillis,U.retryDelayMultiplier=ie??U.retryDelayMultiplier,U.totalTimeoutMillis=Z??U.totalTimeoutMillis;const ue=c(J,U,H);w.retry=ue,delete w.retryRequestOptions,(0,t.warn)("retry_request_options","retryRequestOptions will be deprecated in a future release. Please use retryOptions to pass retry options at call time","DeprecationWarning")}return w}function c(w,I,_,S){return{retryCodes:w,backoffSettings:I,shouldRetryFn:_,getResumptionRequestFn:S}}function a(w,I,_,S,j,K,J){return{initialRetryDelayMillis:w,retryDelayMultiplier:I,maxRetryDelayMillis:_,initialRpcTimeoutMillis:S,rpcTimeoutMultiplier:j,maxRpcTimeoutMillis:K,totalTimeoutMillis:J}}function o(){return a(100,1.3,6e4,null,null,null,null)}function s(w,I,_,S,j,K,J){return{initialRetryDelayMillis:w,retryDelayMultiplier:I,maxRetryDelayMillis:_,initialRpcTimeoutMillis:S,rpcTimeoutMultiplier:j,maxRpcTimeoutMillis:K,maxRetries:J}}function h(w){["element_count_threshold","element_count_limit","request_byte_threshold","request_byte_limit","delay_threshold_millis"].forEach(H=>{if(H in w&&typeof w[H]!="number")throw new Error(`${H} should be a number`)});const _=w.element_count_threshold||0,S=w.element_count_limit||0,j=w.request_byte_threshold||0,K=w.request_byte_limit||0,J=w.delay_threshold_millis||0;if(_===0&&j===0&&J===0)throw new Error("one threshold should be > 0");return{elementCountThreshold:_,elementCountLimit:S,requestByteThreshold:j,requestByteLimit:K,delayThreshold:J}}function v(w,I,_,S){if(!w)return null;let j=null;if(I&&"retry_codes_name"in w){const J=w.retry_codes_name;j=(I[J]||[]).map(H=>Number(S[H]))}let K=null;if(_&&"retry_params_name"in w){const J=_[w.retry_params_name];K=a(J.initial_retry_delay_millis,J.retry_delay_multiplier,J.max_retry_delay_millis,J.initial_rpc_timeout_millis,J.rpc_timeout_multiplier,J.max_rpc_timeout_millis,J.total_timeout_millis)}return c(j,K)}function E(w,I){if(!I)return null;if(!I.retryCodes&&!I.backoffSettings&&!I.shouldRetryFn&&!I.getResumptionRequestFn)return w;const _=I.retryCodes?I.retryCodes:w.retryCodes,S=I.backoffSettings?I.backoffSettings:w.backoffSettings,j=I.shouldRetryFn?I.shouldRetryFn:w.shouldRetryFn,K=I.getResumptionRequestFn?I.getResumptionRequestFn:w.getResumptionRequestFn;return c(_,S,j,K)}function y(w,I,_,S,j){j=j||{};const K={},J=(I.interfaces||{})[w];if(!J)return null;const H=(_.interfaces||{})[w]||{},U=J.methods,P=H.methods||{};for(const Z in U){const ie=U[Z],ue=(0,e.toLowerCamelCase)(Z);let le=v(ie,J.retry_codes,J.retry_params,S),ne=ie.bundling,ye=ie.timeout_millis;if(Z in P){const Te=P[Z];Te&&("bundling"in Te&&(ne=Te.bundling),"timeout_millis"in Te&&(ye=Te.timeout_millis)),le=E(le,v(Te,H.retry_codes,H.retry_params,S))}const fe=w;K[ue]=new d({timeout:ye,retry:le,bundleOptions:ne?h(ne):null,otherArgs:j,apiName:fe})}return K}function A(w){return function(_){try{return w.encode(_).finish().length}catch(S){const j=JSON.stringify(_);return(0,t.warn)("error_encoding_protobufjs_object",`Cannot encode protobuf.js object: ${j}: ${S}`),j.length}}}return gax}var routingHeader={},hasRequiredRoutingHeader;function requireRoutingHeader(){if(hasRequiredRoutingHeader)return routingHeader;hasRequiredRoutingHeader=1,Object.defineProperty(routingHeader,"__esModule",{value:!0}),routingHeader.fromParams=e;const t=require$$1$3;function e(r){return t.stringify(r)}return routingHeader}var operationsClient={},createApiCall={},apiCaller={},normalApiCaller={},call={},googleError={},src={},toproto3json={},any={},fromproto3json={},bytes={},hasRequiredBytes;function requireBytes(){if(hasRequiredBytes)return bytes;hasRequiredBytes=1,Object.defineProperty(bytes,"__esModule",{value:!0}),bytes.bytesFromProto3JSON=bytes.bytesToProto3JSON=void 0;function t(r){return Buffer.isBuffer(r)?r.toString("base64"):Buffer.from(r.buffer,0,r.byteLength).toString("base64")}bytes.bytesToProto3JSON=t;function e(r){return Buffer.from(r,"base64")}return bytes.bytesFromProto3JSON=e,bytes}var _enum={},hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0}),_enum.resolveEnumValueToNumber=_enum.resolveEnumValueToString=void 0;function t(r,u){if(typeof u=="number"){const d=r.valuesById[u];return typeof d>"u"?u:d}if(typeof u=="string")return u;throw new Error("resolveEnumValueToString: enum value must be a string or a number")}_enum.resolveEnumValueToString=t;function e(r,u){if(typeof u=="number")return u;if(typeof u=="string"){const d=r.values[u];return typeof d>"u"?u:d}throw new Error("resolveEnumValueToNumber: enum value must be a string or a number")}return _enum.resolveEnumValueToNumber=e,_enum}var value={},util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util;hasRequiredUtil$1=1,Object.defineProperty(util,"__esModule",{value:!0}),util.assert=util.wrapperTypes=util.getFullyQualifiedTypeName=void 0;function t(r){let u="";for(;r.parent;)u=`.${r.name}${u}`,r=r.parent;return u}util.getFullyQualifiedTypeName=t,util.wrapperTypes=new Set([".google.protobuf.DoubleValue",".google.protobuf.FloatValue",".google.protobuf.Int64Value",".google.protobuf.UInt64Value",".google.protobuf.Int32Value",".google.protobuf.UInt32Value",".google.protobuf.BoolValue",".google.protobuf.StringValue",".google.protobuf.BytesValue"]);function e(r,u){if(!r)throw new Error(u)}return util.assert=e,util}var hasRequiredValue;function requireValue(){if(hasRequiredValue)return value;hasRequiredValue=1,Object.defineProperty(value,"__esModule",{value:!0}),value.googleProtobufValueFromProto3JSON=value.googleProtobufListValueFromProto3JSON=value.googleProtobufStructFromProto3JSON=value.googleProtobufValueToProto3JSON=value.googleProtobufListValueToProto3JSON=value.googleProtobufStructToProto3JSON=void 0;const t=requireUtil$1();function e(a){const o={},s=a.fields;for(const[h,v]of Object.entries(s))o[h]=u(v);return o}value.googleProtobufStructToProto3JSON=e;function r(a){return(0,t.assert)(Array.isArray(a.values),"ListValue internal representation must contain array of values"),a.values.map(u)}value.googleProtobufListValueToProto3JSON=r;function u(a){return Object.prototype.hasOwnProperty.call(a,"nullValue")?null:Object.prototype.hasOwnProperty.call(a,"numberValue")&&typeof a.numberValue=="number"?Number.isFinite(a.numberValue)?a.numberValue:a.numberValue.toString():Object.prototype.hasOwnProperty.call(a,"stringValue")&&typeof a.stringValue=="string"?a.stringValue:Object.prototype.hasOwnProperty.call(a,"boolValue")&&typeof a.boolValue=="boolean"?a.boolValue:Object.prototype.hasOwnProperty.call(a,"structValue")&&typeof a.structValue=="object"?e(a.structValue):Object.prototype.hasOwnProperty.call(a,"listValue")&&typeof a=="object"&&typeof a.listValue=="object"?r(a.listValue):null}value.googleProtobufValueToProto3JSON=u;function d(a){const o={};for(const[s,h]of Object.entries(a))o[s]=c(h);return{fields:o}}value.googleProtobufStructFromProto3JSON=d;function m(a){return{values:a.map(o=>c(o))}}value.googleProtobufListValueFromProto3JSON=m;function c(a){if(a===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return{numberValue:a};if(typeof a=="string")return{stringValue:a};if(typeof a=="boolean")return{boolValue:a};if(Array.isArray(a))return{listValue:m(a)};if(typeof a=="object")return{structValue:d(a)};throw new Error(`googleProtobufValueFromProto3JSON: incorrect parameter type: ${typeof a}`)}return value.googleProtobufValueFromProto3JSON=c,value}var duration={},hasRequiredDuration;function requireDuration(){if(hasRequiredDuration)return duration;hasRequiredDuration=1,Object.defineProperty(duration,"__esModule",{value:!0}),duration.googleProtobufDurationFromProto3JSON=duration.googleProtobufDurationToProto3JSON=void 0;function t(r){let u=r.seconds.toString();if(typeof r.nanos=="number"&&r.nanos>0){const d=r.nanos.toString().padStart(9,"0").replace(/^((?:\d\d\d)+?)(?:0*)$/,"$1");u+="."+d}return u+="s",u}duration.googleProtobufDurationToProto3JSON=t;function e(r){const u=r.match(/^(\d*)(?:\.(\d*))?s$/);if(!u)throw new Error(`googleProtobufDurationFromProto3JSON: incorrect value ${r} passed as google.protobuf.Duration`);let d=0,m=0;typeof u[1]=="string"&&u[1].length>0&&(d=parseInt(u[1])),typeof u[2]=="string"&&u[2].length>0&&(m=parseInt(u[2].padEnd(9,"0")));const c={};return d!==0&&(c.seconds=d),m!==0&&(c.nanos=m),c}return duration.googleProtobufDurationFromProto3JSON=e,duration}var timestamp$1={},hasRequiredTimestamp$1;function requireTimestamp$1(){if(hasRequiredTimestamp$1)return timestamp$1;hasRequiredTimestamp$1=1,Object.defineProperty(timestamp$1,"__esModule",{value:!0}),timestamp$1.googleProtobufTimestampFromProto3JSON=timestamp$1.googleProtobufTimestampToProto3JSON=void 0;function t(r){var u;const d=r.seconds,m=new Date(d*1e3).toISOString();let c=(u=r.nanos)===null||u===void 0?void 0:u.toString().padStart(9,"0");for(;c&&c.length>3&&c.endsWith("000");)c=c.slice(0,-3);return m.replace(/(?:\.\d{0,9})/,"."+c)}timestamp$1.googleProtobufTimestampToProto3JSON=t;function e(r){if(!r.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?/))throw new Error(`googleProtobufDurationFromProto3JSON: incorrect value ${r} passed as google.protobuf.Duration`);const m=new Date(r).getTime(),c=Math.floor(m/1e3);let a=0;const o=r.split(".")[1];o&&(a=parseInt(o.slice(0,-1).padEnd(9,"0")));const s={};return c!==0&&(s.seconds=c),a!==0&&(s.nanos=a),s}return timestamp$1.googleProtobufTimestampFromProto3JSON=e,timestamp$1}var wrappers={},hasRequiredWrappers;function requireWrappers(){if(hasRequiredWrappers)return wrappers;hasRequiredWrappers=1,Object.defineProperty(wrappers,"__esModule",{value:!0}),wrappers.wrapperFromProto3JSON=wrappers.wrapperToProto3JSON=void 0;const t=requireBytes(),e=requireUtil$1();function r(d){return Object.prototype.hasOwnProperty.call(d,"value")?Buffer.isBuffer(d.value)||d.value instanceof Uint8Array?(0,t.bytesToProto3JSON)(d.value):typeof d.value=="object"?((0,e.assert)(d.value.constructor.name==="Long",`wrapperToProto3JSON: expected to see a number, a string, a boolean, or a Long, but got ${d.value}`),d.value.toString()):typeof d.value=="number"&&!Number.isFinite(d.value)?d.value.toString():d.value:null}wrappers.wrapperToProto3JSON=r;function u(d,m){if(m===null)return{value:null};if(d===".google.protobuf.BytesValue"){if(typeof m!="string")throw new Error(`numberWrapperFromProto3JSON: expected to get a string for google.protobuf.BytesValue but got ${typeof m}`);return{value:(0,t.bytesFromProto3JSON)(m)}}return{value:m}}return wrappers.wrapperFromProto3JSON=u,wrappers}var fieldmask={},hasRequiredFieldmask;function requireFieldmask(){if(hasRequiredFieldmask)return fieldmask;hasRequiredFieldmask=1,Object.defineProperty(fieldmask,"__esModule",{value:!0}),fieldmask.googleProtobufFieldMaskFromProto3JSON=fieldmask.googleProtobufFieldMaskToProto3JSON=void 0;function t(r){return r.paths.join(",")}fieldmask.googleProtobufFieldMaskToProto3JSON=t;function e(r){return{paths:r.split(",")}}return fieldmask.googleProtobufFieldMaskFromProto3JSON=e,fieldmask}var hasRequiredFromproto3json;function requireFromproto3json(){if(hasRequiredFromproto3json)return fromproto3json;hasRequiredFromproto3json=1,Object.defineProperty(fromproto3json,"__esModule",{value:!0}),fromproto3json.fromProto3JSON=fromproto3json.fromProto3JSONToInternalRepresentation=void 0;const t=requireAny(),e=requireBytes(),r=require_enum(),u=requireValue(),d=requireUtil$1(),m=requireDuration(),c=requireTimestamp$1(),a=requireWrappers(),o=requireFieldmask();function s(v,E){const y=typeof v=="string"?v:(0,d.getFullyQualifiedTypeName)(v);if(typeof v!="string"&&"values"in v)return y===".google.protobuf.NullValue"?"NULL_VALUE":(0,r.resolveEnumValueToString)(v,E);if(typeof v!="string"&&v.resolveAll(),typeof v=="string")return E;if(y===".google.protobuf.Value")return(0,u.googleProtobufValueFromProto3JSON)(E);if(d.wrapperTypes.has(y)){if(E!==null&&typeof E=="object"||Array.isArray(E))throw new Error(`fromProto3JSONToInternalRepresentation: JSON representation for ${y} expects a string, a number, or a boolean, but got ${typeof E}`);return(0,a.wrapperFromProto3JSON)(y,E)}if(E===null)return null;if(y===".google.protobuf.Any")return(0,t.googleProtobufAnyFromProto3JSON)(v.root,E);if(y===".google.protobuf.Struct"){if(typeof E!="object")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.Struct must be an object but got ${typeof E}`);if(Array.isArray(E))throw new Error("fromProto3JSONToInternalRepresentation: google.protobuf.Struct must be an object but got an array");return(0,u.googleProtobufStructFromProto3JSON)(E)}if(y===".google.protobuf.ListValue"){if(!Array.isArray(E))throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.ListValue must be an array but got ${typeof E}`);return(0,u.googleProtobufListValueFromProto3JSON)(E)}if(y===".google.protobuf.Duration"){if(typeof E!="string")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.Duration must be a string but got ${typeof E}`);return(0,m.googleProtobufDurationFromProto3JSON)(E)}if(y===".google.protobuf.Timestamp"){if(typeof E!="string")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.Timestamp must be a string but got ${typeof E}`);return(0,c.googleProtobufTimestampFromProto3JSON)(E)}if(y===".google.protobuf.FieldMask"){if(typeof E!="string")throw new Error(`fromProto3JSONToInternalRepresentation: google.protobuf.FieldMask must be a string but got ${typeof E}`);return(0,o.googleProtobufFieldMaskFromProto3JSON)(E)}const A={};for(const[w,I]of Object.entries(E)){const _=v.fields[w];if(!_)continue;const S=_.resolvedType,j=_.type;if(_.repeated)if(I===null)A[w]=[];else{if(!Array.isArray(I))throw new Error(`fromProto3JSONToInternalRepresentation: expected an array for field ${w}`);A[w]=I.map(K=>s(S||j,K))}else if(_.map){const K={};for(const[J,H]of Object.entries(I))K[J]=s(S||j,H);A[w]=K}else if(j.match(/^(?:(?:(?:u?int|fixed)(?:32|64))|float|double)$/)){if(typeof I!="number"&&typeof I!="string")throw new Error(`fromProto3JSONToInternalRepresentation: field ${w} of type ${_.type} cannot contain value ${I}`);A[w]=I}else if(j==="string"){if(typeof I!="string")throw new Error(`fromProto3JSONToInternalRepresentation: field ${w} of type ${_.type} cannot contain value ${I}`);A[w]=I}else if(j==="bool"){if(typeof I!="boolean")throw new Error(`fromProto3JSONToInternalRepresentation: field ${w} of type ${_.type} cannot contain value ${I}`);A[w]=I}else if(j==="bytes"){if(typeof I!="string")throw new Error(`fromProto3JSONToInternalRepresentation: field ${w} of type ${_.type} cannot contain value ${I}`);A[w]=(0,e.bytesFromProto3JSON)(I)}else{(0,d.assert)(S!==null,`Expected to be able to resolve type for field ${_.name}`);const K=s(S,I);A[w]=K}}return A}fromproto3json.fromProto3JSONToInternalRepresentation=s;function h(v,E){const y=s(v,E);return y===null?null:((0,d.assert)(typeof y=="object"&&!Array.isArray(y),`fromProto3JSON: expected an object, not ${E}`),v.fromObject(y))}return fromproto3json.fromProto3JSON=h,fromproto3json}var hasRequiredAny;function requireAny(){if(hasRequiredAny)return any;hasRequiredAny=1,Object.defineProperty(any,"__esModule",{value:!0}),any.googleProtobufAnyFromProto3JSON=any.googleProtobufAnyToProto3JSON=void 0;const t=requireFromproto3json(),e=requireToproto3json(),r=new Set(["google.protobuf.Any","google.protobuf.Duration","google.protobuf.FieldMask","google.protobuf.ListValue","google.protobuf.Struct","google.protobuf.Timestamp","google.protobuf.Value"]);function u(m,c){const a=m.type_url.replace(/^.*\//,"");let o;try{o=m.$type.root.lookupType(a)}catch(v){throw new Error(`googleProtobufAnyToProto3JSON: cannot find type ${a}: ${v}`)}const s=o.decode(m.value),h=(0,e.toProto3JSON)(s,c);return r.has(a)?{"@type":m.type_url,value:h}:(h["@type"]=m.type_url,h)}any.googleProtobufAnyToProto3JSON=u;function d(m,c){if(c===null||typeof c!="object"||Array.isArray(c))throw new Error("googleProtobufAnyFromProto3JSON: must be an object to decode google.protobuf.Any");const a=c["@type"];if(!a||typeof a!="string")throw new Error("googleProtobufAnyFromProto3JSON: JSON serialization of google.protobuf.Any must contain @type field");const o=a.replace(/^.*\//,"");let s;try{s=m.lookupType(o)}catch(w){throw new Error(`googleProtobufAnyFromProto3JSON: cannot find type ${o}: ${w}`)}let h=c;if(r.has(o)){if(!("value"in c))throw new Error(`googleProtobufAnyFromProto3JSON: JSON representation of google.protobuf.Any with type ${o} must contain the value field`);h=c.value}const v=(0,t.fromProto3JSON)(s,h);if(v===null)return{type_url:a,value:null};const E=s.encode(v).finish(),A=Buffer.from(E,0,E.byteLength).toString("base64");return{type_url:a,value:A}}return any.googleProtobufAnyFromProto3JSON=d,any}var hasRequiredToproto3json;function requireToproto3json(){if(hasRequiredToproto3json)return toproto3json;hasRequiredToproto3json=1,Object.defineProperty(toproto3json,"__esModule",{value:!0}),toproto3json.toProto3JSON=void 0;const t=requireAny(),e=requireBytes(),r=requireUtil$1(),u=require_enum(),d=requireValue(),m=requireDuration(),c=requireTimestamp$1(),a=requireWrappers(),o=requireFieldmask();function s(v){var E;if(typeof v=="object"){if(((E=v?.constructor)===null||E===void 0?void 0:E.name)==="Long")return v.toString();throw new Error(`toProto3JSON: don't know how to convert value ${v}`)}return v}function h(v,E){const y=v.$type;if(!y)throw new Error("Cannot serialize object to proto3 JSON since its .$type is unknown. Use Type.fromObject(obj) before calling toProto3JSON.");y.resolveAll();const A=(0,r.getFullyQualifiedTypeName)(y);if(A===".google.protobuf.Any")return(0,t.googleProtobufAnyToProto3JSON)(v,E);if(A===".google.protobuf.Value")return(0,d.googleProtobufValueToProto3JSON)(v);if(A===".google.protobuf.Struct")return(0,d.googleProtobufStructToProto3JSON)(v);if(A===".google.protobuf.ListValue")return(0,d.googleProtobufListValueToProto3JSON)(v);if(A===".google.protobuf.Duration")return(0,m.googleProtobufDurationToProto3JSON)(v);if(A===".google.protobuf.Timestamp")return(0,c.googleProtobufTimestampToProto3JSON)(v);if(A===".google.protobuf.FieldMask")return(0,o.googleProtobufFieldMaskToProto3JSON)(v);if(r.wrapperTypes.has(A))return(0,a.wrapperToProto3JSON)(v);const w={};for(const[I,_]of Object.entries(v)){const S=y.fields[I],j=S.resolvedType,K=j?(0,r.getFullyQualifiedTypeName)(j):null;if(_===null){w[I]=null;continue}if(Array.isArray(_)){if(_.length===0)continue;w[I]=_.map(j?J=>h(J,E):s);continue}if(S.map){const J={};for(const[H,U]of Object.entries(_))J[H]=j?h(U,E):s(U);w[I]=J;continue}if(K===".google.protobuf.NullValue"){w[I]=null;continue}if(j&&"values"in j&&_!==null){E?.numericEnums?w[I]=(0,u.resolveEnumValueToNumber)(j,_):w[I]=(0,u.resolveEnumValueToString)(j,_);continue}if(j){w[I]=h(_,E);continue}if(typeof _=="string"||typeof _=="number"||typeof _=="boolean"||_===null){if(typeof _=="number"&&!Number.isFinite(_)){w[I]=_.toString();continue}w[I]=_;continue}if(Buffer.isBuffer(_)||_ instanceof Uint8Array){w[I]=(0,e.bytesToProto3JSON)(_);continue}w[I]=s(_)}return w}return toproto3json.toProto3JSON=h,toproto3json}var hasRequiredSrc$1;function requireSrc$1(){return hasRequiredSrc$1||(hasRequiredSrc$1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromProto3JSON=t.toProto3JSON=void 0;var e=requireToproto3json();Object.defineProperty(t,"toProto3JSON",{enumerable:!0,get:function(){return e.toProto3JSON}});var r=requireFromproto3json();Object.defineProperty(t,"fromProto3JSON",{enumerable:!0,get:function(){return r.fromProto3JSON}})}(src)),src}const nested$6={google:{nested:{protobuf:{nested:{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},Duration:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/errdetails;errdetails",java_multiple_files:!0,java_outer_classname:"ErrorDetailsProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}},RetryInfo:{fields:{retryDelay:{type:"google.protobuf.Duration",id:1}}},DebugInfo:{fields:{stackEntries:{rule:"repeated",type:"string",id:1},detail:{type:"string",id:2}}},QuotaFailure:{fields:{violations:{rule:"repeated",type:"Violation",id:1}},nested:{Violation:{fields:{subject:{type:"string",id:1},description:{type:"string",id:2}}}}},ErrorInfo:{fields:{reason:{type:"string",id:1},domain:{type:"string",id:2},metadata:{keyType:"string",type:"string",id:3}}},PreconditionFailure:{fields:{violations:{rule:"repeated",type:"Violation",id:1}},nested:{Violation:{fields:{type:{type:"string",id:1},subject:{type:"string",id:2},description:{type:"string",id:3}}}}},BadRequest:{fields:{fieldViolations:{rule:"repeated",type:"FieldViolation",id:1}},nested:{FieldViolation:{fields:{field:{type:"string",id:1},description:{type:"string",id:2}}}}},RequestInfo:{fields:{requestId:{type:"string",id:1},servingData:{type:"string",id:2}}},ResourceInfo:{fields:{resourceType:{type:"string",id:1},resourceName:{type:"string",id:2},owner:{type:"string",id:3},description:{type:"string",id:4}}},Help:{fields:{links:{rule:"repeated",type:"Link",id:1}},nested:{Link:{fields:{description:{type:"string",id:1},url:{type:"string",id:2}}}}},LocalizedMessage:{fields:{locale:{type:"string",id:1},message:{type:"string",id:2}}}}}}}},require$$4$1={nested:nested$6};var hasRequiredGoogleError;function requireGoogleError(){if(hasRequiredGoogleError)return googleError;hasRequiredGoogleError=1,Object.defineProperty(googleError,"__esModule",{value:!0}),googleError.GoogleErrorDecoder=googleError.GoogleError=void 0;const t=requireStatus(),e=requireProtobufjs(),r=requireSrc$1(),u=requireFallback();class d extends Error{static parseGRPCStatusDetails(a){const o=new m;try{if(a.metadata&&a.metadata.get("grpc-status-details-bin")){const s=o.decodeGRPCStatusDetails(a.metadata.get("grpc-status-details-bin"));s&&s.details&&s.details.length>0&&(a.statusDetails=s.details),s&&s.errorInfo&&(a.reason=s.errorInfo.reason,a.domain=s.errorInfo.domain,a.errorInfoMetadata=s.errorInfo.metadata)}}catch{}return a}static parseHttpError(a){Array.isArray(a)&&(a=a.find(v=>"error"in v)),a.error||(a.error={},Object.keys(a).filter(v=>v!=="error").forEach(v=>{a.error[v]=a[v],delete a[v]}));const o=new m,s=o.decodeHTTPError(a.error),h=Object.assign(new d(a.error.message),s);if(a.error.code?h.code=(0,t.rpcCodeFromHttpStatusCode)(a.error.code):delete h.code,h.details)try{const v=o.decodeHttpStatusDetails(h.details);v&&v.details&&v.details.length>0&&(h.statusDetails=v.details),v&&v.errorInfo&&(h.reason=v.errorInfo.reason,h.domain=v.errorInfo.domain,h.errorInfoMetadata=v.errorInfo.metadata)}catch{}return h}}googleError.GoogleError=d;class m{constructor(){const a=require$$4$1;this.root=e.Root.fromJSON(a),this.anyType=this.root.lookupType("google.protobuf.Any"),this.statusType=this.root.lookupType("google.rpc.Status")}decodeProtobufAny(a){const o=a.type_url.match(/^type.googleapis.com\/(.*)/);if(!o)throw new Error(`Unknown type encoded in google.protobuf.any: ${a.type_url}`);const s=o[1],h=this.root.lookupType(s);if(!h)throw new Error(`Cannot lookup type ${s}`);return h.decode(a.value)}decodeRpcStatus(a){const o=new Uint8Array(a),s=this.statusType.decode(o),h=[];let v;for(const y of s.details)try{const A=this.decodeProtobufAny(y);h.push(A),y.type_url==="type.googleapis.com/google.rpc.ErrorInfo"&&(v=A)}catch{}return{code:s.code,message:s.message,statusDetails:h,reason:v?.reason,domain:v?.domain,errorInfoMetadata:v?.metadata}}callErrorFromStatus(a){return a.message=`${a.code} ${t.Status[a.code]}: ${a.message}`,Object.assign(new d(a.message),a)}decodeErrorFromBuffer(a){return this.callErrorFromStatus(this.decodeRpcStatus(a))}decodeGRPCStatusDetails(a){const o=[];let s;return a.forEach(v=>{const E=new Uint8Array(v),y=this.statusType.decode(E);for(const A of y.details)try{const w=this.decodeProtobufAny(A);o.push(w),A.type_url==="type.googleapis.com/google.rpc.ErrorInfo"&&(s=w)}catch{}}),{details:o,errorInfo:s}}decodeHTTPError(a){const o=r.fromProto3JSON(this.statusType,a);if(!o)throw new Error(`Received error message ${a}, but failed to serialize as proto3 message`);return this.statusType.toObject(o,u.defaultToObjectOptions)}decodeHttpStatusDetails(a){const o=[];let s;for(const h of a)try{const v=this.decodeProtobufAny(h);o.push(v),h.type_url==="type.googleapis.com/google.rpc.ErrorInfo"&&(s=v)}catch{}return{details:o,errorInfo:s}}}return googleError.GoogleErrorDecoder=m,googleError}var hasRequiredCall;function requireCall(){if(hasRequiredCall)return call;hasRequiredCall=1,Object.defineProperty(call,"__esModule",{value:!0}),call.OngoingCallPromise=call.OngoingCall=void 0;const t=requireStatus(),e=requireGoogleError();class r{constructor(m){this.callback=m,this.completed=!1}cancel(){if(!this.completed)if(this.completed=!0,this.cancelFunc)this.cancelFunc();else{const m=new e.GoogleError("cancelled");m.code=t.Status.CANCELLED,this.callback(m)}}call(m,c){if(this.completed)return;const a=m(c,(o,s,h,v)=>{this.completed=!0,setImmediate(this.callback,o,s,h,v)});a instanceof Promise&&a.catch(o=>{setImmediate(this.callback,new e.GoogleError(o),null,null,null)}),this.cancelFunc=()=>a.cancel()}}call.OngoingCall=r;class u extends r{constructor(){let m,c;const a=(s,h,v,E)=>{if(s)s.metadata?c(e.GoogleError.parseGRPCStatusDetails(s)):c(s);else if(h!==void 0)m([h,v||null,E||null]);else throw new e.GoogleError("Neither error nor response are defined")},o=new Promise((s,h)=>{m=s,c=h});super(a),this.promise=o,this.promise.cancel=()=>{this.cancel()}}}return call.OngoingCallPromise=u,call}var hasRequiredNormalApiCaller;function requireNormalApiCaller(){if(hasRequiredNormalApiCaller)return normalApiCaller;hasRequiredNormalApiCaller=1,Object.defineProperty(normalApiCaller,"__esModule",{value:!0}),normalApiCaller.NormalApiCaller=void 0;const t=requireCall();class e{init(u){return u?new t.OngoingCall(u):new t.OngoingCallPromise}wrap(u){return u}call(u,d,m,c){c.call(u,d)}fail(u,d){u.callback(d)}result(u){return u.promise}}return normalApiCaller.NormalApiCaller=e,normalApiCaller}var hasRequiredApiCaller;function requireApiCaller(){if(hasRequiredApiCaller)return apiCaller;hasRequiredApiCaller=1,Object.defineProperty(apiCaller,"__esModule",{value:!0}),apiCaller.createAPICaller=e;const t=requireNormalApiCaller();function e(r,u){return u?u.getApiCaller(r):new t.NormalApiCaller}return apiCaller}var retries={},timeout={},hasRequiredTimeout;function requireTimeout(){if(hasRequiredTimeout)return timeout;hasRequiredTimeout=1,Object.defineProperty(timeout,"__esModule",{value:!0}),timeout.addTimeoutArg=t;function t(e,r,u,d){return(m,c)=>{const a=new Date,o=u.options||{};o.deadline=new Date(a.getTime()+r);const s=u.metadataBuilder?u.metadataBuilder(d,u.headers||{}):null;return e(m,s,o,c)}}return timeout}var hasRequiredRetries;function requireRetries(){if(hasRequiredRetries)return retries;hasRequiredRetries=1,Object.defineProperty(retries,"__esModule",{value:!0}),retries.retryable=u;const t=requireStatus(),e=requireGoogleError(),r=requireTimeout();function u(d,m,c,a){const o=m.backoffSettings.retryDelayMultiplier,s=m.backoffSettings.maxRetryDelayMillis,h=m.backoffSettings.rpcTimeoutMultiplier,v=m.backoffSettings.maxRpcTimeoutMillis;let E=m.backoffSettings.initialRetryDelayMillis,y=m.backoffSettings.initialRpcTimeoutMillis;return(A,w)=>{let I,_,S=new Date,j;m.backoffSettings.totalTimeoutMillis&&(j=S.getTime()+m.backoffSettings.totalTimeoutMillis);let K=0;const J=m.backoffSettings.maxRetries;function H(U){if(_=null,j&&S.getTime()>=j){const ie=new e.GoogleError(`Total timeout of API ${a} exceeded ${m.backoffSettings.totalTimeoutMillis} milliseconds ${U?`retrying error ${U} `:""} before any response was received.`);ie.code=t.Status.DEADLINE_EXCEEDED,w(ie);return}if(K&&K>=J){const ie=new e.GoogleError("Exceeded maximum number of retries "+(U?`retrying error ${U} `:"")+"before any response was received");ie.code=t.Status.DEADLINE_EXCEEDED,w(ie);return}K++;let P=U;I=(0,r.addTimeoutArg)(d,y,c)(A,(ie,ue,le,ne)=>{if(ie&&ie.code!==4&&(P=ie),!ie){w(null,ue,le,ne);return}if(I=null,m.retryCodes.length>0&&m.retryCodes.indexOf(ie.code)<0)ie.note="Exception occurred in retry method that was not classified as transient",w(ie);else{const ye=Math.random()*E;_=setTimeout(()=>{S=new Date,E=Math.min(E*o,s);const fe=y&&h?y*h:0,Te=v||0,Ae=j?j-S.getTime():0;y=Math.min(fe,Te,Ae),H(P)},ye)}}),I instanceof Promise&&I.catch(ie=>{w(new e.GoogleError(ie))})}if(J&&j){const U=new e.GoogleError("Cannot set both totalTimeoutMillis and maxRetries in backoffSettings.");U.code=t.Status.INVALID_ARGUMENT,w(U)}else H();return{cancel(){if(_&&clearTimeout(_),I)I.cancel();else{const U=new e.GoogleError("cancelled");U.code=t.Status.CANCELLED,w(U)}}}}}return retries}var streamingApiCaller={},streaming={},hasRequiredStreaming;function requireStreaming(){if(hasRequiredStreaming)return streaming;hasRequiredStreaming=1,Object.defineProperty(streaming,"__esModule",{value:!0}),streaming.StreamProxy=streaming.StreamType=void 0;const t=requireGax(),e=requireGoogleError(),r=requireStatus(),u=require$$1$3,d=requireDuplexify(),m=requireRetryRequest();var c;(function(s){s[s.SERVER_STREAMING=1]="SERVER_STREAMING",s[s.CLIENT_STREAMING=2]="CLIENT_STREAMING",s[s.BIDI_STREAMING=3]="BIDI_STREAMING"})(c||(streaming.StreamType=c={}));const a=null;class o extends d{constructor(h,v,E,y){super(void 0,void 0,{objectMode:!0,readable:h!==c.CLIENT_STREAMING,writable:h!==c.SERVER_STREAMING}),this.type=h,this._callback=v,this._isCancelCalled=!1,this._responseHasSent=!1,this.rest=E,this.gaxServerStreamingRetries=y}shouldRetryRequest(h,v){const E=e.GoogleError.parseGRPCStatusDetails(h);let y=this.defaultShouldRetry(E,v);return v.shouldRetryFn&&(y=v.shouldRetryFn(E)),y}cancel(){this.stream?this.stream.cancel():this._isCancelCalled=!0}throwIfMaxRetriesOrTotalTimeoutExceeded(h,v,E,y,A,w){const _=new Date().getTime();if(A&&(E===0||E<0||h&&_>=h)){const S=new e.GoogleError(`Total timeout of API exceeded ${A} milliseconds ${y?`retrying error ${y} `:""} before any response was received.`);throw S.code=r.Status.DEADLINE_EXCEEDED,S}if(v===0){const S=y;throw S.note="Max retries is set to zero.",S}if(w&&w>=v){const S=new e.GoogleError("Exceeded maximum number of retries "+(y?`retrying error ${y} `:"")+"before any response was received");throw S.code=r.Status.DEADLINE_EXCEEDED,S}}eventForwardHelper(h){["metadata","response","status"].forEach(E=>{h.on(E,this.emit.bind(this,E))})}statusMetadataHelper(h){h.on("status",()=>{this._responseHasSent||h.emit("response",{code:200,details:"",message:"OK"})}),h.on("metadata",v=>{h.emit("response",{code:200,details:"",message:"OK",metadata:v}),this._responseHasSent=!0})}forwardEvents(h){this.eventForwardHelper(h),this.statusMetadataHelper(h),h.on("error",v=>{e.GoogleError.parseGRPCStatusDetails(v)})}defaultShouldRetry(h,v){return!(v.retryCodes.length>0&&v.retryCodes.indexOf(h.code)<0||v.retryCodes.length===0)}setStream(h,v,E={},y){if(this.apiCall=h,this.argument=v,this.type===c.SERVER_STREAMING){if(this.rest){const w=h(v,this._callback);this.stream=w,this.setReadable(w)}else if(this.gaxServerStreamingRetries){const w=()=>{if(this._isCancelCalled){this.stream&&this.stream.cancel();return}return h(v,this._callback)},I=this.newStreamingRetryRequest({request:w,retry:y});this.stream=I,this.eventForwardHelper(I),this.setReadable(I)}else{const w=m(null,{objectMode:!0,request:()=>{if(this._isCancelCalled){this.stream&&this.stream.cancel();return}const I=h(v,this._callback);return this.stream=I,this.forwardEvents(I),I},retries:E.retries,currentRetryAttempt:E.currentRetryAttempt,noResponseRetries:E.noResponseRetries,shouldRetryFn:E.shouldRetryFn});this.setReadable(w)}return}const A=h(v,this._callback);this.stream=A,this.forwardEvents(A),this.type===c.CLIENT_STREAMING&&this.setWritable(A),this.type===c.BIDI_STREAMING&&(this.setReadable(A),this.setWritable(A)),this._isCancelCalled&&this.stream&&this.stream.cancel()}newStreamingRetryRequest(h){var v,E,y,A;const w=(v=h.retry)!==null&&v!==void 0?v:{retryCodes:[],backoffSettings:(0,t.createDefaultBackoffSettings)()};let I=0;const _=new u.PassThrough({objectMode:!0}),S=(E=w.backoffSettings.totalTimeoutMillis)!==null&&E!==void 0?E:void 0,j=(y=w.backoffSettings.maxRetries)!==null&&y!==void 0?y:void 0;let K=(A=w.backoffSettings.initialRpcTimeoutMillis)!==null&&A!==void 0?A:void 0,J=new Date,H=0;S&&(H=J.getTime()+S);const U=(Z,ie)=>{const ue=e.GoogleError.parseGRPCStatusDetails(Z);return ue.note="Exception occurred in retry method that was not classified as transient",ie.destroy(),_.destroy(ue),_},P=Z=>{let ie=!1,ue=!1,le=!1;const ne=Z.request(a);return _.cancel=ne.cancel,["metadata","response","status"].forEach(fe=>{ne.on(fe,_.emit.bind(_,fe))}),this.statusMetadataHelper(ne),ne.on("data",fe=>{I=0,this.emit.bind(this,"data")(fe)}),ne.on("status",()=>(ue=!0,ie&&_.end(),_)),ne.on("end",()=>(le||(ie=!0,ue&&_.end()),_)),ne.on("error",fe=>{if(le=!0,typeof j!==void 0||typeof S!==void 0)if(this.shouldRetryRequest(fe,w))if(j&&S){const Te=new e.GoogleError("Cannot set both totalTimeoutMillis and maxRetries in backoffSettings.");return Te.code=r.Status.INVALID_ARGUMENT,ne.destroy(),_.destroy(Te),_}else{try{this.throwIfMaxRetriesOrTotalTimeoutExceeded(H,j,K,fe,S,I)}catch(Fe){const Ve=e.GoogleError.parseGRPCStatusDetails(Fe);return ne.destroy(),_.destroy(Ve),_}const Te=w.backoffSettings.retryDelayMultiplier,Ae=w.backoffSettings.maxRetryDelayMillis,Se=w.backoffSettings.rpcTimeoutMultiplier,be=w.backoffSettings.maxRpcTimeoutMillis;let we=w.backoffSettings.initialRetryDelayMillis;const Ce=Math.random()*we;return(()=>{setTimeout(()=>{if(K){J=new Date,we=Math.min(we*Te,Ae);const Ge=K&&Se?K*Se:0,Le=be||0,Be=H?H-J.getTime():0;K=Math.min(Ge,Le,Be)}I++;let Fe=this.argument;w.getResumptionRequestFn!==void 0&&(Fe=w.getResumptionRequestFn(Fe));const Ve=()=>{if(this._isCancelCalled){this.stream&&this.stream.cancel();return}return this.apiCall(Fe,this._callback)};return h.request=Ve,P(h)},Ce)})()}else return U(fe,ne);else return U(fe,ne)}),_};return P(h)}}return streaming.StreamProxy=o,streaming}var hasRequiredStreamingApiCaller;function requireStreamingApiCaller(){if(hasRequiredStreamingApiCaller)return streamingApiCaller;hasRequiredStreamingApiCaller=1,Object.defineProperty(streamingApiCaller,"__esModule",{value:!0}),streamingApiCaller.StreamingApiCaller=void 0;const t=requireWarnings(),e=requireStreaming();class r{constructor(d){this.descriptor=d}init(d){return new e.StreamProxy(this.descriptor.type,d,this.descriptor.rest,this.descriptor.gaxStreamingRetries)}wrap(d){switch(this.descriptor.type){case e.StreamType.SERVER_STREAMING:return(m,c,a)=>d(m,c,a);case e.StreamType.CLIENT_STREAMING:return(m,c,a,o)=>d(c,a,o);case e.StreamType.BIDI_STREAMING:return(m,c,a)=>d(c,a);default:(0,t.warn)("streaming_wrap_unknown_stream_type",`Unknown stream type: ${this.descriptor.type}`)}return d}call(d,m,c,a){a.setStream(d,m,c.retryRequestOptions,c.retry)}fail(d,m){d.emit("error",m)}result(d){return d}}return streamingApiCaller.StreamingApiCaller=r,streamingApiCaller}var hasRequiredCreateApiCall;function requireCreateApiCall(){if(hasRequiredCreateApiCall)return createApiCall;hasRequiredCreateApiCall=1,Object.defineProperty(createApiCall,"__esModule",{value:!0}),createApiCall.createApiCall=c;const t=requireApiCaller(),e=requireGax(),r=requireRetries(),u=requireTimeout(),d=requireStreamingApiCaller(),m=requireWarnings();function c(a,o,s,h){const v=typeof a=="function"?Promise.resolve(a):a,E=(0,t.createAPICaller)(o,s);return(y,A,w)=>{var I,_;let S=E,j;if(S instanceof d.StreamingApiCaller){const J=(_=(I=S.descriptor)===null||I===void 0?void 0:I.gaxStreamingRetries)!==null&&_!==void 0?_:!1,H=(0,e.convertRetryOptions)(A,J);j=o.merge(H)}else j=o.merge(A);o.isBundling&&!j.isBundling&&(S=(0,t.createAPICaller)(o,void 0));const K=S.init(w);return v.then(J=>{var H,U,P;J=S.wrap(J);const Z=(H=S.descriptor)===null||H===void 0?void 0:H.streaming,ie=j.retry;if(Z&&ie&&(ie.retryCodes.length>0&&ie.shouldRetryFn&&((0,m.warn)("either_retrycodes_or_shouldretryfn","Only one of retryCodes or shouldRetryFn may be defined. Ignoring retryCodes."),ie.retryCodes=[]),!S.descriptor.gaxStreamingRetries&&ie.getResumptionRequestFn))throw new Error("getResumptionRequestFn can only be used when gaxStreamingRetries is set to true.");if(!Z&&ie){if(ie.shouldRetryFn)throw new Error("Using a function to determine retry eligibility is only supported with server streaming calls");if(ie.getResumptionRequestFn)throw new Error("Resumption strategy can only be used with server streaming retries");if(ie.retryCodes&&ie.retryCodes.length>0)return(U=(P=ie.backoffSettings).initialRpcTimeoutMillis)!==null&&U!==void 0||(P.initialRpcTimeoutMillis=j.timeout),(0,r.retryable)(J,j.retry,j.otherArgs,j.apiName)}return(0,u.addTimeoutArg)(J,j.timeout,j.otherArgs)}).then(J=>{S.call(J,y,j,K)}).catch(J=>{S.fail(K,J)}),S.result(K)}}return createApiCall}var descriptor={},longRunningDescriptor={},longRunningApiCaller={},longrunning={},operations={exports:{}},minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}var hasRequiredOperations;function requireOperations(){return hasRequiredOperations||(hasRequiredOperations=1,function(t){(e=>{typeof commonjsRequire=="function"&&t&&t.exports&&(t.exports=e(requireMinimal()))})(function(e){var r,u,d,m,c=e.Reader,a=e.Writer,o=e.util,s=e.roots.operations_protos||(e.roots.operations_protos={});function h(g,ee,ae){e.rpc.Service.call(this,g,ee,ae)}function v(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function E(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function y(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function A(g){if(this.operations=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function w(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function I(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function _(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function S(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function j(g){if(this.rules=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function K(g){if(this.additionalBindings=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function J(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function H(g){if(this.file=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function U(g){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function P(g){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Z(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function ie(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function ue(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function le(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function ne(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function ye(g){if(this.value=[],this.reservedRange=[],this.reservedName=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function fe(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Te(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Ae(g){if(this.method=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Se(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function be(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function we(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Ce(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function je(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Fe(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Ve(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Ge(g){if(this.uninterpretedOption=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Le(g){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Be(g){if(this.name=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function $e(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function he(g){if(this.location=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function p(g){if(this.path=[],this.span=[],this.leadingDetachedComments=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function V(g){if(this.annotation=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function R(g){if(this.path=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function ce(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function Re(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function ke(g){if(g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}function qe(g){if(this.details=[],g)for(var ee=Object.keys(g),ae=0;ae<ee.length;++ae)g[ee[ae]]!=null&&(this[ee[ae]]=g[ee[ae]])}return s.google=((m={}).longrunning=((u={}).Operations=(((h.prototype=Object.create(e.rpc.Service.prototype)).constructor=h).create=function(g,ee,ae){return new this(g,ee,ae)},Object.defineProperty(h.prototype.listOperations=function g(ee,ae){return this.rpcCall(g,s.google.longrunning.ListOperationsRequest,s.google.longrunning.ListOperationsResponse,ee,ae)},"name",{value:"ListOperations"}),Object.defineProperty(h.prototype.getOperation=function g(ee,ae){return this.rpcCall(g,s.google.longrunning.GetOperationRequest,s.google.longrunning.Operation,ee,ae)},"name",{value:"GetOperation"}),Object.defineProperty(h.prototype.deleteOperation=function g(ee,ae){return this.rpcCall(g,s.google.longrunning.DeleteOperationRequest,s.google.protobuf.Empty,ee,ae)},"name",{value:"DeleteOperation"}),Object.defineProperty(h.prototype.cancelOperation=function g(ee,ae){return this.rpcCall(g,s.google.longrunning.CancelOperationRequest,s.google.protobuf.Empty,ee,ae)},"name",{value:"CancelOperation"}),Object.defineProperty(h.prototype.waitOperation=function g(ee,ae){return this.rpcCall(g,s.google.longrunning.WaitOperationRequest,s.google.longrunning.Operation,ee,ae)},"name",{value:"WaitOperation"}),h),u.Operation=(v.prototype.name="",v.prototype.metadata=null,v.prototype.done=!1,v.prototype.error=null,v.prototype.response=null,Object.defineProperty(v.prototype,"result",{get:o.oneOfGetter(d=["error","response"]),set:o.oneOfSetter(d)}),v.create=function(g){return new v(g)},v.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.metadata!=null&&Object.hasOwnProperty.call(g,"metadata")&&s.google.protobuf.Any.encode(g.metadata,ee.uint32(18).fork()).ldelim(),g.done!=null&&Object.hasOwnProperty.call(g,"done")&&ee.uint32(24).bool(g.done),g.error!=null&&Object.hasOwnProperty.call(g,"error")&&s.google.rpc.Status.encode(g.error,ee.uint32(34).fork()).ldelim(),g.response!=null&&Object.hasOwnProperty.call(g,"response")&&s.google.protobuf.Any.encode(g.response,ee.uint32(42).fork()).ldelim(),ee},v.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},v.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.Operation;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.metadata=s.google.protobuf.Any.decode(g,g.uint32());break;case 3:l.done=g.bool();break;case 4:l.error=s.google.rpc.Status.decode(g,g.uint32());break;case 5:l.response=s.google.protobuf.Any.decode(g,g.uint32());break;default:g.skipType(7&X)}}return l},v.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},v.verify=function(g){if(typeof g!="object"||g===null)return"object expected";var ee,ae={};if(g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name))return"name: string expected";if(g.metadata!=null&&g.hasOwnProperty("metadata")&&(ee=s.google.protobuf.Any.verify(g.metadata)))return"metadata."+ee;if(g.done!=null&&g.hasOwnProperty("done")&&typeof g.done!="boolean")return"done: boolean expected";if(g.error!=null&&g.hasOwnProperty("error")&&(ae.result=1,ee=s.google.rpc.Status.verify(g.error)))return"error."+ee;if(g.response!=null&&g.hasOwnProperty("response")){if(ae.result===1)return"result: multiple values";if(ae.result=1,ee=s.google.protobuf.Any.verify(g.response))return"response."+ee}return null},v.fromObject=function(g){if(g instanceof s.google.longrunning.Operation)return g;var ee=new s.google.longrunning.Operation;if(g.name!=null&&(ee.name=String(g.name)),g.metadata!=null){if(typeof g.metadata!="object")throw TypeError(".google.longrunning.Operation.metadata: object expected");ee.metadata=s.google.protobuf.Any.fromObject(g.metadata)}if(g.done!=null&&(ee.done=!!g.done),g.error!=null){if(typeof g.error!="object")throw TypeError(".google.longrunning.Operation.error: object expected");ee.error=s.google.rpc.Status.fromObject(g.error)}if(g.response!=null){if(typeof g.response!="object")throw TypeError(".google.longrunning.Operation.response: object expected");ee.response=s.google.protobuf.Any.fromObject(g.response)}return ee},v.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name="",ae.metadata=null,ae.done=!1),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.metadata!=null&&g.hasOwnProperty("metadata")&&(ae.metadata=s.google.protobuf.Any.toObject(g.metadata,ee)),g.done!=null&&g.hasOwnProperty("done")&&(ae.done=g.done),g.error!=null&&g.hasOwnProperty("error")&&(ae.error=s.google.rpc.Status.toObject(g.error,ee),ee.oneofs)&&(ae.result="error"),g.response!=null&&g.hasOwnProperty("response")&&(ae.response=s.google.protobuf.Any.toObject(g.response,ee),ee.oneofs)&&(ae.result="response"),ae},v.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},v),u.GetOperationRequest=(E.prototype.name="",E.create=function(g){return new E(g)},E.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),ee},E.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},E.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.GetOperationRequest;g.pos<ae;){var X=g.uint32();X>>>3==1?l.name=g.string():g.skipType(7&X)}return l},E.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},E.verify=function(g){return typeof g!="object"||g===null?"object expected":g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name)?"name: string expected":null},E.fromObject=function(g){var ee;return g instanceof s.google.longrunning.GetOperationRequest?g:(ee=new s.google.longrunning.GetOperationRequest,g.name!=null&&(ee.name=String(g.name)),ee)},E.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name=""),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),ae},E.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},E),u.ListOperationsRequest=(y.prototype.name="",y.prototype.filter="",y.prototype.pageSize=0,y.prototype.pageToken="",y.create=function(g){return new y(g)},y.encode=function(g,ee){return ee=ee||a.create(),g.filter!=null&&Object.hasOwnProperty.call(g,"filter")&&ee.uint32(10).string(g.filter),g.pageSize!=null&&Object.hasOwnProperty.call(g,"pageSize")&&ee.uint32(16).int32(g.pageSize),g.pageToken!=null&&Object.hasOwnProperty.call(g,"pageToken")&&ee.uint32(26).string(g.pageToken),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(34).string(g.name),ee},y.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},y.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.ListOperationsRequest;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 4:l.name=g.string();break;case 1:l.filter=g.string();break;case 2:l.pageSize=g.int32();break;case 3:l.pageToken=g.string();break;default:g.skipType(7&X)}}return l},y.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},y.verify=function(g){return typeof g!="object"||g===null?"object expected":g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name)?"name: string expected":g.filter!=null&&g.hasOwnProperty("filter")&&!o.isString(g.filter)?"filter: string expected":g.pageSize!=null&&g.hasOwnProperty("pageSize")&&!o.isInteger(g.pageSize)?"pageSize: integer expected":g.pageToken!=null&&g.hasOwnProperty("pageToken")&&!o.isString(g.pageToken)?"pageToken: string expected":null},y.fromObject=function(g){var ee;return g instanceof s.google.longrunning.ListOperationsRequest?g:(ee=new s.google.longrunning.ListOperationsRequest,g.name!=null&&(ee.name=String(g.name)),g.filter!=null&&(ee.filter=String(g.filter)),g.pageSize!=null&&(ee.pageSize=0|g.pageSize),g.pageToken!=null&&(ee.pageToken=String(g.pageToken)),ee)},y.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.filter="",ae.pageSize=0,ae.pageToken="",ae.name=""),g.filter!=null&&g.hasOwnProperty("filter")&&(ae.filter=g.filter),g.pageSize!=null&&g.hasOwnProperty("pageSize")&&(ae.pageSize=g.pageSize),g.pageToken!=null&&g.hasOwnProperty("pageToken")&&(ae.pageToken=g.pageToken),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),ae},y.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},y),u.ListOperationsResponse=(A.prototype.operations=o.emptyArray,A.prototype.nextPageToken="",A.create=function(g){return new A(g)},A.encode=function(g,ee){if(ee=ee||a.create(),g.operations!=null&&g.operations.length)for(var ae=0;ae<g.operations.length;++ae)s.google.longrunning.Operation.encode(g.operations[ae],ee.uint32(10).fork()).ldelim();return g.nextPageToken!=null&&Object.hasOwnProperty.call(g,"nextPageToken")&&ee.uint32(18).string(g.nextPageToken),ee},A.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},A.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.ListOperationsResponse;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.operations&&l.operations.length||(l.operations=[]),l.operations.push(s.google.longrunning.Operation.decode(g,g.uint32()));break;case 2:l.nextPageToken=g.string();break;default:g.skipType(7&X)}}return l},A.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},A.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.operations!=null&&g.hasOwnProperty("operations")){if(!Array.isArray(g.operations))return"operations: array expected";for(var ee=0;ee<g.operations.length;++ee){var ae=s.google.longrunning.Operation.verify(g.operations[ee]);if(ae)return"operations."+ae}}return g.nextPageToken!=null&&g.hasOwnProperty("nextPageToken")&&!o.isString(g.nextPageToken)?"nextPageToken: string expected":null},A.fromObject=function(g){if(g instanceof s.google.longrunning.ListOperationsResponse)return g;var ee=new s.google.longrunning.ListOperationsResponse;if(g.operations){if(!Array.isArray(g.operations))throw TypeError(".google.longrunning.ListOperationsResponse.operations: array expected");ee.operations=[];for(var ae=0;ae<g.operations.length;++ae){if(typeof g.operations[ae]!="object")throw TypeError(".google.longrunning.ListOperationsResponse.operations: object expected");ee.operations[ae]=s.google.longrunning.Operation.fromObject(g.operations[ae])}}return g.nextPageToken!=null&&(ee.nextPageToken=String(g.nextPageToken)),ee},A.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.operations=[]),ee.defaults&&(ae.nextPageToken=""),g.operations&&g.operations.length){ae.operations=[];for(var l=0;l<g.operations.length;++l)ae.operations[l]=s.google.longrunning.Operation.toObject(g.operations[l],ee)}return g.nextPageToken!=null&&g.hasOwnProperty("nextPageToken")&&(ae.nextPageToken=g.nextPageToken),ae},A.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},A),u.CancelOperationRequest=(w.prototype.name="",w.create=function(g){return new w(g)},w.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),ee},w.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},w.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.CancelOperationRequest;g.pos<ae;){var X=g.uint32();X>>>3==1?l.name=g.string():g.skipType(7&X)}return l},w.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},w.verify=function(g){return typeof g!="object"||g===null?"object expected":g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name)?"name: string expected":null},w.fromObject=function(g){var ee;return g instanceof s.google.longrunning.CancelOperationRequest?g:(ee=new s.google.longrunning.CancelOperationRequest,g.name!=null&&(ee.name=String(g.name)),ee)},w.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name=""),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),ae},w.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},w),u.DeleteOperationRequest=(I.prototype.name="",I.create=function(g){return new I(g)},I.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),ee},I.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},I.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.DeleteOperationRequest;g.pos<ae;){var X=g.uint32();X>>>3==1?l.name=g.string():g.skipType(7&X)}return l},I.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},I.verify=function(g){return typeof g!="object"||g===null?"object expected":g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name)?"name: string expected":null},I.fromObject=function(g){var ee;return g instanceof s.google.longrunning.DeleteOperationRequest?g:(ee=new s.google.longrunning.DeleteOperationRequest,g.name!=null&&(ee.name=String(g.name)),ee)},I.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name=""),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),ae},I.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},I),u.WaitOperationRequest=(_.prototype.name="",_.prototype.timeout=null,_.create=function(g){return new _(g)},_.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.timeout!=null&&Object.hasOwnProperty.call(g,"timeout")&&s.google.protobuf.Duration.encode(g.timeout,ee.uint32(18).fork()).ldelim(),ee},_.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},_.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.WaitOperationRequest;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.timeout=s.google.protobuf.Duration.decode(g,g.uint32());break;default:g.skipType(7&X)}}return l},_.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},_.verify=function(g){return typeof g!="object"||g===null?"object expected":g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name)?"name: string expected":g.timeout!=null&&g.hasOwnProperty("timeout")&&(g=s.google.protobuf.Duration.verify(g.timeout),g)?"timeout."+g:null},_.fromObject=function(g){if(g instanceof s.google.longrunning.WaitOperationRequest)return g;var ee=new s.google.longrunning.WaitOperationRequest;if(g.name!=null&&(ee.name=String(g.name)),g.timeout!=null){if(typeof g.timeout!="object")throw TypeError(".google.longrunning.WaitOperationRequest.timeout: object expected");ee.timeout=s.google.protobuf.Duration.fromObject(g.timeout)}return ee},_.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name="",ae.timeout=null),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.timeout!=null&&g.hasOwnProperty("timeout")&&(ae.timeout=s.google.protobuf.Duration.toObject(g.timeout,ee)),ae},_.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},_),u.OperationInfo=(S.prototype.responseType="",S.prototype.metadataType="",S.create=function(g){return new S(g)},S.encode=function(g,ee){return ee=ee||a.create(),g.responseType!=null&&Object.hasOwnProperty.call(g,"responseType")&&ee.uint32(10).string(g.responseType),g.metadataType!=null&&Object.hasOwnProperty.call(g,"metadataType")&&ee.uint32(18).string(g.metadataType),ee},S.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},S.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.longrunning.OperationInfo;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.responseType=g.string();break;case 2:l.metadataType=g.string();break;default:g.skipType(7&X)}}return l},S.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},S.verify=function(g){return typeof g!="object"||g===null?"object expected":g.responseType!=null&&g.hasOwnProperty("responseType")&&!o.isString(g.responseType)?"responseType: string expected":g.metadataType!=null&&g.hasOwnProperty("metadataType")&&!o.isString(g.metadataType)?"metadataType: string expected":null},S.fromObject=function(g){var ee;return g instanceof s.google.longrunning.OperationInfo?g:(ee=new s.google.longrunning.OperationInfo,g.responseType!=null&&(ee.responseType=String(g.responseType)),g.metadataType!=null&&(ee.metadataType=String(g.metadataType)),ee)},S.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.responseType="",ae.metadataType=""),g.responseType!=null&&g.hasOwnProperty("responseType")&&(ae.responseType=g.responseType),g.metadataType!=null&&g.hasOwnProperty("metadataType")&&(ae.metadataType=g.metadataType),ae},S.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},S),u),m.api=((d={}).Http=(j.prototype.rules=o.emptyArray,j.prototype.fullyDecodeReservedExpansion=!1,j.create=function(g){return new j(g)},j.encode=function(g,ee){if(ee=ee||a.create(),g.rules!=null&&g.rules.length)for(var ae=0;ae<g.rules.length;++ae)s.google.api.HttpRule.encode(g.rules[ae],ee.uint32(10).fork()).ldelim();return g.fullyDecodeReservedExpansion!=null&&Object.hasOwnProperty.call(g,"fullyDecodeReservedExpansion")&&ee.uint32(16).bool(g.fullyDecodeReservedExpansion),ee},j.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},j.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.api.Http;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.rules&&l.rules.length||(l.rules=[]),l.rules.push(s.google.api.HttpRule.decode(g,g.uint32()));break;case 2:l.fullyDecodeReservedExpansion=g.bool();break;default:g.skipType(7&X)}}return l},j.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},j.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.rules!=null&&g.hasOwnProperty("rules")){if(!Array.isArray(g.rules))return"rules: array expected";for(var ee=0;ee<g.rules.length;++ee){var ae=s.google.api.HttpRule.verify(g.rules[ee]);if(ae)return"rules."+ae}}return g.fullyDecodeReservedExpansion!=null&&g.hasOwnProperty("fullyDecodeReservedExpansion")&&typeof g.fullyDecodeReservedExpansion!="boolean"?"fullyDecodeReservedExpansion: boolean expected":null},j.fromObject=function(g){if(g instanceof s.google.api.Http)return g;var ee=new s.google.api.Http;if(g.rules){if(!Array.isArray(g.rules))throw TypeError(".google.api.Http.rules: array expected");ee.rules=[];for(var ae=0;ae<g.rules.length;++ae){if(typeof g.rules[ae]!="object")throw TypeError(".google.api.Http.rules: object expected");ee.rules[ae]=s.google.api.HttpRule.fromObject(g.rules[ae])}}return g.fullyDecodeReservedExpansion!=null&&(ee.fullyDecodeReservedExpansion=!!g.fullyDecodeReservedExpansion),ee},j.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.rules=[]),ee.defaults&&(ae.fullyDecodeReservedExpansion=!1),g.rules&&g.rules.length){ae.rules=[];for(var l=0;l<g.rules.length;++l)ae.rules[l]=s.google.api.HttpRule.toObject(g.rules[l],ee)}return g.fullyDecodeReservedExpansion!=null&&g.hasOwnProperty("fullyDecodeReservedExpansion")&&(ae.fullyDecodeReservedExpansion=g.fullyDecodeReservedExpansion),ae},j.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},j),d.HttpRule=(K.prototype.selector="",K.prototype.get="",K.prototype.put="",K.prototype.post="",K.prototype.delete="",K.prototype.patch="",K.prototype.custom=null,K.prototype.body="",K.prototype.responseBody="",K.prototype.additionalBindings=o.emptyArray,Object.defineProperty(K.prototype,"pattern",{get:o.oneOfGetter(u=["get","put","post","delete","patch","custom"]),set:o.oneOfSetter(u)}),K.create=function(g){return new K(g)},K.encode=function(g,ee){if(ee=ee||a.create(),g.selector!=null&&Object.hasOwnProperty.call(g,"selector")&&ee.uint32(10).string(g.selector),g.get!=null&&Object.hasOwnProperty.call(g,"get")&&ee.uint32(18).string(g.get),g.put!=null&&Object.hasOwnProperty.call(g,"put")&&ee.uint32(26).string(g.put),g.post!=null&&Object.hasOwnProperty.call(g,"post")&&ee.uint32(34).string(g.post),g.delete!=null&&Object.hasOwnProperty.call(g,"delete")&&ee.uint32(42).string(g.delete),g.patch!=null&&Object.hasOwnProperty.call(g,"patch")&&ee.uint32(50).string(g.patch),g.body!=null&&Object.hasOwnProperty.call(g,"body")&&ee.uint32(58).string(g.body),g.custom!=null&&Object.hasOwnProperty.call(g,"custom")&&s.google.api.CustomHttpPattern.encode(g.custom,ee.uint32(66).fork()).ldelim(),g.additionalBindings!=null&&g.additionalBindings.length)for(var ae=0;ae<g.additionalBindings.length;++ae)s.google.api.HttpRule.encode(g.additionalBindings[ae],ee.uint32(90).fork()).ldelim();return g.responseBody!=null&&Object.hasOwnProperty.call(g,"responseBody")&&ee.uint32(98).string(g.responseBody),ee},K.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},K.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.api.HttpRule;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.selector=g.string();break;case 2:l.get=g.string();break;case 3:l.put=g.string();break;case 4:l.post=g.string();break;case 5:l.delete=g.string();break;case 6:l.patch=g.string();break;case 8:l.custom=s.google.api.CustomHttpPattern.decode(g,g.uint32());break;case 7:l.body=g.string();break;case 12:l.responseBody=g.string();break;case 11:l.additionalBindings&&l.additionalBindings.length||(l.additionalBindings=[]),l.additionalBindings.push(s.google.api.HttpRule.decode(g,g.uint32()));break;default:g.skipType(7&X)}}return l},K.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},K.verify=function(g){if(typeof g!="object"||g===null)return"object expected";var ee={};if(g.selector!=null&&g.hasOwnProperty("selector")&&!o.isString(g.selector))return"selector: string expected";if(g.get!=null&&g.hasOwnProperty("get")&&(ee.pattern=1,!o.isString(g.get)))return"get: string expected";if(g.put!=null&&g.hasOwnProperty("put")){if(ee.pattern===1)return"pattern: multiple values";if(ee.pattern=1,!o.isString(g.put))return"put: string expected"}if(g.post!=null&&g.hasOwnProperty("post")){if(ee.pattern===1)return"pattern: multiple values";if(ee.pattern=1,!o.isString(g.post))return"post: string expected"}if(g.delete!=null&&g.hasOwnProperty("delete")){if(ee.pattern===1)return"pattern: multiple values";if(ee.pattern=1,!o.isString(g.delete))return"delete: string expected"}if(g.patch!=null&&g.hasOwnProperty("patch")){if(ee.pattern===1)return"pattern: multiple values";if(ee.pattern=1,!o.isString(g.patch))return"patch: string expected"}if(g.custom!=null&&g.hasOwnProperty("custom")){if(ee.pattern===1)return"pattern: multiple values";if(ee.pattern=1,ae=s.google.api.CustomHttpPattern.verify(g.custom))return"custom."+ae}if(g.body!=null&&g.hasOwnProperty("body")&&!o.isString(g.body))return"body: string expected";if(g.responseBody!=null&&g.hasOwnProperty("responseBody")&&!o.isString(g.responseBody))return"responseBody: string expected";if(g.additionalBindings!=null&&g.hasOwnProperty("additionalBindings")){if(!Array.isArray(g.additionalBindings))return"additionalBindings: array expected";for(var ae,l=0;l<g.additionalBindings.length;++l)if(ae=s.google.api.HttpRule.verify(g.additionalBindings[l]))return"additionalBindings."+ae}return null},K.fromObject=function(g){if(g instanceof s.google.api.HttpRule)return g;var ee=new s.google.api.HttpRule;if(g.selector!=null&&(ee.selector=String(g.selector)),g.get!=null&&(ee.get=String(g.get)),g.put!=null&&(ee.put=String(g.put)),g.post!=null&&(ee.post=String(g.post)),g.delete!=null&&(ee.delete=String(g.delete)),g.patch!=null&&(ee.patch=String(g.patch)),g.custom!=null){if(typeof g.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");ee.custom=s.google.api.CustomHttpPattern.fromObject(g.custom)}if(g.body!=null&&(ee.body=String(g.body)),g.responseBody!=null&&(ee.responseBody=String(g.responseBody)),g.additionalBindings){if(!Array.isArray(g.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");ee.additionalBindings=[];for(var ae=0;ae<g.additionalBindings.length;++ae){if(typeof g.additionalBindings[ae]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");ee.additionalBindings[ae]=s.google.api.HttpRule.fromObject(g.additionalBindings[ae])}}return ee},K.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.additionalBindings=[]),ee.defaults&&(ae.selector="",ae.body="",ae.responseBody=""),g.selector!=null&&g.hasOwnProperty("selector")&&(ae.selector=g.selector),g.get!=null&&g.hasOwnProperty("get")&&(ae.get=g.get,ee.oneofs)&&(ae.pattern="get"),g.put!=null&&g.hasOwnProperty("put")&&(ae.put=g.put,ee.oneofs)&&(ae.pattern="put"),g.post!=null&&g.hasOwnProperty("post")&&(ae.post=g.post,ee.oneofs)&&(ae.pattern="post"),g.delete!=null&&g.hasOwnProperty("delete")&&(ae.delete=g.delete,ee.oneofs)&&(ae.pattern="delete"),g.patch!=null&&g.hasOwnProperty("patch")&&(ae.patch=g.patch,ee.oneofs)&&(ae.pattern="patch"),g.body!=null&&g.hasOwnProperty("body")&&(ae.body=g.body),g.custom!=null&&g.hasOwnProperty("custom")&&(ae.custom=s.google.api.CustomHttpPattern.toObject(g.custom,ee),ee.oneofs)&&(ae.pattern="custom"),g.additionalBindings&&g.additionalBindings.length){ae.additionalBindings=[];for(var l=0;l<g.additionalBindings.length;++l)ae.additionalBindings[l]=s.google.api.HttpRule.toObject(g.additionalBindings[l],ee)}return g.responseBody!=null&&g.hasOwnProperty("responseBody")&&(ae.responseBody=g.responseBody),ae},K.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},K),d.CustomHttpPattern=(J.prototype.kind="",J.prototype.path="",J.create=function(g){return new J(g)},J.encode=function(g,ee){return ee=ee||a.create(),g.kind!=null&&Object.hasOwnProperty.call(g,"kind")&&ee.uint32(10).string(g.kind),g.path!=null&&Object.hasOwnProperty.call(g,"path")&&ee.uint32(18).string(g.path),ee},J.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},J.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.api.CustomHttpPattern;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.kind=g.string();break;case 2:l.path=g.string();break;default:g.skipType(7&X)}}return l},J.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},J.verify=function(g){return typeof g!="object"||g===null?"object expected":g.kind!=null&&g.hasOwnProperty("kind")&&!o.isString(g.kind)?"kind: string expected":g.path!=null&&g.hasOwnProperty("path")&&!o.isString(g.path)?"path: string expected":null},J.fromObject=function(g){var ee;return g instanceof s.google.api.CustomHttpPattern?g:(ee=new s.google.api.CustomHttpPattern,g.kind!=null&&(ee.kind=String(g.kind)),g.path!=null&&(ee.path=String(g.path)),ee)},J.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.kind="",ae.path=""),g.kind!=null&&g.hasOwnProperty("kind")&&(ae.kind=g.kind),g.path!=null&&g.hasOwnProperty("path")&&(ae.path=g.path),ae},J.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},J),d),m.protobuf=((u={}).FileDescriptorSet=(H.prototype.file=o.emptyArray,H.create=function(g){return new H(g)},H.encode=function(g,ee){if(ee=ee||a.create(),g.file!=null&&g.file.length)for(var ae=0;ae<g.file.length;++ae)s.google.protobuf.FileDescriptorProto.encode(g.file[ae],ee.uint32(10).fork()).ldelim();return ee},H.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},H.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.FileDescriptorSet;g.pos<ae;){var X=g.uint32();X>>>3==1?(l.file&&l.file.length||(l.file=[]),l.file.push(s.google.protobuf.FileDescriptorProto.decode(g,g.uint32()))):g.skipType(7&X)}return l},H.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},H.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.file!=null&&g.hasOwnProperty("file")){if(!Array.isArray(g.file))return"file: array expected";for(var ee=0;ee<g.file.length;++ee){var ae=s.google.protobuf.FileDescriptorProto.verify(g.file[ee]);if(ae)return"file."+ae}}return null},H.fromObject=function(g){if(g instanceof s.google.protobuf.FileDescriptorSet)return g;var ee=new s.google.protobuf.FileDescriptorSet;if(g.file){if(!Array.isArray(g.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");ee.file=[];for(var ae=0;ae<g.file.length;++ae){if(typeof g.file[ae]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");ee.file[ae]=s.google.protobuf.FileDescriptorProto.fromObject(g.file[ae])}}return ee},H.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.file=[]),g.file&&g.file.length){ae.file=[];for(var l=0;l<g.file.length;++l)ae.file[l]=s.google.protobuf.FileDescriptorProto.toObject(g.file[l],ee)}return ae},H.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},H),u.FileDescriptorProto=(U.prototype.name="",U.prototype.package="",U.prototype.dependency=o.emptyArray,U.prototype.publicDependency=o.emptyArray,U.prototype.weakDependency=o.emptyArray,U.prototype.messageType=o.emptyArray,U.prototype.enumType=o.emptyArray,U.prototype.service=o.emptyArray,U.prototype.extension=o.emptyArray,U.prototype.options=null,U.prototype.sourceCodeInfo=null,U.prototype.syntax="",U.create=function(g){return new U(g)},U.encode=function(g,ee){if(ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.package!=null&&Object.hasOwnProperty.call(g,"package")&&ee.uint32(18).string(g.package),g.dependency!=null&&g.dependency.length)for(var ae=0;ae<g.dependency.length;++ae)ee.uint32(26).string(g.dependency[ae]);if(g.messageType!=null&&g.messageType.length)for(ae=0;ae<g.messageType.length;++ae)s.google.protobuf.DescriptorProto.encode(g.messageType[ae],ee.uint32(34).fork()).ldelim();if(g.enumType!=null&&g.enumType.length)for(ae=0;ae<g.enumType.length;++ae)s.google.protobuf.EnumDescriptorProto.encode(g.enumType[ae],ee.uint32(42).fork()).ldelim();if(g.service!=null&&g.service.length)for(ae=0;ae<g.service.length;++ae)s.google.protobuf.ServiceDescriptorProto.encode(g.service[ae],ee.uint32(50).fork()).ldelim();if(g.extension!=null&&g.extension.length)for(ae=0;ae<g.extension.length;++ae)s.google.protobuf.FieldDescriptorProto.encode(g.extension[ae],ee.uint32(58).fork()).ldelim();if(g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.FileOptions.encode(g.options,ee.uint32(66).fork()).ldelim(),g.sourceCodeInfo!=null&&Object.hasOwnProperty.call(g,"sourceCodeInfo")&&s.google.protobuf.SourceCodeInfo.encode(g.sourceCodeInfo,ee.uint32(74).fork()).ldelim(),g.publicDependency!=null&&g.publicDependency.length)for(ae=0;ae<g.publicDependency.length;++ae)ee.uint32(80).int32(g.publicDependency[ae]);if(g.weakDependency!=null&&g.weakDependency.length)for(ae=0;ae<g.weakDependency.length;++ae)ee.uint32(88).int32(g.weakDependency[ae]);return g.syntax!=null&&Object.hasOwnProperty.call(g,"syntax")&&ee.uint32(98).string(g.syntax),ee},U.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},U.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.FileDescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.package=g.string();break;case 3:l.dependency&&l.dependency.length||(l.dependency=[]),l.dependency.push(g.string());break;case 10:if(l.publicDependency&&l.publicDependency.length||(l.publicDependency=[]),(7&X)==2)for(var oe=g.uint32()+g.pos;g.pos<oe;)l.publicDependency.push(g.int32());else l.publicDependency.push(g.int32());break;case 11:if(l.weakDependency&&l.weakDependency.length||(l.weakDependency=[]),(7&X)==2)for(oe=g.uint32()+g.pos;g.pos<oe;)l.weakDependency.push(g.int32());else l.weakDependency.push(g.int32());break;case 4:l.messageType&&l.messageType.length||(l.messageType=[]),l.messageType.push(s.google.protobuf.DescriptorProto.decode(g,g.uint32()));break;case 5:l.enumType&&l.enumType.length||(l.enumType=[]),l.enumType.push(s.google.protobuf.EnumDescriptorProto.decode(g,g.uint32()));break;case 6:l.service&&l.service.length||(l.service=[]),l.service.push(s.google.protobuf.ServiceDescriptorProto.decode(g,g.uint32()));break;case 7:l.extension&&l.extension.length||(l.extension=[]),l.extension.push(s.google.protobuf.FieldDescriptorProto.decode(g,g.uint32()));break;case 8:l.options=s.google.protobuf.FileOptions.decode(g,g.uint32());break;case 9:l.sourceCodeInfo=s.google.protobuf.SourceCodeInfo.decode(g,g.uint32());break;case 12:l.syntax=g.string();break;default:g.skipType(7&X)}}return l},U.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},U.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name))return"name: string expected";if(g.package!=null&&g.hasOwnProperty("package")&&!o.isString(g.package))return"package: string expected";if(g.dependency!=null&&g.hasOwnProperty("dependency")){if(!Array.isArray(g.dependency))return"dependency: array expected";for(var ee=0;ee<g.dependency.length;++ee)if(!o.isString(g.dependency[ee]))return"dependency: string[] expected"}if(g.publicDependency!=null&&g.hasOwnProperty("publicDependency")){if(!Array.isArray(g.publicDependency))return"publicDependency: array expected";for(ee=0;ee<g.publicDependency.length;++ee)if(!o.isInteger(g.publicDependency[ee]))return"publicDependency: integer[] expected"}if(g.weakDependency!=null&&g.hasOwnProperty("weakDependency")){if(!Array.isArray(g.weakDependency))return"weakDependency: array expected";for(ee=0;ee<g.weakDependency.length;++ee)if(!o.isInteger(g.weakDependency[ee]))return"weakDependency: integer[] expected"}if(g.messageType!=null&&g.hasOwnProperty("messageType")){if(!Array.isArray(g.messageType))return"messageType: array expected";for(ee=0;ee<g.messageType.length;++ee)if(ae=s.google.protobuf.DescriptorProto.verify(g.messageType[ee]))return"messageType."+ae}if(g.enumType!=null&&g.hasOwnProperty("enumType")){if(!Array.isArray(g.enumType))return"enumType: array expected";for(ee=0;ee<g.enumType.length;++ee)if(ae=s.google.protobuf.EnumDescriptorProto.verify(g.enumType[ee]))return"enumType."+ae}if(g.service!=null&&g.hasOwnProperty("service")){if(!Array.isArray(g.service))return"service: array expected";for(ee=0;ee<g.service.length;++ee)if(ae=s.google.protobuf.ServiceDescriptorProto.verify(g.service[ee]))return"service."+ae}if(g.extension!=null&&g.hasOwnProperty("extension")){if(!Array.isArray(g.extension))return"extension: array expected";for(ee=0;ee<g.extension.length;++ee)if(ae=s.google.protobuf.FieldDescriptorProto.verify(g.extension[ee]))return"extension."+ae}var ae;return g.options!=null&&g.hasOwnProperty("options")&&(ae=s.google.protobuf.FileOptions.verify(g.options))?"options."+ae:g.sourceCodeInfo!=null&&g.hasOwnProperty("sourceCodeInfo")&&(ae=s.google.protobuf.SourceCodeInfo.verify(g.sourceCodeInfo))?"sourceCodeInfo."+ae:g.syntax!=null&&g.hasOwnProperty("syntax")&&!o.isString(g.syntax)?"syntax: string expected":null},U.fromObject=function(g){if(g instanceof s.google.protobuf.FileDescriptorProto)return g;var ee=new s.google.protobuf.FileDescriptorProto;if(g.name!=null&&(ee.name=String(g.name)),g.package!=null&&(ee.package=String(g.package)),g.dependency){if(!Array.isArray(g.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");ee.dependency=[];for(var ae=0;ae<g.dependency.length;++ae)ee.dependency[ae]=String(g.dependency[ae])}if(g.publicDependency){if(!Array.isArray(g.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(ee.publicDependency=[],ae=0;ae<g.publicDependency.length;++ae)ee.publicDependency[ae]=0|g.publicDependency[ae]}if(g.weakDependency){if(!Array.isArray(g.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(ee.weakDependency=[],ae=0;ae<g.weakDependency.length;++ae)ee.weakDependency[ae]=0|g.weakDependency[ae]}if(g.messageType){if(!Array.isArray(g.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(ee.messageType=[],ae=0;ae<g.messageType.length;++ae){if(typeof g.messageType[ae]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");ee.messageType[ae]=s.google.protobuf.DescriptorProto.fromObject(g.messageType[ae])}}if(g.enumType){if(!Array.isArray(g.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(ee.enumType=[],ae=0;ae<g.enumType.length;++ae){if(typeof g.enumType[ae]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");ee.enumType[ae]=s.google.protobuf.EnumDescriptorProto.fromObject(g.enumType[ae])}}if(g.service){if(!Array.isArray(g.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(ee.service=[],ae=0;ae<g.service.length;++ae){if(typeof g.service[ae]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");ee.service[ae]=s.google.protobuf.ServiceDescriptorProto.fromObject(g.service[ae])}}if(g.extension){if(!Array.isArray(g.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(ee.extension=[],ae=0;ae<g.extension.length;++ae){if(typeof g.extension[ae]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");ee.extension[ae]=s.google.protobuf.FieldDescriptorProto.fromObject(g.extension[ae])}}if(g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");ee.options=s.google.protobuf.FileOptions.fromObject(g.options)}if(g.sourceCodeInfo!=null){if(typeof g.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");ee.sourceCodeInfo=s.google.protobuf.SourceCodeInfo.fromObject(g.sourceCodeInfo)}return g.syntax!=null&&(ee.syntax=String(g.syntax)),ee},U.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.dependency=[],ae.messageType=[],ae.enumType=[],ae.service=[],ae.extension=[],ae.publicDependency=[],ae.weakDependency=[]),ee.defaults&&(ae.name="",ae.package="",ae.options=null,ae.sourceCodeInfo=null,ae.syntax=""),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.package!=null&&g.hasOwnProperty("package")&&(ae.package=g.package),g.dependency&&g.dependency.length){ae.dependency=[];for(var l=0;l<g.dependency.length;++l)ae.dependency[l]=g.dependency[l]}if(g.messageType&&g.messageType.length)for(ae.messageType=[],l=0;l<g.messageType.length;++l)ae.messageType[l]=s.google.protobuf.DescriptorProto.toObject(g.messageType[l],ee);if(g.enumType&&g.enumType.length)for(ae.enumType=[],l=0;l<g.enumType.length;++l)ae.enumType[l]=s.google.protobuf.EnumDescriptorProto.toObject(g.enumType[l],ee);if(g.service&&g.service.length)for(ae.service=[],l=0;l<g.service.length;++l)ae.service[l]=s.google.protobuf.ServiceDescriptorProto.toObject(g.service[l],ee);if(g.extension&&g.extension.length)for(ae.extension=[],l=0;l<g.extension.length;++l)ae.extension[l]=s.google.protobuf.FieldDescriptorProto.toObject(g.extension[l],ee);if(g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.FileOptions.toObject(g.options,ee)),g.sourceCodeInfo!=null&&g.hasOwnProperty("sourceCodeInfo")&&(ae.sourceCodeInfo=s.google.protobuf.SourceCodeInfo.toObject(g.sourceCodeInfo,ee)),g.publicDependency&&g.publicDependency.length)for(ae.publicDependency=[],l=0;l<g.publicDependency.length;++l)ae.publicDependency[l]=g.publicDependency[l];if(g.weakDependency&&g.weakDependency.length)for(ae.weakDependency=[],l=0;l<g.weakDependency.length;++l)ae.weakDependency[l]=g.weakDependency[l];return g.syntax!=null&&g.hasOwnProperty("syntax")&&(ae.syntax=g.syntax),ae},U.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},U),u.DescriptorProto=(P.prototype.name="",P.prototype.field=o.emptyArray,P.prototype.extension=o.emptyArray,P.prototype.nestedType=o.emptyArray,P.prototype.enumType=o.emptyArray,P.prototype.extensionRange=o.emptyArray,P.prototype.oneofDecl=o.emptyArray,P.prototype.options=null,P.prototype.reservedRange=o.emptyArray,P.prototype.reservedName=o.emptyArray,P.create=function(g){return new P(g)},P.encode=function(g,ee){if(ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.field!=null&&g.field.length)for(var ae=0;ae<g.field.length;++ae)s.google.protobuf.FieldDescriptorProto.encode(g.field[ae],ee.uint32(18).fork()).ldelim();if(g.nestedType!=null&&g.nestedType.length)for(ae=0;ae<g.nestedType.length;++ae)s.google.protobuf.DescriptorProto.encode(g.nestedType[ae],ee.uint32(26).fork()).ldelim();if(g.enumType!=null&&g.enumType.length)for(ae=0;ae<g.enumType.length;++ae)s.google.protobuf.EnumDescriptorProto.encode(g.enumType[ae],ee.uint32(34).fork()).ldelim();if(g.extensionRange!=null&&g.extensionRange.length)for(ae=0;ae<g.extensionRange.length;++ae)s.google.protobuf.DescriptorProto.ExtensionRange.encode(g.extensionRange[ae],ee.uint32(42).fork()).ldelim();if(g.extension!=null&&g.extension.length)for(ae=0;ae<g.extension.length;++ae)s.google.protobuf.FieldDescriptorProto.encode(g.extension[ae],ee.uint32(50).fork()).ldelim();if(g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.MessageOptions.encode(g.options,ee.uint32(58).fork()).ldelim(),g.oneofDecl!=null&&g.oneofDecl.length)for(ae=0;ae<g.oneofDecl.length;++ae)s.google.protobuf.OneofDescriptorProto.encode(g.oneofDecl[ae],ee.uint32(66).fork()).ldelim();if(g.reservedRange!=null&&g.reservedRange.length)for(ae=0;ae<g.reservedRange.length;++ae)s.google.protobuf.DescriptorProto.ReservedRange.encode(g.reservedRange[ae],ee.uint32(74).fork()).ldelim();if(g.reservedName!=null&&g.reservedName.length)for(ae=0;ae<g.reservedName.length;++ae)ee.uint32(82).string(g.reservedName[ae]);return ee},P.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},P.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.DescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.field&&l.field.length||(l.field=[]),l.field.push(s.google.protobuf.FieldDescriptorProto.decode(g,g.uint32()));break;case 6:l.extension&&l.extension.length||(l.extension=[]),l.extension.push(s.google.protobuf.FieldDescriptorProto.decode(g,g.uint32()));break;case 3:l.nestedType&&l.nestedType.length||(l.nestedType=[]),l.nestedType.push(s.google.protobuf.DescriptorProto.decode(g,g.uint32()));break;case 4:l.enumType&&l.enumType.length||(l.enumType=[]),l.enumType.push(s.google.protobuf.EnumDescriptorProto.decode(g,g.uint32()));break;case 5:l.extensionRange&&l.extensionRange.length||(l.extensionRange=[]),l.extensionRange.push(s.google.protobuf.DescriptorProto.ExtensionRange.decode(g,g.uint32()));break;case 8:l.oneofDecl&&l.oneofDecl.length||(l.oneofDecl=[]),l.oneofDecl.push(s.google.protobuf.OneofDescriptorProto.decode(g,g.uint32()));break;case 7:l.options=s.google.protobuf.MessageOptions.decode(g,g.uint32());break;case 9:l.reservedRange&&l.reservedRange.length||(l.reservedRange=[]),l.reservedRange.push(s.google.protobuf.DescriptorProto.ReservedRange.decode(g,g.uint32()));break;case 10:l.reservedName&&l.reservedName.length||(l.reservedName=[]),l.reservedName.push(g.string());break;default:g.skipType(7&X)}}return l},P.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},P.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name))return"name: string expected";if(g.field!=null&&g.hasOwnProperty("field")){if(!Array.isArray(g.field))return"field: array expected";for(var ee=0;ee<g.field.length;++ee)if(ae=s.google.protobuf.FieldDescriptorProto.verify(g.field[ee]))return"field."+ae}if(g.extension!=null&&g.hasOwnProperty("extension")){if(!Array.isArray(g.extension))return"extension: array expected";for(ee=0;ee<g.extension.length;++ee)if(ae=s.google.protobuf.FieldDescriptorProto.verify(g.extension[ee]))return"extension."+ae}if(g.nestedType!=null&&g.hasOwnProperty("nestedType")){if(!Array.isArray(g.nestedType))return"nestedType: array expected";for(ee=0;ee<g.nestedType.length;++ee)if(ae=s.google.protobuf.DescriptorProto.verify(g.nestedType[ee]))return"nestedType."+ae}if(g.enumType!=null&&g.hasOwnProperty("enumType")){if(!Array.isArray(g.enumType))return"enumType: array expected";for(ee=0;ee<g.enumType.length;++ee)if(ae=s.google.protobuf.EnumDescriptorProto.verify(g.enumType[ee]))return"enumType."+ae}if(g.extensionRange!=null&&g.hasOwnProperty("extensionRange")){if(!Array.isArray(g.extensionRange))return"extensionRange: array expected";for(ee=0;ee<g.extensionRange.length;++ee)if(ae=s.google.protobuf.DescriptorProto.ExtensionRange.verify(g.extensionRange[ee]))return"extensionRange."+ae}if(g.oneofDecl!=null&&g.hasOwnProperty("oneofDecl")){if(!Array.isArray(g.oneofDecl))return"oneofDecl: array expected";for(ee=0;ee<g.oneofDecl.length;++ee)if(ae=s.google.protobuf.OneofDescriptorProto.verify(g.oneofDecl[ee]))return"oneofDecl."+ae}if(g.options!=null&&g.hasOwnProperty("options")&&(ae=s.google.protobuf.MessageOptions.verify(g.options)))return"options."+ae;if(g.reservedRange!=null&&g.hasOwnProperty("reservedRange")){if(!Array.isArray(g.reservedRange))return"reservedRange: array expected";for(var ae,ee=0;ee<g.reservedRange.length;++ee)if(ae=s.google.protobuf.DescriptorProto.ReservedRange.verify(g.reservedRange[ee]))return"reservedRange."+ae}if(g.reservedName!=null&&g.hasOwnProperty("reservedName")){if(!Array.isArray(g.reservedName))return"reservedName: array expected";for(ee=0;ee<g.reservedName.length;++ee)if(!o.isString(g.reservedName[ee]))return"reservedName: string[] expected"}return null},P.fromObject=function(g){if(g instanceof s.google.protobuf.DescriptorProto)return g;var ee=new s.google.protobuf.DescriptorProto;if(g.name!=null&&(ee.name=String(g.name)),g.field){if(!Array.isArray(g.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");ee.field=[];for(var ae=0;ae<g.field.length;++ae){if(typeof g.field[ae]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");ee.field[ae]=s.google.protobuf.FieldDescriptorProto.fromObject(g.field[ae])}}if(g.extension){if(!Array.isArray(g.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(ee.extension=[],ae=0;ae<g.extension.length;++ae){if(typeof g.extension[ae]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");ee.extension[ae]=s.google.protobuf.FieldDescriptorProto.fromObject(g.extension[ae])}}if(g.nestedType){if(!Array.isArray(g.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(ee.nestedType=[],ae=0;ae<g.nestedType.length;++ae){if(typeof g.nestedType[ae]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");ee.nestedType[ae]=s.google.protobuf.DescriptorProto.fromObject(g.nestedType[ae])}}if(g.enumType){if(!Array.isArray(g.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(ee.enumType=[],ae=0;ae<g.enumType.length;++ae){if(typeof g.enumType[ae]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");ee.enumType[ae]=s.google.protobuf.EnumDescriptorProto.fromObject(g.enumType[ae])}}if(g.extensionRange){if(!Array.isArray(g.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(ee.extensionRange=[],ae=0;ae<g.extensionRange.length;++ae){if(typeof g.extensionRange[ae]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");ee.extensionRange[ae]=s.google.protobuf.DescriptorProto.ExtensionRange.fromObject(g.extensionRange[ae])}}if(g.oneofDecl){if(!Array.isArray(g.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(ee.oneofDecl=[],ae=0;ae<g.oneofDecl.length;++ae){if(typeof g.oneofDecl[ae]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");ee.oneofDecl[ae]=s.google.protobuf.OneofDescriptorProto.fromObject(g.oneofDecl[ae])}}if(g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");ee.options=s.google.protobuf.MessageOptions.fromObject(g.options)}if(g.reservedRange){if(!Array.isArray(g.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(ee.reservedRange=[],ae=0;ae<g.reservedRange.length;++ae){if(typeof g.reservedRange[ae]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");ee.reservedRange[ae]=s.google.protobuf.DescriptorProto.ReservedRange.fromObject(g.reservedRange[ae])}}if(g.reservedName){if(!Array.isArray(g.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(ee.reservedName=[],ae=0;ae<g.reservedName.length;++ae)ee.reservedName[ae]=String(g.reservedName[ae])}return ee},P.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.field=[],ae.nestedType=[],ae.enumType=[],ae.extensionRange=[],ae.extension=[],ae.oneofDecl=[],ae.reservedRange=[],ae.reservedName=[]),ee.defaults&&(ae.name="",ae.options=null),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.field&&g.field.length){ae.field=[];for(var l=0;l<g.field.length;++l)ae.field[l]=s.google.protobuf.FieldDescriptorProto.toObject(g.field[l],ee)}if(g.nestedType&&g.nestedType.length)for(ae.nestedType=[],l=0;l<g.nestedType.length;++l)ae.nestedType[l]=s.google.protobuf.DescriptorProto.toObject(g.nestedType[l],ee);if(g.enumType&&g.enumType.length)for(ae.enumType=[],l=0;l<g.enumType.length;++l)ae.enumType[l]=s.google.protobuf.EnumDescriptorProto.toObject(g.enumType[l],ee);if(g.extensionRange&&g.extensionRange.length)for(ae.extensionRange=[],l=0;l<g.extensionRange.length;++l)ae.extensionRange[l]=s.google.protobuf.DescriptorProto.ExtensionRange.toObject(g.extensionRange[l],ee);if(g.extension&&g.extension.length)for(ae.extension=[],l=0;l<g.extension.length;++l)ae.extension[l]=s.google.protobuf.FieldDescriptorProto.toObject(g.extension[l],ee);if(g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.MessageOptions.toObject(g.options,ee)),g.oneofDecl&&g.oneofDecl.length)for(ae.oneofDecl=[],l=0;l<g.oneofDecl.length;++l)ae.oneofDecl[l]=s.google.protobuf.OneofDescriptorProto.toObject(g.oneofDecl[l],ee);if(g.reservedRange&&g.reservedRange.length)for(ae.reservedRange=[],l=0;l<g.reservedRange.length;++l)ae.reservedRange[l]=s.google.protobuf.DescriptorProto.ReservedRange.toObject(g.reservedRange[l],ee);if(g.reservedName&&g.reservedName.length)for(ae.reservedName=[],l=0;l<g.reservedName.length;++l)ae.reservedName[l]=g.reservedName[l];return ae},P.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},P.ExtensionRange=(Z.prototype.start=0,Z.prototype.end=0,Z.prototype.options=null,Z.create=function(g){return new Z(g)},Z.encode=function(g,ee){return ee=ee||a.create(),g.start!=null&&Object.hasOwnProperty.call(g,"start")&&ee.uint32(8).int32(g.start),g.end!=null&&Object.hasOwnProperty.call(g,"end")&&ee.uint32(16).int32(g.end),g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.ExtensionRangeOptions.encode(g.options,ee.uint32(26).fork()).ldelim(),ee},Z.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Z.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.DescriptorProto.ExtensionRange;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.start=g.int32();break;case 2:l.end=g.int32();break;case 3:l.options=s.google.protobuf.ExtensionRangeOptions.decode(g,g.uint32());break;default:g.skipType(7&X)}}return l},Z.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Z.verify=function(g){return typeof g!="object"||g===null?"object expected":g.start!=null&&g.hasOwnProperty("start")&&!o.isInteger(g.start)?"start: integer expected":g.end!=null&&g.hasOwnProperty("end")&&!o.isInteger(g.end)?"end: integer expected":g.options!=null&&g.hasOwnProperty("options")&&(g=s.google.protobuf.ExtensionRangeOptions.verify(g.options),g)?"options."+g:null},Z.fromObject=function(g){if(g instanceof s.google.protobuf.DescriptorProto.ExtensionRange)return g;var ee=new s.google.protobuf.DescriptorProto.ExtensionRange;if(g.start!=null&&(ee.start=0|g.start),g.end!=null&&(ee.end=0|g.end),g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");ee.options=s.google.protobuf.ExtensionRangeOptions.fromObject(g.options)}return ee},Z.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.start=0,ae.end=0,ae.options=null),g.start!=null&&g.hasOwnProperty("start")&&(ae.start=g.start),g.end!=null&&g.hasOwnProperty("end")&&(ae.end=g.end),g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.ExtensionRangeOptions.toObject(g.options,ee)),ae},Z.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Z),P.ReservedRange=(ie.prototype.start=0,ie.prototype.end=0,ie.create=function(g){return new ie(g)},ie.encode=function(g,ee){return ee=ee||a.create(),g.start!=null&&Object.hasOwnProperty.call(g,"start")&&ee.uint32(8).int32(g.start),g.end!=null&&Object.hasOwnProperty.call(g,"end")&&ee.uint32(16).int32(g.end),ee},ie.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},ie.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.DescriptorProto.ReservedRange;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.start=g.int32();break;case 2:l.end=g.int32();break;default:g.skipType(7&X)}}return l},ie.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},ie.verify=function(g){return typeof g!="object"||g===null?"object expected":g.start!=null&&g.hasOwnProperty("start")&&!o.isInteger(g.start)?"start: integer expected":g.end!=null&&g.hasOwnProperty("end")&&!o.isInteger(g.end)?"end: integer expected":null},ie.fromObject=function(g){var ee;return g instanceof s.google.protobuf.DescriptorProto.ReservedRange?g:(ee=new s.google.protobuf.DescriptorProto.ReservedRange,g.start!=null&&(ee.start=0|g.start),g.end!=null&&(ee.end=0|g.end),ee)},ie.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.start=0,ae.end=0),g.start!=null&&g.hasOwnProperty("start")&&(ae.start=g.start),g.end!=null&&g.hasOwnProperty("end")&&(ae.end=g.end),ae},ie.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ie),P),u.ExtensionRangeOptions=(ue.prototype.uninterpretedOption=o.emptyArray,ue.create=function(g){return new ue(g)},ue.encode=function(g,ee){if(ee=ee||a.create(),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return ee},ue.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},ue.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.ExtensionRangeOptions;g.pos<ae;){var X=g.uint32();X>>>3==999?(l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()))):g.skipType(7&X)}return l},ue.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},ue.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return null},ue.fromObject=function(g){if(g instanceof s.google.protobuf.ExtensionRangeOptions)return g;var ee=new s.google.protobuf.ExtensionRangeOptions;if(g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return ee},ue.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return ae},ue.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ue),u.FieldDescriptorProto=(le.prototype.name="",le.prototype.number=0,le.prototype.label=1,le.prototype.type=1,le.prototype.typeName="",le.prototype.extendee="",le.prototype.defaultValue="",le.prototype.oneofIndex=0,le.prototype.jsonName="",le.prototype.options=null,le.prototype.proto3Optional=!1,le.create=function(g){return new le(g)},le.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.extendee!=null&&Object.hasOwnProperty.call(g,"extendee")&&ee.uint32(18).string(g.extendee),g.number!=null&&Object.hasOwnProperty.call(g,"number")&&ee.uint32(24).int32(g.number),g.label!=null&&Object.hasOwnProperty.call(g,"label")&&ee.uint32(32).int32(g.label),g.type!=null&&Object.hasOwnProperty.call(g,"type")&&ee.uint32(40).int32(g.type),g.typeName!=null&&Object.hasOwnProperty.call(g,"typeName")&&ee.uint32(50).string(g.typeName),g.defaultValue!=null&&Object.hasOwnProperty.call(g,"defaultValue")&&ee.uint32(58).string(g.defaultValue),g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.FieldOptions.encode(g.options,ee.uint32(66).fork()).ldelim(),g.oneofIndex!=null&&Object.hasOwnProperty.call(g,"oneofIndex")&&ee.uint32(72).int32(g.oneofIndex),g.jsonName!=null&&Object.hasOwnProperty.call(g,"jsonName")&&ee.uint32(82).string(g.jsonName),g.proto3Optional!=null&&Object.hasOwnProperty.call(g,"proto3Optional")&&ee.uint32(136).bool(g.proto3Optional),ee},le.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},le.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.FieldDescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 3:l.number=g.int32();break;case 4:l.label=g.int32();break;case 5:l.type=g.int32();break;case 6:l.typeName=g.string();break;case 2:l.extendee=g.string();break;case 7:l.defaultValue=g.string();break;case 9:l.oneofIndex=g.int32();break;case 10:l.jsonName=g.string();break;case 8:l.options=s.google.protobuf.FieldOptions.decode(g,g.uint32());break;case 17:l.proto3Optional=g.bool();break;default:g.skipType(7&X)}}return l},le.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},le.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name))return"name: string expected";if(g.number!=null&&g.hasOwnProperty("number")&&!o.isInteger(g.number))return"number: integer expected";if(g.label!=null&&g.hasOwnProperty("label"))switch(g.label){default:return"label: enum value expected";case 1:case 2:case 3:}if(g.type!=null&&g.hasOwnProperty("type"))switch(g.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:}if(g.typeName!=null&&g.hasOwnProperty("typeName")&&!o.isString(g.typeName))return"typeName: string expected";if(g.extendee!=null&&g.hasOwnProperty("extendee")&&!o.isString(g.extendee))return"extendee: string expected";if(g.defaultValue!=null&&g.hasOwnProperty("defaultValue")&&!o.isString(g.defaultValue))return"defaultValue: string expected";if(g.oneofIndex!=null&&g.hasOwnProperty("oneofIndex")&&!o.isInteger(g.oneofIndex))return"oneofIndex: integer expected";if(g.jsonName!=null&&g.hasOwnProperty("jsonName")&&!o.isString(g.jsonName))return"jsonName: string expected";if(g.options!=null&&g.hasOwnProperty("options")){var ee=s.google.protobuf.FieldOptions.verify(g.options);if(ee)return"options."+ee}return g.proto3Optional!=null&&g.hasOwnProperty("proto3Optional")&&typeof g.proto3Optional!="boolean"?"proto3Optional: boolean expected":null},le.fromObject=function(g){if(g instanceof s.google.protobuf.FieldDescriptorProto)return g;var ee=new s.google.protobuf.FieldDescriptorProto;switch(g.name!=null&&(ee.name=String(g.name)),g.number!=null&&(ee.number=0|g.number),g.label){case"LABEL_OPTIONAL":case 1:ee.label=1;break;case"LABEL_REQUIRED":case 2:ee.label=2;break;case"LABEL_REPEATED":case 3:ee.label=3}switch(g.type){case"TYPE_DOUBLE":case 1:ee.type=1;break;case"TYPE_FLOAT":case 2:ee.type=2;break;case"TYPE_INT64":case 3:ee.type=3;break;case"TYPE_UINT64":case 4:ee.type=4;break;case"TYPE_INT32":case 5:ee.type=5;break;case"TYPE_FIXED64":case 6:ee.type=6;break;case"TYPE_FIXED32":case 7:ee.type=7;break;case"TYPE_BOOL":case 8:ee.type=8;break;case"TYPE_STRING":case 9:ee.type=9;break;case"TYPE_GROUP":case 10:ee.type=10;break;case"TYPE_MESSAGE":case 11:ee.type=11;break;case"TYPE_BYTES":case 12:ee.type=12;break;case"TYPE_UINT32":case 13:ee.type=13;break;case"TYPE_ENUM":case 14:ee.type=14;break;case"TYPE_SFIXED32":case 15:ee.type=15;break;case"TYPE_SFIXED64":case 16:ee.type=16;break;case"TYPE_SINT32":case 17:ee.type=17;break;case"TYPE_SINT64":case 18:ee.type=18}if(g.typeName!=null&&(ee.typeName=String(g.typeName)),g.extendee!=null&&(ee.extendee=String(g.extendee)),g.defaultValue!=null&&(ee.defaultValue=String(g.defaultValue)),g.oneofIndex!=null&&(ee.oneofIndex=0|g.oneofIndex),g.jsonName!=null&&(ee.jsonName=String(g.jsonName)),g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");ee.options=s.google.protobuf.FieldOptions.fromObject(g.options)}return g.proto3Optional!=null&&(ee.proto3Optional=!!g.proto3Optional),ee},le.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name="",ae.extendee="",ae.number=0,ae.label=ee.enums===String?"LABEL_OPTIONAL":1,ae.type=ee.enums===String?"TYPE_DOUBLE":1,ae.typeName="",ae.defaultValue="",ae.options=null,ae.oneofIndex=0,ae.jsonName="",ae.proto3Optional=!1),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.extendee!=null&&g.hasOwnProperty("extendee")&&(ae.extendee=g.extendee),g.number!=null&&g.hasOwnProperty("number")&&(ae.number=g.number),g.label!=null&&g.hasOwnProperty("label")&&(ae.label=ee.enums===String?s.google.protobuf.FieldDescriptorProto.Label[g.label]:g.label),g.type!=null&&g.hasOwnProperty("type")&&(ae.type=ee.enums===String?s.google.protobuf.FieldDescriptorProto.Type[g.type]:g.type),g.typeName!=null&&g.hasOwnProperty("typeName")&&(ae.typeName=g.typeName),g.defaultValue!=null&&g.hasOwnProperty("defaultValue")&&(ae.defaultValue=g.defaultValue),g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.FieldOptions.toObject(g.options,ee)),g.oneofIndex!=null&&g.hasOwnProperty("oneofIndex")&&(ae.oneofIndex=g.oneofIndex),g.jsonName!=null&&g.hasOwnProperty("jsonName")&&(ae.jsonName=g.jsonName),g.proto3Optional!=null&&g.hasOwnProperty("proto3Optional")&&(ae.proto3Optional=g.proto3Optional),ae},le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},le.Type=(d={},(r=Object.create(d))[d[1]="TYPE_DOUBLE"]=1,r[d[2]="TYPE_FLOAT"]=2,r[d[3]="TYPE_INT64"]=3,r[d[4]="TYPE_UINT64"]=4,r[d[5]="TYPE_INT32"]=5,r[d[6]="TYPE_FIXED64"]=6,r[d[7]="TYPE_FIXED32"]=7,r[d[8]="TYPE_BOOL"]=8,r[d[9]="TYPE_STRING"]=9,r[d[10]="TYPE_GROUP"]=10,r[d[11]="TYPE_MESSAGE"]=11,r[d[12]="TYPE_BYTES"]=12,r[d[13]="TYPE_UINT32"]=13,r[d[14]="TYPE_ENUM"]=14,r[d[15]="TYPE_SFIXED32"]=15,r[d[16]="TYPE_SFIXED64"]=16,r[d[17]="TYPE_SINT32"]=17,r[d[18]="TYPE_SINT64"]=18,r),le.Label=(d={},(r=Object.create(d))[d[1]="LABEL_OPTIONAL"]=1,r[d[2]="LABEL_REQUIRED"]=2,r[d[3]="LABEL_REPEATED"]=3,r),le),u.OneofDescriptorProto=(ne.prototype.name="",ne.prototype.options=null,ne.create=function(g){return new ne(g)},ne.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.OneofOptions.encode(g.options,ee.uint32(18).fork()).ldelim(),ee},ne.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},ne.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.OneofDescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.options=s.google.protobuf.OneofOptions.decode(g,g.uint32());break;default:g.skipType(7&X)}}return l},ne.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},ne.verify=function(g){return typeof g!="object"||g===null?"object expected":g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name)?"name: string expected":g.options!=null&&g.hasOwnProperty("options")&&(g=s.google.protobuf.OneofOptions.verify(g.options),g)?"options."+g:null},ne.fromObject=function(g){if(g instanceof s.google.protobuf.OneofDescriptorProto)return g;var ee=new s.google.protobuf.OneofDescriptorProto;if(g.name!=null&&(ee.name=String(g.name)),g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");ee.options=s.google.protobuf.OneofOptions.fromObject(g.options)}return ee},ne.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name="",ae.options=null),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.OneofOptions.toObject(g.options,ee)),ae},ne.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ne),u.EnumDescriptorProto=(ye.prototype.name="",ye.prototype.value=o.emptyArray,ye.prototype.options=null,ye.prototype.reservedRange=o.emptyArray,ye.prototype.reservedName=o.emptyArray,ye.create=function(g){return new ye(g)},ye.encode=function(g,ee){if(ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.value!=null&&g.value.length)for(var ae=0;ae<g.value.length;++ae)s.google.protobuf.EnumValueDescriptorProto.encode(g.value[ae],ee.uint32(18).fork()).ldelim();if(g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.EnumOptions.encode(g.options,ee.uint32(26).fork()).ldelim(),g.reservedRange!=null&&g.reservedRange.length)for(ae=0;ae<g.reservedRange.length;++ae)s.google.protobuf.EnumDescriptorProto.EnumReservedRange.encode(g.reservedRange[ae],ee.uint32(34).fork()).ldelim();if(g.reservedName!=null&&g.reservedName.length)for(ae=0;ae<g.reservedName.length;++ae)ee.uint32(42).string(g.reservedName[ae]);return ee},ye.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},ye.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.EnumDescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.value&&l.value.length||(l.value=[]),l.value.push(s.google.protobuf.EnumValueDescriptorProto.decode(g,g.uint32()));break;case 3:l.options=s.google.protobuf.EnumOptions.decode(g,g.uint32());break;case 4:l.reservedRange&&l.reservedRange.length||(l.reservedRange=[]),l.reservedRange.push(s.google.protobuf.EnumDescriptorProto.EnumReservedRange.decode(g,g.uint32()));break;case 5:l.reservedName&&l.reservedName.length||(l.reservedName=[]),l.reservedName.push(g.string());break;default:g.skipType(7&X)}}return l},ye.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},ye.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name))return"name: string expected";if(g.value!=null&&g.hasOwnProperty("value")){if(!Array.isArray(g.value))return"value: array expected";for(var ee=0;ee<g.value.length;++ee)if(ae=s.google.protobuf.EnumValueDescriptorProto.verify(g.value[ee]))return"value."+ae}if(g.options!=null&&g.hasOwnProperty("options")&&(ae=s.google.protobuf.EnumOptions.verify(g.options)))return"options."+ae;if(g.reservedRange!=null&&g.hasOwnProperty("reservedRange")){if(!Array.isArray(g.reservedRange))return"reservedRange: array expected";for(var ae,ee=0;ee<g.reservedRange.length;++ee)if(ae=s.google.protobuf.EnumDescriptorProto.EnumReservedRange.verify(g.reservedRange[ee]))return"reservedRange."+ae}if(g.reservedName!=null&&g.hasOwnProperty("reservedName")){if(!Array.isArray(g.reservedName))return"reservedName: array expected";for(ee=0;ee<g.reservedName.length;++ee)if(!o.isString(g.reservedName[ee]))return"reservedName: string[] expected"}return null},ye.fromObject=function(g){if(g instanceof s.google.protobuf.EnumDescriptorProto)return g;var ee=new s.google.protobuf.EnumDescriptorProto;if(g.name!=null&&(ee.name=String(g.name)),g.value){if(!Array.isArray(g.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");ee.value=[];for(var ae=0;ae<g.value.length;++ae){if(typeof g.value[ae]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");ee.value[ae]=s.google.protobuf.EnumValueDescriptorProto.fromObject(g.value[ae])}}if(g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");ee.options=s.google.protobuf.EnumOptions.fromObject(g.options)}if(g.reservedRange){if(!Array.isArray(g.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(ee.reservedRange=[],ae=0;ae<g.reservedRange.length;++ae){if(typeof g.reservedRange[ae]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");ee.reservedRange[ae]=s.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(g.reservedRange[ae])}}if(g.reservedName){if(!Array.isArray(g.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(ee.reservedName=[],ae=0;ae<g.reservedName.length;++ae)ee.reservedName[ae]=String(g.reservedName[ae])}return ee},ye.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.value=[],ae.reservedRange=[],ae.reservedName=[]),ee.defaults&&(ae.name="",ae.options=null),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.value&&g.value.length){ae.value=[];for(var l=0;l<g.value.length;++l)ae.value[l]=s.google.protobuf.EnumValueDescriptorProto.toObject(g.value[l],ee)}if(g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.EnumOptions.toObject(g.options,ee)),g.reservedRange&&g.reservedRange.length)for(ae.reservedRange=[],l=0;l<g.reservedRange.length;++l)ae.reservedRange[l]=s.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(g.reservedRange[l],ee);if(g.reservedName&&g.reservedName.length)for(ae.reservedName=[],l=0;l<g.reservedName.length;++l)ae.reservedName[l]=g.reservedName[l];return ae},ye.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ye.EnumReservedRange=(fe.prototype.start=0,fe.prototype.end=0,fe.create=function(g){return new fe(g)},fe.encode=function(g,ee){return ee=ee||a.create(),g.start!=null&&Object.hasOwnProperty.call(g,"start")&&ee.uint32(8).int32(g.start),g.end!=null&&Object.hasOwnProperty.call(g,"end")&&ee.uint32(16).int32(g.end),ee},fe.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},fe.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.EnumDescriptorProto.EnumReservedRange;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.start=g.int32();break;case 2:l.end=g.int32();break;default:g.skipType(7&X)}}return l},fe.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},fe.verify=function(g){return typeof g!="object"||g===null?"object expected":g.start!=null&&g.hasOwnProperty("start")&&!o.isInteger(g.start)?"start: integer expected":g.end!=null&&g.hasOwnProperty("end")&&!o.isInteger(g.end)?"end: integer expected":null},fe.fromObject=function(g){var ee;return g instanceof s.google.protobuf.EnumDescriptorProto.EnumReservedRange?g:(ee=new s.google.protobuf.EnumDescriptorProto.EnumReservedRange,g.start!=null&&(ee.start=0|g.start),g.end!=null&&(ee.end=0|g.end),ee)},fe.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.start=0,ae.end=0),g.start!=null&&g.hasOwnProperty("start")&&(ae.start=g.start),g.end!=null&&g.hasOwnProperty("end")&&(ae.end=g.end),ae},fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},fe),ye),u.EnumValueDescriptorProto=(Te.prototype.name="",Te.prototype.number=0,Te.prototype.options=null,Te.create=function(g){return new Te(g)},Te.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.number!=null&&Object.hasOwnProperty.call(g,"number")&&ee.uint32(16).int32(g.number),g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.EnumValueOptions.encode(g.options,ee.uint32(26).fork()).ldelim(),ee},Te.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Te.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.EnumValueDescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.number=g.int32();break;case 3:l.options=s.google.protobuf.EnumValueOptions.decode(g,g.uint32());break;default:g.skipType(7&X)}}return l},Te.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Te.verify=function(g){return typeof g!="object"||g===null?"object expected":g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name)?"name: string expected":g.number!=null&&g.hasOwnProperty("number")&&!o.isInteger(g.number)?"number: integer expected":g.options!=null&&g.hasOwnProperty("options")&&(g=s.google.protobuf.EnumValueOptions.verify(g.options),g)?"options."+g:null},Te.fromObject=function(g){if(g instanceof s.google.protobuf.EnumValueDescriptorProto)return g;var ee=new s.google.protobuf.EnumValueDescriptorProto;if(g.name!=null&&(ee.name=String(g.name)),g.number!=null&&(ee.number=0|g.number),g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");ee.options=s.google.protobuf.EnumValueOptions.fromObject(g.options)}return ee},Te.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name="",ae.number=0,ae.options=null),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.number!=null&&g.hasOwnProperty("number")&&(ae.number=g.number),g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.EnumValueOptions.toObject(g.options,ee)),ae},Te.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Te),u.ServiceDescriptorProto=(Ae.prototype.name="",Ae.prototype.method=o.emptyArray,Ae.prototype.options=null,Ae.create=function(g){return new Ae(g)},Ae.encode=function(g,ee){if(ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.method!=null&&g.method.length)for(var ae=0;ae<g.method.length;++ae)s.google.protobuf.MethodDescriptorProto.encode(g.method[ae],ee.uint32(18).fork()).ldelim();return g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.ServiceOptions.encode(g.options,ee.uint32(26).fork()).ldelim(),ee},Ae.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Ae.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.ServiceDescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.method&&l.method.length||(l.method=[]),l.method.push(s.google.protobuf.MethodDescriptorProto.decode(g,g.uint32()));break;case 3:l.options=s.google.protobuf.ServiceOptions.decode(g,g.uint32());break;default:g.skipType(7&X)}}return l},Ae.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Ae.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name))return"name: string expected";if(g.method!=null&&g.hasOwnProperty("method")){if(!Array.isArray(g.method))return"method: array expected";for(var ee=0;ee<g.method.length;++ee)if(ae=s.google.protobuf.MethodDescriptorProto.verify(g.method[ee]))return"method."+ae}var ae;return g.options!=null&&g.hasOwnProperty("options")&&(ae=s.google.protobuf.ServiceOptions.verify(g.options))?"options."+ae:null},Ae.fromObject=function(g){if(g instanceof s.google.protobuf.ServiceDescriptorProto)return g;var ee=new s.google.protobuf.ServiceDescriptorProto;if(g.name!=null&&(ee.name=String(g.name)),g.method){if(!Array.isArray(g.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");ee.method=[];for(var ae=0;ae<g.method.length;++ae){if(typeof g.method[ae]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");ee.method[ae]=s.google.protobuf.MethodDescriptorProto.fromObject(g.method[ae])}}if(g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");ee.options=s.google.protobuf.ServiceOptions.fromObject(g.options)}return ee},Ae.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.method=[]),ee.defaults&&(ae.name="",ae.options=null),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.method&&g.method.length){ae.method=[];for(var l=0;l<g.method.length;++l)ae.method[l]=s.google.protobuf.MethodDescriptorProto.toObject(g.method[l],ee)}return g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.ServiceOptions.toObject(g.options,ee)),ae},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ae),u.MethodDescriptorProto=(Se.prototype.name="",Se.prototype.inputType="",Se.prototype.outputType="",Se.prototype.options=null,Se.prototype.clientStreaming=!1,Se.prototype.serverStreaming=!1,Se.create=function(g){return new Se(g)},Se.encode=function(g,ee){return ee=ee||a.create(),g.name!=null&&Object.hasOwnProperty.call(g,"name")&&ee.uint32(10).string(g.name),g.inputType!=null&&Object.hasOwnProperty.call(g,"inputType")&&ee.uint32(18).string(g.inputType),g.outputType!=null&&Object.hasOwnProperty.call(g,"outputType")&&ee.uint32(26).string(g.outputType),g.options!=null&&Object.hasOwnProperty.call(g,"options")&&s.google.protobuf.MethodOptions.encode(g.options,ee.uint32(34).fork()).ldelim(),g.clientStreaming!=null&&Object.hasOwnProperty.call(g,"clientStreaming")&&ee.uint32(40).bool(g.clientStreaming),g.serverStreaming!=null&&Object.hasOwnProperty.call(g,"serverStreaming")&&ee.uint32(48).bool(g.serverStreaming),ee},Se.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Se.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.MethodDescriptorProto;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.name=g.string();break;case 2:l.inputType=g.string();break;case 3:l.outputType=g.string();break;case 4:l.options=s.google.protobuf.MethodOptions.decode(g,g.uint32());break;case 5:l.clientStreaming=g.bool();break;case 6:l.serverStreaming=g.bool();break;default:g.skipType(7&X)}}return l},Se.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Se.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.name!=null&&g.hasOwnProperty("name")&&!o.isString(g.name))return"name: string expected";if(g.inputType!=null&&g.hasOwnProperty("inputType")&&!o.isString(g.inputType))return"inputType: string expected";if(g.outputType!=null&&g.hasOwnProperty("outputType")&&!o.isString(g.outputType))return"outputType: string expected";if(g.options!=null&&g.hasOwnProperty("options")){var ee=s.google.protobuf.MethodOptions.verify(g.options);if(ee)return"options."+ee}return g.clientStreaming!=null&&g.hasOwnProperty("clientStreaming")&&typeof g.clientStreaming!="boolean"?"clientStreaming: boolean expected":g.serverStreaming!=null&&g.hasOwnProperty("serverStreaming")&&typeof g.serverStreaming!="boolean"?"serverStreaming: boolean expected":null},Se.fromObject=function(g){if(g instanceof s.google.protobuf.MethodDescriptorProto)return g;var ee=new s.google.protobuf.MethodDescriptorProto;if(g.name!=null&&(ee.name=String(g.name)),g.inputType!=null&&(ee.inputType=String(g.inputType)),g.outputType!=null&&(ee.outputType=String(g.outputType)),g.options!=null){if(typeof g.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");ee.options=s.google.protobuf.MethodOptions.fromObject(g.options)}return g.clientStreaming!=null&&(ee.clientStreaming=!!g.clientStreaming),g.serverStreaming!=null&&(ee.serverStreaming=!!g.serverStreaming),ee},Se.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.name="",ae.inputType="",ae.outputType="",ae.options=null,ae.clientStreaming=!1,ae.serverStreaming=!1),g.name!=null&&g.hasOwnProperty("name")&&(ae.name=g.name),g.inputType!=null&&g.hasOwnProperty("inputType")&&(ae.inputType=g.inputType),g.outputType!=null&&g.hasOwnProperty("outputType")&&(ae.outputType=g.outputType),g.options!=null&&g.hasOwnProperty("options")&&(ae.options=s.google.protobuf.MethodOptions.toObject(g.options,ee)),g.clientStreaming!=null&&g.hasOwnProperty("clientStreaming")&&(ae.clientStreaming=g.clientStreaming),g.serverStreaming!=null&&g.hasOwnProperty("serverStreaming")&&(ae.serverStreaming=g.serverStreaming),ae},Se.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Se),u.FileOptions=(be.prototype.javaPackage="",be.prototype.javaOuterClassname="",be.prototype.javaMultipleFiles=!1,be.prototype.javaGenerateEqualsAndHash=!1,be.prototype.javaStringCheckUtf8=!1,be.prototype.optimizeFor=1,be.prototype.goPackage="",be.prototype.ccGenericServices=!1,be.prototype.javaGenericServices=!1,be.prototype.pyGenericServices=!1,be.prototype.phpGenericServices=!1,be.prototype.deprecated=!1,be.prototype.ccEnableArenas=!0,be.prototype.objcClassPrefix="",be.prototype.csharpNamespace="",be.prototype.swiftPrefix="",be.prototype.phpClassPrefix="",be.prototype.phpNamespace="",be.prototype.phpMetadataNamespace="",be.prototype.rubyPackage="",be.prototype.uninterpretedOption=o.emptyArray,be.create=function(g){return new be(g)},be.encode=function(g,ee){if(ee=ee||a.create(),g.javaPackage!=null&&Object.hasOwnProperty.call(g,"javaPackage")&&ee.uint32(10).string(g.javaPackage),g.javaOuterClassname!=null&&Object.hasOwnProperty.call(g,"javaOuterClassname")&&ee.uint32(66).string(g.javaOuterClassname),g.optimizeFor!=null&&Object.hasOwnProperty.call(g,"optimizeFor")&&ee.uint32(72).int32(g.optimizeFor),g.javaMultipleFiles!=null&&Object.hasOwnProperty.call(g,"javaMultipleFiles")&&ee.uint32(80).bool(g.javaMultipleFiles),g.goPackage!=null&&Object.hasOwnProperty.call(g,"goPackage")&&ee.uint32(90).string(g.goPackage),g.ccGenericServices!=null&&Object.hasOwnProperty.call(g,"ccGenericServices")&&ee.uint32(128).bool(g.ccGenericServices),g.javaGenericServices!=null&&Object.hasOwnProperty.call(g,"javaGenericServices")&&ee.uint32(136).bool(g.javaGenericServices),g.pyGenericServices!=null&&Object.hasOwnProperty.call(g,"pyGenericServices")&&ee.uint32(144).bool(g.pyGenericServices),g.javaGenerateEqualsAndHash!=null&&Object.hasOwnProperty.call(g,"javaGenerateEqualsAndHash")&&ee.uint32(160).bool(g.javaGenerateEqualsAndHash),g.deprecated!=null&&Object.hasOwnProperty.call(g,"deprecated")&&ee.uint32(184).bool(g.deprecated),g.javaStringCheckUtf8!=null&&Object.hasOwnProperty.call(g,"javaStringCheckUtf8")&&ee.uint32(216).bool(g.javaStringCheckUtf8),g.ccEnableArenas!=null&&Object.hasOwnProperty.call(g,"ccEnableArenas")&&ee.uint32(248).bool(g.ccEnableArenas),g.objcClassPrefix!=null&&Object.hasOwnProperty.call(g,"objcClassPrefix")&&ee.uint32(290).string(g.objcClassPrefix),g.csharpNamespace!=null&&Object.hasOwnProperty.call(g,"csharpNamespace")&&ee.uint32(298).string(g.csharpNamespace),g.swiftPrefix!=null&&Object.hasOwnProperty.call(g,"swiftPrefix")&&ee.uint32(314).string(g.swiftPrefix),g.phpClassPrefix!=null&&Object.hasOwnProperty.call(g,"phpClassPrefix")&&ee.uint32(322).string(g.phpClassPrefix),g.phpNamespace!=null&&Object.hasOwnProperty.call(g,"phpNamespace")&&ee.uint32(330).string(g.phpNamespace),g.phpGenericServices!=null&&Object.hasOwnProperty.call(g,"phpGenericServices")&&ee.uint32(336).bool(g.phpGenericServices),g.phpMetadataNamespace!=null&&Object.hasOwnProperty.call(g,"phpMetadataNamespace")&&ee.uint32(354).string(g.phpMetadataNamespace),g.rubyPackage!=null&&Object.hasOwnProperty.call(g,"rubyPackage")&&ee.uint32(362).string(g.rubyPackage),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return ee},be.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},be.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.FileOptions;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.javaPackage=g.string();break;case 8:l.javaOuterClassname=g.string();break;case 10:l.javaMultipleFiles=g.bool();break;case 20:l.javaGenerateEqualsAndHash=g.bool();break;case 27:l.javaStringCheckUtf8=g.bool();break;case 9:l.optimizeFor=g.int32();break;case 11:l.goPackage=g.string();break;case 16:l.ccGenericServices=g.bool();break;case 17:l.javaGenericServices=g.bool();break;case 18:l.pyGenericServices=g.bool();break;case 42:l.phpGenericServices=g.bool();break;case 23:l.deprecated=g.bool();break;case 31:l.ccEnableArenas=g.bool();break;case 36:l.objcClassPrefix=g.string();break;case 37:l.csharpNamespace=g.string();break;case 39:l.swiftPrefix=g.string();break;case 40:l.phpClassPrefix=g.string();break;case 41:l.phpNamespace=g.string();break;case 44:l.phpMetadataNamespace=g.string();break;case 45:l.rubyPackage=g.string();break;case 999:l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()));break;default:g.skipType(7&X)}}return l},be.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},be.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.javaPackage!=null&&g.hasOwnProperty("javaPackage")&&!o.isString(g.javaPackage))return"javaPackage: string expected";if(g.javaOuterClassname!=null&&g.hasOwnProperty("javaOuterClassname")&&!o.isString(g.javaOuterClassname))return"javaOuterClassname: string expected";if(g.javaMultipleFiles!=null&&g.hasOwnProperty("javaMultipleFiles")&&typeof g.javaMultipleFiles!="boolean")return"javaMultipleFiles: boolean expected";if(g.javaGenerateEqualsAndHash!=null&&g.hasOwnProperty("javaGenerateEqualsAndHash")&&typeof g.javaGenerateEqualsAndHash!="boolean")return"javaGenerateEqualsAndHash: boolean expected";if(g.javaStringCheckUtf8!=null&&g.hasOwnProperty("javaStringCheckUtf8")&&typeof g.javaStringCheckUtf8!="boolean")return"javaStringCheckUtf8: boolean expected";if(g.optimizeFor!=null&&g.hasOwnProperty("optimizeFor"))switch(g.optimizeFor){default:return"optimizeFor: enum value expected";case 1:case 2:case 3:}if(g.goPackage!=null&&g.hasOwnProperty("goPackage")&&!o.isString(g.goPackage))return"goPackage: string expected";if(g.ccGenericServices!=null&&g.hasOwnProperty("ccGenericServices")&&typeof g.ccGenericServices!="boolean")return"ccGenericServices: boolean expected";if(g.javaGenericServices!=null&&g.hasOwnProperty("javaGenericServices")&&typeof g.javaGenericServices!="boolean")return"javaGenericServices: boolean expected";if(g.pyGenericServices!=null&&g.hasOwnProperty("pyGenericServices")&&typeof g.pyGenericServices!="boolean")return"pyGenericServices: boolean expected";if(g.phpGenericServices!=null&&g.hasOwnProperty("phpGenericServices")&&typeof g.phpGenericServices!="boolean")return"phpGenericServices: boolean expected";if(g.deprecated!=null&&g.hasOwnProperty("deprecated")&&typeof g.deprecated!="boolean")return"deprecated: boolean expected";if(g.ccEnableArenas!=null&&g.hasOwnProperty("ccEnableArenas")&&typeof g.ccEnableArenas!="boolean")return"ccEnableArenas: boolean expected";if(g.objcClassPrefix!=null&&g.hasOwnProperty("objcClassPrefix")&&!o.isString(g.objcClassPrefix))return"objcClassPrefix: string expected";if(g.csharpNamespace!=null&&g.hasOwnProperty("csharpNamespace")&&!o.isString(g.csharpNamespace))return"csharpNamespace: string expected";if(g.swiftPrefix!=null&&g.hasOwnProperty("swiftPrefix")&&!o.isString(g.swiftPrefix))return"swiftPrefix: string expected";if(g.phpClassPrefix!=null&&g.hasOwnProperty("phpClassPrefix")&&!o.isString(g.phpClassPrefix))return"phpClassPrefix: string expected";if(g.phpNamespace!=null&&g.hasOwnProperty("phpNamespace")&&!o.isString(g.phpNamespace))return"phpNamespace: string expected";if(g.phpMetadataNamespace!=null&&g.hasOwnProperty("phpMetadataNamespace")&&!o.isString(g.phpMetadataNamespace))return"phpMetadataNamespace: string expected";if(g.rubyPackage!=null&&g.hasOwnProperty("rubyPackage")&&!o.isString(g.rubyPackage))return"rubyPackage: string expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return null},be.fromObject=function(g){if(g instanceof s.google.protobuf.FileOptions)return g;var ee=new s.google.protobuf.FileOptions;switch(g.javaPackage!=null&&(ee.javaPackage=String(g.javaPackage)),g.javaOuterClassname!=null&&(ee.javaOuterClassname=String(g.javaOuterClassname)),g.javaMultipleFiles!=null&&(ee.javaMultipleFiles=!!g.javaMultipleFiles),g.javaGenerateEqualsAndHash!=null&&(ee.javaGenerateEqualsAndHash=!!g.javaGenerateEqualsAndHash),g.javaStringCheckUtf8!=null&&(ee.javaStringCheckUtf8=!!g.javaStringCheckUtf8),g.optimizeFor){case"SPEED":case 1:ee.optimizeFor=1;break;case"CODE_SIZE":case 2:ee.optimizeFor=2;break;case"LITE_RUNTIME":case 3:ee.optimizeFor=3}if(g.goPackage!=null&&(ee.goPackage=String(g.goPackage)),g.ccGenericServices!=null&&(ee.ccGenericServices=!!g.ccGenericServices),g.javaGenericServices!=null&&(ee.javaGenericServices=!!g.javaGenericServices),g.pyGenericServices!=null&&(ee.pyGenericServices=!!g.pyGenericServices),g.phpGenericServices!=null&&(ee.phpGenericServices=!!g.phpGenericServices),g.deprecated!=null&&(ee.deprecated=!!g.deprecated),g.ccEnableArenas!=null&&(ee.ccEnableArenas=!!g.ccEnableArenas),g.objcClassPrefix!=null&&(ee.objcClassPrefix=String(g.objcClassPrefix)),g.csharpNamespace!=null&&(ee.csharpNamespace=String(g.csharpNamespace)),g.swiftPrefix!=null&&(ee.swiftPrefix=String(g.swiftPrefix)),g.phpClassPrefix!=null&&(ee.phpClassPrefix=String(g.phpClassPrefix)),g.phpNamespace!=null&&(ee.phpNamespace=String(g.phpNamespace)),g.phpMetadataNamespace!=null&&(ee.phpMetadataNamespace=String(g.phpMetadataNamespace)),g.rubyPackage!=null&&(ee.rubyPackage=String(g.rubyPackage)),g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return ee},be.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),ee.defaults&&(ae.javaPackage="",ae.javaOuterClassname="",ae.optimizeFor=ee.enums===String?"SPEED":1,ae.javaMultipleFiles=!1,ae.goPackage="",ae.ccGenericServices=!1,ae.javaGenericServices=!1,ae.pyGenericServices=!1,ae.javaGenerateEqualsAndHash=!1,ae.deprecated=!1,ae.javaStringCheckUtf8=!1,ae.ccEnableArenas=!0,ae.objcClassPrefix="",ae.csharpNamespace="",ae.swiftPrefix="",ae.phpClassPrefix="",ae.phpNamespace="",ae.phpGenericServices=!1,ae.phpMetadataNamespace="",ae.rubyPackage=""),g.javaPackage!=null&&g.hasOwnProperty("javaPackage")&&(ae.javaPackage=g.javaPackage),g.javaOuterClassname!=null&&g.hasOwnProperty("javaOuterClassname")&&(ae.javaOuterClassname=g.javaOuterClassname),g.optimizeFor!=null&&g.hasOwnProperty("optimizeFor")&&(ae.optimizeFor=ee.enums===String?s.google.protobuf.FileOptions.OptimizeMode[g.optimizeFor]:g.optimizeFor),g.javaMultipleFiles!=null&&g.hasOwnProperty("javaMultipleFiles")&&(ae.javaMultipleFiles=g.javaMultipleFiles),g.goPackage!=null&&g.hasOwnProperty("goPackage")&&(ae.goPackage=g.goPackage),g.ccGenericServices!=null&&g.hasOwnProperty("ccGenericServices")&&(ae.ccGenericServices=g.ccGenericServices),g.javaGenericServices!=null&&g.hasOwnProperty("javaGenericServices")&&(ae.javaGenericServices=g.javaGenericServices),g.pyGenericServices!=null&&g.hasOwnProperty("pyGenericServices")&&(ae.pyGenericServices=g.pyGenericServices),g.javaGenerateEqualsAndHash!=null&&g.hasOwnProperty("javaGenerateEqualsAndHash")&&(ae.javaGenerateEqualsAndHash=g.javaGenerateEqualsAndHash),g.deprecated!=null&&g.hasOwnProperty("deprecated")&&(ae.deprecated=g.deprecated),g.javaStringCheckUtf8!=null&&g.hasOwnProperty("javaStringCheckUtf8")&&(ae.javaStringCheckUtf8=g.javaStringCheckUtf8),g.ccEnableArenas!=null&&g.hasOwnProperty("ccEnableArenas")&&(ae.ccEnableArenas=g.ccEnableArenas),g.objcClassPrefix!=null&&g.hasOwnProperty("objcClassPrefix")&&(ae.objcClassPrefix=g.objcClassPrefix),g.csharpNamespace!=null&&g.hasOwnProperty("csharpNamespace")&&(ae.csharpNamespace=g.csharpNamespace),g.swiftPrefix!=null&&g.hasOwnProperty("swiftPrefix")&&(ae.swiftPrefix=g.swiftPrefix),g.phpClassPrefix!=null&&g.hasOwnProperty("phpClassPrefix")&&(ae.phpClassPrefix=g.phpClassPrefix),g.phpNamespace!=null&&g.hasOwnProperty("phpNamespace")&&(ae.phpNamespace=g.phpNamespace),g.phpGenericServices!=null&&g.hasOwnProperty("phpGenericServices")&&(ae.phpGenericServices=g.phpGenericServices),g.phpMetadataNamespace!=null&&g.hasOwnProperty("phpMetadataNamespace")&&(ae.phpMetadataNamespace=g.phpMetadataNamespace),g.rubyPackage!=null&&g.hasOwnProperty("rubyPackage")&&(ae.rubyPackage=g.rubyPackage),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return ae},be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},be.OptimizeMode=(d={},(r=Object.create(d))[d[1]="SPEED"]=1,r[d[2]="CODE_SIZE"]=2,r[d[3]="LITE_RUNTIME"]=3,r),be),u.MessageOptions=(we.prototype.messageSetWireFormat=!1,we.prototype.noStandardDescriptorAccessor=!1,we.prototype.deprecated=!1,we.prototype.mapEntry=!1,we.prototype.uninterpretedOption=o.emptyArray,we.create=function(g){return new we(g)},we.encode=function(g,ee){if(ee=ee||a.create(),g.messageSetWireFormat!=null&&Object.hasOwnProperty.call(g,"messageSetWireFormat")&&ee.uint32(8).bool(g.messageSetWireFormat),g.noStandardDescriptorAccessor!=null&&Object.hasOwnProperty.call(g,"noStandardDescriptorAccessor")&&ee.uint32(16).bool(g.noStandardDescriptorAccessor),g.deprecated!=null&&Object.hasOwnProperty.call(g,"deprecated")&&ee.uint32(24).bool(g.deprecated),g.mapEntry!=null&&Object.hasOwnProperty.call(g,"mapEntry")&&ee.uint32(56).bool(g.mapEntry),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return ee},we.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},we.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.MessageOptions;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.messageSetWireFormat=g.bool();break;case 2:l.noStandardDescriptorAccessor=g.bool();break;case 3:l.deprecated=g.bool();break;case 7:l.mapEntry=g.bool();break;case 999:l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()));break;default:g.skipType(7&X)}}return l},we.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},we.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.messageSetWireFormat!=null&&g.hasOwnProperty("messageSetWireFormat")&&typeof g.messageSetWireFormat!="boolean")return"messageSetWireFormat: boolean expected";if(g.noStandardDescriptorAccessor!=null&&g.hasOwnProperty("noStandardDescriptorAccessor")&&typeof g.noStandardDescriptorAccessor!="boolean")return"noStandardDescriptorAccessor: boolean expected";if(g.deprecated!=null&&g.hasOwnProperty("deprecated")&&typeof g.deprecated!="boolean")return"deprecated: boolean expected";if(g.mapEntry!=null&&g.hasOwnProperty("mapEntry")&&typeof g.mapEntry!="boolean")return"mapEntry: boolean expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return null},we.fromObject=function(g){if(g instanceof s.google.protobuf.MessageOptions)return g;var ee=new s.google.protobuf.MessageOptions;if(g.messageSetWireFormat!=null&&(ee.messageSetWireFormat=!!g.messageSetWireFormat),g.noStandardDescriptorAccessor!=null&&(ee.noStandardDescriptorAccessor=!!g.noStandardDescriptorAccessor),g.deprecated!=null&&(ee.deprecated=!!g.deprecated),g.mapEntry!=null&&(ee.mapEntry=!!g.mapEntry),g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return ee},we.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),ee.defaults&&(ae.messageSetWireFormat=!1,ae.noStandardDescriptorAccessor=!1,ae.deprecated=!1,ae.mapEntry=!1),g.messageSetWireFormat!=null&&g.hasOwnProperty("messageSetWireFormat")&&(ae.messageSetWireFormat=g.messageSetWireFormat),g.noStandardDescriptorAccessor!=null&&g.hasOwnProperty("noStandardDescriptorAccessor")&&(ae.noStandardDescriptorAccessor=g.noStandardDescriptorAccessor),g.deprecated!=null&&g.hasOwnProperty("deprecated")&&(ae.deprecated=g.deprecated),g.mapEntry!=null&&g.hasOwnProperty("mapEntry")&&(ae.mapEntry=g.mapEntry),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return ae},we.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},we),u.FieldOptions=(Ce.prototype.ctype=0,Ce.prototype.packed=!1,Ce.prototype.jstype=0,Ce.prototype.lazy=!1,Ce.prototype.deprecated=!1,Ce.prototype.weak=!1,Ce.prototype.uninterpretedOption=o.emptyArray,Ce.create=function(g){return new Ce(g)},Ce.encode=function(g,ee){if(ee=ee||a.create(),g.ctype!=null&&Object.hasOwnProperty.call(g,"ctype")&&ee.uint32(8).int32(g.ctype),g.packed!=null&&Object.hasOwnProperty.call(g,"packed")&&ee.uint32(16).bool(g.packed),g.deprecated!=null&&Object.hasOwnProperty.call(g,"deprecated")&&ee.uint32(24).bool(g.deprecated),g.lazy!=null&&Object.hasOwnProperty.call(g,"lazy")&&ee.uint32(40).bool(g.lazy),g.jstype!=null&&Object.hasOwnProperty.call(g,"jstype")&&ee.uint32(48).int32(g.jstype),g.weak!=null&&Object.hasOwnProperty.call(g,"weak")&&ee.uint32(80).bool(g.weak),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return ee},Ce.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Ce.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.FieldOptions;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.ctype=g.int32();break;case 2:l.packed=g.bool();break;case 6:l.jstype=g.int32();break;case 5:l.lazy=g.bool();break;case 3:l.deprecated=g.bool();break;case 10:l.weak=g.bool();break;case 999:l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()));break;default:g.skipType(7&X)}}return l},Ce.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Ce.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.ctype!=null&&g.hasOwnProperty("ctype"))switch(g.ctype){default:return"ctype: enum value expected";case 0:case 1:case 2:}if(g.packed!=null&&g.hasOwnProperty("packed")&&typeof g.packed!="boolean")return"packed: boolean expected";if(g.jstype!=null&&g.hasOwnProperty("jstype"))switch(g.jstype){default:return"jstype: enum value expected";case 0:case 1:case 2:}if(g.lazy!=null&&g.hasOwnProperty("lazy")&&typeof g.lazy!="boolean")return"lazy: boolean expected";if(g.deprecated!=null&&g.hasOwnProperty("deprecated")&&typeof g.deprecated!="boolean")return"deprecated: boolean expected";if(g.weak!=null&&g.hasOwnProperty("weak")&&typeof g.weak!="boolean")return"weak: boolean expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return null},Ce.fromObject=function(g){if(g instanceof s.google.protobuf.FieldOptions)return g;var ee=new s.google.protobuf.FieldOptions;switch(g.ctype){case"STRING":case 0:ee.ctype=0;break;case"CORD":case 1:ee.ctype=1;break;case"STRING_PIECE":case 2:ee.ctype=2}switch(g.packed!=null&&(ee.packed=!!g.packed),g.jstype){case"JS_NORMAL":case 0:ee.jstype=0;break;case"JS_STRING":case 1:ee.jstype=1;break;case"JS_NUMBER":case 2:ee.jstype=2}if(g.lazy!=null&&(ee.lazy=!!g.lazy),g.deprecated!=null&&(ee.deprecated=!!g.deprecated),g.weak!=null&&(ee.weak=!!g.weak),g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return ee},Ce.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),ee.defaults&&(ae.ctype=ee.enums===String?"STRING":0,ae.packed=!1,ae.deprecated=!1,ae.lazy=!1,ae.jstype=ee.enums===String?"JS_NORMAL":0,ae.weak=!1),g.ctype!=null&&g.hasOwnProperty("ctype")&&(ae.ctype=ee.enums===String?s.google.protobuf.FieldOptions.CType[g.ctype]:g.ctype),g.packed!=null&&g.hasOwnProperty("packed")&&(ae.packed=g.packed),g.deprecated!=null&&g.hasOwnProperty("deprecated")&&(ae.deprecated=g.deprecated),g.lazy!=null&&g.hasOwnProperty("lazy")&&(ae.lazy=g.lazy),g.jstype!=null&&g.hasOwnProperty("jstype")&&(ae.jstype=ee.enums===String?s.google.protobuf.FieldOptions.JSType[g.jstype]:g.jstype),g.weak!=null&&g.hasOwnProperty("weak")&&(ae.weak=g.weak),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return ae},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ce.CType=(d={},(r=Object.create(d))[d[0]="STRING"]=0,r[d[1]="CORD"]=1,r[d[2]="STRING_PIECE"]=2,r),Ce.JSType=(d={},(r=Object.create(d))[d[0]="JS_NORMAL"]=0,r[d[1]="JS_STRING"]=1,r[d[2]="JS_NUMBER"]=2,r),Ce),u.OneofOptions=(je.prototype.uninterpretedOption=o.emptyArray,je.create=function(g){return new je(g)},je.encode=function(g,ee){if(ee=ee||a.create(),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return ee},je.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},je.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.OneofOptions;g.pos<ae;){var X=g.uint32();X>>>3==999?(l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()))):g.skipType(7&X)}return l},je.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},je.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return null},je.fromObject=function(g){if(g instanceof s.google.protobuf.OneofOptions)return g;var ee=new s.google.protobuf.OneofOptions;if(g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return ee},je.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return ae},je.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},je),u.EnumOptions=(Fe.prototype.allowAlias=!1,Fe.prototype.deprecated=!1,Fe.prototype.uninterpretedOption=o.emptyArray,Fe.create=function(g){return new Fe(g)},Fe.encode=function(g,ee){if(ee=ee||a.create(),g.allowAlias!=null&&Object.hasOwnProperty.call(g,"allowAlias")&&ee.uint32(16).bool(g.allowAlias),g.deprecated!=null&&Object.hasOwnProperty.call(g,"deprecated")&&ee.uint32(24).bool(g.deprecated),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return ee},Fe.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Fe.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.EnumOptions;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 2:l.allowAlias=g.bool();break;case 3:l.deprecated=g.bool();break;case 999:l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()));break;default:g.skipType(7&X)}}return l},Fe.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Fe.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.allowAlias!=null&&g.hasOwnProperty("allowAlias")&&typeof g.allowAlias!="boolean")return"allowAlias: boolean expected";if(g.deprecated!=null&&g.hasOwnProperty("deprecated")&&typeof g.deprecated!="boolean")return"deprecated: boolean expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return null},Fe.fromObject=function(g){if(g instanceof s.google.protobuf.EnumOptions)return g;var ee=new s.google.protobuf.EnumOptions;if(g.allowAlias!=null&&(ee.allowAlias=!!g.allowAlias),g.deprecated!=null&&(ee.deprecated=!!g.deprecated),g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return ee},Fe.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),ee.defaults&&(ae.allowAlias=!1,ae.deprecated=!1),g.allowAlias!=null&&g.hasOwnProperty("allowAlias")&&(ae.allowAlias=g.allowAlias),g.deprecated!=null&&g.hasOwnProperty("deprecated")&&(ae.deprecated=g.deprecated),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return ae},Fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Fe),u.EnumValueOptions=(Ve.prototype.deprecated=!1,Ve.prototype.uninterpretedOption=o.emptyArray,Ve.create=function(g){return new Ve(g)},Ve.encode=function(g,ee){if(ee=ee||a.create(),g.deprecated!=null&&Object.hasOwnProperty.call(g,"deprecated")&&ee.uint32(8).bool(g.deprecated),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return ee},Ve.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Ve.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.EnumValueOptions;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.deprecated=g.bool();break;case 999:l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()));break;default:g.skipType(7&X)}}return l},Ve.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Ve.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.deprecated!=null&&g.hasOwnProperty("deprecated")&&typeof g.deprecated!="boolean")return"deprecated: boolean expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return null},Ve.fromObject=function(g){if(g instanceof s.google.protobuf.EnumValueOptions)return g;var ee=new s.google.protobuf.EnumValueOptions;if(g.deprecated!=null&&(ee.deprecated=!!g.deprecated),g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return ee},Ve.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),ee.defaults&&(ae.deprecated=!1),g.deprecated!=null&&g.hasOwnProperty("deprecated")&&(ae.deprecated=g.deprecated),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return ae},Ve.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ve),u.ServiceOptions=(Ge.prototype.deprecated=!1,Ge.prototype.uninterpretedOption=o.emptyArray,Ge.prototype[".google.api.defaultHost"]="",Ge.prototype[".google.api.oauthScopes"]="",Ge.create=function(g){return new Ge(g)},Ge.encode=function(g,ee){if(ee=ee||a.create(),g.deprecated!=null&&Object.hasOwnProperty.call(g,"deprecated")&&ee.uint32(264).bool(g.deprecated),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();return g[".google.api.defaultHost"]!=null&&Object.hasOwnProperty.call(g,".google.api.defaultHost")&&ee.uint32(8394).string(g[".google.api.defaultHost"]),g[".google.api.oauthScopes"]!=null&&Object.hasOwnProperty.call(g,".google.api.oauthScopes")&&ee.uint32(8402).string(g[".google.api.oauthScopes"]),ee},Ge.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Ge.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.ServiceOptions;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 33:l.deprecated=g.bool();break;case 999:l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()));break;case 1049:l[".google.api.defaultHost"]=g.string();break;case 1050:l[".google.api.oauthScopes"]=g.string();break;default:g.skipType(7&X)}}return l},Ge.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Ge.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.deprecated!=null&&g.hasOwnProperty("deprecated")&&typeof g.deprecated!="boolean")return"deprecated: boolean expected";if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee){var ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]);if(ae)return"uninterpretedOption."+ae}}return g[".google.api.defaultHost"]!=null&&g.hasOwnProperty(".google.api.defaultHost")&&!o.isString(g[".google.api.defaultHost"])?".google.api.defaultHost: string expected":g[".google.api.oauthScopes"]!=null&&g.hasOwnProperty(".google.api.oauthScopes")&&!o.isString(g[".google.api.oauthScopes"])?".google.api.oauthScopes: string expected":null},Ge.fromObject=function(g){if(g instanceof s.google.protobuf.ServiceOptions)return g;var ee=new s.google.protobuf.ServiceOptions;if(g.deprecated!=null&&(ee.deprecated=!!g.deprecated),g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}return g[".google.api.defaultHost"]!=null&&(ee[".google.api.defaultHost"]=String(g[".google.api.defaultHost"])),g[".google.api.oauthScopes"]!=null&&(ee[".google.api.oauthScopes"]=String(g[".google.api.oauthScopes"])),ee},Ge.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[]),ee.defaults&&(ae.deprecated=!1,ae[".google.api.defaultHost"]="",ae[".google.api.oauthScopes"]=""),g.deprecated!=null&&g.hasOwnProperty("deprecated")&&(ae.deprecated=g.deprecated),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}return g[".google.api.defaultHost"]!=null&&g.hasOwnProperty(".google.api.defaultHost")&&(ae[".google.api.defaultHost"]=g[".google.api.defaultHost"]),g[".google.api.oauthScopes"]!=null&&g.hasOwnProperty(".google.api.oauthScopes")&&(ae[".google.api.oauthScopes"]=g[".google.api.oauthScopes"]),ae},Ge.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ge),u.MethodOptions=(Le.prototype.deprecated=!1,Le.prototype.idempotencyLevel=0,Le.prototype.uninterpretedOption=o.emptyArray,Le.prototype[".google.longrunning.operationInfo"]=null,Le.prototype[".google.api.http"]=null,Le.prototype[".google.api.methodSignature"]=o.emptyArray,Le.create=function(g){return new Le(g)},Le.encode=function(g,ee){if(ee=ee||a.create(),g.deprecated!=null&&Object.hasOwnProperty.call(g,"deprecated")&&ee.uint32(264).bool(g.deprecated),g.idempotencyLevel!=null&&Object.hasOwnProperty.call(g,"idempotencyLevel")&&ee.uint32(272).int32(g.idempotencyLevel),g.uninterpretedOption!=null&&g.uninterpretedOption.length)for(var ae=0;ae<g.uninterpretedOption.length;++ae)s.google.protobuf.UninterpretedOption.encode(g.uninterpretedOption[ae],ee.uint32(7994).fork()).ldelim();if(g[".google.longrunning.operationInfo"]!=null&&Object.hasOwnProperty.call(g,".google.longrunning.operationInfo")&&s.google.longrunning.OperationInfo.encode(g[".google.longrunning.operationInfo"],ee.uint32(8394).fork()).ldelim(),g[".google.api.methodSignature"]!=null&&g[".google.api.methodSignature"].length)for(ae=0;ae<g[".google.api.methodSignature"].length;++ae)ee.uint32(8410).string(g[".google.api.methodSignature"][ae]);return g[".google.api.http"]!=null&&Object.hasOwnProperty.call(g,".google.api.http")&&s.google.api.HttpRule.encode(g[".google.api.http"],ee.uint32(578365826).fork()).ldelim(),ee},Le.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Le.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.MethodOptions;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 33:l.deprecated=g.bool();break;case 34:l.idempotencyLevel=g.int32();break;case 999:l.uninterpretedOption&&l.uninterpretedOption.length||(l.uninterpretedOption=[]),l.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(g,g.uint32()));break;case 1049:l[".google.longrunning.operationInfo"]=s.google.longrunning.OperationInfo.decode(g,g.uint32());break;case 72295728:l[".google.api.http"]=s.google.api.HttpRule.decode(g,g.uint32());break;case 1051:l[".google.api.methodSignature"]&&l[".google.api.methodSignature"].length||(l[".google.api.methodSignature"]=[]),l[".google.api.methodSignature"].push(g.string());break;default:g.skipType(7&X)}}return l},Le.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Le.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.deprecated!=null&&g.hasOwnProperty("deprecated")&&typeof g.deprecated!="boolean")return"deprecated: boolean expected";if(g.idempotencyLevel!=null&&g.hasOwnProperty("idempotencyLevel"))switch(g.idempotencyLevel){default:return"idempotencyLevel: enum value expected";case 0:case 1:case 2:}if(g.uninterpretedOption!=null&&g.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(g.uninterpretedOption))return"uninterpretedOption: array expected";for(var ee=0;ee<g.uninterpretedOption.length;++ee)if(ae=s.google.protobuf.UninterpretedOption.verify(g.uninterpretedOption[ee]))return"uninterpretedOption."+ae}var ae;if(g[".google.longrunning.operationInfo"]!=null&&g.hasOwnProperty(".google.longrunning.operationInfo")&&(ae=s.google.longrunning.OperationInfo.verify(g[".google.longrunning.operationInfo"])))return".google.longrunning.operationInfo."+ae;if(g[".google.api.http"]!=null&&g.hasOwnProperty(".google.api.http")&&(ae=s.google.api.HttpRule.verify(g[".google.api.http"])))return".google.api.http."+ae;if(g[".google.api.methodSignature"]!=null&&g.hasOwnProperty(".google.api.methodSignature")){if(!Array.isArray(g[".google.api.methodSignature"]))return".google.api.methodSignature: array expected";for(ee=0;ee<g[".google.api.methodSignature"].length;++ee)if(!o.isString(g[".google.api.methodSignature"][ee]))return".google.api.methodSignature: string[] expected"}return null},Le.fromObject=function(g){if(g instanceof s.google.protobuf.MethodOptions)return g;var ee=new s.google.protobuf.MethodOptions;switch(g.deprecated!=null&&(ee.deprecated=!!g.deprecated),g.idempotencyLevel){case"IDEMPOTENCY_UNKNOWN":case 0:ee.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:ee.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:ee.idempotencyLevel=2}if(g.uninterpretedOption){if(!Array.isArray(g.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");ee.uninterpretedOption=[];for(var ae=0;ae<g.uninterpretedOption.length;++ae){if(typeof g.uninterpretedOption[ae]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");ee.uninterpretedOption[ae]=s.google.protobuf.UninterpretedOption.fromObject(g.uninterpretedOption[ae])}}if(g[".google.longrunning.operationInfo"]!=null){if(typeof g[".google.longrunning.operationInfo"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.longrunning.operationInfo: object expected");ee[".google.longrunning.operationInfo"]=s.google.longrunning.OperationInfo.fromObject(g[".google.longrunning.operationInfo"])}if(g[".google.api.http"]!=null){if(typeof g[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");ee[".google.api.http"]=s.google.api.HttpRule.fromObject(g[".google.api.http"])}if(g[".google.api.methodSignature"]){if(!Array.isArray(g[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(ee[".google.api.methodSignature"]=[],ae=0;ae<g[".google.api.methodSignature"].length;++ae)ee[".google.api.methodSignature"][ae]=String(g[".google.api.methodSignature"][ae])}return ee},Le.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.uninterpretedOption=[],ae[".google.api.methodSignature"]=[]),ee.defaults&&(ae.deprecated=!1,ae.idempotencyLevel=ee.enums===String?"IDEMPOTENCY_UNKNOWN":0,ae[".google.longrunning.operationInfo"]=null,ae[".google.api.http"]=null),g.deprecated!=null&&g.hasOwnProperty("deprecated")&&(ae.deprecated=g.deprecated),g.idempotencyLevel!=null&&g.hasOwnProperty("idempotencyLevel")&&(ae.idempotencyLevel=ee.enums===String?s.google.protobuf.MethodOptions.IdempotencyLevel[g.idempotencyLevel]:g.idempotencyLevel),g.uninterpretedOption&&g.uninterpretedOption.length){ae.uninterpretedOption=[];for(var l=0;l<g.uninterpretedOption.length;++l)ae.uninterpretedOption[l]=s.google.protobuf.UninterpretedOption.toObject(g.uninterpretedOption[l],ee)}if(g[".google.longrunning.operationInfo"]!=null&&g.hasOwnProperty(".google.longrunning.operationInfo")&&(ae[".google.longrunning.operationInfo"]=s.google.longrunning.OperationInfo.toObject(g[".google.longrunning.operationInfo"],ee)),g[".google.api.methodSignature"]&&g[".google.api.methodSignature"].length)for(ae[".google.api.methodSignature"]=[],l=0;l<g[".google.api.methodSignature"].length;++l)ae[".google.api.methodSignature"][l]=g[".google.api.methodSignature"][l];return g[".google.api.http"]!=null&&g.hasOwnProperty(".google.api.http")&&(ae[".google.api.http"]=s.google.api.HttpRule.toObject(g[".google.api.http"],ee)),ae},Le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Le.IdempotencyLevel=(d={},(r=Object.create(d))[d[0]="IDEMPOTENCY_UNKNOWN"]=0,r[d[1]="NO_SIDE_EFFECTS"]=1,r[d[2]="IDEMPOTENT"]=2,r),Le),u.UninterpretedOption=(Be.prototype.name=o.emptyArray,Be.prototype.identifierValue="",Be.prototype.positiveIntValue=o.Long?o.Long.fromBits(0,0,!0):0,Be.prototype.negativeIntValue=o.Long?o.Long.fromBits(0,0,!1):0,Be.prototype.doubleValue=0,Be.prototype.stringValue=o.newBuffer([]),Be.prototype.aggregateValue="",Be.create=function(g){return new Be(g)},Be.encode=function(g,ee){if(ee=ee||a.create(),g.name!=null&&g.name.length)for(var ae=0;ae<g.name.length;++ae)s.google.protobuf.UninterpretedOption.NamePart.encode(g.name[ae],ee.uint32(18).fork()).ldelim();return g.identifierValue!=null&&Object.hasOwnProperty.call(g,"identifierValue")&&ee.uint32(26).string(g.identifierValue),g.positiveIntValue!=null&&Object.hasOwnProperty.call(g,"positiveIntValue")&&ee.uint32(32).uint64(g.positiveIntValue),g.negativeIntValue!=null&&Object.hasOwnProperty.call(g,"negativeIntValue")&&ee.uint32(40).int64(g.negativeIntValue),g.doubleValue!=null&&Object.hasOwnProperty.call(g,"doubleValue")&&ee.uint32(49).double(g.doubleValue),g.stringValue!=null&&Object.hasOwnProperty.call(g,"stringValue")&&ee.uint32(58).bytes(g.stringValue),g.aggregateValue!=null&&Object.hasOwnProperty.call(g,"aggregateValue")&&ee.uint32(66).string(g.aggregateValue),ee},Be.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Be.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.UninterpretedOption;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 2:l.name&&l.name.length||(l.name=[]),l.name.push(s.google.protobuf.UninterpretedOption.NamePart.decode(g,g.uint32()));break;case 3:l.identifierValue=g.string();break;case 4:l.positiveIntValue=g.uint64();break;case 5:l.negativeIntValue=g.int64();break;case 6:l.doubleValue=g.double();break;case 7:l.stringValue=g.bytes();break;case 8:l.aggregateValue=g.string();break;default:g.skipType(7&X)}}return l},Be.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Be.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.name!=null&&g.hasOwnProperty("name")){if(!Array.isArray(g.name))return"name: array expected";for(var ee=0;ee<g.name.length;++ee){var ae=s.google.protobuf.UninterpretedOption.NamePart.verify(g.name[ee]);if(ae)return"name."+ae}}return g.identifierValue!=null&&g.hasOwnProperty("identifierValue")&&!o.isString(g.identifierValue)?"identifierValue: string expected":g.positiveIntValue!=null&&g.hasOwnProperty("positiveIntValue")&&!(o.isInteger(g.positiveIntValue)||g.positiveIntValue&&o.isInteger(g.positiveIntValue.low)&&o.isInteger(g.positiveIntValue.high))?"positiveIntValue: integer|Long expected":g.negativeIntValue!=null&&g.hasOwnProperty("negativeIntValue")&&!(o.isInteger(g.negativeIntValue)||g.negativeIntValue&&o.isInteger(g.negativeIntValue.low)&&o.isInteger(g.negativeIntValue.high))?"negativeIntValue: integer|Long expected":g.doubleValue!=null&&g.hasOwnProperty("doubleValue")&&typeof g.doubleValue!="number"?"doubleValue: number expected":g.stringValue!=null&&g.hasOwnProperty("stringValue")&&!(g.stringValue&&typeof g.stringValue.length=="number"||o.isString(g.stringValue))?"stringValue: buffer expected":g.aggregateValue!=null&&g.hasOwnProperty("aggregateValue")&&!o.isString(g.aggregateValue)?"aggregateValue: string expected":null},Be.fromObject=function(g){if(g instanceof s.google.protobuf.UninterpretedOption)return g;var ee=new s.google.protobuf.UninterpretedOption;if(g.name){if(!Array.isArray(g.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");ee.name=[];for(var ae=0;ae<g.name.length;++ae){if(typeof g.name[ae]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");ee.name[ae]=s.google.protobuf.UninterpretedOption.NamePart.fromObject(g.name[ae])}}return g.identifierValue!=null&&(ee.identifierValue=String(g.identifierValue)),g.positiveIntValue!=null&&(o.Long?(ee.positiveIntValue=o.Long.fromValue(g.positiveIntValue)).unsigned=!0:typeof g.positiveIntValue=="string"?ee.positiveIntValue=parseInt(g.positiveIntValue,10):typeof g.positiveIntValue=="number"?ee.positiveIntValue=g.positiveIntValue:typeof g.positiveIntValue=="object"&&(ee.positiveIntValue=new o.LongBits(g.positiveIntValue.low>>>0,g.positiveIntValue.high>>>0).toNumber(!0))),g.negativeIntValue!=null&&(o.Long?(ee.negativeIntValue=o.Long.fromValue(g.negativeIntValue)).unsigned=!1:typeof g.negativeIntValue=="string"?ee.negativeIntValue=parseInt(g.negativeIntValue,10):typeof g.negativeIntValue=="number"?ee.negativeIntValue=g.negativeIntValue:typeof g.negativeIntValue=="object"&&(ee.negativeIntValue=new o.LongBits(g.negativeIntValue.low>>>0,g.negativeIntValue.high>>>0).toNumber())),g.doubleValue!=null&&(ee.doubleValue=Number(g.doubleValue)),g.stringValue!=null&&(typeof g.stringValue=="string"?o.base64.decode(g.stringValue,ee.stringValue=o.newBuffer(o.base64.length(g.stringValue)),0):g.stringValue.length&&(ee.stringValue=g.stringValue)),g.aggregateValue!=null&&(ee.aggregateValue=String(g.aggregateValue)),ee},Be.toObject=function(g,ee){var ae,l={};if(((ee=ee||{}).arrays||ee.defaults)&&(l.name=[]),ee.defaults&&(l.identifierValue="",o.Long?(ae=new o.Long(0,0,!0),l.positiveIntValue=ee.longs===String?ae.toString():ee.longs===Number?ae.toNumber():ae):l.positiveIntValue=ee.longs===String?"0":0,o.Long?(ae=new o.Long(0,0,!1),l.negativeIntValue=ee.longs===String?ae.toString():ee.longs===Number?ae.toNumber():ae):l.negativeIntValue=ee.longs===String?"0":0,l.doubleValue=0,ee.bytes===String?l.stringValue="":(l.stringValue=[],ee.bytes!==Array&&(l.stringValue=o.newBuffer(l.stringValue))),l.aggregateValue=""),g.name&&g.name.length){l.name=[];for(var X=0;X<g.name.length;++X)l.name[X]=s.google.protobuf.UninterpretedOption.NamePart.toObject(g.name[X],ee)}return g.identifierValue!=null&&g.hasOwnProperty("identifierValue")&&(l.identifierValue=g.identifierValue),g.positiveIntValue!=null&&g.hasOwnProperty("positiveIntValue")&&(typeof g.positiveIntValue=="number"?l.positiveIntValue=ee.longs===String?String(g.positiveIntValue):g.positiveIntValue:l.positiveIntValue=ee.longs===String?o.Long.prototype.toString.call(g.positiveIntValue):ee.longs===Number?new o.LongBits(g.positiveIntValue.low>>>0,g.positiveIntValue.high>>>0).toNumber(!0):g.positiveIntValue),g.negativeIntValue!=null&&g.hasOwnProperty("negativeIntValue")&&(typeof g.negativeIntValue=="number"?l.negativeIntValue=ee.longs===String?String(g.negativeIntValue):g.negativeIntValue:l.negativeIntValue=ee.longs===String?o.Long.prototype.toString.call(g.negativeIntValue):ee.longs===Number?new o.LongBits(g.negativeIntValue.low>>>0,g.negativeIntValue.high>>>0).toNumber():g.negativeIntValue),g.doubleValue!=null&&g.hasOwnProperty("doubleValue")&&(l.doubleValue=ee.json&&!isFinite(g.doubleValue)?String(g.doubleValue):g.doubleValue),g.stringValue!=null&&g.hasOwnProperty("stringValue")&&(l.stringValue=ee.bytes===String?o.base64.encode(g.stringValue,0,g.stringValue.length):ee.bytes===Array?Array.prototype.slice.call(g.stringValue):g.stringValue),g.aggregateValue!=null&&g.hasOwnProperty("aggregateValue")&&(l.aggregateValue=g.aggregateValue),l},Be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Be.NamePart=($e.prototype.namePart="",$e.prototype.isExtension=!1,$e.create=function(g){return new $e(g)},$e.encode=function(g,ee){return(ee=ee||a.create()).uint32(10).string(g.namePart),ee.uint32(16).bool(g.isExtension),ee},$e.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},$e.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.UninterpretedOption.NamePart;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.namePart=g.string();break;case 2:l.isExtension=g.bool();break;default:g.skipType(7&X)}}if(!l.hasOwnProperty("namePart"))throw o.ProtocolError("missing required 'namePart'",{instance:l});if(l.hasOwnProperty("isExtension"))return l;throw o.ProtocolError("missing required 'isExtension'",{instance:l})},$e.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},$e.verify=function(g){return typeof g!="object"||g===null?"object expected":o.isString(g.namePart)?typeof g.isExtension!="boolean"?"isExtension: boolean expected":null:"namePart: string expected"},$e.fromObject=function(g){var ee;return g instanceof s.google.protobuf.UninterpretedOption.NamePart?g:(ee=new s.google.protobuf.UninterpretedOption.NamePart,g.namePart!=null&&(ee.namePart=String(g.namePart)),g.isExtension!=null&&(ee.isExtension=!!g.isExtension),ee)},$e.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.namePart="",ae.isExtension=!1),g.namePart!=null&&g.hasOwnProperty("namePart")&&(ae.namePart=g.namePart),g.isExtension!=null&&g.hasOwnProperty("isExtension")&&(ae.isExtension=g.isExtension),ae},$e.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},$e),Be),u.SourceCodeInfo=(he.prototype.location=o.emptyArray,he.create=function(g){return new he(g)},he.encode=function(g,ee){if(ee=ee||a.create(),g.location!=null&&g.location.length)for(var ae=0;ae<g.location.length;++ae)s.google.protobuf.SourceCodeInfo.Location.encode(g.location[ae],ee.uint32(10).fork()).ldelim();return ee},he.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},he.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.SourceCodeInfo;g.pos<ae;){var X=g.uint32();X>>>3==1?(l.location&&l.location.length||(l.location=[]),l.location.push(s.google.protobuf.SourceCodeInfo.Location.decode(g,g.uint32()))):g.skipType(7&X)}return l},he.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},he.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.location!=null&&g.hasOwnProperty("location")){if(!Array.isArray(g.location))return"location: array expected";for(var ee=0;ee<g.location.length;++ee){var ae=s.google.protobuf.SourceCodeInfo.Location.verify(g.location[ee]);if(ae)return"location."+ae}}return null},he.fromObject=function(g){if(g instanceof s.google.protobuf.SourceCodeInfo)return g;var ee=new s.google.protobuf.SourceCodeInfo;if(g.location){if(!Array.isArray(g.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");ee.location=[];for(var ae=0;ae<g.location.length;++ae){if(typeof g.location[ae]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");ee.location[ae]=s.google.protobuf.SourceCodeInfo.Location.fromObject(g.location[ae])}}return ee},he.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.location=[]),g.location&&g.location.length){ae.location=[];for(var l=0;l<g.location.length;++l)ae.location[l]=s.google.protobuf.SourceCodeInfo.Location.toObject(g.location[l],ee)}return ae},he.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},he.Location=(p.prototype.path=o.emptyArray,p.prototype.span=o.emptyArray,p.prototype.leadingComments="",p.prototype.trailingComments="",p.prototype.leadingDetachedComments=o.emptyArray,p.create=function(g){return new p(g)},p.encode=function(g,ee){if(ee=ee||a.create(),g.path!=null&&g.path.length){ee.uint32(10).fork();for(var ae=0;ae<g.path.length;++ae)ee.int32(g.path[ae]);ee.ldelim()}if(g.span!=null&&g.span.length){for(ee.uint32(18).fork(),ae=0;ae<g.span.length;++ae)ee.int32(g.span[ae]);ee.ldelim()}if(g.leadingComments!=null&&Object.hasOwnProperty.call(g,"leadingComments")&&ee.uint32(26).string(g.leadingComments),g.trailingComments!=null&&Object.hasOwnProperty.call(g,"trailingComments")&&ee.uint32(34).string(g.trailingComments),g.leadingDetachedComments!=null&&g.leadingDetachedComments.length)for(ae=0;ae<g.leadingDetachedComments.length;++ae)ee.uint32(50).string(g.leadingDetachedComments[ae]);return ee},p.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},p.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.SourceCodeInfo.Location;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:if(l.path&&l.path.length||(l.path=[]),(7&X)==2)for(var oe=g.uint32()+g.pos;g.pos<oe;)l.path.push(g.int32());else l.path.push(g.int32());break;case 2:if(l.span&&l.span.length||(l.span=[]),(7&X)==2)for(oe=g.uint32()+g.pos;g.pos<oe;)l.span.push(g.int32());else l.span.push(g.int32());break;case 3:l.leadingComments=g.string();break;case 4:l.trailingComments=g.string();break;case 6:l.leadingDetachedComments&&l.leadingDetachedComments.length||(l.leadingDetachedComments=[]),l.leadingDetachedComments.push(g.string());break;default:g.skipType(7&X)}}return l},p.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},p.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.path!=null&&g.hasOwnProperty("path")){if(!Array.isArray(g.path))return"path: array expected";for(var ee=0;ee<g.path.length;++ee)if(!o.isInteger(g.path[ee]))return"path: integer[] expected"}if(g.span!=null&&g.hasOwnProperty("span")){if(!Array.isArray(g.span))return"span: array expected";for(ee=0;ee<g.span.length;++ee)if(!o.isInteger(g.span[ee]))return"span: integer[] expected"}if(g.leadingComments!=null&&g.hasOwnProperty("leadingComments")&&!o.isString(g.leadingComments))return"leadingComments: string expected";if(g.trailingComments!=null&&g.hasOwnProperty("trailingComments")&&!o.isString(g.trailingComments))return"trailingComments: string expected";if(g.leadingDetachedComments!=null&&g.hasOwnProperty("leadingDetachedComments")){if(!Array.isArray(g.leadingDetachedComments))return"leadingDetachedComments: array expected";for(ee=0;ee<g.leadingDetachedComments.length;++ee)if(!o.isString(g.leadingDetachedComments[ee]))return"leadingDetachedComments: string[] expected"}return null},p.fromObject=function(g){if(g instanceof s.google.protobuf.SourceCodeInfo.Location)return g;var ee=new s.google.protobuf.SourceCodeInfo.Location;if(g.path){if(!Array.isArray(g.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");ee.path=[];for(var ae=0;ae<g.path.length;++ae)ee.path[ae]=0|g.path[ae]}if(g.span){if(!Array.isArray(g.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(ee.span=[],ae=0;ae<g.span.length;++ae)ee.span[ae]=0|g.span[ae]}if(g.leadingComments!=null&&(ee.leadingComments=String(g.leadingComments)),g.trailingComments!=null&&(ee.trailingComments=String(g.trailingComments)),g.leadingDetachedComments){if(!Array.isArray(g.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(ee.leadingDetachedComments=[],ae=0;ae<g.leadingDetachedComments.length;++ae)ee.leadingDetachedComments[ae]=String(g.leadingDetachedComments[ae])}return ee},p.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.path=[],ae.span=[],ae.leadingDetachedComments=[]),ee.defaults&&(ae.leadingComments="",ae.trailingComments=""),g.path&&g.path.length){ae.path=[];for(var l=0;l<g.path.length;++l)ae.path[l]=g.path[l]}if(g.span&&g.span.length)for(ae.span=[],l=0;l<g.span.length;++l)ae.span[l]=g.span[l];if(g.leadingComments!=null&&g.hasOwnProperty("leadingComments")&&(ae.leadingComments=g.leadingComments),g.trailingComments!=null&&g.hasOwnProperty("trailingComments")&&(ae.trailingComments=g.trailingComments),g.leadingDetachedComments&&g.leadingDetachedComments.length)for(ae.leadingDetachedComments=[],l=0;l<g.leadingDetachedComments.length;++l)ae.leadingDetachedComments[l]=g.leadingDetachedComments[l];return ae},p.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},p),he),u.GeneratedCodeInfo=(V.prototype.annotation=o.emptyArray,V.create=function(g){return new V(g)},V.encode=function(g,ee){if(ee=ee||a.create(),g.annotation!=null&&g.annotation.length)for(var ae=0;ae<g.annotation.length;++ae)s.google.protobuf.GeneratedCodeInfo.Annotation.encode(g.annotation[ae],ee.uint32(10).fork()).ldelim();return ee},V.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},V.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.GeneratedCodeInfo;g.pos<ae;){var X=g.uint32();X>>>3==1?(l.annotation&&l.annotation.length||(l.annotation=[]),l.annotation.push(s.google.protobuf.GeneratedCodeInfo.Annotation.decode(g,g.uint32()))):g.skipType(7&X)}return l},V.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},V.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.annotation!=null&&g.hasOwnProperty("annotation")){if(!Array.isArray(g.annotation))return"annotation: array expected";for(var ee=0;ee<g.annotation.length;++ee){var ae=s.google.protobuf.GeneratedCodeInfo.Annotation.verify(g.annotation[ee]);if(ae)return"annotation."+ae}}return null},V.fromObject=function(g){if(g instanceof s.google.protobuf.GeneratedCodeInfo)return g;var ee=new s.google.protobuf.GeneratedCodeInfo;if(g.annotation){if(!Array.isArray(g.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");ee.annotation=[];for(var ae=0;ae<g.annotation.length;++ae){if(typeof g.annotation[ae]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");ee.annotation[ae]=s.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(g.annotation[ae])}}return ee},V.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.annotation=[]),g.annotation&&g.annotation.length){ae.annotation=[];for(var l=0;l<g.annotation.length;++l)ae.annotation[l]=s.google.protobuf.GeneratedCodeInfo.Annotation.toObject(g.annotation[l],ee)}return ae},V.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},V.Annotation=(R.prototype.path=o.emptyArray,R.prototype.sourceFile="",R.prototype.begin=0,R.prototype.end=0,R.create=function(g){return new R(g)},R.encode=function(g,ee){if(ee=ee||a.create(),g.path!=null&&g.path.length){ee.uint32(10).fork();for(var ae=0;ae<g.path.length;++ae)ee.int32(g.path[ae]);ee.ldelim()}return g.sourceFile!=null&&Object.hasOwnProperty.call(g,"sourceFile")&&ee.uint32(18).string(g.sourceFile),g.begin!=null&&Object.hasOwnProperty.call(g,"begin")&&ee.uint32(24).int32(g.begin),g.end!=null&&Object.hasOwnProperty.call(g,"end")&&ee.uint32(32).int32(g.end),ee},R.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},R.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.GeneratedCodeInfo.Annotation;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:if(l.path&&l.path.length||(l.path=[]),(7&X)==2)for(var oe=g.uint32()+g.pos;g.pos<oe;)l.path.push(g.int32());else l.path.push(g.int32());break;case 2:l.sourceFile=g.string();break;case 3:l.begin=g.int32();break;case 4:l.end=g.int32();break;default:g.skipType(7&X)}}return l},R.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},R.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.path!=null&&g.hasOwnProperty("path")){if(!Array.isArray(g.path))return"path: array expected";for(var ee=0;ee<g.path.length;++ee)if(!o.isInteger(g.path[ee]))return"path: integer[] expected"}return g.sourceFile!=null&&g.hasOwnProperty("sourceFile")&&!o.isString(g.sourceFile)?"sourceFile: string expected":g.begin!=null&&g.hasOwnProperty("begin")&&!o.isInteger(g.begin)?"begin: integer expected":g.end!=null&&g.hasOwnProperty("end")&&!o.isInteger(g.end)?"end: integer expected":null},R.fromObject=function(g){if(g instanceof s.google.protobuf.GeneratedCodeInfo.Annotation)return g;var ee=new s.google.protobuf.GeneratedCodeInfo.Annotation;if(g.path){if(!Array.isArray(g.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");ee.path=[];for(var ae=0;ae<g.path.length;++ae)ee.path[ae]=0|g.path[ae]}return g.sourceFile!=null&&(ee.sourceFile=String(g.sourceFile)),g.begin!=null&&(ee.begin=0|g.begin),g.end!=null&&(ee.end=0|g.end),ee},R.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.path=[]),ee.defaults&&(ae.sourceFile="",ae.begin=0,ae.end=0),g.path&&g.path.length){ae.path=[];for(var l=0;l<g.path.length;++l)ae.path[l]=g.path[l]}return g.sourceFile!=null&&g.hasOwnProperty("sourceFile")&&(ae.sourceFile=g.sourceFile),g.begin!=null&&g.hasOwnProperty("begin")&&(ae.begin=g.begin),g.end!=null&&g.hasOwnProperty("end")&&(ae.end=g.end),ae},R.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},R),V),u.Any=(ce.prototype.type_url="",ce.prototype.value=o.newBuffer([]),ce.create=function(g){return new ce(g)},ce.encode=function(g,ee){return ee=ee||a.create(),g.type_url!=null&&Object.hasOwnProperty.call(g,"type_url")&&ee.uint32(10).string(g.type_url),g.value!=null&&Object.hasOwnProperty.call(g,"value")&&ee.uint32(18).bytes(g.value),ee},ce.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},ce.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.Any;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.type_url=g.string();break;case 2:l.value=g.bytes();break;default:g.skipType(7&X)}}return l},ce.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},ce.verify=function(g){return typeof g!="object"||g===null?"object expected":g.type_url!=null&&g.hasOwnProperty("type_url")&&!o.isString(g.type_url)?"type_url: string expected":g.value!=null&&g.hasOwnProperty("value")&&!(g.value&&typeof g.value.length=="number"||o.isString(g.value))?"value: buffer expected":null},ce.fromObject=function(g){var ee;return g instanceof s.google.protobuf.Any?g:(ee=new s.google.protobuf.Any,g.type_url!=null&&(ee.type_url=String(g.type_url)),g.value!=null&&(typeof g.value=="string"?o.base64.decode(g.value,ee.value=o.newBuffer(o.base64.length(g.value)),0):g.value.length&&(ee.value=g.value)),ee)},ce.toObject=function(g,ee){var ae={};return(ee=ee||{}).defaults&&(ae.type_url="",ee.bytes===String?ae.value="":(ae.value=[],ee.bytes!==Array&&(ae.value=o.newBuffer(ae.value)))),g.type_url!=null&&g.hasOwnProperty("type_url")&&(ae.type_url=g.type_url),g.value!=null&&g.hasOwnProperty("value")&&(ae.value=ee.bytes===String?o.base64.encode(g.value,0,g.value.length):ee.bytes===Array?Array.prototype.slice.call(g.value):g.value),ae},ce.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ce),u.Duration=(Re.prototype.seconds=o.Long?o.Long.fromBits(0,0,!1):0,Re.prototype.nanos=0,Re.create=function(g){return new Re(g)},Re.encode=function(g,ee){return ee=ee||a.create(),g.seconds!=null&&Object.hasOwnProperty.call(g,"seconds")&&ee.uint32(8).int64(g.seconds),g.nanos!=null&&Object.hasOwnProperty.call(g,"nanos")&&ee.uint32(16).int32(g.nanos),ee},Re.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},Re.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.protobuf.Duration;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.seconds=g.int64();break;case 2:l.nanos=g.int32();break;default:g.skipType(7&X)}}return l},Re.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},Re.verify=function(g){return typeof g!="object"||g===null?"object expected":g.seconds!=null&&g.hasOwnProperty("seconds")&&!(o.isInteger(g.seconds)||g.seconds&&o.isInteger(g.seconds.low)&&o.isInteger(g.seconds.high))?"seconds: integer|Long expected":g.nanos!=null&&g.hasOwnProperty("nanos")&&!o.isInteger(g.nanos)?"nanos: integer expected":null},Re.fromObject=function(g){var ee;return g instanceof s.google.protobuf.Duration?g:(ee=new s.google.protobuf.Duration,g.seconds!=null&&(o.Long?(ee.seconds=o.Long.fromValue(g.seconds)).unsigned=!1:typeof g.seconds=="string"?ee.seconds=parseInt(g.seconds,10):typeof g.seconds=="number"?ee.seconds=g.seconds:typeof g.seconds=="object"&&(ee.seconds=new o.LongBits(g.seconds.low>>>0,g.seconds.high>>>0).toNumber())),g.nanos!=null&&(ee.nanos=0|g.nanos),ee)},Re.toObject=function(g,ee){var ae,l={};return(ee=ee||{}).defaults&&(o.Long?(ae=new o.Long(0,0,!1),l.seconds=ee.longs===String?ae.toString():ee.longs===Number?ae.toNumber():ae):l.seconds=ee.longs===String?"0":0,l.nanos=0),g.seconds!=null&&g.hasOwnProperty("seconds")&&(typeof g.seconds=="number"?l.seconds=ee.longs===String?String(g.seconds):g.seconds:l.seconds=ee.longs===String?o.Long.prototype.toString.call(g.seconds):ee.longs===Number?new o.LongBits(g.seconds.low>>>0,g.seconds.high>>>0).toNumber():g.seconds),g.nanos!=null&&g.hasOwnProperty("nanos")&&(l.nanos=g.nanos),l},Re.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Re),u.Empty=(ke.create=function(g){return new ke(g)},ke.encode=function(g,ee){return ee=ee||a.create()},ke.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},ke.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,ee=new s.google.protobuf.Empty;g.pos<ae;){var l=g.uint32();g.skipType(7&l)}return ee},ke.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},ke.verify=function(g){return typeof g!="object"||g===null?"object expected":null},ke.fromObject=function(g){return g instanceof s.google.protobuf.Empty?g:new s.google.protobuf.Empty},ke.toObject=function(){return{}},ke.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ke),u),m.rpc=((d={}).Status=(qe.prototype.code=0,qe.prototype.message="",qe.prototype.details=o.emptyArray,qe.create=function(g){return new qe(g)},qe.encode=function(g,ee){if(ee=ee||a.create(),g.code!=null&&Object.hasOwnProperty.call(g,"code")&&ee.uint32(8).int32(g.code),g.message!=null&&Object.hasOwnProperty.call(g,"message")&&ee.uint32(18).string(g.message),g.details!=null&&g.details.length)for(var ae=0;ae<g.details.length;++ae)s.google.protobuf.Any.encode(g.details[ae],ee.uint32(26).fork()).ldelim();return ee},qe.encodeDelimited=function(g,ee){return this.encode(g,ee).ldelim()},qe.decode=function(g,ee){g instanceof c||(g=c.create(g));for(var ae=ee===void 0?g.len:g.pos+ee,l=new s.google.rpc.Status;g.pos<ae;){var X=g.uint32();switch(X>>>3){case 1:l.code=g.int32();break;case 2:l.message=g.string();break;case 3:l.details&&l.details.length||(l.details=[]),l.details.push(s.google.protobuf.Any.decode(g,g.uint32()));break;default:g.skipType(7&X)}}return l},qe.decodeDelimited=function(g){return g instanceof c||(g=new c(g)),this.decode(g,g.uint32())},qe.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.code!=null&&g.hasOwnProperty("code")&&!o.isInteger(g.code))return"code: integer expected";if(g.message!=null&&g.hasOwnProperty("message")&&!o.isString(g.message))return"message: string expected";if(g.details!=null&&g.hasOwnProperty("details")){if(!Array.isArray(g.details))return"details: array expected";for(var ee=0;ee<g.details.length;++ee){var ae=s.google.protobuf.Any.verify(g.details[ee]);if(ae)return"details."+ae}}return null},qe.fromObject=function(g){if(g instanceof s.google.rpc.Status)return g;var ee=new s.google.rpc.Status;if(g.code!=null&&(ee.code=0|g.code),g.message!=null&&(ee.message=String(g.message)),g.details){if(!Array.isArray(g.details))throw TypeError(".google.rpc.Status.details: array expected");ee.details=[];for(var ae=0;ae<g.details.length;++ae){if(typeof g.details[ae]!="object")throw TypeError(".google.rpc.Status.details: object expected");ee.details[ae]=s.google.protobuf.Any.fromObject(g.details[ae])}}return ee},qe.toObject=function(g,ee){var ae={};if(((ee=ee||{}).arrays||ee.defaults)&&(ae.details=[]),ee.defaults&&(ae.code=0,ae.message=""),g.code!=null&&g.hasOwnProperty("code")&&(ae.code=g.code),g.message!=null&&g.hasOwnProperty("message")&&(ae.message=g.message),g.details&&g.details.length){ae.details=[];for(var l=0;l<g.details.length;++l)ae.details[l]=s.google.protobuf.Any.toObject(g.details[l],ee)}return ae},qe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},qe),d),m),s})}(operations)),operations.exports}var hasRequiredLongrunning;function requireLongrunning(){if(hasRequiredLongrunning)return longrunning;hasRequiredLongrunning=1,Object.defineProperty(longrunning,"__esModule",{value:!0}),longrunning.Operation=void 0,longrunning.operation=m;const t=require$$1$3,e=requireStatus(),r=requireGoogleError(),u=requireOperations();class d extends t.EventEmitter{constructor(a,o,s,h){super(),this.completeListeners=0,this.hasActiveListeners=!1,this.latestResponse=a,this.name=this.latestResponse.name,this.done=this.latestResponse.done,this.error=this.latestResponse.error,this.longrunningDescriptor=o,this.result=null,this.metadata=null,this.backoffSettings=s,this._unpackResponse(a),this._listenForEvents(),this._callOptions=h}_listenForEvents(){this.on("newListener",a=>{a==="complete"&&(this.completeListeners++,this.hasActiveListeners||(this.hasActiveListeners=!0,this.startPolling_()))}),this.on("removeListener",a=>{a==="complete"&&--this.completeListeners===0&&(this.hasActiveListeners=!1)})}cancel(){this.currentCallPromise_&&this.currentCallPromise_.cancel();const a=this.longrunningDescriptor.operationsClient,o=new u.google.longrunning.CancelOperationRequest;return o.name=this.latestResponse.name,a.cancelOperation(o)}getOperation(a){const o=this,s=this.longrunningDescriptor.operationsClient;function h(){if(!a)return new Promise((y,A)=>{if(o.latestResponse.error){const w=new r.GoogleError(o.latestResponse.error.message);w.code=o.latestResponse.error.code,A(w)}else y([o.result,o.metadata,o.latestResponse])})}if(this.latestResponse.done)return this._unpackResponse(this.latestResponse,a),h();const v=new u.google.longrunning.GetOperationRequest;v.name=this.latestResponse.name,this.currentCallPromise_=s.getOperationInternal(v,this._callOptions);const E=this.currentCallPromise_.then(y=>(o.latestResponse=y[0],o._unpackResponse(y[0],a),h()),y=>{if(a){a(y);return}return Promise.reject(y)});if(!a)return E}_unpackResponse(a,o){const s=this.longrunningDescriptor.responseDecoder,h=this.longrunningDescriptor.metadataDecoder;let v,E;if(a.done){if(a.result==="error"){const y=new r.GoogleError(a.error.message);y.code=a.error.code,this.error=y,o&&o(y);return}s&&a.response&&(this.response=a.response,v=s(a.response.value),this.result=v,this.done=!0)}h&&a.metadata&&(E=h(a.metadata.value),this.metadata=E),o&&o(null,v,E,a)}startPolling_(){const a=this;let o=new Date;const s=this.backoffSettings.retryDelayMultiplier,h=this.backoffSettings.maxRetryDelayMillis;let v=this.backoffSettings.initialRetryDelayMillis,E=1/0;this.backoffSettings.totalTimeoutMillis&&(E=o.getTime()+this.backoffSettings.totalTimeoutMillis);let y;this.latestResponse.metadata&&(y=this.latestResponse.metadata.value);function A(_,...S){a.emit(_,...S)}function w(_,S){if(_.byteLength!==S.byteLength)return!1;for(let j=0;j<_.byteLength;++j)if(_[j]!==S[j])return!1;return!0}function I(){if(a.hasActiveListeners){if(o.getTime()>=E){const _=new r.GoogleError("Total timeout exceeded before any response was received");_.code=e.Status.DEADLINE_EXCEEDED,setImmediate(A,"error",_);return}a.getOperation((_,S,j,K)=>{if(_){setImmediate(A,"error",_);return}if(!S){if(K.metadata&&(!y||K&&!w(K.metadata.value,y))&&(setImmediate(A,"progress",j,K),y=K.metadata.value),K.done){setImmediate(A,"complete",{},j,K);return}setTimeout(()=>{o=new Date,v=Math.min(v*s,h),I()},v);return}setImmediate(A,"complete",S,j,K)})}}I()}promise(){return new Promise((a,o)=>{this.on("error",o).on("complete",(s,h,v)=>{a([s,h,v])})})}}longrunning.Operation=d;function m(c,a,o,s){return new d(c,a,o,s)}return longrunning}var hasRequiredLongRunningApiCaller;function requireLongRunningApiCaller(){if(hasRequiredLongRunningApiCaller)return longRunningApiCaller;hasRequiredLongRunningApiCaller=1,Object.defineProperty(longRunningApiCaller,"__esModule",{value:!0}),longRunningApiCaller.LongrunningApiCaller=void 0;const t=requireCall(),e=requireGax(),r=requireLongrunning();class u{constructor(m){this.longrunningDescriptor=m}init(m){return m?new t.OngoingCall(m):new t.OngoingCallPromise}wrap(m){return m}call(m,c,a,o){o.call((s,h)=>this._wrapOperation(m,a,s,h),c)}_wrapOperation(m,c,a,o){let s=c.longrunning;s||(s=(0,e.createDefaultBackoffSettings)());const h=this.longrunningDescriptor;return m(a,(v,E)=>{if(v){o(v,null,null,E);return}const y=new r.Operation(E,h,s,c);o(null,y,E)})}fail(m,c){m.callback(c)}result(m){return m.promise}}return longRunningApiCaller.LongrunningApiCaller=u,longRunningApiCaller}var hasRequiredLongRunningDescriptor;function requireLongRunningDescriptor(){if(hasRequiredLongRunningDescriptor)return longRunningDescriptor;hasRequiredLongRunningDescriptor=1,Object.defineProperty(longRunningDescriptor,"__esModule",{value:!0}),longRunningDescriptor.LongRunningDescriptor=void 0;const t=requireLongRunningApiCaller();class e{constructor(u,d,m){this.operationsClient=u,this.responseDecoder=d,this.metadataDecoder=m}getApiCaller(){return new t.LongrunningApiCaller(this)}}return longRunningDescriptor.LongRunningDescriptor=e,longRunningDescriptor}var pageDescriptor={},pagedApiCaller={},resourceCollector={},hasRequiredResourceCollector;function requireResourceCollector(){if(hasRequiredResourceCollector)return resourceCollector;hasRequiredResourceCollector=1,Object.defineProperty(resourceCollector,"__esModule",{value:!0}),resourceCollector.ResourceCollector=void 0;class t{constructor(r,u=-1){this.apiCall=r,this.resources=[],this.maxResults=u}callback(r,u,d){if(r){this.rejectCallback(r);return}for(const c of u)if(this.resources.push(c),this.resources.length===this.maxResults){d=null;break}if(!d){this.resolveCallback(this.resources);return}const m=(...c)=>this.callback(...c);setImmediate(this.apiCall,d,m)}processAllPages(r){return new Promise((u,d)=>{this.resolveCallback=u,this.rejectCallback=d;const m=(...c)=>this.callback(...c);setImmediate(this.apiCall,r,m)})}}return resourceCollector.ResourceCollector=t,resourceCollector}var hasRequiredPagedApiCaller;function requirePagedApiCaller(){if(hasRequiredPagedApiCaller)return pagedApiCaller;hasRequiredPagedApiCaller=1,Object.defineProperty(pagedApiCaller,"__esModule",{value:!0}),pagedApiCaller.PagedApiCaller=void 0;const t=requireCall(),e=requireGoogleError(),r=requireResourceCollector(),u=requireWarnings();class d{constructor(c){this.pageDescriptor=c}generateParseResponseCallback(c,a){const o=this.pageDescriptor.resourceField,s=this.pageDescriptor.responsePageTokenField,h=this.pageDescriptor.requestPageTokenField;return(v,E)=>{if(v){a(v);return}if(!c){a(new e.GoogleError("Undefined request in pagination method callback."));return}if(!E){a(new e.GoogleError("Undefined response in pagination method callback."));return}const y=E[o]||[],A=E[s];let w=null;A&&(w=Object.assign({},c),w[h]=A),a(v,y,w,E)}}wrap(c){const a=this;return function(s,h,v,E){return c(s,h,v,a.generateParseResponseCallback(s,E))}}init(c){return c?new t.OngoingCall(c):new t.OngoingCallPromise}call(c,a,o,s){if(a=Object.assign({},a),!o.autoPaginate){s.call(c,a);return}a.pageSize&&o.autoPaginate&&(0,u.warn)("autoPaginate true","Providing a pageSize without setting autoPaginate to false will still return all results. See https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#auto-pagination for more information on how to configure manual paging","AutopaginateTrueWarning");const h=o.maxResults||-1;new r.ResourceCollector(c,h).processAllPages(a).then(E=>s.callback(null,E),E=>s.callback(E))}fail(c,a){c.callback(a)}result(c){return c.promise}}return pagedApiCaller.PagedApiCaller=d,pagedApiCaller}var hasRequiredPageDescriptor;function requirePageDescriptor(){if(hasRequiredPageDescriptor)return pageDescriptor;hasRequiredPageDescriptor=1,Object.defineProperty(pageDescriptor,"__esModule",{value:!0}),pageDescriptor.PageDescriptor=void 0;const t=require$$1$3,e=requireNormalApiCaller(),r=requireWarnings(),u=requirePagedApiCaller(),d=10;class m{constructor(a,o,s){this.requestPageTokenField=a,this.responsePageTokenField=o,this.resourceField=s}createStream(a,o,s){s?.autoPaginate&&(0,r.warn)("autoPaginate true","Autopaginate will always be set to false in stream paging methods. See more info at https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#auto-pagination for more information on how to configure paging calls","AutopaginateTrueWarning");const h=new t.PassThrough({objectMode:!0});s=Object.assign({},s,{autoPaginate:!1});const v="maxResults"in s?s.maxResults:-1;let E=0,y=!1;function A(w,I,_,S){if(w){h.emit("error",w);return}h.emit("response",S);for(let j=0;j<I.length;++j){if(h._readableState.ended)return;I[j]!==null&&(h.push(I[j]),E++,E===v&&h.end())}if(!h._readableState.ended){if(!_){h.end();return}"pageToken"in s&&delete s.pageToken,h.isPaused()?(o=_,y=!1):setImmediate(a,_,s,A)}}return h.on("resume",()=>{y||(y=!0,a(o,s,A))}),h}asyncIterate(a,o,s){return s?.autoPaginate&&(0,r.warn)("autoPaginate true","Autopaginate will always be set to false in Async paging methods. See more info at https://github.com/googleapis/gax-nodejs/blob/main/client-libraries.md#auto-pagination for more information on how to configure paging calls","AutopaginateTrueWarning"),s=Object.assign({},s,{autoPaginate:!1}),this.createIterator(a,o,s)}createIterator(a,o,s){return{[Symbol.asyncIterator](){let v=o;const E=[];return{async next(){if(E.length>0)return Promise.resolve({done:!1,value:E.shift()});let y=0;for(;E.length===0&&v;){let A;if([A,v]=await a(v,s),A&&!Array.isArray(A))for(const[w,I]of Object.entries(A))E.push([w,I]);else E.push(...A);if(E.length===0&&(++y,y>d))break}return E.length===0?Promise.resolve({done:!0,value:void 0}):Promise.resolve({done:!1,value:E.shift()})}}}}}getApiCaller(a){return a.autoPaginate?new u.PagedApiCaller(this):new e.NormalApiCaller}}return pageDescriptor.PageDescriptor=m,pageDescriptor}var streamDescriptor={},hasRequiredStreamDescriptor;function requireStreamDescriptor(){if(hasRequiredStreamDescriptor)return streamDescriptor;hasRequiredStreamDescriptor=1,Object.defineProperty(streamDescriptor,"__esModule",{value:!0}),streamDescriptor.StreamDescriptor=void 0;const t=requireStreamingApiCaller();class e{constructor(u,d,m){this.type=u,this.streaming=!0,this.rest=d,this.gaxStreamingRetries=m}getApiCaller(){return new t.StreamingApiCaller(this)}}return streamDescriptor.StreamDescriptor=e,streamDescriptor}var bundleDescriptor={},bundleApiCaller={},hasRequiredBundleApiCaller;function requireBundleApiCaller(){if(hasRequiredBundleApiCaller)return bundleApiCaller;hasRequiredBundleApiCaller=1,Object.defineProperty(bundleApiCaller,"__esModule",{value:!0}),bundleApiCaller.BundleApiCaller=void 0;const t=requireCall(),e=requireGoogleError();class r{constructor(d){this.bundler=d}init(d){return d?new t.OngoingCall(d):new t.OngoingCallPromise}wrap(d){return d}call(d,m,c,a){if(!c.isBundling)throw new e.GoogleError("Bundling enabled with no isBundling!");a.call((o,s)=>(this.bundler.schedule(d,o,s),a),m)}fail(d,m){d.callback(m)}result(d){return d.promise}}return bundleApiCaller.BundleApiCaller=r,bundleApiCaller}var bundleExecutor={},bundlingUtils={},hasRequiredBundlingUtils;function requireBundlingUtils(){if(hasRequiredBundlingUtils)return bundlingUtils;hasRequiredBundlingUtils=1,Object.defineProperty(bundlingUtils,"__esModule",{value:!0}),bundlingUtils.computeBundleId=t;function t(r,u){const d=[];let m=!1;for(const c of u){const a=e(r,c);a===void 0?d.push(null):(m=!0,d.push(a))}if(m)return JSON.stringify(d)}function e(r,u){const d=u.split(".");let m=r;for(const c of d)m=m?.[c];return m}return bundlingUtils}var task={},hasRequiredTask;function requireTask(){if(hasRequiredTask)return task;hasRequiredTask=1,Object.defineProperty(task,"__esModule",{value:!0}),task.Task=void 0,task.deepCopyForResponse=r;const t=requireStatus(),e=requireGoogleError();function r(d,m){let c;if(d===null)return null;if(d!==void 0)return Array.isArray(d)?(c=[],d.forEach(a=>{c.push(r(a,null))}),c):d.copy!==void 0?d.copy():d instanceof ArrayBuffer?d.slice(0):typeof d=="object"?(c={},Object.keys(d).forEach(a=>{m&&a===m.field&&Array.isArray(d[a])?c[a]=d[a].slice(m.start,m.end):c[a]=r(d[a],null)}),c):d}class u{constructor(m,c,a,o){this._apiCall=m,this._request=c,this._bundledField=a,this._subresponseField=o,this._data=[]}getElementCount(){let m=0;for(let c=0;c<this._data.length;++c)m+=this._data[c].elements.length;return m}getRequestByteSize(){let m=0;for(let c=0;c<this._data.length;++c)m+=this._data[c].bytes;return m}run(){if(this._data.length===0)return[];const m=this._request,c=[],a=[];for(let s=0;s<this._data.length;++s)c.push(...this._data[s].elements),a.push(this._data[s].callback.id);m[this._bundledField]=c;const o=this;return this.callCanceller=this._apiCall(m,(s,h)=>{const v=[];if(s)o._data.forEach(()=>{v.push(void 0)});else{let E=null;o._subresponseField&&(E={field:o._subresponseField,start:0}),o._data.forEach(y=>{E&&(E.end=E.start+y.elements.length),v.push(r(h,E)),E&&(E.start=E.end)})}for(let E=0;E<o._data.length;++E)if(o._data[E].cancelled){const y=new e.GoogleError("cancelled");y.code=t.Status.CANCELLED,o._data[E].callback(y)}else o._data[E].callback(s,v[E])}),a}extend(m,c,a){this._data.push({elements:m,bytes:c,callback:a})}cancel(m){if(this.callCanceller){let c=!0;return this._data.forEach(a=>{a.callback.id===m&&(a.cancelled=!0),a.cancelled||(c=!1)}),c&&this.callCanceller.cancel(),c}for(let c=0;c<this._data.length;++c)if(this._data[c].callback.id===m){const a=new e.GoogleError("cancelled");a.code=t.Status.CANCELLED,this._data[c].callback(a),this._data.splice(c,1);break}return this._data.length===0}}return task.Task=u,task}var hasRequiredBundleExecutor;function requireBundleExecutor(){if(hasRequiredBundleExecutor)return bundleExecutor;hasRequiredBundleExecutor=1,Object.defineProperty(bundleExecutor,"__esModule",{value:!0}),bundleExecutor.BundleExecutor=void 0;const t=requireStatus(),e=requireGoogleError(),r=requireWarnings(),u=requireBundlingUtils(),d=requireTask();function m(){}class c{constructor(o,s){this._options=o,this._descriptor=s,this._tasks={},this._timers={},this._invocations={},this._invocationId=0}schedule(o,s,h){const v=(0,u.computeBundleId)(s,this._descriptor.requestDiscriminatorFields);if(h=h||m,v===void 0)return(0,r.warn)("bundling_schedule_bundleid_undefined",`The request does not have enough information for request bundling. Invoking immediately. Request: ${JSON.stringify(s)} discriminator fields: ${this._descriptor.requestDiscriminatorFields}`),o(s,h);if(s[this._descriptor.bundledField]===void 0)return(0,r.warn)("bundling_no_bundled_field",`Request does not contain field ${this._descriptor.bundledField} that must present for bundling. Invoking immediately. Request: ${JSON.stringify(s)}`),o(s,h);v in this._tasks||(this._tasks[v]=new d.Task(o,s,this._descriptor.bundledField,this._descriptor.subresponseField));let E=this._tasks[v];h.id=String(this._invocationId++),this._invocations[h.id]=v;const y=s[this._descriptor.bundledField],A=y.length;let w=0;const I=this;y.forEach(P=>{w+=this._descriptor.byteLengthFunction(P)});const _=this._options.elementCountLimit||0,S=this._options.requestByteLimit||0;if(_>0&&A>_||S>0&&w>=S){let P;_>0&&A>_?P="The number of elements "+A+" exceeds the limit "+this._options.elementCountLimit:P="The required bytes "+w+" exceeds the limit "+this._options.requestByteLimit;const Z=new e.GoogleError(P);return Z.code=t.Status.INVALID_ARGUMENT,h(Z),{cancel:m}}const j=E.getElementCount(),K=E.getRequestByteSize();(_>0&&A+j>=_||S>0&&w+K>=S)&&(this._runNow(v),this._tasks[v]=new d.Task(o,s,this._descriptor.bundledField,this._descriptor.subresponseField),E=this._tasks[v]),E.extend(y,w,h);const J={cancel(){I._cancel(h.id)}},H=this._options.elementCountThreshold||0,U=this._options.requestByteThreshold||0;return H>0&&E.getElementCount()>=H||U>0&&E.getRequestByteSize()>=U?(this._runNow(v),J):(!(v in this._timers)&&this._options.delayThreshold>0&&(this._timers[v]=setTimeout(()=>{delete this._timers[v],this._runNow(v)},this._options.delayThreshold)),J)}_maybeClearTimeout(o){if(o in this._timers){const s=this._timers[o];delete this._timers[o],clearTimeout(s)}}_cancel(o){if(!(o in this._invocations))return;const s=this._invocations[o];if(!(s in this._tasks))return;const h=this._tasks[s];delete this._invocations[o],h.cancel(o)&&(this._maybeClearTimeout(s),delete this._tasks[s])}_runNow(o){if(!(o in this._tasks)){(0,r.warn)("bundle_runnow_bundleid_unknown",`No such bundleid: ${o}`);return}this._maybeClearTimeout(o);const s=this._tasks[o];delete this._tasks[o],s.run().forEach(h=>{delete this._invocations[h]})}}return bundleExecutor.BundleExecutor=c,bundleExecutor}var hasRequiredBundleDescriptor;function requireBundleDescriptor(){if(hasRequiredBundleDescriptor)return bundleDescriptor;hasRequiredBundleDescriptor=1,Object.defineProperty(bundleDescriptor,"__esModule",{value:!0}),bundleDescriptor.BundleDescriptor=void 0;const t=requireNormalApiCaller(),e=requireBundleApiCaller(),r=requireBundleExecutor(),u=requireUtil$2();class d{constructor(c,a,o,s){!s&&typeof o=="function"&&(s=o,o=null),this.bundledField=c,this.requestDiscriminatorFields=a.map(u.toCamelCase),this.subresponseField=o,this.byteLengthFunction=s}getApiCaller(c){return c.isBundling===!1?new t.NormalApiCaller:new e.BundleApiCaller(new r.BundleExecutor(c.bundleOptions,this))}}return bundleDescriptor.BundleDescriptor=d,bundleDescriptor}var hasRequiredDescriptor;function requireDescriptor(){return hasRequiredDescriptor||(hasRequiredDescriptor=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BundleDescriptor=t.StreamDescriptor=t.PageDescriptor=t.LongrunningDescriptor=void 0;var e=requireLongRunningDescriptor();Object.defineProperty(t,"LongrunningDescriptor",{enumerable:!0,get:function(){return e.LongRunningDescriptor}});var r=requirePageDescriptor();Object.defineProperty(t,"PageDescriptor",{enumerable:!0,get:function(){return r.PageDescriptor}});var u=requireStreamDescriptor();Object.defineProperty(t,"StreamDescriptor",{enumerable:!0,get:function(){return u.StreamDescriptor}});var d=requireBundleDescriptor();Object.defineProperty(t,"BundleDescriptor",{enumerable:!0,get:function(){return d.BundleDescriptor}})}(descriptor)),descriptor}const interfaces$4={"google.longrunning.Operations":{retry_codes:{idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"],non_idempotent:[]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:9e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:9e4,total_timeout_millis:6e5}},methods:{GetOperation:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},ListOperations:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},CancelOperation:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},DeleteOperation:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"}}}},require$$3={interfaces:interfaces$4},nested$5=JSON.parse('{"google":{"nested":{"longrunning":{"options":{"cc_enable_arenas":true,"csharp_namespace":"Google.LongRunning","go_package":"google.golang.org/genproto/googleapis/longrunning;longrunning","java_multiple_files":true,"java_outer_classname":"OperationsProto","java_package":"com.google.longrunning","php_namespace":"Google\\\\LongRunning"},"nested":{"operationInfo":{"type":"google.longrunning.OperationInfo","id":1049,"extend":"google.protobuf.MethodOptions"},"Operations":{"options":{"(google.api.default_host)":"longrunning.googleapis.com"},"methods":{"ListOperations":{"requestType":"ListOperationsRequest","responseType":"ListOperationsResponse","options":{"(google.api.http).get":"/v1/{name=operations}","(google.api.method_signature)":"name,filter"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations}"}},{"(google.api.method_signature)":"name,filter"}]},"GetOperation":{"requestType":"GetOperationRequest","responseType":"Operation","options":{"(google.api.http).get":"/v1/operations/{name}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/operations/{name}"}},{"(google.api.method_signature)":"name"}]},"DeleteOperation":{"requestType":"DeleteOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"CancelOperation":{"requestType":"CancelOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{name=operations/**}:cancel","(google.api.http).body":"*","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=operations/**}:cancel","body":"*"}},{"(google.api.method_signature)":"name"}]},"WaitOperation":{"requestType":"WaitOperationRequest","responseType":"Operation"}}},"Operation":{"oneofs":{"result":{"oneof":["error","response"]}},"fields":{"name":{"type":"string","id":1},"metadata":{"type":"google.protobuf.Any","id":2},"done":{"type":"bool","id":3},"error":{"type":"google.rpc.Status","id":4},"response":{"type":"google.protobuf.Any","id":5}}},"GetOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"ListOperationsRequest":{"fields":{"name":{"type":"string","id":4},"filter":{"type":"string","id":1},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListOperationsResponse":{"fields":{"operations":{"rule":"repeated","type":"Operation","id":1},"nextPageToken":{"type":"string","id":2}}},"CancelOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"DeleteOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"WaitOperationRequest":{"fields":{"name":{"type":"string","id":1},"timeout":{"type":"google.protobuf.Duration","id":2}}},"OperationInfo":{"fields":{"responseType":{"type":"string","id":1},"metadataType":{"type":"string","id":2}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ClientProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"}}},"protobuf":{"options":{"go_package":"github.com/golang/protobuf/protoc-gen-go/descriptor;descriptor","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"phpGenericServices":{"type":"bool","id":42,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Empty":{"fields":{}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$4={nested:nested$5};var transcoding={},hasRequiredTranscoding;function requireTranscoding(){if(hasRequiredTranscoding)return transcoding;hasRequiredTranscoding=1,Object.defineProperty(transcoding,"__esModule",{value:!0}),transcoding.getField=d,transcoding.deepCopyWithoutMatchedFields=m,transcoding.deleteField=c,transcoding.buildQueryStringComponents=a,transcoding.encodeWithSlashes=o,transcoding.encodeWithoutSlashes=s,transcoding.applyPattern=v,transcoding.match=y,transcoding.flattenObject=A,transcoding.isProto3OptionalField=w,transcoding.transcode=I,transcoding.overrideHttpRules=_;const t=requireUtil$2(),e="(google.api.http)",r="proto3_optional",u=["get","post","put","patch","delete"];function d(S,j,K=!1){const J=j.split(".");let H=S;for(const U of J){if(typeof H!="object")return;H=H[U]}if(!(!K&&typeof H=="object"&&!Array.isArray(H)&&H!==null))return H}function m(S,j,K=""){if(typeof S!="object"||S===null)return S;const J=Object.assign({},S);for(const H in J){if(j.has(`${K}${H}`)){delete J[H];continue}const U=`${K}${H}.`;Array.isArray(J[H])?J[H]=J[H].map(P=>m(P,new Set)):typeof J[H]=="object"&&J[H]!==null&&(J[H]=m(J[H],j,U))}return J}function c(S,j){const K=j.split(".");for(;K.length>1;){if(typeof S!="object")return;const H=K.shift();S=S[H]}const J=K.shift();typeof S=="object"&&delete S[J]}function a(S,j=""){const K=[];for(const J in S)if(Array.isArray(S[J]))for(const H of S[J])K.push(`${j}${s(J)}=${s(H.toString())}`);else typeof S[J]=="object"&&S[J]!==null?K.push(...a(S[J],`${J}.`)):K.push(`${j}${s(J)}=${s(S[J]===null?"null":S[J].toString())}`);return K}function o(S){return S.split("").map(j=>j.match(/[-_.~0-9a-zA-Z]/)?j:encodeURIComponent(j)).join("")}function s(S){return S.split("").map(j=>j.match(/[-_.~0-9a-zA-Z/]/)?j:encodeURIComponent(j)).join("")}function h(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(S,j){if(!S||S==="*")return o(j);if(!S.includes("*")&&S!==j)return;const K=new RegExp("^"+h(S).replace(/\\\*\\\*/g,"(.+)").replace(/\\\*/g,"([^/]+)")+"$");if(j.match(K))return s(j)}function E(S){return S.split(".").map(K=>(0,t.toCamelCase)(K)).join(".")}function y(S,j){let K=j;const J=[];for(;;){const H=K.match(/^(.*)\{([^}=]+)(?:=([^}]*))?\}(.*)/);if(!H)break;const[,U,P,Z,ie]=H,ue=E(P);J.push(E(ue));const le=d(S,ue);if(le===void 0)return;const ne=v(Z,le===null?"null":le.toString());if(ne===void 0)return;K=U+ne+ie}return{matchedFields:J,url:K}}function A(S){const j={};for(const K in S)if(S[K]!==void 0){if(Array.isArray(S[K])){j[K]=S[K];continue}if(typeof S[K]=="object"&&S[K]!==null){const J=A(S[K]);for(const H in J)j[`${K}.${H}`]=J[H];continue}j[K]=S[K]}return j}function w(S){return S&&S.options&&S.options[r]}function I(S,j){const K=[];for(const J of j){if(!(e in J))continue;const H=J[e];if(K.push(H),H?.additional_bindings){const U=Array.isArray(H.additional_bindings)?H.additional_bindings:[H.additional_bindings];K.push(...U)}}for(const J of K)for(const H of u){if(!(H in J))continue;const U=J[H],P=y(S,U);if(P===void 0)continue;const{url:Z,matchedFields:ie}=P;let ue=m(S,new Set(ie));if(J.body==="*")return{httpMethod:H,url:Z,queryString:"",data:ue};const le=ue;J.body?(ue=d(le,E(J.body),!0),c(le,E(J.body))):ue="";const ye=a(le).join("&");return(!ue||typeof ue=="object"&&Object.keys(ue).length===0)&&(ue=""),{httpMethod:H,url:Z,queryString:ye,data:ue}}}function _(S,j){for(const K of S){if(!K.selector)continue;const J=j.lookup(K.selector);if(!(!J||!J.parsedOptions))for(const H of J.parsedOptions){if(!(e in H))continue;const U=H[e];for(const P in U){if(P in K){if(P==="additional_bindings")continue;U[P]=K[P]}K.additional_bindings&&(U.additional_bindings=U.additional_bindings?Array.isArray(U.additional_bindings)?U.additional_bindings:[U.additional_bindings]:[],U.additional_bindings.push(...K.additional_bindings))}}}}return transcoding}const version$4="4.6.1",require$$17={version:version$4};var hasRequiredOperationsClient;function requireOperationsClient(){return hasRequiredOperationsClient||(hasRequiredOperationsClient=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OperationsClientBuilder=t.OperationsClient=t.ALL_SCOPES=t.SERVICE_ADDRESS=void 0;const e=requireCreateApiCall(),r=requireDescriptor(),u=requireGax(),d=require$$3,m=require$$4,c=requireTranscoding();t.SERVICE_ADDRESS="longrunning.googleapis.com";const a=require$$17.version,o=443,s="gapic/0.7.1";t.ALL_SCOPES=[];class h{constructor(y,A,w){const I=Object.assign({servicePath:t.SERVICE_ADDRESS,port:o,clientConfig:{}},w),_=["gl-node/"+process.versions.node];I.libName&&I.libVersion&&_.push(I.libName+"/"+I.libVersion),_.push(s,"gax/"+a),I.fallback?_.push("gl-web/"+a):_.push("grpc/"+y.grpcVersion);const S=y.constructSettings("google.longrunning.Operations",d,I.clientConfig||{},{"x-goog-api-client":_.join(" ")});this.auth=y.auth,this.innerApiCalls={},this.descriptor={listOperations:new r.PageDescriptor("pageToken","nextPageToken","operations")},this.operationsStub=y.createStub(I.fallback?A.lookupService("google.longrunning.Operations"):A.google.longrunning.Operations,I);const j=["getOperation","listOperations","cancelOperation","deleteOperation"];for(const K of j){const J=this.operationsStub.then(H=>(...U)=>H[K].apply(H,U),H=>()=>{throw H});this.innerApiCalls[K]=(0,e.createApiCall)(J,S[K],this.descriptor[K])}}close(){this.operationsStub.then(y=>y.close())}getProjectId(y){if(this.auth&&"getProjectId"in this.auth)return this.auth.getProjectId(y);if(y)y(new Error("Cannot determine project ID."));else return Promise.reject("Cannot determine project ID.")}getOperationInternal(y,A,w){return y=y||{},A=A||{},this.innerApiCalls.getOperation(y,A,w)}getOperation(y,A,w){let I;return A instanceof Function&&w===void 0?(w=A,I={}):I=A,y=y||{},I=I||{},this.innerApiCalls.getOperation(y,I,w)}listOperations(y,A,w){let I;return A instanceof Function&&w===void 0?(w=A,I={}):I=A,y=y||{},I=I||{},this.innerApiCalls.listOperations(y,I,w)}listOperationsStream(y,A){const w=new u.CallSettings(A);return this.descriptor.listOperations.createStream(this.innerApiCalls.listOperations,y,w)}listOperationsAsync(y,A){y=y||{},A=A||{};const w=new u.CallSettings(A);return this.descriptor.listOperations.asyncIterate(this.innerApiCalls.listOperations,y,w)}cancelOperation(y,A,w){let I;return A instanceof Function&&w===void 0?(w=A,I={}):I=A,y=y||{},I=I||{},this.innerApiCalls.cancelOperation(y,I,w)}deleteOperation(y,A,w){let I;return A instanceof Function&&w===void 0?(w=A,I={}):I=A,y=y||{},I=I||{},this.innerApiCalls.deleteOperation(y,I,w)}}t.OperationsClient=h;class v{constructor(y,A){A&&y.httpRules&&(0,c.overrideHttpRules)(y.httpRules,A);const w=A??y.loadProtoJSON(m);this.operationsClient=I=>(y.fallback&&(I.fallback=y.fallback),new h(y,w,I)),Object.assign(this.operationsClient,h)}}t.OperationsClientBuilder=v}(operationsClient)),operationsClient}var fallbackRest={},hasRequiredFallbackRest;function requireFallbackRest(){if(hasRequiredFallbackRest)return fallbackRest;hasRequiredFallbackRest=1,Object.defineProperty(fallbackRest,"__esModule",{value:!0}),fallbackRest.encodeRequest=d,fallbackRest.decodeResponse=m;const t=requireSrc$1(),e=requireFallback(),r=requireGoogleError(),u=requireTranscoding();function d(c,a,o,s,h,v){const E={"Content-Type":"application/json"},y=c.resolvedRequestType.fromObject(h),A=t.toProto3JSON(y,{numericEnums:v});if(!A)throw new Error(`Cannot send null request to RPC ${c.name}.`);if(typeof A!="object"||Array.isArray(A))throw new Error(`Request to RPC ${c.name} must be an object.`);const w=(0,u.transcode)(A,c.parsedOptions);if(!w)throw new Error(`Cannot build HTTP request for ${JSON.stringify(A)}, method: ${c.name}`);v&&(w.queryString=(w.queryString?`${w.queryString}&`:"")+"$alt=json%3Benum-encoding=int");const I=w.httpMethod.toUpperCase(),_=JSON.stringify(w.data),S=`${a}://${o}:${s}/${w.url.replace(/^\//,"")}?${w.queryString}`;return{method:I,url:S,headers:E,body:_}}function m(c,a,o){const s=new TextDecoder().decode(o);if(!s)throw new Error(`Received null response from RPC ${c.name}`);const h=JSON.parse(s);if(!a)throw r.GoogleError.parseHttpError(h);const v=t.fromProto3JSON(c.resolvedResponseType,h);if(!v)throw new Error(`Received null or malformed response from JSON serializer from RPC ${c.name}`);return c.resolvedResponseType.toObject(v,e.defaultToObjectOptions)}return fallbackRest}var fallbackServiceStub={},streamArrayParser={},hasRequiredStreamArrayParser;function requireStreamArrayParser(){if(hasRequiredStreamArrayParser)return streamArrayParser;hasRequiredStreamArrayParser=1,Object.defineProperty(streamArrayParser,"__esModule",{value:!0}),streamArrayParser.StreamArrayParser=void 0;const t=requireBrowser(),e=require$$1$3,r=requireFallbackRest(),u=requireFeatureDetection();class d extends e.Transform{constructor(c,a){super(Object.assign({},a,{readableObjectMode:!0})),this._done=!1,this._prevBlock=Buffer.from(""),this._isInString=!1,this._isSkipped=!1,this._level=0,this.rpc=c,this.cancelController=(0,u.hasAbortController)()?new AbortController:new t.AbortController,this.cancelSignal=this.cancelController.signal,this.cancelRequested=!1}_transform(c,a,o){let s=0,h=0;for(this._level===0&&h===0&&(String.fromCharCode(c[0])!=="["&&this.emit("error",new Error(`Internal Error: API service stream data must start with a '[' and close with the corresponding ']', but it start with ${String.fromCharCode(c[0])}`)),h++,this._level++);h<c.length;){const v=String.fromCharCode(c[h]);if(this._isSkipped)this._isSkipped=!1;else switch(v){case"{":this._isInString||this._level++,!this._isInString&&this._level===2&&(s=h);break;case'"':this._isInString=!this._isInString;break;case"}":if(this._isInString||this._level--,!this._isInString&&this._level===1){const E=Buffer.concat([this._prevBlock,c.slice(s,h+1)]);try{const y=(0,r.decodeResponse)(this.rpc,!0,E);this.push(y)}catch(y){this.emit("error",y)}s=h+1,this._prevBlock=Buffer.from("")}break;case"]":!this._isInString&&this._level===1&&(this._done=!0,this.push(null));break;case"\\":this._isSkipped=!0;break}h++}this._level>1&&(this._prevBlock=Buffer.concat([this._prevBlock,c.slice(s,h)])),o()}_flush(c){c()}cancel(){this._done=!0,this.cancelRequested=!0,this.cancelController.abort(),this.end()}}return streamArrayParser.StreamArrayParser=d,streamArrayParser}var hasRequiredFallbackServiceStub;function requireFallbackServiceStub(){if(hasRequiredFallbackServiceStub)return fallbackServiceStub;hasRequiredFallbackServiceStub=1,Object.defineProperty(fallbackServiceStub,"__esModule",{value:!0}),fallbackServiceStub.generateServiceStub=m;const t=requireBrowser$3(),e=requireBrowser(),r=requireFeatureDetection(),u=requireStreamArrayParser(),d=require$$1$3;function m(c,a,o,s,h,v,E,y){const A=(0,r.hasWindowFetch)()?window.fetch:t.default,w={close:()=>({cancel:()=>{}})};for(const[I,_]of Object.entries(c))w[I]=(S,j,K,J)=>{j??(j={});let H;try{H=v(_,a,o,s,S,y)}catch(ne){return J&&J(ne),{cancel(){}}}const U=(0,r.hasAbortController)()?new AbortController:new e.AbortController,P=U.signal;let Z=!1;const ie=H.url,ue=H.headers;for(const ne of Object.keys(j))ue[ne]=j[ne][0];const le=new u.StreamArrayParser(_);return h.getRequestHeaders().then(ne=>{const ye={headers:{...ne,...ue},body:H.body,method:H.method,signal:P};return(H.method==="GET"||H.method==="DELETE")&&delete ye.body,A(ie,ye)}).then(ne=>{if(ne.ok&&_.responseStream){(0,d.pipeline)(ne.body,le,ye=>{ye&&(!Z||ye instanceof Error&&ye.name!=="AbortError")&&(J&&J(ye),le.emit("error",ye))});return}else return Promise.all([Promise.resolve(ne.ok),ne.arrayBuffer()]).then(([ye,fe])=>{const Te=E(_,ye,fe);J(null,Te)}).catch(ye=>{if(!Z||ye.name!=="AbortError")if(_.responseStream)J&&J(ye),le.emit("error",ye);else if(J)J(ye);else throw ye})}).catch(ne=>{if(_.responseStream)J&&J(ne),le.emit("error",ne);else if(J)J(ne);else throw ne}),_.responseStream?le:{cancel:()=>{Z=!0,U.abort()}}};return w}return fallbackServiceStub}var iam_service={exports:{}},hasRequiredIam_service;function requireIam_service(){return hasRequiredIam_service||(hasRequiredIam_service=1,function(t){(e=>{typeof commonjsRequire=="function"&&t&&t.exports&&(t.exports=e(requireMinimal()))})(function(e){var r,u,d,m,c,a=e.Reader,o=e.Writer,s=e.util,h=e.roots.iam_protos||(e.roots.iam_protos={});function v(l,X,oe){e.rpc.Service.call(this,l,X,oe)}function E(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function y(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function A(l){if(this.permissions=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function w(l){if(this.permissions=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function I(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function _(l){if(this.bindings=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function S(l){if(this.members=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function j(l){if(this.bindingDeltas=[],this.auditConfigDeltas=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function K(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function J(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function H(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function U(l){if(this.rules=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function P(l){if(this.additionalBindings=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Z(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ie(l){if(this.pattern=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ue(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function le(l){if(this.file=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ne(l){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ye(l){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function fe(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Te(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Ae(l){if(this.uninterpretedOption=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Se(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function be(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function we(l){if(this.value=[],this.reservedRange=[],this.reservedName=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Ce(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function je(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Fe(l){if(this.method=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Ve(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Ge(l){if(this.uninterpretedOption=[],this[".google.api.resourceDefinition"]=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Le(l){if(this.uninterpretedOption=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Be(l){if(this.uninterpretedOption=[],this[".google.api.fieldBehavior"]=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function $e(l){if(this.uninterpretedOption=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function he(l){if(this.uninterpretedOption=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function p(l){if(this.uninterpretedOption=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function V(l){if(this.uninterpretedOption=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function R(l){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ce(l){if(this.name=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function Re(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ke(l){if(this.location=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function qe(l){if(this.path=[],this.span=[],this.leadingDetachedComments=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function g(l){if(this.annotation=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ee(l){if(this.path=[],l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}function ae(l){if(l)for(var X=Object.keys(l),oe=0;oe<X.length;++oe)l[X[oe]]!=null&&(this[X[oe]]=l[X[oe]])}return h.google=((c={}).iam=((d={}).v1=((u={}).IAMPolicy=(((v.prototype=Object.create(e.rpc.Service.prototype)).constructor=v).create=function(l,X,oe){return new this(l,X,oe)},Object.defineProperty(v.prototype.setIamPolicy=function l(X,oe){return this.rpcCall(l,h.google.iam.v1.SetIamPolicyRequest,h.google.iam.v1.Policy,X,oe)},"name",{value:"SetIamPolicy"}),Object.defineProperty(v.prototype.getIamPolicy=function l(X,oe){return this.rpcCall(l,h.google.iam.v1.GetIamPolicyRequest,h.google.iam.v1.Policy,X,oe)},"name",{value:"GetIamPolicy"}),Object.defineProperty(v.prototype.testIamPermissions=function l(X,oe){return this.rpcCall(l,h.google.iam.v1.TestIamPermissionsRequest,h.google.iam.v1.TestIamPermissionsResponse,X,oe)},"name",{value:"TestIamPermissions"}),v),u.SetIamPolicyRequest=(E.prototype.resource="",E.prototype.policy=null,E.create=function(l){return new E(l)},E.encode=function(l,X){return X=X||o.create(),l.resource!=null&&Object.hasOwnProperty.call(l,"resource")&&X.uint32(10).string(l.resource),l.policy!=null&&Object.hasOwnProperty.call(l,"policy")&&h.google.iam.v1.Policy.encode(l.policy,X.uint32(18).fork()).ldelim(),X},E.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},E.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.SetIamPolicyRequest;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.resource=l.string();break;case 2:_e.policy=h.google.iam.v1.Policy.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},E.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},E.verify=function(l){return typeof l!="object"||l===null?"object expected":l.resource!=null&&l.hasOwnProperty("resource")&&!s.isString(l.resource)?"resource: string expected":l.policy!=null&&l.hasOwnProperty("policy")&&(l=h.google.iam.v1.Policy.verify(l.policy),l)?"policy."+l:null},E.fromObject=function(l){if(l instanceof h.google.iam.v1.SetIamPolicyRequest)return l;var X=new h.google.iam.v1.SetIamPolicyRequest;if(l.resource!=null&&(X.resource=String(l.resource)),l.policy!=null){if(typeof l.policy!="object")throw TypeError(".google.iam.v1.SetIamPolicyRequest.policy: object expected");X.policy=h.google.iam.v1.Policy.fromObject(l.policy)}return X},E.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.resource="",oe.policy=null),l.resource!=null&&l.hasOwnProperty("resource")&&(oe.resource=l.resource),l.policy!=null&&l.hasOwnProperty("policy")&&(oe.policy=h.google.iam.v1.Policy.toObject(l.policy,X)),oe},E.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},E),u.GetIamPolicyRequest=(y.prototype.resource="",y.prototype.options=null,y.create=function(l){return new y(l)},y.encode=function(l,X){return X=X||o.create(),l.resource!=null&&Object.hasOwnProperty.call(l,"resource")&&X.uint32(10).string(l.resource),l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.iam.v1.GetPolicyOptions.encode(l.options,X.uint32(18).fork()).ldelim(),X},y.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},y.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.GetIamPolicyRequest;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.resource=l.string();break;case 2:_e.options=h.google.iam.v1.GetPolicyOptions.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},y.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},y.verify=function(l){return typeof l!="object"||l===null?"object expected":l.resource!=null&&l.hasOwnProperty("resource")&&!s.isString(l.resource)?"resource: string expected":l.options!=null&&l.hasOwnProperty("options")&&(l=h.google.iam.v1.GetPolicyOptions.verify(l.options),l)?"options."+l:null},y.fromObject=function(l){if(l instanceof h.google.iam.v1.GetIamPolicyRequest)return l;var X=new h.google.iam.v1.GetIamPolicyRequest;if(l.resource!=null&&(X.resource=String(l.resource)),l.options!=null){if(typeof l.options!="object")throw TypeError(".google.iam.v1.GetIamPolicyRequest.options: object expected");X.options=h.google.iam.v1.GetPolicyOptions.fromObject(l.options)}return X},y.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.resource="",oe.options=null),l.resource!=null&&l.hasOwnProperty("resource")&&(oe.resource=l.resource),l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.iam.v1.GetPolicyOptions.toObject(l.options,X)),oe},y.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},y),u.TestIamPermissionsRequest=(A.prototype.resource="",A.prototype.permissions=s.emptyArray,A.create=function(l){return new A(l)},A.encode=function(l,X){if(X=X||o.create(),l.resource!=null&&Object.hasOwnProperty.call(l,"resource")&&X.uint32(10).string(l.resource),l.permissions!=null&&l.permissions.length)for(var oe=0;oe<l.permissions.length;++oe)X.uint32(18).string(l.permissions[oe]);return X},A.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},A.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.TestIamPermissionsRequest;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.resource=l.string();break;case 2:_e.permissions&&_e.permissions.length||(_e.permissions=[]),_e.permissions.push(l.string());break;default:l.skipType(7&He)}}return _e},A.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},A.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.resource!=null&&l.hasOwnProperty("resource")&&!s.isString(l.resource))return"resource: string expected";if(l.permissions!=null&&l.hasOwnProperty("permissions")){if(!Array.isArray(l.permissions))return"permissions: array expected";for(var X=0;X<l.permissions.length;++X)if(!s.isString(l.permissions[X]))return"permissions: string[] expected"}return null},A.fromObject=function(l){if(l instanceof h.google.iam.v1.TestIamPermissionsRequest)return l;var X=new h.google.iam.v1.TestIamPermissionsRequest;if(l.resource!=null&&(X.resource=String(l.resource)),l.permissions){if(!Array.isArray(l.permissions))throw TypeError(".google.iam.v1.TestIamPermissionsRequest.permissions: array expected");X.permissions=[];for(var oe=0;oe<l.permissions.length;++oe)X.permissions[oe]=String(l.permissions[oe])}return X},A.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.permissions=[]),X.defaults&&(oe.resource=""),l.resource!=null&&l.hasOwnProperty("resource")&&(oe.resource=l.resource),l.permissions&&l.permissions.length){oe.permissions=[];for(var _e=0;_e<l.permissions.length;++_e)oe.permissions[_e]=l.permissions[_e]}return oe},A.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},A),u.TestIamPermissionsResponse=(w.prototype.permissions=s.emptyArray,w.create=function(l){return new w(l)},w.encode=function(l,X){if(X=X||o.create(),l.permissions!=null&&l.permissions.length)for(var oe=0;oe<l.permissions.length;++oe)X.uint32(10).string(l.permissions[oe]);return X},w.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},w.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.TestIamPermissionsResponse;l.pos<oe;){var He=l.uint32();He>>>3==1?(_e.permissions&&_e.permissions.length||(_e.permissions=[]),_e.permissions.push(l.string())):l.skipType(7&He)}return _e},w.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},w.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.permissions!=null&&l.hasOwnProperty("permissions")){if(!Array.isArray(l.permissions))return"permissions: array expected";for(var X=0;X<l.permissions.length;++X)if(!s.isString(l.permissions[X]))return"permissions: string[] expected"}return null},w.fromObject=function(l){if(l instanceof h.google.iam.v1.TestIamPermissionsResponse)return l;var X=new h.google.iam.v1.TestIamPermissionsResponse;if(l.permissions){if(!Array.isArray(l.permissions))throw TypeError(".google.iam.v1.TestIamPermissionsResponse.permissions: array expected");X.permissions=[];for(var oe=0;oe<l.permissions.length;++oe)X.permissions[oe]=String(l.permissions[oe])}return X},w.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.permissions=[]),l.permissions&&l.permissions.length){oe.permissions=[];for(var _e=0;_e<l.permissions.length;++_e)oe.permissions[_e]=l.permissions[_e]}return oe},w.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},w),u.GetPolicyOptions=(I.prototype.requestedPolicyVersion=0,I.create=function(l){return new I(l)},I.encode=function(l,X){return X=X||o.create(),l.requestedPolicyVersion!=null&&Object.hasOwnProperty.call(l,"requestedPolicyVersion")&&X.uint32(8).int32(l.requestedPolicyVersion),X},I.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},I.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.GetPolicyOptions;l.pos<oe;){var He=l.uint32();He>>>3==1?_e.requestedPolicyVersion=l.int32():l.skipType(7&He)}return _e},I.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},I.verify=function(l){return typeof l!="object"||l===null?"object expected":l.requestedPolicyVersion!=null&&l.hasOwnProperty("requestedPolicyVersion")&&!s.isInteger(l.requestedPolicyVersion)?"requestedPolicyVersion: integer expected":null},I.fromObject=function(l){var X;return l instanceof h.google.iam.v1.GetPolicyOptions?l:(X=new h.google.iam.v1.GetPolicyOptions,l.requestedPolicyVersion!=null&&(X.requestedPolicyVersion=0|l.requestedPolicyVersion),X)},I.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.requestedPolicyVersion=0),l.requestedPolicyVersion!=null&&l.hasOwnProperty("requestedPolicyVersion")&&(oe.requestedPolicyVersion=l.requestedPolicyVersion),oe},I.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},I),u.Policy=(_.prototype.version=0,_.prototype.bindings=s.emptyArray,_.prototype.etag=s.newBuffer([]),_.create=function(l){return new _(l)},_.encode=function(l,X){if(X=X||o.create(),l.version!=null&&Object.hasOwnProperty.call(l,"version")&&X.uint32(8).int32(l.version),l.etag!=null&&Object.hasOwnProperty.call(l,"etag")&&X.uint32(26).bytes(l.etag),l.bindings!=null&&l.bindings.length)for(var oe=0;oe<l.bindings.length;++oe)h.google.iam.v1.Binding.encode(l.bindings[oe],X.uint32(34).fork()).ldelim();return X},_.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},_.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.Policy;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.version=l.int32();break;case 4:_e.bindings&&_e.bindings.length||(_e.bindings=[]),_e.bindings.push(h.google.iam.v1.Binding.decode(l,l.uint32()));break;case 3:_e.etag=l.bytes();break;default:l.skipType(7&He)}}return _e},_.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},_.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.version!=null&&l.hasOwnProperty("version")&&!s.isInteger(l.version))return"version: integer expected";if(l.bindings!=null&&l.hasOwnProperty("bindings")){if(!Array.isArray(l.bindings))return"bindings: array expected";for(var X=0;X<l.bindings.length;++X){var oe=h.google.iam.v1.Binding.verify(l.bindings[X]);if(oe)return"bindings."+oe}}return l.etag!=null&&l.hasOwnProperty("etag")&&!(l.etag&&typeof l.etag.length=="number"||s.isString(l.etag))?"etag: buffer expected":null},_.fromObject=function(l){if(l instanceof h.google.iam.v1.Policy)return l;var X=new h.google.iam.v1.Policy;if(l.version!=null&&(X.version=0|l.version),l.bindings){if(!Array.isArray(l.bindings))throw TypeError(".google.iam.v1.Policy.bindings: array expected");X.bindings=[];for(var oe=0;oe<l.bindings.length;++oe){if(typeof l.bindings[oe]!="object")throw TypeError(".google.iam.v1.Policy.bindings: object expected");X.bindings[oe]=h.google.iam.v1.Binding.fromObject(l.bindings[oe])}}return l.etag!=null&&(typeof l.etag=="string"?s.base64.decode(l.etag,X.etag=s.newBuffer(s.base64.length(l.etag)),0):l.etag.length&&(X.etag=l.etag)),X},_.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.bindings=[]),X.defaults&&(oe.version=0,X.bytes===String?oe.etag="":(oe.etag=[],X.bytes!==Array&&(oe.etag=s.newBuffer(oe.etag)))),l.version!=null&&l.hasOwnProperty("version")&&(oe.version=l.version),l.etag!=null&&l.hasOwnProperty("etag")&&(oe.etag=X.bytes===String?s.base64.encode(l.etag,0,l.etag.length):X.bytes===Array?Array.prototype.slice.call(l.etag):l.etag),l.bindings&&l.bindings.length){oe.bindings=[];for(var _e=0;_e<l.bindings.length;++_e)oe.bindings[_e]=h.google.iam.v1.Binding.toObject(l.bindings[_e],X)}return oe},_.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},_),u.Binding=(S.prototype.role="",S.prototype.members=s.emptyArray,S.prototype.condition=null,S.create=function(l){return new S(l)},S.encode=function(l,X){if(X=X||o.create(),l.role!=null&&Object.hasOwnProperty.call(l,"role")&&X.uint32(10).string(l.role),l.members!=null&&l.members.length)for(var oe=0;oe<l.members.length;++oe)X.uint32(18).string(l.members[oe]);return l.condition!=null&&Object.hasOwnProperty.call(l,"condition")&&h.google.type.Expr.encode(l.condition,X.uint32(26).fork()).ldelim(),X},S.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},S.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.Binding;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.role=l.string();break;case 2:_e.members&&_e.members.length||(_e.members=[]),_e.members.push(l.string());break;case 3:_e.condition=h.google.type.Expr.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},S.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},S.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.role!=null&&l.hasOwnProperty("role")&&!s.isString(l.role))return"role: string expected";if(l.members!=null&&l.hasOwnProperty("members")){if(!Array.isArray(l.members))return"members: array expected";for(var X=0;X<l.members.length;++X)if(!s.isString(l.members[X]))return"members: string[] expected"}if(l.condition!=null&&l.hasOwnProperty("condition")){var oe=h.google.type.Expr.verify(l.condition);if(oe)return"condition."+oe}return null},S.fromObject=function(l){if(l instanceof h.google.iam.v1.Binding)return l;var X=new h.google.iam.v1.Binding;if(l.role!=null&&(X.role=String(l.role)),l.members){if(!Array.isArray(l.members))throw TypeError(".google.iam.v1.Binding.members: array expected");X.members=[];for(var oe=0;oe<l.members.length;++oe)X.members[oe]=String(l.members[oe])}if(l.condition!=null){if(typeof l.condition!="object")throw TypeError(".google.iam.v1.Binding.condition: object expected");X.condition=h.google.type.Expr.fromObject(l.condition)}return X},S.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.members=[]),X.defaults&&(oe.role="",oe.condition=null),l.role!=null&&l.hasOwnProperty("role")&&(oe.role=l.role),l.members&&l.members.length){oe.members=[];for(var _e=0;_e<l.members.length;++_e)oe.members[_e]=l.members[_e]}return l.condition!=null&&l.hasOwnProperty("condition")&&(oe.condition=h.google.type.Expr.toObject(l.condition,X)),oe},S.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},S),u.PolicyDelta=(j.prototype.bindingDeltas=s.emptyArray,j.prototype.auditConfigDeltas=s.emptyArray,j.create=function(l){return new j(l)},j.encode=function(l,X){if(X=X||o.create(),l.bindingDeltas!=null&&l.bindingDeltas.length)for(var oe=0;oe<l.bindingDeltas.length;++oe)h.google.iam.v1.BindingDelta.encode(l.bindingDeltas[oe],X.uint32(10).fork()).ldelim();if(l.auditConfigDeltas!=null&&l.auditConfigDeltas.length)for(oe=0;oe<l.auditConfigDeltas.length;++oe)h.google.iam.v1.AuditConfigDelta.encode(l.auditConfigDeltas[oe],X.uint32(18).fork()).ldelim();return X},j.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},j.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.PolicyDelta;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.bindingDeltas&&_e.bindingDeltas.length||(_e.bindingDeltas=[]),_e.bindingDeltas.push(h.google.iam.v1.BindingDelta.decode(l,l.uint32()));break;case 2:_e.auditConfigDeltas&&_e.auditConfigDeltas.length||(_e.auditConfigDeltas=[]),_e.auditConfigDeltas.push(h.google.iam.v1.AuditConfigDelta.decode(l,l.uint32()));break;default:l.skipType(7&He)}}return _e},j.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},j.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.bindingDeltas!=null&&l.hasOwnProperty("bindingDeltas")){if(!Array.isArray(l.bindingDeltas))return"bindingDeltas: array expected";for(var X=0;X<l.bindingDeltas.length;++X)if(oe=h.google.iam.v1.BindingDelta.verify(l.bindingDeltas[X]))return"bindingDeltas."+oe}if(l.auditConfigDeltas!=null&&l.hasOwnProperty("auditConfigDeltas")){if(!Array.isArray(l.auditConfigDeltas))return"auditConfigDeltas: array expected";for(var oe,X=0;X<l.auditConfigDeltas.length;++X)if(oe=h.google.iam.v1.AuditConfigDelta.verify(l.auditConfigDeltas[X]))return"auditConfigDeltas."+oe}return null},j.fromObject=function(l){if(l instanceof h.google.iam.v1.PolicyDelta)return l;var X=new h.google.iam.v1.PolicyDelta;if(l.bindingDeltas){if(!Array.isArray(l.bindingDeltas))throw TypeError(".google.iam.v1.PolicyDelta.bindingDeltas: array expected");X.bindingDeltas=[];for(var oe=0;oe<l.bindingDeltas.length;++oe){if(typeof l.bindingDeltas[oe]!="object")throw TypeError(".google.iam.v1.PolicyDelta.bindingDeltas: object expected");X.bindingDeltas[oe]=h.google.iam.v1.BindingDelta.fromObject(l.bindingDeltas[oe])}}if(l.auditConfigDeltas){if(!Array.isArray(l.auditConfigDeltas))throw TypeError(".google.iam.v1.PolicyDelta.auditConfigDeltas: array expected");for(X.auditConfigDeltas=[],oe=0;oe<l.auditConfigDeltas.length;++oe){if(typeof l.auditConfigDeltas[oe]!="object")throw TypeError(".google.iam.v1.PolicyDelta.auditConfigDeltas: object expected");X.auditConfigDeltas[oe]=h.google.iam.v1.AuditConfigDelta.fromObject(l.auditConfigDeltas[oe])}}return X},j.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.bindingDeltas=[],oe.auditConfigDeltas=[]),l.bindingDeltas&&l.bindingDeltas.length){oe.bindingDeltas=[];for(var _e=0;_e<l.bindingDeltas.length;++_e)oe.bindingDeltas[_e]=h.google.iam.v1.BindingDelta.toObject(l.bindingDeltas[_e],X)}if(l.auditConfigDeltas&&l.auditConfigDeltas.length)for(oe.auditConfigDeltas=[],_e=0;_e<l.auditConfigDeltas.length;++_e)oe.auditConfigDeltas[_e]=h.google.iam.v1.AuditConfigDelta.toObject(l.auditConfigDeltas[_e],X);return oe},j.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},j),u.BindingDelta=(K.prototype.action=0,K.prototype.role="",K.prototype.member="",K.prototype.condition=null,K.create=function(l){return new K(l)},K.encode=function(l,X){return X=X||o.create(),l.action!=null&&Object.hasOwnProperty.call(l,"action")&&X.uint32(8).int32(l.action),l.role!=null&&Object.hasOwnProperty.call(l,"role")&&X.uint32(18).string(l.role),l.member!=null&&Object.hasOwnProperty.call(l,"member")&&X.uint32(26).string(l.member),l.condition!=null&&Object.hasOwnProperty.call(l,"condition")&&h.google.type.Expr.encode(l.condition,X.uint32(34).fork()).ldelim(),X},K.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},K.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.BindingDelta;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.action=l.int32();break;case 2:_e.role=l.string();break;case 3:_e.member=l.string();break;case 4:_e.condition=h.google.type.Expr.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},K.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},K.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.action!=null&&l.hasOwnProperty("action"))switch(l.action){default:return"action: enum value expected";case 0:case 1:case 2:}return l.role!=null&&l.hasOwnProperty("role")&&!s.isString(l.role)?"role: string expected":l.member!=null&&l.hasOwnProperty("member")&&!s.isString(l.member)?"member: string expected":l.condition!=null&&l.hasOwnProperty("condition")&&(l=h.google.type.Expr.verify(l.condition),l)?"condition."+l:null},K.fromObject=function(l){if(l instanceof h.google.iam.v1.BindingDelta)return l;var X=new h.google.iam.v1.BindingDelta;switch(l.action){case"ACTION_UNSPECIFIED":case 0:X.action=0;break;case"ADD":case 1:X.action=1;break;case"REMOVE":case 2:X.action=2}if(l.role!=null&&(X.role=String(l.role)),l.member!=null&&(X.member=String(l.member)),l.condition!=null){if(typeof l.condition!="object")throw TypeError(".google.iam.v1.BindingDelta.condition: object expected");X.condition=h.google.type.Expr.fromObject(l.condition)}return X},K.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.action=X.enums===String?"ACTION_UNSPECIFIED":0,oe.role="",oe.member="",oe.condition=null),l.action!=null&&l.hasOwnProperty("action")&&(oe.action=X.enums===String?h.google.iam.v1.BindingDelta.Action[l.action]:l.action),l.role!=null&&l.hasOwnProperty("role")&&(oe.role=l.role),l.member!=null&&l.hasOwnProperty("member")&&(oe.member=l.member),l.condition!=null&&l.hasOwnProperty("condition")&&(oe.condition=h.google.type.Expr.toObject(l.condition,X)),oe},K.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},K.Action=(r={},(m=Object.create(r))[r[0]="ACTION_UNSPECIFIED"]=0,m[r[1]="ADD"]=1,m[r[2]="REMOVE"]=2,m),K),u.AuditConfigDelta=(J.prototype.action=0,J.prototype.service="",J.prototype.exemptedMember="",J.prototype.logType="",J.create=function(l){return new J(l)},J.encode=function(l,X){return X=X||o.create(),l.action!=null&&Object.hasOwnProperty.call(l,"action")&&X.uint32(8).int32(l.action),l.service!=null&&Object.hasOwnProperty.call(l,"service")&&X.uint32(18).string(l.service),l.exemptedMember!=null&&Object.hasOwnProperty.call(l,"exemptedMember")&&X.uint32(26).string(l.exemptedMember),l.logType!=null&&Object.hasOwnProperty.call(l,"logType")&&X.uint32(34).string(l.logType),X},J.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},J.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.AuditConfigDelta;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.action=l.int32();break;case 2:_e.service=l.string();break;case 3:_e.exemptedMember=l.string();break;case 4:_e.logType=l.string();break;default:l.skipType(7&He)}}return _e},J.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},J.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.action!=null&&l.hasOwnProperty("action"))switch(l.action){default:return"action: enum value expected";case 0:case 1:case 2:}return l.service!=null&&l.hasOwnProperty("service")&&!s.isString(l.service)?"service: string expected":l.exemptedMember!=null&&l.hasOwnProperty("exemptedMember")&&!s.isString(l.exemptedMember)?"exemptedMember: string expected":l.logType!=null&&l.hasOwnProperty("logType")&&!s.isString(l.logType)?"logType: string expected":null},J.fromObject=function(l){if(l instanceof h.google.iam.v1.AuditConfigDelta)return l;var X=new h.google.iam.v1.AuditConfigDelta;switch(l.action){case"ACTION_UNSPECIFIED":case 0:X.action=0;break;case"ADD":case 1:X.action=1;break;case"REMOVE":case 2:X.action=2}return l.service!=null&&(X.service=String(l.service)),l.exemptedMember!=null&&(X.exemptedMember=String(l.exemptedMember)),l.logType!=null&&(X.logType=String(l.logType)),X},J.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.action=X.enums===String?"ACTION_UNSPECIFIED":0,oe.service="",oe.exemptedMember="",oe.logType=""),l.action!=null&&l.hasOwnProperty("action")&&(oe.action=X.enums===String?h.google.iam.v1.AuditConfigDelta.Action[l.action]:l.action),l.service!=null&&l.hasOwnProperty("service")&&(oe.service=l.service),l.exemptedMember!=null&&l.hasOwnProperty("exemptedMember")&&(oe.exemptedMember=l.exemptedMember),l.logType!=null&&l.hasOwnProperty("logType")&&(oe.logType=l.logType),oe},J.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},J.Action=(r={},(m=Object.create(r))[r[0]="ACTION_UNSPECIFIED"]=0,m[r[1]="ADD"]=1,m[r[2]="REMOVE"]=2,m),J),u.logging=((r={}).AuditData=(H.prototype.policyDelta=null,H.create=function(l){return new H(l)},H.encode=function(l,X){return X=X||o.create(),l.policyDelta!=null&&Object.hasOwnProperty.call(l,"policyDelta")&&h.google.iam.v1.PolicyDelta.encode(l.policyDelta,X.uint32(18).fork()).ldelim(),X},H.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},H.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.iam.v1.logging.AuditData;l.pos<oe;){var He=l.uint32();He>>>3==2?_e.policyDelta=h.google.iam.v1.PolicyDelta.decode(l,l.uint32()):l.skipType(7&He)}return _e},H.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},H.verify=function(l){return typeof l!="object"||l===null?"object expected":l.policyDelta!=null&&l.hasOwnProperty("policyDelta")&&(l=h.google.iam.v1.PolicyDelta.verify(l.policyDelta),l)?"policyDelta."+l:null},H.fromObject=function(l){if(l instanceof h.google.iam.v1.logging.AuditData)return l;var X=new h.google.iam.v1.logging.AuditData;if(l.policyDelta!=null){if(typeof l.policyDelta!="object")throw TypeError(".google.iam.v1.logging.AuditData.policyDelta: object expected");X.policyDelta=h.google.iam.v1.PolicyDelta.fromObject(l.policyDelta)}return X},H.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.policyDelta=null),l.policyDelta!=null&&l.hasOwnProperty("policyDelta")&&(oe.policyDelta=h.google.iam.v1.PolicyDelta.toObject(l.policyDelta,X)),oe},H.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},H),r),u),d),c.api=((m={}).Http=(U.prototype.rules=s.emptyArray,U.prototype.fullyDecodeReservedExpansion=!1,U.create=function(l){return new U(l)},U.encode=function(l,X){if(X=X||o.create(),l.rules!=null&&l.rules.length)for(var oe=0;oe<l.rules.length;++oe)h.google.api.HttpRule.encode(l.rules[oe],X.uint32(10).fork()).ldelim();return l.fullyDecodeReservedExpansion!=null&&Object.hasOwnProperty.call(l,"fullyDecodeReservedExpansion")&&X.uint32(16).bool(l.fullyDecodeReservedExpansion),X},U.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},U.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.api.Http;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.rules&&_e.rules.length||(_e.rules=[]),_e.rules.push(h.google.api.HttpRule.decode(l,l.uint32()));break;case 2:_e.fullyDecodeReservedExpansion=l.bool();break;default:l.skipType(7&He)}}return _e},U.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},U.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.rules!=null&&l.hasOwnProperty("rules")){if(!Array.isArray(l.rules))return"rules: array expected";for(var X=0;X<l.rules.length;++X){var oe=h.google.api.HttpRule.verify(l.rules[X]);if(oe)return"rules."+oe}}return l.fullyDecodeReservedExpansion!=null&&l.hasOwnProperty("fullyDecodeReservedExpansion")&&typeof l.fullyDecodeReservedExpansion!="boolean"?"fullyDecodeReservedExpansion: boolean expected":null},U.fromObject=function(l){if(l instanceof h.google.api.Http)return l;var X=new h.google.api.Http;if(l.rules){if(!Array.isArray(l.rules))throw TypeError(".google.api.Http.rules: array expected");X.rules=[];for(var oe=0;oe<l.rules.length;++oe){if(typeof l.rules[oe]!="object")throw TypeError(".google.api.Http.rules: object expected");X.rules[oe]=h.google.api.HttpRule.fromObject(l.rules[oe])}}return l.fullyDecodeReservedExpansion!=null&&(X.fullyDecodeReservedExpansion=!!l.fullyDecodeReservedExpansion),X},U.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.rules=[]),X.defaults&&(oe.fullyDecodeReservedExpansion=!1),l.rules&&l.rules.length){oe.rules=[];for(var _e=0;_e<l.rules.length;++_e)oe.rules[_e]=h.google.api.HttpRule.toObject(l.rules[_e],X)}return l.fullyDecodeReservedExpansion!=null&&l.hasOwnProperty("fullyDecodeReservedExpansion")&&(oe.fullyDecodeReservedExpansion=l.fullyDecodeReservedExpansion),oe},U.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},U),m.HttpRule=(P.prototype.selector="",P.prototype.get="",P.prototype.put="",P.prototype.post="",P.prototype.delete="",P.prototype.patch="",P.prototype.custom=null,P.prototype.body="",P.prototype.responseBody="",P.prototype.additionalBindings=s.emptyArray,Object.defineProperty(P.prototype,"pattern",{get:s.oneOfGetter(r=["get","put","post","delete","patch","custom"]),set:s.oneOfSetter(r)}),P.create=function(l){return new P(l)},P.encode=function(l,X){if(X=X||o.create(),l.selector!=null&&Object.hasOwnProperty.call(l,"selector")&&X.uint32(10).string(l.selector),l.get!=null&&Object.hasOwnProperty.call(l,"get")&&X.uint32(18).string(l.get),l.put!=null&&Object.hasOwnProperty.call(l,"put")&&X.uint32(26).string(l.put),l.post!=null&&Object.hasOwnProperty.call(l,"post")&&X.uint32(34).string(l.post),l.delete!=null&&Object.hasOwnProperty.call(l,"delete")&&X.uint32(42).string(l.delete),l.patch!=null&&Object.hasOwnProperty.call(l,"patch")&&X.uint32(50).string(l.patch),l.body!=null&&Object.hasOwnProperty.call(l,"body")&&X.uint32(58).string(l.body),l.custom!=null&&Object.hasOwnProperty.call(l,"custom")&&h.google.api.CustomHttpPattern.encode(l.custom,X.uint32(66).fork()).ldelim(),l.additionalBindings!=null&&l.additionalBindings.length)for(var oe=0;oe<l.additionalBindings.length;++oe)h.google.api.HttpRule.encode(l.additionalBindings[oe],X.uint32(90).fork()).ldelim();return l.responseBody!=null&&Object.hasOwnProperty.call(l,"responseBody")&&X.uint32(98).string(l.responseBody),X},P.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},P.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.api.HttpRule;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.selector=l.string();break;case 2:_e.get=l.string();break;case 3:_e.put=l.string();break;case 4:_e.post=l.string();break;case 5:_e.delete=l.string();break;case 6:_e.patch=l.string();break;case 8:_e.custom=h.google.api.CustomHttpPattern.decode(l,l.uint32());break;case 7:_e.body=l.string();break;case 12:_e.responseBody=l.string();break;case 11:_e.additionalBindings&&_e.additionalBindings.length||(_e.additionalBindings=[]),_e.additionalBindings.push(h.google.api.HttpRule.decode(l,l.uint32()));break;default:l.skipType(7&He)}}return _e},P.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},P.verify=function(l){if(typeof l!="object"||l===null)return"object expected";var X={};if(l.selector!=null&&l.hasOwnProperty("selector")&&!s.isString(l.selector))return"selector: string expected";if(l.get!=null&&l.hasOwnProperty("get")&&(X.pattern=1,!s.isString(l.get)))return"get: string expected";if(l.put!=null&&l.hasOwnProperty("put")){if(X.pattern===1)return"pattern: multiple values";if(X.pattern=1,!s.isString(l.put))return"put: string expected"}if(l.post!=null&&l.hasOwnProperty("post")){if(X.pattern===1)return"pattern: multiple values";if(X.pattern=1,!s.isString(l.post))return"post: string expected"}if(l.delete!=null&&l.hasOwnProperty("delete")){if(X.pattern===1)return"pattern: multiple values";if(X.pattern=1,!s.isString(l.delete))return"delete: string expected"}if(l.patch!=null&&l.hasOwnProperty("patch")){if(X.pattern===1)return"pattern: multiple values";if(X.pattern=1,!s.isString(l.patch))return"patch: string expected"}if(l.custom!=null&&l.hasOwnProperty("custom")){if(X.pattern===1)return"pattern: multiple values";if(X.pattern=1,oe=h.google.api.CustomHttpPattern.verify(l.custom))return"custom."+oe}if(l.body!=null&&l.hasOwnProperty("body")&&!s.isString(l.body))return"body: string expected";if(l.responseBody!=null&&l.hasOwnProperty("responseBody")&&!s.isString(l.responseBody))return"responseBody: string expected";if(l.additionalBindings!=null&&l.hasOwnProperty("additionalBindings")){if(!Array.isArray(l.additionalBindings))return"additionalBindings: array expected";for(var oe,_e=0;_e<l.additionalBindings.length;++_e)if(oe=h.google.api.HttpRule.verify(l.additionalBindings[_e]))return"additionalBindings."+oe}return null},P.fromObject=function(l){if(l instanceof h.google.api.HttpRule)return l;var X=new h.google.api.HttpRule;if(l.selector!=null&&(X.selector=String(l.selector)),l.get!=null&&(X.get=String(l.get)),l.put!=null&&(X.put=String(l.put)),l.post!=null&&(X.post=String(l.post)),l.delete!=null&&(X.delete=String(l.delete)),l.patch!=null&&(X.patch=String(l.patch)),l.custom!=null){if(typeof l.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");X.custom=h.google.api.CustomHttpPattern.fromObject(l.custom)}if(l.body!=null&&(X.body=String(l.body)),l.responseBody!=null&&(X.responseBody=String(l.responseBody)),l.additionalBindings){if(!Array.isArray(l.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");X.additionalBindings=[];for(var oe=0;oe<l.additionalBindings.length;++oe){if(typeof l.additionalBindings[oe]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");X.additionalBindings[oe]=h.google.api.HttpRule.fromObject(l.additionalBindings[oe])}}return X},P.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.additionalBindings=[]),X.defaults&&(oe.selector="",oe.body="",oe.responseBody=""),l.selector!=null&&l.hasOwnProperty("selector")&&(oe.selector=l.selector),l.get!=null&&l.hasOwnProperty("get")&&(oe.get=l.get,X.oneofs)&&(oe.pattern="get"),l.put!=null&&l.hasOwnProperty("put")&&(oe.put=l.put,X.oneofs)&&(oe.pattern="put"),l.post!=null&&l.hasOwnProperty("post")&&(oe.post=l.post,X.oneofs)&&(oe.pattern="post"),l.delete!=null&&l.hasOwnProperty("delete")&&(oe.delete=l.delete,X.oneofs)&&(oe.pattern="delete"),l.patch!=null&&l.hasOwnProperty("patch")&&(oe.patch=l.patch,X.oneofs)&&(oe.pattern="patch"),l.body!=null&&l.hasOwnProperty("body")&&(oe.body=l.body),l.custom!=null&&l.hasOwnProperty("custom")&&(oe.custom=h.google.api.CustomHttpPattern.toObject(l.custom,X),X.oneofs)&&(oe.pattern="custom"),l.additionalBindings&&l.additionalBindings.length){oe.additionalBindings=[];for(var _e=0;_e<l.additionalBindings.length;++_e)oe.additionalBindings[_e]=h.google.api.HttpRule.toObject(l.additionalBindings[_e],X)}return l.responseBody!=null&&l.hasOwnProperty("responseBody")&&(oe.responseBody=l.responseBody),oe},P.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},P),m.CustomHttpPattern=(Z.prototype.kind="",Z.prototype.path="",Z.create=function(l){return new Z(l)},Z.encode=function(l,X){return X=X||o.create(),l.kind!=null&&Object.hasOwnProperty.call(l,"kind")&&X.uint32(10).string(l.kind),l.path!=null&&Object.hasOwnProperty.call(l,"path")&&X.uint32(18).string(l.path),X},Z.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Z.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.api.CustomHttpPattern;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.kind=l.string();break;case 2:_e.path=l.string();break;default:l.skipType(7&He)}}return _e},Z.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Z.verify=function(l){return typeof l!="object"||l===null?"object expected":l.kind!=null&&l.hasOwnProperty("kind")&&!s.isString(l.kind)?"kind: string expected":l.path!=null&&l.hasOwnProperty("path")&&!s.isString(l.path)?"path: string expected":null},Z.fromObject=function(l){var X;return l instanceof h.google.api.CustomHttpPattern?l:(X=new h.google.api.CustomHttpPattern,l.kind!=null&&(X.kind=String(l.kind)),l.path!=null&&(X.path=String(l.path)),X)},Z.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.kind="",oe.path=""),l.kind!=null&&l.hasOwnProperty("kind")&&(oe.kind=l.kind),l.path!=null&&l.hasOwnProperty("path")&&(oe.path=l.path),oe},Z.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Z),m.FieldBehavior=(r={},(u=Object.create(r))[r[0]="FIELD_BEHAVIOR_UNSPECIFIED"]=0,u[r[1]="OPTIONAL"]=1,u[r[2]="REQUIRED"]=2,u[r[3]="OUTPUT_ONLY"]=3,u[r[4]="INPUT_ONLY"]=4,u[r[5]="IMMUTABLE"]=5,u),m.ResourceDescriptor=(ie.prototype.type="",ie.prototype.pattern=s.emptyArray,ie.prototype.nameField="",ie.prototype.history=0,ie.prototype.plural="",ie.prototype.singular="",ie.create=function(l){return new ie(l)},ie.encode=function(l,X){if(X=X||o.create(),l.type!=null&&Object.hasOwnProperty.call(l,"type")&&X.uint32(10).string(l.type),l.pattern!=null&&l.pattern.length)for(var oe=0;oe<l.pattern.length;++oe)X.uint32(18).string(l.pattern[oe]);return l.nameField!=null&&Object.hasOwnProperty.call(l,"nameField")&&X.uint32(26).string(l.nameField),l.history!=null&&Object.hasOwnProperty.call(l,"history")&&X.uint32(32).int32(l.history),l.plural!=null&&Object.hasOwnProperty.call(l,"plural")&&X.uint32(42).string(l.plural),l.singular!=null&&Object.hasOwnProperty.call(l,"singular")&&X.uint32(50).string(l.singular),X},ie.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ie.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.api.ResourceDescriptor;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.type=l.string();break;case 2:_e.pattern&&_e.pattern.length||(_e.pattern=[]),_e.pattern.push(l.string());break;case 3:_e.nameField=l.string();break;case 4:_e.history=l.int32();break;case 5:_e.plural=l.string();break;case 6:_e.singular=l.string();break;default:l.skipType(7&He)}}return _e},ie.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ie.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.type!=null&&l.hasOwnProperty("type")&&!s.isString(l.type))return"type: string expected";if(l.pattern!=null&&l.hasOwnProperty("pattern")){if(!Array.isArray(l.pattern))return"pattern: array expected";for(var X=0;X<l.pattern.length;++X)if(!s.isString(l.pattern[X]))return"pattern: string[] expected"}if(l.nameField!=null&&l.hasOwnProperty("nameField")&&!s.isString(l.nameField))return"nameField: string expected";if(l.history!=null&&l.hasOwnProperty("history"))switch(l.history){default:return"history: enum value expected";case 0:case 1:case 2:}return l.plural!=null&&l.hasOwnProperty("plural")&&!s.isString(l.plural)?"plural: string expected":l.singular!=null&&l.hasOwnProperty("singular")&&!s.isString(l.singular)?"singular: string expected":null},ie.fromObject=function(l){if(l instanceof h.google.api.ResourceDescriptor)return l;var X=new h.google.api.ResourceDescriptor;if(l.type!=null&&(X.type=String(l.type)),l.pattern){if(!Array.isArray(l.pattern))throw TypeError(".google.api.ResourceDescriptor.pattern: array expected");X.pattern=[];for(var oe=0;oe<l.pattern.length;++oe)X.pattern[oe]=String(l.pattern[oe])}switch(l.nameField!=null&&(X.nameField=String(l.nameField)),l.history){case"HISTORY_UNSPECIFIED":case 0:X.history=0;break;case"ORIGINALLY_SINGLE_PATTERN":case 1:X.history=1;break;case"FUTURE_MULTI_PATTERN":case 2:X.history=2}return l.plural!=null&&(X.plural=String(l.plural)),l.singular!=null&&(X.singular=String(l.singular)),X},ie.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.pattern=[]),X.defaults&&(oe.type="",oe.nameField="",oe.history=X.enums===String?"HISTORY_UNSPECIFIED":0,oe.plural="",oe.singular=""),l.type!=null&&l.hasOwnProperty("type")&&(oe.type=l.type),l.pattern&&l.pattern.length){oe.pattern=[];for(var _e=0;_e<l.pattern.length;++_e)oe.pattern[_e]=l.pattern[_e]}return l.nameField!=null&&l.hasOwnProperty("nameField")&&(oe.nameField=l.nameField),l.history!=null&&l.hasOwnProperty("history")&&(oe.history=X.enums===String?h.google.api.ResourceDescriptor.History[l.history]:l.history),l.plural!=null&&l.hasOwnProperty("plural")&&(oe.plural=l.plural),l.singular!=null&&l.hasOwnProperty("singular")&&(oe.singular=l.singular),oe},ie.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ie.History=(r={},(u=Object.create(r))[r[0]="HISTORY_UNSPECIFIED"]=0,u[r[1]="ORIGINALLY_SINGLE_PATTERN"]=1,u[r[2]="FUTURE_MULTI_PATTERN"]=2,u),ie),m.ResourceReference=(ue.prototype.type="",ue.prototype.childType="",ue.create=function(l){return new ue(l)},ue.encode=function(l,X){return X=X||o.create(),l.type!=null&&Object.hasOwnProperty.call(l,"type")&&X.uint32(10).string(l.type),l.childType!=null&&Object.hasOwnProperty.call(l,"childType")&&X.uint32(18).string(l.childType),X},ue.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ue.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.api.ResourceReference;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.type=l.string();break;case 2:_e.childType=l.string();break;default:l.skipType(7&He)}}return _e},ue.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ue.verify=function(l){return typeof l!="object"||l===null?"object expected":l.type!=null&&l.hasOwnProperty("type")&&!s.isString(l.type)?"type: string expected":l.childType!=null&&l.hasOwnProperty("childType")&&!s.isString(l.childType)?"childType: string expected":null},ue.fromObject=function(l){var X;return l instanceof h.google.api.ResourceReference?l:(X=new h.google.api.ResourceReference,l.type!=null&&(X.type=String(l.type)),l.childType!=null&&(X.childType=String(l.childType)),X)},ue.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.type="",oe.childType=""),l.type!=null&&l.hasOwnProperty("type")&&(oe.type=l.type),l.childType!=null&&l.hasOwnProperty("childType")&&(oe.childType=l.childType),oe},ue.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ue),m),c.protobuf=((d={}).FileDescriptorSet=(le.prototype.file=s.emptyArray,le.create=function(l){return new le(l)},le.encode=function(l,X){if(X=X||o.create(),l.file!=null&&l.file.length)for(var oe=0;oe<l.file.length;++oe)h.google.protobuf.FileDescriptorProto.encode(l.file[oe],X.uint32(10).fork()).ldelim();return X},le.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},le.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.FileDescriptorSet;l.pos<oe;){var He=l.uint32();He>>>3==1?(_e.file&&_e.file.length||(_e.file=[]),_e.file.push(h.google.protobuf.FileDescriptorProto.decode(l,l.uint32()))):l.skipType(7&He)}return _e},le.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},le.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.file!=null&&l.hasOwnProperty("file")){if(!Array.isArray(l.file))return"file: array expected";for(var X=0;X<l.file.length;++X){var oe=h.google.protobuf.FileDescriptorProto.verify(l.file[X]);if(oe)return"file."+oe}}return null},le.fromObject=function(l){if(l instanceof h.google.protobuf.FileDescriptorSet)return l;var X=new h.google.protobuf.FileDescriptorSet;if(l.file){if(!Array.isArray(l.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");X.file=[];for(var oe=0;oe<l.file.length;++oe){if(typeof l.file[oe]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");X.file[oe]=h.google.protobuf.FileDescriptorProto.fromObject(l.file[oe])}}return X},le.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.file=[]),l.file&&l.file.length){oe.file=[];for(var _e=0;_e<l.file.length;++_e)oe.file[_e]=h.google.protobuf.FileDescriptorProto.toObject(l.file[_e],X)}return oe},le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},le),d.FileDescriptorProto=(ne.prototype.name="",ne.prototype.package="",ne.prototype.dependency=s.emptyArray,ne.prototype.publicDependency=s.emptyArray,ne.prototype.weakDependency=s.emptyArray,ne.prototype.messageType=s.emptyArray,ne.prototype.enumType=s.emptyArray,ne.prototype.service=s.emptyArray,ne.prototype.extension=s.emptyArray,ne.prototype.options=null,ne.prototype.sourceCodeInfo=null,ne.prototype.syntax="",ne.create=function(l){return new ne(l)},ne.encode=function(l,X){if(X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.package!=null&&Object.hasOwnProperty.call(l,"package")&&X.uint32(18).string(l.package),l.dependency!=null&&l.dependency.length)for(var oe=0;oe<l.dependency.length;++oe)X.uint32(26).string(l.dependency[oe]);if(l.messageType!=null&&l.messageType.length)for(oe=0;oe<l.messageType.length;++oe)h.google.protobuf.DescriptorProto.encode(l.messageType[oe],X.uint32(34).fork()).ldelim();if(l.enumType!=null&&l.enumType.length)for(oe=0;oe<l.enumType.length;++oe)h.google.protobuf.EnumDescriptorProto.encode(l.enumType[oe],X.uint32(42).fork()).ldelim();if(l.service!=null&&l.service.length)for(oe=0;oe<l.service.length;++oe)h.google.protobuf.ServiceDescriptorProto.encode(l.service[oe],X.uint32(50).fork()).ldelim();if(l.extension!=null&&l.extension.length)for(oe=0;oe<l.extension.length;++oe)h.google.protobuf.FieldDescriptorProto.encode(l.extension[oe],X.uint32(58).fork()).ldelim();if(l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.FileOptions.encode(l.options,X.uint32(66).fork()).ldelim(),l.sourceCodeInfo!=null&&Object.hasOwnProperty.call(l,"sourceCodeInfo")&&h.google.protobuf.SourceCodeInfo.encode(l.sourceCodeInfo,X.uint32(74).fork()).ldelim(),l.publicDependency!=null&&l.publicDependency.length)for(oe=0;oe<l.publicDependency.length;++oe)X.uint32(80).int32(l.publicDependency[oe]);if(l.weakDependency!=null&&l.weakDependency.length)for(oe=0;oe<l.weakDependency.length;++oe)X.uint32(88).int32(l.weakDependency[oe]);return l.syntax!=null&&Object.hasOwnProperty.call(l,"syntax")&&X.uint32(98).string(l.syntax),X},ne.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ne.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.FileDescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 2:_e.package=l.string();break;case 3:_e.dependency&&_e.dependency.length||(_e.dependency=[]),_e.dependency.push(l.string());break;case 10:if(_e.publicDependency&&_e.publicDependency.length||(_e.publicDependency=[]),(7&He)==2)for(var nt=l.uint32()+l.pos;l.pos<nt;)_e.publicDependency.push(l.int32());else _e.publicDependency.push(l.int32());break;case 11:if(_e.weakDependency&&_e.weakDependency.length||(_e.weakDependency=[]),(7&He)==2)for(nt=l.uint32()+l.pos;l.pos<nt;)_e.weakDependency.push(l.int32());else _e.weakDependency.push(l.int32());break;case 4:_e.messageType&&_e.messageType.length||(_e.messageType=[]),_e.messageType.push(h.google.protobuf.DescriptorProto.decode(l,l.uint32()));break;case 5:_e.enumType&&_e.enumType.length||(_e.enumType=[]),_e.enumType.push(h.google.protobuf.EnumDescriptorProto.decode(l,l.uint32()));break;case 6:_e.service&&_e.service.length||(_e.service=[]),_e.service.push(h.google.protobuf.ServiceDescriptorProto.decode(l,l.uint32()));break;case 7:_e.extension&&_e.extension.length||(_e.extension=[]),_e.extension.push(h.google.protobuf.FieldDescriptorProto.decode(l,l.uint32()));break;case 8:_e.options=h.google.protobuf.FileOptions.decode(l,l.uint32());break;case 9:_e.sourceCodeInfo=h.google.protobuf.SourceCodeInfo.decode(l,l.uint32());break;case 12:_e.syntax=l.string();break;default:l.skipType(7&He)}}return _e},ne.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ne.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name))return"name: string expected";if(l.package!=null&&l.hasOwnProperty("package")&&!s.isString(l.package))return"package: string expected";if(l.dependency!=null&&l.hasOwnProperty("dependency")){if(!Array.isArray(l.dependency))return"dependency: array expected";for(var X=0;X<l.dependency.length;++X)if(!s.isString(l.dependency[X]))return"dependency: string[] expected"}if(l.publicDependency!=null&&l.hasOwnProperty("publicDependency")){if(!Array.isArray(l.publicDependency))return"publicDependency: array expected";for(X=0;X<l.publicDependency.length;++X)if(!s.isInteger(l.publicDependency[X]))return"publicDependency: integer[] expected"}if(l.weakDependency!=null&&l.hasOwnProperty("weakDependency")){if(!Array.isArray(l.weakDependency))return"weakDependency: array expected";for(X=0;X<l.weakDependency.length;++X)if(!s.isInteger(l.weakDependency[X]))return"weakDependency: integer[] expected"}if(l.messageType!=null&&l.hasOwnProperty("messageType")){if(!Array.isArray(l.messageType))return"messageType: array expected";for(X=0;X<l.messageType.length;++X)if(oe=h.google.protobuf.DescriptorProto.verify(l.messageType[X]))return"messageType."+oe}if(l.enumType!=null&&l.hasOwnProperty("enumType")){if(!Array.isArray(l.enumType))return"enumType: array expected";for(X=0;X<l.enumType.length;++X)if(oe=h.google.protobuf.EnumDescriptorProto.verify(l.enumType[X]))return"enumType."+oe}if(l.service!=null&&l.hasOwnProperty("service")){if(!Array.isArray(l.service))return"service: array expected";for(X=0;X<l.service.length;++X)if(oe=h.google.protobuf.ServiceDescriptorProto.verify(l.service[X]))return"service."+oe}if(l.extension!=null&&l.hasOwnProperty("extension")){if(!Array.isArray(l.extension))return"extension: array expected";for(X=0;X<l.extension.length;++X)if(oe=h.google.protobuf.FieldDescriptorProto.verify(l.extension[X]))return"extension."+oe}var oe;return l.options!=null&&l.hasOwnProperty("options")&&(oe=h.google.protobuf.FileOptions.verify(l.options))?"options."+oe:l.sourceCodeInfo!=null&&l.hasOwnProperty("sourceCodeInfo")&&(oe=h.google.protobuf.SourceCodeInfo.verify(l.sourceCodeInfo))?"sourceCodeInfo."+oe:l.syntax!=null&&l.hasOwnProperty("syntax")&&!s.isString(l.syntax)?"syntax: string expected":null},ne.fromObject=function(l){if(l instanceof h.google.protobuf.FileDescriptorProto)return l;var X=new h.google.protobuf.FileDescriptorProto;if(l.name!=null&&(X.name=String(l.name)),l.package!=null&&(X.package=String(l.package)),l.dependency){if(!Array.isArray(l.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");X.dependency=[];for(var oe=0;oe<l.dependency.length;++oe)X.dependency[oe]=String(l.dependency[oe])}if(l.publicDependency){if(!Array.isArray(l.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(X.publicDependency=[],oe=0;oe<l.publicDependency.length;++oe)X.publicDependency[oe]=0|l.publicDependency[oe]}if(l.weakDependency){if(!Array.isArray(l.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(X.weakDependency=[],oe=0;oe<l.weakDependency.length;++oe)X.weakDependency[oe]=0|l.weakDependency[oe]}if(l.messageType){if(!Array.isArray(l.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(X.messageType=[],oe=0;oe<l.messageType.length;++oe){if(typeof l.messageType[oe]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");X.messageType[oe]=h.google.protobuf.DescriptorProto.fromObject(l.messageType[oe])}}if(l.enumType){if(!Array.isArray(l.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(X.enumType=[],oe=0;oe<l.enumType.length;++oe){if(typeof l.enumType[oe]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");X.enumType[oe]=h.google.protobuf.EnumDescriptorProto.fromObject(l.enumType[oe])}}if(l.service){if(!Array.isArray(l.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(X.service=[],oe=0;oe<l.service.length;++oe){if(typeof l.service[oe]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");X.service[oe]=h.google.protobuf.ServiceDescriptorProto.fromObject(l.service[oe])}}if(l.extension){if(!Array.isArray(l.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(X.extension=[],oe=0;oe<l.extension.length;++oe){if(typeof l.extension[oe]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");X.extension[oe]=h.google.protobuf.FieldDescriptorProto.fromObject(l.extension[oe])}}if(l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");X.options=h.google.protobuf.FileOptions.fromObject(l.options)}if(l.sourceCodeInfo!=null){if(typeof l.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");X.sourceCodeInfo=h.google.protobuf.SourceCodeInfo.fromObject(l.sourceCodeInfo)}return l.syntax!=null&&(X.syntax=String(l.syntax)),X},ne.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.dependency=[],oe.messageType=[],oe.enumType=[],oe.service=[],oe.extension=[],oe.publicDependency=[],oe.weakDependency=[]),X.defaults&&(oe.name="",oe.package="",oe.options=null,oe.sourceCodeInfo=null,oe.syntax=""),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.package!=null&&l.hasOwnProperty("package")&&(oe.package=l.package),l.dependency&&l.dependency.length){oe.dependency=[];for(var _e=0;_e<l.dependency.length;++_e)oe.dependency[_e]=l.dependency[_e]}if(l.messageType&&l.messageType.length)for(oe.messageType=[],_e=0;_e<l.messageType.length;++_e)oe.messageType[_e]=h.google.protobuf.DescriptorProto.toObject(l.messageType[_e],X);if(l.enumType&&l.enumType.length)for(oe.enumType=[],_e=0;_e<l.enumType.length;++_e)oe.enumType[_e]=h.google.protobuf.EnumDescriptorProto.toObject(l.enumType[_e],X);if(l.service&&l.service.length)for(oe.service=[],_e=0;_e<l.service.length;++_e)oe.service[_e]=h.google.protobuf.ServiceDescriptorProto.toObject(l.service[_e],X);if(l.extension&&l.extension.length)for(oe.extension=[],_e=0;_e<l.extension.length;++_e)oe.extension[_e]=h.google.protobuf.FieldDescriptorProto.toObject(l.extension[_e],X);if(l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.FileOptions.toObject(l.options,X)),l.sourceCodeInfo!=null&&l.hasOwnProperty("sourceCodeInfo")&&(oe.sourceCodeInfo=h.google.protobuf.SourceCodeInfo.toObject(l.sourceCodeInfo,X)),l.publicDependency&&l.publicDependency.length)for(oe.publicDependency=[],_e=0;_e<l.publicDependency.length;++_e)oe.publicDependency[_e]=l.publicDependency[_e];if(l.weakDependency&&l.weakDependency.length)for(oe.weakDependency=[],_e=0;_e<l.weakDependency.length;++_e)oe.weakDependency[_e]=l.weakDependency[_e];return l.syntax!=null&&l.hasOwnProperty("syntax")&&(oe.syntax=l.syntax),oe},ne.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ne),d.DescriptorProto=(ye.prototype.name="",ye.prototype.field=s.emptyArray,ye.prototype.extension=s.emptyArray,ye.prototype.nestedType=s.emptyArray,ye.prototype.enumType=s.emptyArray,ye.prototype.extensionRange=s.emptyArray,ye.prototype.oneofDecl=s.emptyArray,ye.prototype.options=null,ye.prototype.reservedRange=s.emptyArray,ye.prototype.reservedName=s.emptyArray,ye.create=function(l){return new ye(l)},ye.encode=function(l,X){if(X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.field!=null&&l.field.length)for(var oe=0;oe<l.field.length;++oe)h.google.protobuf.FieldDescriptorProto.encode(l.field[oe],X.uint32(18).fork()).ldelim();if(l.nestedType!=null&&l.nestedType.length)for(oe=0;oe<l.nestedType.length;++oe)h.google.protobuf.DescriptorProto.encode(l.nestedType[oe],X.uint32(26).fork()).ldelim();if(l.enumType!=null&&l.enumType.length)for(oe=0;oe<l.enumType.length;++oe)h.google.protobuf.EnumDescriptorProto.encode(l.enumType[oe],X.uint32(34).fork()).ldelim();if(l.extensionRange!=null&&l.extensionRange.length)for(oe=0;oe<l.extensionRange.length;++oe)h.google.protobuf.DescriptorProto.ExtensionRange.encode(l.extensionRange[oe],X.uint32(42).fork()).ldelim();if(l.extension!=null&&l.extension.length)for(oe=0;oe<l.extension.length;++oe)h.google.protobuf.FieldDescriptorProto.encode(l.extension[oe],X.uint32(50).fork()).ldelim();if(l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.MessageOptions.encode(l.options,X.uint32(58).fork()).ldelim(),l.oneofDecl!=null&&l.oneofDecl.length)for(oe=0;oe<l.oneofDecl.length;++oe)h.google.protobuf.OneofDescriptorProto.encode(l.oneofDecl[oe],X.uint32(66).fork()).ldelim();if(l.reservedRange!=null&&l.reservedRange.length)for(oe=0;oe<l.reservedRange.length;++oe)h.google.protobuf.DescriptorProto.ReservedRange.encode(l.reservedRange[oe],X.uint32(74).fork()).ldelim();if(l.reservedName!=null&&l.reservedName.length)for(oe=0;oe<l.reservedName.length;++oe)X.uint32(82).string(l.reservedName[oe]);return X},ye.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ye.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.DescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 2:_e.field&&_e.field.length||(_e.field=[]),_e.field.push(h.google.protobuf.FieldDescriptorProto.decode(l,l.uint32()));break;case 6:_e.extension&&_e.extension.length||(_e.extension=[]),_e.extension.push(h.google.protobuf.FieldDescriptorProto.decode(l,l.uint32()));break;case 3:_e.nestedType&&_e.nestedType.length||(_e.nestedType=[]),_e.nestedType.push(h.google.protobuf.DescriptorProto.decode(l,l.uint32()));break;case 4:_e.enumType&&_e.enumType.length||(_e.enumType=[]),_e.enumType.push(h.google.protobuf.EnumDescriptorProto.decode(l,l.uint32()));break;case 5:_e.extensionRange&&_e.extensionRange.length||(_e.extensionRange=[]),_e.extensionRange.push(h.google.protobuf.DescriptorProto.ExtensionRange.decode(l,l.uint32()));break;case 8:_e.oneofDecl&&_e.oneofDecl.length||(_e.oneofDecl=[]),_e.oneofDecl.push(h.google.protobuf.OneofDescriptorProto.decode(l,l.uint32()));break;case 7:_e.options=h.google.protobuf.MessageOptions.decode(l,l.uint32());break;case 9:_e.reservedRange&&_e.reservedRange.length||(_e.reservedRange=[]),_e.reservedRange.push(h.google.protobuf.DescriptorProto.ReservedRange.decode(l,l.uint32()));break;case 10:_e.reservedName&&_e.reservedName.length||(_e.reservedName=[]),_e.reservedName.push(l.string());break;default:l.skipType(7&He)}}return _e},ye.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ye.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name))return"name: string expected";if(l.field!=null&&l.hasOwnProperty("field")){if(!Array.isArray(l.field))return"field: array expected";for(var X=0;X<l.field.length;++X)if(oe=h.google.protobuf.FieldDescriptorProto.verify(l.field[X]))return"field."+oe}if(l.extension!=null&&l.hasOwnProperty("extension")){if(!Array.isArray(l.extension))return"extension: array expected";for(X=0;X<l.extension.length;++X)if(oe=h.google.protobuf.FieldDescriptorProto.verify(l.extension[X]))return"extension."+oe}if(l.nestedType!=null&&l.hasOwnProperty("nestedType")){if(!Array.isArray(l.nestedType))return"nestedType: array expected";for(X=0;X<l.nestedType.length;++X)if(oe=h.google.protobuf.DescriptorProto.verify(l.nestedType[X]))return"nestedType."+oe}if(l.enumType!=null&&l.hasOwnProperty("enumType")){if(!Array.isArray(l.enumType))return"enumType: array expected";for(X=0;X<l.enumType.length;++X)if(oe=h.google.protobuf.EnumDescriptorProto.verify(l.enumType[X]))return"enumType."+oe}if(l.extensionRange!=null&&l.hasOwnProperty("extensionRange")){if(!Array.isArray(l.extensionRange))return"extensionRange: array expected";for(X=0;X<l.extensionRange.length;++X)if(oe=h.google.protobuf.DescriptorProto.ExtensionRange.verify(l.extensionRange[X]))return"extensionRange."+oe}if(l.oneofDecl!=null&&l.hasOwnProperty("oneofDecl")){if(!Array.isArray(l.oneofDecl))return"oneofDecl: array expected";for(X=0;X<l.oneofDecl.length;++X)if(oe=h.google.protobuf.OneofDescriptorProto.verify(l.oneofDecl[X]))return"oneofDecl."+oe}if(l.options!=null&&l.hasOwnProperty("options")&&(oe=h.google.protobuf.MessageOptions.verify(l.options)))return"options."+oe;if(l.reservedRange!=null&&l.hasOwnProperty("reservedRange")){if(!Array.isArray(l.reservedRange))return"reservedRange: array expected";for(var oe,X=0;X<l.reservedRange.length;++X)if(oe=h.google.protobuf.DescriptorProto.ReservedRange.verify(l.reservedRange[X]))return"reservedRange."+oe}if(l.reservedName!=null&&l.hasOwnProperty("reservedName")){if(!Array.isArray(l.reservedName))return"reservedName: array expected";for(X=0;X<l.reservedName.length;++X)if(!s.isString(l.reservedName[X]))return"reservedName: string[] expected"}return null},ye.fromObject=function(l){if(l instanceof h.google.protobuf.DescriptorProto)return l;var X=new h.google.protobuf.DescriptorProto;if(l.name!=null&&(X.name=String(l.name)),l.field){if(!Array.isArray(l.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");X.field=[];for(var oe=0;oe<l.field.length;++oe){if(typeof l.field[oe]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");X.field[oe]=h.google.protobuf.FieldDescriptorProto.fromObject(l.field[oe])}}if(l.extension){if(!Array.isArray(l.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(X.extension=[],oe=0;oe<l.extension.length;++oe){if(typeof l.extension[oe]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");X.extension[oe]=h.google.protobuf.FieldDescriptorProto.fromObject(l.extension[oe])}}if(l.nestedType){if(!Array.isArray(l.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(X.nestedType=[],oe=0;oe<l.nestedType.length;++oe){if(typeof l.nestedType[oe]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");X.nestedType[oe]=h.google.protobuf.DescriptorProto.fromObject(l.nestedType[oe])}}if(l.enumType){if(!Array.isArray(l.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(X.enumType=[],oe=0;oe<l.enumType.length;++oe){if(typeof l.enumType[oe]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");X.enumType[oe]=h.google.protobuf.EnumDescriptorProto.fromObject(l.enumType[oe])}}if(l.extensionRange){if(!Array.isArray(l.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(X.extensionRange=[],oe=0;oe<l.extensionRange.length;++oe){if(typeof l.extensionRange[oe]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");X.extensionRange[oe]=h.google.protobuf.DescriptorProto.ExtensionRange.fromObject(l.extensionRange[oe])}}if(l.oneofDecl){if(!Array.isArray(l.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(X.oneofDecl=[],oe=0;oe<l.oneofDecl.length;++oe){if(typeof l.oneofDecl[oe]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");X.oneofDecl[oe]=h.google.protobuf.OneofDescriptorProto.fromObject(l.oneofDecl[oe])}}if(l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");X.options=h.google.protobuf.MessageOptions.fromObject(l.options)}if(l.reservedRange){if(!Array.isArray(l.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(X.reservedRange=[],oe=0;oe<l.reservedRange.length;++oe){if(typeof l.reservedRange[oe]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");X.reservedRange[oe]=h.google.protobuf.DescriptorProto.ReservedRange.fromObject(l.reservedRange[oe])}}if(l.reservedName){if(!Array.isArray(l.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(X.reservedName=[],oe=0;oe<l.reservedName.length;++oe)X.reservedName[oe]=String(l.reservedName[oe])}return X},ye.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.field=[],oe.nestedType=[],oe.enumType=[],oe.extensionRange=[],oe.extension=[],oe.oneofDecl=[],oe.reservedRange=[],oe.reservedName=[]),X.defaults&&(oe.name="",oe.options=null),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.field&&l.field.length){oe.field=[];for(var _e=0;_e<l.field.length;++_e)oe.field[_e]=h.google.protobuf.FieldDescriptorProto.toObject(l.field[_e],X)}if(l.nestedType&&l.nestedType.length)for(oe.nestedType=[],_e=0;_e<l.nestedType.length;++_e)oe.nestedType[_e]=h.google.protobuf.DescriptorProto.toObject(l.nestedType[_e],X);if(l.enumType&&l.enumType.length)for(oe.enumType=[],_e=0;_e<l.enumType.length;++_e)oe.enumType[_e]=h.google.protobuf.EnumDescriptorProto.toObject(l.enumType[_e],X);if(l.extensionRange&&l.extensionRange.length)for(oe.extensionRange=[],_e=0;_e<l.extensionRange.length;++_e)oe.extensionRange[_e]=h.google.protobuf.DescriptorProto.ExtensionRange.toObject(l.extensionRange[_e],X);if(l.extension&&l.extension.length)for(oe.extension=[],_e=0;_e<l.extension.length;++_e)oe.extension[_e]=h.google.protobuf.FieldDescriptorProto.toObject(l.extension[_e],X);if(l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.MessageOptions.toObject(l.options,X)),l.oneofDecl&&l.oneofDecl.length)for(oe.oneofDecl=[],_e=0;_e<l.oneofDecl.length;++_e)oe.oneofDecl[_e]=h.google.protobuf.OneofDescriptorProto.toObject(l.oneofDecl[_e],X);if(l.reservedRange&&l.reservedRange.length)for(oe.reservedRange=[],_e=0;_e<l.reservedRange.length;++_e)oe.reservedRange[_e]=h.google.protobuf.DescriptorProto.ReservedRange.toObject(l.reservedRange[_e],X);if(l.reservedName&&l.reservedName.length)for(oe.reservedName=[],_e=0;_e<l.reservedName.length;++_e)oe.reservedName[_e]=l.reservedName[_e];return oe},ye.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ye.ExtensionRange=(fe.prototype.start=0,fe.prototype.end=0,fe.prototype.options=null,fe.create=function(l){return new fe(l)},fe.encode=function(l,X){return X=X||o.create(),l.start!=null&&Object.hasOwnProperty.call(l,"start")&&X.uint32(8).int32(l.start),l.end!=null&&Object.hasOwnProperty.call(l,"end")&&X.uint32(16).int32(l.end),l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.ExtensionRangeOptions.encode(l.options,X.uint32(26).fork()).ldelim(),X},fe.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},fe.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.DescriptorProto.ExtensionRange;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.start=l.int32();break;case 2:_e.end=l.int32();break;case 3:_e.options=h.google.protobuf.ExtensionRangeOptions.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},fe.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},fe.verify=function(l){return typeof l!="object"||l===null?"object expected":l.start!=null&&l.hasOwnProperty("start")&&!s.isInteger(l.start)?"start: integer expected":l.end!=null&&l.hasOwnProperty("end")&&!s.isInteger(l.end)?"end: integer expected":l.options!=null&&l.hasOwnProperty("options")&&(l=h.google.protobuf.ExtensionRangeOptions.verify(l.options),l)?"options."+l:null},fe.fromObject=function(l){if(l instanceof h.google.protobuf.DescriptorProto.ExtensionRange)return l;var X=new h.google.protobuf.DescriptorProto.ExtensionRange;if(l.start!=null&&(X.start=0|l.start),l.end!=null&&(X.end=0|l.end),l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");X.options=h.google.protobuf.ExtensionRangeOptions.fromObject(l.options)}return X},fe.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.start=0,oe.end=0,oe.options=null),l.start!=null&&l.hasOwnProperty("start")&&(oe.start=l.start),l.end!=null&&l.hasOwnProperty("end")&&(oe.end=l.end),l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.ExtensionRangeOptions.toObject(l.options,X)),oe},fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},fe),ye.ReservedRange=(Te.prototype.start=0,Te.prototype.end=0,Te.create=function(l){return new Te(l)},Te.encode=function(l,X){return X=X||o.create(),l.start!=null&&Object.hasOwnProperty.call(l,"start")&&X.uint32(8).int32(l.start),l.end!=null&&Object.hasOwnProperty.call(l,"end")&&X.uint32(16).int32(l.end),X},Te.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Te.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.DescriptorProto.ReservedRange;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.start=l.int32();break;case 2:_e.end=l.int32();break;default:l.skipType(7&He)}}return _e},Te.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Te.verify=function(l){return typeof l!="object"||l===null?"object expected":l.start!=null&&l.hasOwnProperty("start")&&!s.isInteger(l.start)?"start: integer expected":l.end!=null&&l.hasOwnProperty("end")&&!s.isInteger(l.end)?"end: integer expected":null},Te.fromObject=function(l){var X;return l instanceof h.google.protobuf.DescriptorProto.ReservedRange?l:(X=new h.google.protobuf.DescriptorProto.ReservedRange,l.start!=null&&(X.start=0|l.start),l.end!=null&&(X.end=0|l.end),X)},Te.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.start=0,oe.end=0),l.start!=null&&l.hasOwnProperty("start")&&(oe.start=l.start),l.end!=null&&l.hasOwnProperty("end")&&(oe.end=l.end),oe},Te.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Te),ye),d.ExtensionRangeOptions=(Ae.prototype.uninterpretedOption=s.emptyArray,Ae.create=function(l){return new Ae(l)},Ae.encode=function(l,X){if(X=X||o.create(),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();return X},Ae.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Ae.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.ExtensionRangeOptions;l.pos<oe;){var He=l.uint32();He>>>3==999?(_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()))):l.skipType(7&He)}return _e},Ae.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Ae.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X){var oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]);if(oe)return"uninterpretedOption."+oe}}return null},Ae.fromObject=function(l){if(l instanceof h.google.protobuf.ExtensionRangeOptions)return l;var X=new h.google.protobuf.ExtensionRangeOptions;if(l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}return X},Ae.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[]),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}return oe},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ae),d.FieldDescriptorProto=(Se.prototype.name="",Se.prototype.number=0,Se.prototype.label=1,Se.prototype.type=1,Se.prototype.typeName="",Se.prototype.extendee="",Se.prototype.defaultValue="",Se.prototype.oneofIndex=0,Se.prototype.jsonName="",Se.prototype.options=null,Se.prototype.proto3Optional=!1,Se.create=function(l){return new Se(l)},Se.encode=function(l,X){return X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.extendee!=null&&Object.hasOwnProperty.call(l,"extendee")&&X.uint32(18).string(l.extendee),l.number!=null&&Object.hasOwnProperty.call(l,"number")&&X.uint32(24).int32(l.number),l.label!=null&&Object.hasOwnProperty.call(l,"label")&&X.uint32(32).int32(l.label),l.type!=null&&Object.hasOwnProperty.call(l,"type")&&X.uint32(40).int32(l.type),l.typeName!=null&&Object.hasOwnProperty.call(l,"typeName")&&X.uint32(50).string(l.typeName),l.defaultValue!=null&&Object.hasOwnProperty.call(l,"defaultValue")&&X.uint32(58).string(l.defaultValue),l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.FieldOptions.encode(l.options,X.uint32(66).fork()).ldelim(),l.oneofIndex!=null&&Object.hasOwnProperty.call(l,"oneofIndex")&&X.uint32(72).int32(l.oneofIndex),l.jsonName!=null&&Object.hasOwnProperty.call(l,"jsonName")&&X.uint32(82).string(l.jsonName),l.proto3Optional!=null&&Object.hasOwnProperty.call(l,"proto3Optional")&&X.uint32(136).bool(l.proto3Optional),X},Se.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Se.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.FieldDescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 3:_e.number=l.int32();break;case 4:_e.label=l.int32();break;case 5:_e.type=l.int32();break;case 6:_e.typeName=l.string();break;case 2:_e.extendee=l.string();break;case 7:_e.defaultValue=l.string();break;case 9:_e.oneofIndex=l.int32();break;case 10:_e.jsonName=l.string();break;case 8:_e.options=h.google.protobuf.FieldOptions.decode(l,l.uint32());break;case 17:_e.proto3Optional=l.bool();break;default:l.skipType(7&He)}}return _e},Se.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Se.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name))return"name: string expected";if(l.number!=null&&l.hasOwnProperty("number")&&!s.isInteger(l.number))return"number: integer expected";if(l.label!=null&&l.hasOwnProperty("label"))switch(l.label){default:return"label: enum value expected";case 1:case 2:case 3:}if(l.type!=null&&l.hasOwnProperty("type"))switch(l.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:}if(l.typeName!=null&&l.hasOwnProperty("typeName")&&!s.isString(l.typeName))return"typeName: string expected";if(l.extendee!=null&&l.hasOwnProperty("extendee")&&!s.isString(l.extendee))return"extendee: string expected";if(l.defaultValue!=null&&l.hasOwnProperty("defaultValue")&&!s.isString(l.defaultValue))return"defaultValue: string expected";if(l.oneofIndex!=null&&l.hasOwnProperty("oneofIndex")&&!s.isInteger(l.oneofIndex))return"oneofIndex: integer expected";if(l.jsonName!=null&&l.hasOwnProperty("jsonName")&&!s.isString(l.jsonName))return"jsonName: string expected";if(l.options!=null&&l.hasOwnProperty("options")){var X=h.google.protobuf.FieldOptions.verify(l.options);if(X)return"options."+X}return l.proto3Optional!=null&&l.hasOwnProperty("proto3Optional")&&typeof l.proto3Optional!="boolean"?"proto3Optional: boolean expected":null},Se.fromObject=function(l){if(l instanceof h.google.protobuf.FieldDescriptorProto)return l;var X=new h.google.protobuf.FieldDescriptorProto;switch(l.name!=null&&(X.name=String(l.name)),l.number!=null&&(X.number=0|l.number),l.label){case"LABEL_OPTIONAL":case 1:X.label=1;break;case"LABEL_REQUIRED":case 2:X.label=2;break;case"LABEL_REPEATED":case 3:X.label=3}switch(l.type){case"TYPE_DOUBLE":case 1:X.type=1;break;case"TYPE_FLOAT":case 2:X.type=2;break;case"TYPE_INT64":case 3:X.type=3;break;case"TYPE_UINT64":case 4:X.type=4;break;case"TYPE_INT32":case 5:X.type=5;break;case"TYPE_FIXED64":case 6:X.type=6;break;case"TYPE_FIXED32":case 7:X.type=7;break;case"TYPE_BOOL":case 8:X.type=8;break;case"TYPE_STRING":case 9:X.type=9;break;case"TYPE_GROUP":case 10:X.type=10;break;case"TYPE_MESSAGE":case 11:X.type=11;break;case"TYPE_BYTES":case 12:X.type=12;break;case"TYPE_UINT32":case 13:X.type=13;break;case"TYPE_ENUM":case 14:X.type=14;break;case"TYPE_SFIXED32":case 15:X.type=15;break;case"TYPE_SFIXED64":case 16:X.type=16;break;case"TYPE_SINT32":case 17:X.type=17;break;case"TYPE_SINT64":case 18:X.type=18}if(l.typeName!=null&&(X.typeName=String(l.typeName)),l.extendee!=null&&(X.extendee=String(l.extendee)),l.defaultValue!=null&&(X.defaultValue=String(l.defaultValue)),l.oneofIndex!=null&&(X.oneofIndex=0|l.oneofIndex),l.jsonName!=null&&(X.jsonName=String(l.jsonName)),l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");X.options=h.google.protobuf.FieldOptions.fromObject(l.options)}return l.proto3Optional!=null&&(X.proto3Optional=!!l.proto3Optional),X},Se.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.name="",oe.extendee="",oe.number=0,oe.label=X.enums===String?"LABEL_OPTIONAL":1,oe.type=X.enums===String?"TYPE_DOUBLE":1,oe.typeName="",oe.defaultValue="",oe.options=null,oe.oneofIndex=0,oe.jsonName="",oe.proto3Optional=!1),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.extendee!=null&&l.hasOwnProperty("extendee")&&(oe.extendee=l.extendee),l.number!=null&&l.hasOwnProperty("number")&&(oe.number=l.number),l.label!=null&&l.hasOwnProperty("label")&&(oe.label=X.enums===String?h.google.protobuf.FieldDescriptorProto.Label[l.label]:l.label),l.type!=null&&l.hasOwnProperty("type")&&(oe.type=X.enums===String?h.google.protobuf.FieldDescriptorProto.Type[l.type]:l.type),l.typeName!=null&&l.hasOwnProperty("typeName")&&(oe.typeName=l.typeName),l.defaultValue!=null&&l.hasOwnProperty("defaultValue")&&(oe.defaultValue=l.defaultValue),l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.FieldOptions.toObject(l.options,X)),l.oneofIndex!=null&&l.hasOwnProperty("oneofIndex")&&(oe.oneofIndex=l.oneofIndex),l.jsonName!=null&&l.hasOwnProperty("jsonName")&&(oe.jsonName=l.jsonName),l.proto3Optional!=null&&l.hasOwnProperty("proto3Optional")&&(oe.proto3Optional=l.proto3Optional),oe},Se.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Se.Type=(r={},(u=Object.create(r))[r[1]="TYPE_DOUBLE"]=1,u[r[2]="TYPE_FLOAT"]=2,u[r[3]="TYPE_INT64"]=3,u[r[4]="TYPE_UINT64"]=4,u[r[5]="TYPE_INT32"]=5,u[r[6]="TYPE_FIXED64"]=6,u[r[7]="TYPE_FIXED32"]=7,u[r[8]="TYPE_BOOL"]=8,u[r[9]="TYPE_STRING"]=9,u[r[10]="TYPE_GROUP"]=10,u[r[11]="TYPE_MESSAGE"]=11,u[r[12]="TYPE_BYTES"]=12,u[r[13]="TYPE_UINT32"]=13,u[r[14]="TYPE_ENUM"]=14,u[r[15]="TYPE_SFIXED32"]=15,u[r[16]="TYPE_SFIXED64"]=16,u[r[17]="TYPE_SINT32"]=17,u[r[18]="TYPE_SINT64"]=18,u),Se.Label=(r={},(u=Object.create(r))[r[1]="LABEL_OPTIONAL"]=1,u[r[2]="LABEL_REQUIRED"]=2,u[r[3]="LABEL_REPEATED"]=3,u),Se),d.OneofDescriptorProto=(be.prototype.name="",be.prototype.options=null,be.create=function(l){return new be(l)},be.encode=function(l,X){return X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.OneofOptions.encode(l.options,X.uint32(18).fork()).ldelim(),X},be.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},be.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.OneofDescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 2:_e.options=h.google.protobuf.OneofOptions.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},be.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},be.verify=function(l){return typeof l!="object"||l===null?"object expected":l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name)?"name: string expected":l.options!=null&&l.hasOwnProperty("options")&&(l=h.google.protobuf.OneofOptions.verify(l.options),l)?"options."+l:null},be.fromObject=function(l){if(l instanceof h.google.protobuf.OneofDescriptorProto)return l;var X=new h.google.protobuf.OneofDescriptorProto;if(l.name!=null&&(X.name=String(l.name)),l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");X.options=h.google.protobuf.OneofOptions.fromObject(l.options)}return X},be.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.name="",oe.options=null),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.OneofOptions.toObject(l.options,X)),oe},be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},be),d.EnumDescriptorProto=(we.prototype.name="",we.prototype.value=s.emptyArray,we.prototype.options=null,we.prototype.reservedRange=s.emptyArray,we.prototype.reservedName=s.emptyArray,we.create=function(l){return new we(l)},we.encode=function(l,X){if(X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.value!=null&&l.value.length)for(var oe=0;oe<l.value.length;++oe)h.google.protobuf.EnumValueDescriptorProto.encode(l.value[oe],X.uint32(18).fork()).ldelim();if(l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.EnumOptions.encode(l.options,X.uint32(26).fork()).ldelim(),l.reservedRange!=null&&l.reservedRange.length)for(oe=0;oe<l.reservedRange.length;++oe)h.google.protobuf.EnumDescriptorProto.EnumReservedRange.encode(l.reservedRange[oe],X.uint32(34).fork()).ldelim();if(l.reservedName!=null&&l.reservedName.length)for(oe=0;oe<l.reservedName.length;++oe)X.uint32(42).string(l.reservedName[oe]);return X},we.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},we.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.EnumDescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 2:_e.value&&_e.value.length||(_e.value=[]),_e.value.push(h.google.protobuf.EnumValueDescriptorProto.decode(l,l.uint32()));break;case 3:_e.options=h.google.protobuf.EnumOptions.decode(l,l.uint32());break;case 4:_e.reservedRange&&_e.reservedRange.length||(_e.reservedRange=[]),_e.reservedRange.push(h.google.protobuf.EnumDescriptorProto.EnumReservedRange.decode(l,l.uint32()));break;case 5:_e.reservedName&&_e.reservedName.length||(_e.reservedName=[]),_e.reservedName.push(l.string());break;default:l.skipType(7&He)}}return _e},we.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},we.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name))return"name: string expected";if(l.value!=null&&l.hasOwnProperty("value")){if(!Array.isArray(l.value))return"value: array expected";for(var X=0;X<l.value.length;++X)if(oe=h.google.protobuf.EnumValueDescriptorProto.verify(l.value[X]))return"value."+oe}if(l.options!=null&&l.hasOwnProperty("options")&&(oe=h.google.protobuf.EnumOptions.verify(l.options)))return"options."+oe;if(l.reservedRange!=null&&l.hasOwnProperty("reservedRange")){if(!Array.isArray(l.reservedRange))return"reservedRange: array expected";for(var oe,X=0;X<l.reservedRange.length;++X)if(oe=h.google.protobuf.EnumDescriptorProto.EnumReservedRange.verify(l.reservedRange[X]))return"reservedRange."+oe}if(l.reservedName!=null&&l.hasOwnProperty("reservedName")){if(!Array.isArray(l.reservedName))return"reservedName: array expected";for(X=0;X<l.reservedName.length;++X)if(!s.isString(l.reservedName[X]))return"reservedName: string[] expected"}return null},we.fromObject=function(l){if(l instanceof h.google.protobuf.EnumDescriptorProto)return l;var X=new h.google.protobuf.EnumDescriptorProto;if(l.name!=null&&(X.name=String(l.name)),l.value){if(!Array.isArray(l.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");X.value=[];for(var oe=0;oe<l.value.length;++oe){if(typeof l.value[oe]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");X.value[oe]=h.google.protobuf.EnumValueDescriptorProto.fromObject(l.value[oe])}}if(l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");X.options=h.google.protobuf.EnumOptions.fromObject(l.options)}if(l.reservedRange){if(!Array.isArray(l.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(X.reservedRange=[],oe=0;oe<l.reservedRange.length;++oe){if(typeof l.reservedRange[oe]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");X.reservedRange[oe]=h.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(l.reservedRange[oe])}}if(l.reservedName){if(!Array.isArray(l.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(X.reservedName=[],oe=0;oe<l.reservedName.length;++oe)X.reservedName[oe]=String(l.reservedName[oe])}return X},we.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.value=[],oe.reservedRange=[],oe.reservedName=[]),X.defaults&&(oe.name="",oe.options=null),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.value&&l.value.length){oe.value=[];for(var _e=0;_e<l.value.length;++_e)oe.value[_e]=h.google.protobuf.EnumValueDescriptorProto.toObject(l.value[_e],X)}if(l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.EnumOptions.toObject(l.options,X)),l.reservedRange&&l.reservedRange.length)for(oe.reservedRange=[],_e=0;_e<l.reservedRange.length;++_e)oe.reservedRange[_e]=h.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(l.reservedRange[_e],X);if(l.reservedName&&l.reservedName.length)for(oe.reservedName=[],_e=0;_e<l.reservedName.length;++_e)oe.reservedName[_e]=l.reservedName[_e];return oe},we.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},we.EnumReservedRange=(Ce.prototype.start=0,Ce.prototype.end=0,Ce.create=function(l){return new Ce(l)},Ce.encode=function(l,X){return X=X||o.create(),l.start!=null&&Object.hasOwnProperty.call(l,"start")&&X.uint32(8).int32(l.start),l.end!=null&&Object.hasOwnProperty.call(l,"end")&&X.uint32(16).int32(l.end),X},Ce.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Ce.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.EnumDescriptorProto.EnumReservedRange;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.start=l.int32();break;case 2:_e.end=l.int32();break;default:l.skipType(7&He)}}return _e},Ce.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Ce.verify=function(l){return typeof l!="object"||l===null?"object expected":l.start!=null&&l.hasOwnProperty("start")&&!s.isInteger(l.start)?"start: integer expected":l.end!=null&&l.hasOwnProperty("end")&&!s.isInteger(l.end)?"end: integer expected":null},Ce.fromObject=function(l){var X;return l instanceof h.google.protobuf.EnumDescriptorProto.EnumReservedRange?l:(X=new h.google.protobuf.EnumDescriptorProto.EnumReservedRange,l.start!=null&&(X.start=0|l.start),l.end!=null&&(X.end=0|l.end),X)},Ce.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.start=0,oe.end=0),l.start!=null&&l.hasOwnProperty("start")&&(oe.start=l.start),l.end!=null&&l.hasOwnProperty("end")&&(oe.end=l.end),oe},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ce),we),d.EnumValueDescriptorProto=(je.prototype.name="",je.prototype.number=0,je.prototype.options=null,je.create=function(l){return new je(l)},je.encode=function(l,X){return X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.number!=null&&Object.hasOwnProperty.call(l,"number")&&X.uint32(16).int32(l.number),l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.EnumValueOptions.encode(l.options,X.uint32(26).fork()).ldelim(),X},je.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},je.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.EnumValueDescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 2:_e.number=l.int32();break;case 3:_e.options=h.google.protobuf.EnumValueOptions.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},je.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},je.verify=function(l){return typeof l!="object"||l===null?"object expected":l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name)?"name: string expected":l.number!=null&&l.hasOwnProperty("number")&&!s.isInteger(l.number)?"number: integer expected":l.options!=null&&l.hasOwnProperty("options")&&(l=h.google.protobuf.EnumValueOptions.verify(l.options),l)?"options."+l:null},je.fromObject=function(l){if(l instanceof h.google.protobuf.EnumValueDescriptorProto)return l;var X=new h.google.protobuf.EnumValueDescriptorProto;if(l.name!=null&&(X.name=String(l.name)),l.number!=null&&(X.number=0|l.number),l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");X.options=h.google.protobuf.EnumValueOptions.fromObject(l.options)}return X},je.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.name="",oe.number=0,oe.options=null),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.number!=null&&l.hasOwnProperty("number")&&(oe.number=l.number),l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.EnumValueOptions.toObject(l.options,X)),oe},je.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},je),d.ServiceDescriptorProto=(Fe.prototype.name="",Fe.prototype.method=s.emptyArray,Fe.prototype.options=null,Fe.create=function(l){return new Fe(l)},Fe.encode=function(l,X){if(X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.method!=null&&l.method.length)for(var oe=0;oe<l.method.length;++oe)h.google.protobuf.MethodDescriptorProto.encode(l.method[oe],X.uint32(18).fork()).ldelim();return l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.ServiceOptions.encode(l.options,X.uint32(26).fork()).ldelim(),X},Fe.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Fe.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.ServiceDescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 2:_e.method&&_e.method.length||(_e.method=[]),_e.method.push(h.google.protobuf.MethodDescriptorProto.decode(l,l.uint32()));break;case 3:_e.options=h.google.protobuf.ServiceOptions.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},Fe.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Fe.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name))return"name: string expected";if(l.method!=null&&l.hasOwnProperty("method")){if(!Array.isArray(l.method))return"method: array expected";for(var X=0;X<l.method.length;++X)if(oe=h.google.protobuf.MethodDescriptorProto.verify(l.method[X]))return"method."+oe}var oe;return l.options!=null&&l.hasOwnProperty("options")&&(oe=h.google.protobuf.ServiceOptions.verify(l.options))?"options."+oe:null},Fe.fromObject=function(l){if(l instanceof h.google.protobuf.ServiceDescriptorProto)return l;var X=new h.google.protobuf.ServiceDescriptorProto;if(l.name!=null&&(X.name=String(l.name)),l.method){if(!Array.isArray(l.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");X.method=[];for(var oe=0;oe<l.method.length;++oe){if(typeof l.method[oe]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");X.method[oe]=h.google.protobuf.MethodDescriptorProto.fromObject(l.method[oe])}}if(l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");X.options=h.google.protobuf.ServiceOptions.fromObject(l.options)}return X},Fe.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.method=[]),X.defaults&&(oe.name="",oe.options=null),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.method&&l.method.length){oe.method=[];for(var _e=0;_e<l.method.length;++_e)oe.method[_e]=h.google.protobuf.MethodDescriptorProto.toObject(l.method[_e],X)}return l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.ServiceOptions.toObject(l.options,X)),oe},Fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Fe),d.MethodDescriptorProto=(Ve.prototype.name="",Ve.prototype.inputType="",Ve.prototype.outputType="",Ve.prototype.options=null,Ve.prototype.clientStreaming=!1,Ve.prototype.serverStreaming=!1,Ve.create=function(l){return new Ve(l)},Ve.encode=function(l,X){return X=X||o.create(),l.name!=null&&Object.hasOwnProperty.call(l,"name")&&X.uint32(10).string(l.name),l.inputType!=null&&Object.hasOwnProperty.call(l,"inputType")&&X.uint32(18).string(l.inputType),l.outputType!=null&&Object.hasOwnProperty.call(l,"outputType")&&X.uint32(26).string(l.outputType),l.options!=null&&Object.hasOwnProperty.call(l,"options")&&h.google.protobuf.MethodOptions.encode(l.options,X.uint32(34).fork()).ldelim(),l.clientStreaming!=null&&Object.hasOwnProperty.call(l,"clientStreaming")&&X.uint32(40).bool(l.clientStreaming),l.serverStreaming!=null&&Object.hasOwnProperty.call(l,"serverStreaming")&&X.uint32(48).bool(l.serverStreaming),X},Ve.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Ve.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.MethodDescriptorProto;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.name=l.string();break;case 2:_e.inputType=l.string();break;case 3:_e.outputType=l.string();break;case 4:_e.options=h.google.protobuf.MethodOptions.decode(l,l.uint32());break;case 5:_e.clientStreaming=l.bool();break;case 6:_e.serverStreaming=l.bool();break;default:l.skipType(7&He)}}return _e},Ve.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Ve.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!s.isString(l.name))return"name: string expected";if(l.inputType!=null&&l.hasOwnProperty("inputType")&&!s.isString(l.inputType))return"inputType: string expected";if(l.outputType!=null&&l.hasOwnProperty("outputType")&&!s.isString(l.outputType))return"outputType: string expected";if(l.options!=null&&l.hasOwnProperty("options")){var X=h.google.protobuf.MethodOptions.verify(l.options);if(X)return"options."+X}return l.clientStreaming!=null&&l.hasOwnProperty("clientStreaming")&&typeof l.clientStreaming!="boolean"?"clientStreaming: boolean expected":l.serverStreaming!=null&&l.hasOwnProperty("serverStreaming")&&typeof l.serverStreaming!="boolean"?"serverStreaming: boolean expected":null},Ve.fromObject=function(l){if(l instanceof h.google.protobuf.MethodDescriptorProto)return l;var X=new h.google.protobuf.MethodDescriptorProto;if(l.name!=null&&(X.name=String(l.name)),l.inputType!=null&&(X.inputType=String(l.inputType)),l.outputType!=null&&(X.outputType=String(l.outputType)),l.options!=null){if(typeof l.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");X.options=h.google.protobuf.MethodOptions.fromObject(l.options)}return l.clientStreaming!=null&&(X.clientStreaming=!!l.clientStreaming),l.serverStreaming!=null&&(X.serverStreaming=!!l.serverStreaming),X},Ve.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.name="",oe.inputType="",oe.outputType="",oe.options=null,oe.clientStreaming=!1,oe.serverStreaming=!1),l.name!=null&&l.hasOwnProperty("name")&&(oe.name=l.name),l.inputType!=null&&l.hasOwnProperty("inputType")&&(oe.inputType=l.inputType),l.outputType!=null&&l.hasOwnProperty("outputType")&&(oe.outputType=l.outputType),l.options!=null&&l.hasOwnProperty("options")&&(oe.options=h.google.protobuf.MethodOptions.toObject(l.options,X)),l.clientStreaming!=null&&l.hasOwnProperty("clientStreaming")&&(oe.clientStreaming=l.clientStreaming),l.serverStreaming!=null&&l.hasOwnProperty("serverStreaming")&&(oe.serverStreaming=l.serverStreaming),oe},Ve.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ve),d.FileOptions=(Ge.prototype.javaPackage="",Ge.prototype.javaOuterClassname="",Ge.prototype.javaMultipleFiles=!1,Ge.prototype.javaGenerateEqualsAndHash=!1,Ge.prototype.javaStringCheckUtf8=!1,Ge.prototype.optimizeFor=1,Ge.prototype.goPackage="",Ge.prototype.ccGenericServices=!1,Ge.prototype.javaGenericServices=!1,Ge.prototype.pyGenericServices=!1,Ge.prototype.phpGenericServices=!1,Ge.prototype.deprecated=!1,Ge.prototype.ccEnableArenas=!0,Ge.prototype.objcClassPrefix="",Ge.prototype.csharpNamespace="",Ge.prototype.swiftPrefix="",Ge.prototype.phpClassPrefix="",Ge.prototype.phpNamespace="",Ge.prototype.phpMetadataNamespace="",Ge.prototype.rubyPackage="",Ge.prototype.uninterpretedOption=s.emptyArray,Ge.prototype[".google.api.resourceDefinition"]=s.emptyArray,Ge.create=function(l){return new Ge(l)},Ge.encode=function(l,X){if(X=X||o.create(),l.javaPackage!=null&&Object.hasOwnProperty.call(l,"javaPackage")&&X.uint32(10).string(l.javaPackage),l.javaOuterClassname!=null&&Object.hasOwnProperty.call(l,"javaOuterClassname")&&X.uint32(66).string(l.javaOuterClassname),l.optimizeFor!=null&&Object.hasOwnProperty.call(l,"optimizeFor")&&X.uint32(72).int32(l.optimizeFor),l.javaMultipleFiles!=null&&Object.hasOwnProperty.call(l,"javaMultipleFiles")&&X.uint32(80).bool(l.javaMultipleFiles),l.goPackage!=null&&Object.hasOwnProperty.call(l,"goPackage")&&X.uint32(90).string(l.goPackage),l.ccGenericServices!=null&&Object.hasOwnProperty.call(l,"ccGenericServices")&&X.uint32(128).bool(l.ccGenericServices),l.javaGenericServices!=null&&Object.hasOwnProperty.call(l,"javaGenericServices")&&X.uint32(136).bool(l.javaGenericServices),l.pyGenericServices!=null&&Object.hasOwnProperty.call(l,"pyGenericServices")&&X.uint32(144).bool(l.pyGenericServices),l.javaGenerateEqualsAndHash!=null&&Object.hasOwnProperty.call(l,"javaGenerateEqualsAndHash")&&X.uint32(160).bool(l.javaGenerateEqualsAndHash),l.deprecated!=null&&Object.hasOwnProperty.call(l,"deprecated")&&X.uint32(184).bool(l.deprecated),l.javaStringCheckUtf8!=null&&Object.hasOwnProperty.call(l,"javaStringCheckUtf8")&&X.uint32(216).bool(l.javaStringCheckUtf8),l.ccEnableArenas!=null&&Object.hasOwnProperty.call(l,"ccEnableArenas")&&X.uint32(248).bool(l.ccEnableArenas),l.objcClassPrefix!=null&&Object.hasOwnProperty.call(l,"objcClassPrefix")&&X.uint32(290).string(l.objcClassPrefix),l.csharpNamespace!=null&&Object.hasOwnProperty.call(l,"csharpNamespace")&&X.uint32(298).string(l.csharpNamespace),l.swiftPrefix!=null&&Object.hasOwnProperty.call(l,"swiftPrefix")&&X.uint32(314).string(l.swiftPrefix),l.phpClassPrefix!=null&&Object.hasOwnProperty.call(l,"phpClassPrefix")&&X.uint32(322).string(l.phpClassPrefix),l.phpNamespace!=null&&Object.hasOwnProperty.call(l,"phpNamespace")&&X.uint32(330).string(l.phpNamespace),l.phpGenericServices!=null&&Object.hasOwnProperty.call(l,"phpGenericServices")&&X.uint32(336).bool(l.phpGenericServices),l.phpMetadataNamespace!=null&&Object.hasOwnProperty.call(l,"phpMetadataNamespace")&&X.uint32(354).string(l.phpMetadataNamespace),l.rubyPackage!=null&&Object.hasOwnProperty.call(l,"rubyPackage")&&X.uint32(362).string(l.rubyPackage),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();if(l[".google.api.resourceDefinition"]!=null&&l[".google.api.resourceDefinition"].length)for(oe=0;oe<l[".google.api.resourceDefinition"].length;++oe)h.google.api.ResourceDescriptor.encode(l[".google.api.resourceDefinition"][oe],X.uint32(8426).fork()).ldelim();return X},Ge.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Ge.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.FileOptions;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.javaPackage=l.string();break;case 8:_e.javaOuterClassname=l.string();break;case 10:_e.javaMultipleFiles=l.bool();break;case 20:_e.javaGenerateEqualsAndHash=l.bool();break;case 27:_e.javaStringCheckUtf8=l.bool();break;case 9:_e.optimizeFor=l.int32();break;case 11:_e.goPackage=l.string();break;case 16:_e.ccGenericServices=l.bool();break;case 17:_e.javaGenericServices=l.bool();break;case 18:_e.pyGenericServices=l.bool();break;case 42:_e.phpGenericServices=l.bool();break;case 23:_e.deprecated=l.bool();break;case 31:_e.ccEnableArenas=l.bool();break;case 36:_e.objcClassPrefix=l.string();break;case 37:_e.csharpNamespace=l.string();break;case 39:_e.swiftPrefix=l.string();break;case 40:_e.phpClassPrefix=l.string();break;case 41:_e.phpNamespace=l.string();break;case 44:_e.phpMetadataNamespace=l.string();break;case 45:_e.rubyPackage=l.string();break;case 999:_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()));break;case 1053:_e[".google.api.resourceDefinition"]&&_e[".google.api.resourceDefinition"].length||(_e[".google.api.resourceDefinition"]=[]),_e[".google.api.resourceDefinition"].push(h.google.api.ResourceDescriptor.decode(l,l.uint32()));break;default:l.skipType(7&He)}}return _e},Ge.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Ge.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.javaPackage!=null&&l.hasOwnProperty("javaPackage")&&!s.isString(l.javaPackage))return"javaPackage: string expected";if(l.javaOuterClassname!=null&&l.hasOwnProperty("javaOuterClassname")&&!s.isString(l.javaOuterClassname))return"javaOuterClassname: string expected";if(l.javaMultipleFiles!=null&&l.hasOwnProperty("javaMultipleFiles")&&typeof l.javaMultipleFiles!="boolean")return"javaMultipleFiles: boolean expected";if(l.javaGenerateEqualsAndHash!=null&&l.hasOwnProperty("javaGenerateEqualsAndHash")&&typeof l.javaGenerateEqualsAndHash!="boolean")return"javaGenerateEqualsAndHash: boolean expected";if(l.javaStringCheckUtf8!=null&&l.hasOwnProperty("javaStringCheckUtf8")&&typeof l.javaStringCheckUtf8!="boolean")return"javaStringCheckUtf8: boolean expected";if(l.optimizeFor!=null&&l.hasOwnProperty("optimizeFor"))switch(l.optimizeFor){default:return"optimizeFor: enum value expected";case 1:case 2:case 3:}if(l.goPackage!=null&&l.hasOwnProperty("goPackage")&&!s.isString(l.goPackage))return"goPackage: string expected";if(l.ccGenericServices!=null&&l.hasOwnProperty("ccGenericServices")&&typeof l.ccGenericServices!="boolean")return"ccGenericServices: boolean expected";if(l.javaGenericServices!=null&&l.hasOwnProperty("javaGenericServices")&&typeof l.javaGenericServices!="boolean")return"javaGenericServices: boolean expected";if(l.pyGenericServices!=null&&l.hasOwnProperty("pyGenericServices")&&typeof l.pyGenericServices!="boolean")return"pyGenericServices: boolean expected";if(l.phpGenericServices!=null&&l.hasOwnProperty("phpGenericServices")&&typeof l.phpGenericServices!="boolean")return"phpGenericServices: boolean expected";if(l.deprecated!=null&&l.hasOwnProperty("deprecated")&&typeof l.deprecated!="boolean")return"deprecated: boolean expected";if(l.ccEnableArenas!=null&&l.hasOwnProperty("ccEnableArenas")&&typeof l.ccEnableArenas!="boolean")return"ccEnableArenas: boolean expected";if(l.objcClassPrefix!=null&&l.hasOwnProperty("objcClassPrefix")&&!s.isString(l.objcClassPrefix))return"objcClassPrefix: string expected";if(l.csharpNamespace!=null&&l.hasOwnProperty("csharpNamespace")&&!s.isString(l.csharpNamespace))return"csharpNamespace: string expected";if(l.swiftPrefix!=null&&l.hasOwnProperty("swiftPrefix")&&!s.isString(l.swiftPrefix))return"swiftPrefix: string expected";if(l.phpClassPrefix!=null&&l.hasOwnProperty("phpClassPrefix")&&!s.isString(l.phpClassPrefix))return"phpClassPrefix: string expected";if(l.phpNamespace!=null&&l.hasOwnProperty("phpNamespace")&&!s.isString(l.phpNamespace))return"phpNamespace: string expected";if(l.phpMetadataNamespace!=null&&l.hasOwnProperty("phpMetadataNamespace")&&!s.isString(l.phpMetadataNamespace))return"phpMetadataNamespace: string expected";if(l.rubyPackage!=null&&l.hasOwnProperty("rubyPackage")&&!s.isString(l.rubyPackage))return"rubyPackage: string expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X)if(oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]))return"uninterpretedOption."+oe}if(l[".google.api.resourceDefinition"]!=null&&l.hasOwnProperty(".google.api.resourceDefinition")){if(!Array.isArray(l[".google.api.resourceDefinition"]))return".google.api.resourceDefinition: array expected";for(var oe,X=0;X<l[".google.api.resourceDefinition"].length;++X)if(oe=h.google.api.ResourceDescriptor.verify(l[".google.api.resourceDefinition"][X]))return".google.api.resourceDefinition."+oe}return null},Ge.fromObject=function(l){if(l instanceof h.google.protobuf.FileOptions)return l;var X=new h.google.protobuf.FileOptions;switch(l.javaPackage!=null&&(X.javaPackage=String(l.javaPackage)),l.javaOuterClassname!=null&&(X.javaOuterClassname=String(l.javaOuterClassname)),l.javaMultipleFiles!=null&&(X.javaMultipleFiles=!!l.javaMultipleFiles),l.javaGenerateEqualsAndHash!=null&&(X.javaGenerateEqualsAndHash=!!l.javaGenerateEqualsAndHash),l.javaStringCheckUtf8!=null&&(X.javaStringCheckUtf8=!!l.javaStringCheckUtf8),l.optimizeFor){case"SPEED":case 1:X.optimizeFor=1;break;case"CODE_SIZE":case 2:X.optimizeFor=2;break;case"LITE_RUNTIME":case 3:X.optimizeFor=3}if(l.goPackage!=null&&(X.goPackage=String(l.goPackage)),l.ccGenericServices!=null&&(X.ccGenericServices=!!l.ccGenericServices),l.javaGenericServices!=null&&(X.javaGenericServices=!!l.javaGenericServices),l.pyGenericServices!=null&&(X.pyGenericServices=!!l.pyGenericServices),l.phpGenericServices!=null&&(X.phpGenericServices=!!l.phpGenericServices),l.deprecated!=null&&(X.deprecated=!!l.deprecated),l.ccEnableArenas!=null&&(X.ccEnableArenas=!!l.ccEnableArenas),l.objcClassPrefix!=null&&(X.objcClassPrefix=String(l.objcClassPrefix)),l.csharpNamespace!=null&&(X.csharpNamespace=String(l.csharpNamespace)),l.swiftPrefix!=null&&(X.swiftPrefix=String(l.swiftPrefix)),l.phpClassPrefix!=null&&(X.phpClassPrefix=String(l.phpClassPrefix)),l.phpNamespace!=null&&(X.phpNamespace=String(l.phpNamespace)),l.phpMetadataNamespace!=null&&(X.phpMetadataNamespace=String(l.phpMetadataNamespace)),l.rubyPackage!=null&&(X.rubyPackage=String(l.rubyPackage)),l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}if(l[".google.api.resourceDefinition"]){if(!Array.isArray(l[".google.api.resourceDefinition"]))throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: array expected");for(X[".google.api.resourceDefinition"]=[],oe=0;oe<l[".google.api.resourceDefinition"].length;++oe){if(typeof l[".google.api.resourceDefinition"][oe]!="object")throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: object expected");X[".google.api.resourceDefinition"][oe]=h.google.api.ResourceDescriptor.fromObject(l[".google.api.resourceDefinition"][oe])}}return X},Ge.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[],oe[".google.api.resourceDefinition"]=[]),X.defaults&&(oe.javaPackage="",oe.javaOuterClassname="",oe.optimizeFor=X.enums===String?"SPEED":1,oe.javaMultipleFiles=!1,oe.goPackage="",oe.ccGenericServices=!1,oe.javaGenericServices=!1,oe.pyGenericServices=!1,oe.javaGenerateEqualsAndHash=!1,oe.deprecated=!1,oe.javaStringCheckUtf8=!1,oe.ccEnableArenas=!0,oe.objcClassPrefix="",oe.csharpNamespace="",oe.swiftPrefix="",oe.phpClassPrefix="",oe.phpNamespace="",oe.phpGenericServices=!1,oe.phpMetadataNamespace="",oe.rubyPackage=""),l.javaPackage!=null&&l.hasOwnProperty("javaPackage")&&(oe.javaPackage=l.javaPackage),l.javaOuterClassname!=null&&l.hasOwnProperty("javaOuterClassname")&&(oe.javaOuterClassname=l.javaOuterClassname),l.optimizeFor!=null&&l.hasOwnProperty("optimizeFor")&&(oe.optimizeFor=X.enums===String?h.google.protobuf.FileOptions.OptimizeMode[l.optimizeFor]:l.optimizeFor),l.javaMultipleFiles!=null&&l.hasOwnProperty("javaMultipleFiles")&&(oe.javaMultipleFiles=l.javaMultipleFiles),l.goPackage!=null&&l.hasOwnProperty("goPackage")&&(oe.goPackage=l.goPackage),l.ccGenericServices!=null&&l.hasOwnProperty("ccGenericServices")&&(oe.ccGenericServices=l.ccGenericServices),l.javaGenericServices!=null&&l.hasOwnProperty("javaGenericServices")&&(oe.javaGenericServices=l.javaGenericServices),l.pyGenericServices!=null&&l.hasOwnProperty("pyGenericServices")&&(oe.pyGenericServices=l.pyGenericServices),l.javaGenerateEqualsAndHash!=null&&l.hasOwnProperty("javaGenerateEqualsAndHash")&&(oe.javaGenerateEqualsAndHash=l.javaGenerateEqualsAndHash),l.deprecated!=null&&l.hasOwnProperty("deprecated")&&(oe.deprecated=l.deprecated),l.javaStringCheckUtf8!=null&&l.hasOwnProperty("javaStringCheckUtf8")&&(oe.javaStringCheckUtf8=l.javaStringCheckUtf8),l.ccEnableArenas!=null&&l.hasOwnProperty("ccEnableArenas")&&(oe.ccEnableArenas=l.ccEnableArenas),l.objcClassPrefix!=null&&l.hasOwnProperty("objcClassPrefix")&&(oe.objcClassPrefix=l.objcClassPrefix),l.csharpNamespace!=null&&l.hasOwnProperty("csharpNamespace")&&(oe.csharpNamespace=l.csharpNamespace),l.swiftPrefix!=null&&l.hasOwnProperty("swiftPrefix")&&(oe.swiftPrefix=l.swiftPrefix),l.phpClassPrefix!=null&&l.hasOwnProperty("phpClassPrefix")&&(oe.phpClassPrefix=l.phpClassPrefix),l.phpNamespace!=null&&l.hasOwnProperty("phpNamespace")&&(oe.phpNamespace=l.phpNamespace),l.phpGenericServices!=null&&l.hasOwnProperty("phpGenericServices")&&(oe.phpGenericServices=l.phpGenericServices),l.phpMetadataNamespace!=null&&l.hasOwnProperty("phpMetadataNamespace")&&(oe.phpMetadataNamespace=l.phpMetadataNamespace),l.rubyPackage!=null&&l.hasOwnProperty("rubyPackage")&&(oe.rubyPackage=l.rubyPackage),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}if(l[".google.api.resourceDefinition"]&&l[".google.api.resourceDefinition"].length)for(oe[".google.api.resourceDefinition"]=[],_e=0;_e<l[".google.api.resourceDefinition"].length;++_e)oe[".google.api.resourceDefinition"][_e]=h.google.api.ResourceDescriptor.toObject(l[".google.api.resourceDefinition"][_e],X);return oe},Ge.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ge.OptimizeMode=(r={},(u=Object.create(r))[r[1]="SPEED"]=1,u[r[2]="CODE_SIZE"]=2,u[r[3]="LITE_RUNTIME"]=3,u),Ge),d.MessageOptions=(Le.prototype.messageSetWireFormat=!1,Le.prototype.noStandardDescriptorAccessor=!1,Le.prototype.deprecated=!1,Le.prototype.mapEntry=!1,Le.prototype.uninterpretedOption=s.emptyArray,Le.prototype[".google.api.resource"]=null,Le.create=function(l){return new Le(l)},Le.encode=function(l,X){if(X=X||o.create(),l.messageSetWireFormat!=null&&Object.hasOwnProperty.call(l,"messageSetWireFormat")&&X.uint32(8).bool(l.messageSetWireFormat),l.noStandardDescriptorAccessor!=null&&Object.hasOwnProperty.call(l,"noStandardDescriptorAccessor")&&X.uint32(16).bool(l.noStandardDescriptorAccessor),l.deprecated!=null&&Object.hasOwnProperty.call(l,"deprecated")&&X.uint32(24).bool(l.deprecated),l.mapEntry!=null&&Object.hasOwnProperty.call(l,"mapEntry")&&X.uint32(56).bool(l.mapEntry),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();return l[".google.api.resource"]!=null&&Object.hasOwnProperty.call(l,".google.api.resource")&&h.google.api.ResourceDescriptor.encode(l[".google.api.resource"],X.uint32(8426).fork()).ldelim(),X},Le.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Le.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.MessageOptions;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.messageSetWireFormat=l.bool();break;case 2:_e.noStandardDescriptorAccessor=l.bool();break;case 3:_e.deprecated=l.bool();break;case 7:_e.mapEntry=l.bool();break;case 999:_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()));break;case 1053:_e[".google.api.resource"]=h.google.api.ResourceDescriptor.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},Le.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Le.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.messageSetWireFormat!=null&&l.hasOwnProperty("messageSetWireFormat")&&typeof l.messageSetWireFormat!="boolean")return"messageSetWireFormat: boolean expected";if(l.noStandardDescriptorAccessor!=null&&l.hasOwnProperty("noStandardDescriptorAccessor")&&typeof l.noStandardDescriptorAccessor!="boolean")return"noStandardDescriptorAccessor: boolean expected";if(l.deprecated!=null&&l.hasOwnProperty("deprecated")&&typeof l.deprecated!="boolean")return"deprecated: boolean expected";if(l.mapEntry!=null&&l.hasOwnProperty("mapEntry")&&typeof l.mapEntry!="boolean")return"mapEntry: boolean expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X)if(oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]))return"uninterpretedOption."+oe}var oe;return l[".google.api.resource"]!=null&&l.hasOwnProperty(".google.api.resource")&&(oe=h.google.api.ResourceDescriptor.verify(l[".google.api.resource"]))?".google.api.resource."+oe:null},Le.fromObject=function(l){if(l instanceof h.google.protobuf.MessageOptions)return l;var X=new h.google.protobuf.MessageOptions;if(l.messageSetWireFormat!=null&&(X.messageSetWireFormat=!!l.messageSetWireFormat),l.noStandardDescriptorAccessor!=null&&(X.noStandardDescriptorAccessor=!!l.noStandardDescriptorAccessor),l.deprecated!=null&&(X.deprecated=!!l.deprecated),l.mapEntry!=null&&(X.mapEntry=!!l.mapEntry),l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}if(l[".google.api.resource"]!=null){if(typeof l[".google.api.resource"]!="object")throw TypeError(".google.protobuf.MessageOptions..google.api.resource: object expected");X[".google.api.resource"]=h.google.api.ResourceDescriptor.fromObject(l[".google.api.resource"])}return X},Le.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[]),X.defaults&&(oe.messageSetWireFormat=!1,oe.noStandardDescriptorAccessor=!1,oe.deprecated=!1,oe.mapEntry=!1,oe[".google.api.resource"]=null),l.messageSetWireFormat!=null&&l.hasOwnProperty("messageSetWireFormat")&&(oe.messageSetWireFormat=l.messageSetWireFormat),l.noStandardDescriptorAccessor!=null&&l.hasOwnProperty("noStandardDescriptorAccessor")&&(oe.noStandardDescriptorAccessor=l.noStandardDescriptorAccessor),l.deprecated!=null&&l.hasOwnProperty("deprecated")&&(oe.deprecated=l.deprecated),l.mapEntry!=null&&l.hasOwnProperty("mapEntry")&&(oe.mapEntry=l.mapEntry),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}return l[".google.api.resource"]!=null&&l.hasOwnProperty(".google.api.resource")&&(oe[".google.api.resource"]=h.google.api.ResourceDescriptor.toObject(l[".google.api.resource"],X)),oe},Le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Le),d.FieldOptions=(Be.prototype.ctype=0,Be.prototype.packed=!1,Be.prototype.jstype=0,Be.prototype.lazy=!1,Be.prototype.deprecated=!1,Be.prototype.weak=!1,Be.prototype.uninterpretedOption=s.emptyArray,Be.prototype[".google.api.fieldBehavior"]=s.emptyArray,Be.prototype[".google.api.resourceReference"]=null,Be.create=function(l){return new Be(l)},Be.encode=function(l,X){if(X=X||o.create(),l.ctype!=null&&Object.hasOwnProperty.call(l,"ctype")&&X.uint32(8).int32(l.ctype),l.packed!=null&&Object.hasOwnProperty.call(l,"packed")&&X.uint32(16).bool(l.packed),l.deprecated!=null&&Object.hasOwnProperty.call(l,"deprecated")&&X.uint32(24).bool(l.deprecated),l.lazy!=null&&Object.hasOwnProperty.call(l,"lazy")&&X.uint32(40).bool(l.lazy),l.jstype!=null&&Object.hasOwnProperty.call(l,"jstype")&&X.uint32(48).int32(l.jstype),l.weak!=null&&Object.hasOwnProperty.call(l,"weak")&&X.uint32(80).bool(l.weak),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();if(l[".google.api.fieldBehavior"]!=null&&l[".google.api.fieldBehavior"].length){for(X.uint32(8418).fork(),oe=0;oe<l[".google.api.fieldBehavior"].length;++oe)X.int32(l[".google.api.fieldBehavior"][oe]);X.ldelim()}return l[".google.api.resourceReference"]!=null&&Object.hasOwnProperty.call(l,".google.api.resourceReference")&&h.google.api.ResourceReference.encode(l[".google.api.resourceReference"],X.uint32(8442).fork()).ldelim(),X},Be.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Be.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.FieldOptions;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.ctype=l.int32();break;case 2:_e.packed=l.bool();break;case 6:_e.jstype=l.int32();break;case 5:_e.lazy=l.bool();break;case 3:_e.deprecated=l.bool();break;case 10:_e.weak=l.bool();break;case 999:_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()));break;case 1052:if(_e[".google.api.fieldBehavior"]&&_e[".google.api.fieldBehavior"].length||(_e[".google.api.fieldBehavior"]=[]),(7&He)==2)for(var nt=l.uint32()+l.pos;l.pos<nt;)_e[".google.api.fieldBehavior"].push(l.int32());else _e[".google.api.fieldBehavior"].push(l.int32());break;case 1055:_e[".google.api.resourceReference"]=h.google.api.ResourceReference.decode(l,l.uint32());break;default:l.skipType(7&He)}}return _e},Be.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Be.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.ctype!=null&&l.hasOwnProperty("ctype"))switch(l.ctype){default:return"ctype: enum value expected";case 0:case 1:case 2:}if(l.packed!=null&&l.hasOwnProperty("packed")&&typeof l.packed!="boolean")return"packed: boolean expected";if(l.jstype!=null&&l.hasOwnProperty("jstype"))switch(l.jstype){default:return"jstype: enum value expected";case 0:case 1:case 2:}if(l.lazy!=null&&l.hasOwnProperty("lazy")&&typeof l.lazy!="boolean")return"lazy: boolean expected";if(l.deprecated!=null&&l.hasOwnProperty("deprecated")&&typeof l.deprecated!="boolean")return"deprecated: boolean expected";if(l.weak!=null&&l.hasOwnProperty("weak")&&typeof l.weak!="boolean")return"weak: boolean expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X)if(oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]))return"uninterpretedOption."+oe}if(l[".google.api.fieldBehavior"]!=null&&l.hasOwnProperty(".google.api.fieldBehavior")){if(!Array.isArray(l[".google.api.fieldBehavior"]))return".google.api.fieldBehavior: array expected";for(X=0;X<l[".google.api.fieldBehavior"].length;++X)switch(l[".google.api.fieldBehavior"][X]){default:return".google.api.fieldBehavior: enum value[] expected";case 0:case 1:case 2:case 3:case 4:case 5:}}var oe;return l[".google.api.resourceReference"]!=null&&l.hasOwnProperty(".google.api.resourceReference")&&(oe=h.google.api.ResourceReference.verify(l[".google.api.resourceReference"]))?".google.api.resourceReference."+oe:null},Be.fromObject=function(l){if(l instanceof h.google.protobuf.FieldOptions)return l;var X=new h.google.protobuf.FieldOptions;switch(l.ctype){case"STRING":case 0:X.ctype=0;break;case"CORD":case 1:X.ctype=1;break;case"STRING_PIECE":case 2:X.ctype=2}switch(l.packed!=null&&(X.packed=!!l.packed),l.jstype){case"JS_NORMAL":case 0:X.jstype=0;break;case"JS_STRING":case 1:X.jstype=1;break;case"JS_NUMBER":case 2:X.jstype=2}if(l.lazy!=null&&(X.lazy=!!l.lazy),l.deprecated!=null&&(X.deprecated=!!l.deprecated),l.weak!=null&&(X.weak=!!l.weak),l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}if(l[".google.api.fieldBehavior"]){if(!Array.isArray(l[".google.api.fieldBehavior"]))throw TypeError(".google.protobuf.FieldOptions..google.api.fieldBehavior: array expected");for(X[".google.api.fieldBehavior"]=[],oe=0;oe<l[".google.api.fieldBehavior"].length;++oe)switch(l[".google.api.fieldBehavior"][oe]){default:case"FIELD_BEHAVIOR_UNSPECIFIED":case 0:X[".google.api.fieldBehavior"][oe]=0;break;case"OPTIONAL":case 1:X[".google.api.fieldBehavior"][oe]=1;break;case"REQUIRED":case 2:X[".google.api.fieldBehavior"][oe]=2;break;case"OUTPUT_ONLY":case 3:X[".google.api.fieldBehavior"][oe]=3;break;case"INPUT_ONLY":case 4:X[".google.api.fieldBehavior"][oe]=4;break;case"IMMUTABLE":case 5:X[".google.api.fieldBehavior"][oe]=5}}if(l[".google.api.resourceReference"]!=null){if(typeof l[".google.api.resourceReference"]!="object")throw TypeError(".google.protobuf.FieldOptions..google.api.resourceReference: object expected");X[".google.api.resourceReference"]=h.google.api.ResourceReference.fromObject(l[".google.api.resourceReference"])}return X},Be.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[],oe[".google.api.fieldBehavior"]=[]),X.defaults&&(oe.ctype=X.enums===String?"STRING":0,oe.packed=!1,oe.deprecated=!1,oe.lazy=!1,oe.jstype=X.enums===String?"JS_NORMAL":0,oe.weak=!1,oe[".google.api.resourceReference"]=null),l.ctype!=null&&l.hasOwnProperty("ctype")&&(oe.ctype=X.enums===String?h.google.protobuf.FieldOptions.CType[l.ctype]:l.ctype),l.packed!=null&&l.hasOwnProperty("packed")&&(oe.packed=l.packed),l.deprecated!=null&&l.hasOwnProperty("deprecated")&&(oe.deprecated=l.deprecated),l.lazy!=null&&l.hasOwnProperty("lazy")&&(oe.lazy=l.lazy),l.jstype!=null&&l.hasOwnProperty("jstype")&&(oe.jstype=X.enums===String?h.google.protobuf.FieldOptions.JSType[l.jstype]:l.jstype),l.weak!=null&&l.hasOwnProperty("weak")&&(oe.weak=l.weak),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}if(l[".google.api.fieldBehavior"]&&l[".google.api.fieldBehavior"].length)for(oe[".google.api.fieldBehavior"]=[],_e=0;_e<l[".google.api.fieldBehavior"].length;++_e)oe[".google.api.fieldBehavior"][_e]=X.enums===String?h.google.api.FieldBehavior[l[".google.api.fieldBehavior"][_e]]:l[".google.api.fieldBehavior"][_e];return l[".google.api.resourceReference"]!=null&&l.hasOwnProperty(".google.api.resourceReference")&&(oe[".google.api.resourceReference"]=h.google.api.ResourceReference.toObject(l[".google.api.resourceReference"],X)),oe},Be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Be.CType=(r={},(u=Object.create(r))[r[0]="STRING"]=0,u[r[1]="CORD"]=1,u[r[2]="STRING_PIECE"]=2,u),Be.JSType=(r={},(u=Object.create(r))[r[0]="JS_NORMAL"]=0,u[r[1]="JS_STRING"]=1,u[r[2]="JS_NUMBER"]=2,u),Be),d.OneofOptions=($e.prototype.uninterpretedOption=s.emptyArray,$e.create=function(l){return new $e(l)},$e.encode=function(l,X){if(X=X||o.create(),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();return X},$e.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},$e.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.OneofOptions;l.pos<oe;){var He=l.uint32();He>>>3==999?(_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()))):l.skipType(7&He)}return _e},$e.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},$e.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X){var oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]);if(oe)return"uninterpretedOption."+oe}}return null},$e.fromObject=function(l){if(l instanceof h.google.protobuf.OneofOptions)return l;var X=new h.google.protobuf.OneofOptions;if(l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}return X},$e.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[]),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}return oe},$e.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},$e),d.EnumOptions=(he.prototype.allowAlias=!1,he.prototype.deprecated=!1,he.prototype.uninterpretedOption=s.emptyArray,he.create=function(l){return new he(l)},he.encode=function(l,X){if(X=X||o.create(),l.allowAlias!=null&&Object.hasOwnProperty.call(l,"allowAlias")&&X.uint32(16).bool(l.allowAlias),l.deprecated!=null&&Object.hasOwnProperty.call(l,"deprecated")&&X.uint32(24).bool(l.deprecated),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();return X},he.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},he.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.EnumOptions;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 2:_e.allowAlias=l.bool();break;case 3:_e.deprecated=l.bool();break;case 999:_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()));break;default:l.skipType(7&He)}}return _e},he.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},he.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.allowAlias!=null&&l.hasOwnProperty("allowAlias")&&typeof l.allowAlias!="boolean")return"allowAlias: boolean expected";if(l.deprecated!=null&&l.hasOwnProperty("deprecated")&&typeof l.deprecated!="boolean")return"deprecated: boolean expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X){var oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]);if(oe)return"uninterpretedOption."+oe}}return null},he.fromObject=function(l){if(l instanceof h.google.protobuf.EnumOptions)return l;var X=new h.google.protobuf.EnumOptions;if(l.allowAlias!=null&&(X.allowAlias=!!l.allowAlias),l.deprecated!=null&&(X.deprecated=!!l.deprecated),l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}return X},he.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[]),X.defaults&&(oe.allowAlias=!1,oe.deprecated=!1),l.allowAlias!=null&&l.hasOwnProperty("allowAlias")&&(oe.allowAlias=l.allowAlias),l.deprecated!=null&&l.hasOwnProperty("deprecated")&&(oe.deprecated=l.deprecated),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}return oe},he.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},he),d.EnumValueOptions=(p.prototype.deprecated=!1,p.prototype.uninterpretedOption=s.emptyArray,p.create=function(l){return new p(l)},p.encode=function(l,X){if(X=X||o.create(),l.deprecated!=null&&Object.hasOwnProperty.call(l,"deprecated")&&X.uint32(8).bool(l.deprecated),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();return X},p.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},p.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.EnumValueOptions;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.deprecated=l.bool();break;case 999:_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()));break;default:l.skipType(7&He)}}return _e},p.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},p.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.deprecated!=null&&l.hasOwnProperty("deprecated")&&typeof l.deprecated!="boolean")return"deprecated: boolean expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X){var oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]);if(oe)return"uninterpretedOption."+oe}}return null},p.fromObject=function(l){if(l instanceof h.google.protobuf.EnumValueOptions)return l;var X=new h.google.protobuf.EnumValueOptions;if(l.deprecated!=null&&(X.deprecated=!!l.deprecated),l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}return X},p.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[]),X.defaults&&(oe.deprecated=!1),l.deprecated!=null&&l.hasOwnProperty("deprecated")&&(oe.deprecated=l.deprecated),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}return oe},p.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},p),d.ServiceOptions=(V.prototype.deprecated=!1,V.prototype.uninterpretedOption=s.emptyArray,V.prototype[".google.api.defaultHost"]="",V.prototype[".google.api.oauthScopes"]="",V.create=function(l){return new V(l)},V.encode=function(l,X){if(X=X||o.create(),l.deprecated!=null&&Object.hasOwnProperty.call(l,"deprecated")&&X.uint32(264).bool(l.deprecated),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();return l[".google.api.defaultHost"]!=null&&Object.hasOwnProperty.call(l,".google.api.defaultHost")&&X.uint32(8394).string(l[".google.api.defaultHost"]),l[".google.api.oauthScopes"]!=null&&Object.hasOwnProperty.call(l,".google.api.oauthScopes")&&X.uint32(8402).string(l[".google.api.oauthScopes"]),X},V.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},V.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.ServiceOptions;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 33:_e.deprecated=l.bool();break;case 999:_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()));break;case 1049:_e[".google.api.defaultHost"]=l.string();break;case 1050:_e[".google.api.oauthScopes"]=l.string();break;default:l.skipType(7&He)}}return _e},V.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},V.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.deprecated!=null&&l.hasOwnProperty("deprecated")&&typeof l.deprecated!="boolean")return"deprecated: boolean expected";if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X){var oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]);if(oe)return"uninterpretedOption."+oe}}return l[".google.api.defaultHost"]!=null&&l.hasOwnProperty(".google.api.defaultHost")&&!s.isString(l[".google.api.defaultHost"])?".google.api.defaultHost: string expected":l[".google.api.oauthScopes"]!=null&&l.hasOwnProperty(".google.api.oauthScopes")&&!s.isString(l[".google.api.oauthScopes"])?".google.api.oauthScopes: string expected":null},V.fromObject=function(l){if(l instanceof h.google.protobuf.ServiceOptions)return l;var X=new h.google.protobuf.ServiceOptions;if(l.deprecated!=null&&(X.deprecated=!!l.deprecated),l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}return l[".google.api.defaultHost"]!=null&&(X[".google.api.defaultHost"]=String(l[".google.api.defaultHost"])),l[".google.api.oauthScopes"]!=null&&(X[".google.api.oauthScopes"]=String(l[".google.api.oauthScopes"])),X},V.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[]),X.defaults&&(oe.deprecated=!1,oe[".google.api.defaultHost"]="",oe[".google.api.oauthScopes"]=""),l.deprecated!=null&&l.hasOwnProperty("deprecated")&&(oe.deprecated=l.deprecated),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}return l[".google.api.defaultHost"]!=null&&l.hasOwnProperty(".google.api.defaultHost")&&(oe[".google.api.defaultHost"]=l[".google.api.defaultHost"]),l[".google.api.oauthScopes"]!=null&&l.hasOwnProperty(".google.api.oauthScopes")&&(oe[".google.api.oauthScopes"]=l[".google.api.oauthScopes"]),oe},V.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},V),d.MethodOptions=(R.prototype.deprecated=!1,R.prototype.idempotencyLevel=0,R.prototype.uninterpretedOption=s.emptyArray,R.prototype[".google.api.http"]=null,R.prototype[".google.api.methodSignature"]=s.emptyArray,R.create=function(l){return new R(l)},R.encode=function(l,X){if(X=X||o.create(),l.deprecated!=null&&Object.hasOwnProperty.call(l,"deprecated")&&X.uint32(264).bool(l.deprecated),l.idempotencyLevel!=null&&Object.hasOwnProperty.call(l,"idempotencyLevel")&&X.uint32(272).int32(l.idempotencyLevel),l.uninterpretedOption!=null&&l.uninterpretedOption.length)for(var oe=0;oe<l.uninterpretedOption.length;++oe)h.google.protobuf.UninterpretedOption.encode(l.uninterpretedOption[oe],X.uint32(7994).fork()).ldelim();if(l[".google.api.methodSignature"]!=null&&l[".google.api.methodSignature"].length)for(oe=0;oe<l[".google.api.methodSignature"].length;++oe)X.uint32(8410).string(l[".google.api.methodSignature"][oe]);return l[".google.api.http"]!=null&&Object.hasOwnProperty.call(l,".google.api.http")&&h.google.api.HttpRule.encode(l[".google.api.http"],X.uint32(578365826).fork()).ldelim(),X},R.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},R.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.MethodOptions;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 33:_e.deprecated=l.bool();break;case 34:_e.idempotencyLevel=l.int32();break;case 999:_e.uninterpretedOption&&_e.uninterpretedOption.length||(_e.uninterpretedOption=[]),_e.uninterpretedOption.push(h.google.protobuf.UninterpretedOption.decode(l,l.uint32()));break;case 72295728:_e[".google.api.http"]=h.google.api.HttpRule.decode(l,l.uint32());break;case 1051:_e[".google.api.methodSignature"]&&_e[".google.api.methodSignature"].length||(_e[".google.api.methodSignature"]=[]),_e[".google.api.methodSignature"].push(l.string());break;default:l.skipType(7&He)}}return _e},R.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},R.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.deprecated!=null&&l.hasOwnProperty("deprecated")&&typeof l.deprecated!="boolean")return"deprecated: boolean expected";if(l.idempotencyLevel!=null&&l.hasOwnProperty("idempotencyLevel"))switch(l.idempotencyLevel){default:return"idempotencyLevel: enum value expected";case 0:case 1:case 2:}if(l.uninterpretedOption!=null&&l.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(l.uninterpretedOption))return"uninterpretedOption: array expected";for(var X=0;X<l.uninterpretedOption.length;++X)if(oe=h.google.protobuf.UninterpretedOption.verify(l.uninterpretedOption[X]))return"uninterpretedOption."+oe}var oe;if(l[".google.api.http"]!=null&&l.hasOwnProperty(".google.api.http")&&(oe=h.google.api.HttpRule.verify(l[".google.api.http"])))return".google.api.http."+oe;if(l[".google.api.methodSignature"]!=null&&l.hasOwnProperty(".google.api.methodSignature")){if(!Array.isArray(l[".google.api.methodSignature"]))return".google.api.methodSignature: array expected";for(X=0;X<l[".google.api.methodSignature"].length;++X)if(!s.isString(l[".google.api.methodSignature"][X]))return".google.api.methodSignature: string[] expected"}return null},R.fromObject=function(l){if(l instanceof h.google.protobuf.MethodOptions)return l;var X=new h.google.protobuf.MethodOptions;switch(l.deprecated!=null&&(X.deprecated=!!l.deprecated),l.idempotencyLevel){case"IDEMPOTENCY_UNKNOWN":case 0:X.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:X.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:X.idempotencyLevel=2}if(l.uninterpretedOption){if(!Array.isArray(l.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");X.uninterpretedOption=[];for(var oe=0;oe<l.uninterpretedOption.length;++oe){if(typeof l.uninterpretedOption[oe]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");X.uninterpretedOption[oe]=h.google.protobuf.UninterpretedOption.fromObject(l.uninterpretedOption[oe])}}if(l[".google.api.http"]!=null){if(typeof l[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");X[".google.api.http"]=h.google.api.HttpRule.fromObject(l[".google.api.http"])}if(l[".google.api.methodSignature"]){if(!Array.isArray(l[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(X[".google.api.methodSignature"]=[],oe=0;oe<l[".google.api.methodSignature"].length;++oe)X[".google.api.methodSignature"][oe]=String(l[".google.api.methodSignature"][oe])}return X},R.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.uninterpretedOption=[],oe[".google.api.methodSignature"]=[]),X.defaults&&(oe.deprecated=!1,oe.idempotencyLevel=X.enums===String?"IDEMPOTENCY_UNKNOWN":0,oe[".google.api.http"]=null),l.deprecated!=null&&l.hasOwnProperty("deprecated")&&(oe.deprecated=l.deprecated),l.idempotencyLevel!=null&&l.hasOwnProperty("idempotencyLevel")&&(oe.idempotencyLevel=X.enums===String?h.google.protobuf.MethodOptions.IdempotencyLevel[l.idempotencyLevel]:l.idempotencyLevel),l.uninterpretedOption&&l.uninterpretedOption.length){oe.uninterpretedOption=[];for(var _e=0;_e<l.uninterpretedOption.length;++_e)oe.uninterpretedOption[_e]=h.google.protobuf.UninterpretedOption.toObject(l.uninterpretedOption[_e],X)}if(l[".google.api.methodSignature"]&&l[".google.api.methodSignature"].length)for(oe[".google.api.methodSignature"]=[],_e=0;_e<l[".google.api.methodSignature"].length;++_e)oe[".google.api.methodSignature"][_e]=l[".google.api.methodSignature"][_e];return l[".google.api.http"]!=null&&l.hasOwnProperty(".google.api.http")&&(oe[".google.api.http"]=h.google.api.HttpRule.toObject(l[".google.api.http"],X)),oe},R.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},R.IdempotencyLevel=(r={},(u=Object.create(r))[r[0]="IDEMPOTENCY_UNKNOWN"]=0,u[r[1]="NO_SIDE_EFFECTS"]=1,u[r[2]="IDEMPOTENT"]=2,u),R),d.UninterpretedOption=(ce.prototype.name=s.emptyArray,ce.prototype.identifierValue="",ce.prototype.positiveIntValue=s.Long?s.Long.fromBits(0,0,!0):0,ce.prototype.negativeIntValue=s.Long?s.Long.fromBits(0,0,!1):0,ce.prototype.doubleValue=0,ce.prototype.stringValue=s.newBuffer([]),ce.prototype.aggregateValue="",ce.create=function(l){return new ce(l)},ce.encode=function(l,X){if(X=X||o.create(),l.name!=null&&l.name.length)for(var oe=0;oe<l.name.length;++oe)h.google.protobuf.UninterpretedOption.NamePart.encode(l.name[oe],X.uint32(18).fork()).ldelim();return l.identifierValue!=null&&Object.hasOwnProperty.call(l,"identifierValue")&&X.uint32(26).string(l.identifierValue),l.positiveIntValue!=null&&Object.hasOwnProperty.call(l,"positiveIntValue")&&X.uint32(32).uint64(l.positiveIntValue),l.negativeIntValue!=null&&Object.hasOwnProperty.call(l,"negativeIntValue")&&X.uint32(40).int64(l.negativeIntValue),l.doubleValue!=null&&Object.hasOwnProperty.call(l,"doubleValue")&&X.uint32(49).double(l.doubleValue),l.stringValue!=null&&Object.hasOwnProperty.call(l,"stringValue")&&X.uint32(58).bytes(l.stringValue),l.aggregateValue!=null&&Object.hasOwnProperty.call(l,"aggregateValue")&&X.uint32(66).string(l.aggregateValue),X},ce.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ce.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.UninterpretedOption;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 2:_e.name&&_e.name.length||(_e.name=[]),_e.name.push(h.google.protobuf.UninterpretedOption.NamePart.decode(l,l.uint32()));break;case 3:_e.identifierValue=l.string();break;case 4:_e.positiveIntValue=l.uint64();break;case 5:_e.negativeIntValue=l.int64();break;case 6:_e.doubleValue=l.double();break;case 7:_e.stringValue=l.bytes();break;case 8:_e.aggregateValue=l.string();break;default:l.skipType(7&He)}}return _e},ce.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ce.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")){if(!Array.isArray(l.name))return"name: array expected";for(var X=0;X<l.name.length;++X){var oe=h.google.protobuf.UninterpretedOption.NamePart.verify(l.name[X]);if(oe)return"name."+oe}}return l.identifierValue!=null&&l.hasOwnProperty("identifierValue")&&!s.isString(l.identifierValue)?"identifierValue: string expected":l.positiveIntValue!=null&&l.hasOwnProperty("positiveIntValue")&&!(s.isInteger(l.positiveIntValue)||l.positiveIntValue&&s.isInteger(l.positiveIntValue.low)&&s.isInteger(l.positiveIntValue.high))?"positiveIntValue: integer|Long expected":l.negativeIntValue!=null&&l.hasOwnProperty("negativeIntValue")&&!(s.isInteger(l.negativeIntValue)||l.negativeIntValue&&s.isInteger(l.negativeIntValue.low)&&s.isInteger(l.negativeIntValue.high))?"negativeIntValue: integer|Long expected":l.doubleValue!=null&&l.hasOwnProperty("doubleValue")&&typeof l.doubleValue!="number"?"doubleValue: number expected":l.stringValue!=null&&l.hasOwnProperty("stringValue")&&!(l.stringValue&&typeof l.stringValue.length=="number"||s.isString(l.stringValue))?"stringValue: buffer expected":l.aggregateValue!=null&&l.hasOwnProperty("aggregateValue")&&!s.isString(l.aggregateValue)?"aggregateValue: string expected":null},ce.fromObject=function(l){if(l instanceof h.google.protobuf.UninterpretedOption)return l;var X=new h.google.protobuf.UninterpretedOption;if(l.name){if(!Array.isArray(l.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");X.name=[];for(var oe=0;oe<l.name.length;++oe){if(typeof l.name[oe]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");X.name[oe]=h.google.protobuf.UninterpretedOption.NamePart.fromObject(l.name[oe])}}return l.identifierValue!=null&&(X.identifierValue=String(l.identifierValue)),l.positiveIntValue!=null&&(s.Long?(X.positiveIntValue=s.Long.fromValue(l.positiveIntValue)).unsigned=!0:typeof l.positiveIntValue=="string"?X.positiveIntValue=parseInt(l.positiveIntValue,10):typeof l.positiveIntValue=="number"?X.positiveIntValue=l.positiveIntValue:typeof l.positiveIntValue=="object"&&(X.positiveIntValue=new s.LongBits(l.positiveIntValue.low>>>0,l.positiveIntValue.high>>>0).toNumber(!0))),l.negativeIntValue!=null&&(s.Long?(X.negativeIntValue=s.Long.fromValue(l.negativeIntValue)).unsigned=!1:typeof l.negativeIntValue=="string"?X.negativeIntValue=parseInt(l.negativeIntValue,10):typeof l.negativeIntValue=="number"?X.negativeIntValue=l.negativeIntValue:typeof l.negativeIntValue=="object"&&(X.negativeIntValue=new s.LongBits(l.negativeIntValue.low>>>0,l.negativeIntValue.high>>>0).toNumber())),l.doubleValue!=null&&(X.doubleValue=Number(l.doubleValue)),l.stringValue!=null&&(typeof l.stringValue=="string"?s.base64.decode(l.stringValue,X.stringValue=s.newBuffer(s.base64.length(l.stringValue)),0):l.stringValue.length&&(X.stringValue=l.stringValue)),l.aggregateValue!=null&&(X.aggregateValue=String(l.aggregateValue)),X},ce.toObject=function(l,X){var oe,_e={};if(((X=X||{}).arrays||X.defaults)&&(_e.name=[]),X.defaults&&(_e.identifierValue="",s.Long?(oe=new s.Long(0,0,!0),_e.positiveIntValue=X.longs===String?oe.toString():X.longs===Number?oe.toNumber():oe):_e.positiveIntValue=X.longs===String?"0":0,s.Long?(oe=new s.Long(0,0,!1),_e.negativeIntValue=X.longs===String?oe.toString():X.longs===Number?oe.toNumber():oe):_e.negativeIntValue=X.longs===String?"0":0,_e.doubleValue=0,X.bytes===String?_e.stringValue="":(_e.stringValue=[],X.bytes!==Array&&(_e.stringValue=s.newBuffer(_e.stringValue))),_e.aggregateValue=""),l.name&&l.name.length){_e.name=[];for(var He=0;He<l.name.length;++He)_e.name[He]=h.google.protobuf.UninterpretedOption.NamePart.toObject(l.name[He],X)}return l.identifierValue!=null&&l.hasOwnProperty("identifierValue")&&(_e.identifierValue=l.identifierValue),l.positiveIntValue!=null&&l.hasOwnProperty("positiveIntValue")&&(typeof l.positiveIntValue=="number"?_e.positiveIntValue=X.longs===String?String(l.positiveIntValue):l.positiveIntValue:_e.positiveIntValue=X.longs===String?s.Long.prototype.toString.call(l.positiveIntValue):X.longs===Number?new s.LongBits(l.positiveIntValue.low>>>0,l.positiveIntValue.high>>>0).toNumber(!0):l.positiveIntValue),l.negativeIntValue!=null&&l.hasOwnProperty("negativeIntValue")&&(typeof l.negativeIntValue=="number"?_e.negativeIntValue=X.longs===String?String(l.negativeIntValue):l.negativeIntValue:_e.negativeIntValue=X.longs===String?s.Long.prototype.toString.call(l.negativeIntValue):X.longs===Number?new s.LongBits(l.negativeIntValue.low>>>0,l.negativeIntValue.high>>>0).toNumber():l.negativeIntValue),l.doubleValue!=null&&l.hasOwnProperty("doubleValue")&&(_e.doubleValue=X.json&&!isFinite(l.doubleValue)?String(l.doubleValue):l.doubleValue),l.stringValue!=null&&l.hasOwnProperty("stringValue")&&(_e.stringValue=X.bytes===String?s.base64.encode(l.stringValue,0,l.stringValue.length):X.bytes===Array?Array.prototype.slice.call(l.stringValue):l.stringValue),l.aggregateValue!=null&&l.hasOwnProperty("aggregateValue")&&(_e.aggregateValue=l.aggregateValue),_e},ce.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ce.NamePart=(Re.prototype.namePart="",Re.prototype.isExtension=!1,Re.create=function(l){return new Re(l)},Re.encode=function(l,X){return(X=X||o.create()).uint32(10).string(l.namePart),X.uint32(16).bool(l.isExtension),X},Re.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},Re.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.UninterpretedOption.NamePart;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.namePart=l.string();break;case 2:_e.isExtension=l.bool();break;default:l.skipType(7&He)}}if(!_e.hasOwnProperty("namePart"))throw s.ProtocolError("missing required 'namePart'",{instance:_e});if(_e.hasOwnProperty("isExtension"))return _e;throw s.ProtocolError("missing required 'isExtension'",{instance:_e})},Re.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},Re.verify=function(l){return typeof l!="object"||l===null?"object expected":s.isString(l.namePart)?typeof l.isExtension!="boolean"?"isExtension: boolean expected":null:"namePart: string expected"},Re.fromObject=function(l){var X;return l instanceof h.google.protobuf.UninterpretedOption.NamePart?l:(X=new h.google.protobuf.UninterpretedOption.NamePart,l.namePart!=null&&(X.namePart=String(l.namePart)),l.isExtension!=null&&(X.isExtension=!!l.isExtension),X)},Re.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.namePart="",oe.isExtension=!1),l.namePart!=null&&l.hasOwnProperty("namePart")&&(oe.namePart=l.namePart),l.isExtension!=null&&l.hasOwnProperty("isExtension")&&(oe.isExtension=l.isExtension),oe},Re.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Re),ce),d.SourceCodeInfo=(ke.prototype.location=s.emptyArray,ke.create=function(l){return new ke(l)},ke.encode=function(l,X){if(X=X||o.create(),l.location!=null&&l.location.length)for(var oe=0;oe<l.location.length;++oe)h.google.protobuf.SourceCodeInfo.Location.encode(l.location[oe],X.uint32(10).fork()).ldelim();return X},ke.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ke.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.SourceCodeInfo;l.pos<oe;){var He=l.uint32();He>>>3==1?(_e.location&&_e.location.length||(_e.location=[]),_e.location.push(h.google.protobuf.SourceCodeInfo.Location.decode(l,l.uint32()))):l.skipType(7&He)}return _e},ke.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ke.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.location!=null&&l.hasOwnProperty("location")){if(!Array.isArray(l.location))return"location: array expected";for(var X=0;X<l.location.length;++X){var oe=h.google.protobuf.SourceCodeInfo.Location.verify(l.location[X]);if(oe)return"location."+oe}}return null},ke.fromObject=function(l){if(l instanceof h.google.protobuf.SourceCodeInfo)return l;var X=new h.google.protobuf.SourceCodeInfo;if(l.location){if(!Array.isArray(l.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");X.location=[];for(var oe=0;oe<l.location.length;++oe){if(typeof l.location[oe]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");X.location[oe]=h.google.protobuf.SourceCodeInfo.Location.fromObject(l.location[oe])}}return X},ke.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.location=[]),l.location&&l.location.length){oe.location=[];for(var _e=0;_e<l.location.length;++_e)oe.location[_e]=h.google.protobuf.SourceCodeInfo.Location.toObject(l.location[_e],X)}return oe},ke.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ke.Location=(qe.prototype.path=s.emptyArray,qe.prototype.span=s.emptyArray,qe.prototype.leadingComments="",qe.prototype.trailingComments="",qe.prototype.leadingDetachedComments=s.emptyArray,qe.create=function(l){return new qe(l)},qe.encode=function(l,X){if(X=X||o.create(),l.path!=null&&l.path.length){X.uint32(10).fork();for(var oe=0;oe<l.path.length;++oe)X.int32(l.path[oe]);X.ldelim()}if(l.span!=null&&l.span.length){for(X.uint32(18).fork(),oe=0;oe<l.span.length;++oe)X.int32(l.span[oe]);X.ldelim()}if(l.leadingComments!=null&&Object.hasOwnProperty.call(l,"leadingComments")&&X.uint32(26).string(l.leadingComments),l.trailingComments!=null&&Object.hasOwnProperty.call(l,"trailingComments")&&X.uint32(34).string(l.trailingComments),l.leadingDetachedComments!=null&&l.leadingDetachedComments.length)for(oe=0;oe<l.leadingDetachedComments.length;++oe)X.uint32(50).string(l.leadingDetachedComments[oe]);return X},qe.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},qe.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.SourceCodeInfo.Location;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:if(_e.path&&_e.path.length||(_e.path=[]),(7&He)==2)for(var nt=l.uint32()+l.pos;l.pos<nt;)_e.path.push(l.int32());else _e.path.push(l.int32());break;case 2:if(_e.span&&_e.span.length||(_e.span=[]),(7&He)==2)for(nt=l.uint32()+l.pos;l.pos<nt;)_e.span.push(l.int32());else _e.span.push(l.int32());break;case 3:_e.leadingComments=l.string();break;case 4:_e.trailingComments=l.string();break;case 6:_e.leadingDetachedComments&&_e.leadingDetachedComments.length||(_e.leadingDetachedComments=[]),_e.leadingDetachedComments.push(l.string());break;default:l.skipType(7&He)}}return _e},qe.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},qe.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.path!=null&&l.hasOwnProperty("path")){if(!Array.isArray(l.path))return"path: array expected";for(var X=0;X<l.path.length;++X)if(!s.isInteger(l.path[X]))return"path: integer[] expected"}if(l.span!=null&&l.hasOwnProperty("span")){if(!Array.isArray(l.span))return"span: array expected";for(X=0;X<l.span.length;++X)if(!s.isInteger(l.span[X]))return"span: integer[] expected"}if(l.leadingComments!=null&&l.hasOwnProperty("leadingComments")&&!s.isString(l.leadingComments))return"leadingComments: string expected";if(l.trailingComments!=null&&l.hasOwnProperty("trailingComments")&&!s.isString(l.trailingComments))return"trailingComments: string expected";if(l.leadingDetachedComments!=null&&l.hasOwnProperty("leadingDetachedComments")){if(!Array.isArray(l.leadingDetachedComments))return"leadingDetachedComments: array expected";for(X=0;X<l.leadingDetachedComments.length;++X)if(!s.isString(l.leadingDetachedComments[X]))return"leadingDetachedComments: string[] expected"}return null},qe.fromObject=function(l){if(l instanceof h.google.protobuf.SourceCodeInfo.Location)return l;var X=new h.google.protobuf.SourceCodeInfo.Location;if(l.path){if(!Array.isArray(l.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");X.path=[];for(var oe=0;oe<l.path.length;++oe)X.path[oe]=0|l.path[oe]}if(l.span){if(!Array.isArray(l.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(X.span=[],oe=0;oe<l.span.length;++oe)X.span[oe]=0|l.span[oe]}if(l.leadingComments!=null&&(X.leadingComments=String(l.leadingComments)),l.trailingComments!=null&&(X.trailingComments=String(l.trailingComments)),l.leadingDetachedComments){if(!Array.isArray(l.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(X.leadingDetachedComments=[],oe=0;oe<l.leadingDetachedComments.length;++oe)X.leadingDetachedComments[oe]=String(l.leadingDetachedComments[oe])}return X},qe.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.path=[],oe.span=[],oe.leadingDetachedComments=[]),X.defaults&&(oe.leadingComments="",oe.trailingComments=""),l.path&&l.path.length){oe.path=[];for(var _e=0;_e<l.path.length;++_e)oe.path[_e]=l.path[_e]}if(l.span&&l.span.length)for(oe.span=[],_e=0;_e<l.span.length;++_e)oe.span[_e]=l.span[_e];if(l.leadingComments!=null&&l.hasOwnProperty("leadingComments")&&(oe.leadingComments=l.leadingComments),l.trailingComments!=null&&l.hasOwnProperty("trailingComments")&&(oe.trailingComments=l.trailingComments),l.leadingDetachedComments&&l.leadingDetachedComments.length)for(oe.leadingDetachedComments=[],_e=0;_e<l.leadingDetachedComments.length;++_e)oe.leadingDetachedComments[_e]=l.leadingDetachedComments[_e];return oe},qe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},qe),ke),d.GeneratedCodeInfo=(g.prototype.annotation=s.emptyArray,g.create=function(l){return new g(l)},g.encode=function(l,X){if(X=X||o.create(),l.annotation!=null&&l.annotation.length)for(var oe=0;oe<l.annotation.length;++oe)h.google.protobuf.GeneratedCodeInfo.Annotation.encode(l.annotation[oe],X.uint32(10).fork()).ldelim();return X},g.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},g.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.GeneratedCodeInfo;l.pos<oe;){var He=l.uint32();He>>>3==1?(_e.annotation&&_e.annotation.length||(_e.annotation=[]),_e.annotation.push(h.google.protobuf.GeneratedCodeInfo.Annotation.decode(l,l.uint32()))):l.skipType(7&He)}return _e},g.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},g.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.annotation!=null&&l.hasOwnProperty("annotation")){if(!Array.isArray(l.annotation))return"annotation: array expected";for(var X=0;X<l.annotation.length;++X){var oe=h.google.protobuf.GeneratedCodeInfo.Annotation.verify(l.annotation[X]);if(oe)return"annotation."+oe}}return null},g.fromObject=function(l){if(l instanceof h.google.protobuf.GeneratedCodeInfo)return l;var X=new h.google.protobuf.GeneratedCodeInfo;if(l.annotation){if(!Array.isArray(l.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");X.annotation=[];for(var oe=0;oe<l.annotation.length;++oe){if(typeof l.annotation[oe]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");X.annotation[oe]=h.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(l.annotation[oe])}}return X},g.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.annotation=[]),l.annotation&&l.annotation.length){oe.annotation=[];for(var _e=0;_e<l.annotation.length;++_e)oe.annotation[_e]=h.google.protobuf.GeneratedCodeInfo.Annotation.toObject(l.annotation[_e],X)}return oe},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g.Annotation=(ee.prototype.path=s.emptyArray,ee.prototype.sourceFile="",ee.prototype.begin=0,ee.prototype.end=0,ee.create=function(l){return new ee(l)},ee.encode=function(l,X){if(X=X||o.create(),l.path!=null&&l.path.length){X.uint32(10).fork();for(var oe=0;oe<l.path.length;++oe)X.int32(l.path[oe]);X.ldelim()}return l.sourceFile!=null&&Object.hasOwnProperty.call(l,"sourceFile")&&X.uint32(18).string(l.sourceFile),l.begin!=null&&Object.hasOwnProperty.call(l,"begin")&&X.uint32(24).int32(l.begin),l.end!=null&&Object.hasOwnProperty.call(l,"end")&&X.uint32(32).int32(l.end),X},ee.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ee.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.protobuf.GeneratedCodeInfo.Annotation;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:if(_e.path&&_e.path.length||(_e.path=[]),(7&He)==2)for(var nt=l.uint32()+l.pos;l.pos<nt;)_e.path.push(l.int32());else _e.path.push(l.int32());break;case 2:_e.sourceFile=l.string();break;case 3:_e.begin=l.int32();break;case 4:_e.end=l.int32();break;default:l.skipType(7&He)}}return _e},ee.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ee.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.path!=null&&l.hasOwnProperty("path")){if(!Array.isArray(l.path))return"path: array expected";for(var X=0;X<l.path.length;++X)if(!s.isInteger(l.path[X]))return"path: integer[] expected"}return l.sourceFile!=null&&l.hasOwnProperty("sourceFile")&&!s.isString(l.sourceFile)?"sourceFile: string expected":l.begin!=null&&l.hasOwnProperty("begin")&&!s.isInteger(l.begin)?"begin: integer expected":l.end!=null&&l.hasOwnProperty("end")&&!s.isInteger(l.end)?"end: integer expected":null},ee.fromObject=function(l){if(l instanceof h.google.protobuf.GeneratedCodeInfo.Annotation)return l;var X=new h.google.protobuf.GeneratedCodeInfo.Annotation;if(l.path){if(!Array.isArray(l.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");X.path=[];for(var oe=0;oe<l.path.length;++oe)X.path[oe]=0|l.path[oe]}return l.sourceFile!=null&&(X.sourceFile=String(l.sourceFile)),l.begin!=null&&(X.begin=0|l.begin),l.end!=null&&(X.end=0|l.end),X},ee.toObject=function(l,X){var oe={};if(((X=X||{}).arrays||X.defaults)&&(oe.path=[]),X.defaults&&(oe.sourceFile="",oe.begin=0,oe.end=0),l.path&&l.path.length){oe.path=[];for(var _e=0;_e<l.path.length;++_e)oe.path[_e]=l.path[_e]}return l.sourceFile!=null&&l.hasOwnProperty("sourceFile")&&(oe.sourceFile=l.sourceFile),l.begin!=null&&l.hasOwnProperty("begin")&&(oe.begin=l.begin),l.end!=null&&l.hasOwnProperty("end")&&(oe.end=l.end),oe},ee.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ee),g),d),c.type=((m={}).Expr=(ae.prototype.expression="",ae.prototype.title="",ae.prototype.description="",ae.prototype.location="",ae.create=function(l){return new ae(l)},ae.encode=function(l,X){return X=X||o.create(),l.expression!=null&&Object.hasOwnProperty.call(l,"expression")&&X.uint32(10).string(l.expression),l.title!=null&&Object.hasOwnProperty.call(l,"title")&&X.uint32(18).string(l.title),l.description!=null&&Object.hasOwnProperty.call(l,"description")&&X.uint32(26).string(l.description),l.location!=null&&Object.hasOwnProperty.call(l,"location")&&X.uint32(34).string(l.location),X},ae.encodeDelimited=function(l,X){return this.encode(l,X).ldelim()},ae.decode=function(l,X){l instanceof a||(l=a.create(l));for(var oe=X===void 0?l.len:l.pos+X,_e=new h.google.type.Expr;l.pos<oe;){var He=l.uint32();switch(He>>>3){case 1:_e.expression=l.string();break;case 2:_e.title=l.string();break;case 3:_e.description=l.string();break;case 4:_e.location=l.string();break;default:l.skipType(7&He)}}return _e},ae.decodeDelimited=function(l){return l instanceof a||(l=new a(l)),this.decode(l,l.uint32())},ae.verify=function(l){return typeof l!="object"||l===null?"object expected":l.expression!=null&&l.hasOwnProperty("expression")&&!s.isString(l.expression)?"expression: string expected":l.title!=null&&l.hasOwnProperty("title")&&!s.isString(l.title)?"title: string expected":l.description!=null&&l.hasOwnProperty("description")&&!s.isString(l.description)?"description: string expected":l.location!=null&&l.hasOwnProperty("location")&&!s.isString(l.location)?"location: string expected":null},ae.fromObject=function(l){var X;return l instanceof h.google.type.Expr?l:(X=new h.google.type.Expr,l.expression!=null&&(X.expression=String(l.expression)),l.title!=null&&(X.title=String(l.title)),l.description!=null&&(X.description=String(l.description)),l.location!=null&&(X.location=String(l.location)),X)},ae.toObject=function(l,X){var oe={};return(X=X||{}).defaults&&(oe.expression="",oe.title="",oe.description="",oe.location=""),l.expression!=null&&l.hasOwnProperty("expression")&&(oe.expression=l.expression),l.title!=null&&l.hasOwnProperty("title")&&(oe.title=l.title),l.description!=null&&l.hasOwnProperty("description")&&(oe.description=l.description),l.location!=null&&l.hasOwnProperty("location")&&(oe.location=l.location),oe},ae.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ae),m),c),h})}(iam_service)),iam_service.exports}var locations={exports:{}},hasRequiredLocations;function requireLocations(){return hasRequiredLocations||(hasRequiredLocations=1,function(t){(e=>{typeof commonjsRequire=="function"&&t&&t.exports&&(t.exports=e(requireMinimal()))})(function(e){var r,u,d,m,c=e.Reader,a=e.Writer,o=e.util,s=e.roots.locations_protos||(e.roots.locations_protos={});function h(p,V,R){e.rpc.Service.call(this,p,V,R)}function v(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function E(p){if(this.locations=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function y(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function A(p){if(this.labels={},p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function w(p){if(this.rules=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function I(p){if(this.additionalBindings=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function _(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function S(p){if(this.file=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function j(p){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function K(p){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function J(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function H(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function U(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function P(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Z(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function ie(p){if(this.value=[],this.reservedRange=[],this.reservedName=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function ue(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function le(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function ne(p){if(this.method=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function ye(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function fe(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Te(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Ae(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Se(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function be(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function we(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Ce(p){if(this.uninterpretedOption=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function je(p){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Fe(p){if(this.name=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Ve(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Ge(p){if(this.location=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Le(p){if(this.path=[],this.span=[],this.leadingDetachedComments=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function Be(p){if(this.annotation=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function $e(p){if(this.path=[],p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}function he(p){if(p)for(var V=Object.keys(p),R=0;R<V.length;++R)p[V[R]]!=null&&(this[V[R]]=p[V[R]])}return s.google=((m={}).cloud=((d={}).location=((r={}).Locations=(((h.prototype=Object.create(e.rpc.Service.prototype)).constructor=h).create=function(p,V,R){return new this(p,V,R)},Object.defineProperty(h.prototype.listLocations=function p(V,R){return this.rpcCall(p,s.google.cloud.location.ListLocationsRequest,s.google.cloud.location.ListLocationsResponse,V,R)},"name",{value:"ListLocations"}),Object.defineProperty(h.prototype.getLocation=function p(V,R){return this.rpcCall(p,s.google.cloud.location.GetLocationRequest,s.google.cloud.location.Location,V,R)},"name",{value:"GetLocation"}),h),r.ListLocationsRequest=(v.prototype.name="",v.prototype.filter="",v.prototype.pageSize=0,v.prototype.pageToken="",v.create=function(p){return new v(p)},v.encode=function(p,V){return V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.filter!=null&&Object.hasOwnProperty.call(p,"filter")&&V.uint32(18).string(p.filter),p.pageSize!=null&&Object.hasOwnProperty.call(p,"pageSize")&&V.uint32(24).int32(p.pageSize),p.pageToken!=null&&Object.hasOwnProperty.call(p,"pageToken")&&V.uint32(34).string(p.pageToken),V},v.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},v.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.cloud.location.ListLocationsRequest;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.filter=p.string();break;case 3:ce.pageSize=p.int32();break;case 4:ce.pageToken=p.string();break;default:p.skipType(7&Re)}}return ce},v.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},v.verify=function(p){return typeof p!="object"||p===null?"object expected":p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name)?"name: string expected":p.filter!=null&&p.hasOwnProperty("filter")&&!o.isString(p.filter)?"filter: string expected":p.pageSize!=null&&p.hasOwnProperty("pageSize")&&!o.isInteger(p.pageSize)?"pageSize: integer expected":p.pageToken!=null&&p.hasOwnProperty("pageToken")&&!o.isString(p.pageToken)?"pageToken: string expected":null},v.fromObject=function(p){var V;return p instanceof s.google.cloud.location.ListLocationsRequest?p:(V=new s.google.cloud.location.ListLocationsRequest,p.name!=null&&(V.name=String(p.name)),p.filter!=null&&(V.filter=String(p.filter)),p.pageSize!=null&&(V.pageSize=0|p.pageSize),p.pageToken!=null&&(V.pageToken=String(p.pageToken)),V)},v.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.name="",R.filter="",R.pageSize=0,R.pageToken=""),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.filter!=null&&p.hasOwnProperty("filter")&&(R.filter=p.filter),p.pageSize!=null&&p.hasOwnProperty("pageSize")&&(R.pageSize=p.pageSize),p.pageToken!=null&&p.hasOwnProperty("pageToken")&&(R.pageToken=p.pageToken),R},v.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},v),r.ListLocationsResponse=(E.prototype.locations=o.emptyArray,E.prototype.nextPageToken="",E.create=function(p){return new E(p)},E.encode=function(p,V){if(V=V||a.create(),p.locations!=null&&p.locations.length)for(var R=0;R<p.locations.length;++R)s.google.cloud.location.Location.encode(p.locations[R],V.uint32(10).fork()).ldelim();return p.nextPageToken!=null&&Object.hasOwnProperty.call(p,"nextPageToken")&&V.uint32(18).string(p.nextPageToken),V},E.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},E.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.cloud.location.ListLocationsResponse;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.locations&&ce.locations.length||(ce.locations=[]),ce.locations.push(s.google.cloud.location.Location.decode(p,p.uint32()));break;case 2:ce.nextPageToken=p.string();break;default:p.skipType(7&Re)}}return ce},E.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},E.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.locations!=null&&p.hasOwnProperty("locations")){if(!Array.isArray(p.locations))return"locations: array expected";for(var V=0;V<p.locations.length;++V){var R=s.google.cloud.location.Location.verify(p.locations[V]);if(R)return"locations."+R}}return p.nextPageToken!=null&&p.hasOwnProperty("nextPageToken")&&!o.isString(p.nextPageToken)?"nextPageToken: string expected":null},E.fromObject=function(p){if(p instanceof s.google.cloud.location.ListLocationsResponse)return p;var V=new s.google.cloud.location.ListLocationsResponse;if(p.locations){if(!Array.isArray(p.locations))throw TypeError(".google.cloud.location.ListLocationsResponse.locations: array expected");V.locations=[];for(var R=0;R<p.locations.length;++R){if(typeof p.locations[R]!="object")throw TypeError(".google.cloud.location.ListLocationsResponse.locations: object expected");V.locations[R]=s.google.cloud.location.Location.fromObject(p.locations[R])}}return p.nextPageToken!=null&&(V.nextPageToken=String(p.nextPageToken)),V},E.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.locations=[]),V.defaults&&(R.nextPageToken=""),p.locations&&p.locations.length){R.locations=[];for(var ce=0;ce<p.locations.length;++ce)R.locations[ce]=s.google.cloud.location.Location.toObject(p.locations[ce],V)}return p.nextPageToken!=null&&p.hasOwnProperty("nextPageToken")&&(R.nextPageToken=p.nextPageToken),R},E.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},E),r.GetLocationRequest=(y.prototype.name="",y.create=function(p){return new y(p)},y.encode=function(p,V){return V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),V},y.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},y.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.cloud.location.GetLocationRequest;p.pos<R;){var Re=p.uint32();Re>>>3==1?ce.name=p.string():p.skipType(7&Re)}return ce},y.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},y.verify=function(p){return typeof p!="object"||p===null?"object expected":p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name)?"name: string expected":null},y.fromObject=function(p){var V;return p instanceof s.google.cloud.location.GetLocationRequest?p:(V=new s.google.cloud.location.GetLocationRequest,p.name!=null&&(V.name=String(p.name)),V)},y.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.name=""),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),R},y.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},y),r.Location=(A.prototype.name="",A.prototype.locationId="",A.prototype.displayName="",A.prototype.labels=o.emptyObject,A.prototype.metadata=null,A.create=function(p){return new A(p)},A.encode=function(p,V){if(V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.labels!=null&&Object.hasOwnProperty.call(p,"labels"))for(var R=Object.keys(p.labels),ce=0;ce<R.length;++ce)V.uint32(18).fork().uint32(10).string(R[ce]).uint32(18).string(p.labels[R[ce]]).ldelim();return p.metadata!=null&&Object.hasOwnProperty.call(p,"metadata")&&s.google.protobuf.Any.encode(p.metadata,V.uint32(26).fork()).ldelim(),p.locationId!=null&&Object.hasOwnProperty.call(p,"locationId")&&V.uint32(34).string(p.locationId),p.displayName!=null&&Object.hasOwnProperty.call(p,"displayName")&&V.uint32(42).string(p.displayName),V},A.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},A.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.cloud.location.Location;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 4:ce.locationId=p.string();break;case 5:ce.displayName=p.string();break;case 2:ce.labels===o.emptyObject&&(ce.labels={});for(var ke=p.uint32()+p.pos,qe="",g="";p.pos<ke;){var ee=p.uint32();switch(ee>>>3){case 1:qe=p.string();break;case 2:g=p.string();break;default:p.skipType(7&ee)}}ce.labels[qe]=g;break;case 3:ce.metadata=s.google.protobuf.Any.decode(p,p.uint32());break;default:p.skipType(7&Re)}}return ce},A.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},A.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name))return"name: string expected";if(p.locationId!=null&&p.hasOwnProperty("locationId")&&!o.isString(p.locationId))return"locationId: string expected";if(p.displayName!=null&&p.hasOwnProperty("displayName")&&!o.isString(p.displayName))return"displayName: string expected";if(p.labels!=null&&p.hasOwnProperty("labels")){if(!o.isObject(p.labels))return"labels: object expected";for(var V=Object.keys(p.labels),R=0;R<V.length;++R)if(!o.isString(p.labels[V[R]]))return"labels: string{k:string} expected"}if(p.metadata!=null&&p.hasOwnProperty("metadata")){var ce=s.google.protobuf.Any.verify(p.metadata);if(ce)return"metadata."+ce}return null},A.fromObject=function(p){if(p instanceof s.google.cloud.location.Location)return p;var V=new s.google.cloud.location.Location;if(p.name!=null&&(V.name=String(p.name)),p.locationId!=null&&(V.locationId=String(p.locationId)),p.displayName!=null&&(V.displayName=String(p.displayName)),p.labels){if(typeof p.labels!="object")throw TypeError(".google.cloud.location.Location.labels: object expected");V.labels={};for(var R=Object.keys(p.labels),ce=0;ce<R.length;++ce)V.labels[R[ce]]=String(p.labels[R[ce]])}if(p.metadata!=null){if(typeof p.metadata!="object")throw TypeError(".google.cloud.location.Location.metadata: object expected");V.metadata=s.google.protobuf.Any.fromObject(p.metadata)}return V},A.toObject=function(p,V){var R,ce={};if(((V=V||{}).objects||V.defaults)&&(ce.labels={}),V.defaults&&(ce.name="",ce.metadata=null,ce.locationId="",ce.displayName=""),p.name!=null&&p.hasOwnProperty("name")&&(ce.name=p.name),p.labels&&(R=Object.keys(p.labels)).length){ce.labels={};for(var Re=0;Re<R.length;++Re)ce.labels[R[Re]]=p.labels[R[Re]]}return p.metadata!=null&&p.hasOwnProperty("metadata")&&(ce.metadata=s.google.protobuf.Any.toObject(p.metadata,V)),p.locationId!=null&&p.hasOwnProperty("locationId")&&(ce.locationId=p.locationId),p.displayName!=null&&p.hasOwnProperty("displayName")&&(ce.displayName=p.displayName),ce},A.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},A),r),d),m.api=((r={}).Http=(w.prototype.rules=o.emptyArray,w.prototype.fullyDecodeReservedExpansion=!1,w.create=function(p){return new w(p)},w.encode=function(p,V){if(V=V||a.create(),p.rules!=null&&p.rules.length)for(var R=0;R<p.rules.length;++R)s.google.api.HttpRule.encode(p.rules[R],V.uint32(10).fork()).ldelim();return p.fullyDecodeReservedExpansion!=null&&Object.hasOwnProperty.call(p,"fullyDecodeReservedExpansion")&&V.uint32(16).bool(p.fullyDecodeReservedExpansion),V},w.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},w.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.api.Http;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.rules&&ce.rules.length||(ce.rules=[]),ce.rules.push(s.google.api.HttpRule.decode(p,p.uint32()));break;case 2:ce.fullyDecodeReservedExpansion=p.bool();break;default:p.skipType(7&Re)}}return ce},w.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},w.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.rules!=null&&p.hasOwnProperty("rules")){if(!Array.isArray(p.rules))return"rules: array expected";for(var V=0;V<p.rules.length;++V){var R=s.google.api.HttpRule.verify(p.rules[V]);if(R)return"rules."+R}}return p.fullyDecodeReservedExpansion!=null&&p.hasOwnProperty("fullyDecodeReservedExpansion")&&typeof p.fullyDecodeReservedExpansion!="boolean"?"fullyDecodeReservedExpansion: boolean expected":null},w.fromObject=function(p){if(p instanceof s.google.api.Http)return p;var V=new s.google.api.Http;if(p.rules){if(!Array.isArray(p.rules))throw TypeError(".google.api.Http.rules: array expected");V.rules=[];for(var R=0;R<p.rules.length;++R){if(typeof p.rules[R]!="object")throw TypeError(".google.api.Http.rules: object expected");V.rules[R]=s.google.api.HttpRule.fromObject(p.rules[R])}}return p.fullyDecodeReservedExpansion!=null&&(V.fullyDecodeReservedExpansion=!!p.fullyDecodeReservedExpansion),V},w.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.rules=[]),V.defaults&&(R.fullyDecodeReservedExpansion=!1),p.rules&&p.rules.length){R.rules=[];for(var ce=0;ce<p.rules.length;++ce)R.rules[ce]=s.google.api.HttpRule.toObject(p.rules[ce],V)}return p.fullyDecodeReservedExpansion!=null&&p.hasOwnProperty("fullyDecodeReservedExpansion")&&(R.fullyDecodeReservedExpansion=p.fullyDecodeReservedExpansion),R},w.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},w),r.HttpRule=(I.prototype.selector="",I.prototype.get=null,I.prototype.put=null,I.prototype.post=null,I.prototype.delete=null,I.prototype.patch=null,I.prototype.custom=null,I.prototype.body="",I.prototype.responseBody="",I.prototype.additionalBindings=o.emptyArray,Object.defineProperty(I.prototype,"pattern",{get:o.oneOfGetter(d=["get","put","post","delete","patch","custom"]),set:o.oneOfSetter(d)}),I.create=function(p){return new I(p)},I.encode=function(p,V){if(V=V||a.create(),p.selector!=null&&Object.hasOwnProperty.call(p,"selector")&&V.uint32(10).string(p.selector),p.get!=null&&Object.hasOwnProperty.call(p,"get")&&V.uint32(18).string(p.get),p.put!=null&&Object.hasOwnProperty.call(p,"put")&&V.uint32(26).string(p.put),p.post!=null&&Object.hasOwnProperty.call(p,"post")&&V.uint32(34).string(p.post),p.delete!=null&&Object.hasOwnProperty.call(p,"delete")&&V.uint32(42).string(p.delete),p.patch!=null&&Object.hasOwnProperty.call(p,"patch")&&V.uint32(50).string(p.patch),p.body!=null&&Object.hasOwnProperty.call(p,"body")&&V.uint32(58).string(p.body),p.custom!=null&&Object.hasOwnProperty.call(p,"custom")&&s.google.api.CustomHttpPattern.encode(p.custom,V.uint32(66).fork()).ldelim(),p.additionalBindings!=null&&p.additionalBindings.length)for(var R=0;R<p.additionalBindings.length;++R)s.google.api.HttpRule.encode(p.additionalBindings[R],V.uint32(90).fork()).ldelim();return p.responseBody!=null&&Object.hasOwnProperty.call(p,"responseBody")&&V.uint32(98).string(p.responseBody),V},I.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},I.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.api.HttpRule;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.selector=p.string();break;case 2:ce.get=p.string();break;case 3:ce.put=p.string();break;case 4:ce.post=p.string();break;case 5:ce.delete=p.string();break;case 6:ce.patch=p.string();break;case 8:ce.custom=s.google.api.CustomHttpPattern.decode(p,p.uint32());break;case 7:ce.body=p.string();break;case 12:ce.responseBody=p.string();break;case 11:ce.additionalBindings&&ce.additionalBindings.length||(ce.additionalBindings=[]),ce.additionalBindings.push(s.google.api.HttpRule.decode(p,p.uint32()));break;default:p.skipType(7&Re)}}return ce},I.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},I.verify=function(p){if(typeof p!="object"||p===null)return"object expected";var V={};if(p.selector!=null&&p.hasOwnProperty("selector")&&!o.isString(p.selector))return"selector: string expected";if(p.get!=null&&p.hasOwnProperty("get")&&(V.pattern=1,!o.isString(p.get)))return"get: string expected";if(p.put!=null&&p.hasOwnProperty("put")){if(V.pattern===1)return"pattern: multiple values";if(V.pattern=1,!o.isString(p.put))return"put: string expected"}if(p.post!=null&&p.hasOwnProperty("post")){if(V.pattern===1)return"pattern: multiple values";if(V.pattern=1,!o.isString(p.post))return"post: string expected"}if(p.delete!=null&&p.hasOwnProperty("delete")){if(V.pattern===1)return"pattern: multiple values";if(V.pattern=1,!o.isString(p.delete))return"delete: string expected"}if(p.patch!=null&&p.hasOwnProperty("patch")){if(V.pattern===1)return"pattern: multiple values";if(V.pattern=1,!o.isString(p.patch))return"patch: string expected"}if(p.custom!=null&&p.hasOwnProperty("custom")){if(V.pattern===1)return"pattern: multiple values";if(V.pattern=1,R=s.google.api.CustomHttpPattern.verify(p.custom))return"custom."+R}if(p.body!=null&&p.hasOwnProperty("body")&&!o.isString(p.body))return"body: string expected";if(p.responseBody!=null&&p.hasOwnProperty("responseBody")&&!o.isString(p.responseBody))return"responseBody: string expected";if(p.additionalBindings!=null&&p.hasOwnProperty("additionalBindings")){if(!Array.isArray(p.additionalBindings))return"additionalBindings: array expected";for(var R,ce=0;ce<p.additionalBindings.length;++ce)if(R=s.google.api.HttpRule.verify(p.additionalBindings[ce]))return"additionalBindings."+R}return null},I.fromObject=function(p){if(p instanceof s.google.api.HttpRule)return p;var V=new s.google.api.HttpRule;if(p.selector!=null&&(V.selector=String(p.selector)),p.get!=null&&(V.get=String(p.get)),p.put!=null&&(V.put=String(p.put)),p.post!=null&&(V.post=String(p.post)),p.delete!=null&&(V.delete=String(p.delete)),p.patch!=null&&(V.patch=String(p.patch)),p.custom!=null){if(typeof p.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");V.custom=s.google.api.CustomHttpPattern.fromObject(p.custom)}if(p.body!=null&&(V.body=String(p.body)),p.responseBody!=null&&(V.responseBody=String(p.responseBody)),p.additionalBindings){if(!Array.isArray(p.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");V.additionalBindings=[];for(var R=0;R<p.additionalBindings.length;++R){if(typeof p.additionalBindings[R]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");V.additionalBindings[R]=s.google.api.HttpRule.fromObject(p.additionalBindings[R])}}return V},I.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.additionalBindings=[]),V.defaults&&(R.selector="",R.body="",R.responseBody=""),p.selector!=null&&p.hasOwnProperty("selector")&&(R.selector=p.selector),p.get!=null&&p.hasOwnProperty("get")&&(R.get=p.get,V.oneofs)&&(R.pattern="get"),p.put!=null&&p.hasOwnProperty("put")&&(R.put=p.put,V.oneofs)&&(R.pattern="put"),p.post!=null&&p.hasOwnProperty("post")&&(R.post=p.post,V.oneofs)&&(R.pattern="post"),p.delete!=null&&p.hasOwnProperty("delete")&&(R.delete=p.delete,V.oneofs)&&(R.pattern="delete"),p.patch!=null&&p.hasOwnProperty("patch")&&(R.patch=p.patch,V.oneofs)&&(R.pattern="patch"),p.body!=null&&p.hasOwnProperty("body")&&(R.body=p.body),p.custom!=null&&p.hasOwnProperty("custom")&&(R.custom=s.google.api.CustomHttpPattern.toObject(p.custom,V),V.oneofs)&&(R.pattern="custom"),p.additionalBindings&&p.additionalBindings.length){R.additionalBindings=[];for(var ce=0;ce<p.additionalBindings.length;++ce)R.additionalBindings[ce]=s.google.api.HttpRule.toObject(p.additionalBindings[ce],V)}return p.responseBody!=null&&p.hasOwnProperty("responseBody")&&(R.responseBody=p.responseBody),R},I.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},I),r.CustomHttpPattern=(_.prototype.kind="",_.prototype.path="",_.create=function(p){return new _(p)},_.encode=function(p,V){return V=V||a.create(),p.kind!=null&&Object.hasOwnProperty.call(p,"kind")&&V.uint32(10).string(p.kind),p.path!=null&&Object.hasOwnProperty.call(p,"path")&&V.uint32(18).string(p.path),V},_.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},_.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.api.CustomHttpPattern;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.kind=p.string();break;case 2:ce.path=p.string();break;default:p.skipType(7&Re)}}return ce},_.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},_.verify=function(p){return typeof p!="object"||p===null?"object expected":p.kind!=null&&p.hasOwnProperty("kind")&&!o.isString(p.kind)?"kind: string expected":p.path!=null&&p.hasOwnProperty("path")&&!o.isString(p.path)?"path: string expected":null},_.fromObject=function(p){var V;return p instanceof s.google.api.CustomHttpPattern?p:(V=new s.google.api.CustomHttpPattern,p.kind!=null&&(V.kind=String(p.kind)),p.path!=null&&(V.path=String(p.path)),V)},_.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.kind="",R.path=""),p.kind!=null&&p.hasOwnProperty("kind")&&(R.kind=p.kind),p.path!=null&&p.hasOwnProperty("path")&&(R.path=p.path),R},_.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},_),r),m.protobuf=((d={}).FileDescriptorSet=(S.prototype.file=o.emptyArray,S.create=function(p){return new S(p)},S.encode=function(p,V){if(V=V||a.create(),p.file!=null&&p.file.length)for(var R=0;R<p.file.length;++R)s.google.protobuf.FileDescriptorProto.encode(p.file[R],V.uint32(10).fork()).ldelim();return V},S.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},S.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.FileDescriptorSet;p.pos<R;){var Re=p.uint32();Re>>>3==1?(ce.file&&ce.file.length||(ce.file=[]),ce.file.push(s.google.protobuf.FileDescriptorProto.decode(p,p.uint32()))):p.skipType(7&Re)}return ce},S.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},S.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.file!=null&&p.hasOwnProperty("file")){if(!Array.isArray(p.file))return"file: array expected";for(var V=0;V<p.file.length;++V){var R=s.google.protobuf.FileDescriptorProto.verify(p.file[V]);if(R)return"file."+R}}return null},S.fromObject=function(p){if(p instanceof s.google.protobuf.FileDescriptorSet)return p;var V=new s.google.protobuf.FileDescriptorSet;if(p.file){if(!Array.isArray(p.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");V.file=[];for(var R=0;R<p.file.length;++R){if(typeof p.file[R]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");V.file[R]=s.google.protobuf.FileDescriptorProto.fromObject(p.file[R])}}return V},S.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.file=[]),p.file&&p.file.length){R.file=[];for(var ce=0;ce<p.file.length;++ce)R.file[ce]=s.google.protobuf.FileDescriptorProto.toObject(p.file[ce],V)}return R},S.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},S),d.FileDescriptorProto=(j.prototype.name="",j.prototype.package="",j.prototype.dependency=o.emptyArray,j.prototype.publicDependency=o.emptyArray,j.prototype.weakDependency=o.emptyArray,j.prototype.messageType=o.emptyArray,j.prototype.enumType=o.emptyArray,j.prototype.service=o.emptyArray,j.prototype.extension=o.emptyArray,j.prototype.options=null,j.prototype.sourceCodeInfo=null,j.prototype.syntax="",j.create=function(p){return new j(p)},j.encode=function(p,V){if(V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.package!=null&&Object.hasOwnProperty.call(p,"package")&&V.uint32(18).string(p.package),p.dependency!=null&&p.dependency.length)for(var R=0;R<p.dependency.length;++R)V.uint32(26).string(p.dependency[R]);if(p.messageType!=null&&p.messageType.length)for(R=0;R<p.messageType.length;++R)s.google.protobuf.DescriptorProto.encode(p.messageType[R],V.uint32(34).fork()).ldelim();if(p.enumType!=null&&p.enumType.length)for(R=0;R<p.enumType.length;++R)s.google.protobuf.EnumDescriptorProto.encode(p.enumType[R],V.uint32(42).fork()).ldelim();if(p.service!=null&&p.service.length)for(R=0;R<p.service.length;++R)s.google.protobuf.ServiceDescriptorProto.encode(p.service[R],V.uint32(50).fork()).ldelim();if(p.extension!=null&&p.extension.length)for(R=0;R<p.extension.length;++R)s.google.protobuf.FieldDescriptorProto.encode(p.extension[R],V.uint32(58).fork()).ldelim();if(p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.FileOptions.encode(p.options,V.uint32(66).fork()).ldelim(),p.sourceCodeInfo!=null&&Object.hasOwnProperty.call(p,"sourceCodeInfo")&&s.google.protobuf.SourceCodeInfo.encode(p.sourceCodeInfo,V.uint32(74).fork()).ldelim(),p.publicDependency!=null&&p.publicDependency.length)for(R=0;R<p.publicDependency.length;++R)V.uint32(80).int32(p.publicDependency[R]);if(p.weakDependency!=null&&p.weakDependency.length)for(R=0;R<p.weakDependency.length;++R)V.uint32(88).int32(p.weakDependency[R]);return p.syntax!=null&&Object.hasOwnProperty.call(p,"syntax")&&V.uint32(98).string(p.syntax),V},j.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},j.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.FileDescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.package=p.string();break;case 3:ce.dependency&&ce.dependency.length||(ce.dependency=[]),ce.dependency.push(p.string());break;case 10:if(ce.publicDependency&&ce.publicDependency.length||(ce.publicDependency=[]),(7&Re)==2)for(var ke=p.uint32()+p.pos;p.pos<ke;)ce.publicDependency.push(p.int32());else ce.publicDependency.push(p.int32());break;case 11:if(ce.weakDependency&&ce.weakDependency.length||(ce.weakDependency=[]),(7&Re)==2)for(ke=p.uint32()+p.pos;p.pos<ke;)ce.weakDependency.push(p.int32());else ce.weakDependency.push(p.int32());break;case 4:ce.messageType&&ce.messageType.length||(ce.messageType=[]),ce.messageType.push(s.google.protobuf.DescriptorProto.decode(p,p.uint32()));break;case 5:ce.enumType&&ce.enumType.length||(ce.enumType=[]),ce.enumType.push(s.google.protobuf.EnumDescriptorProto.decode(p,p.uint32()));break;case 6:ce.service&&ce.service.length||(ce.service=[]),ce.service.push(s.google.protobuf.ServiceDescriptorProto.decode(p,p.uint32()));break;case 7:ce.extension&&ce.extension.length||(ce.extension=[]),ce.extension.push(s.google.protobuf.FieldDescriptorProto.decode(p,p.uint32()));break;case 8:ce.options=s.google.protobuf.FileOptions.decode(p,p.uint32());break;case 9:ce.sourceCodeInfo=s.google.protobuf.SourceCodeInfo.decode(p,p.uint32());break;case 12:ce.syntax=p.string();break;default:p.skipType(7&Re)}}return ce},j.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},j.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name))return"name: string expected";if(p.package!=null&&p.hasOwnProperty("package")&&!o.isString(p.package))return"package: string expected";if(p.dependency!=null&&p.hasOwnProperty("dependency")){if(!Array.isArray(p.dependency))return"dependency: array expected";for(var V=0;V<p.dependency.length;++V)if(!o.isString(p.dependency[V]))return"dependency: string[] expected"}if(p.publicDependency!=null&&p.hasOwnProperty("publicDependency")){if(!Array.isArray(p.publicDependency))return"publicDependency: array expected";for(V=0;V<p.publicDependency.length;++V)if(!o.isInteger(p.publicDependency[V]))return"publicDependency: integer[] expected"}if(p.weakDependency!=null&&p.hasOwnProperty("weakDependency")){if(!Array.isArray(p.weakDependency))return"weakDependency: array expected";for(V=0;V<p.weakDependency.length;++V)if(!o.isInteger(p.weakDependency[V]))return"weakDependency: integer[] expected"}if(p.messageType!=null&&p.hasOwnProperty("messageType")){if(!Array.isArray(p.messageType))return"messageType: array expected";for(V=0;V<p.messageType.length;++V)if(R=s.google.protobuf.DescriptorProto.verify(p.messageType[V]))return"messageType."+R}if(p.enumType!=null&&p.hasOwnProperty("enumType")){if(!Array.isArray(p.enumType))return"enumType: array expected";for(V=0;V<p.enumType.length;++V)if(R=s.google.protobuf.EnumDescriptorProto.verify(p.enumType[V]))return"enumType."+R}if(p.service!=null&&p.hasOwnProperty("service")){if(!Array.isArray(p.service))return"service: array expected";for(V=0;V<p.service.length;++V)if(R=s.google.protobuf.ServiceDescriptorProto.verify(p.service[V]))return"service."+R}if(p.extension!=null&&p.hasOwnProperty("extension")){if(!Array.isArray(p.extension))return"extension: array expected";for(V=0;V<p.extension.length;++V)if(R=s.google.protobuf.FieldDescriptorProto.verify(p.extension[V]))return"extension."+R}var R;return p.options!=null&&p.hasOwnProperty("options")&&(R=s.google.protobuf.FileOptions.verify(p.options))?"options."+R:p.sourceCodeInfo!=null&&p.hasOwnProperty("sourceCodeInfo")&&(R=s.google.protobuf.SourceCodeInfo.verify(p.sourceCodeInfo))?"sourceCodeInfo."+R:p.syntax!=null&&p.hasOwnProperty("syntax")&&!o.isString(p.syntax)?"syntax: string expected":null},j.fromObject=function(p){if(p instanceof s.google.protobuf.FileDescriptorProto)return p;var V=new s.google.protobuf.FileDescriptorProto;if(p.name!=null&&(V.name=String(p.name)),p.package!=null&&(V.package=String(p.package)),p.dependency){if(!Array.isArray(p.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");V.dependency=[];for(var R=0;R<p.dependency.length;++R)V.dependency[R]=String(p.dependency[R])}if(p.publicDependency){if(!Array.isArray(p.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(V.publicDependency=[],R=0;R<p.publicDependency.length;++R)V.publicDependency[R]=0|p.publicDependency[R]}if(p.weakDependency){if(!Array.isArray(p.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(V.weakDependency=[],R=0;R<p.weakDependency.length;++R)V.weakDependency[R]=0|p.weakDependency[R]}if(p.messageType){if(!Array.isArray(p.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(V.messageType=[],R=0;R<p.messageType.length;++R){if(typeof p.messageType[R]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");V.messageType[R]=s.google.protobuf.DescriptorProto.fromObject(p.messageType[R])}}if(p.enumType){if(!Array.isArray(p.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(V.enumType=[],R=0;R<p.enumType.length;++R){if(typeof p.enumType[R]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");V.enumType[R]=s.google.protobuf.EnumDescriptorProto.fromObject(p.enumType[R])}}if(p.service){if(!Array.isArray(p.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(V.service=[],R=0;R<p.service.length;++R){if(typeof p.service[R]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");V.service[R]=s.google.protobuf.ServiceDescriptorProto.fromObject(p.service[R])}}if(p.extension){if(!Array.isArray(p.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(V.extension=[],R=0;R<p.extension.length;++R){if(typeof p.extension[R]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");V.extension[R]=s.google.protobuf.FieldDescriptorProto.fromObject(p.extension[R])}}if(p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");V.options=s.google.protobuf.FileOptions.fromObject(p.options)}if(p.sourceCodeInfo!=null){if(typeof p.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");V.sourceCodeInfo=s.google.protobuf.SourceCodeInfo.fromObject(p.sourceCodeInfo)}return p.syntax!=null&&(V.syntax=String(p.syntax)),V},j.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.dependency=[],R.messageType=[],R.enumType=[],R.service=[],R.extension=[],R.publicDependency=[],R.weakDependency=[]),V.defaults&&(R.name="",R.package="",R.options=null,R.sourceCodeInfo=null,R.syntax=""),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.package!=null&&p.hasOwnProperty("package")&&(R.package=p.package),p.dependency&&p.dependency.length){R.dependency=[];for(var ce=0;ce<p.dependency.length;++ce)R.dependency[ce]=p.dependency[ce]}if(p.messageType&&p.messageType.length)for(R.messageType=[],ce=0;ce<p.messageType.length;++ce)R.messageType[ce]=s.google.protobuf.DescriptorProto.toObject(p.messageType[ce],V);if(p.enumType&&p.enumType.length)for(R.enumType=[],ce=0;ce<p.enumType.length;++ce)R.enumType[ce]=s.google.protobuf.EnumDescriptorProto.toObject(p.enumType[ce],V);if(p.service&&p.service.length)for(R.service=[],ce=0;ce<p.service.length;++ce)R.service[ce]=s.google.protobuf.ServiceDescriptorProto.toObject(p.service[ce],V);if(p.extension&&p.extension.length)for(R.extension=[],ce=0;ce<p.extension.length;++ce)R.extension[ce]=s.google.protobuf.FieldDescriptorProto.toObject(p.extension[ce],V);if(p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.FileOptions.toObject(p.options,V)),p.sourceCodeInfo!=null&&p.hasOwnProperty("sourceCodeInfo")&&(R.sourceCodeInfo=s.google.protobuf.SourceCodeInfo.toObject(p.sourceCodeInfo,V)),p.publicDependency&&p.publicDependency.length)for(R.publicDependency=[],ce=0;ce<p.publicDependency.length;++ce)R.publicDependency[ce]=p.publicDependency[ce];if(p.weakDependency&&p.weakDependency.length)for(R.weakDependency=[],ce=0;ce<p.weakDependency.length;++ce)R.weakDependency[ce]=p.weakDependency[ce];return p.syntax!=null&&p.hasOwnProperty("syntax")&&(R.syntax=p.syntax),R},j.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},j),d.DescriptorProto=(K.prototype.name="",K.prototype.field=o.emptyArray,K.prototype.extension=o.emptyArray,K.prototype.nestedType=o.emptyArray,K.prototype.enumType=o.emptyArray,K.prototype.extensionRange=o.emptyArray,K.prototype.oneofDecl=o.emptyArray,K.prototype.options=null,K.prototype.reservedRange=o.emptyArray,K.prototype.reservedName=o.emptyArray,K.create=function(p){return new K(p)},K.encode=function(p,V){if(V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.field!=null&&p.field.length)for(var R=0;R<p.field.length;++R)s.google.protobuf.FieldDescriptorProto.encode(p.field[R],V.uint32(18).fork()).ldelim();if(p.nestedType!=null&&p.nestedType.length)for(R=0;R<p.nestedType.length;++R)s.google.protobuf.DescriptorProto.encode(p.nestedType[R],V.uint32(26).fork()).ldelim();if(p.enumType!=null&&p.enumType.length)for(R=0;R<p.enumType.length;++R)s.google.protobuf.EnumDescriptorProto.encode(p.enumType[R],V.uint32(34).fork()).ldelim();if(p.extensionRange!=null&&p.extensionRange.length)for(R=0;R<p.extensionRange.length;++R)s.google.protobuf.DescriptorProto.ExtensionRange.encode(p.extensionRange[R],V.uint32(42).fork()).ldelim();if(p.extension!=null&&p.extension.length)for(R=0;R<p.extension.length;++R)s.google.protobuf.FieldDescriptorProto.encode(p.extension[R],V.uint32(50).fork()).ldelim();if(p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.MessageOptions.encode(p.options,V.uint32(58).fork()).ldelim(),p.oneofDecl!=null&&p.oneofDecl.length)for(R=0;R<p.oneofDecl.length;++R)s.google.protobuf.OneofDescriptorProto.encode(p.oneofDecl[R],V.uint32(66).fork()).ldelim();if(p.reservedRange!=null&&p.reservedRange.length)for(R=0;R<p.reservedRange.length;++R)s.google.protobuf.DescriptorProto.ReservedRange.encode(p.reservedRange[R],V.uint32(74).fork()).ldelim();if(p.reservedName!=null&&p.reservedName.length)for(R=0;R<p.reservedName.length;++R)V.uint32(82).string(p.reservedName[R]);return V},K.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},K.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.DescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.field&&ce.field.length||(ce.field=[]),ce.field.push(s.google.protobuf.FieldDescriptorProto.decode(p,p.uint32()));break;case 6:ce.extension&&ce.extension.length||(ce.extension=[]),ce.extension.push(s.google.protobuf.FieldDescriptorProto.decode(p,p.uint32()));break;case 3:ce.nestedType&&ce.nestedType.length||(ce.nestedType=[]),ce.nestedType.push(s.google.protobuf.DescriptorProto.decode(p,p.uint32()));break;case 4:ce.enumType&&ce.enumType.length||(ce.enumType=[]),ce.enumType.push(s.google.protobuf.EnumDescriptorProto.decode(p,p.uint32()));break;case 5:ce.extensionRange&&ce.extensionRange.length||(ce.extensionRange=[]),ce.extensionRange.push(s.google.protobuf.DescriptorProto.ExtensionRange.decode(p,p.uint32()));break;case 8:ce.oneofDecl&&ce.oneofDecl.length||(ce.oneofDecl=[]),ce.oneofDecl.push(s.google.protobuf.OneofDescriptorProto.decode(p,p.uint32()));break;case 7:ce.options=s.google.protobuf.MessageOptions.decode(p,p.uint32());break;case 9:ce.reservedRange&&ce.reservedRange.length||(ce.reservedRange=[]),ce.reservedRange.push(s.google.protobuf.DescriptorProto.ReservedRange.decode(p,p.uint32()));break;case 10:ce.reservedName&&ce.reservedName.length||(ce.reservedName=[]),ce.reservedName.push(p.string());break;default:p.skipType(7&Re)}}return ce},K.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},K.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name))return"name: string expected";if(p.field!=null&&p.hasOwnProperty("field")){if(!Array.isArray(p.field))return"field: array expected";for(var V=0;V<p.field.length;++V)if(R=s.google.protobuf.FieldDescriptorProto.verify(p.field[V]))return"field."+R}if(p.extension!=null&&p.hasOwnProperty("extension")){if(!Array.isArray(p.extension))return"extension: array expected";for(V=0;V<p.extension.length;++V)if(R=s.google.protobuf.FieldDescriptorProto.verify(p.extension[V]))return"extension."+R}if(p.nestedType!=null&&p.hasOwnProperty("nestedType")){if(!Array.isArray(p.nestedType))return"nestedType: array expected";for(V=0;V<p.nestedType.length;++V)if(R=s.google.protobuf.DescriptorProto.verify(p.nestedType[V]))return"nestedType."+R}if(p.enumType!=null&&p.hasOwnProperty("enumType")){if(!Array.isArray(p.enumType))return"enumType: array expected";for(V=0;V<p.enumType.length;++V)if(R=s.google.protobuf.EnumDescriptorProto.verify(p.enumType[V]))return"enumType."+R}if(p.extensionRange!=null&&p.hasOwnProperty("extensionRange")){if(!Array.isArray(p.extensionRange))return"extensionRange: array expected";for(V=0;V<p.extensionRange.length;++V)if(R=s.google.protobuf.DescriptorProto.ExtensionRange.verify(p.extensionRange[V]))return"extensionRange."+R}if(p.oneofDecl!=null&&p.hasOwnProperty("oneofDecl")){if(!Array.isArray(p.oneofDecl))return"oneofDecl: array expected";for(V=0;V<p.oneofDecl.length;++V)if(R=s.google.protobuf.OneofDescriptorProto.verify(p.oneofDecl[V]))return"oneofDecl."+R}if(p.options!=null&&p.hasOwnProperty("options")&&(R=s.google.protobuf.MessageOptions.verify(p.options)))return"options."+R;if(p.reservedRange!=null&&p.hasOwnProperty("reservedRange")){if(!Array.isArray(p.reservedRange))return"reservedRange: array expected";for(var R,V=0;V<p.reservedRange.length;++V)if(R=s.google.protobuf.DescriptorProto.ReservedRange.verify(p.reservedRange[V]))return"reservedRange."+R}if(p.reservedName!=null&&p.hasOwnProperty("reservedName")){if(!Array.isArray(p.reservedName))return"reservedName: array expected";for(V=0;V<p.reservedName.length;++V)if(!o.isString(p.reservedName[V]))return"reservedName: string[] expected"}return null},K.fromObject=function(p){if(p instanceof s.google.protobuf.DescriptorProto)return p;var V=new s.google.protobuf.DescriptorProto;if(p.name!=null&&(V.name=String(p.name)),p.field){if(!Array.isArray(p.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");V.field=[];for(var R=0;R<p.field.length;++R){if(typeof p.field[R]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");V.field[R]=s.google.protobuf.FieldDescriptorProto.fromObject(p.field[R])}}if(p.extension){if(!Array.isArray(p.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(V.extension=[],R=0;R<p.extension.length;++R){if(typeof p.extension[R]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");V.extension[R]=s.google.protobuf.FieldDescriptorProto.fromObject(p.extension[R])}}if(p.nestedType){if(!Array.isArray(p.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(V.nestedType=[],R=0;R<p.nestedType.length;++R){if(typeof p.nestedType[R]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");V.nestedType[R]=s.google.protobuf.DescriptorProto.fromObject(p.nestedType[R])}}if(p.enumType){if(!Array.isArray(p.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(V.enumType=[],R=0;R<p.enumType.length;++R){if(typeof p.enumType[R]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");V.enumType[R]=s.google.protobuf.EnumDescriptorProto.fromObject(p.enumType[R])}}if(p.extensionRange){if(!Array.isArray(p.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(V.extensionRange=[],R=0;R<p.extensionRange.length;++R){if(typeof p.extensionRange[R]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");V.extensionRange[R]=s.google.protobuf.DescriptorProto.ExtensionRange.fromObject(p.extensionRange[R])}}if(p.oneofDecl){if(!Array.isArray(p.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(V.oneofDecl=[],R=0;R<p.oneofDecl.length;++R){if(typeof p.oneofDecl[R]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");V.oneofDecl[R]=s.google.protobuf.OneofDescriptorProto.fromObject(p.oneofDecl[R])}}if(p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");V.options=s.google.protobuf.MessageOptions.fromObject(p.options)}if(p.reservedRange){if(!Array.isArray(p.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(V.reservedRange=[],R=0;R<p.reservedRange.length;++R){if(typeof p.reservedRange[R]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");V.reservedRange[R]=s.google.protobuf.DescriptorProto.ReservedRange.fromObject(p.reservedRange[R])}}if(p.reservedName){if(!Array.isArray(p.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(V.reservedName=[],R=0;R<p.reservedName.length;++R)V.reservedName[R]=String(p.reservedName[R])}return V},K.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.field=[],R.nestedType=[],R.enumType=[],R.extensionRange=[],R.extension=[],R.oneofDecl=[],R.reservedRange=[],R.reservedName=[]),V.defaults&&(R.name="",R.options=null),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.field&&p.field.length){R.field=[];for(var ce=0;ce<p.field.length;++ce)R.field[ce]=s.google.protobuf.FieldDescriptorProto.toObject(p.field[ce],V)}if(p.nestedType&&p.nestedType.length)for(R.nestedType=[],ce=0;ce<p.nestedType.length;++ce)R.nestedType[ce]=s.google.protobuf.DescriptorProto.toObject(p.nestedType[ce],V);if(p.enumType&&p.enumType.length)for(R.enumType=[],ce=0;ce<p.enumType.length;++ce)R.enumType[ce]=s.google.protobuf.EnumDescriptorProto.toObject(p.enumType[ce],V);if(p.extensionRange&&p.extensionRange.length)for(R.extensionRange=[],ce=0;ce<p.extensionRange.length;++ce)R.extensionRange[ce]=s.google.protobuf.DescriptorProto.ExtensionRange.toObject(p.extensionRange[ce],V);if(p.extension&&p.extension.length)for(R.extension=[],ce=0;ce<p.extension.length;++ce)R.extension[ce]=s.google.protobuf.FieldDescriptorProto.toObject(p.extension[ce],V);if(p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.MessageOptions.toObject(p.options,V)),p.oneofDecl&&p.oneofDecl.length)for(R.oneofDecl=[],ce=0;ce<p.oneofDecl.length;++ce)R.oneofDecl[ce]=s.google.protobuf.OneofDescriptorProto.toObject(p.oneofDecl[ce],V);if(p.reservedRange&&p.reservedRange.length)for(R.reservedRange=[],ce=0;ce<p.reservedRange.length;++ce)R.reservedRange[ce]=s.google.protobuf.DescriptorProto.ReservedRange.toObject(p.reservedRange[ce],V);if(p.reservedName&&p.reservedName.length)for(R.reservedName=[],ce=0;ce<p.reservedName.length;++ce)R.reservedName[ce]=p.reservedName[ce];return R},K.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},K.ExtensionRange=(J.prototype.start=0,J.prototype.end=0,J.prototype.options=null,J.create=function(p){return new J(p)},J.encode=function(p,V){return V=V||a.create(),p.start!=null&&Object.hasOwnProperty.call(p,"start")&&V.uint32(8).int32(p.start),p.end!=null&&Object.hasOwnProperty.call(p,"end")&&V.uint32(16).int32(p.end),p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.ExtensionRangeOptions.encode(p.options,V.uint32(26).fork()).ldelim(),V},J.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},J.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.DescriptorProto.ExtensionRange;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.start=p.int32();break;case 2:ce.end=p.int32();break;case 3:ce.options=s.google.protobuf.ExtensionRangeOptions.decode(p,p.uint32());break;default:p.skipType(7&Re)}}return ce},J.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},J.verify=function(p){return typeof p!="object"||p===null?"object expected":p.start!=null&&p.hasOwnProperty("start")&&!o.isInteger(p.start)?"start: integer expected":p.end!=null&&p.hasOwnProperty("end")&&!o.isInteger(p.end)?"end: integer expected":p.options!=null&&p.hasOwnProperty("options")&&(p=s.google.protobuf.ExtensionRangeOptions.verify(p.options),p)?"options."+p:null},J.fromObject=function(p){if(p instanceof s.google.protobuf.DescriptorProto.ExtensionRange)return p;var V=new s.google.protobuf.DescriptorProto.ExtensionRange;if(p.start!=null&&(V.start=0|p.start),p.end!=null&&(V.end=0|p.end),p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");V.options=s.google.protobuf.ExtensionRangeOptions.fromObject(p.options)}return V},J.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.start=0,R.end=0,R.options=null),p.start!=null&&p.hasOwnProperty("start")&&(R.start=p.start),p.end!=null&&p.hasOwnProperty("end")&&(R.end=p.end),p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.ExtensionRangeOptions.toObject(p.options,V)),R},J.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},J),K.ReservedRange=(H.prototype.start=0,H.prototype.end=0,H.create=function(p){return new H(p)},H.encode=function(p,V){return V=V||a.create(),p.start!=null&&Object.hasOwnProperty.call(p,"start")&&V.uint32(8).int32(p.start),p.end!=null&&Object.hasOwnProperty.call(p,"end")&&V.uint32(16).int32(p.end),V},H.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},H.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.DescriptorProto.ReservedRange;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.start=p.int32();break;case 2:ce.end=p.int32();break;default:p.skipType(7&Re)}}return ce},H.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},H.verify=function(p){return typeof p!="object"||p===null?"object expected":p.start!=null&&p.hasOwnProperty("start")&&!o.isInteger(p.start)?"start: integer expected":p.end!=null&&p.hasOwnProperty("end")&&!o.isInteger(p.end)?"end: integer expected":null},H.fromObject=function(p){var V;return p instanceof s.google.protobuf.DescriptorProto.ReservedRange?p:(V=new s.google.protobuf.DescriptorProto.ReservedRange,p.start!=null&&(V.start=0|p.start),p.end!=null&&(V.end=0|p.end),V)},H.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.start=0,R.end=0),p.start!=null&&p.hasOwnProperty("start")&&(R.start=p.start),p.end!=null&&p.hasOwnProperty("end")&&(R.end=p.end),R},H.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},H),K),d.ExtensionRangeOptions=(U.prototype.uninterpretedOption=o.emptyArray,U.create=function(p){return new U(p)},U.encode=function(p,V){if(V=V||a.create(),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return V},U.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},U.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.ExtensionRangeOptions;p.pos<R;){var Re=p.uint32();Re>>>3==999?(ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()))):p.skipType(7&Re)}return ce},U.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},U.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return null},U.fromObject=function(p){if(p instanceof s.google.protobuf.ExtensionRangeOptions)return p;var V=new s.google.protobuf.ExtensionRangeOptions;if(p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return V},U.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return R},U.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},U),d.FieldDescriptorProto=(P.prototype.name="",P.prototype.number=0,P.prototype.label=1,P.prototype.type=1,P.prototype.typeName="",P.prototype.extendee="",P.prototype.defaultValue="",P.prototype.oneofIndex=0,P.prototype.jsonName="",P.prototype.options=null,P.prototype.proto3Optional=!1,P.create=function(p){return new P(p)},P.encode=function(p,V){return V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.extendee!=null&&Object.hasOwnProperty.call(p,"extendee")&&V.uint32(18).string(p.extendee),p.number!=null&&Object.hasOwnProperty.call(p,"number")&&V.uint32(24).int32(p.number),p.label!=null&&Object.hasOwnProperty.call(p,"label")&&V.uint32(32).int32(p.label),p.type!=null&&Object.hasOwnProperty.call(p,"type")&&V.uint32(40).int32(p.type),p.typeName!=null&&Object.hasOwnProperty.call(p,"typeName")&&V.uint32(50).string(p.typeName),p.defaultValue!=null&&Object.hasOwnProperty.call(p,"defaultValue")&&V.uint32(58).string(p.defaultValue),p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.FieldOptions.encode(p.options,V.uint32(66).fork()).ldelim(),p.oneofIndex!=null&&Object.hasOwnProperty.call(p,"oneofIndex")&&V.uint32(72).int32(p.oneofIndex),p.jsonName!=null&&Object.hasOwnProperty.call(p,"jsonName")&&V.uint32(82).string(p.jsonName),p.proto3Optional!=null&&Object.hasOwnProperty.call(p,"proto3Optional")&&V.uint32(136).bool(p.proto3Optional),V},P.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},P.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.FieldDescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 3:ce.number=p.int32();break;case 4:ce.label=p.int32();break;case 5:ce.type=p.int32();break;case 6:ce.typeName=p.string();break;case 2:ce.extendee=p.string();break;case 7:ce.defaultValue=p.string();break;case 9:ce.oneofIndex=p.int32();break;case 10:ce.jsonName=p.string();break;case 8:ce.options=s.google.protobuf.FieldOptions.decode(p,p.uint32());break;case 17:ce.proto3Optional=p.bool();break;default:p.skipType(7&Re)}}return ce},P.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},P.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name))return"name: string expected";if(p.number!=null&&p.hasOwnProperty("number")&&!o.isInteger(p.number))return"number: integer expected";if(p.label!=null&&p.hasOwnProperty("label"))switch(p.label){default:return"label: enum value expected";case 1:case 2:case 3:}if(p.type!=null&&p.hasOwnProperty("type"))switch(p.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:}if(p.typeName!=null&&p.hasOwnProperty("typeName")&&!o.isString(p.typeName))return"typeName: string expected";if(p.extendee!=null&&p.hasOwnProperty("extendee")&&!o.isString(p.extendee))return"extendee: string expected";if(p.defaultValue!=null&&p.hasOwnProperty("defaultValue")&&!o.isString(p.defaultValue))return"defaultValue: string expected";if(p.oneofIndex!=null&&p.hasOwnProperty("oneofIndex")&&!o.isInteger(p.oneofIndex))return"oneofIndex: integer expected";if(p.jsonName!=null&&p.hasOwnProperty("jsonName")&&!o.isString(p.jsonName))return"jsonName: string expected";if(p.options!=null&&p.hasOwnProperty("options")){var V=s.google.protobuf.FieldOptions.verify(p.options);if(V)return"options."+V}return p.proto3Optional!=null&&p.hasOwnProperty("proto3Optional")&&typeof p.proto3Optional!="boolean"?"proto3Optional: boolean expected":null},P.fromObject=function(p){if(p instanceof s.google.protobuf.FieldDescriptorProto)return p;var V=new s.google.protobuf.FieldDescriptorProto;switch(p.name!=null&&(V.name=String(p.name)),p.number!=null&&(V.number=0|p.number),p.label){case"LABEL_OPTIONAL":case 1:V.label=1;break;case"LABEL_REQUIRED":case 2:V.label=2;break;case"LABEL_REPEATED":case 3:V.label=3}switch(p.type){case"TYPE_DOUBLE":case 1:V.type=1;break;case"TYPE_FLOAT":case 2:V.type=2;break;case"TYPE_INT64":case 3:V.type=3;break;case"TYPE_UINT64":case 4:V.type=4;break;case"TYPE_INT32":case 5:V.type=5;break;case"TYPE_FIXED64":case 6:V.type=6;break;case"TYPE_FIXED32":case 7:V.type=7;break;case"TYPE_BOOL":case 8:V.type=8;break;case"TYPE_STRING":case 9:V.type=9;break;case"TYPE_GROUP":case 10:V.type=10;break;case"TYPE_MESSAGE":case 11:V.type=11;break;case"TYPE_BYTES":case 12:V.type=12;break;case"TYPE_UINT32":case 13:V.type=13;break;case"TYPE_ENUM":case 14:V.type=14;break;case"TYPE_SFIXED32":case 15:V.type=15;break;case"TYPE_SFIXED64":case 16:V.type=16;break;case"TYPE_SINT32":case 17:V.type=17;break;case"TYPE_SINT64":case 18:V.type=18}if(p.typeName!=null&&(V.typeName=String(p.typeName)),p.extendee!=null&&(V.extendee=String(p.extendee)),p.defaultValue!=null&&(V.defaultValue=String(p.defaultValue)),p.oneofIndex!=null&&(V.oneofIndex=0|p.oneofIndex),p.jsonName!=null&&(V.jsonName=String(p.jsonName)),p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");V.options=s.google.protobuf.FieldOptions.fromObject(p.options)}return p.proto3Optional!=null&&(V.proto3Optional=!!p.proto3Optional),V},P.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.name="",R.extendee="",R.number=0,R.label=V.enums===String?"LABEL_OPTIONAL":1,R.type=V.enums===String?"TYPE_DOUBLE":1,R.typeName="",R.defaultValue="",R.options=null,R.oneofIndex=0,R.jsonName="",R.proto3Optional=!1),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.extendee!=null&&p.hasOwnProperty("extendee")&&(R.extendee=p.extendee),p.number!=null&&p.hasOwnProperty("number")&&(R.number=p.number),p.label!=null&&p.hasOwnProperty("label")&&(R.label=V.enums===String?s.google.protobuf.FieldDescriptorProto.Label[p.label]:p.label),p.type!=null&&p.hasOwnProperty("type")&&(R.type=V.enums===String?s.google.protobuf.FieldDescriptorProto.Type[p.type]:p.type),p.typeName!=null&&p.hasOwnProperty("typeName")&&(R.typeName=p.typeName),p.defaultValue!=null&&p.hasOwnProperty("defaultValue")&&(R.defaultValue=p.defaultValue),p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.FieldOptions.toObject(p.options,V)),p.oneofIndex!=null&&p.hasOwnProperty("oneofIndex")&&(R.oneofIndex=p.oneofIndex),p.jsonName!=null&&p.hasOwnProperty("jsonName")&&(R.jsonName=p.jsonName),p.proto3Optional!=null&&p.hasOwnProperty("proto3Optional")&&(R.proto3Optional=p.proto3Optional),R},P.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},P.Type=(r={},(u=Object.create(r))[r[1]="TYPE_DOUBLE"]=1,u[r[2]="TYPE_FLOAT"]=2,u[r[3]="TYPE_INT64"]=3,u[r[4]="TYPE_UINT64"]=4,u[r[5]="TYPE_INT32"]=5,u[r[6]="TYPE_FIXED64"]=6,u[r[7]="TYPE_FIXED32"]=7,u[r[8]="TYPE_BOOL"]=8,u[r[9]="TYPE_STRING"]=9,u[r[10]="TYPE_GROUP"]=10,u[r[11]="TYPE_MESSAGE"]=11,u[r[12]="TYPE_BYTES"]=12,u[r[13]="TYPE_UINT32"]=13,u[r[14]="TYPE_ENUM"]=14,u[r[15]="TYPE_SFIXED32"]=15,u[r[16]="TYPE_SFIXED64"]=16,u[r[17]="TYPE_SINT32"]=17,u[r[18]="TYPE_SINT64"]=18,u),P.Label=(r={},(u=Object.create(r))[r[1]="LABEL_OPTIONAL"]=1,u[r[2]="LABEL_REQUIRED"]=2,u[r[3]="LABEL_REPEATED"]=3,u),P),d.OneofDescriptorProto=(Z.prototype.name="",Z.prototype.options=null,Z.create=function(p){return new Z(p)},Z.encode=function(p,V){return V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.OneofOptions.encode(p.options,V.uint32(18).fork()).ldelim(),V},Z.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Z.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.OneofDescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.options=s.google.protobuf.OneofOptions.decode(p,p.uint32());break;default:p.skipType(7&Re)}}return ce},Z.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Z.verify=function(p){return typeof p!="object"||p===null?"object expected":p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name)?"name: string expected":p.options!=null&&p.hasOwnProperty("options")&&(p=s.google.protobuf.OneofOptions.verify(p.options),p)?"options."+p:null},Z.fromObject=function(p){if(p instanceof s.google.protobuf.OneofDescriptorProto)return p;var V=new s.google.protobuf.OneofDescriptorProto;if(p.name!=null&&(V.name=String(p.name)),p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");V.options=s.google.protobuf.OneofOptions.fromObject(p.options)}return V},Z.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.name="",R.options=null),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.OneofOptions.toObject(p.options,V)),R},Z.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Z),d.EnumDescriptorProto=(ie.prototype.name="",ie.prototype.value=o.emptyArray,ie.prototype.options=null,ie.prototype.reservedRange=o.emptyArray,ie.prototype.reservedName=o.emptyArray,ie.create=function(p){return new ie(p)},ie.encode=function(p,V){if(V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.value!=null&&p.value.length)for(var R=0;R<p.value.length;++R)s.google.protobuf.EnumValueDescriptorProto.encode(p.value[R],V.uint32(18).fork()).ldelim();if(p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.EnumOptions.encode(p.options,V.uint32(26).fork()).ldelim(),p.reservedRange!=null&&p.reservedRange.length)for(R=0;R<p.reservedRange.length;++R)s.google.protobuf.EnumDescriptorProto.EnumReservedRange.encode(p.reservedRange[R],V.uint32(34).fork()).ldelim();if(p.reservedName!=null&&p.reservedName.length)for(R=0;R<p.reservedName.length;++R)V.uint32(42).string(p.reservedName[R]);return V},ie.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},ie.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.EnumDescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.value&&ce.value.length||(ce.value=[]),ce.value.push(s.google.protobuf.EnumValueDescriptorProto.decode(p,p.uint32()));break;case 3:ce.options=s.google.protobuf.EnumOptions.decode(p,p.uint32());break;case 4:ce.reservedRange&&ce.reservedRange.length||(ce.reservedRange=[]),ce.reservedRange.push(s.google.protobuf.EnumDescriptorProto.EnumReservedRange.decode(p,p.uint32()));break;case 5:ce.reservedName&&ce.reservedName.length||(ce.reservedName=[]),ce.reservedName.push(p.string());break;default:p.skipType(7&Re)}}return ce},ie.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},ie.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name))return"name: string expected";if(p.value!=null&&p.hasOwnProperty("value")){if(!Array.isArray(p.value))return"value: array expected";for(var V=0;V<p.value.length;++V)if(R=s.google.protobuf.EnumValueDescriptorProto.verify(p.value[V]))return"value."+R}if(p.options!=null&&p.hasOwnProperty("options")&&(R=s.google.protobuf.EnumOptions.verify(p.options)))return"options."+R;if(p.reservedRange!=null&&p.hasOwnProperty("reservedRange")){if(!Array.isArray(p.reservedRange))return"reservedRange: array expected";for(var R,V=0;V<p.reservedRange.length;++V)if(R=s.google.protobuf.EnumDescriptorProto.EnumReservedRange.verify(p.reservedRange[V]))return"reservedRange."+R}if(p.reservedName!=null&&p.hasOwnProperty("reservedName")){if(!Array.isArray(p.reservedName))return"reservedName: array expected";for(V=0;V<p.reservedName.length;++V)if(!o.isString(p.reservedName[V]))return"reservedName: string[] expected"}return null},ie.fromObject=function(p){if(p instanceof s.google.protobuf.EnumDescriptorProto)return p;var V=new s.google.protobuf.EnumDescriptorProto;if(p.name!=null&&(V.name=String(p.name)),p.value){if(!Array.isArray(p.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");V.value=[];for(var R=0;R<p.value.length;++R){if(typeof p.value[R]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");V.value[R]=s.google.protobuf.EnumValueDescriptorProto.fromObject(p.value[R])}}if(p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");V.options=s.google.protobuf.EnumOptions.fromObject(p.options)}if(p.reservedRange){if(!Array.isArray(p.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(V.reservedRange=[],R=0;R<p.reservedRange.length;++R){if(typeof p.reservedRange[R]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");V.reservedRange[R]=s.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(p.reservedRange[R])}}if(p.reservedName){if(!Array.isArray(p.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(V.reservedName=[],R=0;R<p.reservedName.length;++R)V.reservedName[R]=String(p.reservedName[R])}return V},ie.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.value=[],R.reservedRange=[],R.reservedName=[]),V.defaults&&(R.name="",R.options=null),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.value&&p.value.length){R.value=[];for(var ce=0;ce<p.value.length;++ce)R.value[ce]=s.google.protobuf.EnumValueDescriptorProto.toObject(p.value[ce],V)}if(p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.EnumOptions.toObject(p.options,V)),p.reservedRange&&p.reservedRange.length)for(R.reservedRange=[],ce=0;ce<p.reservedRange.length;++ce)R.reservedRange[ce]=s.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(p.reservedRange[ce],V);if(p.reservedName&&p.reservedName.length)for(R.reservedName=[],ce=0;ce<p.reservedName.length;++ce)R.reservedName[ce]=p.reservedName[ce];return R},ie.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ie.EnumReservedRange=(ue.prototype.start=0,ue.prototype.end=0,ue.create=function(p){return new ue(p)},ue.encode=function(p,V){return V=V||a.create(),p.start!=null&&Object.hasOwnProperty.call(p,"start")&&V.uint32(8).int32(p.start),p.end!=null&&Object.hasOwnProperty.call(p,"end")&&V.uint32(16).int32(p.end),V},ue.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},ue.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.EnumDescriptorProto.EnumReservedRange;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.start=p.int32();break;case 2:ce.end=p.int32();break;default:p.skipType(7&Re)}}return ce},ue.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},ue.verify=function(p){return typeof p!="object"||p===null?"object expected":p.start!=null&&p.hasOwnProperty("start")&&!o.isInteger(p.start)?"start: integer expected":p.end!=null&&p.hasOwnProperty("end")&&!o.isInteger(p.end)?"end: integer expected":null},ue.fromObject=function(p){var V;return p instanceof s.google.protobuf.EnumDescriptorProto.EnumReservedRange?p:(V=new s.google.protobuf.EnumDescriptorProto.EnumReservedRange,p.start!=null&&(V.start=0|p.start),p.end!=null&&(V.end=0|p.end),V)},ue.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.start=0,R.end=0),p.start!=null&&p.hasOwnProperty("start")&&(R.start=p.start),p.end!=null&&p.hasOwnProperty("end")&&(R.end=p.end),R},ue.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ue),ie),d.EnumValueDescriptorProto=(le.prototype.name="",le.prototype.number=0,le.prototype.options=null,le.create=function(p){return new le(p)},le.encode=function(p,V){return V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.number!=null&&Object.hasOwnProperty.call(p,"number")&&V.uint32(16).int32(p.number),p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.EnumValueOptions.encode(p.options,V.uint32(26).fork()).ldelim(),V},le.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},le.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.EnumValueDescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.number=p.int32();break;case 3:ce.options=s.google.protobuf.EnumValueOptions.decode(p,p.uint32());break;default:p.skipType(7&Re)}}return ce},le.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},le.verify=function(p){return typeof p!="object"||p===null?"object expected":p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name)?"name: string expected":p.number!=null&&p.hasOwnProperty("number")&&!o.isInteger(p.number)?"number: integer expected":p.options!=null&&p.hasOwnProperty("options")&&(p=s.google.protobuf.EnumValueOptions.verify(p.options),p)?"options."+p:null},le.fromObject=function(p){if(p instanceof s.google.protobuf.EnumValueDescriptorProto)return p;var V=new s.google.protobuf.EnumValueDescriptorProto;if(p.name!=null&&(V.name=String(p.name)),p.number!=null&&(V.number=0|p.number),p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");V.options=s.google.protobuf.EnumValueOptions.fromObject(p.options)}return V},le.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.name="",R.number=0,R.options=null),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.number!=null&&p.hasOwnProperty("number")&&(R.number=p.number),p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.EnumValueOptions.toObject(p.options,V)),R},le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},le),d.ServiceDescriptorProto=(ne.prototype.name="",ne.prototype.method=o.emptyArray,ne.prototype.options=null,ne.create=function(p){return new ne(p)},ne.encode=function(p,V){if(V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.method!=null&&p.method.length)for(var R=0;R<p.method.length;++R)s.google.protobuf.MethodDescriptorProto.encode(p.method[R],V.uint32(18).fork()).ldelim();return p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.ServiceOptions.encode(p.options,V.uint32(26).fork()).ldelim(),V},ne.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},ne.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.ServiceDescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.method&&ce.method.length||(ce.method=[]),ce.method.push(s.google.protobuf.MethodDescriptorProto.decode(p,p.uint32()));break;case 3:ce.options=s.google.protobuf.ServiceOptions.decode(p,p.uint32());break;default:p.skipType(7&Re)}}return ce},ne.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},ne.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name))return"name: string expected";if(p.method!=null&&p.hasOwnProperty("method")){if(!Array.isArray(p.method))return"method: array expected";for(var V=0;V<p.method.length;++V)if(R=s.google.protobuf.MethodDescriptorProto.verify(p.method[V]))return"method."+R}var R;return p.options!=null&&p.hasOwnProperty("options")&&(R=s.google.protobuf.ServiceOptions.verify(p.options))?"options."+R:null},ne.fromObject=function(p){if(p instanceof s.google.protobuf.ServiceDescriptorProto)return p;var V=new s.google.protobuf.ServiceDescriptorProto;if(p.name!=null&&(V.name=String(p.name)),p.method){if(!Array.isArray(p.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");V.method=[];for(var R=0;R<p.method.length;++R){if(typeof p.method[R]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");V.method[R]=s.google.protobuf.MethodDescriptorProto.fromObject(p.method[R])}}if(p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");V.options=s.google.protobuf.ServiceOptions.fromObject(p.options)}return V},ne.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.method=[]),V.defaults&&(R.name="",R.options=null),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.method&&p.method.length){R.method=[];for(var ce=0;ce<p.method.length;++ce)R.method[ce]=s.google.protobuf.MethodDescriptorProto.toObject(p.method[ce],V)}return p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.ServiceOptions.toObject(p.options,V)),R},ne.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ne),d.MethodDescriptorProto=(ye.prototype.name="",ye.prototype.inputType="",ye.prototype.outputType="",ye.prototype.options=null,ye.prototype.clientStreaming=!1,ye.prototype.serverStreaming=!1,ye.create=function(p){return new ye(p)},ye.encode=function(p,V){return V=V||a.create(),p.name!=null&&Object.hasOwnProperty.call(p,"name")&&V.uint32(10).string(p.name),p.inputType!=null&&Object.hasOwnProperty.call(p,"inputType")&&V.uint32(18).string(p.inputType),p.outputType!=null&&Object.hasOwnProperty.call(p,"outputType")&&V.uint32(26).string(p.outputType),p.options!=null&&Object.hasOwnProperty.call(p,"options")&&s.google.protobuf.MethodOptions.encode(p.options,V.uint32(34).fork()).ldelim(),p.clientStreaming!=null&&Object.hasOwnProperty.call(p,"clientStreaming")&&V.uint32(40).bool(p.clientStreaming),p.serverStreaming!=null&&Object.hasOwnProperty.call(p,"serverStreaming")&&V.uint32(48).bool(p.serverStreaming),V},ye.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},ye.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.MethodDescriptorProto;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.name=p.string();break;case 2:ce.inputType=p.string();break;case 3:ce.outputType=p.string();break;case 4:ce.options=s.google.protobuf.MethodOptions.decode(p,p.uint32());break;case 5:ce.clientStreaming=p.bool();break;case 6:ce.serverStreaming=p.bool();break;default:p.skipType(7&Re)}}return ce},ye.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},ye.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")&&!o.isString(p.name))return"name: string expected";if(p.inputType!=null&&p.hasOwnProperty("inputType")&&!o.isString(p.inputType))return"inputType: string expected";if(p.outputType!=null&&p.hasOwnProperty("outputType")&&!o.isString(p.outputType))return"outputType: string expected";if(p.options!=null&&p.hasOwnProperty("options")){var V=s.google.protobuf.MethodOptions.verify(p.options);if(V)return"options."+V}return p.clientStreaming!=null&&p.hasOwnProperty("clientStreaming")&&typeof p.clientStreaming!="boolean"?"clientStreaming: boolean expected":p.serverStreaming!=null&&p.hasOwnProperty("serverStreaming")&&typeof p.serverStreaming!="boolean"?"serverStreaming: boolean expected":null},ye.fromObject=function(p){if(p instanceof s.google.protobuf.MethodDescriptorProto)return p;var V=new s.google.protobuf.MethodDescriptorProto;if(p.name!=null&&(V.name=String(p.name)),p.inputType!=null&&(V.inputType=String(p.inputType)),p.outputType!=null&&(V.outputType=String(p.outputType)),p.options!=null){if(typeof p.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");V.options=s.google.protobuf.MethodOptions.fromObject(p.options)}return p.clientStreaming!=null&&(V.clientStreaming=!!p.clientStreaming),p.serverStreaming!=null&&(V.serverStreaming=!!p.serverStreaming),V},ye.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.name="",R.inputType="",R.outputType="",R.options=null,R.clientStreaming=!1,R.serverStreaming=!1),p.name!=null&&p.hasOwnProperty("name")&&(R.name=p.name),p.inputType!=null&&p.hasOwnProperty("inputType")&&(R.inputType=p.inputType),p.outputType!=null&&p.hasOwnProperty("outputType")&&(R.outputType=p.outputType),p.options!=null&&p.hasOwnProperty("options")&&(R.options=s.google.protobuf.MethodOptions.toObject(p.options,V)),p.clientStreaming!=null&&p.hasOwnProperty("clientStreaming")&&(R.clientStreaming=p.clientStreaming),p.serverStreaming!=null&&p.hasOwnProperty("serverStreaming")&&(R.serverStreaming=p.serverStreaming),R},ye.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ye),d.FileOptions=(fe.prototype.javaPackage="",fe.prototype.javaOuterClassname="",fe.prototype.javaMultipleFiles=!1,fe.prototype.javaGenerateEqualsAndHash=!1,fe.prototype.javaStringCheckUtf8=!1,fe.prototype.optimizeFor=1,fe.prototype.goPackage="",fe.prototype.ccGenericServices=!1,fe.prototype.javaGenericServices=!1,fe.prototype.pyGenericServices=!1,fe.prototype.phpGenericServices=!1,fe.prototype.deprecated=!1,fe.prototype.ccEnableArenas=!0,fe.prototype.objcClassPrefix="",fe.prototype.csharpNamespace="",fe.prototype.swiftPrefix="",fe.prototype.phpClassPrefix="",fe.prototype.phpNamespace="",fe.prototype.phpMetadataNamespace="",fe.prototype.rubyPackage="",fe.prototype.uninterpretedOption=o.emptyArray,fe.create=function(p){return new fe(p)},fe.encode=function(p,V){if(V=V||a.create(),p.javaPackage!=null&&Object.hasOwnProperty.call(p,"javaPackage")&&V.uint32(10).string(p.javaPackage),p.javaOuterClassname!=null&&Object.hasOwnProperty.call(p,"javaOuterClassname")&&V.uint32(66).string(p.javaOuterClassname),p.optimizeFor!=null&&Object.hasOwnProperty.call(p,"optimizeFor")&&V.uint32(72).int32(p.optimizeFor),p.javaMultipleFiles!=null&&Object.hasOwnProperty.call(p,"javaMultipleFiles")&&V.uint32(80).bool(p.javaMultipleFiles),p.goPackage!=null&&Object.hasOwnProperty.call(p,"goPackage")&&V.uint32(90).string(p.goPackage),p.ccGenericServices!=null&&Object.hasOwnProperty.call(p,"ccGenericServices")&&V.uint32(128).bool(p.ccGenericServices),p.javaGenericServices!=null&&Object.hasOwnProperty.call(p,"javaGenericServices")&&V.uint32(136).bool(p.javaGenericServices),p.pyGenericServices!=null&&Object.hasOwnProperty.call(p,"pyGenericServices")&&V.uint32(144).bool(p.pyGenericServices),p.javaGenerateEqualsAndHash!=null&&Object.hasOwnProperty.call(p,"javaGenerateEqualsAndHash")&&V.uint32(160).bool(p.javaGenerateEqualsAndHash),p.deprecated!=null&&Object.hasOwnProperty.call(p,"deprecated")&&V.uint32(184).bool(p.deprecated),p.javaStringCheckUtf8!=null&&Object.hasOwnProperty.call(p,"javaStringCheckUtf8")&&V.uint32(216).bool(p.javaStringCheckUtf8),p.ccEnableArenas!=null&&Object.hasOwnProperty.call(p,"ccEnableArenas")&&V.uint32(248).bool(p.ccEnableArenas),p.objcClassPrefix!=null&&Object.hasOwnProperty.call(p,"objcClassPrefix")&&V.uint32(290).string(p.objcClassPrefix),p.csharpNamespace!=null&&Object.hasOwnProperty.call(p,"csharpNamespace")&&V.uint32(298).string(p.csharpNamespace),p.swiftPrefix!=null&&Object.hasOwnProperty.call(p,"swiftPrefix")&&V.uint32(314).string(p.swiftPrefix),p.phpClassPrefix!=null&&Object.hasOwnProperty.call(p,"phpClassPrefix")&&V.uint32(322).string(p.phpClassPrefix),p.phpNamespace!=null&&Object.hasOwnProperty.call(p,"phpNamespace")&&V.uint32(330).string(p.phpNamespace),p.phpGenericServices!=null&&Object.hasOwnProperty.call(p,"phpGenericServices")&&V.uint32(336).bool(p.phpGenericServices),p.phpMetadataNamespace!=null&&Object.hasOwnProperty.call(p,"phpMetadataNamespace")&&V.uint32(354).string(p.phpMetadataNamespace),p.rubyPackage!=null&&Object.hasOwnProperty.call(p,"rubyPackage")&&V.uint32(362).string(p.rubyPackage),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return V},fe.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},fe.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.FileOptions;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.javaPackage=p.string();break;case 8:ce.javaOuterClassname=p.string();break;case 10:ce.javaMultipleFiles=p.bool();break;case 20:ce.javaGenerateEqualsAndHash=p.bool();break;case 27:ce.javaStringCheckUtf8=p.bool();break;case 9:ce.optimizeFor=p.int32();break;case 11:ce.goPackage=p.string();break;case 16:ce.ccGenericServices=p.bool();break;case 17:ce.javaGenericServices=p.bool();break;case 18:ce.pyGenericServices=p.bool();break;case 42:ce.phpGenericServices=p.bool();break;case 23:ce.deprecated=p.bool();break;case 31:ce.ccEnableArenas=p.bool();break;case 36:ce.objcClassPrefix=p.string();break;case 37:ce.csharpNamespace=p.string();break;case 39:ce.swiftPrefix=p.string();break;case 40:ce.phpClassPrefix=p.string();break;case 41:ce.phpNamespace=p.string();break;case 44:ce.phpMetadataNamespace=p.string();break;case 45:ce.rubyPackage=p.string();break;case 999:ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()));break;default:p.skipType(7&Re)}}return ce},fe.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},fe.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.javaPackage!=null&&p.hasOwnProperty("javaPackage")&&!o.isString(p.javaPackage))return"javaPackage: string expected";if(p.javaOuterClassname!=null&&p.hasOwnProperty("javaOuterClassname")&&!o.isString(p.javaOuterClassname))return"javaOuterClassname: string expected";if(p.javaMultipleFiles!=null&&p.hasOwnProperty("javaMultipleFiles")&&typeof p.javaMultipleFiles!="boolean")return"javaMultipleFiles: boolean expected";if(p.javaGenerateEqualsAndHash!=null&&p.hasOwnProperty("javaGenerateEqualsAndHash")&&typeof p.javaGenerateEqualsAndHash!="boolean")return"javaGenerateEqualsAndHash: boolean expected";if(p.javaStringCheckUtf8!=null&&p.hasOwnProperty("javaStringCheckUtf8")&&typeof p.javaStringCheckUtf8!="boolean")return"javaStringCheckUtf8: boolean expected";if(p.optimizeFor!=null&&p.hasOwnProperty("optimizeFor"))switch(p.optimizeFor){default:return"optimizeFor: enum value expected";case 1:case 2:case 3:}if(p.goPackage!=null&&p.hasOwnProperty("goPackage")&&!o.isString(p.goPackage))return"goPackage: string expected";if(p.ccGenericServices!=null&&p.hasOwnProperty("ccGenericServices")&&typeof p.ccGenericServices!="boolean")return"ccGenericServices: boolean expected";if(p.javaGenericServices!=null&&p.hasOwnProperty("javaGenericServices")&&typeof p.javaGenericServices!="boolean")return"javaGenericServices: boolean expected";if(p.pyGenericServices!=null&&p.hasOwnProperty("pyGenericServices")&&typeof p.pyGenericServices!="boolean")return"pyGenericServices: boolean expected";if(p.phpGenericServices!=null&&p.hasOwnProperty("phpGenericServices")&&typeof p.phpGenericServices!="boolean")return"phpGenericServices: boolean expected";if(p.deprecated!=null&&p.hasOwnProperty("deprecated")&&typeof p.deprecated!="boolean")return"deprecated: boolean expected";if(p.ccEnableArenas!=null&&p.hasOwnProperty("ccEnableArenas")&&typeof p.ccEnableArenas!="boolean")return"ccEnableArenas: boolean expected";if(p.objcClassPrefix!=null&&p.hasOwnProperty("objcClassPrefix")&&!o.isString(p.objcClassPrefix))return"objcClassPrefix: string expected";if(p.csharpNamespace!=null&&p.hasOwnProperty("csharpNamespace")&&!o.isString(p.csharpNamespace))return"csharpNamespace: string expected";if(p.swiftPrefix!=null&&p.hasOwnProperty("swiftPrefix")&&!o.isString(p.swiftPrefix))return"swiftPrefix: string expected";if(p.phpClassPrefix!=null&&p.hasOwnProperty("phpClassPrefix")&&!o.isString(p.phpClassPrefix))return"phpClassPrefix: string expected";if(p.phpNamespace!=null&&p.hasOwnProperty("phpNamespace")&&!o.isString(p.phpNamespace))return"phpNamespace: string expected";if(p.phpMetadataNamespace!=null&&p.hasOwnProperty("phpMetadataNamespace")&&!o.isString(p.phpMetadataNamespace))return"phpMetadataNamespace: string expected";if(p.rubyPackage!=null&&p.hasOwnProperty("rubyPackage")&&!o.isString(p.rubyPackage))return"rubyPackage: string expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return null},fe.fromObject=function(p){if(p instanceof s.google.protobuf.FileOptions)return p;var V=new s.google.protobuf.FileOptions;switch(p.javaPackage!=null&&(V.javaPackage=String(p.javaPackage)),p.javaOuterClassname!=null&&(V.javaOuterClassname=String(p.javaOuterClassname)),p.javaMultipleFiles!=null&&(V.javaMultipleFiles=!!p.javaMultipleFiles),p.javaGenerateEqualsAndHash!=null&&(V.javaGenerateEqualsAndHash=!!p.javaGenerateEqualsAndHash),p.javaStringCheckUtf8!=null&&(V.javaStringCheckUtf8=!!p.javaStringCheckUtf8),p.optimizeFor){case"SPEED":case 1:V.optimizeFor=1;break;case"CODE_SIZE":case 2:V.optimizeFor=2;break;case"LITE_RUNTIME":case 3:V.optimizeFor=3}if(p.goPackage!=null&&(V.goPackage=String(p.goPackage)),p.ccGenericServices!=null&&(V.ccGenericServices=!!p.ccGenericServices),p.javaGenericServices!=null&&(V.javaGenericServices=!!p.javaGenericServices),p.pyGenericServices!=null&&(V.pyGenericServices=!!p.pyGenericServices),p.phpGenericServices!=null&&(V.phpGenericServices=!!p.phpGenericServices),p.deprecated!=null&&(V.deprecated=!!p.deprecated),p.ccEnableArenas!=null&&(V.ccEnableArenas=!!p.ccEnableArenas),p.objcClassPrefix!=null&&(V.objcClassPrefix=String(p.objcClassPrefix)),p.csharpNamespace!=null&&(V.csharpNamespace=String(p.csharpNamespace)),p.swiftPrefix!=null&&(V.swiftPrefix=String(p.swiftPrefix)),p.phpClassPrefix!=null&&(V.phpClassPrefix=String(p.phpClassPrefix)),p.phpNamespace!=null&&(V.phpNamespace=String(p.phpNamespace)),p.phpMetadataNamespace!=null&&(V.phpMetadataNamespace=String(p.phpMetadataNamespace)),p.rubyPackage!=null&&(V.rubyPackage=String(p.rubyPackage)),p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return V},fe.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),V.defaults&&(R.javaPackage="",R.javaOuterClassname="",R.optimizeFor=V.enums===String?"SPEED":1,R.javaMultipleFiles=!1,R.goPackage="",R.ccGenericServices=!1,R.javaGenericServices=!1,R.pyGenericServices=!1,R.javaGenerateEqualsAndHash=!1,R.deprecated=!1,R.javaStringCheckUtf8=!1,R.ccEnableArenas=!0,R.objcClassPrefix="",R.csharpNamespace="",R.swiftPrefix="",R.phpClassPrefix="",R.phpNamespace="",R.phpGenericServices=!1,R.phpMetadataNamespace="",R.rubyPackage=""),p.javaPackage!=null&&p.hasOwnProperty("javaPackage")&&(R.javaPackage=p.javaPackage),p.javaOuterClassname!=null&&p.hasOwnProperty("javaOuterClassname")&&(R.javaOuterClassname=p.javaOuterClassname),p.optimizeFor!=null&&p.hasOwnProperty("optimizeFor")&&(R.optimizeFor=V.enums===String?s.google.protobuf.FileOptions.OptimizeMode[p.optimizeFor]:p.optimizeFor),p.javaMultipleFiles!=null&&p.hasOwnProperty("javaMultipleFiles")&&(R.javaMultipleFiles=p.javaMultipleFiles),p.goPackage!=null&&p.hasOwnProperty("goPackage")&&(R.goPackage=p.goPackage),p.ccGenericServices!=null&&p.hasOwnProperty("ccGenericServices")&&(R.ccGenericServices=p.ccGenericServices),p.javaGenericServices!=null&&p.hasOwnProperty("javaGenericServices")&&(R.javaGenericServices=p.javaGenericServices),p.pyGenericServices!=null&&p.hasOwnProperty("pyGenericServices")&&(R.pyGenericServices=p.pyGenericServices),p.javaGenerateEqualsAndHash!=null&&p.hasOwnProperty("javaGenerateEqualsAndHash")&&(R.javaGenerateEqualsAndHash=p.javaGenerateEqualsAndHash),p.deprecated!=null&&p.hasOwnProperty("deprecated")&&(R.deprecated=p.deprecated),p.javaStringCheckUtf8!=null&&p.hasOwnProperty("javaStringCheckUtf8")&&(R.javaStringCheckUtf8=p.javaStringCheckUtf8),p.ccEnableArenas!=null&&p.hasOwnProperty("ccEnableArenas")&&(R.ccEnableArenas=p.ccEnableArenas),p.objcClassPrefix!=null&&p.hasOwnProperty("objcClassPrefix")&&(R.objcClassPrefix=p.objcClassPrefix),p.csharpNamespace!=null&&p.hasOwnProperty("csharpNamespace")&&(R.csharpNamespace=p.csharpNamespace),p.swiftPrefix!=null&&p.hasOwnProperty("swiftPrefix")&&(R.swiftPrefix=p.swiftPrefix),p.phpClassPrefix!=null&&p.hasOwnProperty("phpClassPrefix")&&(R.phpClassPrefix=p.phpClassPrefix),p.phpNamespace!=null&&p.hasOwnProperty("phpNamespace")&&(R.phpNamespace=p.phpNamespace),p.phpGenericServices!=null&&p.hasOwnProperty("phpGenericServices")&&(R.phpGenericServices=p.phpGenericServices),p.phpMetadataNamespace!=null&&p.hasOwnProperty("phpMetadataNamespace")&&(R.phpMetadataNamespace=p.phpMetadataNamespace),p.rubyPackage!=null&&p.hasOwnProperty("rubyPackage")&&(R.rubyPackage=p.rubyPackage),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return R},fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},fe.OptimizeMode=(r={},(u=Object.create(r))[r[1]="SPEED"]=1,u[r[2]="CODE_SIZE"]=2,u[r[3]="LITE_RUNTIME"]=3,u),fe),d.MessageOptions=(Te.prototype.messageSetWireFormat=!1,Te.prototype.noStandardDescriptorAccessor=!1,Te.prototype.deprecated=!1,Te.prototype.mapEntry=!1,Te.prototype.uninterpretedOption=o.emptyArray,Te.create=function(p){return new Te(p)},Te.encode=function(p,V){if(V=V||a.create(),p.messageSetWireFormat!=null&&Object.hasOwnProperty.call(p,"messageSetWireFormat")&&V.uint32(8).bool(p.messageSetWireFormat),p.noStandardDescriptorAccessor!=null&&Object.hasOwnProperty.call(p,"noStandardDescriptorAccessor")&&V.uint32(16).bool(p.noStandardDescriptorAccessor),p.deprecated!=null&&Object.hasOwnProperty.call(p,"deprecated")&&V.uint32(24).bool(p.deprecated),p.mapEntry!=null&&Object.hasOwnProperty.call(p,"mapEntry")&&V.uint32(56).bool(p.mapEntry),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return V},Te.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Te.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.MessageOptions;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.messageSetWireFormat=p.bool();break;case 2:ce.noStandardDescriptorAccessor=p.bool();break;case 3:ce.deprecated=p.bool();break;case 7:ce.mapEntry=p.bool();break;case 999:ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()));break;default:p.skipType(7&Re)}}return ce},Te.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Te.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.messageSetWireFormat!=null&&p.hasOwnProperty("messageSetWireFormat")&&typeof p.messageSetWireFormat!="boolean")return"messageSetWireFormat: boolean expected";if(p.noStandardDescriptorAccessor!=null&&p.hasOwnProperty("noStandardDescriptorAccessor")&&typeof p.noStandardDescriptorAccessor!="boolean")return"noStandardDescriptorAccessor: boolean expected";if(p.deprecated!=null&&p.hasOwnProperty("deprecated")&&typeof p.deprecated!="boolean")return"deprecated: boolean expected";if(p.mapEntry!=null&&p.hasOwnProperty("mapEntry")&&typeof p.mapEntry!="boolean")return"mapEntry: boolean expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return null},Te.fromObject=function(p){if(p instanceof s.google.protobuf.MessageOptions)return p;var V=new s.google.protobuf.MessageOptions;if(p.messageSetWireFormat!=null&&(V.messageSetWireFormat=!!p.messageSetWireFormat),p.noStandardDescriptorAccessor!=null&&(V.noStandardDescriptorAccessor=!!p.noStandardDescriptorAccessor),p.deprecated!=null&&(V.deprecated=!!p.deprecated),p.mapEntry!=null&&(V.mapEntry=!!p.mapEntry),p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return V},Te.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),V.defaults&&(R.messageSetWireFormat=!1,R.noStandardDescriptorAccessor=!1,R.deprecated=!1,R.mapEntry=!1),p.messageSetWireFormat!=null&&p.hasOwnProperty("messageSetWireFormat")&&(R.messageSetWireFormat=p.messageSetWireFormat),p.noStandardDescriptorAccessor!=null&&p.hasOwnProperty("noStandardDescriptorAccessor")&&(R.noStandardDescriptorAccessor=p.noStandardDescriptorAccessor),p.deprecated!=null&&p.hasOwnProperty("deprecated")&&(R.deprecated=p.deprecated),p.mapEntry!=null&&p.hasOwnProperty("mapEntry")&&(R.mapEntry=p.mapEntry),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return R},Te.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Te),d.FieldOptions=(Ae.prototype.ctype=0,Ae.prototype.packed=!1,Ae.prototype.jstype=0,Ae.prototype.lazy=!1,Ae.prototype.deprecated=!1,Ae.prototype.weak=!1,Ae.prototype.uninterpretedOption=o.emptyArray,Ae.create=function(p){return new Ae(p)},Ae.encode=function(p,V){if(V=V||a.create(),p.ctype!=null&&Object.hasOwnProperty.call(p,"ctype")&&V.uint32(8).int32(p.ctype),p.packed!=null&&Object.hasOwnProperty.call(p,"packed")&&V.uint32(16).bool(p.packed),p.deprecated!=null&&Object.hasOwnProperty.call(p,"deprecated")&&V.uint32(24).bool(p.deprecated),p.lazy!=null&&Object.hasOwnProperty.call(p,"lazy")&&V.uint32(40).bool(p.lazy),p.jstype!=null&&Object.hasOwnProperty.call(p,"jstype")&&V.uint32(48).int32(p.jstype),p.weak!=null&&Object.hasOwnProperty.call(p,"weak")&&V.uint32(80).bool(p.weak),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return V},Ae.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Ae.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.FieldOptions;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.ctype=p.int32();break;case 2:ce.packed=p.bool();break;case 6:ce.jstype=p.int32();break;case 5:ce.lazy=p.bool();break;case 3:ce.deprecated=p.bool();break;case 10:ce.weak=p.bool();break;case 999:ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()));break;default:p.skipType(7&Re)}}return ce},Ae.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Ae.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.ctype!=null&&p.hasOwnProperty("ctype"))switch(p.ctype){default:return"ctype: enum value expected";case 0:case 1:case 2:}if(p.packed!=null&&p.hasOwnProperty("packed")&&typeof p.packed!="boolean")return"packed: boolean expected";if(p.jstype!=null&&p.hasOwnProperty("jstype"))switch(p.jstype){default:return"jstype: enum value expected";case 0:case 1:case 2:}if(p.lazy!=null&&p.hasOwnProperty("lazy")&&typeof p.lazy!="boolean")return"lazy: boolean expected";if(p.deprecated!=null&&p.hasOwnProperty("deprecated")&&typeof p.deprecated!="boolean")return"deprecated: boolean expected";if(p.weak!=null&&p.hasOwnProperty("weak")&&typeof p.weak!="boolean")return"weak: boolean expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return null},Ae.fromObject=function(p){if(p instanceof s.google.protobuf.FieldOptions)return p;var V=new s.google.protobuf.FieldOptions;switch(p.ctype){case"STRING":case 0:V.ctype=0;break;case"CORD":case 1:V.ctype=1;break;case"STRING_PIECE":case 2:V.ctype=2}switch(p.packed!=null&&(V.packed=!!p.packed),p.jstype){case"JS_NORMAL":case 0:V.jstype=0;break;case"JS_STRING":case 1:V.jstype=1;break;case"JS_NUMBER":case 2:V.jstype=2}if(p.lazy!=null&&(V.lazy=!!p.lazy),p.deprecated!=null&&(V.deprecated=!!p.deprecated),p.weak!=null&&(V.weak=!!p.weak),p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return V},Ae.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),V.defaults&&(R.ctype=V.enums===String?"STRING":0,R.packed=!1,R.deprecated=!1,R.lazy=!1,R.jstype=V.enums===String?"JS_NORMAL":0,R.weak=!1),p.ctype!=null&&p.hasOwnProperty("ctype")&&(R.ctype=V.enums===String?s.google.protobuf.FieldOptions.CType[p.ctype]:p.ctype),p.packed!=null&&p.hasOwnProperty("packed")&&(R.packed=p.packed),p.deprecated!=null&&p.hasOwnProperty("deprecated")&&(R.deprecated=p.deprecated),p.lazy!=null&&p.hasOwnProperty("lazy")&&(R.lazy=p.lazy),p.jstype!=null&&p.hasOwnProperty("jstype")&&(R.jstype=V.enums===String?s.google.protobuf.FieldOptions.JSType[p.jstype]:p.jstype),p.weak!=null&&p.hasOwnProperty("weak")&&(R.weak=p.weak),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return R},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ae.CType=(r={},(u=Object.create(r))[r[0]="STRING"]=0,u[r[1]="CORD"]=1,u[r[2]="STRING_PIECE"]=2,u),Ae.JSType=(r={},(u=Object.create(r))[r[0]="JS_NORMAL"]=0,u[r[1]="JS_STRING"]=1,u[r[2]="JS_NUMBER"]=2,u),Ae),d.OneofOptions=(Se.prototype.uninterpretedOption=o.emptyArray,Se.create=function(p){return new Se(p)},Se.encode=function(p,V){if(V=V||a.create(),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return V},Se.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Se.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.OneofOptions;p.pos<R;){var Re=p.uint32();Re>>>3==999?(ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()))):p.skipType(7&Re)}return ce},Se.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Se.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return null},Se.fromObject=function(p){if(p instanceof s.google.protobuf.OneofOptions)return p;var V=new s.google.protobuf.OneofOptions;if(p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return V},Se.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return R},Se.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Se),d.EnumOptions=(be.prototype.allowAlias=!1,be.prototype.deprecated=!1,be.prototype.uninterpretedOption=o.emptyArray,be.create=function(p){return new be(p)},be.encode=function(p,V){if(V=V||a.create(),p.allowAlias!=null&&Object.hasOwnProperty.call(p,"allowAlias")&&V.uint32(16).bool(p.allowAlias),p.deprecated!=null&&Object.hasOwnProperty.call(p,"deprecated")&&V.uint32(24).bool(p.deprecated),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return V},be.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},be.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.EnumOptions;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 2:ce.allowAlias=p.bool();break;case 3:ce.deprecated=p.bool();break;case 999:ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()));break;default:p.skipType(7&Re)}}return ce},be.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},be.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.allowAlias!=null&&p.hasOwnProperty("allowAlias")&&typeof p.allowAlias!="boolean")return"allowAlias: boolean expected";if(p.deprecated!=null&&p.hasOwnProperty("deprecated")&&typeof p.deprecated!="boolean")return"deprecated: boolean expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return null},be.fromObject=function(p){if(p instanceof s.google.protobuf.EnumOptions)return p;var V=new s.google.protobuf.EnumOptions;if(p.allowAlias!=null&&(V.allowAlias=!!p.allowAlias),p.deprecated!=null&&(V.deprecated=!!p.deprecated),p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return V},be.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),V.defaults&&(R.allowAlias=!1,R.deprecated=!1),p.allowAlias!=null&&p.hasOwnProperty("allowAlias")&&(R.allowAlias=p.allowAlias),p.deprecated!=null&&p.hasOwnProperty("deprecated")&&(R.deprecated=p.deprecated),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return R},be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},be),d.EnumValueOptions=(we.prototype.deprecated=!1,we.prototype.uninterpretedOption=o.emptyArray,we.create=function(p){return new we(p)},we.encode=function(p,V){if(V=V||a.create(),p.deprecated!=null&&Object.hasOwnProperty.call(p,"deprecated")&&V.uint32(8).bool(p.deprecated),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return V},we.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},we.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.EnumValueOptions;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.deprecated=p.bool();break;case 999:ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()));break;default:p.skipType(7&Re)}}return ce},we.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},we.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.deprecated!=null&&p.hasOwnProperty("deprecated")&&typeof p.deprecated!="boolean")return"deprecated: boolean expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return null},we.fromObject=function(p){if(p instanceof s.google.protobuf.EnumValueOptions)return p;var V=new s.google.protobuf.EnumValueOptions;if(p.deprecated!=null&&(V.deprecated=!!p.deprecated),p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return V},we.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),V.defaults&&(R.deprecated=!1),p.deprecated!=null&&p.hasOwnProperty("deprecated")&&(R.deprecated=p.deprecated),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return R},we.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},we),d.ServiceOptions=(Ce.prototype.deprecated=!1,Ce.prototype.uninterpretedOption=o.emptyArray,Ce.prototype[".google.api.defaultHost"]="",Ce.prototype[".google.api.oauthScopes"]="",Ce.create=function(p){return new Ce(p)},Ce.encode=function(p,V){if(V=V||a.create(),p.deprecated!=null&&Object.hasOwnProperty.call(p,"deprecated")&&V.uint32(264).bool(p.deprecated),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();return p[".google.api.defaultHost"]!=null&&Object.hasOwnProperty.call(p,".google.api.defaultHost")&&V.uint32(8394).string(p[".google.api.defaultHost"]),p[".google.api.oauthScopes"]!=null&&Object.hasOwnProperty.call(p,".google.api.oauthScopes")&&V.uint32(8402).string(p[".google.api.oauthScopes"]),V},Ce.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Ce.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.ServiceOptions;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 33:ce.deprecated=p.bool();break;case 999:ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()));break;case 1049:ce[".google.api.defaultHost"]=p.string();break;case 1050:ce[".google.api.oauthScopes"]=p.string();break;default:p.skipType(7&Re)}}return ce},Ce.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Ce.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.deprecated!=null&&p.hasOwnProperty("deprecated")&&typeof p.deprecated!="boolean")return"deprecated: boolean expected";if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V){var R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]);if(R)return"uninterpretedOption."+R}}return p[".google.api.defaultHost"]!=null&&p.hasOwnProperty(".google.api.defaultHost")&&!o.isString(p[".google.api.defaultHost"])?".google.api.defaultHost: string expected":p[".google.api.oauthScopes"]!=null&&p.hasOwnProperty(".google.api.oauthScopes")&&!o.isString(p[".google.api.oauthScopes"])?".google.api.oauthScopes: string expected":null},Ce.fromObject=function(p){if(p instanceof s.google.protobuf.ServiceOptions)return p;var V=new s.google.protobuf.ServiceOptions;if(p.deprecated!=null&&(V.deprecated=!!p.deprecated),p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}return p[".google.api.defaultHost"]!=null&&(V[".google.api.defaultHost"]=String(p[".google.api.defaultHost"])),p[".google.api.oauthScopes"]!=null&&(V[".google.api.oauthScopes"]=String(p[".google.api.oauthScopes"])),V},Ce.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[]),V.defaults&&(R.deprecated=!1,R[".google.api.defaultHost"]="",R[".google.api.oauthScopes"]=""),p.deprecated!=null&&p.hasOwnProperty("deprecated")&&(R.deprecated=p.deprecated),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}return p[".google.api.defaultHost"]!=null&&p.hasOwnProperty(".google.api.defaultHost")&&(R[".google.api.defaultHost"]=p[".google.api.defaultHost"]),p[".google.api.oauthScopes"]!=null&&p.hasOwnProperty(".google.api.oauthScopes")&&(R[".google.api.oauthScopes"]=p[".google.api.oauthScopes"]),R},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ce),d.MethodOptions=(je.prototype.deprecated=!1,je.prototype.idempotencyLevel=0,je.prototype.uninterpretedOption=o.emptyArray,je.prototype[".google.api.http"]=null,je.prototype[".google.api.methodSignature"]=o.emptyArray,je.create=function(p){return new je(p)},je.encode=function(p,V){if(V=V||a.create(),p.deprecated!=null&&Object.hasOwnProperty.call(p,"deprecated")&&V.uint32(264).bool(p.deprecated),p.idempotencyLevel!=null&&Object.hasOwnProperty.call(p,"idempotencyLevel")&&V.uint32(272).int32(p.idempotencyLevel),p.uninterpretedOption!=null&&p.uninterpretedOption.length)for(var R=0;R<p.uninterpretedOption.length;++R)s.google.protobuf.UninterpretedOption.encode(p.uninterpretedOption[R],V.uint32(7994).fork()).ldelim();if(p[".google.api.methodSignature"]!=null&&p[".google.api.methodSignature"].length)for(R=0;R<p[".google.api.methodSignature"].length;++R)V.uint32(8410).string(p[".google.api.methodSignature"][R]);return p[".google.api.http"]!=null&&Object.hasOwnProperty.call(p,".google.api.http")&&s.google.api.HttpRule.encode(p[".google.api.http"],V.uint32(578365826).fork()).ldelim(),V},je.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},je.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.MethodOptions;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 33:ce.deprecated=p.bool();break;case 34:ce.idempotencyLevel=p.int32();break;case 999:ce.uninterpretedOption&&ce.uninterpretedOption.length||(ce.uninterpretedOption=[]),ce.uninterpretedOption.push(s.google.protobuf.UninterpretedOption.decode(p,p.uint32()));break;case 72295728:ce[".google.api.http"]=s.google.api.HttpRule.decode(p,p.uint32());break;case 1051:ce[".google.api.methodSignature"]&&ce[".google.api.methodSignature"].length||(ce[".google.api.methodSignature"]=[]),ce[".google.api.methodSignature"].push(p.string());break;default:p.skipType(7&Re)}}return ce},je.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},je.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.deprecated!=null&&p.hasOwnProperty("deprecated")&&typeof p.deprecated!="boolean")return"deprecated: boolean expected";if(p.idempotencyLevel!=null&&p.hasOwnProperty("idempotencyLevel"))switch(p.idempotencyLevel){default:return"idempotencyLevel: enum value expected";case 0:case 1:case 2:}if(p.uninterpretedOption!=null&&p.hasOwnProperty("uninterpretedOption")){if(!Array.isArray(p.uninterpretedOption))return"uninterpretedOption: array expected";for(var V=0;V<p.uninterpretedOption.length;++V)if(R=s.google.protobuf.UninterpretedOption.verify(p.uninterpretedOption[V]))return"uninterpretedOption."+R}var R;if(p[".google.api.http"]!=null&&p.hasOwnProperty(".google.api.http")&&(R=s.google.api.HttpRule.verify(p[".google.api.http"])))return".google.api.http."+R;if(p[".google.api.methodSignature"]!=null&&p.hasOwnProperty(".google.api.methodSignature")){if(!Array.isArray(p[".google.api.methodSignature"]))return".google.api.methodSignature: array expected";for(V=0;V<p[".google.api.methodSignature"].length;++V)if(!o.isString(p[".google.api.methodSignature"][V]))return".google.api.methodSignature: string[] expected"}return null},je.fromObject=function(p){if(p instanceof s.google.protobuf.MethodOptions)return p;var V=new s.google.protobuf.MethodOptions;switch(p.deprecated!=null&&(V.deprecated=!!p.deprecated),p.idempotencyLevel){case"IDEMPOTENCY_UNKNOWN":case 0:V.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:V.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:V.idempotencyLevel=2}if(p.uninterpretedOption){if(!Array.isArray(p.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");V.uninterpretedOption=[];for(var R=0;R<p.uninterpretedOption.length;++R){if(typeof p.uninterpretedOption[R]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");V.uninterpretedOption[R]=s.google.protobuf.UninterpretedOption.fromObject(p.uninterpretedOption[R])}}if(p[".google.api.http"]!=null){if(typeof p[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");V[".google.api.http"]=s.google.api.HttpRule.fromObject(p[".google.api.http"])}if(p[".google.api.methodSignature"]){if(!Array.isArray(p[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(V[".google.api.methodSignature"]=[],R=0;R<p[".google.api.methodSignature"].length;++R)V[".google.api.methodSignature"][R]=String(p[".google.api.methodSignature"][R])}return V},je.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.uninterpretedOption=[],R[".google.api.methodSignature"]=[]),V.defaults&&(R.deprecated=!1,R.idempotencyLevel=V.enums===String?"IDEMPOTENCY_UNKNOWN":0,R[".google.api.http"]=null),p.deprecated!=null&&p.hasOwnProperty("deprecated")&&(R.deprecated=p.deprecated),p.idempotencyLevel!=null&&p.hasOwnProperty("idempotencyLevel")&&(R.idempotencyLevel=V.enums===String?s.google.protobuf.MethodOptions.IdempotencyLevel[p.idempotencyLevel]:p.idempotencyLevel),p.uninterpretedOption&&p.uninterpretedOption.length){R.uninterpretedOption=[];for(var ce=0;ce<p.uninterpretedOption.length;++ce)R.uninterpretedOption[ce]=s.google.protobuf.UninterpretedOption.toObject(p.uninterpretedOption[ce],V)}if(p[".google.api.methodSignature"]&&p[".google.api.methodSignature"].length)for(R[".google.api.methodSignature"]=[],ce=0;ce<p[".google.api.methodSignature"].length;++ce)R[".google.api.methodSignature"][ce]=p[".google.api.methodSignature"][ce];return p[".google.api.http"]!=null&&p.hasOwnProperty(".google.api.http")&&(R[".google.api.http"]=s.google.api.HttpRule.toObject(p[".google.api.http"],V)),R},je.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},je.IdempotencyLevel=(r={},(u=Object.create(r))[r[0]="IDEMPOTENCY_UNKNOWN"]=0,u[r[1]="NO_SIDE_EFFECTS"]=1,u[r[2]="IDEMPOTENT"]=2,u),je),d.UninterpretedOption=(Fe.prototype.name=o.emptyArray,Fe.prototype.identifierValue="",Fe.prototype.positiveIntValue=o.Long?o.Long.fromBits(0,0,!0):0,Fe.prototype.negativeIntValue=o.Long?o.Long.fromBits(0,0,!1):0,Fe.prototype.doubleValue=0,Fe.prototype.stringValue=o.newBuffer([]),Fe.prototype.aggregateValue="",Fe.create=function(p){return new Fe(p)},Fe.encode=function(p,V){if(V=V||a.create(),p.name!=null&&p.name.length)for(var R=0;R<p.name.length;++R)s.google.protobuf.UninterpretedOption.NamePart.encode(p.name[R],V.uint32(18).fork()).ldelim();return p.identifierValue!=null&&Object.hasOwnProperty.call(p,"identifierValue")&&V.uint32(26).string(p.identifierValue),p.positiveIntValue!=null&&Object.hasOwnProperty.call(p,"positiveIntValue")&&V.uint32(32).uint64(p.positiveIntValue),p.negativeIntValue!=null&&Object.hasOwnProperty.call(p,"negativeIntValue")&&V.uint32(40).int64(p.negativeIntValue),p.doubleValue!=null&&Object.hasOwnProperty.call(p,"doubleValue")&&V.uint32(49).double(p.doubleValue),p.stringValue!=null&&Object.hasOwnProperty.call(p,"stringValue")&&V.uint32(58).bytes(p.stringValue),p.aggregateValue!=null&&Object.hasOwnProperty.call(p,"aggregateValue")&&V.uint32(66).string(p.aggregateValue),V},Fe.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Fe.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.UninterpretedOption;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 2:ce.name&&ce.name.length||(ce.name=[]),ce.name.push(s.google.protobuf.UninterpretedOption.NamePart.decode(p,p.uint32()));break;case 3:ce.identifierValue=p.string();break;case 4:ce.positiveIntValue=p.uint64();break;case 5:ce.negativeIntValue=p.int64();break;case 6:ce.doubleValue=p.double();break;case 7:ce.stringValue=p.bytes();break;case 8:ce.aggregateValue=p.string();break;default:p.skipType(7&Re)}}return ce},Fe.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Fe.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.name!=null&&p.hasOwnProperty("name")){if(!Array.isArray(p.name))return"name: array expected";for(var V=0;V<p.name.length;++V){var R=s.google.protobuf.UninterpretedOption.NamePart.verify(p.name[V]);if(R)return"name."+R}}return p.identifierValue!=null&&p.hasOwnProperty("identifierValue")&&!o.isString(p.identifierValue)?"identifierValue: string expected":p.positiveIntValue!=null&&p.hasOwnProperty("positiveIntValue")&&!(o.isInteger(p.positiveIntValue)||p.positiveIntValue&&o.isInteger(p.positiveIntValue.low)&&o.isInteger(p.positiveIntValue.high))?"positiveIntValue: integer|Long expected":p.negativeIntValue!=null&&p.hasOwnProperty("negativeIntValue")&&!(o.isInteger(p.negativeIntValue)||p.negativeIntValue&&o.isInteger(p.negativeIntValue.low)&&o.isInteger(p.negativeIntValue.high))?"negativeIntValue: integer|Long expected":p.doubleValue!=null&&p.hasOwnProperty("doubleValue")&&typeof p.doubleValue!="number"?"doubleValue: number expected":p.stringValue!=null&&p.hasOwnProperty("stringValue")&&!(p.stringValue&&typeof p.stringValue.length=="number"||o.isString(p.stringValue))?"stringValue: buffer expected":p.aggregateValue!=null&&p.hasOwnProperty("aggregateValue")&&!o.isString(p.aggregateValue)?"aggregateValue: string expected":null},Fe.fromObject=function(p){if(p instanceof s.google.protobuf.UninterpretedOption)return p;var V=new s.google.protobuf.UninterpretedOption;if(p.name){if(!Array.isArray(p.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");V.name=[];for(var R=0;R<p.name.length;++R){if(typeof p.name[R]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");V.name[R]=s.google.protobuf.UninterpretedOption.NamePart.fromObject(p.name[R])}}return p.identifierValue!=null&&(V.identifierValue=String(p.identifierValue)),p.positiveIntValue!=null&&(o.Long?(V.positiveIntValue=o.Long.fromValue(p.positiveIntValue)).unsigned=!0:typeof p.positiveIntValue=="string"?V.positiveIntValue=parseInt(p.positiveIntValue,10):typeof p.positiveIntValue=="number"?V.positiveIntValue=p.positiveIntValue:typeof p.positiveIntValue=="object"&&(V.positiveIntValue=new o.LongBits(p.positiveIntValue.low>>>0,p.positiveIntValue.high>>>0).toNumber(!0))),p.negativeIntValue!=null&&(o.Long?(V.negativeIntValue=o.Long.fromValue(p.negativeIntValue)).unsigned=!1:typeof p.negativeIntValue=="string"?V.negativeIntValue=parseInt(p.negativeIntValue,10):typeof p.negativeIntValue=="number"?V.negativeIntValue=p.negativeIntValue:typeof p.negativeIntValue=="object"&&(V.negativeIntValue=new o.LongBits(p.negativeIntValue.low>>>0,p.negativeIntValue.high>>>0).toNumber())),p.doubleValue!=null&&(V.doubleValue=Number(p.doubleValue)),p.stringValue!=null&&(typeof p.stringValue=="string"?o.base64.decode(p.stringValue,V.stringValue=o.newBuffer(o.base64.length(p.stringValue)),0):p.stringValue.length&&(V.stringValue=p.stringValue)),p.aggregateValue!=null&&(V.aggregateValue=String(p.aggregateValue)),V},Fe.toObject=function(p,V){var R,ce={};if(((V=V||{}).arrays||V.defaults)&&(ce.name=[]),V.defaults&&(ce.identifierValue="",o.Long?(R=new o.Long(0,0,!0),ce.positiveIntValue=V.longs===String?R.toString():V.longs===Number?R.toNumber():R):ce.positiveIntValue=V.longs===String?"0":0,o.Long?(R=new o.Long(0,0,!1),ce.negativeIntValue=V.longs===String?R.toString():V.longs===Number?R.toNumber():R):ce.negativeIntValue=V.longs===String?"0":0,ce.doubleValue=0,V.bytes===String?ce.stringValue="":(ce.stringValue=[],V.bytes!==Array&&(ce.stringValue=o.newBuffer(ce.stringValue))),ce.aggregateValue=""),p.name&&p.name.length){ce.name=[];for(var Re=0;Re<p.name.length;++Re)ce.name[Re]=s.google.protobuf.UninterpretedOption.NamePart.toObject(p.name[Re],V)}return p.identifierValue!=null&&p.hasOwnProperty("identifierValue")&&(ce.identifierValue=p.identifierValue),p.positiveIntValue!=null&&p.hasOwnProperty("positiveIntValue")&&(typeof p.positiveIntValue=="number"?ce.positiveIntValue=V.longs===String?String(p.positiveIntValue):p.positiveIntValue:ce.positiveIntValue=V.longs===String?o.Long.prototype.toString.call(p.positiveIntValue):V.longs===Number?new o.LongBits(p.positiveIntValue.low>>>0,p.positiveIntValue.high>>>0).toNumber(!0):p.positiveIntValue),p.negativeIntValue!=null&&p.hasOwnProperty("negativeIntValue")&&(typeof p.negativeIntValue=="number"?ce.negativeIntValue=V.longs===String?String(p.negativeIntValue):p.negativeIntValue:ce.negativeIntValue=V.longs===String?o.Long.prototype.toString.call(p.negativeIntValue):V.longs===Number?new o.LongBits(p.negativeIntValue.low>>>0,p.negativeIntValue.high>>>0).toNumber():p.negativeIntValue),p.doubleValue!=null&&p.hasOwnProperty("doubleValue")&&(ce.doubleValue=V.json&&!isFinite(p.doubleValue)?String(p.doubleValue):p.doubleValue),p.stringValue!=null&&p.hasOwnProperty("stringValue")&&(ce.stringValue=V.bytes===String?o.base64.encode(p.stringValue,0,p.stringValue.length):V.bytes===Array?Array.prototype.slice.call(p.stringValue):p.stringValue),p.aggregateValue!=null&&p.hasOwnProperty("aggregateValue")&&(ce.aggregateValue=p.aggregateValue),ce},Fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Fe.NamePart=(Ve.prototype.namePart="",Ve.prototype.isExtension=!1,Ve.create=function(p){return new Ve(p)},Ve.encode=function(p,V){return(V=V||a.create()).uint32(10).string(p.namePart),V.uint32(16).bool(p.isExtension),V},Ve.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Ve.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.UninterpretedOption.NamePart;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.namePart=p.string();break;case 2:ce.isExtension=p.bool();break;default:p.skipType(7&Re)}}if(!ce.hasOwnProperty("namePart"))throw o.ProtocolError("missing required 'namePart'",{instance:ce});if(ce.hasOwnProperty("isExtension"))return ce;throw o.ProtocolError("missing required 'isExtension'",{instance:ce})},Ve.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Ve.verify=function(p){return typeof p!="object"||p===null?"object expected":o.isString(p.namePart)?typeof p.isExtension!="boolean"?"isExtension: boolean expected":null:"namePart: string expected"},Ve.fromObject=function(p){var V;return p instanceof s.google.protobuf.UninterpretedOption.NamePart?p:(V=new s.google.protobuf.UninterpretedOption.NamePart,p.namePart!=null&&(V.namePart=String(p.namePart)),p.isExtension!=null&&(V.isExtension=!!p.isExtension),V)},Ve.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.namePart="",R.isExtension=!1),p.namePart!=null&&p.hasOwnProperty("namePart")&&(R.namePart=p.namePart),p.isExtension!=null&&p.hasOwnProperty("isExtension")&&(R.isExtension=p.isExtension),R},Ve.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ve),Fe),d.SourceCodeInfo=(Ge.prototype.location=o.emptyArray,Ge.create=function(p){return new Ge(p)},Ge.encode=function(p,V){if(V=V||a.create(),p.location!=null&&p.location.length)for(var R=0;R<p.location.length;++R)s.google.protobuf.SourceCodeInfo.Location.encode(p.location[R],V.uint32(10).fork()).ldelim();return V},Ge.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Ge.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.SourceCodeInfo;p.pos<R;){var Re=p.uint32();Re>>>3==1?(ce.location&&ce.location.length||(ce.location=[]),ce.location.push(s.google.protobuf.SourceCodeInfo.Location.decode(p,p.uint32()))):p.skipType(7&Re)}return ce},Ge.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Ge.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.location!=null&&p.hasOwnProperty("location")){if(!Array.isArray(p.location))return"location: array expected";for(var V=0;V<p.location.length;++V){var R=s.google.protobuf.SourceCodeInfo.Location.verify(p.location[V]);if(R)return"location."+R}}return null},Ge.fromObject=function(p){if(p instanceof s.google.protobuf.SourceCodeInfo)return p;var V=new s.google.protobuf.SourceCodeInfo;if(p.location){if(!Array.isArray(p.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");V.location=[];for(var R=0;R<p.location.length;++R){if(typeof p.location[R]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");V.location[R]=s.google.protobuf.SourceCodeInfo.Location.fromObject(p.location[R])}}return V},Ge.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.location=[]),p.location&&p.location.length){R.location=[];for(var ce=0;ce<p.location.length;++ce)R.location[ce]=s.google.protobuf.SourceCodeInfo.Location.toObject(p.location[ce],V)}return R},Ge.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ge.Location=(Le.prototype.path=o.emptyArray,Le.prototype.span=o.emptyArray,Le.prototype.leadingComments="",Le.prototype.trailingComments="",Le.prototype.leadingDetachedComments=o.emptyArray,Le.create=function(p){return new Le(p)},Le.encode=function(p,V){if(V=V||a.create(),p.path!=null&&p.path.length){V.uint32(10).fork();for(var R=0;R<p.path.length;++R)V.int32(p.path[R]);V.ldelim()}if(p.span!=null&&p.span.length){for(V.uint32(18).fork(),R=0;R<p.span.length;++R)V.int32(p.span[R]);V.ldelim()}if(p.leadingComments!=null&&Object.hasOwnProperty.call(p,"leadingComments")&&V.uint32(26).string(p.leadingComments),p.trailingComments!=null&&Object.hasOwnProperty.call(p,"trailingComments")&&V.uint32(34).string(p.trailingComments),p.leadingDetachedComments!=null&&p.leadingDetachedComments.length)for(R=0;R<p.leadingDetachedComments.length;++R)V.uint32(50).string(p.leadingDetachedComments[R]);return V},Le.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Le.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.SourceCodeInfo.Location;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:if(ce.path&&ce.path.length||(ce.path=[]),(7&Re)==2)for(var ke=p.uint32()+p.pos;p.pos<ke;)ce.path.push(p.int32());else ce.path.push(p.int32());break;case 2:if(ce.span&&ce.span.length||(ce.span=[]),(7&Re)==2)for(ke=p.uint32()+p.pos;p.pos<ke;)ce.span.push(p.int32());else ce.span.push(p.int32());break;case 3:ce.leadingComments=p.string();break;case 4:ce.trailingComments=p.string();break;case 6:ce.leadingDetachedComments&&ce.leadingDetachedComments.length||(ce.leadingDetachedComments=[]),ce.leadingDetachedComments.push(p.string());break;default:p.skipType(7&Re)}}return ce},Le.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Le.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.path!=null&&p.hasOwnProperty("path")){if(!Array.isArray(p.path))return"path: array expected";for(var V=0;V<p.path.length;++V)if(!o.isInteger(p.path[V]))return"path: integer[] expected"}if(p.span!=null&&p.hasOwnProperty("span")){if(!Array.isArray(p.span))return"span: array expected";for(V=0;V<p.span.length;++V)if(!o.isInteger(p.span[V]))return"span: integer[] expected"}if(p.leadingComments!=null&&p.hasOwnProperty("leadingComments")&&!o.isString(p.leadingComments))return"leadingComments: string expected";if(p.trailingComments!=null&&p.hasOwnProperty("trailingComments")&&!o.isString(p.trailingComments))return"trailingComments: string expected";if(p.leadingDetachedComments!=null&&p.hasOwnProperty("leadingDetachedComments")){if(!Array.isArray(p.leadingDetachedComments))return"leadingDetachedComments: array expected";for(V=0;V<p.leadingDetachedComments.length;++V)if(!o.isString(p.leadingDetachedComments[V]))return"leadingDetachedComments: string[] expected"}return null},Le.fromObject=function(p){if(p instanceof s.google.protobuf.SourceCodeInfo.Location)return p;var V=new s.google.protobuf.SourceCodeInfo.Location;if(p.path){if(!Array.isArray(p.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");V.path=[];for(var R=0;R<p.path.length;++R)V.path[R]=0|p.path[R]}if(p.span){if(!Array.isArray(p.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(V.span=[],R=0;R<p.span.length;++R)V.span[R]=0|p.span[R]}if(p.leadingComments!=null&&(V.leadingComments=String(p.leadingComments)),p.trailingComments!=null&&(V.trailingComments=String(p.trailingComments)),p.leadingDetachedComments){if(!Array.isArray(p.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(V.leadingDetachedComments=[],R=0;R<p.leadingDetachedComments.length;++R)V.leadingDetachedComments[R]=String(p.leadingDetachedComments[R])}return V},Le.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.path=[],R.span=[],R.leadingDetachedComments=[]),V.defaults&&(R.leadingComments="",R.trailingComments=""),p.path&&p.path.length){R.path=[];for(var ce=0;ce<p.path.length;++ce)R.path[ce]=p.path[ce]}if(p.span&&p.span.length)for(R.span=[],ce=0;ce<p.span.length;++ce)R.span[ce]=p.span[ce];if(p.leadingComments!=null&&p.hasOwnProperty("leadingComments")&&(R.leadingComments=p.leadingComments),p.trailingComments!=null&&p.hasOwnProperty("trailingComments")&&(R.trailingComments=p.trailingComments),p.leadingDetachedComments&&p.leadingDetachedComments.length)for(R.leadingDetachedComments=[],ce=0;ce<p.leadingDetachedComments.length;++ce)R.leadingDetachedComments[ce]=p.leadingDetachedComments[ce];return R},Le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Le),Ge),d.GeneratedCodeInfo=(Be.prototype.annotation=o.emptyArray,Be.create=function(p){return new Be(p)},Be.encode=function(p,V){if(V=V||a.create(),p.annotation!=null&&p.annotation.length)for(var R=0;R<p.annotation.length;++R)s.google.protobuf.GeneratedCodeInfo.Annotation.encode(p.annotation[R],V.uint32(10).fork()).ldelim();return V},Be.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},Be.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.GeneratedCodeInfo;p.pos<R;){var Re=p.uint32();Re>>>3==1?(ce.annotation&&ce.annotation.length||(ce.annotation=[]),ce.annotation.push(s.google.protobuf.GeneratedCodeInfo.Annotation.decode(p,p.uint32()))):p.skipType(7&Re)}return ce},Be.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},Be.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.annotation!=null&&p.hasOwnProperty("annotation")){if(!Array.isArray(p.annotation))return"annotation: array expected";for(var V=0;V<p.annotation.length;++V){var R=s.google.protobuf.GeneratedCodeInfo.Annotation.verify(p.annotation[V]);if(R)return"annotation."+R}}return null},Be.fromObject=function(p){if(p instanceof s.google.protobuf.GeneratedCodeInfo)return p;var V=new s.google.protobuf.GeneratedCodeInfo;if(p.annotation){if(!Array.isArray(p.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");V.annotation=[];for(var R=0;R<p.annotation.length;++R){if(typeof p.annotation[R]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");V.annotation[R]=s.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(p.annotation[R])}}return V},Be.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.annotation=[]),p.annotation&&p.annotation.length){R.annotation=[];for(var ce=0;ce<p.annotation.length;++ce)R.annotation[ce]=s.google.protobuf.GeneratedCodeInfo.Annotation.toObject(p.annotation[ce],V)}return R},Be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Be.Annotation=($e.prototype.path=o.emptyArray,$e.prototype.sourceFile="",$e.prototype.begin=0,$e.prototype.end=0,$e.create=function(p){return new $e(p)},$e.encode=function(p,V){if(V=V||a.create(),p.path!=null&&p.path.length){V.uint32(10).fork();for(var R=0;R<p.path.length;++R)V.int32(p.path[R]);V.ldelim()}return p.sourceFile!=null&&Object.hasOwnProperty.call(p,"sourceFile")&&V.uint32(18).string(p.sourceFile),p.begin!=null&&Object.hasOwnProperty.call(p,"begin")&&V.uint32(24).int32(p.begin),p.end!=null&&Object.hasOwnProperty.call(p,"end")&&V.uint32(32).int32(p.end),V},$e.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},$e.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.GeneratedCodeInfo.Annotation;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:if(ce.path&&ce.path.length||(ce.path=[]),(7&Re)==2)for(var ke=p.uint32()+p.pos;p.pos<ke;)ce.path.push(p.int32());else ce.path.push(p.int32());break;case 2:ce.sourceFile=p.string();break;case 3:ce.begin=p.int32();break;case 4:ce.end=p.int32();break;default:p.skipType(7&Re)}}return ce},$e.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},$e.verify=function(p){if(typeof p!="object"||p===null)return"object expected";if(p.path!=null&&p.hasOwnProperty("path")){if(!Array.isArray(p.path))return"path: array expected";for(var V=0;V<p.path.length;++V)if(!o.isInteger(p.path[V]))return"path: integer[] expected"}return p.sourceFile!=null&&p.hasOwnProperty("sourceFile")&&!o.isString(p.sourceFile)?"sourceFile: string expected":p.begin!=null&&p.hasOwnProperty("begin")&&!o.isInteger(p.begin)?"begin: integer expected":p.end!=null&&p.hasOwnProperty("end")&&!o.isInteger(p.end)?"end: integer expected":null},$e.fromObject=function(p){if(p instanceof s.google.protobuf.GeneratedCodeInfo.Annotation)return p;var V=new s.google.protobuf.GeneratedCodeInfo.Annotation;if(p.path){if(!Array.isArray(p.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");V.path=[];for(var R=0;R<p.path.length;++R)V.path[R]=0|p.path[R]}return p.sourceFile!=null&&(V.sourceFile=String(p.sourceFile)),p.begin!=null&&(V.begin=0|p.begin),p.end!=null&&(V.end=0|p.end),V},$e.toObject=function(p,V){var R={};if(((V=V||{}).arrays||V.defaults)&&(R.path=[]),V.defaults&&(R.sourceFile="",R.begin=0,R.end=0),p.path&&p.path.length){R.path=[];for(var ce=0;ce<p.path.length;++ce)R.path[ce]=p.path[ce]}return p.sourceFile!=null&&p.hasOwnProperty("sourceFile")&&(R.sourceFile=p.sourceFile),p.begin!=null&&p.hasOwnProperty("begin")&&(R.begin=p.begin),p.end!=null&&p.hasOwnProperty("end")&&(R.end=p.end),R},$e.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},$e),Be),d.Any=(he.prototype.type_url="",he.prototype.value=o.newBuffer([]),he.create=function(p){return new he(p)},he.encode=function(p,V){return V=V||a.create(),p.type_url!=null&&Object.hasOwnProperty.call(p,"type_url")&&V.uint32(10).string(p.type_url),p.value!=null&&Object.hasOwnProperty.call(p,"value")&&V.uint32(18).bytes(p.value),V},he.encodeDelimited=function(p,V){return this.encode(p,V).ldelim()},he.decode=function(p,V){p instanceof c||(p=c.create(p));for(var R=V===void 0?p.len:p.pos+V,ce=new s.google.protobuf.Any;p.pos<R;){var Re=p.uint32();switch(Re>>>3){case 1:ce.type_url=p.string();break;case 2:ce.value=p.bytes();break;default:p.skipType(7&Re)}}return ce},he.decodeDelimited=function(p){return p instanceof c||(p=new c(p)),this.decode(p,p.uint32())},he.verify=function(p){return typeof p!="object"||p===null?"object expected":p.type_url!=null&&p.hasOwnProperty("type_url")&&!o.isString(p.type_url)?"type_url: string expected":p.value!=null&&p.hasOwnProperty("value")&&!(p.value&&typeof p.value.length=="number"||o.isString(p.value))?"value: buffer expected":null},he.fromObject=function(p){var V;return p instanceof s.google.protobuf.Any?p:(V=new s.google.protobuf.Any,p.type_url!=null&&(V.type_url=String(p.type_url)),p.value!=null&&(typeof p.value=="string"?o.base64.decode(p.value,V.value=o.newBuffer(o.base64.length(p.value)),0):p.value.length&&(V.value=p.value)),V)},he.toObject=function(p,V){var R={};return(V=V||{}).defaults&&(R.type_url="",V.bytes===String?R.value="":(R.value=[],V.bytes!==Array&&(R.value=o.newBuffer(R.value)))),p.type_url!=null&&p.hasOwnProperty("type_url")&&(R.type_url=p.type_url),p.value!=null&&p.hasOwnProperty("value")&&(R.value=V.bytes===String?o.base64.encode(p.value,0,p.value.length):V.bytes===Array?Array.prototype.slice.call(p.value):p.value),R},he.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},he),d),m),s})}(locations)),locations.exports}var pathTemplate={},hasRequiredPathTemplate;function requirePathTemplate(){if(hasRequiredPathTemplate)return pathTemplate;hasRequiredPathTemplate=1,Object.defineProperty(pathTemplate,"__esModule",{value:!0}),pathTemplate.PathTemplate=void 0;class t{constructor(u){this.bindings={},this.data=u,this.segments=this.parsePathTemplate(u),this.size=this.segments.length}match(u){let d=u.split("/");const m={};if(d.length!==this.segments.length)if(this.data.includes("**")){if(d.length!==this.segments.length+1)throw new TypeError(`This path ${u} does not match path template ${this.data}, the number of parameters is not same with one wildcard.`)}else throw new TypeError(`This path ${u} does not match path template ${this.data}, the number of parameters is not same.`);for(let c=0;c<this.segments.length&&d.length>0;c++)if(this.segments[c]!==d[0])if(this.segments[c].includes("*")){let a=this.segments[c];const o=a.match(/\{[$0-9a-zA-Z_]+=.*?\}/g);if(!o)throw new Error(`Error processing path template segment ${a}`);const s=o.map(h=>h.replace(/^\{/,"").replace(/=.*/,""));if(a.includes("**"))m[s[0]]=d[0]+"/"+d[1],d=d.slice(2);else{if(s.length===1)m[s[0]]=d[0];else{const h=d[0].split(/[-_.~]/);if(h.length!==s.length)throw new Error(`segment ${a} does not match ${d[0]}`);for(const v of s)m[v]=h[0],a=a.replace(`{${v}=*}`,`${h[0]}`),h.shift();if(a!==d[0])throw new TypeError(`non slash resource pattern ${this.segments[c]} and ${d[0]} should have same separator`)}d.shift()}}else throw new TypeError(`segment does not match, ${this.segments[c]} and  ${d[c]}.`);else d.shift();return m}render(u){if(Object.keys(u).length!==Object.keys(this.bindings).length)throw new TypeError(`The number of variables ${Object.keys(u).length} does not match the number of needed variables ${Object.keys(this.bindings).length}`);let d=this.inspect();for(const m of Object.keys(u)){const c=u[m].toString();if(!this.bindings[m])throw new TypeError(`render fails for not matching ${u[m]}`);const a=this.bindings[m];if(a==="*"){if(!c.match(/[^/{}]+/))throw new TypeError(`render fails for not matching ${c}`);d=d.replace(`{${m}=*}`,`${c}`)}else if(a==="**"){if(!c.match(/[^{}]+/))throw new TypeError(`render fails for not matching ${c}`);d=d.replace(`{${m}=**}`,`${c}`)}}return d}inspect(){return this.segments.join("/")}parsePathTemplate(u){const d=e(u);let m=0,c=0;const a=[];let o;if(d.forEach(s=>{if(s==="*"||s==="**")this.bindings[`$${m}`]=s,a.push(`{$${m}=${s}}`),m=m+1,s==="**"&&++c;else if(o=s.match(/\{[0-9a-zA-Z-.~_]+(?:=.*?)?\}/g)){for(const h of o){const v=h.match(/^\{([0-9a-zA-Z-.~_]+)(?:=(.*?))?\}$/);if(!v)throw new Error(`Cannot process path template segment ${h}`);const E=v[1];let y=v[2];y?y==="*"?this.bindings[E]=y:y==="**"&&(++c,this.bindings[E]=y):(y="*",s=s.replace(E,E+"=*"),this.bindings[E]=y)}a.push(s)}else s.match(/[0-9a-zA-Z-.~_]+/)&&a.push(s)}),c>1)throw new TypeError("Can not have more than one wildcard.");return a}}pathTemplate.PathTemplate=t;function e(r){let u=0,d=0,m=0;const c=[];for(;d>=u&&d<r.length;){if(r.charAt(d)==="{")m=m+1;else if(r.charAt(d)==="}")m=m-1;else if(r.charAt(d)==="/"){if(d===r.length-1)throw new TypeError("Invalid path, it can not be ended by /");m===0&&(c.push(r.substring(u,d)),u=d+1)}if(d===r.length-1){if(m!==0)throw new TypeError("Brackets are invalid.");c.push(r.substring(u))}d=d+1}return c}return pathTemplate}var iamService={};const interfaces$3={"google.iam.v1.IAMPolicy":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:2e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:2e4,total_timeout_millis:6e5}},methods:{GetIamPolicy:{retry_codes_name:"non_idempotent",retry_params_name:"default"},SetIamPolicy:{retry_codes_name:"non_idempotent",retry_params_name:"default"},TestIamPermissions:{retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$2$1={interfaces:interfaces$3},nested$4=JSON.parse('{"google":{"nested":{"iam":{"nested":{"v1":{"options":{"cc_enable_arenas":true,"csharp_namespace":"Google.Cloud.Iam.V1","go_package":"google.golang.org/genproto/googleapis/iam/v1;iam","java_multiple_files":true,"java_outer_classname":"PolicyProto","java_package":"com.google.iam.v1","php_namespace":"Google\\\\Cloud\\\\Iam\\\\V1"},"nested":{"IAMPolicy":{"options":{"(google.api.default_host)":"iam-meta-api.googleapis.com"},"methods":{"SetIamPolicy":{"requestType":"SetIamPolicyRequest","responseType":"Policy","options":{"(google.api.http).post":"/v1/{resource=**}:setIamPolicy","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{resource=**}:setIamPolicy","body":"*"}}]},"GetIamPolicy":{"requestType":"GetIamPolicyRequest","responseType":"Policy","options":{"(google.api.http).post":"/v1/{resource=**}:getIamPolicy","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{resource=**}:getIamPolicy","body":"*"}}]},"TestIamPermissions":{"requestType":"TestIamPermissionsRequest","responseType":"TestIamPermissionsResponse","options":{"(google.api.http).post":"/v1/{resource=**}:testIamPermissions","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{resource=**}:testIamPermissions","body":"*"}}]}}},"SetIamPolicyRequest":{"fields":{"resource":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"*"}},"policy":{"type":"Policy","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"GetIamPolicyRequest":{"fields":{"resource":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"*"}},"options":{"type":"GetPolicyOptions","id":2}}},"TestIamPermissionsRequest":{"fields":{"resource":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"*"}},"permissions":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"TestIamPermissionsResponse":{"fields":{"permissions":{"rule":"repeated","type":"string","id":1}}},"GetPolicyOptions":{"fields":{"requestedPolicyVersion":{"type":"int32","id":1}}},"Policy":{"fields":{"version":{"type":"int32","id":1},"bindings":{"rule":"repeated","type":"Binding","id":4},"etag":{"type":"bytes","id":3}}},"Binding":{"fields":{"role":{"type":"string","id":1},"members":{"rule":"repeated","type":"string","id":2},"condition":{"type":"google.type.Expr","id":3}}},"PolicyDelta":{"fields":{"bindingDeltas":{"rule":"repeated","type":"BindingDelta","id":1},"auditConfigDeltas":{"rule":"repeated","type":"AuditConfigDelta","id":2}}},"BindingDelta":{"fields":{"action":{"type":"Action","id":1},"role":{"type":"string","id":2},"member":{"type":"string","id":3},"condition":{"type":"google.type.Expr","id":4}},"nested":{"Action":{"values":{"ACTION_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}},"AuditConfigDelta":{"fields":{"action":{"type":"Action","id":1},"service":{"type":"string","id":2},"exemptedMember":{"type":"string","id":3},"logType":{"type":"string","id":4}},"nested":{"Action":{"values":{"ACTION_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}},"logging":{"options":{"csharp_namespace":"Google.Cloud.Iam.V1.Logging","go_package":"google.golang.org/genproto/googleapis/iam/v1/logging;logging","java_multiple_files":true,"java_outer_classname":"AuditDataProto","java_package":"com.google.iam.v1.logging"},"nested":{"AuditData":{"fields":{"policyDelta":{"type":"google.iam.v1.PolicyDelta","id":2}}}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions"},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"protobuf":{"options":{"go_package":"github.com/golang/protobuf/protoc-gen-go/descriptor;descriptor","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"phpGenericServices":{"type":"bool","id":42,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}},"type":{"options":{"go_package":"google.golang.org/genproto/googleapis/type/expr;expr","java_multiple_files":true,"java_outer_classname":"ExprProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"Expr":{"fields":{"expression":{"type":"string","id":1},"title":{"type":"string","id":2},"description":{"type":"string","id":3},"location":{"type":"string","id":4}}}}}}}}'),require$$5$1={nested:nested$4};var hasRequiredIamService;function requireIamService(){if(hasRequiredIamService)return iamService;hasRequiredIamService=1,Object.defineProperty(iamService,"__esModule",{value:!0}),iamService.IamClient=void 0;const t=requireCreateApiCall(),e=requireRoutingHeader(),r=require$$2$1,u=requireFallback();let d=require$$17.version;const m=require$$5$1;class c{constructor(o,s){this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{}},this.innerApiCalls={},this.gaxGrpc=o;const h=Object.assign({servicePath:s.servicePath,port:s.port,clientConfig:s.clientConfig,apiEndpoint:s.apiEndpoint,fallback:s.fallback},s);d=h.fallback?u.version:d,h.scopes=this.constructor.scopes,this._opts=h,this.auth=o.auth;const v=[`gax/${d}`,`gapic/${d}`];typeof process<"u"&&"versions"in process?v.push(`gl-node/${process.versions.node}`):v.push(`gl-web/${d}`),h.fallback||v.push(`grpc/${o.grpcVersion}`),h.libName&&h.libVersion&&v.push(`${h.libName}/${h.libVersion}`),this._protos=this.gaxGrpc.loadProtoJSON(m),this._defaults=o.constructSettings("google.iam.v1.IAMPolicy",r,h.clientConfig||{},{"x-goog-api-client":v.join(" ")}),this.innerApiCalls={}}initialize(){if(this.iamPolicyStub)return this.iamPolicyStub;this.iamPolicyStub=this.gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.iam.v1.IAMPolicy"):this._protos.google.iam.v1.IAMPolicy,this._opts);const o=["getIamPolicy","setIamPolicy","testIamPermissions"];for(const s of o){const h=this.iamPolicyStub.then(v=>(...E)=>this._terminated?Promise.reject("The client has already been closed."):v[s].apply(v,E),v=>()=>{throw v});this.innerApiCalls[s]=(0,t.createApiCall)(h,this._defaults[s],this.descriptors.page[s])}return this.iamPolicyStub}static get servicePath(){return"cloudkms.googleapis.com"}static get apiEndpoint(){return"cloudkms.googleapis.com"}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/cloudkms"]}getProjectId(o){if(this.auth&&"getProjectId"in this.auth)return this.auth.getProjectId(o);if(o)o(new Error("Cannot determine project ID."));else return Promise.reject("Cannot determine project ID.")}getIamPolicy(o,s,h){let v;return s instanceof Function&&h===void 0?(h=s,v={}):v=s,o=o||{},v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=e.fromParams({resource:o.resource}),this.initialize(),this.innerApiCalls.getIamPolicy(o,v,h)}setIamPolicy(o,s,h){let v;return s instanceof Function&&h===void 0?(h=s,v={}):v=s,o=o||{},v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=e.fromParams({resource:o.resource}),this.initialize(),this.innerApiCalls.setIamPolicy(o,v,h)}testIamPermissions(o,s,h){let v;return s instanceof Function&&h===void 0?(h=s,v={}):v=s,o=o||{},v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=e.fromParams({resource:o.resource}),this.initialize(),this.innerApiCalls.testIamPermissions(o,v,h)}close(){return this.initialize(),this._terminated?Promise.resolve():this.iamPolicyStub.then(o=>{this._terminated=!0,o.close()})}}return iamService.IamClient=c,iamService}var locationService={};const nested$3=JSON.parse('{"google":{"nested":{"cloud":{"nested":{"location":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/cloud/location;location","java_multiple_files":true,"java_outer_classname":"LocationsProto","java_package":"com.google.cloud.location"},"nested":{"Locations":{"options":{"(google.api.default_host)":"cloud.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform"},"methods":{"ListLocations":{"requestType":"ListLocationsRequest","responseType":"ListLocationsResponse","options":{"(google.api.http).get":"/v1/{name=locations}","(google.api.http).additional_bindings.get":"/v1/{name=projects/*}/locations"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=locations}","additional_bindings":{"get":"/v1/{name=projects/*}/locations"}}}]},"GetLocation":{"requestType":"GetLocationRequest","responseType":"Location","options":{"(google.api.http).get":"/v1/{name=locations/*}","(google.api.http).additional_bindings.get":"/v1/{name=projects/*/locations/*}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=locations/*}","additional_bindings":{"get":"/v1/{name=projects/*/locations/*}"}}}]}}},"ListLocationsRequest":{"fields":{"name":{"type":"string","id":1},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListLocationsResponse":{"fields":{"locations":{"rule":"repeated","type":"Location","id":1},"nextPageToken":{"type":"string","id":2}}},"GetLocationRequest":{"fields":{"name":{"type":"string","id":1}}},"Location":{"fields":{"name":{"type":"string","id":1},"locationId":{"type":"string","id":4},"displayName":{"type":"string","id":5},"labels":{"keyType":"string","type":"string","id":2},"metadata":{"type":"google.protobuf.Any","id":3}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ClientProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"phpGenericServices":{"type":"bool","id":42,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}}}}}}}'),require$$5={nested:nested$3},interfaces$2={"google.cloud.location.Locations":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{ListLocations:{retry_codes_name:"non_idempotent",retry_params_name:"default"},GetLocation:{retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$6={interfaces:interfaces$2};var hasRequiredLocationService;function requireLocationService(){if(hasRequiredLocationService)return locationService;hasRequiredLocationService=1,Object.defineProperty(locationService,"__esModule",{value:!0}),locationService.LocationsClient=void 0;const t=requireGax(),e=requireWarnings(),r=requireCreateApiCall(),u=requireRoutingHeader(),d=requirePageDescriptor(),m=require$$5,c=require$$6,a=require$$17.version;class o{constructor(h,v){var E,y;this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}},this.gaxGrpc=h;const A=this.constructor,w=v?.servicePath||v?.apiEndpoint||A.servicePath;this._providedCustomServicePath=!!(v?.servicePath||v?.apiEndpoint);const I=v?.port||A.port,_=(E=v?.clientConfig)!==null&&E!==void 0?E:{},S=(y=v?.fallback)!==null&&y!==void 0?y:typeof window<"u"&&typeof window?.fetch=="function";v=Object.assign({servicePath:w,port:I,clientConfig:_,fallback:S},v),w!==A.servicePath&&!("scopes"in v)&&(v.scopes=A.scopes),this._opts=v,this.auth=h.auth,w===A.servicePath&&(this.auth.defaultScopes=A.scopes);const j=[`gax/${a}`,`gapic/${a}`];typeof process<"u"&&"versions"in process?j.push(`gl-node/${process.versions.node}`):j.push(`gl-web/${a}`),v.fallback?v.fallback==="rest"&&j.push(`rest/${h.grpcVersion}`):j.push(`grpc/${h.grpcVersion}`),v.libName&&v.libVersion&&j.push(`${v.libName}/${v.libVersion}`),this._protos=h.loadProtoJSON(m),this.descriptors.page={listLocations:new d.PageDescriptor("pageToken","nextPageToken","locations")},this._defaults=h.constructSettings("google.cloud.location.Locations",c,v.clientConfig||{},{"x-goog-api-client":j.join(" ")}),this.innerApiCalls={},this.warn=e.warn}initialize(){if(this.locationsStub)return this.locationsStub;this.locationsStub=this.gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.cloud.location.Locations"):this._protos.google.cloud.location.Locations,this._opts,this._providedCustomServicePath);const h=["listLocations","getLocation"];for(const v of h){const E=this.locationsStub.then(w=>(...I)=>this._terminated?Promise.reject("The client has already been closed."):w[v].apply(w,I),w=>()=>{throw w}),y=this.descriptors.page[v]||void 0,A=(0,r.createApiCall)(E,this._defaults[v],y);this.innerApiCalls[v]=A}return this.locationsStub}static get servicePath(){return"cloud.googleapis.com"}static get apiEndpoint(){return"cloud.googleapis.com"}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform"]}getProjectId(h){if(h){this.auth.getProjectId(h);return}return this.auth.getProjectId()}getLocation(h,v,E){h=h||{};let y;return typeof v=="function"&&E===void 0?(E=v,y={}):y=v,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=u.fromParams({name:h.name||""}),this.initialize(),this.innerApiCalls.getLocation(h,y,E)}listLocations(h,v,E){h=h||{};let y;return typeof v=="function"&&E===void 0?(E=v,y={}):y=v,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=u.fromParams({name:h.name||""}),this.initialize(),this.innerApiCalls.listLocations(h,y,E)}listLocationsAsync(h,v){h=h||{},v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=u.fromParams({name:h.name||""}),v=v||{};const E=new t.CallSettings(v);return this.initialize(),this.descriptors.page.listLocations.asyncIterate(this.innerApiCalls.listLocations,h,E)}close(){return this.initialize(),this._terminated?Promise.resolve():this.locationsStub.then(h=>{this._terminated=!0,h.close()})}}return locationService.LocationsClient=o,locationService}var hasRequiredFallback;function requireFallback(){return hasRequiredFallback||(hasRequiredFallback=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fallback=e.GoogleError=e.operation=e.Operation=e.warn=e.protobufMinimal=e.protobuf=e.LocationProtos=e.IamProtos=e.operationsProtos=e.GrpcClient=e.defaultToObjectOptions=e.makeUUID=e.LocationsClient=e.IamClient=e.OperationsClient=e.StreamType=e.StreamDescriptor=e.PageDescriptor=e.LongrunningDescriptor=e.BundleDescriptor=e.version=e.createDefaultBackoffSettings=e.RetryOptions=e.constructSettings=e.CallSettings=e.routingHeader=e.PathTemplate=void 0,e.lro=le,e.createApiCall=ne;const r=requireObject_hash(),u=requireProtobufjs();e.protobuf=u;const d=requireGax(),m=requireRoutingHeader();e.routingHeader=m;const c=requireStatus(),a=requireSrc$b(),o=requireOperationsClient(),s=requireCreateApiCall(),h=requireFallbackRest(),v=requireFeatureDetection(),E=requireFallbackServiceStub(),y=requireStreaming(),A=requireUtil$2(),w=requireIam_service();e.IamProtos=w;const I=requireLocations();e.LocationProtos=I;const _=requireOperations();e.operationsProtos=_;var S=requirePathTemplate();Object.defineProperty(e,"PathTemplate",{enumerable:!0,get:function(){return S.PathTemplate}});var j=requireGax();Object.defineProperty(e,"CallSettings",{enumerable:!0,get:function(){return j.CallSettings}}),Object.defineProperty(e,"constructSettings",{enumerable:!0,get:function(){return j.constructSettings}}),Object.defineProperty(e,"RetryOptions",{enumerable:!0,get:function(){return j.RetryOptions}}),Object.defineProperty(e,"createDefaultBackoffSettings",{enumerable:!0,get:function(){return j.createDefaultBackoffSettings}}),e.version=require$$17.version+"-fallback";var K=requireDescriptor();Object.defineProperty(e,"BundleDescriptor",{enumerable:!0,get:function(){return K.BundleDescriptor}}),Object.defineProperty(e,"LongrunningDescriptor",{enumerable:!0,get:function(){return K.LongrunningDescriptor}}),Object.defineProperty(e,"PageDescriptor",{enumerable:!0,get:function(){return K.PageDescriptor}}),Object.defineProperty(e,"StreamDescriptor",{enumerable:!0,get:function(){return K.StreamDescriptor}});var J=requireStreaming();Object.defineProperty(e,"StreamType",{enumerable:!0,get:function(){return J.StreamType}});var H=requireOperationsClient();Object.defineProperty(e,"OperationsClient",{enumerable:!0,get:function(){return H.OperationsClient}});var U=requireIamService();Object.defineProperty(e,"IamClient",{enumerable:!0,get:function(){return U.IamClient}});var P=requireLocationService();Object.defineProperty(e,"LocationsClient",{enumerable:!0,get:function(){return P.LocationsClient}});var Z=requireUtil$2();Object.defineProperty(e,"makeUUID",{enumerable:!0,get:function(){return Z.makeUUID}}),e.defaultToObjectOptions={keepCase:!1,longs:String,enums:String,defaults:!0,oneofs:!0};const ie="x-goog-api-client";class ue{static clearProtoCache(){ue.protoCache.clear()}constructor(be={}){var we;if((0,v.isNodeJS)())this.auth=be.auth||new a.GoogleAuth(be);else{if(!be.auth)throw new Error(JSON.stringify(be)+"You need to pass auth instance to use gRPC-fallback client in browser or other non-Node.js environments. Use OAuth2Client from google-auth-library.");this.auth=be.auth}this.fallback=!!be.fallback,this.grpcVersion=require$$17.version,this.httpRules=be.httpRules,this.numericEnums=(we=be.numericEnums)!==null&&we!==void 0?we:!1}loadProto(be){return u.Root.fromJSON(be)}loadProtoJSON(be,we=!1){const Ce=r(JSON.stringify(be)).toString(),je=ue.protoCache.get(Ce);if(je&&!we)return je;const Fe=u.Root.fromJSON(be);return ue.protoCache.set(Ce,Fe),Fe}static getServiceMethods(be){const we={};for(const[Ce,je]of Object.entries(be.methods)){const Fe=(0,A.toLowerCamelCase)(Ce);we[Fe]=je}return we}constructSettings(be,we,Ce,je){function Fe(Ve,Ge){const Le={};je||(je={});for(const $e in je)Le[$e]=Array.isArray(je[$e])?je[$e]:[je[$e]];const Be=[];if(Le[ie]&&Le[ie][0]&&Be.push(...Le[ie][0].split(" ")),Be.push(`grpc-web/${e.version}`),Le[ie]=[Be.join(" ")],!Ge)return Le;for(const $e in Ge)if($e.toLowerCase()!==ie){const he=Ge[$e];if(Array.isArray(he))if(Le[$e]===void 0)Le[$e]=he;else if(Array.isArray(Le[$e]))Le[$e].push(...he);else throw new Error(`Can not add value ${he} to the call metadata.`);else Le[$e]=[he]}return Le}return d.constructSettings(be,we,Ce,c.Status,{metadataBuilder:Fe})}async createStub(be,we,Ce){if(this.authClient||(this.auth&&"getClient"in this.auth?this.authClient=await this.auth.getClient():this.auth&&"getRequestHeaders"in this.auth&&(this.authClient=this.auth)),!this.authClient)throw new Error("No authentication was provided");if(we.universeDomain||(we.universeDomain="googleapis.com"),we.universeDomain){const p=this.authClient.universeDomain;if(p&&we.universeDomain!==p)throw new Error(`The configured universe domain (${we.universeDomain}) does not match the universe domain found in the credentials (${p}). If you haven't configured the universe domain explicitly, googleapis.com is the default.`)}be.resolveAll();const je=ue.getServiceMethods(be),Fe=we.protocol||"https";let Ve=we.servicePath;if(!Ve&&be.options&&be.options["(google.api.default_host)"]&&(Ve=be.options["(google.api.default_host)"]),!Ve)throw new Error(`Cannot determine service API path for service ${be.name}.`);let Ge;const Le=Ve.match(/^(.*):(\d+)$/);Le&&(Ve=Le[1],Ge=parseInt(Le[2])),we.port?Ge=we.port:Ge||(Ge=443);const Be=h.encodeRequest,$e=h.decodeResponse;return(0,E.generateServiceStub)(je,Fe,Ve,Ge,this.authClient,Be,$e,this.numericEnums)}static createByteLengthFunction(be){return d.createByteLengthFunction(be)}}e.GrpcClient=ue,ue.protoCache=new Map;function le(Se){Se=Object.assign({scopes:[]},Se),Se.protoJson&&(Se=Object.assign(Se,{fallback:!0}));const be=new ue(Se);return new o.OperationsClientBuilder(be,Se.protoJson)}function ne(Se,be,we,Ce){return we&&"streaming"in we&&we.type!==y.StreamType.SERVER_STREAMING?()=>{throw new Error("The REST transport currently does not support client-streaming or bidi-stream calls.")}:we&&"streaming"in we&&!(0,v.isNodeJS)()?()=>{throw new Error("Server streaming over the REST transport is only supported in Node.js.")}:(0,s.createApiCall)(Se,be,we)}e.protobufMinimal=requireMinimal();var ye=requireWarnings();Object.defineProperty(e,"warn",{enumerable:!0,get:function(){return ye.warn}});var fe=requireLongrunning();Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return fe.Operation}}),Object.defineProperty(e,"operation",{enumerable:!0,get:function(){return fe.operation}});var Te=requireGoogleError();Object.defineProperty(e,"GoogleError",{enumerable:!0,get:function(){return Te.GoogleError}});const Ae=t.exports;e.fallback=Ae}(fallback,fallback.exports)),fallback.exports}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$3;hasRequiredUtil=1;var t={};/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(util$3,"__esModule",{value:!0}),util$3.Deferred=void 0,util$3.autoId=d,util$3.requestTag=m,util$3.isObject=c,util$3.isPlainObject=a,util$3.isEmpty=o,util$3.isFunction=s,util$3.isPermanentRpcError=h,util$3.getRetryCodes=y,util$3.getTotalTimeout=A,util$3.getRetryParams=w,util$3.silencePromise=I,util$3.wrapError=_,util$3.tryGetPreferRestEnvironmentVariable=S,util$3.mapToArray=j,util$3.isArrayEqual=K,util$3.isPrimitiveArrayEqual=J;const e=require$$1$3,r=require$$19;class u{constructor(){this.resolve=()=>{},this.reject=()=>{},this.promise=new Promise((U,P)=>{this.resolve=U,this.reject=P})}}util$3.Deferred=u;function d(){const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let U="";for(;U.length<20;)(0,e.randomBytes)(40).forEach(Z=>{U.length<20&&Z<=247&&(U+=H.charAt(Z%62))});return U}function m(){return d().substr(0,5)}function c(H){return Object.prototype.toString.call(H)==="[object Object]"}function a(H){return c(H)&&(Object.getPrototypeOf(H)===Object.prototype||Object.getPrototypeOf(H)===null||H.constructor.name==="Object")}function o(H){return Object.keys(H).length===0}function s(H){return typeof H=="function"}function h(H,U){return H.code!==void 0?y(U).indexOf(H.code)===-1:!1}let v;function E(H){return v||(v=requireFallback().constructSettings("google.firestore.v1.Firestore",r,{},requireStatus().Status)),v[H]}function y(H){var U,P,Z;return(Z=(P=(U=E(H))===null||U===void 0?void 0:U.retry)===null||P===void 0?void 0:P.retryCodes)!==null&&Z!==void 0?Z:[]}function A(H){var U,P,Z,ie;return(ie=(Z=(P=(U=E(H))===null||U===void 0?void 0:U.retry)===null||P===void 0?void 0:P.backoffSettings)===null||Z===void 0?void 0:Z.totalTimeoutMillis)!==null&&ie!==void 0?ie:0}function w(H){var U,P,Z;return(Z=(P=(U=E(H))===null||U===void 0?void 0:U.retry)===null||P===void 0?void 0:P.backoffSettings)!==null&&Z!==void 0?Z:requireFallback().createDefaultBackoffSettings()}function I(H){return H.then(()=>{},()=>{})}function _(H,U){return H.stack+=`
Caused by: `+U,H}function S(){var H;const U=(H=t.FIRESTORE_PREFER_REST)===null||H===void 0?void 0:H.trim().toLowerCase();if(U!==void 0){if(U==="1"||U==="true")return!0;if(U==="0"||U==="false")return!1;console.warn(`An unsupported value was specified for the environment variable FIRESTORE_PREFER_REST. Value ${U} is unsupported.`);return}}function j(H,U){const P=[];for(const Z in H)Object.prototype.hasOwnProperty.call(H,Z)&&P.push(U(H[Z],Z,H));return P}function K(H,U){if(H.length!==U.length)return!1;for(let P=0;P<H.length;++P)if(!H[P].isEqual(U[P]))return!1;return!0}function J(H,U){if(H.length!==U.length)return!1;for(let P=0;P<H.length;++P)if(H[P]!==U[P])return!1;return!0}return util$3}var timestamp={},hasRequiredTimestamp;function requireTimestamp(){if(hasRequiredTimestamp)return timestamp;hasRequiredTimestamp=1;/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(timestamp,"__esModule",{value:!0}),timestamp.Timestamp=void 0;const t=requireValidate();/*!
 * Number of nanoseconds in a millisecond.
 *
 * @type {number}
 */const e=1e6;/*!
 * The minimum legal value for the "seconds" property of a Timestamp object.
 *
 * This value corresponds to 0001-01-01T00:00:00Z.
 *
 * @type {number}
 */const r=-62135596800;/*!
 * The maximum legal value for the "seconds" property of a Timestamp object.
 *
 * This value corresponds to 9999-12-31T23:59:59.999999999Z.
 *
 * @type {number}
 */const u=253402300799;class d{static now(){return d.fromMillis(Date.now())}static fromDate(c){return d.fromMillis(c.getTime())}static fromMillis(c){const a=Math.floor(c/1e3),o=Math.floor((c-a*1e3)*e);return new d(a,o)}static fromProto(c){return new d(Number(c.seconds||0),c.nanos||0)}constructor(c,a){(0,t.validateInteger)("seconds",c,{minValue:r,maxValue:u}),(0,t.validateInteger)("nanoseconds",a,{minValue:0,maxValue:999999999}),this._seconds=c,this._nanoseconds=a}get seconds(){return this._seconds}get nanoseconds(){return this._nanoseconds}toDate(){return new Date(this._seconds*1e3+Math.round(this._nanoseconds/e))}toMillis(){return this._seconds*1e3+Math.floor(this._nanoseconds/e)}isEqual(c){return this===c||c instanceof d&&this._seconds===c.seconds&&this._nanoseconds===c.nanoseconds}toProto(){const c={};return this.seconds&&(c.seconds=this.seconds.toString()),this.nanoseconds&&(c.nanos=this.nanoseconds),{timestampValue:c}}valueOf(){const c=this.seconds-r,a=String(c).padStart(12,"0"),o=String(this.nanoseconds).padStart(9,"0");return a+"."+o}}return timestamp.Timestamp=d,timestamp}var hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate$1;hasRequiredValidate=1;/*!
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.customObjectMessage=u,validate$1.validateFunction=d,validate$1.validateObject=m,validate$1.validateString=c,validate$1.validateHost=a,validate$1.validateBoolean=o,validate$1.validateNumber=s,validate$1.validateInteger=h,validate$1.validateTimestamp=v,validate$1.invalidArgumentMessage=E,validate$1.validateOptional=y,validate$1.validateMinNumberOfArguments=I,validate$1.validateMaxNumberOfArguments=_,validate$1.validateEnumValue=S;const t=require$$1$3,e=requireUtil(),r=requireTimestamp();function u(j,K,J){const H=J?` (found in field "${J}")`:"";if((0,e.isObject)(K)){const U=K.constructor.name;switch(U){case"DocumentReference":case"FieldPath":case"FieldValue":case"GeoPoint":case"Timestamp":return`${E(j,"Firestore document")} Detected an object of type "${U}" that doesn't match the expected instance${H}. Please ensure that the Firestore types you are using are from the same NPM package.)`;case"Object":return`${E(j,"Firestore document")} Invalid use of type "${typeof K}" as a Firestore argument${H}.`;default:return`${E(j,"Firestore document")} Couldn't serialize object of type "${U}"${H}. Firestore doesn't support JavaScript objects with custom prototypes (i.e. objects that were created via the "new" operator).`}}else return`${E(j,"Firestore document")} Input is not a plain JavaScript object${H}.`}function d(j,K,J){if(!y(K,J)&&!(0,e.isFunction)(K))throw new Error(E(j,"function"))}function m(j,K,J){if(!y(K,J)&&!(0,e.isObject)(K))throw new Error(E(j,"object"))}function c(j,K,J){if(!y(K,J)&&typeof K!="string")throw new Error(E(j,"string"))}function a(j,K,J){if(!y(K,J)){c(j,K);const H=`http://${K}/`;let U;try{U=new t.URL(H)}catch{throw new Error(E(j,"host"))}if(U.search!==""||U.pathname!=="/"||U.username!=="")throw new Error(E(j,"host"))}}function o(j,K,J){if(!y(K,J)&&typeof K!="boolean")throw new Error(E(j,"boolean"))}function s(j,K,J){const H=J!==void 0&&J.minValue!==void 0?J.minValue:-1/0,U=J!==void 0&&J.maxValue!==void 0?J.maxValue:1/0;if(!y(K,J)){if(typeof K!="number"||isNaN(K))throw new Error(E(j,"number"));if(K<H||K>U)throw new Error(`${w(j)} must be within [${H}, ${U}] inclusive, but was: ${K}`)}}function h(j,K,J){const H=J!==void 0&&J.minValue!==void 0?J.minValue:-1/0,U=J!==void 0&&J.maxValue!==void 0?J.maxValue:1/0;if(!y(K,J)){if(typeof K!="number"||isNaN(K)||K%1!==0)throw new Error(E(j,"integer"));if(K<H||K>U)throw new Error(`${w(j)} must be within [${H}, ${U}] inclusive, but was: ${K}`)}}function v(j,K,J){if(!y(K,J)&&!(K instanceof r.Timestamp))throw new Error(E(j,"Timestamp"))}function E(j,K){return`${w(j)} is not a valid ${K}.`}function y(j,K){return j===void 0&&K!==void 0&&K.optional===!0}function A(j,K){return`${j} ${K}`+(j===1?"":"s")}function w(j){return typeof j=="string"?`Value for argument "${j}"`:`Element at index ${j}`}function I(j,K,J){if(K.length<J)throw new Error(`Function "${j}()" requires at least ${A(J,"argument")}.`)}function _(j,K,J){if(K.length>J)throw new Error(`Function "${j}()" accepts at most ${A(J,"argument")}.`)}function S(j,K,J,H){if(!y(K,H)){const U=[];for(const P of J){if(P===K)return;U.push(P)}throw new Error(`${w(j)} is invalid. Acceptable values are: ${U.join(", ")}`)}}return validate$1}var hasRequiredLogger;function requireLogger(){if(hasRequiredLogger)return logger$2;hasRequiredLogger=1;/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(logger$2,"__esModule",{value:!0}),logger$2.logger=d,logger$2.setLogFunction=m,logger$2.setLibVersion=c;const t=require$$1$3,e=requireValidate();/*! The Firestore library version */let r;/*! The external function used to emit logs. */let u=null;function d(a,o,s,...h){if(o=o||"#####",u){const v=t.format(s,...h),E=new Date().toISOString();u(`Firestore (${r}) ${E} ${o} [${a}]: `+v)}}function m(a){a!==null&&(0,e.validateFunction)("logger",a),u=a}function c(a){r=a}return logger$2}var hasRequiredBackoff;function requireBackoff(){return hasRequiredBackoff||(hasRequiredBackoff=1,function(t){/*!
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.ExponentialBackoff=t.delayExecution=t.MAX_RETRY_ATTEMPTS=t.DEFAULT_BACKOFF_FACTOR=t.DEFAULT_BACKOFF_MAX_DELAY_MS=t.DEFAULT_BACKOFF_INITIAL_DELAY_MS=void 0,t.setTimeoutHandler=u;const e=requireLogger();/*!
 * The default initial backoff time in milliseconds after an error.
 * Set to 1s according to https://cloud.google.com/apis/design/errors.
 */t.DEFAULT_BACKOFF_INITIAL_DELAY_MS=1e3;/*!
 * The default maximum backoff time in milliseconds.
 */t.DEFAULT_BACKOFF_MAX_DELAY_MS=60*1e3;/*!
 * The default factor to increase the backup by after each failed attempt.
 */t.DEFAULT_BACKOFF_FACTOR=1.5;/*!
 * The default jitter to distribute the backoff attempts by (0 means no
 * randomization, 1.0 means +/-50% randomization).
 */const r=1;/*!
 * The maximum number of retries that will be attempted by backoff
 * before stopping all retry attempts.
 */t.MAX_RETRY_ATTEMPTS=10;/*!
 * The timeout handler used by `ExponentialBackoff` and `BulkWriter`.
 */t.delayExecution=setTimeout;function u(m){t.delayExecution=(c,a)=>(m(c,a),{hasRef:()=>{throw new Error("For tests only. Not Implemented")},ref:()=>{throw new Error("For tests only. Not Implemented")},refresh:()=>{throw new Error("For tests only. Not Implemented")},unref:()=>{throw new Error("For tests only. Not Implemented")},[Symbol.toPrimitive]:()=>{throw new Error("For tests only. Not Implemented")}})}class d{constructor(c={}){this._retryCount=0,this.currentBaseMs=0,this.awaitingBackoffCompletion=!1,this.initialDelayMs=c.initialDelayMs!==void 0?c.initialDelayMs:t.DEFAULT_BACKOFF_INITIAL_DELAY_MS,this.backoffFactor=c.backoffFactor!==void 0?c.backoffFactor:t.DEFAULT_BACKOFF_FACTOR,this.maxDelayMs=c.maxDelayMs!==void 0?c.maxDelayMs:t.DEFAULT_BACKOFF_MAX_DELAY_MS,this.jitterFactor=c.jitterFactor!==void 0?c.jitterFactor:r}reset(){this._retryCount=0,this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndWait(){if(this.awaitingBackoffCompletion)return Promise.reject(new Error("A backoff operation is already in progress."));if(this.retryCount>t.MAX_RETRY_ATTEMPTS)return Promise.reject(new Error("Exceeded maximum number of retries allowed."));const c=this.currentBaseMs+this.jitterDelayMs();return this.currentBaseMs>0&&(0,e.logger)("ExponentialBackoff.backoffAndWait",null,`Backing off for ${c} ms (base delay: ${this.currentBaseMs} ms)`),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs=Math.max(this.currentBaseMs,this.initialDelayMs),this.currentBaseMs=Math.min(this.currentBaseMs,this.maxDelayMs),this._retryCount+=1,new Promise(a=>{this.awaitingBackoffCompletion=!0,(0,t.delayExecution)(()=>{this.awaitingBackoffCompletion=!1,a()},c)})}get retryCount(){return this._retryCount}jitterDelayMs(){return(Math.random()-.5)*this.jitterFactor*this.currentBaseMs}}t.ExponentialBackoff=d}(backoff)),backoff}var bulkWriter={},rateLimiter={},hasRequiredRateLimiter;function requireRateLimiter(){if(hasRequiredRateLimiter)return rateLimiter;hasRequiredRateLimiter=1,Object.defineProperty(rateLimiter,"__esModule",{value:!0}),rateLimiter.RateLimiter=void 0;/*!
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t=require$$1$3,e=requireLogger();class r{constructor(d,m,c,a,o=Date.now()){this.initialCapacity=d,this.multiplier=m,this.multiplierMillis=c,this.maximumCapacity=a,this.startTimeMillis=o,this.availableTokens=d,this.lastRefillTimeMillis=o,this.previousCapacity=d}tryMakeRequest(d,m=Date.now()){return this.refillTokens(m),d<=this.availableTokens?(this.availableTokens-=d,!0):!1}getNextRequestDelayMs(d,m=Date.now()){if(this.refillTokens(m),d<this.availableTokens)return 0;const c=this.calculateCapacity(m);if(c<d)return-1;const a=d-this.availableTokens;return Math.ceil(a*1e3/c)}refillTokens(d){if(d>=this.lastRefillTimeMillis){const m=d-this.lastRefillTimeMillis,c=this.calculateCapacity(d),a=Math.floor(m*c/1e3);a>0&&(this.availableTokens=Math.min(c,this.availableTokens+a),this.lastRefillTimeMillis=d)}else throw new Error("Request time should not be before the last token refill time.")}calculateCapacity(d){t(d>=this.startTimeMillis,"startTime cannot be after currentTime");const m=d-this.startTimeMillis,c=Math.min(Math.floor(Math.pow(this.multiplier,Math.floor(m/this.multiplierMillis))*this.initialCapacity),this.maximumCapacity);return c!==this.previousCapacity&&(0,e.logger)("RateLimiter.calculateCapacity",null,`New request capacity: ${c} operations per second.`),this.previousCapacity=c,c}}return rateLimiter.RateLimiter=r,rateLimiter}var writeBatch={},document$1={},fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var u,d,m;if(Array.isArray(e)){if(u=e.length,u!=r.length)return!1;for(d=u;d--!==0;)if(!t(e[d],r[d]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(m=Object.keys(e),u=m.length,u!==Object.keys(r).length)return!1;for(d=u;d--!==0;)if(!Object.prototype.hasOwnProperty.call(r,m[d]))return!1;for(d=u;d--!==0;){var c=m[d];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r}),fastDeepEqual}var fieldValue={},serializer={},convert={},mapType={},hasRequiredMapType;function requireMapType(){if(hasRequiredMapType)return mapType;hasRequiredMapType=1;/*!
 * Copyright 2024 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return Object.defineProperty(mapType,"__esModule",{value:!0}),mapType.VECTOR_MAP_VECTORS_KEY=mapType.RESERVED_MAP_KEY_VECTOR_VALUE=mapType.RESERVED_MAP_KEY=void 0,mapType.RESERVED_MAP_KEY="__type__",mapType.RESERVED_MAP_KEY_VECTOR_VALUE="__vector__",mapType.VECTOR_MAP_VECTORS_KEY="value",mapType}var hasRequiredConvert;function requireConvert(){if(hasRequiredConvert)return convert;hasRequiredConvert=1;/*!
 * Copyright 2019 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(convert,"__esModule",{value:!0}),convert.timestampFromJson=r,convert.detectValueType=d,convert.detectGoogleProtobufValueType=m,convert.valueFromJson=c,convert.fieldsFromJson=a;const t=requireValidate(),e=requireMapType();/*!
 * @module firestore/convert
 * @private
 * @internal
 *
 * This module contains utility functions to convert
 * `firestore.v1.Documents` from Proto3 JSON to their equivalent
 * representation in Protobuf JS. Protobuf JS is the only encoding supported by
 * this client, and dependencies that use Proto3 JSON (such as the Google Cloud
 * Functions SDK) are supported through this conversion and its usage in
 * {@see Firestore#snapshot_}.
 */function r(o,s){let h={};if(typeof o=="string"){const v=new Date(o),E=Math.floor(v.getTime()/1e3);let y=0;if(o.length>20){const A=o.substring(20,o.length-1),w=9-A.length;y=Number(A)*Math.pow(10,w)}if(isNaN(E)||isNaN(y))throw s=s||"timestampValue",new Error(`Specify a valid ISO 8601 timestamp for "${s}".`);h={seconds:E||void 0,nanos:y||void 0}}else o!==void 0&&((0,t.validateObject)("timestampValue",o),h={seconds:o.seconds||void 0,nanos:o.nanos||void 0});return h}function u(o){return typeof o=="string"?Buffer.from(o,"base64"):o}function d(o){var s;let h;if(o.valueType)h=o.valueType;else{const v=[];if(o.stringValue!==void 0&&v.push("stringValue"),o.booleanValue!==void 0&&v.push("booleanValue"),o.integerValue!==void 0&&v.push("integerValue"),o.doubleValue!==void 0&&v.push("doubleValue"),o.timestampValue!==void 0&&v.push("timestampValue"),o.referenceValue!==void 0&&v.push("referenceValue"),o.arrayValue!==void 0&&v.push("arrayValue"),o.nullValue!==void 0&&v.push("nullValue"),o.mapValue!==void 0&&v.push("mapValue"),o.geoPointValue!==void 0&&v.push("geoPointValue"),o.bytesValue!==void 0&&v.push("bytesValue"),v.length!==1)throw new Error(`Unable to infer type value from '${JSON.stringify(o)}'.`);h=v[0]}if(h==="mapValue"){const v=(s=o.mapValue)===null||s===void 0?void 0:s.fields;v&&Object.keys(v).indexOf(e.RESERVED_MAP_KEY)!==-1&&d(v[e.RESERVED_MAP_KEY])==="stringValue"&&v[e.RESERVED_MAP_KEY].stringValue===e.RESERVED_MAP_KEY_VECTOR_VALUE&&(h="vectorValue")}return h}function m(o){const s=[];if(o.nullValue!==void 0&&s.push("nullValue"),o.numberValue!==void 0&&s.push("numberValue"),o.stringValue!==void 0&&s.push("stringValue"),o.boolValue!==void 0&&s.push("boolValue"),o.structValue!==void 0&&s.push("structValue"),o.listValue!==void 0&&s.push("listValue"),s.length!==1)throw new Error(`Unable to infer type value from '${JSON.stringify(o)}'.`);return s[0]}function c(o){switch(d(o)){case"timestampValue":return{timestampValue:r(o.timestampValue)};case"bytesValue":return{bytesValue:u(o.bytesValue)};case"doubleValue":return{doubleValue:Number(o.doubleValue)};case"arrayValue":{const h=[];if(Array.isArray(o.arrayValue.values))for(const v of o.arrayValue.values)h.push(c(v));return{arrayValue:{values:h}}}case"mapValue":case"vectorValue":{const h={},v=o.mapValue.fields;if(v)for(const E of Object.keys(v))h[E]=c(o.mapValue.fields[E]);return{mapValue:{fields:h}}}default:return o}}function a(o){const s={};for(const h of Object.keys(o))s[h]=c(o[h]);return s}return convert}var geoPoint={},hasRequiredGeoPoint;function requireGeoPoint(){if(hasRequiredGeoPoint)return geoPoint;hasRequiredGeoPoint=1;/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(geoPoint,"__esModule",{value:!0}),geoPoint.GeoPoint=void 0;const t=requireValidate();class e{constructor(u,d){(0,t.validateNumber)("latitude",u,{minValue:-90,maxValue:90}),(0,t.validateNumber)("longitude",d,{minValue:-180,maxValue:180}),this._latitude=u,this._longitude=d}get latitude(){return this._latitude}get longitude(){return this._longitude}isEqual(u){return this===u||u instanceof e&&this.latitude===u.latitude&&this.longitude===u.longitude}toProto(){return{geoPointValue:{latitude:this.latitude,longitude:this.longitude}}}static fromProto(u){return new e(u.latitude||0,u.longitude||0)}}return geoPoint.GeoPoint=e,geoPoint}var path={},order={},hasRequiredOrder;function requireOrder(){if(hasRequiredOrder)return order;hasRequiredOrder=1;/*!
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(order,"__esModule",{value:!0}),order.primitiveComparator=d,order.compareArrays=v,order.compareUtf8Strings=A,order.compare=I;const t=requireConvert(),e=requirePath();/*!
 * The type order as defined by the backend.
 */var r;(function(_){_[_.NULL=0]="NULL",_[_.BOOLEAN=1]="BOOLEAN",_[_.NUMBER=2]="NUMBER",_[_.TIMESTAMP=3]="TIMESTAMP",_[_.STRING=4]="STRING",_[_.BLOB=5]="BLOB",_[_.REF=6]="REF",_[_.GEO_POINT=7]="GEO_POINT",_[_.ARRAY=8]="ARRAY",_[_.VECTOR=9]="VECTOR",_[_.OBJECT=10]="OBJECT"})(r||(r={}));/*!
 * @private
 * @internal
 */function u(_){const S=(0,t.detectValueType)(_);switch(S){case"nullValue":return r.NULL;case"integerValue":return r.NUMBER;case"doubleValue":return r.NUMBER;case"stringValue":return r.STRING;case"booleanValue":return r.BOOLEAN;case"arrayValue":return r.ARRAY;case"timestampValue":return r.TIMESTAMP;case"geoPointValue":return r.GEO_POINT;case"bytesValue":return r.BLOB;case"referenceValue":return r.REF;case"mapValue":return r.OBJECT;case"vectorValue":return r.VECTOR;default:throw new Error("Unexpected value type: "+S)}}/*!
 * @private
 * @internal
 */function d(_,S){return _<S?-1:_>S?1:0}/*!
 * Utility function to compare doubles (using Firestore semantics for NaN).
 * @private
 * @internal
 */function m(_,S){return _<S?-1:_>S?1:_===S?0:isNaN(_)?isNaN(S)?0:-1:1}/*!
 * @private
 * @internal
 */function c(_,S){let j,K;return _.integerValue!==void 0?j=Number(_.integerValue):j=Number(_.doubleValue),S.integerValue!==void 0?K=Number(S.integerValue):K=Number(S.doubleValue),m(j,K)}/*!
 * @private
 * @internal
 */function a(_,S){const j=d(_.seconds||0,S.seconds||0);return j!==0?j:d(_.nanos||0,S.nanos||0)}/*!
 * @private
 * @internal
 */function o(_,S){if(!(_ instanceof Buffer)||!(S instanceof Buffer))throw new Error("Blobs can only be compared if they are Buffers.");return Buffer.compare(_,S)}/*!
 * @private
 * @internal
 */function s(_,S){const j=e.QualifiedResourcePath.fromSlashSeparatedString(_.referenceValue),K=e.QualifiedResourcePath.fromSlashSeparatedString(S.referenceValue);return j.compareTo(K)}/*!
 * @private
 * @internal
 */function h(_,S){return d(_.latitude||0,S.latitude||0)||d(_.longitude||0,S.longitude||0)}/*!
 * @private
 * @internal
 */function v(_,S){for(let j=0;j<_.length&&j<S.length;j++){const K=I(_[j],S[j]);if(K!==0)return K}return d(_.length,S.length)}/*!
 * @private
 * @internal
 */function E(_,S){const j=Object.keys(_),K=Object.keys(S);j.sort(),K.sort();for(let J=0;J<j.length&&J<K.length;J++){const H=A(j[J],K[J]);if(H!==0)return H;const U=j[J],P=I(_[U],S[U]);if(P!==0)return P}return d(j.length,K.length)}/*!
 * @private
 * @internal
 */function y(_,S){var j,K,J,H,U,P;const Z=(J=(K=(j=_?.value)===null||j===void 0?void 0:j.arrayValue)===null||K===void 0?void 0:K.values)!==null&&J!==void 0?J:[],ie=(P=(U=(H=S?.value)===null||H===void 0?void 0:H.arrayValue)===null||U===void 0?void 0:U.values)!==null&&P!==void 0?P:[],ue=d(Z.length,ie.length);return ue!==0?ue:v(Z,ie)}/*!
 * Compare strings in UTF-8 encoded byte order
 * @private
 * @internal
 */function A(_,S){let j=0;for(;j<_.length&&j<S.length;){const K=_.codePointAt(j),J=S.codePointAt(j);if(K!==J){if(K<128&&J<128)return d(K,J);{const H=new TextEncoder,U=H.encode(w(_,j)),P=H.encode(w(S,j)),Z=o(Buffer.from(U),Buffer.from(P));return Z!==0?Z:d(K,J)}}j+=K>65535?2:1}return d(_.length,S.length)}function w(_,S){return _.codePointAt(S)>65535?_.substring(S,S+2):_.substring(S,S+1)}/*!
 * @private
 * @internal
 */function I(_,S){const j=u(_),K=u(S),J=d(j,K);if(J!==0)return J;switch(j){case r.NULL:return 0;case r.BOOLEAN:return d(_.booleanValue,S.booleanValue);case r.STRING:return A(_.stringValue,S.stringValue);case r.NUMBER:return c(_,S);case r.TIMESTAMP:return a(_.timestampValue,S.timestampValue);case r.BLOB:return o(_.bytesValue,S.bytesValue);case r.REF:return s(_,S);case r.GEO_POINT:return h(_.geoPointValue,S.geoPointValue);case r.ARRAY:return v(_.arrayValue.values||[],S.arrayValue.values||[]);case r.OBJECT:return E(_.mapValue.fields||{},S.mapValue.fields||{});case r.VECTOR:return y(_.mapValue.fields||{},S.mapValue.fields||{});default:throw new Error(`Encountered unknown type order: ${j}`)}}return order}var hasRequiredPath;function requirePath(){if(hasRequiredPath)return path;hasRequiredPath=1;/*!
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(path,"__esModule",{value:!0}),path.FieldPath=path.QualifiedResourcePath=path.ResourcePath=path.DEFAULT_DATABASE_ID=void 0,path.validateResourcePath=s,path.validateFieldPath=v;const t=requireOrder(),e=requireUtil(),r=requireValidate();/*!
 * The default database ID for this Firestore client. We do not yet expose the
 * ability to use different databases.
 */path.DEFAULT_DATABASE_ID="(default)";/*!
 * A regular expression to verify an absolute Resource Path in Firestore. It
 * extracts the project ID, the database name and the relative resource path
 * if available.
 *
 * @type {RegExp}
 */const u=/^projects\/([^/]*)\/databases\/([^/]*)(?:\/documents\/)?([\s\S]*)$/;/*!
 * A regular expression to verify whether a field name can be passed to the
 * backend without escaping.
 *
 * @type {RegExp}
 */const d=/^[_a-zA-Z][_a-zA-Z0-9]*$/;/*!
 * A regular expression to verify field paths that are passed to the API as
 * strings. Field paths that do not match this expression have to be provided
 * as a [FieldPath]{@link FieldPath} object.
 *
 * @type {RegExp}
 */const m=/^[^*~/[\]]+$/;class c{constructor(y){this.segments=y}get size(){return this.segments.length}append(y){return y instanceof c?this.construct(this.segments.concat(y.segments)):this.construct(this.segments.concat(this.split(y)))}parent(){return this.segments.length===0?null:this.construct(this.segments.slice(0,this.segments.length-1))}isPrefixOf(y){if(y.segments.length<this.segments.length)return!1;for(let A=0;A<this.segments.length;A++)if(this.segments[A]!==y.segments[A])return!1;return!0}compareTo(y){const A=Math.min(this.segments.length,y.segments.length);for(let w=0;w<A;w++){const I=this.compareSegments(this.segments[w],y.segments[w]);if(I!==0)return I}return(0,t.primitiveComparator)(this.segments.length,y.segments.length)}compareSegments(y,A){const w=this.isNumericId(y),I=this.isNumericId(A);return w&&!I?-1:!w&&I?1:w&&I?this.compareNumbers(this.extractNumericId(y),this.extractNumericId(A)):(0,t.compareUtf8Strings)(y,A)}isNumericId(y){return y.startsWith("__id")&&y.endsWith("__")}extractNumericId(y){return BigInt(y.substring(4,y.length-2))}compareNumbers(y,A){return y<A?-1:y>A?1:0}toArray(){return this.segments.slice()}popLast(){return this.segments.pop(),this.construct(this.segments)}isEqual(y){return this===y||this.compareTo(y)===0}}class a extends c{constructor(...y){super(y)}get isDocument(){return this.segments.length>0&&this.segments.length%2===0}get isCollection(){return this.segments.length%2===1}get id(){return this.segments.length>0?this.segments[this.segments.length-1]:null}get relativeName(){return this.segments.join("/")}construct(y){return new a(...y)}split(y){return y.split("/").filter(A=>A.length>0)}toQualifiedResourcePath(y,A){return new o(y,A,...this.segments)}}path.ResourcePath=a,a.EMPTY=new a;class o extends a{constructor(y,A,...w){super(...w),this.projectId=y,this.databaseId=A}get relativeName(){return this.segments.join("/")}static fromSlashSeparatedString(y){const A=u.exec(y);if(A){const w=A[1],I=A[2],_=A[3];return new o(w,I).append(_)}throw new Error(`Resource name '${y}' is not valid.`)}append(y){return super.append(y)}parent(){return super.parent()}get formattedName(){return["projects",this.projectId,"databases",this.databaseId,"documents",...this.segments].join("/")}construct(y){return new o(this.projectId,this.databaseId,...y)}toQualifiedResourcePath(){return this}compareTo(y){if(y instanceof o){if(this.projectId<y.projectId)return-1;if(this.projectId>y.projectId)return 1;if(this.databaseId<y.databaseId)return-1;if(this.databaseId>y.databaseId)return 1}return super.compareTo(y)}toProto(){return{referenceValue:this.formattedName}}}path.QualifiedResourcePath=o;function s(E,y){if(typeof y!="string"||y==="")throw new Error(`${(0,r.invalidArgumentMessage)(E,"resource path")} Path must be a non-empty string.`);if(y.indexOf("//")>=0)throw new Error(`${(0,r.invalidArgumentMessage)(E,"resource path")} Paths must not contain //.`)}class h extends c{constructor(...y){if(Array.isArray(y[0]))throw new Error("The FieldPath constructor no longer supports an array as its first argument. Please unpack your array and call FieldPath() with individual arguments.");(0,r.validateMinNumberOfArguments)("FieldPath",y,1);for(let A=0;A<y.length;++A)if((0,r.validateString)(A,y[A]),y[A].length===0)throw new Error(`Element at index ${A} should not be an empty string.`);super(y)}static documentId(){return h._DOCUMENT_ID}static fromArgument(y){return y instanceof h?y:new h(...y.split("."))}get formattedName(){return this.segments.map(y=>d.test(y)?y:"`"+y.replace(/\\/g,"\\\\").replace(/`/g,"\\`")+"`").join(".")}toString(){return this.formattedName}split(y){return y.split(".")}construct(y){return new h(...y)}isEqual(y){return super.isEqual(y)}}path.FieldPath=h,h._DOCUMENT_ID=new h("__name__");function v(E,y){if(!(y instanceof h)){if(y===void 0)throw new Error((0,r.invalidArgumentMessage)(E,"field path")+" The path cannot be omitted.");if((0,e.isObject)(y)&&y.constructor.name==="FieldPath")throw new Error((0,r.customObjectMessage)(E,y));if(typeof y!="string")throw new Error(`${(0,r.invalidArgumentMessage)(E,"field path")} Paths can only be specified as strings or via a FieldPath object.`);if(y.indexOf("..")>=0)throw new Error(`${(0,r.invalidArgumentMessage)(E,"field path")} Paths must not contain ".." in them.`);if(y.startsWith(".")||y.endsWith("."))throw new Error(`${(0,r.invalidArgumentMessage)(E,"field path")} Paths must not start or end with ".".`);if(!m.test(y))throw new Error(`${(0,r.invalidArgumentMessage)(E,"field path")} Paths can't be empty and must not contain
    "*~/[]".`)}}return path}var hasRequiredSerializer;function requireSerializer(){if(hasRequiredSerializer)return serializer;hasRequiredSerializer=1;/*!
 * Copyright 2019 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(serializer,"__esModule",{value:!0}),serializer.Serializer=void 0,serializer.validateUserInput=v;const t=requireFieldValue(),e=requireConvert(),r=requireGeoPoint(),u=requireSrc(),d=requirePath(),m=requireTimestamp(),c=requireUtil(),a=requireValidate(),o=requireMapType(),s=20;class h{constructor(A){this.createReference=w=>A.doc(w),this.createInteger=w=>A._settings.useBigInt?BigInt(w):Number(w),this.allowUndefined=!!A._settings.ignoreUndefinedProperties}encodeFields(A){const w={};for(const I of Object.keys(A)){const _=this.encodeValue(A[I]);_&&(w[I]=_)}return w}encodeValue(A){if(A instanceof t.FieldTransform)return null;if(typeof A=="string")return{stringValue:A};if(typeof A=="boolean")return{booleanValue:A};if(typeof A=="number"){const w=A===0&&1/A===-1/0;return Number.isSafeInteger(A)&&!w?{integerValue:A}:{doubleValue:A}}if(typeof A=="bigint")return{integerValue:A.toString()};if(A instanceof Date){const w=m.Timestamp.fromDate(A);return{timestampValue:{seconds:w.seconds,nanos:w.nanoseconds}}}if(E(A)){const w=m.Timestamp.fromDate(A.toDate());return{timestampValue:{seconds:w.seconds,nanos:w.nanoseconds}}}if(A===null)return{nullValue:"NULL_VALUE"};if(A instanceof Buffer||A instanceof Uint8Array)return{bytesValue:A};if(A instanceof t.VectorValue)return A._toProto(this);if((0,c.isObject)(A)){const w=A.toProto;if(typeof w=="function")return w.bind(A)()}if(Array.isArray(A)){const w={arrayValue:{}};if(A.length>0){w.arrayValue.values=[];for(let I=0;I<A.length;++I){const _=this.encodeValue(A[I]);_&&w.arrayValue.values.push(_)}}return w}if(typeof A=="object"&&(0,c.isPlainObject)(A)){const w={mapValue:{}};return!(0,c.isEmpty)(A)&&(w.mapValue.fields=this.encodeFields(A),(0,c.isEmpty)(w.mapValue.fields))?null:w}if(A===void 0&&this.allowUndefined)return null;throw new Error(`Cannot encode value: ${A}`)}encodeVector(A){return{mapValue:{fields:{[o.RESERVED_MAP_KEY]:{stringValue:o.RESERVED_MAP_KEY_VECTOR_VALUE},[o.VECTOR_MAP_VECTORS_KEY]:{arrayValue:{values:A.map(w=>({doubleValue:w}))}}}}}}decodeValue(A){switch((0,e.detectValueType)(A)){case"stringValue":return A.stringValue;case"booleanValue":return A.booleanValue;case"integerValue":return this.createInteger(A.integerValue);case"doubleValue":return A.doubleValue;case"timestampValue":return m.Timestamp.fromProto(A.timestampValue);case"referenceValue":{const I=d.QualifiedResourcePath.fromSlashSeparatedString(A.referenceValue);return this.createReference(I.relativeName)}case"arrayValue":{const I=[];if(Array.isArray(A.arrayValue.values))for(const _ of A.arrayValue.values)I.push(this.decodeValue(_));return I}case"nullValue":return null;case"mapValue":{const I=A.mapValue.fields;if(I){const _={};for(const S of Object.keys(I))_[S]=this.decodeValue(I[S]);return _}else return{}}case"vectorValue":{const I=A.mapValue.fields;return t.VectorValue._fromProto(I[o.VECTOR_MAP_VECTORS_KEY])}case"geoPointValue":return r.GeoPoint.fromProto(A.geoPointValue);case"bytesValue":return A.bytesValue;default:throw new Error("Cannot decode type from Firestore Value: "+JSON.stringify(A))}}decodeGoogleProtobufValue(A){switch((0,e.detectGoogleProtobufValueType)(A)){case"nullValue":return null;case"numberValue":return A.numberValue;case"stringValue":return A.stringValue;case"boolValue":return A.boolValue;case"listValue":return this.decodeGoogleProtobufList(A.listValue);case"structValue":return this.decodeGoogleProtobufStruct(A.structValue);default:throw new Error("Cannot decode type from google.protobuf.Value: "+JSON.stringify(A))}}decodeGoogleProtobufList(A){const w=[];if(A&&A.values&&Array.isArray(A.values))for(const I of A.values)w.push(this.decodeGoogleProtobufValue(I));return w}decodeGoogleProtobufStruct(A){const w={};if(A&&A.fields)for(const I of Object.keys(A.fields))w[I]=this.decodeGoogleProtobufValue(A.fields[I]);return w}}serializer.Serializer=h;function v(y,A,w,I,_,S,j){if(_&&_.size-1>s)throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} Input object is deeper than ${s} levels or contains a cycle.`);S=S||0,j=j||!1;const K=_?` (found in field "${_}")`:"";if(Array.isArray(A))for(let J=0;J<A.length;++J)v(y,A[J],w,I,_?_.append(String(J)):new d.FieldPath(String(J)),S+1,!0);else if((0,c.isPlainObject)(A))for(const J of Object.keys(A))v(y,A[J],w,I,_?_.append(new d.FieldPath(J)):new d.FieldPath(J),S+1,j);else if(A===void 0){if(I.allowUndefined&&S===0)throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} "undefined" values are only ignored inside of objects.`);if(!I.allowUndefined)throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} Cannot use "undefined" as a Firestore value${K}. If you want to ignore undefined values, enable \`ignoreUndefinedProperties\`.`)}else if(!(A instanceof t.VectorValue))if(A instanceof t.DeleteTransform){if(j)throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} ${A.methodName}() cannot be used inside of an array${K}.`);if(I.allowDeletes==="none")throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} ${A.methodName}() must appear at the top-level and can only be used in update() or set() with {merge:true}${K}.`);if(I.allowDeletes==="root"&&S!==0){if(!(S===1&&_?.size===1))throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} ${A.methodName}() must appear at the top-level and can only be used in update() or set() with {merge:true}${K}.`)}}else if(A instanceof t.FieldTransform){if(j)throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} ${A.methodName}() cannot be used inside of an array${K}.`);if(!I.allowTransforms)throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} ${A.methodName}() can only be used in set(), create() or update()${K}.`)}else{if(A instanceof d.FieldPath)throw new Error(`${(0,a.invalidArgumentMessage)(y,w)} Cannot use object of type "FieldPath" as a Firestore value${K}.`);if(!(A instanceof u.DocumentReference)){if(!(A instanceof r.GeoPoint)){if(!(A instanceof m.Timestamp||A instanceof Date)){if(!E(A)){if(!(A instanceof Buffer||A instanceof Uint8Array)){if(A!==null){if(typeof A=="object")throw new Error((0,a.customObjectMessage)(y,A,_))}}}}}}}}function E(y){return typeof y=="object"&&y!==null&&y.constructor&&y.constructor.name==="Moment"&&typeof y.toDate=="function"}return serializer}var hasRequiredFieldValue;function requireFieldValue(){if(hasRequiredFieldValue)return fieldValue;hasRequiredFieldValue=1;/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(fieldValue,"__esModule",{value:!0}),fieldValue.DeleteTransform=fieldValue.FieldTransform=fieldValue.FieldValue=fieldValue.VectorValue=void 0;const t=requireFastDeepEqual(),e=requireSerializer(),r=requireUtil(),u=requireValidate();class d{constructor(A){this._values=(A||[]).map(w=>w)}toArray(){return this._values.map(A=>A)}_toProto(A){return A.encodeVector(this._values)}static _fromProto(A){var w,I;const _=(I=(w=A.arrayValue)===null||w===void 0?void 0:w.values)===null||I===void 0?void 0:I.map(S=>S.doubleValue);return new d(_)}isEqual(A){return(0,r.isPrimitiveArrayEqual)(this._values,A._values)}}fieldValue.VectorValue=d;class m{constructor(){}static vector(A){return new d(A)}static delete(){return a.DELETE_SENTINEL}static serverTimestamp(){return o.SERVER_TIMESTAMP_SENTINEL}static increment(A){return(0,u.validateMinNumberOfArguments)("FieldValue.increment",arguments,1),new s(A)}static arrayUnion(...A){return(0,u.validateMinNumberOfArguments)("FieldValue.arrayUnion",A,1),new h(A)}static arrayRemove(...A){return(0,u.validateMinNumberOfArguments)("FieldValue.arrayRemove",A,1),new v(A)}isEqual(A){return this===A}}fieldValue.FieldValue=m;class c extends m{}fieldValue.FieldTransform=c;class a extends c{constructor(){super()}get includeInDocumentMask(){return!0}get includeInDocumentTransform(){return!1}get methodName(){return"FieldValue.delete"}validate(){}toProto(){throw new Error("FieldValue.delete() should not be included in a FieldTransform")}}fieldValue.DeleteTransform=a,a.DELETE_SENTINEL=new a;class o extends c{constructor(){super()}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.serverTimestamp"}validate(){}toProto(A,w){return{fieldPath:w.formattedName,setToServerValue:"REQUEST_TIME"}}}o.SERVER_TIMESTAMP_SENTINEL=new o;class s extends c{constructor(A){super(),this.operand=A}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.increment"}validate(){(0,u.validateNumber)("FieldValue.increment()",this.operand)}toProto(A,w){const I=A.encodeValue(this.operand);return{fieldPath:w.formattedName,increment:I}}isEqual(A){return this===A||A instanceof s&&this.operand===A.operand}}class h extends c{constructor(A){super(),this.elements=A}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.arrayUnion"}validate(A){for(let w=0;w<this.elements.length;++w)E(w,this.elements[w],A)}toProto(A,w){const I=A.encodeValue(this.elements).arrayValue;return{fieldPath:w.formattedName,appendMissingElements:I}}isEqual(A){return this===A||A instanceof h&&t(this.elements,A.elements)}}class v extends c{constructor(A){super(),this.elements=A}get includeInDocumentMask(){return!1}get includeInDocumentTransform(){return!0}get methodName(){return"FieldValue.arrayRemove"}validate(A){for(let w=0;w<this.elements.length;++w)E(w,this.elements[w],A)}toProto(A,w){const I=A.encodeValue(this.elements).arrayValue;return{fieldPath:w.formattedName,removeAllFromArray:I}}isEqual(A){return this===A||A instanceof v&&t(this.elements,A.elements)}}function E(y,A,w){if(Array.isArray(A))throw new Error(`${(0,u.invalidArgumentMessage)(y,"array element")} Nested arrays are not supported.`);(0,e.validateUserInput)(y,A,"array element",{allowDeletes:"none",allowTransforms:!1,allowUndefined:w},void 0,0,!0)}return fieldValue}var documentReference={},types$1={},hasRequiredTypes$1;function requireTypes$1(){if(hasRequiredTypes$1)return types$1;hasRequiredTypes$1=1;/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(types$1,"__esModule",{value:!0}),types$1.defaultConverter=e;const t={toFirestore(r){return r},fromFirestore(r){return r.data()}};function e(){return t}return types$1}var collectionReference={},query={},queryUtil={},documentChange={},hasRequiredDocumentChange;function requireDocumentChange(){if(hasRequiredDocumentChange)return documentChange;hasRequiredDocumentChange=1;/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(documentChange,"__esModule",{value:!0}),documentChange.DocumentChange=void 0;class t{constructor(r,u,d,m){this._type=r,this._document=u,this._oldIndex=d,this._newIndex=m}get type(){return this._type}get doc(){return this._document}get oldIndex(){return this._oldIndex}get newIndex(){return this._newIndex}isEqual(r){return this===r?!0:r instanceof t&&this._type===r._type&&this._oldIndex===r._oldIndex&&this._newIndex===r._newIndex&&this._document.isEqual(r._document)}}return documentChange.DocumentChange=t,documentChange}var queryProfile={},hasRequiredQueryProfile;function requireQueryProfile(){if(hasRequiredQueryProfile)return queryProfile;hasRequiredQueryProfile=1;/*!
 * Copyright 2024 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(queryProfile,"__esModule",{value:!0}),queryProfile.ExplainResults=queryProfile.ExplainMetrics=queryProfile.ExecutionStats=queryProfile.PlanSummary=void 0;class t{constructor(m){this.indexesUsed=m}static _fromProto(m,c){const a=[];if(m&&m.indexesUsed)for(const o of m.indexesUsed)a.push(c.decodeGoogleProtobufStruct(o));return new t(a)}}queryProfile.PlanSummary=t;class e{constructor(m,c,a,o){this.resultsReturned=m,this.executionDuration=c,this.readOperations=a,this.debugStats=o}static _fromProto(m,c){var a,o;return m?new e(Number(m.resultsReturned),{seconds:Number((a=m.executionDuration)===null||a===void 0?void 0:a.seconds),nanoseconds:Number((o=m.executionDuration)===null||o===void 0?void 0:o.nanos)},Number(m.readOperations),c.decodeGoogleProtobufStruct(m.debugStats)):null}}queryProfile.ExecutionStats=e;class r{constructor(m,c){this.planSummary=m,this.executionStats=c}static _fromProto(m,c){return new r(t._fromProto(m.planSummary,c),e._fromProto(m.executionStats,c))}}queryProfile.ExplainMetrics=r;class u{constructor(m,c){this.metrics=m,this.snapshot=c}}return queryProfile.ExplainResults=u,queryProfile}var vectorQuery={},vectorQuerySnapshot={},hasRequiredVectorQuerySnapshot;function requireVectorQuerySnapshot(){if(hasRequiredVectorQuerySnapshot)return vectorQuerySnapshot;hasRequiredVectorQuerySnapshot=1,Object.defineProperty(vectorQuerySnapshot,"__esModule",{value:!0}),vectorQuerySnapshot.VectorQuerySnapshot=void 0;const t=requireValidate(),e=requireUtil();class r{constructor(d,m,c,a,o){this._query=d,this._readTime=m,this._size=c,this._materializedDocs=null,this._materializedChanges=null,this._docs=null,this._changes=null,this._docs=a,this._changes=o}get query(){return this._query}get docs(){return this._materializedDocs?this._materializedDocs:(this._materializedDocs=this._docs(),this._docs=null,this._materializedDocs)}get empty(){return this._size===0}get size(){return this._size}get readTime(){return this._readTime}docChanges(){return this._materializedChanges?this._materializedChanges:(this._materializedChanges=this._changes(),this._changes=null,this._materializedChanges)}forEach(d,m){(0,t.validateFunction)("callback",d);for(const c of this.docs)d.call(m,c)}isEqual(d){return this===d?!0:!(d instanceof r)||this._size!==d._size||!this._query.isEqual(d._query)?!1:this._materializedDocs&&!this._materializedChanges?(0,e.isArrayEqual)(this.docs,d.docs)&&(0,e.isArrayEqual)(this.docChanges(),d.docChanges()):(0,e.isArrayEqual)(this.docChanges(),d.docChanges())&&(0,e.isArrayEqual)(this.docs,d.docs)}}return vectorQuerySnapshot.VectorQuerySnapshot=r,vectorQuerySnapshot}var hasRequiredVectorQuery;function requireVectorQuery(){if(hasRequiredVectorQuery)return vectorQuery;hasRequiredVectorQuery=1,Object.defineProperty(vectorQuery,"__esModule",{value:!0}),vectorQuery.VectorQuery=void 0;const t=requireFieldValue(),e=requirePath(),r=requireUtil(),u=requireQueryUtil(),d=requireVectorQuerySnapshot(),m=requireQueryProfile();class c{constructor(o,s){this._query=o,this._options=s,this._queryUtil=new u.QueryUtil(o._firestore,o._queryOptions,o._serializer)}get query(){return this._query}get _rawVectorField(){return typeof this._options.vectorField=="string"?this._options.vectorField:this._options.vectorField.toString()}get _rawDistanceResultField(){if(!(typeof this._options.distanceResultField>"u"))return typeof this._options.distanceResultField=="string"?this._options.distanceResultField:this._options.distanceResultField.toString()}get _rawQueryVector(){return Array.isArray(this._options.queryVector)?this._options.queryVector:this._options.queryVector.toArray()}async explain(o){o===void 0&&(o={});const{result:s,explainMetrics:h}=await this._getResponse(o);if(!h)throw new Error("No explain results");return new m.ExplainResults(h,s||null)}async get(){const{result:o}=await this._getResponse();if(!o)throw new Error("No VectorQuerySnapshot result");return o}_getResponse(o){return this._queryUtil._getResponse(this,void 0,!1,o)}_stream(o){return this._queryUtil._stream(this,o,!1)}toProto(o,s){var h,v,E;const y=this._query.toProto(o),A=Array.isArray(this._options.queryVector)?new t.VectorValue(this._options.queryVector):this._options.queryVector;return y.structuredQuery.findNearest={limit:{value:this._options.limit},distanceMeasure:this._options.distanceMeasure,vectorField:{fieldPath:e.FieldPath.fromArgument(this._options.vectorField).formattedName},queryVector:A._toProto(this._query._serializer),distanceResultField:!((h=this._options)===null||h===void 0)&&h.distanceResultField?e.FieldPath.fromArgument(this._options.distanceResultField).formattedName:void 0,distanceThreshold:!((v=this._options)===null||v===void 0)&&v.distanceThreshold?{value:(E=this._options)===null||E===void 0?void 0:E.distanceThreshold}:void 0},s&&(y.explainOptions=s),y}_createSnapshot(o,s,h,v){return new d.VectorQuerySnapshot(this,o,s,h,v)}startAfter(...o){throw new Error("Unimplemented: Vector query does not support cursors yet.")}isEqual(o){return this===o?!0:!(o instanceof c)||!this.query.isEqual(o.query)?!1:this._rawVectorField===o._rawVectorField&&(0,r.isPrimitiveArrayEqual)(this._rawQueryVector,o._rawQueryVector)&&this._options.limit===o._options.limit&&this._options.distanceMeasure===o._options.distanceMeasure&&this._options.distanceThreshold===o._options.distanceThreshold&&this._rawDistanceResultField===o._rawDistanceResultField}}return vectorQuery.VectorQuery=c,vectorQuery}var types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.LimitType=void 0;/*!
 * Denotes whether a provided limit is applied to the beginning or the end of
 * the result set.
 */var t;return function(e){e[e.First=0]="First",e[e.Last=1]="Last"}(t||(types.LimitType=t={})),types}var constants={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.NOOP_MESSAGE=constants.comparisonOperators=constants.directionOperators=void 0,constants.directionOperators={asc:"ASCENDING",desc:"DESCENDING"},constants.comparisonOperators={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},constants.NOOP_MESSAGE=Symbol("a noop message")),constants}var traceUtil={},hasRequiredTraceUtil;function requireTraceUtil(){return hasRequiredTraceUtil||(hasRequiredTraceUtil=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ATTRIBUTE_KEY_ATTEMPTS_REMAINING=t.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED=t.ATTRIBUTE_KEY_TRANSACTION_TYPE=t.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR=t.ATTRIBUTE_KEY_NUM_RESPONSES=t.ATTRIBUTE_KEY_IS_TRANSACTIONAL=t.ATTRIBUTE_KEY_DOC_COUNT=t.ATTRIBUTE_SETTINGS_PREFIX=t.ATTRIBUTE_SERVICE_PREFIX=t.SPAN_NAME_BULK_WRITER_COMMIT=t.SPAN_NAME_PARTITION_QUERY=t.SPAN_NAME_BATCH_COMMIT=t.SPAN_NAME_TRANSACTION_COMMIT=t.SPAN_NAME_TRANSACTION_ROLLBACK=t.SPAN_NAME_TRANSACTION_GET_DOCUMENTS=t.SPAN_NAME_TRANSACTION_GET_DOCUMENT=t.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY=t.SPAN_NAME_TRANSACTION_GET_QUERY=t.SPAN_NAME_TRANSACTION_RUN=t.SPAN_NAME_AGGREGATION_QUERY_GET=t.SPAN_NAME_QUERY_GET=t.SPAN_NAME_COL_REF_LIST_DOCUMENTS=t.SPAN_NAME_COL_REF_ADD=t.SPAN_NAME_DOC_REF_LIST_COLLECTIONS=t.SPAN_NAME_DOC_REF_GET=t.SPAN_NAME_DOC_REF_DELETE=t.SPAN_NAME_DOC_REF_UPDATE=t.SPAN_NAME_DOC_REF_SET=t.SPAN_NAME_DOC_REF_CREATE=t.SPAN_NAME_RUN_AGGREGATION_QUERY=t.SPAN_NAME_RUN_QUERY=t.SPAN_NAME_BATCH_GET_DOCUMENTS=t.SERVICE=void 0,t.SERVICE="google.firestore.v1.Firestore/",t.SPAN_NAME_BATCH_GET_DOCUMENTS="BatchGetDocuments",t.SPAN_NAME_RUN_QUERY="RunQuery",t.SPAN_NAME_RUN_AGGREGATION_QUERY="RunAggregationQuery",t.SPAN_NAME_DOC_REF_CREATE="DocumentReference.Create",t.SPAN_NAME_DOC_REF_SET="DocumentReference.Set",t.SPAN_NAME_DOC_REF_UPDATE="DocumentReference.Update",t.SPAN_NAME_DOC_REF_DELETE="DocumentReference.Delete",t.SPAN_NAME_DOC_REF_GET="DocumentReference.Get",t.SPAN_NAME_DOC_REF_LIST_COLLECTIONS="DocumentReference.ListCollections",t.SPAN_NAME_COL_REF_ADD="CollectionReference.Add",t.SPAN_NAME_COL_REF_LIST_DOCUMENTS="CollectionReference.ListDocuments",t.SPAN_NAME_QUERY_GET="Query.Get",t.SPAN_NAME_AGGREGATION_QUERY_GET="AggregationQuery.Get",t.SPAN_NAME_TRANSACTION_RUN="Transaction.Run",t.SPAN_NAME_TRANSACTION_GET_QUERY="Transaction.Get.Query",t.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY="Transaction.Get.AggregationQuery",t.SPAN_NAME_TRANSACTION_GET_DOCUMENT="Transaction.Get.Document",t.SPAN_NAME_TRANSACTION_GET_DOCUMENTS="Transaction.Get.Documents",t.SPAN_NAME_TRANSACTION_ROLLBACK="Transaction.Rollback",t.SPAN_NAME_TRANSACTION_COMMIT="Transaction.Commit",t.SPAN_NAME_BATCH_COMMIT="Batch.Commit",t.SPAN_NAME_PARTITION_QUERY="PartitionQuery",t.SPAN_NAME_BULK_WRITER_COMMIT="BulkWriter.Commit",t.ATTRIBUTE_SERVICE_PREFIX="gcp.firestore",t.ATTRIBUTE_SETTINGS_PREFIX=`${t.ATTRIBUTE_SERVICE_PREFIX}.settings`,t.ATTRIBUTE_KEY_DOC_COUNT="doc_count",t.ATTRIBUTE_KEY_IS_TRANSACTIONAL="transactional",t.ATTRIBUTE_KEY_NUM_RESPONSES="response_count",t.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR="retry_query_with_cursor",t.ATTRIBUTE_KEY_TRANSACTION_TYPE="transaction_type",t.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED="attempts_allowed",t.ATTRIBUTE_KEY_ATTEMPTS_REMAINING="attempts_remaining"}(traceUtil)),traceUtil}var hasRequiredQueryUtil;function requireQueryUtil(){if(hasRequiredQueryUtil)return queryUtil;hasRequiredQueryUtil=1,Object.defineProperty(queryUtil,"__esModule",{value:!0}),queryUtil.QueryUtil=void 0;const t=require$$1$3,e=requireTimestamp(),r=requireDocument(),u=requireUtil(),d=requireDocumentChange(),m=requireQueryProfile(),c=requireLogger(),a=requireVectorQuery(),o=requireTypes(),s=requireConstants(),h=requireTraceUtil();class v{constructor(y,A,w){this._firestore=y,this._queryOptions=A,this._serializer=w}_getResponse(y,A,w=!0,I){const _=Error().stack;return new Promise((S,j)=>{const K=[],J={};this._stream(y,A,w,I).on("error",H=>{j((0,u.wrapError)(H,_))}).on("data",H=>{H.transaction&&(J.transaction=H.transaction),H.readTime&&(J.readTime=H.readTime),H.explainMetrics&&(J.explainMetrics=H.explainMetrics),H.document&&K.push(H.document)}).on("end",()=>{this._queryOptions.limitType===o.LimitType.Last&&K.reverse();const H=J.readTime?y._createSnapshot(J.readTime,K.length,()=>K,()=>{const U=[];for(let P=0;P<K.length;++P)U.push(new d.DocumentChange("added",K[P],-1,P));return U}):void 0;S({transaction:J.transaction,explainMetrics:J.explainMetrics,result:H})})})}_isPermanentRpcError(y,A){return(0,u.isPermanentRpcError)(y,A)}_hasRetryTimedOut(y,A){const w=(0,u.getTotalTimeout)(y);return w===0?!1:Date.now()-A>=w}stream(y){if(this._queryOptions.limitType===o.LimitType.Last)throw new Error("Query results for queries that include limitToLast() constraints cannot be streamed. Use Query.get() instead.");const A=this._stream(y),w=new t.Transform({objectMode:!0,transform(I,_,S){S(void 0,I.document)}});return A.pipe(w),A.on("error",I=>w.destroy(I)),w}_stream(y,A,w=!0,I){const _=(0,u.requestTag)(),S=Date.now(),j=I!==void 0,K="runQuery";let J=0,H=null,U;const P=new t.Transform({objectMode:!0,transform:(Z,ie,ue)=>{var le;if(Z===s.NOOP_MESSAGE){ue(void 0);return}const ne={};if(!((le=Z.transaction)===null||le===void 0)&&le.length&&(ne.transaction=Z.transaction),Z.readTime&&(ne.readTime=e.Timestamp.fromProto(Z.readTime)),Z.document){const ye=this._firestore.snapshot_(Z.document,Z.readTime),fe=new r.DocumentSnapshotBuilder(ye.ref.withConverter(this._queryOptions.converter));fe.fieldsProto=ye._fieldsProto,fe.readTime=ye.readTime,fe.createTime=ye.createTime,fe.updateTime=ye.updateTime,H=fe.build(),ne.document=H}Z.explainMetrics&&(ne.explainMetrics=m.ExplainMetrics._fromProto(Z.explainMetrics,this._serializer)),++J,ue(void 0,ne),Z.done&&((0,c.logger)("QueryUtil._stream",_,"Trigger Logical Termination."),this._firestore._traceUtil.currentSpan().addEvent(`Firestore.${K}: Received RunQueryResponse.Done.`),U.unpipe(P),U.resume(),U.end(),P.end())}});return this._firestore.initializeIfNeeded(_).then(async()=>{let Z=y.toProto(A,I),ie=!1,ue;do ue=new u.Deferred,this._firestore._traceUtil.currentSpan().addEvent(h.SPAN_NAME_RUN_QUERY,{[h.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!!Z.transaction,[h.ATTRIBUTE_KEY_IS_RETRY_WITH_CURSOR]:ie}),U=await this._firestore.requestStream(K,!1,Z,_),U.on("error",le=>{U.unpipe(P),!j&&!A&&!this._isPermanentRpcError(le,K)?((0,c.logger)("QueryUtil._stream",_,"Query failed with retryable stream error:",le),this._firestore._traceUtil.currentSpan().addEvent(`${h.SPAN_NAME_RUN_QUERY}: Retryable Error.`,{"error.message":le.message}),P.write(s.NOOP_MESSAGE,()=>{if(this._hasRetryTimedOut(K,S))(0,c.logger)("QueryUtil._stream",_,"Query failed with retryable stream error but the total retry timeout has exceeded."),P.destroy(le),ue.resolve(!1);else if(H&&w){if(y instanceof a.VectorQuery)throw new Error("Unimplemented: Vector query does not support cursors yet.");(0,c.logger)("Query._stream",_,"Query failed with retryable stream error and progress was made receiving documents, so the stream is being retried."),ie=!0;let ne;if(!this._queryOptions.limit)ne=y;else{const ye=this._queryOptions.limit-J;this._queryOptions.limitType===void 0||this._queryOptions.limitType===o.LimitType.First?ne=y.limit(ye):ne=y.limitToLast(ye)}this._queryOptions.requireConsistency?Z=ne.startAfter(H).toProto(H.readTime):Z=ne.startAfter(H).toProto(),H=null,ue.resolve(!0)}else(0,c.logger)("QueryUtil._stream",_,`Query failed with retryable stream error however either retryWithCursor="${w}", or no progress was made receiving documents, so the stream is being closed.`),P.destroy(le),ue.resolve(!1)})):((0,c.logger)("QueryUtil._stream",_,"Query failed with stream error:",le),this._firestore._traceUtil.currentSpan().addEvent(`${h.SPAN_NAME_RUN_QUERY}: Error.`,{"error.message":le.message}),P.destroy(le),ue.resolve(!1))}),U.on("end",()=>{ue.resolve(!1)}),U.resume(),U.pipe(P);while(await ue.promise)}).catch(Z=>P.destroy(Z)),P}}return queryUtil.QueryUtil=v,queryUtil}var fieldOrder={},hasRequiredFieldOrder;function requireFieldOrder(){if(hasRequiredFieldOrder)return fieldOrder;hasRequiredFieldOrder=1,Object.defineProperty(fieldOrder,"__esModule",{value:!0}),fieldOrder.FieldOrder=void 0;class t{constructor(r,u="ASCENDING"){this.field=r,this.direction=u}toProto(){return{field:{fieldPath:this.field.formattedName},direction:this.direction}}}return fieldOrder.FieldOrder=t,fieldOrder}var fieldFilterInternal={},filterInternal={},hasRequiredFilterInternal;function requireFilterInternal(){if(hasRequiredFilterInternal)return filterInternal;hasRequiredFilterInternal=1,Object.defineProperty(filterInternal,"__esModule",{value:!0}),filterInternal.FilterInternal=void 0;class t{}return filterInternal.FilterInternal=t,filterInternal}var hasRequiredFieldFilterInternal;function requireFieldFilterInternal(){if(hasRequiredFieldFilterInternal)return fieldFilterInternal;hasRequiredFieldFilterInternal=1,Object.defineProperty(fieldFilterInternal,"__esModule",{value:!0}),fieldFilterInternal.FieldFilterInternal=void 0;const t=requireFastDeepEqual(),e=requireFilterInternal();class r extends e.FilterInternal{getFlattenedFilters(){return[this]}getFilters(){return[this]}constructor(d,m,c,a){super(),this.serializer=d,this.field=m,this.op=c,this.value=a}isInequalityFilter(){switch(this.op){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":case"NOT_EQUAL":case"NOT_IN":return!0;default:return!1}}toProto(){return typeof this.value=="number"&&isNaN(this.value)?{unaryFilter:{field:{fieldPath:this.field.formattedName},op:this.op==="EQUAL"?"IS_NAN":"IS_NOT_NAN"}}:this.value===null?{unaryFilter:{field:{fieldPath:this.field.formattedName},op:this.op==="EQUAL"?"IS_NULL":"IS_NOT_NULL"}}:{fieldFilter:{field:{fieldPath:this.field.formattedName},op:this.op,value:this.serializer.encodeValue(this.value)}}}isEqual(d){return d instanceof r&&this.field.isEqual(d.field)&&this.op===d.op&&t(this.value,d.value)}}return fieldFilterInternal.FieldFilterInternal=r,fieldFilterInternal}var compositeFilterInternal={},hasRequiredCompositeFilterInternal;function requireCompositeFilterInternal(){if(hasRequiredCompositeFilterInternal)return compositeFilterInternal;hasRequiredCompositeFilterInternal=1,Object.defineProperty(compositeFilterInternal,"__esModule",{value:!0}),compositeFilterInternal.CompositeFilterInternal=void 0;const t=requireFilterInternal();class e extends t.FilterInternal{constructor(u,d){super(),this.filters=u,this.operator=d,this.memoizedFlattenedFilters=null}getFilters(){return this.filters}isConjunction(){return this.operator==="AND"}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((u,d)=>u.concat(d.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}toProto(){return this.filters.length===1?this.filters[0].toProto():{compositeFilter:{op:this.operator,filters:this.filters.map(d=>d.toProto())}}}isEqual(u){if(u instanceof e){const d=u.getFilters();return this.operator===u.operator&&this.getFilters().length===u.getFilters().length&&this.getFilters().every((m,c)=>m.isEqual(d[c]))}else return!1}}return compositeFilterInternal.CompositeFilterInternal=e,compositeFilterInternal}var querySnapshot={},hasRequiredQuerySnapshot;function requireQuerySnapshot(){if(hasRequiredQuerySnapshot)return querySnapshot;hasRequiredQuerySnapshot=1,Object.defineProperty(querySnapshot,"__esModule",{value:!0}),querySnapshot.QuerySnapshot=void 0;const t=requireValidate(),e=requireUtil();class r{constructor(d,m,c,a,o){this._query=d,this._readTime=m,this._size=c,this._materializedDocs=null,this._materializedChanges=null,this._docs=null,this._changes=null,this._docs=a,this._changes=o}get query(){return this._query}get docs(){return this._materializedDocs?this._materializedDocs:(this._materializedDocs=this._docs(),this._docs=null,this._materializedDocs)}get empty(){return this._size===0}get size(){return this._size}get readTime(){return this._readTime}docChanges(){return this._materializedChanges?this._materializedChanges:(this._materializedChanges=this._changes(),this._changes=null,this._materializedChanges)}forEach(d,m){(0,t.validateFunction)("callback",d);for(const c of this.docs)d.call(m,c)}isEqual(d){return this===d?!0:!(d instanceof r)||this._size!==d._size||!this._query.isEqual(d._query)?!1:this._materializedDocs&&!this._materializedChanges?(0,e.isArrayEqual)(this.docs,d.docs)&&(0,e.isArrayEqual)(this.docChanges(),d.docChanges()):(0,e.isArrayEqual)(this.docChanges(),d.docChanges())&&(0,e.isArrayEqual)(this.docs,d.docs)}}return querySnapshot.QuerySnapshot=r,querySnapshot}var filter={},hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter;hasRequiredFilter=1;/*!
 * Copyright 2023 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(filter,"__esModule",{value:!0}),filter.CompositeFilter=filter.UnaryFilter=filter.Filter=void 0;class t{static where(d,m,c){return new e(d,m,c)}static or(...d){return new r(d,"OR")}static and(...d){return new r(d,"AND")}}filter.Filter=t;class e extends t{constructor(d,m,c){super(),this.field=d,this.operator=m,this.value=c}_getField(){return this.field}_getOperator(){return this.operator}_getValue(){return this.value}}filter.UnaryFilter=e;class r extends t{constructor(d,m){super(),this.filters=d,this.operator=m}_getFilters(){return this.filters}_getOperator(){return this.operator}}return filter.CompositeFilter=r,filter}var helpers={},hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1,Object.defineProperty(helpers,"__esModule",{value:!0}),helpers.validateQueryOrder=d,helpers.validateQueryOperator=m,helpers.validateDocumentReference=c,helpers.validateQueryValue=a,helpers.coalesce=o;const t=requireValidate(),e=requireSerializer(),r=requireDocumentReference(),u=requireConstants();function d(s,h){return h=typeof h=="string"?h.toLowerCase():h,(0,t.validateEnumValue)(s,h,Object.keys(u.directionOperators),{optional:!0}),h}function m(s,h,v){if(h==="="&&(h="=="),(0,t.validateEnumValue)(s,h,Object.keys(u.comparisonOperators)),typeof v=="number"&&isNaN(v)&&h!=="=="&&h!=="!=")throw new Error("Invalid query. You can only perform '==' and '!=' comparisons on NaN.");if(v===null&&h!=="=="&&h!=="!=")throw new Error("Invalid query. You can only perform '==' and '!=' comparisons on Null.");return h}function c(s,h){if(!(h instanceof r.DocumentReference))throw new Error((0,t.invalidArgumentMessage)(s,"DocumentReference"));return h}function a(s,h,v){(0,e.validateUserInput)(s,h,"query constraint",{allowDeletes:"none",allowTransforms:!1,allowUndefined:v})}function o(...s){return s.find(h=>h!==void 0)}return helpers}var aggregateQuery={},aggregate={},hasRequiredAggregate;function requireAggregate(){if(hasRequiredAggregate)return aggregate;hasRequiredAggregate=1,Object.defineProperty(aggregate,"__esModule",{value:!0}),aggregate.AggregateField=aggregate.Aggregate=void 0;const t=requirePath(),e=require$$1$3;class r{constructor(m,c,a){this.alias=m,this.aggregateType=c,this.fieldPath=a}toProto(){const m={};if(this.aggregateType==="count")m.count={};else if(this.aggregateType==="sum")e(this.fieldPath!==void 0,"Missing field path for sum aggregation."),m.sum={field:{fieldPath:t.FieldPath.fromArgument(this.fieldPath).formattedName}};else if(this.aggregateType==="avg")e(this.fieldPath!==void 0,"Missing field path for average aggregation."),m.avg={field:{fieldPath:t.FieldPath.fromArgument(this.fieldPath).formattedName}};else throw new Error(`Aggregate type ${this.aggregateType} unimplemented.`);return m.alias=this.alias,m}}aggregate.Aggregate=r;class u{constructor(m,c){this.aggregateType=m,this.type="AggregateField",this._field=c}isEqual(m){return m instanceof u&&this.aggregateType===m.aggregateType&&(this._field===void 0&&m._field===void 0||this._field!==void 0&&m._field!==void 0&&t.FieldPath.fromArgument(this._field).isEqual(t.FieldPath.fromArgument(m._field)))}static count(){return new u("count")}static average(m){return new u("avg",m)}static sum(m){return new u("sum",m)}}return aggregate.AggregateField=u,aggregate}var aggregateQuerySnapshot={},hasRequiredAggregateQuerySnapshot;function requireAggregateQuerySnapshot(){if(hasRequiredAggregateQuerySnapshot)return aggregateQuerySnapshot;hasRequiredAggregateQuerySnapshot=1,Object.defineProperty(aggregateQuerySnapshot,"__esModule",{value:!0}),aggregateQuerySnapshot.AggregateQuerySnapshot=void 0;const t=requireFastDeepEqual();class e{constructor(u,d,m){this._query=u,this._readTime=d,this._data=m}get query(){return this._query}get readTime(){return this._readTime}data(){return this._data}isEqual(u){return this===u?!0:!(u instanceof e)||!this.query.isEqual(u.query)?!1:t(this._data,u._data)}}return aggregateQuerySnapshot.AggregateQuerySnapshot=e,aggregateQuerySnapshot}var hasRequiredAggregateQuery;function requireAggregateQuery(){if(hasRequiredAggregateQuery)return aggregateQuery;hasRequiredAggregateQuery=1,Object.defineProperty(aggregateQuery,"__esModule",{value:!0}),aggregateQuery.AggregateQuery=void 0;const t=require$$1$3,e=requireFastDeepEqual(),r=requireAggregate(),u=requireTimestamp(),d=requireUtil(),m=requireQueryProfile(),c=requireLogger(),a=requireAggregateQuerySnapshot(),o=require$$1$3,s=requireTraceUtil();class h{constructor(E,y){this._query=E,this._aggregates=y,this.clientAliasToServerAliasMap={},this.serverAliasToClientAliasMap={};let A=0;for(const w in this._aggregates)if(Object.prototype.hasOwnProperty.call(this._aggregates,w)){const I=`aggregate_${A++}`;this.clientAliasToServerAliasMap[w]=I,this.serverAliasToClientAliasMap[I]=w}}get query(){return this._query}async get(){return this._query._firestore._traceUtil.startActiveSpan(s.SPAN_NAME_AGGREGATION_QUERY_GET,async()=>{const{result:E}=await this._get();return E})}async _get(E){const y=await this._getResponse(E);if(!y.result)throw new Error("No AggregateQuery results");return y}_getResponse(E,y){const A=Error().stack;return new Promise((w,I)=>{const _={},S=this._stream(E,y);S.on("error",j=>{I((0,d.wrapError)(j,A))}),S.on("data",j=>{j.transaction&&(_.transaction=j.transaction),j.explainMetrics&&(_.explainMetrics=j.explainMetrics),j.result&&(_.result=j.result)}),S.on("end",()=>{S.destroy(),w(_)})})}_stream(E,y){const A=(0,d.requestTag)(),w=this._query.firestore,I=new o.Transform({objectMode:!0,transform:(_,S,j)=>{var K;const J={};if(!((K=_.transaction)===null||K===void 0)&&K.length&&(J.transaction=_.transaction),_.explainMetrics&&(J.explainMetrics=m.ExplainMetrics._fromProto(_.explainMetrics,w._serializer)),_.result){const H=u.Timestamp.fromProto(_.readTime),U=this.decodeResult(_.result);J.result=new a.AggregateQuerySnapshot(this,H,U)}j(void 0,J)}});return w.initializeIfNeeded(A).then(async()=>{const _=this.toProto(E,y),S=await w.requestStream("runAggregationQuery",!1,_,A);I.on("close",()=>{S.resume(),S.end()}),S.on("error",j=>{S.unpipe(I),(0,c.logger)("AggregateQuery._stream",A,"AggregateQuery failed with stream error:",j),this._query._firestore._traceUtil.currentSpan().addEvent(`${s.SPAN_NAME_RUN_AGGREGATION_QUERY}: Error.`,{"error.message":j.message}),I.destroy(j)}),S.resume(),S.pipe(I)}).catch(_=>I.destroy(_)),I}decodeResult(E){const y={},A=E.aggregateFields;if(A){const w=this._query.firestore._serializer;for(const I of Object.keys(A)){const _=this.serverAliasToClientAliasMap[I];if(t(_!=null,`'${I}' not present in server-client alias mapping.`),this._aggregates[_]===void 0)throw new Error(`Unexpected alias [${I}] in result aggregate result`);y[_]=w.decodeValue(A[I])}}return y}toProto(E,y){const A=this._query.toProto(),w={parent:A.parent,structuredAggregationQuery:{structuredQuery:A.structuredQuery,aggregations:(0,d.mapToArray)(this._aggregates,(I,_)=>{const S=this.clientAliasToServerAliasMap[_];return t(S!=null,`'${_}' not present in client-server alias mapping.`),new r.Aggregate(S,I.aggregateType,I._field).toProto()})}};return E instanceof Uint8Array?w.transaction=E:E instanceof u.Timestamp?w.readTime=E.toProto().timestampValue:E&&(w.newTransaction=E),y&&(w.explainOptions=y),w}isEqual(E){return this===E?!0:!(E instanceof h)||!this.query.isEqual(E.query)?!1:e(this._aggregates,E._aggregates)}async explain(E){const{result:y,explainMetrics:A}=await this._getResponse(void 0,E||{});if(!A)throw new Error("No explain results");return new m.ExplainResults(A,y||null)}}return aggregateQuery.AggregateQuery=h,aggregateQuery}var watch={},rbtree,hasRequiredRbtree;function requireRbtree(){if(hasRequiredRbtree)return rbtree;hasRequiredRbtree=1,rbtree=I;var t=0,e=1;function r(_,S,j,K,J,H){this._color=_,this.key=S,this.value=j,this.left=K,this.right=J,this._count=H}function u(_){return new r(_._color,_.key,_.value,_.left,_.right,_._count)}function d(_,S){return new r(_,S.key,S.value,S.left,S.right,S._count)}function m(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function c(_,S){this._compare=_,this.root=S}var a=c.prototype;Object.defineProperty(a,"keys",{get:function(){var _=[];return this.forEach(function(S,j){_.push(S)}),_}}),Object.defineProperty(a,"values",{get:function(){var _=[];return this.forEach(function(S,j){_.push(j)}),_}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(_,S){for(var j=this._compare,K=this.root,J=[],H=[];K;){var U=j(_,K.key);J.push(K),H.push(U),U<=0?K=K.left:K=K.right}J.push(new r(t,_,S,null,null,1));for(var P=J.length-2;P>=0;--P){var K=J[P];H[P]<=0?J[P]=new r(K._color,K.key,K.value,J[P+1],K.right,K._count+1):J[P]=new r(K._color,K.key,K.value,K.left,J[P+1],K._count+1)}for(var P=J.length-1;P>1;--P){var Z=J[P-1],K=J[P];if(Z._color===e||K._color===e)break;var ie=J[P-2];if(ie.left===Z)if(Z.left===K){var ue=ie.right;if(ue&&ue._color===t)Z._color=e,ie.right=d(e,ue),ie._color=t,P-=1;else{if(ie._color=t,ie.left=Z.right,Z._color=e,Z.right=ie,J[P-2]=Z,J[P-1]=K,m(ie),m(Z),P>=3){var le=J[P-3];le.left===ie?le.left=Z:le.right=Z}break}}else{var ue=ie.right;if(ue&&ue._color===t)Z._color=e,ie.right=d(e,ue),ie._color=t,P-=1;else{if(Z.right=K.left,ie._color=t,ie.left=K.right,K._color=e,K.left=Z,K.right=ie,J[P-2]=K,J[P-1]=Z,m(ie),m(Z),m(K),P>=3){var le=J[P-3];le.left===ie?le.left=K:le.right=K}break}}else if(Z.right===K){var ue=ie.left;if(ue&&ue._color===t)Z._color=e,ie.left=d(e,ue),ie._color=t,P-=1;else{if(ie._color=t,ie.right=Z.left,Z._color=e,Z.left=ie,J[P-2]=Z,J[P-1]=K,m(ie),m(Z),P>=3){var le=J[P-3];le.right===ie?le.right=Z:le.left=Z}break}}else{var ue=ie.left;if(ue&&ue._color===t)Z._color=e,ie.left=d(e,ue),ie._color=t,P-=1;else{if(Z.left=K.right,ie._color=t,ie.right=K.left,K._color=e,K.right=Z,K.left=ie,J[P-2]=K,J[P-1]=Z,m(ie),m(Z),m(K),P>=3){var le=J[P-3];le.right===ie?le.right=K:le.left=K}break}}}return J[0]._color=e,new c(j,J[0])};function o(_,S){if(S.left){var j=o(_,S.left);if(j)return j}var j=_(S.key,S.value);if(j)return j;if(S.right)return o(_,S.right)}function s(_,S,j,K){var J=S(_,K.key);if(J<=0){if(K.left){var H=s(_,S,j,K.left);if(H)return H}var H=j(K.key,K.value);if(H)return H}if(K.right)return s(_,S,j,K.right)}function h(_,S,j,K,J){var H=j(_,J.key),U=j(S,J.key),P;if(H<=0&&(J.left&&(P=h(_,S,j,K,J.left),P)||U>0&&(P=K(J.key,J.value),P)))return P;if(U>0&&J.right)return h(_,S,j,K,J.right)}a.forEach=function(S,j,K){if(this.root)switch(arguments.length){case 1:return o(S,this.root);case 2:return s(j,this._compare,S,this.root);case 3:return this._compare(j,K)>=0?void 0:h(j,K,this._compare,S,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var _=[],S=this.root;S;)_.push(S),S=S.left;return new v(this,_)}}),Object.defineProperty(a,"end",{get:function(){for(var _=[],S=this.root;S;)_.push(S),S=S.right;return new v(this,_)}}),a.at=function(_){if(_<0)return new v(this,[]);for(var S=this.root,j=[];;){if(j.push(S),S.left){if(_<S.left._count){S=S.left;continue}_-=S.left._count}if(!_)return new v(this,j);if(_-=1,S.right){if(_>=S.right._count)break;S=S.right}else break}return new v(this,[])},a.ge=function(_){for(var S=this._compare,j=this.root,K=[],J=0;j;){var H=S(_,j.key);K.push(j),H<=0&&(J=K.length),H<=0?j=j.left:j=j.right}return K.length=J,new v(this,K)},a.gt=function(_){for(var S=this._compare,j=this.root,K=[],J=0;j;){var H=S(_,j.key);K.push(j),H<0&&(J=K.length),H<0?j=j.left:j=j.right}return K.length=J,new v(this,K)},a.lt=function(_){for(var S=this._compare,j=this.root,K=[],J=0;j;){var H=S(_,j.key);K.push(j),H>0&&(J=K.length),H<=0?j=j.left:j=j.right}return K.length=J,new v(this,K)},a.le=function(_){for(var S=this._compare,j=this.root,K=[],J=0;j;){var H=S(_,j.key);K.push(j),H>=0&&(J=K.length),H<0?j=j.left:j=j.right}return K.length=J,new v(this,K)},a.find=function(_){for(var S=this._compare,j=this.root,K=[];j;){var J=S(_,j.key);if(K.push(j),J===0)return new v(this,K);J<=0?j=j.left:j=j.right}return new v(this,[])},a.remove=function(_){var S=this.find(_);return S?S.remove():this},a.get=function(_){for(var S=this._compare,j=this.root;j;){var K=S(_,j.key);if(K===0)return j.value;K<=0?j=j.left:j=j.right}};function v(_,S){this.tree=_,this._stack=S}var E=v.prototype;Object.defineProperty(E,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(E,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),E.clone=function(){return new v(this.tree,this._stack.slice())};function y(_,S){_.key=S.key,_.value=S.value,_.left=S.left,_.right=S.right,_._color=S._color,_._count=S._count}function A(_){for(var S,j,K,J,H=_.length-1;H>=0;--H){if(S=_[H],H===0){S._color=e;return}if(j=_[H-1],j.left===S){if(K=j.right,K.right&&K.right._color===t){if(K=j.right=u(K),J=K.right=u(K.right),j.right=K.left,K.left=j,K.right=J,K._color=j._color,S._color=e,j._color=e,J._color=e,m(j),m(K),H>1){var U=_[H-2];U.left===j?U.left=K:U.right=K}_[H-1]=K;return}else if(K.left&&K.left._color===t){if(K=j.right=u(K),J=K.left=u(K.left),j.right=J.left,K.left=J.right,J.left=j,J.right=K,J._color=j._color,j._color=e,K._color=e,S._color=e,m(j),m(K),m(J),H>1){var U=_[H-2];U.left===j?U.left=J:U.right=J}_[H-1]=J;return}if(K._color===e)if(j._color===t){j._color=e,j.right=d(t,K);return}else{j.right=d(t,K);continue}else{if(K=u(K),j.right=K.left,K.left=j,K._color=j._color,j._color=t,m(j),m(K),H>1){var U=_[H-2];U.left===j?U.left=K:U.right=K}_[H-1]=K,_[H]=j,H+1<_.length?_[H+1]=S:_.push(S),H=H+2}}else{if(K=j.left,K.left&&K.left._color===t){if(K=j.left=u(K),J=K.left=u(K.left),j.left=K.right,K.right=j,K.left=J,K._color=j._color,S._color=e,j._color=e,J._color=e,m(j),m(K),H>1){var U=_[H-2];U.right===j?U.right=K:U.left=K}_[H-1]=K;return}else if(K.right&&K.right._color===t){if(K=j.left=u(K),J=K.right=u(K.right),j.left=J.right,K.right=J.left,J.right=j,J.left=K,J._color=j._color,j._color=e,K._color=e,S._color=e,m(j),m(K),m(J),H>1){var U=_[H-2];U.right===j?U.right=J:U.left=J}_[H-1]=J;return}if(K._color===e)if(j._color===t){j._color=e,j.left=d(t,K);return}else{j.left=d(t,K);continue}else{if(K=u(K),j.left=K.right,K.right=j,K._color=j._color,j._color=t,m(j),m(K),H>1){var U=_[H-2];U.right===j?U.right=K:U.left=K}_[H-1]=K,_[H]=j,H+1<_.length?_[H+1]=S:_.push(S),H=H+2}}}}E.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var S=new Array(_.length),j=_[_.length-1];S[S.length-1]=new r(j._color,j.key,j.value,j.left,j.right,j._count);for(var K=_.length-2;K>=0;--K){var j=_[K];j.left===_[K+1]?S[K]=new r(j._color,j.key,j.value,S[K+1],j.right,j._count):S[K]=new r(j._color,j.key,j.value,j.left,S[K+1],j._count)}if(j=S[S.length-1],j.left&&j.right){var J=S.length;for(j=j.left;j.right;)S.push(j),j=j.right;var H=S[J-1];S.push(new r(j._color,H.key,H.value,j.left,j.right,j._count)),S[J-1].key=j.key,S[J-1].value=j.value;for(var K=S.length-2;K>=J;--K)j=S[K],S[K]=new r(j._color,j.key,j.value,j.left,S[K+1],j._count);S[J-1].left=S[J]}if(j=S[S.length-1],j._color===t){var U=S[S.length-2];U.left===j?U.left=null:U.right===j&&(U.right=null),S.pop();for(var K=0;K<S.length;++K)S[K]._count--;return new c(this.tree._compare,S[0])}else if(j.left||j.right){j.left?y(j,j.left):j.right&&y(j,j.right),j._color=e;for(var K=0;K<S.length-1;++K)S[K]._count--;return new c(this.tree._compare,S[0])}else{if(S.length===1)return new c(this.tree._compare,null);for(var K=0;K<S.length;++K)S[K]._count--;var P=S[S.length-2];A(S),P.left===j?P.left=null:P.right=null}return new c(this.tree._compare,S[0])},Object.defineProperty(E,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(E,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(E,"index",{get:function(){var _=0,S=this._stack;if(S.length===0){var j=this.tree.root;return j?j._count:0}else S[S.length-1].left&&(_=S[S.length-1].left._count);for(var K=S.length-2;K>=0;--K)S[K+1]===S[K].right&&(++_,S[K].left&&(_+=S[K].left._count));return _},enumerable:!0}),E.next=function(){var _=this._stack;if(_.length!==0){var S=_[_.length-1];if(S.right)for(S=S.right;S;)_.push(S),S=S.left;else for(_.pop();_.length>0&&_[_.length-1].right===S;)S=_[_.length-1],_.pop()}},Object.defineProperty(E,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var S=_.length-1;S>0;--S)if(_[S-1].left===_[S])return!0;return!1}}),E.update=function(_){var S=this._stack;if(S.length===0)throw new Error("Can't update empty node!");var j=new Array(S.length),K=S[S.length-1];j[j.length-1]=new r(K._color,K.key,_,K.left,K.right,K._count);for(var J=S.length-2;J>=0;--J)K=S[J],K.left===S[J+1]?j[J]=new r(K._color,K.key,K.value,j[J+1],K.right,K._count):j[J]=new r(K._color,K.key,K.value,K.left,j[J+1],K._count);return new c(this.tree._compare,j[0])},E.prev=function(){var _=this._stack;if(_.length!==0){var S=_[_.length-1];if(S.left)for(S=S.left;S;)_.push(S),S=S.right;else for(_.pop();_.length>0&&_[_.length-1].left===S;)S=_[_.length-1],_.pop()}},Object.defineProperty(E,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var S=_.length-1;S>0;--S)if(_[S-1].right===_[S])return!0;return!1}});function w(_,S){return _<S?-1:_>S?1:0}function I(_){return new c(_||w,null)}return rbtree}var hasRequiredWatch;function requireWatch(){return hasRequiredWatch||(hasRequiredWatch=1,function(t){/*!
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.QueryWatch=t.DocumentWatch=t.WATCH_IDLE_TIMEOUT_MS=void 0;const e=require$$1$3,r=requireRbtree(),u=requireFallback(),d=requireBackoff(),m=requireDocument(),c=requireDocumentChange(),a=requireLogger(),o=requirePath(),s=requireTimestamp(),h=requireTypes$1(),v=requireUtil();/*!
 * Target ID used by watch. Watch uses a fixed target id since we only support
 * one target per stream.
 * @type {number}
 */const E=1;/*!
 * Idle timeout used to detect Watch streams that stall (see
 * https://github.com/googleapis/nodejs-firestore/issues/1057, b/156308554).
 * Under normal load, the Watch backend will send a TARGET_CHANGE message
 * roughly every 30 seconds. As discussed with the backend team, we reset the
 * Watch stream if we do not receive any message within 120 seconds.
 */t.WATCH_IDLE_TIMEOUT_MS=120*1e3;/*!
 * Sentinel value for a document remove.
 */const y={};/*!
 * The change type for document change events.
 */const A={added:"added",modified:"modified",removed:"removed"};/*!
 * The comparator used for document watches (which should always get called with
 * the same document).
 */const w=(K,J)=>(e(K===J,"Document watches only support one document."),0),I=()=>{};class _{constructor(J,H=(0,h.defaultConverter)()){this._converter=H,this.isActive=!0,this.currentStream=null,this.resumeToken=void 0,this.docMap=new Map,this.changeMap=new Map,this.current=!1,this.hasPushed=!1,this.firestore=J,this.backoff=new d.ExponentialBackoff,this.requestTag=(0,v.requestTag)(),this.onNext=I,this.onError=I}onSnapshot(J,H){e(this.onNext===I,"onNext should not already be defined."),e(this.onError===I,"onError should not already be defined."),e(this.docTree===void 0,"docTree should not already be defined."),this.onNext=J,this.onError=H,this.docTree=r(this.getComparator()),this.initStream();const U=()=>{(0,a.logger)("Watch.onSnapshot",this.requestTag,"Unsubscribe called"),this.onNext=()=>{},this.onError=()=>{},this.shutdown()};return this.firestore.registerListener(),U}currentSize(){const J=this.extractCurrentChanges(s.Timestamp.now());return this.docMap.size+J.adds.length-J.deletes.length}extractCurrentChanges(J){const H=[],U=[],P=[];return this.changeMap.forEach((Z,ie)=>{Z===y?this.docMap.has(ie)&&H.push(ie):this.docMap.has(ie)?(Z.readTime=J,P.push(Z.build())):(Z.readTime=J,U.push(Z.build()))}),{deletes:H,adds:U,updates:P}}resetDocs(){(0,a.logger)("Watch.resetDocs",this.requestTag,"Resetting documents"),this.changeMap.clear(),this.resumeToken=void 0,this.docTree.forEach(J=>{this.changeMap.set(J.ref.path,y)}),this.current=!1}closeStream(J){this.isActive&&((0,a.logger)("Watch.closeStream",this.requestTag,"Invoking onError: ",J),this.onError(J)),this.shutdown()}maybeReopenStream(J){this.isActive&&!this.isPermanentWatchError(J)?((0,a.logger)("Watch.maybeReopenStream",this.requestTag,"Stream ended, re-opening after retryable error:",J),this.changeMap.clear(),this.isResourceExhaustedError(J)&&this.backoff.resetToMax(),this.initStream()):this.closeStream(J)}resetIdleTimeout(){this.idleTimeoutHandle&&clearTimeout(this.idleTimeoutHandle),this.idleTimeoutHandle=(0,d.delayExecution)(()=>{var J;(0,a.logger)("Watch.resetIdleTimeout",this.requestTag,"Resetting stream after idle timeout"),(J=this.currentStream)===null||J===void 0||J.end(),this.currentStream=null;const H=new u.GoogleError("Watch stream idle timeout");H.code=u.Status.UNKNOWN,this.maybeReopenStream(H)},t.WATCH_IDLE_TIMEOUT_MS)}resetStream(){(0,a.logger)("Watch.resetStream",this.requestTag,"Restarting stream"),this.currentStream&&(this.currentStream.end(),this.currentStream=null),this.initStream()}initStream(){this.backoff.backoffAndWait().then(async()=>{if(!this.isActive){(0,a.logger)("Watch.initStream",this.requestTag,"Not initializing inactive stream");return}await this.firestore.initializeIfNeeded(this.requestTag);const J={};return J.database=this.firestore.formattedName,J.addTarget=this.getTarget(this.resumeToken),this.firestore.requestStream("listen",!0,J,this.requestTag).then(H=>{if(!this.isActive){(0,a.logger)("Watch.initStream",this.requestTag,"Closing inactive stream"),H.emit("end"),H.on("error",()=>{});return}(0,a.logger)("Watch.initStream",this.requestTag,"Opened new stream"),this.currentStream=H,this.resetIdleTimeout(),this.currentStream.on("data",U=>{this.resetIdleTimeout(),this.onData(U)}).on("error",U=>{this.currentStream===H&&(this.currentStream=null,this.maybeReopenStream(U))}).on("end",()=>{if(this.currentStream===H){this.currentStream=null;const U=new u.GoogleError("Stream ended unexpectedly");U.code=u.Status.UNKNOWN,this.maybeReopenStream(U)}}),this.currentStream.resume()})}).catch(J=>{this.closeStream(J)})}onData(J){if(J.targetChange){(0,a.logger)("Watch.onData",this.requestTag,"Processing target change");const H=J.targetChange,U=!H.targetIds||H.targetIds.length===0;if(H.targetChangeType==="NO_CHANGE")U&&H.readTime&&this.current&&this.pushSnapshot(s.Timestamp.fromProto(H.readTime),H.resumeToken);else if(H.targetChangeType==="ADD")E!==H.targetIds[0]&&this.closeStream(Error("Unexpected target ID sent by server"));else if(H.targetChangeType==="REMOVE"){let P=u.Status.INTERNAL,Z="internal error";H.cause&&(P=H.cause.code,Z=H.cause.message),this.closeStream(new Error("Error "+P+": "+Z))}else H.targetChangeType==="RESET"?this.resetDocs():H.targetChangeType==="CURRENT"?this.current=!0:this.closeStream(new Error("Unknown target change type: "+JSON.stringify(H)));H.resumeToken&&this.affectsTarget(H.targetIds,E)&&this.backoff.reset()}else if(J.documentChange){(0,a.logger)("Watch.onData",this.requestTag,"Processing change event");const H=J.documentChange.targetIds||[],U=J.documentChange.removedTargetIds||[];let P=!1,Z=!1;for(let ne=0;ne<H.length;ne++)H[ne]===E&&(P=!0);for(let ne=0;ne<U.length;ne++)U[ne]===E&&(Z=!0);const ie=J.documentChange.document,ue=ie.name,le=o.QualifiedResourcePath.fromSlashSeparatedString(ue).relativeName;if(P){(0,a.logger)("Watch.onData",this.requestTag,"Received document change");const ne=this.firestore.doc(le),ye=new m.DocumentSnapshotBuilder(ne.withConverter(this._converter));ye.fieldsProto=ie.fields||{},ye.createTime=s.Timestamp.fromProto(ie.createTime),ye.updateTime=s.Timestamp.fromProto(ie.updateTime),this.changeMap.set(le,ye)}else Z&&((0,a.logger)("Watch.onData",this.requestTag,"Received document remove"),this.changeMap.set(le,y))}else if(J.documentDelete||J.documentRemove){(0,a.logger)("Watch.onData",this.requestTag,"Processing remove event");const H=(J.documentDelete||J.documentRemove).document,U=o.QualifiedResourcePath.fromSlashSeparatedString(H).relativeName;this.changeMap.set(U,y)}else J.filter?((0,a.logger)("Watch.onData",this.requestTag,"Processing filter update"),J.filter.count!==this.currentSize()&&(this.resetDocs(),this.resetStream())):this.closeStream(new Error("Unknown listen response type: "+JSON.stringify(J)))}affectsTarget(J,H){if(J===void 0||J.length===0)return!0;for(const U of J)if(U===H)return!0;return!1}pushSnapshot(J,H){const U=this.computeSnapshot(J);if(!this.hasPushed||U.length>0){(0,a.logger)("Watch.pushSnapshot",this.requestTag,"Sending snapshot with %d changes and %d documents",String(U.length),this.docTree.length);const P=this.docTree;this.onNext(J,P.length,()=>P.keys,()=>U),this.hasPushed=!0}this.changeMap.clear(),this.resumeToken=H}deleteDoc(J){e(this.docMap.has(J),"Document to delete does not exist");const H=this.docMap.get(J),U=this.docTree.find(H),P=U.index;return this.docTree=U.remove(),this.docMap.delete(J),new c.DocumentChange(A.removed,H,P,-1)}addDoc(J){const H=J.ref.path;e(!this.docMap.has(H),"Document to add already exists"),this.docTree=this.docTree.insert(J,null);const U=this.docTree.find(J).index;return this.docMap.set(H,J),new c.DocumentChange(A.added,J,-1,U)}modifyDoc(J){const H=J.ref.path;if(e(this.docMap.has(H),"Document to modify does not exist"),!this.docMap.get(H).updateTime.isEqual(J.updateTime)){const P=this.deleteDoc(H),Z=this.addDoc(J);return new c.DocumentChange(A.modified,J,P.oldIndex,Z.newIndex)}return null}computeSnapshot(J){const H=this.extractCurrentChanges(J),U=[];return H.deletes.sort((P,Z)=>this.getComparator()(this.docMap.get(P),this.docMap.get(Z))),H.deletes.forEach(P=>{const Z=this.deleteDoc(P);U.push(Z)}),H.adds.sort(this.getComparator()),H.adds.forEach(P=>{const Z=this.addDoc(P);U.push(Z)}),H.updates.sort(this.getComparator()),H.updates.forEach(P=>{const Z=this.modifyDoc(P);Z&&U.push(Z)}),e(this.docTree.length===this.docMap.size,"The update document tree and document map should have the same number of entries."),U}isPermanentWatchError(J){if(J.code===void 0)return(0,a.logger)("Watch.isPermanentError",this.requestTag,"Unable to determine error code: ",J),!1;switch(J.code){case u.Status.ABORTED:case u.Status.CANCELLED:case u.Status.UNKNOWN:case u.Status.DEADLINE_EXCEEDED:case u.Status.RESOURCE_EXHAUSTED:case u.Status.INTERNAL:case u.Status.UNAVAILABLE:case u.Status.UNAUTHENTICATED:return!1;default:return!0}}isResourceExhaustedError(J){return J.code===u.Status.RESOURCE_EXHAUSTED}shutdown(){var J;this.isActive&&(this.isActive=!1,this.idleTimeoutHandle&&(clearTimeout(this.idleTimeoutHandle),this.idleTimeoutHandle=void 0),this.firestore.unregisterListener()),(J=this.currentStream)===null||J===void 0||J.end(),this.currentStream=null}}class S extends _{constructor(J,H){super(J,H._converter),this.ref=H}getComparator(){return w}getTarget(J){return{documents:{documents:[this.ref.formattedName]},targetId:E,resumeToken:J}}}t.DocumentWatch=S;class j extends _{constructor(J,H,U){super(J,U),this.query=H,this.comparator=H.comparator()}getComparator(){return this.query.comparator()}getTarget(J){return{query:this.query.toProto(),targetId:E,resumeToken:J}}}t.QueryWatch=j}(watch)),watch}var hasRequiredQuery;function requireQuery(){if(hasRequiredQuery)return query;hasRequiredQuery=1,Object.defineProperty(query,"__esModule",{value:!0}),query.Query=void 0;const t=require$$1$3,e=requireQueryUtil(),r=requireSrc(),u=requireFieldOrder(),d=requireFieldFilterInternal(),m=requireCompositeFilterInternal(),c=requireConstants(),a=requireDocumentReference(),o=requireQuerySnapshot(),s=requireSerializer(),h=requireQueryProfile(),v=requireFilter(),E=requirePath(),y=requireHelpers(),A=requireValidate(),w=requireTypes(),I=requireAggregateQuery(),_=requireVectorQuery(),S=requireOrder(),j=requireTypes$1(),K=requireTraceUtil();class J{constructor(U,P){this._firestore=U,this._queryOptions=P,this._serializer=new s.Serializer(U),this._allowUndefined=!!this._firestore._settings.ignoreUndefinedProperties,this._queryUtil=new e.QueryUtil(U,P,this._serializer)}static _extractFieldValues(U,P){const Z=[];for(const ie of P)if(r.FieldPath.documentId().isEqual(ie.field))Z.push(U.ref);else{const ue=U.get(ie.field);if(ue===void 0)throw new Error(`Field "${ie.field}" is missing in the provided DocumentSnapshot. Please provide a document that contains values for all specified orderBy() and where() constraints.`);Z.push(ue)}return Z}get firestore(){return this._firestore}where(U,P,Z){let ie;if(U instanceof r.Filter?ie=U:ie=r.Filter.where(U,P,Z),this._queryOptions.startAt||this._queryOptions.endAt)throw new Error("Cannot specify a where() filter after calling startAt(), startAfter(), endBefore() or endAt().");const ue=this._parseFilter(ie);if(ue.getFilters().length===0)return this;const le=this._queryOptions.with({filters:this._queryOptions.filters.concat(ue)});return new J(this._firestore,le)}_parseFilter(U){return U instanceof v.UnaryFilter?this._parseFieldFilter(U):this._parseCompositeFilter(U)}_parseFieldFilter(U){let P=U._getValue(),Z=U._getOperator();const ie=U._getField();(0,E.validateFieldPath)("fieldPath",ie),Z=(0,y.validateQueryOperator)("opStr",Z,P),(0,y.validateQueryValue)("value",P,this._allowUndefined);const ue=r.FieldPath.fromArgument(ie);if(r.FieldPath.documentId().isEqual(ue)){if(Z==="array-contains"||Z==="array-contains-any")throw new Error(`Invalid Query. You can't perform '${Z}' queries on FieldPath.documentId().`);if(Z==="in"||Z==="not-in"){if(!Array.isArray(P)||P.length===0)throw new Error(`Invalid Query. A non-empty array is required for '${Z}' filters.`);P=P.map(le=>this.validateReference(le))}else P=this.validateReference(P)}return new d.FieldFilterInternal(this._serializer,ue,c.comparisonOperators[Z],P)}_parseCompositeFilter(U){const P=U._getFilters().map(Z=>this._parseFilter(Z)).filter(Z=>Z.getFilters().length>0);return P.length===1?P[0]:new m.CompositeFilterInternal(P,U._getOperator()==="AND"?"AND":"OR")}select(...U){const P=[];if(U.length===0)P.push({fieldPath:r.FieldPath.documentId().formattedName});else for(let ie=0;ie<U.length;++ie)(0,E.validateFieldPath)(ie,U[ie]),P.push({fieldPath:r.FieldPath.fromArgument(U[ie]).formattedName});const Z=this._queryOptions.with({projection:{fields:P}});return new J(this._firestore,Z)}orderBy(U,P){if((0,E.validateFieldPath)("fieldPath",U),P=(0,y.validateQueryOrder)("directionStr",P),this._queryOptions.startAt||this._queryOptions.endAt)throw new Error("Cannot specify an orderBy() constraint after calling startAt(), startAfter(), endBefore() or endAt().");const Z=new u.FieldOrder(r.FieldPath.fromArgument(U),c.directionOperators[P||"asc"]),ie=this._queryOptions.with({fieldOrders:this._queryOptions.fieldOrders.concat(Z)});return new J(this._firestore,ie)}limit(U){(0,A.validateInteger)("limit",U);const P=this._queryOptions.with({limit:U,limitType:w.LimitType.First});return new J(this._firestore,P)}limitToLast(U){(0,A.validateInteger)("limitToLast",U);const P=this._queryOptions.with({limit:U,limitType:w.LimitType.Last});return new J(this._firestore,P)}offset(U){(0,A.validateInteger)("offset",U);const P=this._queryOptions.with({offset:U});return new J(this._firestore,P)}count(){return this.aggregate({count:r.AggregateField.count()})}aggregate(U){return new I.AggregateQuery(this,U)}findNearest(U,P,Z){if(typeof U=="string"||U instanceof r.FieldPath){const ie={distanceMeasure:Z.distanceMeasure,limit:Z.limit,queryVector:P,vectorField:U};return this._findNearest(ie)}else return this._findNearest(U)}_findNearest(U){if((0,E.validateFieldPath)("vectorField",U.vectorField),U.limit<=0)throw(0,A.invalidArgumentMessage)("limit","positive limit number");if((Array.isArray(U.queryVector)?U.queryVector.length:U.queryVector.toArray().length)===0)throw(0,A.invalidArgumentMessage)("queryVector","vector size must be larger than 0");return new _.VectorQuery(this,U)}isEqual(U){return this===U?!0:U instanceof J&&this._queryOptions.isEqual(U._queryOptions)}getInequalityFilterFields(){const U=[];for(const P of this._queryOptions.filters)for(const Z of P.getFlattenedFilters())Z.isInequalityFilter()&&U.push(Z.field);return U.sort((P,Z)=>P.compareTo(Z))}createImplicitOrderBy(U){if(U.length!==1||!(U[0]instanceof r.DocumentSnapshot))return this._queryOptions.fieldOrders;const P=this._queryOptions.fieldOrders.slice(),Z=new Set([...P.map(le=>le.field.toString())]),ie=P.length===0?c.directionOperators.ASC:P[P.length-1].direction,ue=this.getInequalityFilterFields();for(const le of ue)!Z.has(le.toString())&&!le.isEqual(r.FieldPath.documentId())&&(P.push(new u.FieldOrder(le,ie)),Z.add(le.toString()));return Z.has(r.FieldPath.documentId().toString())||P.push(new u.FieldOrder(r.FieldPath.documentId(),ie)),P}createCursor(U,P,Z){let ie;if(P.length===1&&P[0]instanceof r.DocumentSnapshot?ie=J._extractFieldValues(P[0],U):ie=P,ie.length>U.length)throw new Error("Too many cursor values specified. The specified values must match the orderBy() constraints of the query.");const ue={values:[],before:Z};for(let le=0;le<ie.length;++le){let ne=ie[le];r.FieldPath.documentId().isEqual(U[le].field)&&(ne=this.validateReference(ne)),(0,y.validateQueryValue)(le,ne,this._allowUndefined),ue.values.push(this._serializer.encodeValue(ne))}return ue}validateReference(U){const P=this._queryOptions.allDescendants?this._queryOptions.parentPath:this._queryOptions.parentPath.append(this._queryOptions.collectionId);let Z;if(typeof U=="string"){const ie=P.append(U);if(this._queryOptions.allDescendants){if(!ie.isDocument)throw new Error(`When querying a collection group and ordering by FieldPath.documentId(), the corresponding value must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`)}else if(U.indexOf("/")!==-1)throw new Error(`When querying a collection and ordering by FieldPath.documentId(), the corresponding value must be a plain document ID, but '${U}' contains a slash.`);Z=new a.DocumentReference(this._firestore,P.append(U),this._queryOptions.converter)}else if(U instanceof a.DocumentReference){if(Z=U,!P.isPrefixOf(Z._path))throw new Error(`"${Z.path}" is not part of the query result set and cannot be used as a query boundary.`)}else throw new Error(`The corresponding value for FieldPath.documentId() must be a string or a DocumentReference, but was "${U}".`);if(!this._queryOptions.allDescendants&&Z._path.parent().compareTo(P)!==0)throw new Error(`Only a direct child can be used as a query boundary. Found: "${Z.path}".`);return Z}startAt(...U){(0,A.validateMinNumberOfArguments)("Query.startAt",U,1);const P=this.createImplicitOrderBy(U),Z=this.createCursor(P,U,!0),ie=this._queryOptions.with({fieldOrders:P,startAt:Z});return new J(this._firestore,ie)}startAfter(...U){(0,A.validateMinNumberOfArguments)("Query.startAfter",U,1);const P=this.createImplicitOrderBy(U),Z=this.createCursor(P,U,!1),ie=this._queryOptions.with({fieldOrders:P,startAt:Z});return new J(this._firestore,ie)}endBefore(...U){(0,A.validateMinNumberOfArguments)("Query.endBefore",U,1);const P=this.createImplicitOrderBy(U),Z=this.createCursor(P,U,!0),ie=this._queryOptions.with({fieldOrders:P,endAt:Z});return new J(this._firestore,ie)}endAt(...U){(0,A.validateMinNumberOfArguments)("Query.endAt",U,1);const P=this.createImplicitOrderBy(U),Z=this.createCursor(P,U,!1),ie=this._queryOptions.with({fieldOrders:P,endAt:Z});return new J(this._firestore,ie)}async get(){return this._firestore._traceUtil.startActiveSpan(K.SPAN_NAME_QUERY_GET,async()=>{const{result:U}=await this._get();return U})}async explain(U){U===void 0&&(U={});const{result:P,explainMetrics:Z}=await this._getResponse(void 0,U);if(!Z)throw new Error("No explain results");return new h.ExplainResults(Z,P||null)}async _get(U){const P=await this._getResponse(U);if(!P.result)throw new Error("No QuerySnapshot result");return P}_getResponse(U,P){return this._queryUtil._getResponse(this,U,!0,P)}stream(){return this._queryUtil.stream(this)}explainStream(U){if(U===void 0&&(U={}),this._queryOptions.limitType===w.LimitType.Last)throw new Error("Query results for queries that include limitToLast() constraints cannot be streamed. Use Query.explain() instead.");const P=this._stream(void 0,U),Z=new t.Transform({objectMode:!0,transform(ie,ue,le){(ie.document||ie.explainMetrics)&&le(void 0,{document:ie.document,metrics:ie.explainMetrics})}});return P.pipe(Z),P.on("error",ie=>Z.destroy(ie)),Z}toCursor(U){if(U)return U.before?{before:!0,values:U.values}:{values:U.values}}toProto(U,P){const Z=this.firestore.projectId,ie=this.firestore.databaseId,ue=this._queryOptions.parentPath.toQualifiedResourcePath(Z,ie),le=this.toStructuredQuery();if(this._queryOptions.limitType===w.LimitType.Last){if(!this._queryOptions.hasFieldOrders())throw new Error("limitToLast() queries require specifying at least one orderBy() clause.");le.orderBy=this._queryOptions.fieldOrders.map(ye=>{const fe=ye.direction==="DESCENDING"?"ASCENDING":"DESCENDING";return new u.FieldOrder(ye.field,fe).toProto()}),le.startAt=this._queryOptions.endAt?this.toCursor({values:this._queryOptions.endAt.values,before:!this._queryOptions.endAt.before}):void 0,le.endAt=this._queryOptions.startAt?this.toCursor({values:this._queryOptions.startAt.values,before:!this._queryOptions.startAt.before}):void 0}const ne={parent:ue.formattedName,structuredQuery:le};return U instanceof Uint8Array?ne.transaction=U:U instanceof r.Timestamp?ne.readTime=U.toProto().timestampValue:U&&(ne.newTransaction=U),P&&(ne.explainOptions=P),ne}_toBundledQuery(){const U=this.firestore.projectId,P=this.firestore.databaseId,Z=this._queryOptions.parentPath.toQualifiedResourcePath(U,P),ie=this.toStructuredQuery(),ue={parent:Z.formattedName,structuredQuery:ie};return this._queryOptions.limitType===w.LimitType.First?ue.limitType="FIRST":this._queryOptions.limitType===w.LimitType.Last&&(ue.limitType="LAST"),ue}toStructuredQuery(){const U={from:[{}]};return this._queryOptions.allDescendants&&(U.from[0].allDescendants=!0),this._queryOptions.kindless||(U.from[0].collectionId=this._queryOptions.collectionId),this._queryOptions.filters.length>=1&&(U.where=new m.CompositeFilterInternal(this._queryOptions.filters,"AND").toProto()),this._queryOptions.hasFieldOrders()&&(U.orderBy=this._queryOptions.fieldOrders.map(P=>P.toProto())),U.startAt=this.toCursor(this._queryOptions.startAt),U.endAt=this.toCursor(this._queryOptions.endAt),this._queryOptions.limit&&(U.limit={value:this._queryOptions.limit}),U.offset=this._queryOptions.offset,U.select=this._queryOptions.projection,U}_isPermanentRpcError(U,P){return this._queryUtil._isPermanentRpcError(U,P)}_hasRetryTimedOut(U,P){return this._queryUtil._hasRetryTimedOut(U,P)}_stream(U,P){return this._queryUtil._stream(this,U,!0,P)}onSnapshot(U,P){return(0,A.validateFunction)("onNext",U),(0,A.validateFunction)("onError",P,{optional:!0}),new(requireWatch()).QueryWatch(this.firestore,this,this._queryOptions.converter).onSnapshot((ie,ue,le,ne)=>{U(new o.QuerySnapshot(this,ie,ue,le,ne))},P||console.error)}comparator(){return(U,P)=>{const Z=this._queryOptions.hasFieldOrders()?this._queryOptions.fieldOrders[this._queryOptions.fieldOrders.length-1].direction:"ASCENDING",ie=this._queryOptions.fieldOrders.concat(new u.FieldOrder(r.FieldPath.documentId(),Z));for(const ue of ie){let le;if(r.FieldPath.documentId().isEqual(ue.field))le=U.ref._path.compareTo(P.ref._path);else{const ne=U.protoField(ue.field),ye=P.protoField(ue.field);if(ne===void 0||ye===void 0)throw new Error("Trying to compare documents on fields that don't exist. Please include the fields you are ordering on in your select() call.");le=(0,S.compare)(ne,ye)}if(le!==0)return(ue.direction==="ASCENDING"?1:-1)*le}return 0}}withConverter(U){return new J(this.firestore,this._queryOptions.withConverter(U??(0,j.defaultConverter)()))}_createSnapshot(U,P,Z,ie){return new o.QuerySnapshot(this,U,P,Z,ie)}}return query.Query=J,query}var queryOptions={},hasRequiredQueryOptions;function requireQueryOptions(){if(hasRequiredQueryOptions)return queryOptions;hasRequiredQueryOptions=1,Object.defineProperty(queryOptions,"__esModule",{value:!0}),queryOptions.QueryOptions=void 0;const t=requireFastDeepEqual(),e=requirePath(),r=requireTypes$1(),u=requireHelpers();class d{constructor(c,a,o,s,h,v,E,y,A,w,I,_,S=!1,j=!0){this.parentPath=c,this.collectionId=a,this.converter=o,this.allDescendants=s,this.filters=h,this.fieldOrders=v,this.startAt=E,this.endAt=y,this.limit=A,this.limitType=w,this.offset=I,this.projection=_,this.kindless=S,this.requireConsistency=j}static forCollectionGroupQuery(c,a=(0,r.defaultConverter)()){return new d(e.ResourcePath.EMPTY,c,a,!0,[],[])}static forCollectionQuery(c,a=(0,r.defaultConverter)()){return new d(c.parent(),c.id,a,!1,[],[])}static forKindlessAllDescendants(c,a,o=!0){let s=new d(c,a,(0,r.defaultConverter)(),!0,[],[]);return s=s.with({kindless:!0,requireConsistency:o}),s}with(c){return new d((0,u.coalesce)(c.parentPath,this.parentPath),(0,u.coalesce)(c.collectionId,this.collectionId),this.converter,(0,u.coalesce)(c.allDescendants,this.allDescendants),(0,u.coalesce)(c.filters,this.filters),(0,u.coalesce)(c.fieldOrders,this.fieldOrders),(0,u.coalesce)(c.startAt,this.startAt),(0,u.coalesce)(c.endAt,this.endAt),(0,u.coalesce)(c.limit,this.limit),(0,u.coalesce)(c.limitType,this.limitType),(0,u.coalesce)(c.offset,this.offset),(0,u.coalesce)(c.projection,this.projection),(0,u.coalesce)(c.kindless,this.kindless),(0,u.coalesce)(c.requireConsistency,this.requireConsistency))}withConverter(c){return new d(this.parentPath,this.collectionId,c,this.allDescendants,this.filters,this.fieldOrders,this.startAt,this.endAt,this.limit,this.limitType,this.offset,this.projection)}hasFieldOrders(){return this.fieldOrders.length>0}isEqual(c){return this===c?!0:c instanceof d&&this.parentPath.isEqual(c.parentPath)&&this.filtersEqual(c.filters)&&this.collectionId===c.collectionId&&this.converter===c.converter&&this.allDescendants===c.allDescendants&&this.limit===c.limit&&this.offset===c.offset&&t(this.fieldOrders,c.fieldOrders)&&t(this.startAt,c.startAt)&&t(this.endAt,c.endAt)&&t(this.projection,c.projection)&&this.kindless===c.kindless&&this.requireConsistency===c.requireConsistency}filtersEqual(c){if(this.filters.length!==c.length)return!1;for(let a=0;a<c.length;a++)if(!this.filters[a].isEqual(c[a]))return!1;return!0}}return queryOptions.QueryOptions=d,queryOptions}var hasRequiredCollectionReference;function requireCollectionReference(){if(hasRequiredCollectionReference)return collectionReference;hasRequiredCollectionReference=1,Object.defineProperty(collectionReference,"__esModule",{value:!0}),collectionReference.CollectionReference=void 0;const t=requirePath(),e=requireUtil(),r=requireWriteBatch(),u=requireTypes$1(),d=requireQuery(),m=requireDocumentReference(),c=requireQueryOptions(),a=requireTraceUtil();class o extends d.Query{constructor(h,v,E){super(h,c.QueryOptions.forCollectionQuery(v,E))}get _resourcePath(){return this._queryOptions.parentPath.append(this._queryOptions.collectionId)}get id(){return this._queryOptions.collectionId}get parent(){return this._queryOptions.parentPath.isDocument?new m.DocumentReference(this.firestore,this._queryOptions.parentPath):null}get path(){return this._resourcePath.relativeName}listDocuments(){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_COL_REF_LIST_DOCUMENTS,()=>{const h=(0,e.requestTag)();return this.firestore.initializeIfNeeded(h).then(()=>{const E={parent:this._queryOptions.parentPath.toQualifiedResourcePath(this.firestore.projectId,this.firestore.databaseId).formattedName,collectionId:this.id,showMissing:!0,mask:{fieldPaths:[]}};return this.firestore.request("listDocuments",E,h).then(y=>y.map(A=>{const w=t.QualifiedResourcePath.fromSlashSeparatedString(A.name);return this.doc(w.id)}))})})}doc(h){arguments.length===0?h=(0,e.autoId)():(0,t.validateResourcePath)("documentPath",h);const v=this._resourcePath.append(h);if(!v.isDocument)throw new Error(`Value for argument "documentPath" must point to a document, but was "${h}". Your path does not contain an even number of components.`);return new m.DocumentReference(this.firestore,v,this._queryOptions.converter)}add(h){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_COL_REF_ADD,()=>{const v=this._queryOptions.converter.toFirestore(h);(0,r.validateDocumentData)("data",v,!1,this._allowUndefined);const E=this.doc();return E.create(h).then(()=>E)})}isEqual(h){return this===h||h instanceof o&&super.isEqual(h)}withConverter(h){return new o(this.firestore,this._resourcePath,h??(0,u.defaultConverter)())}}return collectionReference.CollectionReference=o,collectionReference}var hasRequiredDocumentReference;function requireDocumentReference(){if(hasRequiredDocumentReference)return documentReference;hasRequiredDocumentReference=1,Object.defineProperty(documentReference,"__esModule",{value:!0}),documentReference.DocumentReference=void 0;const t=requireSrc(),e=requirePath(),r=requireTypes$1(),u=requireCollectionReference(),d=requireUtil(),m=requireValidate(),c=requireDocument(),a=requireTraceUtil();class o{constructor(h,v,E=(0,r.defaultConverter)()){this._firestore=h,this._path=v,this._converter=E}get formattedName(){const h=this.firestore.projectId,v=this.firestore.databaseId;return this._path.toQualifiedResourcePath(h,v).formattedName}get firestore(){return this._firestore}get path(){return this._path.relativeName}get id(){return this._path.id}get _resourcePath(){return this._path}get parent(){return new u.CollectionReference(this._firestore,this._path.parent(),this._converter)}get(){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_DOC_REF_GET,()=>this._firestore.getAll(this).then(([h])=>h))}collection(h){(0,e.validateResourcePath)("collectionPath",h);const v=this._path.append(h);if(!v.isCollection)throw new Error(`Value for argument "collectionPath" must point to a collection, but was "${h}". Your path does not contain an odd number of components.`);return new u.CollectionReference(this._firestore,v)}listCollections(){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_DOC_REF_LIST_COLLECTIONS,()=>{const h=(0,d.requestTag)();return this.firestore.initializeIfNeeded(h).then(()=>{const v={parent:this.formattedName};return this._firestore.request("listCollectionIds",v,h).then(E=>{const y=[];E.sort();for(const A of E)y.push(this.collection(A));return y})})})}create(h){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_DOC_REF_CREATE,()=>new t.WriteBatch(this._firestore).create(this,h).commit().then(([E])=>E))}delete(h){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_DOC_REF_DELETE,()=>new t.WriteBatch(this._firestore).delete(this,h).commit().then(([E])=>E))}set(h,v){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_DOC_REF_SET,()=>{let E=new t.WriteBatch(this._firestore);return v?E=E.set(this,h,v):E=E.set(this,h),E.commit().then(([y])=>y)})}update(h,...v){return this._firestore._traceUtil.startActiveSpan(a.SPAN_NAME_DOC_REF_UPDATE,()=>((0,m.validateMinNumberOfArguments)("DocumentReference.update",arguments,1),new t.WriteBatch(this._firestore).update(this,h,...v).commit().then(([y])=>y)))}onSnapshot(h,v){return(0,m.validateFunction)("onNext",h),(0,m.validateFunction)("onError",v,{optional:!0}),new(requireWatch()).DocumentWatch(this.firestore,this).onSnapshot((y,A,w)=>{for(const S of w())if(S.ref.path===this.path){h(S);return}const I=new o(this._firestore,this._path,this._converter),_=new c.DocumentSnapshotBuilder(I);_.readTime=y,h(_.build())},v||console.error)}isEqual(h){return this===h||h instanceof o&&this._firestore===h._firestore&&this._path.isEqual(h._path)&&this._converter===h._converter}toProto(){return{referenceValue:this.formattedName}}withConverter(h){return new o(this.firestore,this._path,h??(0,r.defaultConverter)())}}return documentReference.DocumentReference=o,documentReference}var hasRequiredDocument;function requireDocument(){if(hasRequiredDocument)return document$1;hasRequiredDocument=1;/*!
 * Copyright 2019 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(document$1,"__esModule",{value:!0}),document$1.Precondition=document$1.DocumentTransform=document$1.DocumentMask=document$1.QueryDocumentSnapshot=document$1.DocumentSnapshot=document$1.DocumentSnapshotBuilder=void 0;const t=requireFastDeepEqual(),e=require$$1$3,r=requireFieldValue(),u=requirePath(),d=requireDocumentReference(),m=requireTypes$1(),c=requireUtil();class a{constructor(A){this.ref=A}build(){return e(this.fieldsProto!==void 0==(this.createTime!==void 0),"Create time should be set iff document exists."),e(this.fieldsProto!==void 0==(this.updateTime!==void 0),"Update time should be set iff document exists."),this.fieldsProto?new s(this.ref,this.fieldsProto,this.readTime,this.createTime,this.updateTime):new o(this.ref,void 0,this.readTime)}}document$1.DocumentSnapshotBuilder=a;class o{constructor(A,w,I,_,S){this._fieldsProto=w,this._ref=A,this._serializer=A.firestore._serializer,this._readTime=I,this._createTime=_,this._updateTime=S}static fromObject(A,w){const I=A.firestore._serializer;return new o(A,I.encodeFields(w))}static fromUpdateMap(A,w){const I=A.firestore._serializer;function _(j,K,J,H){const U=J[H],P=H===J.length-1;if(j[U]===void 0)if(P){if(K instanceof r.FieldTransform)return(0,c.isEmpty)(j)?null:j;const Z=I.encodeValue(K);return Z&&(j[U]=Z),j}else{const Z={mapValue:{fields:{}}},ie=_(Z.mapValue.fields,K,J,H+1);return ie?(Z.mapValue.fields=ie,j[U]=Z,j):(0,c.isEmpty)(j)?null:j}else return e(!P,"Can't merge current value into a nested object"),j[U].mapValue.fields=_(j[U].mapValue.fields,K,J,H+1),j}const S={};for(const[j,K]of w){const J=j.toArray();_(S,K,J,0)}return new o(A,S)}get exists(){return this._fieldsProto!==void 0}get ref(){return this._ref}get id(){return this._ref.id}get createTime(){return this._createTime}get updateTime(){return this._updateTime}get readTime(){if(this._readTime===void 0)throw new Error("Called 'readTime' on a local document");return this._readTime}data(){const A=this._fieldsProto;if(A!==void 0)if(this.ref._converter!==(0,m.defaultConverter)()){const w=new d.DocumentReference(this.ref.firestore,this.ref._path);return this.ref._converter.fromFirestore(new s(w,this._fieldsProto,this.readTime,this.createTime,this.updateTime))}else{const w={};for(const I of Object.keys(A))w[I]=this._serializer.decodeValue(A[I]);return w}}get(A){(0,u.validateFieldPath)("field",A);const w=this.protoField(A);if(w!==void 0)return this._serializer.decodeValue(w)}protoField(A){let w=this._fieldsProto;if(w===void 0)return;const I=u.FieldPath.fromArgument(A).toArray();for(;I.length>1;){if(w=w[I.shift()],!w||!w.mapValue)return;w=w.mapValue.fields}return w[I[0]]}toWriteProto(){return{update:{name:this._ref.formattedName,fields:this._fieldsProto}}}toDocumentProto(){var A,w;return{name:this._ref.formattedName,createTime:(A=this.createTime)===null||A===void 0?void 0:A.toProto().timestampValue,updateTime:(w=this.updateTime)===null||w===void 0?void 0:w.toProto().timestampValue,fields:this._fieldsProto}}isEqual(A){return this===A||A instanceof o&&this._ref.isEqual(A._ref)&&t(this._fieldsProto,A._fieldsProto)}}document$1.DocumentSnapshot=o;class s extends o{get createTime(){return super.createTime}get updateTime(){return super.updateTime}data(){const A=super.data();if(!A)throw new Error("The data in a QueryDocumentSnapshot should always exist.");return A}}document$1.QueryDocumentSnapshot=s;class h{constructor(A){this._sortedPaths=A,this._sortedPaths.sort((w,I)=>w.compareTo(I))}static fromUpdateMap(A){const w=[];return A.forEach((I,_)=>{(!(I instanceof r.FieldTransform)||I.includeInDocumentMask)&&w.push(u.FieldPath.fromArgument(_))}),new h(w)}static fromFieldMask(A){const w=[];for(const I of A)w.push(u.FieldPath.fromArgument(I));return new h(w)}static fromObject(A){const w=[];function I(_,S){let j=!0;for(const K of Object.keys(_)){j=!1;const J=new u.FieldPath(K),H=S?S.append(J):J,U=_[K];U instanceof r.FieldTransform?U.includeInDocumentMask&&w.push(H):(0,c.isPlainObject)(U)?I(U,H):U!==void 0&&w.push(H)}S&&j&&w.push(S)}return I(A),new h(w)}get isEmpty(){return this._sortedPaths.length===0}static removeFromSortedArray(A,w){for(let I=0;I<A.length;){let _=!1;for(const S of w)if(A[I].isEqual(S)){A.splice(I,1),_=!0;break}_||++I}}removeFields(A){h.removeFromSortedArray(this._sortedPaths,A)}contains(A){for(const w of this._sortedPaths){const I=w.compareTo(A);if(I===0)return!0;if(I>0)return!1}return!1}applyTo(A){/*!
 * Applies this DocumentMask to 'data' and computes the list of field paths
 * that were specified in the mask but are not present in 'data'.
 */const I=(_=>{const S=this._sortedPaths.slice(0),j=(J,H)=>{let U=null;return Object.keys(J).forEach(P=>{const Z=H?H.append(P):new u.FieldPath(P);if(this.contains(Z))h.removeFromSortedArray(S,[Z]),U=U||{},U[P]=J[P];else if((0,c.isObject)(J[P])){const ie=j(J[P],Z);ie&&(U=U||{},U[P]=ie)}}),U};return{filteredData:j(_)||{},remainingPaths:S}})(A);if(I.remainingPaths.length!==0)throw new Error(`Input data is missing for field "${I.remainingPaths[0]}".`);return I.filteredData}toProto(){if(this.isEmpty)return{};const A=[];for(const w of this._sortedPaths)A.push(w.formattedName);return{fieldPaths:A}}}document$1.DocumentMask=h;class v{constructor(A,w){this.ref=A,this.transforms=w}static fromObject(A,w){const I=new Map;for(const _ of Object.keys(w))I.set(new u.FieldPath(_),w[_]);return v.fromUpdateMap(A,I)}static fromUpdateMap(A,w){const I=new Map;function _(S,j,K){if(S instanceof r.FieldTransform&&S.includeInDocumentTransform)if(K)I.set(j,S);else throw new Error(`${S.methodName}() is not supported inside of array values.`);else if(Array.isArray(S))for(let J=0;J<S.length;++J)_(S[J],j.append(String(J)),!1);else if((0,c.isPlainObject)(S))for(const J of Object.keys(S))_(S[J],j.append(new u.FieldPath(J)),K)}return w.forEach((S,j)=>{_(S,u.FieldPath.fromArgument(j),!0)}),new v(A,I)}get isEmpty(){return this.transforms.size===0}get fields(){return Array.from(this.transforms.keys())}validate(){const A=!!this.ref.firestore._settings.ignoreUndefinedProperties;this.transforms.forEach(w=>w.validate(A))}toProto(A){return Array.from(this.transforms,([w,I])=>I.toProto(A,w))}}document$1.DocumentTransform=v;class E{constructor(A){A!==void 0&&(this._exists=A.exists,this._lastUpdateTime=A.lastUpdateTime)}toProto(){if(this.isEmpty)return null;const A={};return this._lastUpdateTime!==void 0?A.updateTime=this._lastUpdateTime.toProto().timestampValue:A.exists=this._exists,A}get isEmpty(){return this._exists===void 0&&!this._lastUpdateTime}}return document$1.Precondition=E,document$1}var hasRequiredWriteBatch;function requireWriteBatch(){if(hasRequiredWriteBatch)return writeBatch;hasRequiredWriteBatch=1;/*!
 * Copyright 2019 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(writeBatch,"__esModule",{value:!0}),writeBatch.WriteBatch=writeBatch.WriteResult=void 0,writeBatch.validateSetOptions=A,writeBatch.validateDocumentData=w,writeBatch.validateFieldValue=I;const t=requireDocument(),e=requireLogger(),r=requirePath(),u=requireHelpers(),d=requireSerializer(),m=requireTimestamp(),c=requireUtil(),a=requireValidate(),o=requireTraceUtil();class s{constructor(K){this._writeTime=K}get writeTime(){return this._writeTime}isEqual(K){return this===K||K instanceof s&&this._writeTime.isEqual(K._writeTime)}}writeBatch.WriteResult=s;class h{get _opCount(){return this._ops.length}constructor(K){this._ops=[],this._committed=!1,this._firestore=K,this._serializer=new d.Serializer(K),this._allowUndefined=!!K._settings.ignoreUndefinedProperties}get isEmpty(){return this._ops.length===0}verifyNotCommitted(){if(this._committed)throw new Error("Cannot modify a WriteBatch that has been committed.")}create(K,J){const H=(0,u.validateDocumentReference)("documentRef",K),U=H._converter.toFirestore(J);w("data",U,!1,this._allowUndefined),this.verifyNotCommitted();const P=t.DocumentTransform.fromObject(H,U);P.validate();const Z=new t.Precondition({exists:!1}),ie=()=>{const le=t.DocumentSnapshot.fromObject(H,U).toWriteProto();return P.isEmpty||(le.updateTransforms=P.toProto(this._serializer)),le.currentDocument=Z.toProto(),le};return this._ops.push({docPath:K.path,op:ie}),this}delete(K,J){const H=(0,u.validateDocumentReference)("documentRef",K);y("precondition",J,{optional:!0}),this.verifyNotCommitted();const U=new t.Precondition(J),P=()=>{const Z={delete:H.formattedName};return U.isEmpty||(Z.currentDocument=U.toProto()),Z};return this._ops.push({docPath:K.path,op:P}),this}set(K,J,H){A("options",H,{optional:!0});const U=H&&"merge"in H&&H.merge,P=H&&"mergeFields"in H,Z=(0,u.validateDocumentReference)("documentRef",K);let ie;U||P?ie=Z._converter.toFirestore(J,H):ie=Z._converter.toFirestore(J),w("data",ie,!!(P||U),this._allowUndefined),this.verifyNotCommitted();let ue;P&&(ue=t.DocumentMask.fromFieldMask(H.mergeFields),ie=ue.applyTo(ie));const le=t.DocumentTransform.fromObject(Z,ie);le.validate();const ne=()=>{const ye=t.DocumentSnapshot.fromObject(Z,ie);P?ue.removeFields(le.fields):U&&(ue=t.DocumentMask.fromObject(ie));const fe=ye.toWriteProto();return le.isEmpty||(fe.updateTransforms=le.toProto(this._serializer)),(P||U)&&(fe.updateMask=ue.toProto()),fe};return this._ops.push({docPath:K.path,op:ne}),this}update(K,J,...H){(0,a.validateMinNumberOfArguments)("WriteBatch.update",arguments,2),(0,u.validateDocumentReference)("documentRef",K),this.verifyNotCommitted();const U=new Map;let P=new t.Precondition({exists:!0});const Z="Update() requires either a single JavaScript object or an alternating list of field/value pairs that can be followed by an optional precondition.";if(typeof J=="string"||J instanceof r.FieldPath){const fe=[J,...H];try{for(let Te=0;Te<fe.length;Te+=2)if(Te===fe.length-1){const Ae=fe[Te];E(Te+1,Ae),P=new t.Precondition(Ae)}else{const Ae=fe[Te];(0,r.validateFieldPath)(Te+1,Ae),(0,a.validateMinNumberOfArguments)("update",fe,Te+1);const Se=r.FieldPath.fromArgument(Ae);I(Te+1,fe[Te+1],this._allowUndefined,Se),U.set(Se,fe[Te+1])}}catch(Te){throw(0,e.logger)("WriteBatch.update",null,"Varargs validation failed:",Te),new Error(`${Z} ${Te.message}`)}}else try{S("dataOrField",J,this._allowUndefined),(0,a.validateMaxNumberOfArguments)("update",arguments,3),Object.entries(J).forEach(([ye,fe])=>{fe!==void 0&&((0,r.validateFieldPath)(ye,ye),U.set(r.FieldPath.fromArgument(ye),fe))}),H.length>0&&(E("preconditionOrValues",H[0]),P=new t.Precondition(H[0]))}catch(ye){throw(0,e.logger)("WriteBatch.update",null,"Non-varargs validation failed:",ye),new Error(`${Z} ${ye.message}`)}_("dataOrField",U);const ue=t.DocumentTransform.fromUpdateMap(K,U);ue.validate();const le=t.DocumentMask.fromUpdateMap(U),ne=()=>{const fe=t.DocumentSnapshot.fromUpdateMap(K,U).toWriteProto();return fe.updateMask=le.toProto(),ue.isEmpty||(fe.updateTransforms=ue.toProto(this._serializer)),fe.currentDocument=P.toProto(),fe};return this._ops.push({docPath:K.path,op:ne}),this}commit(){return this._firestore._traceUtil.startActiveSpan(o.SPAN_NAME_BATCH_COMMIT,async()=>{const K=Error().stack,J=[10,...(0,c.getRetryCodes)("commit")];return this._commit({retryCodes:J}).then(H=>(H.writeResults||[]).map(U=>new s(m.Timestamp.fromProto(U.updateTime||H.commitTime)))).catch(H=>{throw(0,c.wrapError)(H,K)})},{[o.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!1,[o.ATTRIBUTE_KEY_DOC_COUNT]:this._opCount})}async _commit(K){var J;this._committed=!0;const H=(J=K?.requestTag)!==null&&J!==void 0?J:(0,c.requestTag)();await this._firestore.initializeIfNeeded(H);const U={database:this._firestore.formattedName,writes:this._ops.map(P=>P.op())};return K?.transactionId&&(U.transaction=K.transactionId),(0,e.logger)("WriteBatch.commit",H,"Sending %d writes",U.writes.length),this._firestore.request(K?.methodName||"commit",U,H,K?.retryCodes)}_reset(){this._ops.splice(0),this._committed=!1}}writeBatch.WriteBatch=h;function v(j,K,J){if(typeof K!="object"||K===null)throw new Error("Input is not an object.");const H=K;let U=0;if(H.exists!==void 0){if(++U,typeof H.exists!="boolean")throw new Error(`${(0,a.invalidArgumentMessage)(j,"precondition")} "exists" is not a boolean.'`);if(J?.allowedExistsValues&&J.allowedExistsValues.indexOf(H.exists)<0)throw new Error(`${(0,a.invalidArgumentMessage)(j,"precondition")} "exists" is not allowed to have the value ${H.exists} (allowed values: ${J.allowedExistsValues.join(", ")})`)}if(H.lastUpdateTime!==void 0&&(++U,!(H.lastUpdateTime instanceof m.Timestamp)))throw new Error(`${(0,a.invalidArgumentMessage)(j,"precondition")} "lastUpdateTime" is not a Firestore Timestamp.`);if(U>1)throw new Error(`${(0,a.invalidArgumentMessage)(j,"precondition")} Input specifies more than one precondition.`)}function E(j,K,J){(0,a.validateOptional)(K,J)||v(j,K,{allowedExistsValues:[!0]})}function y(j,K,J){(0,a.validateOptional)(K,J)||v(j,K)}function A(j,K,J){if(!(0,a.validateOptional)(K,J)){if(!(0,c.isObject)(K))throw new Error(`${(0,a.invalidArgumentMessage)(j,"set() options argument")} Input is not an object.`);const H=K;if("mergeFields"in H)for(let U=0;U<H.mergeFields.length;++U)try{(0,r.validateFieldPath)(U,H.mergeFields[U])}catch(P){throw new Error(`${(0,a.invalidArgumentMessage)(j,"set() options argument")} "mergeFields" is not valid: ${P.message}`)}if("merge"in H&&"mergeFields"in H)throw new Error(`${(0,a.invalidArgumentMessage)(j,"set() options argument")} You cannot specify both "merge" and "mergeFields".`)}}function w(j,K,J,H){if(!(0,c.isPlainObject)(K))throw new Error((0,a.customObjectMessage)(j,K));(0,d.validateUserInput)(j,K,"Firestore document",{allowDeletes:J?"all":"none",allowTransforms:!0,allowUndefined:H})}function I(j,K,J,H){(0,d.validateUserInput)(j,K,"Firestore value",{allowDeletes:"root",allowTransforms:!0,allowUndefined:J},H)}function _(j,K){const J=[];K.forEach((H,U)=>{J.push(U)}),J.sort((H,U)=>H.compareTo(U));for(let H=1;H<J.length;++H)if(J[H-1].isPrefixOf(J[H]))throw new Error(`${(0,a.invalidArgumentMessage)(j,"update map")} Field "${J[H-1]}" was specified multiple times.`)}function S(j,K,J){if(!(0,c.isPlainObject)(K))throw new Error((0,a.customObjectMessage)(j,K));if(Object.keys(K).length===0)throw new Error("At least one field must be updated.");I(j,K,J)}return writeBatch}var hasRequiredBulkWriter;function requireBulkWriter(){return hasRequiredBulkWriter||(hasRequiredBulkWriter=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BulkWriter=t.BulkWriterError=t.DEFAULT_JITTER_FACTOR=t.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT=t.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT=t.RETRY_MAX_BATCH_SIZE=void 0;const e=require$$1$3,r=requireBackoff(),u=requireRateLimiter(),d=requireTimestamp(),m=requireUtil(),c=requireWriteBatch(),a=requireValidate(),o=requireLogger(),s=requireTraceUtil();/*!
 * The maximum number of writes that can be in a single batch.
 */const h=20;/*!
 * The maximum number of writes can be can in a single batch that is being retried.
 */t.RETRY_MAX_BATCH_SIZE=10;/*!
 * The starting maximum number of operations per second as allowed by the
 * 500/50/5 rule.
 *
 * https://firebase.google.com/docs/firestore/best-practices#ramping_up_traffic.
 */t.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT=500;/*!
 * The maximum number of operations per second as allowed by the 500/50/5 rule.
 * By default the rate limiter will not exceed this value.
 *
 * https://firebase.google.com/docs/firestore/best-practices#ramping_up_traffic.
 */t.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT=1e4;/*!
 * The default jitter to apply to the exponential backoff used in retries. For
 * example, a factor of 0.3 means a 30% jitter is applied.
 */t.DEFAULT_JITTER_FACTOR=.3;/*!
 * The rate by which to increase the capacity as specified by the 500/50/5 rule.
 */const v=1.5;/*!
 * How often the operations per second capacity should increase in milliseconds
 * as specified by the 500/50/5 rule.
 */const E=5*60*1e3;/*!
 * The default maximum number of pending operations that can be enqueued onto a
 * BulkWriter instance. An operation is considered pending if BulkWriter has
 * sent it via RPC and is awaiting the result. BulkWriter buffers additional
 * writes after this many pending operations in order to avoiding going OOM.
 */const y=500;class A{constructor(J,H,U,P,Z){this.ref=J,this.type=H,this.sendFn=U,this.errorFn=P,this.successFn=Z,this.deferred=new m.Deferred,this.failedAttempts=0,this._backoffDuration=0,this._flushed=!1}get promise(){return this.deferred.promise}get backoffDuration(){return this._backoffDuration}markFlushed(){this._flushed=!0}get flushed(){return this._flushed}onError(J){++this.failedAttempts;try{const H=new _(J.code,J.message,this.ref,this.type,this.failedAttempts),U=this.errorFn(H);(0,o.logger)("BulkWriter.errorFn",null,"Ran error callback on error code:",J.code,", shouldRetry:",U," for document:",this.ref.path),U?(this.lastStatus=J.code,this.updateBackoffDuration(),this.sendFn(this)):this.deferred.reject(H)}catch(H){this.deferred.reject(H)}}updateBackoffDuration(){this.lastStatus===8?this._backoffDuration=r.DEFAULT_BACKOFF_MAX_DELAY_MS:this._backoffDuration===0?this._backoffDuration=r.DEFAULT_BACKOFF_INITIAL_DELAY_MS:this._backoffDuration*=r.DEFAULT_BACKOFF_FACTOR}onSuccess(J){try{this.successFn(this.ref,J),this.deferred.resolve(J)}catch(H){this.deferred.reject(H)}}}class w extends c.WriteBatch{constructor(J,H){super(J),this.docPaths=new Set,this.pendingOps=[],this._maxBatchSize=H}get maxBatchSize(){return this._maxBatchSize}setMaxBatchSize(J){e(this.pendingOps.length<=J,"New batch size cannot be less than the number of enqueued writes"),this._maxBatchSize=J}has(J){return this.docPaths.has(J.path)}async bulkCommit(J={}){return this._firestore._traceUtil.startActiveSpan(s.SPAN_NAME_BULK_WRITER_COMMIT,async()=>{var H;const U=(H=J?.requestTag)!==null&&H!==void 0?H:(0,m.requestTag)(),P=Error().stack;let Z;try{(0,o.logger)("BulkCommitBatch.bulkCommit",U,`Sending next batch with ${this._opCount} writes`);const ie=(0,m.getRetryCodes)("batchWrite");Z=await this._commit({retryCodes:ie,methodName:"batchWrite",requestTag:U})}catch(ie){const ue=Array.from({length:this.pendingOps.length});Z={writeResults:ue.map(()=>({})),status:ue.map(()=>ie)}}for(let ie=0;ie<(Z.writeResults||[]).length;++ie){const ue=d.Timestamp.fromMillis(0),le=(Z.status||[])[ie];if(le.code===0){const ne=d.Timestamp.fromProto(Z.writeResults[ie].updateTime||ue);this.pendingOps[ie].onSuccess(new c.WriteResult(ne))}else{const ne=new(requireFallback()).GoogleError(le.message||void 0);ne.code=le.code,this.pendingOps[ie].onError((0,m.wrapError)(ne,P))}}},{[s.ATTRIBUTE_KEY_DOC_COUNT]:this._opCount})}processLastOperation(J){e(!this.docPaths.has(J.ref.path),"Batch should not contain writes to the same document"),this.docPaths.add(J.ref.path),this.pendingOps.push(J)}}class I{constructor(J,H){this.operation=J,this.sendFn=H}}class _ extends Error{constructor(J,H,U,P,Z){super(H),this.code=J,this.message=H,this.documentRef=U,this.operationType=P,this.failedAttempts=Z}}t.BulkWriterError=_;class S{_getBufferedOperationsCount(){return this._bufferedOperations.length}_setMaxBatchSize(J){e(this._bulkCommitBatch.pendingOps.length===0,"BulkCommitBatch should be empty"),this._maxBatchSize=J,this._bulkCommitBatch=new w(this.firestore,J)}_setMaxPendingOpCount(J){this._maxPendingOpCount=J}constructor(J,H){var U,P;if(this.firestore=J,this._maxBatchSize=h,this._bulkCommitBatch=new w(this.firestore,this._maxBatchSize),this._lastOp=Promise.resolve(),this._pendingOpsCount=0,this._bufferedOperations=[],this._errorHandlerSet=!1,this._maxPendingOpCount=y,this._successFn=()=>{},this._errorFn=Z=>{const ie=Z.operationType==="delete"&&Z.code===13;return((0,m.getRetryCodes)("batchWrite").includes(Z.code)||ie)&&Z.failedAttempts<r.MAX_RETRY_ATTEMPTS},this.firestore._incrementBulkWritersCount(),j(H),H?.throttling===!1)this._rateLimiter=new u.RateLimiter(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);else{let Z=t.DEFAULT_INITIAL_OPS_PER_SECOND_LIMIT,ie=t.DEFAULT_MAXIMUM_OPS_PER_SECOND_LIMIT;typeof H?.throttling!="boolean"&&(((U=H?.throttling)===null||U===void 0?void 0:U.maxOpsPerSecond)!==void 0&&(ie=H.throttling.maxOpsPerSecond),((P=H?.throttling)===null||P===void 0?void 0:P.initialOpsPerSecond)!==void 0&&(Z=H.throttling.initialOpsPerSecond),ie<Z&&(Z=ie),Z<this._maxBatchSize&&(this._maxBatchSize=Z)),this._rateLimiter=new u.RateLimiter(Z,v,E,ie)}}create(J,H){return this._verifyNotClosed(),this._enqueue(J,"create",U=>U.create(J,H))}delete(J,H){return this._verifyNotClosed(),this._enqueue(J,"delete",U=>U.delete(J,H))}set(J,H,U){return this._verifyNotClosed(),this._enqueue(J,"set",P=>U?P.set(J,H,U):P.set(J,H))}update(J,H,...U){return this._verifyNotClosed(),this._enqueue(J,"update",P=>P.update(J,H,...U))}onWriteResult(J){this._successFn=J}onWriteError(J){this._errorHandlerSet=!0,this._errorFn=J}flush(){return this._verifyNotClosed(),this._scheduleCurrentBatch(!0),this._bufferedOperations.length>0&&this._bufferedOperations[this._bufferedOperations.length-1].operation.markFlushed(),this._lastOp}close(){return this._closePromise||(this._closePromise=this.flush(),this.firestore._decrementBulkWritersCount()),this._closePromise}_verifyNotClosed(){if(this._closePromise)throw new Error("BulkWriter has already been closed.")}_scheduleCurrentBatch(J=!1){if(this._bulkCommitBatch._opCount===0)return;const H=this._bulkCommitBatch;this._bulkCommitBatch=new w(this.firestore,this._maxBatchSize);const U=H.pendingOps.reduce((ie,ue)=>ie.backoffDuration>ue.backoffDuration?ie:ue).backoffDuration,P=S._applyJitter(U),Z=new m.Deferred;P>0?(0,r.delayExecution)(()=>Z.resolve(),P):Z.resolve(),Z.promise.then(()=>this._sendBatch(H,J))}async _sendBatch(J,H=!1){const U=(0,m.requestTag)();if(this._rateLimiter.tryMakeRequest(J._opCount))await J.bulkCommit({requestTag:U}),H&&this._scheduleCurrentBatch(H);else{const Z=this._rateLimiter.getNextRequestDelayMs(J._opCount);(0,o.logger)("BulkWriter._sendBatch",U,`Backing off for ${Z} seconds`),(0,r.delayExecution)(()=>this._sendBatch(J,H),Z)}}static _applyJitter(J){if(J===0)return 0;const H=t.DEFAULT_JITTER_FACTOR*(Math.random()*2-1);return Math.min(r.DEFAULT_BACKOFF_MAX_DELAY_MS,J+H*J)}_enqueue(J,H,U){const P=new A(J,H,this._sendFn.bind(this,U),this._errorFn.bind(this),this._successFn.bind(this)),Z=P.promise.catch(ie=>{if(this._errorHandlerSet)return P.promise;throw ie});return this._lastOp=this._lastOp.then(()=>(0,m.silencePromise)(Z)),this._pendingOpsCount<this._maxPendingOpCount?(this._pendingOpsCount++,this._sendFn(U,P)):this._bufferedOperations.push(new I(P,()=>{this._pendingOpsCount++,this._sendFn(U,P)})),Z.then(ie=>(this._pendingOpsCount--,this._processBufferedOps(),ie)).catch(ie=>{throw this._pendingOpsCount--,this._processBufferedOps(),ie})}_processBufferedOps(){this._pendingOpsCount<this._maxPendingOpCount&&this._bufferedOperations.length>0&&this._bufferedOperations.shift().sendFn()}_sendFn(J,H){H.backoffDuration>0&&(this._bulkCommitBatch.pendingOps.length>=t.RETRY_MAX_BATCH_SIZE&&this._scheduleCurrentBatch(!1),this._bulkCommitBatch.setMaxBatchSize(t.RETRY_MAX_BATCH_SIZE)),this._bulkCommitBatch.has(H.ref)&&this._scheduleCurrentBatch(),J(this._bulkCommitBatch),this._bulkCommitBatch.processLastOperation(H),this._bulkCommitBatch._opCount===this._bulkCommitBatch.maxBatchSize?this._scheduleCurrentBatch():H.flushed&&this._scheduleCurrentBatch(!0)}}t.BulkWriter=S;function j(K){if((0,a.validateOptional)(K,{optional:!0}))return;const J="options";if(!(0,m.isObject)(K))throw new Error(`${(0,a.invalidArgumentMessage)(J,"bulkWriter() options argument")} Input is not an object.`);const H=K;if(!(H.throttling===void 0||typeof H.throttling=="boolean")&&(H.throttling.initialOpsPerSecond!==void 0&&(0,a.validateInteger)("initialOpsPerSecond",H.throttling.initialOpsPerSecond,{minValue:1}),H.throttling.maxOpsPerSecond!==void 0&&((0,a.validateInteger)("maxOpsPerSecond",H.throttling.maxOpsPerSecond,{minValue:1}),H.throttling.initialOpsPerSecond!==void 0&&H.throttling.initialOpsPerSecond>H.throttling.maxOpsPerSecond)))throw new Error(`${(0,a.invalidArgumentMessage)(J,"bulkWriter() options argument")} "maxOpsPerSecond" cannot be less than "initialOpsPerSecond".`)}}(bulkWriter)),bulkWriter}var bundle={},firestore_v1_proto_api={exports:{}},hasRequiredFirestore_v1_proto_api;function requireFirestore_v1_proto_api(){return hasRequiredFirestore_v1_proto_api||(hasRequiredFirestore_v1_proto_api=1,function(t){(e=>{typeof commonjsRequire=="function"&&t&&t.exports&&(t.exports=e(requireMinimal()))})(function(e){var r,u,d,m,c,a=e.util,o=e.roots.firestore_v1||(e.roots.firestore_v1={});function s(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function h(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function v(n){if(this.queries=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function E(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function y(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function A(n){if(this.aggregateFields={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function w(n){if(this.fields={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function I(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function _(n){if(this.values=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function S(n){if(this.fields={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function j(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function K(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function J(n){if(this.fieldPaths=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function H(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function U(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function P(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Z(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ie(n,b,T){e.rpc.Service.call(this,n,b,T)}function ue(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function le(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ne(n){if(this.documents=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ye(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function fe(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Te(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ae(n){if(this.documents=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Se(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function be(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function we(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ce(n){if(this.writes=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function je(n){if(this.writeResults=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Fe(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ve(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ge(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Le(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Be(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function $e(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function he(n){if(this.partitions=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function p(n){if(this.writes=[],this.labels={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function V(n){if(this.writeResults=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function R(n){if(this.labels={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ce(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Re(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ke(n){if(this.documents=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function qe(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function g(n){if(this.targetIds=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ee(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ae(n){if(this.collectionIds=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function l(n){if(this.writes=[],this.labels={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function X(n){if(this.writeResults=[],this.status=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function oe(n){if(this.from=[],this.orderBy=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function _e(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function He(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function nt(n){if(this.filters=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function It(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function wt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ir(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function _r(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Rr(n){if(this.fields=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Hr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Vr(n){if(this.aggregations=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Tr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function $t(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function qt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Kt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function nr(n){if(this.values=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function dr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Er(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Mr(n){if(this.indexesUsed=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function jr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function xr(n){if(this.updateTransforms=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function kn(n){if(this.fieldTransforms=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function gn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function bn(n){if(this.transformResults=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Tn(n){if(this.targetIds=[],this.removedTargetIds=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function yn(n){if(this.removedTargetIds=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Xr(n){if(this.removedTargetIds=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Rn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function yr(n){if(this.rules=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Wr(n){if(this.additionalBindings=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Yr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function vn(n){if(this.destinations=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ur(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Zr(n){if(this.methodSettings=[],this.codeownerGithubTeams=[],this.librarySettings=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Fr(n){if(this.serviceClassNames={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function tt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function et(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function dt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Bt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ct(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function pr(n){if(this.renamedServices={},this.renamedResources={},this.ignoredResources=[],this.forcedNamespaceAliases=[],this.handwrittenSignatures=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Sr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function un(n){if(this.renamedServices={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ln(n){if(this.autoPopulatedFields=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function In(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Un(n){if(this.methods=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Pr(n){if(this.pattern=[],this.style=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ir(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function si(n){if(this.file=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Dr(n){if(this.dependency=[],this.publicDependency=[],this.weakDependency=[],this.messageType=[],this.enumType=[],this.service=[],this.extension=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Bn(n){if(this.field=[],this.extension=[],this.nestedType=[],this.enumType=[],this.extensionRange=[],this.oneofDecl=[],this.reservedRange=[],this.reservedName=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ai(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function xn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function mn(n){if(this.uninterpretedOption=[],this.declaration=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Wn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Yn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ai(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ue(n){if(this.value=[],this.reservedRange=[],this.reservedName=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function We(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ze(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function yt(n){if(this.method=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function tr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function er(n){if(this.uninterpretedOption=[],this[".google.api.resourceDefinition"]=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function fr(n){if(this.uninterpretedOption=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function sr(n){if(this.targets=[],this.editionDefaults=[],this.uninterpretedOption=[],this[".google.api.fieldBehavior"]=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Qr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Pn(n){if(this.uninterpretedOption=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Qn(n){if(this.uninterpretedOption=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Sn(n){if(this.uninterpretedOption=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function dn(n){if(this.uninterpretedOption=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function $n(n){if(this.uninterpretedOption=[],this[".google.api.methodSignature"]=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function On(n){if(this.name=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function qn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function vr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Dn(n){if(this.defaults=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Lr(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function mi(n){if(this.location=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function bi(n){if(this.path=[],this.span=[],this.leadingDetachedComments=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function zi(n){if(this.annotation=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function $i(n){if(this.path=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ao(n){if(this.fields={},n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ki(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ji(n){if(this.values=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function yi(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Cn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ni(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Oi(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Li(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Xn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function vi(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Oo(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function lo(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Gn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function yo(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function wo(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Zn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function qi(n){if(this.paths=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ci(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function li(n){if(this.details=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ui(n,b,T){e.rpc.Service.call(this,n,b,T)}function Qe(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Nt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Dt(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Ar(n){if(this.operations=[],n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Hn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function Jn(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function di(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}function ei(n){if(n)for(var b=Object.keys(n),T=0;T<b.length;++T)n[b[T]]!=null&&(this[b[T]]=n[b[T]])}return o.firestore=((d={}).BundledQuery=(s.prototype.parent="",s.prototype.structuredQuery=null,s.prototype.limitType=0,Object.defineProperty(s.prototype,"queryType",{get:a.oneOfGetter(u=["structuredQuery"]),set:a.oneOfSetter(u)}),s.fromObject=function(n){if(n instanceof o.firestore.BundledQuery)return n;var b=new o.firestore.BundledQuery;if(n.parent!=null&&(b.parent=String(n.parent)),n.structuredQuery!=null){if(typeof n.structuredQuery!="object")throw TypeError(".firestore.BundledQuery.structuredQuery: object expected");b.structuredQuery=o.google.firestore.v1.StructuredQuery.fromObject(n.structuredQuery)}switch(n.limitType){default:typeof n.limitType=="number"&&(b.limitType=n.limitType);break;case"FIRST":case 0:b.limitType=0;break;case"LAST":case 1:b.limitType=1}return b},s.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.parent="",T.limitType=b.enums===String?"FIRST":0),n.parent!=null&&n.hasOwnProperty("parent")&&(T.parent=n.parent),n.structuredQuery!=null&&n.hasOwnProperty("structuredQuery")&&(T.structuredQuery=o.google.firestore.v1.StructuredQuery.toObject(n.structuredQuery,b),b.oneofs)&&(T.queryType="structuredQuery"),n.limitType!=null&&n.hasOwnProperty("limitType")&&(T.limitType=b.enums!==String||o.firestore.BundledQuery.LimitType[n.limitType]===void 0?n.limitType:o.firestore.BundledQuery.LimitType[n.limitType]),T},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/firestore.BundledQuery"},s.LimitType=(u={},(c=Object.create(u))[u[0]="FIRST"]="FIRST",c[u[1]="LAST"]="LAST",c),s),d.NamedQuery=(h.prototype.name="",h.prototype.bundledQuery=null,h.prototype.readTime=null,h.fromObject=function(n){if(n instanceof o.firestore.NamedQuery)return n;var b=new o.firestore.NamedQuery;if(n.name!=null&&(b.name=String(n.name)),n.bundledQuery!=null){if(typeof n.bundledQuery!="object")throw TypeError(".firestore.NamedQuery.bundledQuery: object expected");b.bundledQuery=o.firestore.BundledQuery.fromObject(n.bundledQuery)}if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".firestore.NamedQuery.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},h.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.bundledQuery=null,T.readTime=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.bundledQuery!=null&&n.hasOwnProperty("bundledQuery")&&(T.bundledQuery=o.firestore.BundledQuery.toObject(n.bundledQuery,b)),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),T},h.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},h.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/firestore.NamedQuery"},h),d.BundledDocumentMetadata=(v.prototype.name="",v.prototype.readTime=null,v.prototype.exists=!1,v.prototype.queries=a.emptyArray,v.fromObject=function(n){if(n instanceof o.firestore.BundledDocumentMetadata)return n;var b=new o.firestore.BundledDocumentMetadata;if(n.name!=null&&(b.name=String(n.name)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".firestore.BundledDocumentMetadata.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}if(n.exists!=null&&(b.exists=!!n.exists),n.queries){if(!Array.isArray(n.queries))throw TypeError(".firestore.BundledDocumentMetadata.queries: array expected");b.queries=[];for(var T=0;T<n.queries.length;++T)b.queries[T]=String(n.queries[T])}return b},v.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.queries=[]),b.defaults&&(T.name="",T.readTime=null,T.exists=!1),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),n.exists!=null&&n.hasOwnProperty("exists")&&(T.exists=n.exists),n.queries&&n.queries.length){T.queries=[];for(var Ne=0;Ne<n.queries.length;++Ne)T.queries[Ne]=n.queries[Ne]}return T},v.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},v.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/firestore.BundledDocumentMetadata"},v),d.BundleMetadata=(E.prototype.id="",E.prototype.createTime=null,E.prototype.version=0,E.prototype.totalDocuments=0,E.prototype.totalBytes=a.Long?a.Long.fromBits(0,0,!0):0,E.fromObject=function(n){if(n instanceof o.firestore.BundleMetadata)return n;var b=new o.firestore.BundleMetadata;if(n.id!=null&&(b.id=String(n.id)),n.createTime!=null){if(typeof n.createTime!="object")throw TypeError(".firestore.BundleMetadata.createTime: object expected");b.createTime=o.google.protobuf.Timestamp.fromObject(n.createTime)}return n.version!=null&&(b.version=n.version>>>0),n.totalDocuments!=null&&(b.totalDocuments=n.totalDocuments>>>0),n.totalBytes!=null&&(a.Long?(b.totalBytes=a.Long.fromValue(n.totalBytes)).unsigned=!0:typeof n.totalBytes=="string"?b.totalBytes=parseInt(n.totalBytes,10):typeof n.totalBytes=="number"?b.totalBytes=n.totalBytes:typeof n.totalBytes=="object"&&(b.totalBytes=new a.LongBits(n.totalBytes.low>>>0,n.totalBytes.high>>>0).toNumber(!0))),b},E.toObject=function(n,b){var T,Ne={};return(b=b||{}).defaults&&(Ne.id="",Ne.createTime=null,Ne.version=0,Ne.totalDocuments=0,a.Long?(T=new a.Long(0,0,!0),Ne.totalBytes=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.totalBytes=b.longs===String?"0":0),n.id!=null&&n.hasOwnProperty("id")&&(Ne.id=n.id),n.createTime!=null&&n.hasOwnProperty("createTime")&&(Ne.createTime=o.google.protobuf.Timestamp.toObject(n.createTime,b)),n.version!=null&&n.hasOwnProperty("version")&&(Ne.version=n.version),n.totalDocuments!=null&&n.hasOwnProperty("totalDocuments")&&(Ne.totalDocuments=n.totalDocuments),n.totalBytes!=null&&n.hasOwnProperty("totalBytes")&&(typeof n.totalBytes=="number"?Ne.totalBytes=b.longs===String?String(n.totalBytes):n.totalBytes:Ne.totalBytes=b.longs===String?a.Long.prototype.toString.call(n.totalBytes):b.longs===Number?new a.LongBits(n.totalBytes.low>>>0,n.totalBytes.high>>>0).toNumber(!0):n.totalBytes),Ne},E.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},E.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/firestore.BundleMetadata"},E),d.BundleElement=(y.prototype.metadata=null,y.prototype.namedQuery=null,y.prototype.documentMetadata=null,y.prototype.document=null,Object.defineProperty(y.prototype,"elementType",{get:a.oneOfGetter(u=["metadata","namedQuery","documentMetadata","document"]),set:a.oneOfSetter(u)}),y.fromObject=function(n){if(n instanceof o.firestore.BundleElement)return n;var b=new o.firestore.BundleElement;if(n.metadata!=null){if(typeof n.metadata!="object")throw TypeError(".firestore.BundleElement.metadata: object expected");b.metadata=o.firestore.BundleMetadata.fromObject(n.metadata)}if(n.namedQuery!=null){if(typeof n.namedQuery!="object")throw TypeError(".firestore.BundleElement.namedQuery: object expected");b.namedQuery=o.firestore.NamedQuery.fromObject(n.namedQuery)}if(n.documentMetadata!=null){if(typeof n.documentMetadata!="object")throw TypeError(".firestore.BundleElement.documentMetadata: object expected");b.documentMetadata=o.firestore.BundledDocumentMetadata.fromObject(n.documentMetadata)}if(n.document!=null){if(typeof n.document!="object")throw TypeError(".firestore.BundleElement.document: object expected");b.document=o.google.firestore.v1.Document.fromObject(n.document)}return b},y.toObject=function(n,b){b=b||{};var T={};return n.metadata!=null&&n.hasOwnProperty("metadata")&&(T.metadata=o.firestore.BundleMetadata.toObject(n.metadata,b),b.oneofs)&&(T.elementType="metadata"),n.namedQuery!=null&&n.hasOwnProperty("namedQuery")&&(T.namedQuery=o.firestore.NamedQuery.toObject(n.namedQuery,b),b.oneofs)&&(T.elementType="namedQuery"),n.documentMetadata!=null&&n.hasOwnProperty("documentMetadata")&&(T.documentMetadata=o.firestore.BundledDocumentMetadata.toObject(n.documentMetadata,b),b.oneofs)&&(T.elementType="documentMetadata"),n.document!=null&&n.hasOwnProperty("document")&&(T.document=o.google.firestore.v1.Document.toObject(n.document,b),b.oneofs)&&(T.elementType="document"),T},y.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},y.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/firestore.BundleElement"},y),d),o.google=((c={}).firestore=((u={}).v1=((d={}).AggregationResult=(A.prototype.aggregateFields=a.emptyObject,A.fromObject=function(n){if(n instanceof o.google.firestore.v1.AggregationResult)return n;var b=new o.google.firestore.v1.AggregationResult;if(n.aggregateFields){if(typeof n.aggregateFields!="object")throw TypeError(".google.firestore.v1.AggregationResult.aggregateFields: object expected");b.aggregateFields={};for(var T=Object.keys(n.aggregateFields),Ne=0;Ne<T.length;++Ne){if(typeof n.aggregateFields[T[Ne]]!="object")throw TypeError(".google.firestore.v1.AggregationResult.aggregateFields: object expected");b.aggregateFields[T[Ne]]=o.google.firestore.v1.Value.fromObject(n.aggregateFields[T[Ne]])}}return b},A.toObject=function(n,b){var T,Ne={};if(((b=b||{}).objects||b.defaults)&&(Ne.aggregateFields={}),n.aggregateFields&&(T=Object.keys(n.aggregateFields)).length){Ne.aggregateFields={};for(var ur=0;ur<T.length;++ur)Ne.aggregateFields[T[ur]]=o.google.firestore.v1.Value.toObject(n.aggregateFields[T[ur]],b)}return Ne},A.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},A.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.AggregationResult"},A),d.Document=(w.prototype.name="",w.prototype.fields=a.emptyObject,w.prototype.createTime=null,w.prototype.updateTime=null,w.fromObject=function(n){if(n instanceof o.google.firestore.v1.Document)return n;var b=new o.google.firestore.v1.Document;if(n.name!=null&&(b.name=String(n.name)),n.fields){if(typeof n.fields!="object")throw TypeError(".google.firestore.v1.Document.fields: object expected");b.fields={};for(var T=Object.keys(n.fields),Ne=0;Ne<T.length;++Ne){if(typeof n.fields[T[Ne]]!="object")throw TypeError(".google.firestore.v1.Document.fields: object expected");b.fields[T[Ne]]=o.google.firestore.v1.Value.fromObject(n.fields[T[Ne]])}}if(n.createTime!=null){if(typeof n.createTime!="object")throw TypeError(".google.firestore.v1.Document.createTime: object expected");b.createTime=o.google.protobuf.Timestamp.fromObject(n.createTime)}if(n.updateTime!=null){if(typeof n.updateTime!="object")throw TypeError(".google.firestore.v1.Document.updateTime: object expected");b.updateTime=o.google.protobuf.Timestamp.fromObject(n.updateTime)}return b},w.toObject=function(n,b){var T,Ne={};if(((b=b||{}).objects||b.defaults)&&(Ne.fields={}),b.defaults&&(Ne.name="",Ne.createTime=null,Ne.updateTime=null),n.name!=null&&n.hasOwnProperty("name")&&(Ne.name=n.name),n.fields&&(T=Object.keys(n.fields)).length){Ne.fields={};for(var ur=0;ur<T.length;++ur)Ne.fields[T[ur]]=o.google.firestore.v1.Value.toObject(n.fields[T[ur]],b)}return n.createTime!=null&&n.hasOwnProperty("createTime")&&(Ne.createTime=o.google.protobuf.Timestamp.toObject(n.createTime,b)),n.updateTime!=null&&n.hasOwnProperty("updateTime")&&(Ne.updateTime=o.google.protobuf.Timestamp.toObject(n.updateTime,b)),Ne},w.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},w.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Document"},w),d.Value=(I.prototype.nullValue=null,I.prototype.booleanValue=null,I.prototype.integerValue=null,I.prototype.doubleValue=null,I.prototype.timestampValue=null,I.prototype.stringValue=null,I.prototype.bytesValue=null,I.prototype.referenceValue=null,I.prototype.geoPointValue=null,I.prototype.arrayValue=null,I.prototype.mapValue=null,Object.defineProperty(I.prototype,"valueType",{get:a.oneOfGetter(m=["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]),set:a.oneOfSetter(m)}),I.fromObject=function(n){if(n instanceof o.google.firestore.v1.Value)return n;var b=new o.google.firestore.v1.Value;switch(n.nullValue){default:typeof n.nullValue=="number"&&(b.nullValue=n.nullValue);break;case"NULL_VALUE":case 0:b.nullValue=0}if(n.booleanValue!=null&&(b.booleanValue=!!n.booleanValue),n.integerValue!=null&&(a.Long?(b.integerValue=a.Long.fromValue(n.integerValue)).unsigned=!1:typeof n.integerValue=="string"?b.integerValue=parseInt(n.integerValue,10):typeof n.integerValue=="number"?b.integerValue=n.integerValue:typeof n.integerValue=="object"&&(b.integerValue=new a.LongBits(n.integerValue.low>>>0,n.integerValue.high>>>0).toNumber())),n.doubleValue!=null&&(b.doubleValue=Number(n.doubleValue)),n.timestampValue!=null){if(typeof n.timestampValue!="object")throw TypeError(".google.firestore.v1.Value.timestampValue: object expected");b.timestampValue=o.google.protobuf.Timestamp.fromObject(n.timestampValue)}if(n.stringValue!=null&&(b.stringValue=String(n.stringValue)),n.bytesValue!=null&&(typeof n.bytesValue=="string"?a.base64.decode(n.bytesValue,b.bytesValue=a.newBuffer(a.base64.length(n.bytesValue)),0):0<=n.bytesValue.length&&(b.bytesValue=n.bytesValue)),n.referenceValue!=null&&(b.referenceValue=String(n.referenceValue)),n.geoPointValue!=null){if(typeof n.geoPointValue!="object")throw TypeError(".google.firestore.v1.Value.geoPointValue: object expected");b.geoPointValue=o.google.type.LatLng.fromObject(n.geoPointValue)}if(n.arrayValue!=null){if(typeof n.arrayValue!="object")throw TypeError(".google.firestore.v1.Value.arrayValue: object expected");b.arrayValue=o.google.firestore.v1.ArrayValue.fromObject(n.arrayValue)}if(n.mapValue!=null){if(typeof n.mapValue!="object")throw TypeError(".google.firestore.v1.Value.mapValue: object expected");b.mapValue=o.google.firestore.v1.MapValue.fromObject(n.mapValue)}return b},I.toObject=function(n,b){b=b||{};var T={};return n.booleanValue!=null&&n.hasOwnProperty("booleanValue")&&(T.booleanValue=n.booleanValue,b.oneofs)&&(T.valueType="booleanValue"),n.integerValue!=null&&n.hasOwnProperty("integerValue")&&(typeof n.integerValue=="number"?T.integerValue=b.longs===String?String(n.integerValue):n.integerValue:T.integerValue=b.longs===String?a.Long.prototype.toString.call(n.integerValue):b.longs===Number?new a.LongBits(n.integerValue.low>>>0,n.integerValue.high>>>0).toNumber():n.integerValue,b.oneofs)&&(T.valueType="integerValue"),n.doubleValue!=null&&n.hasOwnProperty("doubleValue")&&(T.doubleValue=b.json&&!isFinite(n.doubleValue)?String(n.doubleValue):n.doubleValue,b.oneofs)&&(T.valueType="doubleValue"),n.referenceValue!=null&&n.hasOwnProperty("referenceValue")&&(T.referenceValue=n.referenceValue,b.oneofs)&&(T.valueType="referenceValue"),n.mapValue!=null&&n.hasOwnProperty("mapValue")&&(T.mapValue=o.google.firestore.v1.MapValue.toObject(n.mapValue,b),b.oneofs)&&(T.valueType="mapValue"),n.geoPointValue!=null&&n.hasOwnProperty("geoPointValue")&&(T.geoPointValue=o.google.type.LatLng.toObject(n.geoPointValue,b),b.oneofs)&&(T.valueType="geoPointValue"),n.arrayValue!=null&&n.hasOwnProperty("arrayValue")&&(T.arrayValue=o.google.firestore.v1.ArrayValue.toObject(n.arrayValue,b),b.oneofs)&&(T.valueType="arrayValue"),n.timestampValue!=null&&n.hasOwnProperty("timestampValue")&&(T.timestampValue=o.google.protobuf.Timestamp.toObject(n.timestampValue,b),b.oneofs)&&(T.valueType="timestampValue"),n.nullValue!=null&&n.hasOwnProperty("nullValue")&&(T.nullValue=b.enums!==String||o.google.protobuf.NullValue[n.nullValue]===void 0?n.nullValue:o.google.protobuf.NullValue[n.nullValue],b.oneofs)&&(T.valueType="nullValue"),n.stringValue!=null&&n.hasOwnProperty("stringValue")&&(T.stringValue=n.stringValue,b.oneofs)&&(T.valueType="stringValue"),n.bytesValue!=null&&n.hasOwnProperty("bytesValue")&&(T.bytesValue=b.bytes===String?a.base64.encode(n.bytesValue,0,n.bytesValue.length):b.bytes===Array?Array.prototype.slice.call(n.bytesValue):n.bytesValue,b.oneofs)&&(T.valueType="bytesValue"),T},I.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},I.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Value"},I),d.ArrayValue=(_.prototype.values=a.emptyArray,_.fromObject=function(n){if(n instanceof o.google.firestore.v1.ArrayValue)return n;var b=new o.google.firestore.v1.ArrayValue;if(n.values){if(!Array.isArray(n.values))throw TypeError(".google.firestore.v1.ArrayValue.values: array expected");b.values=[];for(var T=0;T<n.values.length;++T){if(typeof n.values[T]!="object")throw TypeError(".google.firestore.v1.ArrayValue.values: object expected");b.values[T]=o.google.firestore.v1.Value.fromObject(n.values[T])}}return b},_.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.values=[]),n.values&&n.values.length){T.values=[];for(var Ne=0;Ne<n.values.length;++Ne)T.values[Ne]=o.google.firestore.v1.Value.toObject(n.values[Ne],b)}return T},_.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},_.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ArrayValue"},_),d.MapValue=(S.prototype.fields=a.emptyObject,S.fromObject=function(n){if(n instanceof o.google.firestore.v1.MapValue)return n;var b=new o.google.firestore.v1.MapValue;if(n.fields){if(typeof n.fields!="object")throw TypeError(".google.firestore.v1.MapValue.fields: object expected");b.fields={};for(var T=Object.keys(n.fields),Ne=0;Ne<T.length;++Ne){if(typeof n.fields[T[Ne]]!="object")throw TypeError(".google.firestore.v1.MapValue.fields: object expected");b.fields[T[Ne]]=o.google.firestore.v1.Value.fromObject(n.fields[T[Ne]])}}return b},S.toObject=function(n,b){var T,Ne={};if(((b=b||{}).objects||b.defaults)&&(Ne.fields={}),n.fields&&(T=Object.keys(n.fields)).length){Ne.fields={};for(var ur=0;ur<T.length;++ur)Ne.fields[T[ur]]=o.google.firestore.v1.Value.toObject(n.fields[T[ur]],b)}return Ne},S.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},S.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.MapValue"},S),d.BitSequence=(j.prototype.bitmap=a.newBuffer([]),j.prototype.padding=0,j.fromObject=function(n){var b;return n instanceof o.google.firestore.v1.BitSequence?n:(b=new o.google.firestore.v1.BitSequence,n.bitmap!=null&&(typeof n.bitmap=="string"?a.base64.decode(n.bitmap,b.bitmap=a.newBuffer(a.base64.length(n.bitmap)),0):0<=n.bitmap.length&&(b.bitmap=n.bitmap)),n.padding!=null&&(b.padding=0|n.padding),b)},j.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(b.bytes===String?T.bitmap="":(T.bitmap=[],b.bytes!==Array&&(T.bitmap=a.newBuffer(T.bitmap))),T.padding=0),n.bitmap!=null&&n.hasOwnProperty("bitmap")&&(T.bitmap=b.bytes===String?a.base64.encode(n.bitmap,0,n.bitmap.length):b.bytes===Array?Array.prototype.slice.call(n.bitmap):n.bitmap),n.padding!=null&&n.hasOwnProperty("padding")&&(T.padding=n.padding),T},j.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},j.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BitSequence"},j),d.BloomFilter=(K.prototype.bits=null,K.prototype.hashCount=0,K.fromObject=function(n){if(n instanceof o.google.firestore.v1.BloomFilter)return n;var b=new o.google.firestore.v1.BloomFilter;if(n.bits!=null){if(typeof n.bits!="object")throw TypeError(".google.firestore.v1.BloomFilter.bits: object expected");b.bits=o.google.firestore.v1.BitSequence.fromObject(n.bits)}return n.hashCount!=null&&(b.hashCount=0|n.hashCount),b},K.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.bits=null,T.hashCount=0),n.bits!=null&&n.hasOwnProperty("bits")&&(T.bits=o.google.firestore.v1.BitSequence.toObject(n.bits,b)),n.hashCount!=null&&n.hasOwnProperty("hashCount")&&(T.hashCount=n.hashCount),T},K.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},K.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BloomFilter"},K),d.DocumentMask=(J.prototype.fieldPaths=a.emptyArray,J.fromObject=function(n){if(n instanceof o.google.firestore.v1.DocumentMask)return n;var b=new o.google.firestore.v1.DocumentMask;if(n.fieldPaths){if(!Array.isArray(n.fieldPaths))throw TypeError(".google.firestore.v1.DocumentMask.fieldPaths: array expected");b.fieldPaths=[];for(var T=0;T<n.fieldPaths.length;++T)b.fieldPaths[T]=String(n.fieldPaths[T])}return b},J.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.fieldPaths=[]),n.fieldPaths&&n.fieldPaths.length){T.fieldPaths=[];for(var Ne=0;Ne<n.fieldPaths.length;++Ne)T.fieldPaths[Ne]=n.fieldPaths[Ne]}return T},J.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},J.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.DocumentMask"},J),d.Precondition=(H.prototype.exists=null,H.prototype.updateTime=null,Object.defineProperty(H.prototype,"conditionType",{get:a.oneOfGetter(m=["exists","updateTime"]),set:a.oneOfSetter(m)}),H.fromObject=function(n){if(n instanceof o.google.firestore.v1.Precondition)return n;var b=new o.google.firestore.v1.Precondition;if(n.exists!=null&&(b.exists=!!n.exists),n.updateTime!=null){if(typeof n.updateTime!="object")throw TypeError(".google.firestore.v1.Precondition.updateTime: object expected");b.updateTime=o.google.protobuf.Timestamp.fromObject(n.updateTime)}return b},H.toObject=function(n,b){b=b||{};var T={};return n.exists!=null&&n.hasOwnProperty("exists")&&(T.exists=n.exists,b.oneofs)&&(T.conditionType="exists"),n.updateTime!=null&&n.hasOwnProperty("updateTime")&&(T.updateTime=o.google.protobuf.Timestamp.toObject(n.updateTime,b),b.oneofs)&&(T.conditionType="updateTime"),T},H.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},H.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Precondition"},H),d.TransactionOptions=(U.prototype.readOnly=null,U.prototype.readWrite=null,Object.defineProperty(U.prototype,"mode",{get:a.oneOfGetter(m=["readOnly","readWrite"]),set:a.oneOfSetter(m)}),U.fromObject=function(n){if(n instanceof o.google.firestore.v1.TransactionOptions)return n;var b=new o.google.firestore.v1.TransactionOptions;if(n.readOnly!=null){if(typeof n.readOnly!="object")throw TypeError(".google.firestore.v1.TransactionOptions.readOnly: object expected");b.readOnly=o.google.firestore.v1.TransactionOptions.ReadOnly.fromObject(n.readOnly)}if(n.readWrite!=null){if(typeof n.readWrite!="object")throw TypeError(".google.firestore.v1.TransactionOptions.readWrite: object expected");b.readWrite=o.google.firestore.v1.TransactionOptions.ReadWrite.fromObject(n.readWrite)}return b},U.toObject=function(n,b){b=b||{};var T={};return n.readOnly!=null&&n.hasOwnProperty("readOnly")&&(T.readOnly=o.google.firestore.v1.TransactionOptions.ReadOnly.toObject(n.readOnly,b),b.oneofs)&&(T.mode="readOnly"),n.readWrite!=null&&n.hasOwnProperty("readWrite")&&(T.readWrite=o.google.firestore.v1.TransactionOptions.ReadWrite.toObject(n.readWrite,b),b.oneofs)&&(T.mode="readWrite"),T},U.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},U.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.TransactionOptions"},U.ReadWrite=(P.prototype.retryTransaction=a.newBuffer([]),P.fromObject=function(n){var b;return n instanceof o.google.firestore.v1.TransactionOptions.ReadWrite?n:(b=new o.google.firestore.v1.TransactionOptions.ReadWrite,n.retryTransaction!=null&&(typeof n.retryTransaction=="string"?a.base64.decode(n.retryTransaction,b.retryTransaction=a.newBuffer(a.base64.length(n.retryTransaction)),0):0<=n.retryTransaction.length&&(b.retryTransaction=n.retryTransaction)),b)},P.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(b.bytes===String?T.retryTransaction="":(T.retryTransaction=[],b.bytes!==Array&&(T.retryTransaction=a.newBuffer(T.retryTransaction)))),n.retryTransaction!=null&&n.hasOwnProperty("retryTransaction")&&(T.retryTransaction=b.bytes===String?a.base64.encode(n.retryTransaction,0,n.retryTransaction.length):b.bytes===Array?Array.prototype.slice.call(n.retryTransaction):n.retryTransaction),T},P.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},P.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.TransactionOptions.ReadWrite"},P),U.ReadOnly=(Z.prototype.readTime=null,Object.defineProperty(Z.prototype,"consistencySelector",{get:a.oneOfGetter(m=["readTime"]),set:a.oneOfSetter(m)}),Z.fromObject=function(n){if(n instanceof o.google.firestore.v1.TransactionOptions.ReadOnly)return n;var b=new o.google.firestore.v1.TransactionOptions.ReadOnly;if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.TransactionOptions.ReadOnly.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},Z.toObject=function(n,b){b=b||{};var T={};return n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.consistencySelector="readTime"),T},Z.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Z.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.TransactionOptions.ReadOnly"},Z),U),d.Firestore=((ie.prototype=Object.create(e.rpc.Service.prototype)).constructor=ie,Object.defineProperty(ie.prototype.getDocument=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.GetDocumentRequest,o.google.firestore.v1.Document,b,T)},"name",{value:"GetDocument"}),Object.defineProperty(ie.prototype.listDocuments=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.ListDocumentsRequest,o.google.firestore.v1.ListDocumentsResponse,b,T)},"name",{value:"ListDocuments"}),Object.defineProperty(ie.prototype.updateDocument=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.UpdateDocumentRequest,o.google.firestore.v1.Document,b,T)},"name",{value:"UpdateDocument"}),Object.defineProperty(ie.prototype.deleteDocument=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.DeleteDocumentRequest,o.google.protobuf.Empty,b,T)},"name",{value:"DeleteDocument"}),Object.defineProperty(ie.prototype.batchGetDocuments=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.BatchGetDocumentsRequest,o.google.firestore.v1.BatchGetDocumentsResponse,b,T)},"name",{value:"BatchGetDocuments"}),Object.defineProperty(ie.prototype.beginTransaction=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.BeginTransactionRequest,o.google.firestore.v1.BeginTransactionResponse,b,T)},"name",{value:"BeginTransaction"}),Object.defineProperty(ie.prototype.commit=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.CommitRequest,o.google.firestore.v1.CommitResponse,b,T)},"name",{value:"Commit"}),Object.defineProperty(ie.prototype.rollback=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.RollbackRequest,o.google.protobuf.Empty,b,T)},"name",{value:"Rollback"}),Object.defineProperty(ie.prototype.runQuery=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.RunQueryRequest,o.google.firestore.v1.RunQueryResponse,b,T)},"name",{value:"RunQuery"}),Object.defineProperty(ie.prototype.runAggregationQuery=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.RunAggregationQueryRequest,o.google.firestore.v1.RunAggregationQueryResponse,b,T)},"name",{value:"RunAggregationQuery"}),Object.defineProperty(ie.prototype.partitionQuery=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.PartitionQueryRequest,o.google.firestore.v1.PartitionQueryResponse,b,T)},"name",{value:"PartitionQuery"}),Object.defineProperty(ie.prototype.write=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.WriteRequest,o.google.firestore.v1.WriteResponse,b,T)},"name",{value:"Write"}),Object.defineProperty(ie.prototype.listen=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.ListenRequest,o.google.firestore.v1.ListenResponse,b,T)},"name",{value:"Listen"}),Object.defineProperty(ie.prototype.listCollectionIds=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.ListCollectionIdsRequest,o.google.firestore.v1.ListCollectionIdsResponse,b,T)},"name",{value:"ListCollectionIds"}),Object.defineProperty(ie.prototype.batchWrite=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.BatchWriteRequest,o.google.firestore.v1.BatchWriteResponse,b,T)},"name",{value:"BatchWrite"}),Object.defineProperty(ie.prototype.createDocument=function n(b,T){return this.rpcCall(n,o.google.firestore.v1.CreateDocumentRequest,o.google.firestore.v1.Document,b,T)},"name",{value:"CreateDocument"}),ie),d.GetDocumentRequest=(ue.prototype.name="",ue.prototype.mask=null,ue.prototype.transaction=null,ue.prototype.readTime=null,Object.defineProperty(ue.prototype,"consistencySelector",{get:a.oneOfGetter(m=["transaction","readTime"]),set:a.oneOfSetter(m)}),ue.fromObject=function(n){if(n instanceof o.google.firestore.v1.GetDocumentRequest)return n;var b=new o.google.firestore.v1.GetDocumentRequest;if(n.name!=null&&(b.name=String(n.name)),n.mask!=null){if(typeof n.mask!="object")throw TypeError(".google.firestore.v1.GetDocumentRequest.mask: object expected");b.mask=o.google.firestore.v1.DocumentMask.fromObject(n.mask)}if(n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.GetDocumentRequest.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},ue.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.mask=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.mask!=null&&n.hasOwnProperty("mask")&&(T.mask=o.google.firestore.v1.DocumentMask.toObject(n.mask,b)),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction,b.oneofs)&&(T.consistencySelector="transaction"),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.consistencySelector="readTime"),T},ue.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ue.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.GetDocumentRequest"},ue),d.ListDocumentsRequest=(le.prototype.parent="",le.prototype.collectionId="",le.prototype.pageSize=0,le.prototype.pageToken="",le.prototype.orderBy="",le.prototype.mask=null,le.prototype.transaction=null,le.prototype.readTime=null,le.prototype.showMissing=!1,Object.defineProperty(le.prototype,"consistencySelector",{get:a.oneOfGetter(m=["transaction","readTime"]),set:a.oneOfSetter(m)}),le.fromObject=function(n){if(n instanceof o.google.firestore.v1.ListDocumentsRequest)return n;var b=new o.google.firestore.v1.ListDocumentsRequest;if(n.parent!=null&&(b.parent=String(n.parent)),n.collectionId!=null&&(b.collectionId=String(n.collectionId)),n.pageSize!=null&&(b.pageSize=0|n.pageSize),n.pageToken!=null&&(b.pageToken=String(n.pageToken)),n.orderBy!=null&&(b.orderBy=String(n.orderBy)),n.mask!=null){if(typeof n.mask!="object")throw TypeError(".google.firestore.v1.ListDocumentsRequest.mask: object expected");b.mask=o.google.firestore.v1.DocumentMask.fromObject(n.mask)}if(n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.ListDocumentsRequest.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return n.showMissing!=null&&(b.showMissing=!!n.showMissing),b},le.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.parent="",T.collectionId="",T.pageSize=0,T.pageToken="",T.orderBy="",T.mask=null,T.showMissing=!1),n.parent!=null&&n.hasOwnProperty("parent")&&(T.parent=n.parent),n.collectionId!=null&&n.hasOwnProperty("collectionId")&&(T.collectionId=n.collectionId),n.pageSize!=null&&n.hasOwnProperty("pageSize")&&(T.pageSize=n.pageSize),n.pageToken!=null&&n.hasOwnProperty("pageToken")&&(T.pageToken=n.pageToken),n.orderBy!=null&&n.hasOwnProperty("orderBy")&&(T.orderBy=n.orderBy),n.mask!=null&&n.hasOwnProperty("mask")&&(T.mask=o.google.firestore.v1.DocumentMask.toObject(n.mask,b)),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction,b.oneofs)&&(T.consistencySelector="transaction"),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.consistencySelector="readTime"),n.showMissing!=null&&n.hasOwnProperty("showMissing")&&(T.showMissing=n.showMissing),T},le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},le.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ListDocumentsRequest"},le),d.ListDocumentsResponse=(ne.prototype.documents=a.emptyArray,ne.prototype.nextPageToken="",ne.fromObject=function(n){if(n instanceof o.google.firestore.v1.ListDocumentsResponse)return n;var b=new o.google.firestore.v1.ListDocumentsResponse;if(n.documents){if(!Array.isArray(n.documents))throw TypeError(".google.firestore.v1.ListDocumentsResponse.documents: array expected");b.documents=[];for(var T=0;T<n.documents.length;++T){if(typeof n.documents[T]!="object")throw TypeError(".google.firestore.v1.ListDocumentsResponse.documents: object expected");b.documents[T]=o.google.firestore.v1.Document.fromObject(n.documents[T])}}return n.nextPageToken!=null&&(b.nextPageToken=String(n.nextPageToken)),b},ne.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.documents=[]),b.defaults&&(T.nextPageToken=""),n.documents&&n.documents.length){T.documents=[];for(var Ne=0;Ne<n.documents.length;++Ne)T.documents[Ne]=o.google.firestore.v1.Document.toObject(n.documents[Ne],b)}return n.nextPageToken!=null&&n.hasOwnProperty("nextPageToken")&&(T.nextPageToken=n.nextPageToken),T},ne.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ne.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ListDocumentsResponse"},ne),d.CreateDocumentRequest=(ye.prototype.parent="",ye.prototype.collectionId="",ye.prototype.documentId="",ye.prototype.document=null,ye.prototype.mask=null,ye.fromObject=function(n){if(n instanceof o.google.firestore.v1.CreateDocumentRequest)return n;var b=new o.google.firestore.v1.CreateDocumentRequest;if(n.parent!=null&&(b.parent=String(n.parent)),n.collectionId!=null&&(b.collectionId=String(n.collectionId)),n.documentId!=null&&(b.documentId=String(n.documentId)),n.document!=null){if(typeof n.document!="object")throw TypeError(".google.firestore.v1.CreateDocumentRequest.document: object expected");b.document=o.google.firestore.v1.Document.fromObject(n.document)}if(n.mask!=null){if(typeof n.mask!="object")throw TypeError(".google.firestore.v1.CreateDocumentRequest.mask: object expected");b.mask=o.google.firestore.v1.DocumentMask.fromObject(n.mask)}return b},ye.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.parent="",T.collectionId="",T.documentId="",T.document=null,T.mask=null),n.parent!=null&&n.hasOwnProperty("parent")&&(T.parent=n.parent),n.collectionId!=null&&n.hasOwnProperty("collectionId")&&(T.collectionId=n.collectionId),n.documentId!=null&&n.hasOwnProperty("documentId")&&(T.documentId=n.documentId),n.document!=null&&n.hasOwnProperty("document")&&(T.document=o.google.firestore.v1.Document.toObject(n.document,b)),n.mask!=null&&n.hasOwnProperty("mask")&&(T.mask=o.google.firestore.v1.DocumentMask.toObject(n.mask,b)),T},ye.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ye.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.CreateDocumentRequest"},ye),d.UpdateDocumentRequest=(fe.prototype.document=null,fe.prototype.updateMask=null,fe.prototype.mask=null,fe.prototype.currentDocument=null,fe.fromObject=function(n){if(n instanceof o.google.firestore.v1.UpdateDocumentRequest)return n;var b=new o.google.firestore.v1.UpdateDocumentRequest;if(n.document!=null){if(typeof n.document!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.document: object expected");b.document=o.google.firestore.v1.Document.fromObject(n.document)}if(n.updateMask!=null){if(typeof n.updateMask!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.updateMask: object expected");b.updateMask=o.google.firestore.v1.DocumentMask.fromObject(n.updateMask)}if(n.mask!=null){if(typeof n.mask!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.mask: object expected");b.mask=o.google.firestore.v1.DocumentMask.fromObject(n.mask)}if(n.currentDocument!=null){if(typeof n.currentDocument!="object")throw TypeError(".google.firestore.v1.UpdateDocumentRequest.currentDocument: object expected");b.currentDocument=o.google.firestore.v1.Precondition.fromObject(n.currentDocument)}return b},fe.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.document=null,T.updateMask=null,T.mask=null,T.currentDocument=null),n.document!=null&&n.hasOwnProperty("document")&&(T.document=o.google.firestore.v1.Document.toObject(n.document,b)),n.updateMask!=null&&n.hasOwnProperty("updateMask")&&(T.updateMask=o.google.firestore.v1.DocumentMask.toObject(n.updateMask,b)),n.mask!=null&&n.hasOwnProperty("mask")&&(T.mask=o.google.firestore.v1.DocumentMask.toObject(n.mask,b)),n.currentDocument!=null&&n.hasOwnProperty("currentDocument")&&(T.currentDocument=o.google.firestore.v1.Precondition.toObject(n.currentDocument,b)),T},fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},fe.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.UpdateDocumentRequest"},fe),d.DeleteDocumentRequest=(Te.prototype.name="",Te.prototype.currentDocument=null,Te.fromObject=function(n){if(n instanceof o.google.firestore.v1.DeleteDocumentRequest)return n;var b=new o.google.firestore.v1.DeleteDocumentRequest;if(n.name!=null&&(b.name=String(n.name)),n.currentDocument!=null){if(typeof n.currentDocument!="object")throw TypeError(".google.firestore.v1.DeleteDocumentRequest.currentDocument: object expected");b.currentDocument=o.google.firestore.v1.Precondition.fromObject(n.currentDocument)}return b},Te.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.currentDocument=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.currentDocument!=null&&n.hasOwnProperty("currentDocument")&&(T.currentDocument=o.google.firestore.v1.Precondition.toObject(n.currentDocument,b)),T},Te.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Te.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.DeleteDocumentRequest"},Te),d.BatchGetDocumentsRequest=(Ae.prototype.database="",Ae.prototype.documents=a.emptyArray,Ae.prototype.mask=null,Ae.prototype.transaction=null,Ae.prototype.newTransaction=null,Ae.prototype.readTime=null,Object.defineProperty(Ae.prototype,"consistencySelector",{get:a.oneOfGetter(m=["transaction","newTransaction","readTime"]),set:a.oneOfSetter(m)}),Ae.fromObject=function(n){if(n instanceof o.google.firestore.v1.BatchGetDocumentsRequest)return n;var b=new o.google.firestore.v1.BatchGetDocumentsRequest;if(n.database!=null&&(b.database=String(n.database)),n.documents){if(!Array.isArray(n.documents))throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.documents: array expected");b.documents=[];for(var T=0;T<n.documents.length;++T)b.documents[T]=String(n.documents[T])}if(n.mask!=null){if(typeof n.mask!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.mask: object expected");b.mask=o.google.firestore.v1.DocumentMask.fromObject(n.mask)}if(n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.newTransaction!=null){if(typeof n.newTransaction!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.newTransaction: object expected");b.newTransaction=o.google.firestore.v1.TransactionOptions.fromObject(n.newTransaction)}if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsRequest.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},Ae.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.documents=[]),b.defaults&&(T.database="",T.mask=null),n.database!=null&&n.hasOwnProperty("database")&&(T.database=n.database),n.documents&&n.documents.length){T.documents=[];for(var Ne=0;Ne<n.documents.length;++Ne)T.documents[Ne]=n.documents[Ne]}return n.mask!=null&&n.hasOwnProperty("mask")&&(T.mask=o.google.firestore.v1.DocumentMask.toObject(n.mask,b)),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction,b.oneofs)&&(T.consistencySelector="transaction"),n.newTransaction!=null&&n.hasOwnProperty("newTransaction")&&(T.newTransaction=o.google.firestore.v1.TransactionOptions.toObject(n.newTransaction,b),b.oneofs)&&(T.consistencySelector="newTransaction"),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.consistencySelector="readTime"),T},Ae.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ae.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BatchGetDocumentsRequest"},Ae),d.BatchGetDocumentsResponse=(Se.prototype.found=null,Se.prototype.missing=null,Se.prototype.transaction=a.newBuffer([]),Se.prototype.readTime=null,Object.defineProperty(Se.prototype,"result",{get:a.oneOfGetter(m=["found","missing"]),set:a.oneOfSetter(m)}),Se.fromObject=function(n){if(n instanceof o.google.firestore.v1.BatchGetDocumentsResponse)return n;var b=new o.google.firestore.v1.BatchGetDocumentsResponse;if(n.found!=null){if(typeof n.found!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsResponse.found: object expected");b.found=o.google.firestore.v1.Document.fromObject(n.found)}if(n.missing!=null&&(b.missing=String(n.missing)),n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.BatchGetDocumentsResponse.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},Se.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(b.bytes===String?T.transaction="":(T.transaction=[],b.bytes!==Array&&(T.transaction=a.newBuffer(T.transaction))),T.readTime=null),n.found!=null&&n.hasOwnProperty("found")&&(T.found=o.google.firestore.v1.Document.toObject(n.found,b),b.oneofs)&&(T.result="found"),n.missing!=null&&n.hasOwnProperty("missing")&&(T.missing=n.missing,b.oneofs)&&(T.result="missing"),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),T},Se.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Se.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BatchGetDocumentsResponse"},Se),d.BeginTransactionRequest=(be.prototype.database="",be.prototype.options=null,be.fromObject=function(n){if(n instanceof o.google.firestore.v1.BeginTransactionRequest)return n;var b=new o.google.firestore.v1.BeginTransactionRequest;if(n.database!=null&&(b.database=String(n.database)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.firestore.v1.BeginTransactionRequest.options: object expected");b.options=o.google.firestore.v1.TransactionOptions.fromObject(n.options)}return b},be.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.database="",T.options=null),n.database!=null&&n.hasOwnProperty("database")&&(T.database=n.database),n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.firestore.v1.TransactionOptions.toObject(n.options,b)),T},be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},be.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BeginTransactionRequest"},be),d.BeginTransactionResponse=(we.prototype.transaction=a.newBuffer([]),we.fromObject=function(n){var b;return n instanceof o.google.firestore.v1.BeginTransactionResponse?n:(b=new o.google.firestore.v1.BeginTransactionResponse,n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),b)},we.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(b.bytes===String?T.transaction="":(T.transaction=[],b.bytes!==Array&&(T.transaction=a.newBuffer(T.transaction)))),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction),T},we.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},we.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BeginTransactionResponse"},we),d.CommitRequest=(Ce.prototype.database="",Ce.prototype.writes=a.emptyArray,Ce.prototype.transaction=a.newBuffer([]),Ce.fromObject=function(n){if(n instanceof o.google.firestore.v1.CommitRequest)return n;var b=new o.google.firestore.v1.CommitRequest;if(n.database!=null&&(b.database=String(n.database)),n.writes){if(!Array.isArray(n.writes))throw TypeError(".google.firestore.v1.CommitRequest.writes: array expected");b.writes=[];for(var T=0;T<n.writes.length;++T){if(typeof n.writes[T]!="object")throw TypeError(".google.firestore.v1.CommitRequest.writes: object expected");b.writes[T]=o.google.firestore.v1.Write.fromObject(n.writes[T])}}return n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),b},Ce.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.writes=[]),b.defaults&&(T.database="",b.bytes===String?T.transaction="":(T.transaction=[],b.bytes!==Array&&(T.transaction=a.newBuffer(T.transaction)))),n.database!=null&&n.hasOwnProperty("database")&&(T.database=n.database),n.writes&&n.writes.length){T.writes=[];for(var Ne=0;Ne<n.writes.length;++Ne)T.writes[Ne]=o.google.firestore.v1.Write.toObject(n.writes[Ne],b)}return n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction),T},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ce.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.CommitRequest"},Ce),d.CommitResponse=(je.prototype.writeResults=a.emptyArray,je.prototype.commitTime=null,je.fromObject=function(n){if(n instanceof o.google.firestore.v1.CommitResponse)return n;var b=new o.google.firestore.v1.CommitResponse;if(n.writeResults){if(!Array.isArray(n.writeResults))throw TypeError(".google.firestore.v1.CommitResponse.writeResults: array expected");b.writeResults=[];for(var T=0;T<n.writeResults.length;++T){if(typeof n.writeResults[T]!="object")throw TypeError(".google.firestore.v1.CommitResponse.writeResults: object expected");b.writeResults[T]=o.google.firestore.v1.WriteResult.fromObject(n.writeResults[T])}}if(n.commitTime!=null){if(typeof n.commitTime!="object")throw TypeError(".google.firestore.v1.CommitResponse.commitTime: object expected");b.commitTime=o.google.protobuf.Timestamp.fromObject(n.commitTime)}return b},je.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.writeResults=[]),b.defaults&&(T.commitTime=null),n.writeResults&&n.writeResults.length){T.writeResults=[];for(var Ne=0;Ne<n.writeResults.length;++Ne)T.writeResults[Ne]=o.google.firestore.v1.WriteResult.toObject(n.writeResults[Ne],b)}return n.commitTime!=null&&n.hasOwnProperty("commitTime")&&(T.commitTime=o.google.protobuf.Timestamp.toObject(n.commitTime,b)),T},je.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},je.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.CommitResponse"},je),d.RollbackRequest=(Fe.prototype.database="",Fe.prototype.transaction=a.newBuffer([]),Fe.fromObject=function(n){var b;return n instanceof o.google.firestore.v1.RollbackRequest?n:(b=new o.google.firestore.v1.RollbackRequest,n.database!=null&&(b.database=String(n.database)),n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),b)},Fe.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.database="",b.bytes===String?T.transaction="":(T.transaction=[],b.bytes!==Array&&(T.transaction=a.newBuffer(T.transaction)))),n.database!=null&&n.hasOwnProperty("database")&&(T.database=n.database),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction),T},Fe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Fe.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.RollbackRequest"},Fe),d.RunQueryRequest=(Ve.prototype.parent="",Ve.prototype.structuredQuery=null,Ve.prototype.transaction=null,Ve.prototype.newTransaction=null,Ve.prototype.readTime=null,Ve.prototype.explainOptions=null,Object.defineProperty(Ve.prototype,"queryType",{get:a.oneOfGetter(m=["structuredQuery"]),set:a.oneOfSetter(m)}),Object.defineProperty(Ve.prototype,"consistencySelector",{get:a.oneOfGetter(m=["transaction","newTransaction","readTime"]),set:a.oneOfSetter(m)}),Ve.fromObject=function(n){if(n instanceof o.google.firestore.v1.RunQueryRequest)return n;var b=new o.google.firestore.v1.RunQueryRequest;if(n.parent!=null&&(b.parent=String(n.parent)),n.structuredQuery!=null){if(typeof n.structuredQuery!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.structuredQuery: object expected");b.structuredQuery=o.google.firestore.v1.StructuredQuery.fromObject(n.structuredQuery)}if(n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.newTransaction!=null){if(typeof n.newTransaction!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.newTransaction: object expected");b.newTransaction=o.google.firestore.v1.TransactionOptions.fromObject(n.newTransaction)}if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}if(n.explainOptions!=null){if(typeof n.explainOptions!="object")throw TypeError(".google.firestore.v1.RunQueryRequest.explainOptions: object expected");b.explainOptions=o.google.firestore.v1.ExplainOptions.fromObject(n.explainOptions)}return b},Ve.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.parent="",T.explainOptions=null),n.parent!=null&&n.hasOwnProperty("parent")&&(T.parent=n.parent),n.structuredQuery!=null&&n.hasOwnProperty("structuredQuery")&&(T.structuredQuery=o.google.firestore.v1.StructuredQuery.toObject(n.structuredQuery,b),b.oneofs)&&(T.queryType="structuredQuery"),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction,b.oneofs)&&(T.consistencySelector="transaction"),n.newTransaction!=null&&n.hasOwnProperty("newTransaction")&&(T.newTransaction=o.google.firestore.v1.TransactionOptions.toObject(n.newTransaction,b),b.oneofs)&&(T.consistencySelector="newTransaction"),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.consistencySelector="readTime"),n.explainOptions!=null&&n.hasOwnProperty("explainOptions")&&(T.explainOptions=o.google.firestore.v1.ExplainOptions.toObject(n.explainOptions,b)),T},Ve.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ve.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.RunQueryRequest"},Ve),d.RunQueryResponse=(Ge.prototype.transaction=a.newBuffer([]),Ge.prototype.document=null,Ge.prototype.readTime=null,Ge.prototype.skippedResults=0,Ge.prototype.done=null,Ge.prototype.explainMetrics=null,Object.defineProperty(Ge.prototype,"continuationSelector",{get:a.oneOfGetter(m=["done"]),set:a.oneOfSetter(m)}),Ge.fromObject=function(n){if(n instanceof o.google.firestore.v1.RunQueryResponse)return n;var b=new o.google.firestore.v1.RunQueryResponse;if(n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.document!=null){if(typeof n.document!="object")throw TypeError(".google.firestore.v1.RunQueryResponse.document: object expected");b.document=o.google.firestore.v1.Document.fromObject(n.document)}if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.RunQueryResponse.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}if(n.skippedResults!=null&&(b.skippedResults=0|n.skippedResults),n.done!=null&&(b.done=!!n.done),n.explainMetrics!=null){if(typeof n.explainMetrics!="object")throw TypeError(".google.firestore.v1.RunQueryResponse.explainMetrics: object expected");b.explainMetrics=o.google.firestore.v1.ExplainMetrics.fromObject(n.explainMetrics)}return b},Ge.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.document=null,b.bytes===String?T.transaction="":(T.transaction=[],b.bytes!==Array&&(T.transaction=a.newBuffer(T.transaction))),T.readTime=null,T.skippedResults=0,T.explainMetrics=null),n.document!=null&&n.hasOwnProperty("document")&&(T.document=o.google.firestore.v1.Document.toObject(n.document,b)),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),n.skippedResults!=null&&n.hasOwnProperty("skippedResults")&&(T.skippedResults=n.skippedResults),n.done!=null&&n.hasOwnProperty("done")&&(T.done=n.done,b.oneofs)&&(T.continuationSelector="done"),n.explainMetrics!=null&&n.hasOwnProperty("explainMetrics")&&(T.explainMetrics=o.google.firestore.v1.ExplainMetrics.toObject(n.explainMetrics,b)),T},Ge.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ge.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.RunQueryResponse"},Ge),d.RunAggregationQueryRequest=(Le.prototype.parent="",Le.prototype.structuredAggregationQuery=null,Le.prototype.transaction=null,Le.prototype.newTransaction=null,Le.prototype.readTime=null,Le.prototype.explainOptions=null,Object.defineProperty(Le.prototype,"queryType",{get:a.oneOfGetter(m=["structuredAggregationQuery"]),set:a.oneOfSetter(m)}),Object.defineProperty(Le.prototype,"consistencySelector",{get:a.oneOfGetter(m=["transaction","newTransaction","readTime"]),set:a.oneOfSetter(m)}),Le.fromObject=function(n){if(n instanceof o.google.firestore.v1.RunAggregationQueryRequest)return n;var b=new o.google.firestore.v1.RunAggregationQueryRequest;if(n.parent!=null&&(b.parent=String(n.parent)),n.structuredAggregationQuery!=null){if(typeof n.structuredAggregationQuery!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.structuredAggregationQuery: object expected");b.structuredAggregationQuery=o.google.firestore.v1.StructuredAggregationQuery.fromObject(n.structuredAggregationQuery)}if(n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.newTransaction!=null){if(typeof n.newTransaction!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.newTransaction: object expected");b.newTransaction=o.google.firestore.v1.TransactionOptions.fromObject(n.newTransaction)}if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}if(n.explainOptions!=null){if(typeof n.explainOptions!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryRequest.explainOptions: object expected");b.explainOptions=o.google.firestore.v1.ExplainOptions.fromObject(n.explainOptions)}return b},Le.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.parent="",T.explainOptions=null),n.parent!=null&&n.hasOwnProperty("parent")&&(T.parent=n.parent),n.structuredAggregationQuery!=null&&n.hasOwnProperty("structuredAggregationQuery")&&(T.structuredAggregationQuery=o.google.firestore.v1.StructuredAggregationQuery.toObject(n.structuredAggregationQuery,b),b.oneofs)&&(T.queryType="structuredAggregationQuery"),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction,b.oneofs)&&(T.consistencySelector="transaction"),n.newTransaction!=null&&n.hasOwnProperty("newTransaction")&&(T.newTransaction=o.google.firestore.v1.TransactionOptions.toObject(n.newTransaction,b),b.oneofs)&&(T.consistencySelector="newTransaction"),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.consistencySelector="readTime"),n.explainOptions!=null&&n.hasOwnProperty("explainOptions")&&(T.explainOptions=o.google.firestore.v1.ExplainOptions.toObject(n.explainOptions,b)),T},Le.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Le.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.RunAggregationQueryRequest"},Le),d.RunAggregationQueryResponse=(Be.prototype.result=null,Be.prototype.transaction=a.newBuffer([]),Be.prototype.readTime=null,Be.prototype.explainMetrics=null,Be.fromObject=function(n){if(n instanceof o.google.firestore.v1.RunAggregationQueryResponse)return n;var b=new o.google.firestore.v1.RunAggregationQueryResponse;if(n.result!=null){if(typeof n.result!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryResponse.result: object expected");b.result=o.google.firestore.v1.AggregationResult.fromObject(n.result)}if(n.transaction!=null&&(typeof n.transaction=="string"?a.base64.decode(n.transaction,b.transaction=a.newBuffer(a.base64.length(n.transaction)),0):0<=n.transaction.length&&(b.transaction=n.transaction)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryResponse.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}if(n.explainMetrics!=null){if(typeof n.explainMetrics!="object")throw TypeError(".google.firestore.v1.RunAggregationQueryResponse.explainMetrics: object expected");b.explainMetrics=o.google.firestore.v1.ExplainMetrics.fromObject(n.explainMetrics)}return b},Be.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.result=null,b.bytes===String?T.transaction="":(T.transaction=[],b.bytes!==Array&&(T.transaction=a.newBuffer(T.transaction))),T.readTime=null,T.explainMetrics=null),n.result!=null&&n.hasOwnProperty("result")&&(T.result=o.google.firestore.v1.AggregationResult.toObject(n.result,b)),n.transaction!=null&&n.hasOwnProperty("transaction")&&(T.transaction=b.bytes===String?a.base64.encode(n.transaction,0,n.transaction.length):b.bytes===Array?Array.prototype.slice.call(n.transaction):n.transaction),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),n.explainMetrics!=null&&n.hasOwnProperty("explainMetrics")&&(T.explainMetrics=o.google.firestore.v1.ExplainMetrics.toObject(n.explainMetrics,b)),T},Be.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Be.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.RunAggregationQueryResponse"},Be),d.PartitionQueryRequest=($e.prototype.parent="",$e.prototype.structuredQuery=null,$e.prototype.partitionCount=a.Long?a.Long.fromBits(0,0,!1):0,$e.prototype.pageToken="",$e.prototype.pageSize=0,$e.prototype.readTime=null,Object.defineProperty($e.prototype,"queryType",{get:a.oneOfGetter(m=["structuredQuery"]),set:a.oneOfSetter(m)}),Object.defineProperty($e.prototype,"consistencySelector",{get:a.oneOfGetter(m=["readTime"]),set:a.oneOfSetter(m)}),$e.fromObject=function(n){if(n instanceof o.google.firestore.v1.PartitionQueryRequest)return n;var b=new o.google.firestore.v1.PartitionQueryRequest;if(n.parent!=null&&(b.parent=String(n.parent)),n.structuredQuery!=null){if(typeof n.structuredQuery!="object")throw TypeError(".google.firestore.v1.PartitionQueryRequest.structuredQuery: object expected");b.structuredQuery=o.google.firestore.v1.StructuredQuery.fromObject(n.structuredQuery)}if(n.partitionCount!=null&&(a.Long?(b.partitionCount=a.Long.fromValue(n.partitionCount)).unsigned=!1:typeof n.partitionCount=="string"?b.partitionCount=parseInt(n.partitionCount,10):typeof n.partitionCount=="number"?b.partitionCount=n.partitionCount:typeof n.partitionCount=="object"&&(b.partitionCount=new a.LongBits(n.partitionCount.low>>>0,n.partitionCount.high>>>0).toNumber())),n.pageToken!=null&&(b.pageToken=String(n.pageToken)),n.pageSize!=null&&(b.pageSize=0|n.pageSize),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.PartitionQueryRequest.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},$e.toObject=function(n,b){var T,Ne={};return(b=b||{}).defaults&&(Ne.parent="",a.Long?(T=new a.Long(0,0,!1),Ne.partitionCount=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.partitionCount=b.longs===String?"0":0,Ne.pageToken="",Ne.pageSize=0),n.parent!=null&&n.hasOwnProperty("parent")&&(Ne.parent=n.parent),n.structuredQuery!=null&&n.hasOwnProperty("structuredQuery")&&(Ne.structuredQuery=o.google.firestore.v1.StructuredQuery.toObject(n.structuredQuery,b),b.oneofs)&&(Ne.queryType="structuredQuery"),n.partitionCount!=null&&n.hasOwnProperty("partitionCount")&&(typeof n.partitionCount=="number"?Ne.partitionCount=b.longs===String?String(n.partitionCount):n.partitionCount:Ne.partitionCount=b.longs===String?a.Long.prototype.toString.call(n.partitionCount):b.longs===Number?new a.LongBits(n.partitionCount.low>>>0,n.partitionCount.high>>>0).toNumber():n.partitionCount),n.pageToken!=null&&n.hasOwnProperty("pageToken")&&(Ne.pageToken=n.pageToken),n.pageSize!=null&&n.hasOwnProperty("pageSize")&&(Ne.pageSize=n.pageSize),n.readTime!=null&&n.hasOwnProperty("readTime")&&(Ne.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(Ne.consistencySelector="readTime"),Ne},$e.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},$e.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.PartitionQueryRequest"},$e),d.PartitionQueryResponse=(he.prototype.partitions=a.emptyArray,he.prototype.nextPageToken="",he.fromObject=function(n){if(n instanceof o.google.firestore.v1.PartitionQueryResponse)return n;var b=new o.google.firestore.v1.PartitionQueryResponse;if(n.partitions){if(!Array.isArray(n.partitions))throw TypeError(".google.firestore.v1.PartitionQueryResponse.partitions: array expected");b.partitions=[];for(var T=0;T<n.partitions.length;++T){if(typeof n.partitions[T]!="object")throw TypeError(".google.firestore.v1.PartitionQueryResponse.partitions: object expected");b.partitions[T]=o.google.firestore.v1.Cursor.fromObject(n.partitions[T])}}return n.nextPageToken!=null&&(b.nextPageToken=String(n.nextPageToken)),b},he.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.partitions=[]),b.defaults&&(T.nextPageToken=""),n.partitions&&n.partitions.length){T.partitions=[];for(var Ne=0;Ne<n.partitions.length;++Ne)T.partitions[Ne]=o.google.firestore.v1.Cursor.toObject(n.partitions[Ne],b)}return n.nextPageToken!=null&&n.hasOwnProperty("nextPageToken")&&(T.nextPageToken=n.nextPageToken),T},he.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},he.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.PartitionQueryResponse"},he),d.WriteRequest=(p.prototype.database="",p.prototype.streamId="",p.prototype.writes=a.emptyArray,p.prototype.streamToken=a.newBuffer([]),p.prototype.labels=a.emptyObject,p.fromObject=function(n){if(n instanceof o.google.firestore.v1.WriteRequest)return n;var b=new o.google.firestore.v1.WriteRequest;if(n.database!=null&&(b.database=String(n.database)),n.streamId!=null&&(b.streamId=String(n.streamId)),n.writes){if(!Array.isArray(n.writes))throw TypeError(".google.firestore.v1.WriteRequest.writes: array expected");b.writes=[];for(var T=0;T<n.writes.length;++T){if(typeof n.writes[T]!="object")throw TypeError(".google.firestore.v1.WriteRequest.writes: object expected");b.writes[T]=o.google.firestore.v1.Write.fromObject(n.writes[T])}}if(n.streamToken!=null&&(typeof n.streamToken=="string"?a.base64.decode(n.streamToken,b.streamToken=a.newBuffer(a.base64.length(n.streamToken)),0):0<=n.streamToken.length&&(b.streamToken=n.streamToken)),n.labels){if(typeof n.labels!="object")throw TypeError(".google.firestore.v1.WriteRequest.labels: object expected");b.labels={};for(var Ne=Object.keys(n.labels),T=0;T<Ne.length;++T)b.labels[Ne[T]]=String(n.labels[Ne[T]])}return b},p.toObject=function(n,b){var T,Ne={};if(((b=b||{}).arrays||b.defaults)&&(Ne.writes=[]),(b.objects||b.defaults)&&(Ne.labels={}),b.defaults&&(Ne.database="",Ne.streamId="",b.bytes===String?Ne.streamToken="":(Ne.streamToken=[],b.bytes!==Array&&(Ne.streamToken=a.newBuffer(Ne.streamToken)))),n.database!=null&&n.hasOwnProperty("database")&&(Ne.database=n.database),n.streamId!=null&&n.hasOwnProperty("streamId")&&(Ne.streamId=n.streamId),n.writes&&n.writes.length){Ne.writes=[];for(var ur=0;ur<n.writes.length;++ur)Ne.writes[ur]=o.google.firestore.v1.Write.toObject(n.writes[ur],b)}if(n.streamToken!=null&&n.hasOwnProperty("streamToken")&&(Ne.streamToken=b.bytes===String?a.base64.encode(n.streamToken,0,n.streamToken.length):b.bytes===Array?Array.prototype.slice.call(n.streamToken):n.streamToken),n.labels&&(T=Object.keys(n.labels)).length)for(Ne.labels={},ur=0;ur<T.length;++ur)Ne.labels[T[ur]]=n.labels[T[ur]];return Ne},p.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},p.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.WriteRequest"},p),d.WriteResponse=(V.prototype.streamId="",V.prototype.streamToken=a.newBuffer([]),V.prototype.writeResults=a.emptyArray,V.prototype.commitTime=null,V.fromObject=function(n){if(n instanceof o.google.firestore.v1.WriteResponse)return n;var b=new o.google.firestore.v1.WriteResponse;if(n.streamId!=null&&(b.streamId=String(n.streamId)),n.streamToken!=null&&(typeof n.streamToken=="string"?a.base64.decode(n.streamToken,b.streamToken=a.newBuffer(a.base64.length(n.streamToken)),0):0<=n.streamToken.length&&(b.streamToken=n.streamToken)),n.writeResults){if(!Array.isArray(n.writeResults))throw TypeError(".google.firestore.v1.WriteResponse.writeResults: array expected");b.writeResults=[];for(var T=0;T<n.writeResults.length;++T){if(typeof n.writeResults[T]!="object")throw TypeError(".google.firestore.v1.WriteResponse.writeResults: object expected");b.writeResults[T]=o.google.firestore.v1.WriteResult.fromObject(n.writeResults[T])}}if(n.commitTime!=null){if(typeof n.commitTime!="object")throw TypeError(".google.firestore.v1.WriteResponse.commitTime: object expected");b.commitTime=o.google.protobuf.Timestamp.fromObject(n.commitTime)}return b},V.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.writeResults=[]),b.defaults&&(T.streamId="",b.bytes===String?T.streamToken="":(T.streamToken=[],b.bytes!==Array&&(T.streamToken=a.newBuffer(T.streamToken))),T.commitTime=null),n.streamId!=null&&n.hasOwnProperty("streamId")&&(T.streamId=n.streamId),n.streamToken!=null&&n.hasOwnProperty("streamToken")&&(T.streamToken=b.bytes===String?a.base64.encode(n.streamToken,0,n.streamToken.length):b.bytes===Array?Array.prototype.slice.call(n.streamToken):n.streamToken),n.writeResults&&n.writeResults.length){T.writeResults=[];for(var Ne=0;Ne<n.writeResults.length;++Ne)T.writeResults[Ne]=o.google.firestore.v1.WriteResult.toObject(n.writeResults[Ne],b)}return n.commitTime!=null&&n.hasOwnProperty("commitTime")&&(T.commitTime=o.google.protobuf.Timestamp.toObject(n.commitTime,b)),T},V.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},V.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.WriteResponse"},V),d.ListenRequest=(R.prototype.database="",R.prototype.addTarget=null,R.prototype.removeTarget=null,R.prototype.labels=a.emptyObject,Object.defineProperty(R.prototype,"targetChange",{get:a.oneOfGetter(m=["addTarget","removeTarget"]),set:a.oneOfSetter(m)}),R.fromObject=function(n){if(n instanceof o.google.firestore.v1.ListenRequest)return n;var b=new o.google.firestore.v1.ListenRequest;if(n.database!=null&&(b.database=String(n.database)),n.addTarget!=null){if(typeof n.addTarget!="object")throw TypeError(".google.firestore.v1.ListenRequest.addTarget: object expected");b.addTarget=o.google.firestore.v1.Target.fromObject(n.addTarget)}if(n.removeTarget!=null&&(b.removeTarget=0|n.removeTarget),n.labels){if(typeof n.labels!="object")throw TypeError(".google.firestore.v1.ListenRequest.labels: object expected");b.labels={};for(var T=Object.keys(n.labels),Ne=0;Ne<T.length;++Ne)b.labels[T[Ne]]=String(n.labels[T[Ne]])}return b},R.toObject=function(n,b){var T,Ne={};if(((b=b||{}).objects||b.defaults)&&(Ne.labels={}),b.defaults&&(Ne.database=""),n.database!=null&&n.hasOwnProperty("database")&&(Ne.database=n.database),n.addTarget!=null&&n.hasOwnProperty("addTarget")&&(Ne.addTarget=o.google.firestore.v1.Target.toObject(n.addTarget,b),b.oneofs)&&(Ne.targetChange="addTarget"),n.removeTarget!=null&&n.hasOwnProperty("removeTarget")&&(Ne.removeTarget=n.removeTarget,b.oneofs)&&(Ne.targetChange="removeTarget"),n.labels&&(T=Object.keys(n.labels)).length){Ne.labels={};for(var ur=0;ur<T.length;++ur)Ne.labels[T[ur]]=n.labels[T[ur]]}return Ne},R.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},R.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ListenRequest"},R),d.ListenResponse=(ce.prototype.targetChange=null,ce.prototype.documentChange=null,ce.prototype.documentDelete=null,ce.prototype.documentRemove=null,ce.prototype.filter=null,Object.defineProperty(ce.prototype,"responseType",{get:a.oneOfGetter(m=["targetChange","documentChange","documentDelete","documentRemove","filter"]),set:a.oneOfSetter(m)}),ce.fromObject=function(n){if(n instanceof o.google.firestore.v1.ListenResponse)return n;var b=new o.google.firestore.v1.ListenResponse;if(n.targetChange!=null){if(typeof n.targetChange!="object")throw TypeError(".google.firestore.v1.ListenResponse.targetChange: object expected");b.targetChange=o.google.firestore.v1.TargetChange.fromObject(n.targetChange)}if(n.documentChange!=null){if(typeof n.documentChange!="object")throw TypeError(".google.firestore.v1.ListenResponse.documentChange: object expected");b.documentChange=o.google.firestore.v1.DocumentChange.fromObject(n.documentChange)}if(n.documentDelete!=null){if(typeof n.documentDelete!="object")throw TypeError(".google.firestore.v1.ListenResponse.documentDelete: object expected");b.documentDelete=o.google.firestore.v1.DocumentDelete.fromObject(n.documentDelete)}if(n.documentRemove!=null){if(typeof n.documentRemove!="object")throw TypeError(".google.firestore.v1.ListenResponse.documentRemove: object expected");b.documentRemove=o.google.firestore.v1.DocumentRemove.fromObject(n.documentRemove)}if(n.filter!=null){if(typeof n.filter!="object")throw TypeError(".google.firestore.v1.ListenResponse.filter: object expected");b.filter=o.google.firestore.v1.ExistenceFilter.fromObject(n.filter)}return b},ce.toObject=function(n,b){b=b||{};var T={};return n.targetChange!=null&&n.hasOwnProperty("targetChange")&&(T.targetChange=o.google.firestore.v1.TargetChange.toObject(n.targetChange,b),b.oneofs)&&(T.responseType="targetChange"),n.documentChange!=null&&n.hasOwnProperty("documentChange")&&(T.documentChange=o.google.firestore.v1.DocumentChange.toObject(n.documentChange,b),b.oneofs)&&(T.responseType="documentChange"),n.documentDelete!=null&&n.hasOwnProperty("documentDelete")&&(T.documentDelete=o.google.firestore.v1.DocumentDelete.toObject(n.documentDelete,b),b.oneofs)&&(T.responseType="documentDelete"),n.filter!=null&&n.hasOwnProperty("filter")&&(T.filter=o.google.firestore.v1.ExistenceFilter.toObject(n.filter,b),b.oneofs)&&(T.responseType="filter"),n.documentRemove!=null&&n.hasOwnProperty("documentRemove")&&(T.documentRemove=o.google.firestore.v1.DocumentRemove.toObject(n.documentRemove,b),b.oneofs)&&(T.responseType="documentRemove"),T},ce.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ce.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ListenResponse"},ce),d.Target=(Re.prototype.query=null,Re.prototype.documents=null,Re.prototype.resumeToken=null,Re.prototype.readTime=null,Re.prototype.targetId=0,Re.prototype.once=!1,Re.prototype.expectedCount=null,Object.defineProperty(Re.prototype,"targetType",{get:a.oneOfGetter(m=["query","documents"]),set:a.oneOfSetter(m)}),Object.defineProperty(Re.prototype,"resumeType",{get:a.oneOfGetter(m=["resumeToken","readTime"]),set:a.oneOfSetter(m)}),Re.fromObject=function(n){if(n instanceof o.google.firestore.v1.Target)return n;var b=new o.google.firestore.v1.Target;if(n.query!=null){if(typeof n.query!="object")throw TypeError(".google.firestore.v1.Target.query: object expected");b.query=o.google.firestore.v1.Target.QueryTarget.fromObject(n.query)}if(n.documents!=null){if(typeof n.documents!="object")throw TypeError(".google.firestore.v1.Target.documents: object expected");b.documents=o.google.firestore.v1.Target.DocumentsTarget.fromObject(n.documents)}if(n.resumeToken!=null&&(typeof n.resumeToken=="string"?a.base64.decode(n.resumeToken,b.resumeToken=a.newBuffer(a.base64.length(n.resumeToken)),0):0<=n.resumeToken.length&&(b.resumeToken=n.resumeToken)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.Target.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}if(n.targetId!=null&&(b.targetId=0|n.targetId),n.once!=null&&(b.once=!!n.once),n.expectedCount!=null){if(typeof n.expectedCount!="object")throw TypeError(".google.firestore.v1.Target.expectedCount: object expected");b.expectedCount=o.google.protobuf.Int32Value.fromObject(n.expectedCount)}return b},Re.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.targetId=0,T.once=!1,T.expectedCount=null),n.query!=null&&n.hasOwnProperty("query")&&(T.query=o.google.firestore.v1.Target.QueryTarget.toObject(n.query,b),b.oneofs)&&(T.targetType="query"),n.documents!=null&&n.hasOwnProperty("documents")&&(T.documents=o.google.firestore.v1.Target.DocumentsTarget.toObject(n.documents,b),b.oneofs)&&(T.targetType="documents"),n.resumeToken!=null&&n.hasOwnProperty("resumeToken")&&(T.resumeToken=b.bytes===String?a.base64.encode(n.resumeToken,0,n.resumeToken.length):b.bytes===Array?Array.prototype.slice.call(n.resumeToken):n.resumeToken,b.oneofs)&&(T.resumeType="resumeToken"),n.targetId!=null&&n.hasOwnProperty("targetId")&&(T.targetId=n.targetId),n.once!=null&&n.hasOwnProperty("once")&&(T.once=n.once),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.resumeType="readTime"),n.expectedCount!=null&&n.hasOwnProperty("expectedCount")&&(T.expectedCount=o.google.protobuf.Int32Value.toObject(n.expectedCount,b)),T},Re.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Re.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Target"},Re.DocumentsTarget=(ke.prototype.documents=a.emptyArray,ke.fromObject=function(n){if(n instanceof o.google.firestore.v1.Target.DocumentsTarget)return n;var b=new o.google.firestore.v1.Target.DocumentsTarget;if(n.documents){if(!Array.isArray(n.documents))throw TypeError(".google.firestore.v1.Target.DocumentsTarget.documents: array expected");b.documents=[];for(var T=0;T<n.documents.length;++T)b.documents[T]=String(n.documents[T])}return b},ke.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.documents=[]),n.documents&&n.documents.length){T.documents=[];for(var Ne=0;Ne<n.documents.length;++Ne)T.documents[Ne]=n.documents[Ne]}return T},ke.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ke.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Target.DocumentsTarget"},ke),Re.QueryTarget=(qe.prototype.parent="",qe.prototype.structuredQuery=null,Object.defineProperty(qe.prototype,"queryType",{get:a.oneOfGetter(m=["structuredQuery"]),set:a.oneOfSetter(m)}),qe.fromObject=function(n){if(n instanceof o.google.firestore.v1.Target.QueryTarget)return n;var b=new o.google.firestore.v1.Target.QueryTarget;if(n.parent!=null&&(b.parent=String(n.parent)),n.structuredQuery!=null){if(typeof n.structuredQuery!="object")throw TypeError(".google.firestore.v1.Target.QueryTarget.structuredQuery: object expected");b.structuredQuery=o.google.firestore.v1.StructuredQuery.fromObject(n.structuredQuery)}return b},qe.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.parent=""),n.parent!=null&&n.hasOwnProperty("parent")&&(T.parent=n.parent),n.structuredQuery!=null&&n.hasOwnProperty("structuredQuery")&&(T.structuredQuery=o.google.firestore.v1.StructuredQuery.toObject(n.structuredQuery,b),b.oneofs)&&(T.queryType="structuredQuery"),T},qe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},qe.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Target.QueryTarget"},qe),Re),d.TargetChange=(g.prototype.targetChangeType=0,g.prototype.targetIds=a.emptyArray,g.prototype.cause=null,g.prototype.resumeToken=a.newBuffer([]),g.prototype.readTime=null,g.fromObject=function(n){if(n instanceof o.google.firestore.v1.TargetChange)return n;var b=new o.google.firestore.v1.TargetChange;switch(n.targetChangeType){default:typeof n.targetChangeType=="number"&&(b.targetChangeType=n.targetChangeType);break;case"NO_CHANGE":case 0:b.targetChangeType=0;break;case"ADD":case 1:b.targetChangeType=1;break;case"REMOVE":case 2:b.targetChangeType=2;break;case"CURRENT":case 3:b.targetChangeType=3;break;case"RESET":case 4:b.targetChangeType=4}if(n.targetIds){if(!Array.isArray(n.targetIds))throw TypeError(".google.firestore.v1.TargetChange.targetIds: array expected");b.targetIds=[];for(var T=0;T<n.targetIds.length;++T)b.targetIds[T]=0|n.targetIds[T]}if(n.cause!=null){if(typeof n.cause!="object")throw TypeError(".google.firestore.v1.TargetChange.cause: object expected");b.cause=o.google.rpc.Status.fromObject(n.cause)}if(n.resumeToken!=null&&(typeof n.resumeToken=="string"?a.base64.decode(n.resumeToken,b.resumeToken=a.newBuffer(a.base64.length(n.resumeToken)),0):0<=n.resumeToken.length&&(b.resumeToken=n.resumeToken)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.TargetChange.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},g.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.targetIds=[]),b.defaults&&(T.targetChangeType=b.enums===String?"NO_CHANGE":0,T.cause=null,b.bytes===String?T.resumeToken="":(T.resumeToken=[],b.bytes!==Array&&(T.resumeToken=a.newBuffer(T.resumeToken))),T.readTime=null),n.targetChangeType!=null&&n.hasOwnProperty("targetChangeType")&&(T.targetChangeType=b.enums!==String||o.google.firestore.v1.TargetChange.TargetChangeType[n.targetChangeType]===void 0?n.targetChangeType:o.google.firestore.v1.TargetChange.TargetChangeType[n.targetChangeType]),n.targetIds&&n.targetIds.length){T.targetIds=[];for(var Ne=0;Ne<n.targetIds.length;++Ne)T.targetIds[Ne]=n.targetIds[Ne]}return n.cause!=null&&n.hasOwnProperty("cause")&&(T.cause=o.google.rpc.Status.toObject(n.cause,b)),n.resumeToken!=null&&n.hasOwnProperty("resumeToken")&&(T.resumeToken=b.bytes===String?a.base64.encode(n.resumeToken,0,n.resumeToken.length):b.bytes===Array?Array.prototype.slice.call(n.resumeToken):n.resumeToken),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),T},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.TargetChange"},g.TargetChangeType=(m={},(r=Object.create(m))[m[0]="NO_CHANGE"]="NO_CHANGE",r[m[1]="ADD"]="ADD",r[m[2]="REMOVE"]="REMOVE",r[m[3]="CURRENT"]="CURRENT",r[m[4]="RESET"]="RESET",r),g),d.ListCollectionIdsRequest=(ee.prototype.parent="",ee.prototype.pageSize=0,ee.prototype.pageToken="",ee.prototype.readTime=null,Object.defineProperty(ee.prototype,"consistencySelector",{get:a.oneOfGetter(m=["readTime"]),set:a.oneOfSetter(m)}),ee.fromObject=function(n){if(n instanceof o.google.firestore.v1.ListCollectionIdsRequest)return n;var b=new o.google.firestore.v1.ListCollectionIdsRequest;if(n.parent!=null&&(b.parent=String(n.parent)),n.pageSize!=null&&(b.pageSize=0|n.pageSize),n.pageToken!=null&&(b.pageToken=String(n.pageToken)),n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.ListCollectionIdsRequest.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},ee.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.parent="",T.pageSize=0,T.pageToken=""),n.parent!=null&&n.hasOwnProperty("parent")&&(T.parent=n.parent),n.pageSize!=null&&n.hasOwnProperty("pageSize")&&(T.pageSize=n.pageSize),n.pageToken!=null&&n.hasOwnProperty("pageToken")&&(T.pageToken=n.pageToken),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b),b.oneofs)&&(T.consistencySelector="readTime"),T},ee.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ee.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ListCollectionIdsRequest"},ee),d.ListCollectionIdsResponse=(ae.prototype.collectionIds=a.emptyArray,ae.prototype.nextPageToken="",ae.fromObject=function(n){if(n instanceof o.google.firestore.v1.ListCollectionIdsResponse)return n;var b=new o.google.firestore.v1.ListCollectionIdsResponse;if(n.collectionIds){if(!Array.isArray(n.collectionIds))throw TypeError(".google.firestore.v1.ListCollectionIdsResponse.collectionIds: array expected");b.collectionIds=[];for(var T=0;T<n.collectionIds.length;++T)b.collectionIds[T]=String(n.collectionIds[T])}return n.nextPageToken!=null&&(b.nextPageToken=String(n.nextPageToken)),b},ae.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.collectionIds=[]),b.defaults&&(T.nextPageToken=""),n.collectionIds&&n.collectionIds.length){T.collectionIds=[];for(var Ne=0;Ne<n.collectionIds.length;++Ne)T.collectionIds[Ne]=n.collectionIds[Ne]}return n.nextPageToken!=null&&n.hasOwnProperty("nextPageToken")&&(T.nextPageToken=n.nextPageToken),T},ae.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ae.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ListCollectionIdsResponse"},ae),d.BatchWriteRequest=(l.prototype.database="",l.prototype.writes=a.emptyArray,l.prototype.labels=a.emptyObject,l.fromObject=function(n){if(n instanceof o.google.firestore.v1.BatchWriteRequest)return n;var b=new o.google.firestore.v1.BatchWriteRequest;if(n.database!=null&&(b.database=String(n.database)),n.writes){if(!Array.isArray(n.writes))throw TypeError(".google.firestore.v1.BatchWriteRequest.writes: array expected");b.writes=[];for(var T=0;T<n.writes.length;++T){if(typeof n.writes[T]!="object")throw TypeError(".google.firestore.v1.BatchWriteRequest.writes: object expected");b.writes[T]=o.google.firestore.v1.Write.fromObject(n.writes[T])}}if(n.labels){if(typeof n.labels!="object")throw TypeError(".google.firestore.v1.BatchWriteRequest.labels: object expected");b.labels={};for(var Ne=Object.keys(n.labels),T=0;T<Ne.length;++T)b.labels[Ne[T]]=String(n.labels[Ne[T]])}return b},l.toObject=function(n,b){var T,Ne={};if(((b=b||{}).arrays||b.defaults)&&(Ne.writes=[]),(b.objects||b.defaults)&&(Ne.labels={}),b.defaults&&(Ne.database=""),n.database!=null&&n.hasOwnProperty("database")&&(Ne.database=n.database),n.writes&&n.writes.length){Ne.writes=[];for(var ur=0;ur<n.writes.length;++ur)Ne.writes[ur]=o.google.firestore.v1.Write.toObject(n.writes[ur],b)}if(n.labels&&(T=Object.keys(n.labels)).length)for(Ne.labels={},ur=0;ur<T.length;++ur)Ne.labels[T[ur]]=n.labels[T[ur]];return Ne},l.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},l.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BatchWriteRequest"},l),d.BatchWriteResponse=(X.prototype.writeResults=a.emptyArray,X.prototype.status=a.emptyArray,X.fromObject=function(n){if(n instanceof o.google.firestore.v1.BatchWriteResponse)return n;var b=new o.google.firestore.v1.BatchWriteResponse;if(n.writeResults){if(!Array.isArray(n.writeResults))throw TypeError(".google.firestore.v1.BatchWriteResponse.writeResults: array expected");b.writeResults=[];for(var T=0;T<n.writeResults.length;++T){if(typeof n.writeResults[T]!="object")throw TypeError(".google.firestore.v1.BatchWriteResponse.writeResults: object expected");b.writeResults[T]=o.google.firestore.v1.WriteResult.fromObject(n.writeResults[T])}}if(n.status){if(!Array.isArray(n.status))throw TypeError(".google.firestore.v1.BatchWriteResponse.status: array expected");for(b.status=[],T=0;T<n.status.length;++T){if(typeof n.status[T]!="object")throw TypeError(".google.firestore.v1.BatchWriteResponse.status: object expected");b.status[T]=o.google.rpc.Status.fromObject(n.status[T])}}return b},X.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.writeResults=[],T.status=[]),n.writeResults&&n.writeResults.length){T.writeResults=[];for(var Ne=0;Ne<n.writeResults.length;++Ne)T.writeResults[Ne]=o.google.firestore.v1.WriteResult.toObject(n.writeResults[Ne],b)}if(n.status&&n.status.length)for(T.status=[],Ne=0;Ne<n.status.length;++Ne)T.status[Ne]=o.google.rpc.Status.toObject(n.status[Ne],b);return T},X.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},X.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.BatchWriteResponse"},X),d.StructuredQuery=(oe.prototype.select=null,oe.prototype.from=a.emptyArray,oe.prototype.where=null,oe.prototype.orderBy=a.emptyArray,oe.prototype.startAt=null,oe.prototype.endAt=null,oe.prototype.offset=0,oe.prototype.limit=null,oe.prototype.findNearest=null,oe.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery)return n;var b=new o.google.firestore.v1.StructuredQuery;if(n.select!=null){if(typeof n.select!="object")throw TypeError(".google.firestore.v1.StructuredQuery.select: object expected");b.select=o.google.firestore.v1.StructuredQuery.Projection.fromObject(n.select)}if(n.from){if(!Array.isArray(n.from))throw TypeError(".google.firestore.v1.StructuredQuery.from: array expected");b.from=[];for(var T=0;T<n.from.length;++T){if(typeof n.from[T]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.from: object expected");b.from[T]=o.google.firestore.v1.StructuredQuery.CollectionSelector.fromObject(n.from[T])}}if(n.where!=null){if(typeof n.where!="object")throw TypeError(".google.firestore.v1.StructuredQuery.where: object expected");b.where=o.google.firestore.v1.StructuredQuery.Filter.fromObject(n.where)}if(n.orderBy){if(!Array.isArray(n.orderBy))throw TypeError(".google.firestore.v1.StructuredQuery.orderBy: array expected");for(b.orderBy=[],T=0;T<n.orderBy.length;++T){if(typeof n.orderBy[T]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.orderBy: object expected");b.orderBy[T]=o.google.firestore.v1.StructuredQuery.Order.fromObject(n.orderBy[T])}}if(n.startAt!=null){if(typeof n.startAt!="object")throw TypeError(".google.firestore.v1.StructuredQuery.startAt: object expected");b.startAt=o.google.firestore.v1.Cursor.fromObject(n.startAt)}if(n.endAt!=null){if(typeof n.endAt!="object")throw TypeError(".google.firestore.v1.StructuredQuery.endAt: object expected");b.endAt=o.google.firestore.v1.Cursor.fromObject(n.endAt)}if(n.offset!=null&&(b.offset=0|n.offset),n.limit!=null){if(typeof n.limit!="object")throw TypeError(".google.firestore.v1.StructuredQuery.limit: object expected");b.limit=o.google.protobuf.Int32Value.fromObject(n.limit)}if(n.findNearest!=null){if(typeof n.findNearest!="object")throw TypeError(".google.firestore.v1.StructuredQuery.findNearest: object expected");b.findNearest=o.google.firestore.v1.StructuredQuery.FindNearest.fromObject(n.findNearest)}return b},oe.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.from=[],T.orderBy=[]),b.defaults&&(T.select=null,T.where=null,T.limit=null,T.offset=0,T.startAt=null,T.endAt=null,T.findNearest=null),n.select!=null&&n.hasOwnProperty("select")&&(T.select=o.google.firestore.v1.StructuredQuery.Projection.toObject(n.select,b)),n.from&&n.from.length){T.from=[];for(var Ne=0;Ne<n.from.length;++Ne)T.from[Ne]=o.google.firestore.v1.StructuredQuery.CollectionSelector.toObject(n.from[Ne],b)}if(n.where!=null&&n.hasOwnProperty("where")&&(T.where=o.google.firestore.v1.StructuredQuery.Filter.toObject(n.where,b)),n.orderBy&&n.orderBy.length)for(T.orderBy=[],Ne=0;Ne<n.orderBy.length;++Ne)T.orderBy[Ne]=o.google.firestore.v1.StructuredQuery.Order.toObject(n.orderBy[Ne],b);return n.limit!=null&&n.hasOwnProperty("limit")&&(T.limit=o.google.protobuf.Int32Value.toObject(n.limit,b)),n.offset!=null&&n.hasOwnProperty("offset")&&(T.offset=n.offset),n.startAt!=null&&n.hasOwnProperty("startAt")&&(T.startAt=o.google.firestore.v1.Cursor.toObject(n.startAt,b)),n.endAt!=null&&n.hasOwnProperty("endAt")&&(T.endAt=o.google.firestore.v1.Cursor.toObject(n.endAt,b)),n.findNearest!=null&&n.hasOwnProperty("findNearest")&&(T.findNearest=o.google.firestore.v1.StructuredQuery.FindNearest.toObject(n.findNearest,b)),T},oe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},oe.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery"},oe.CollectionSelector=(_e.prototype.collectionId="",_e.prototype.allDescendants=!1,_e.fromObject=function(n){var b;return n instanceof o.google.firestore.v1.StructuredQuery.CollectionSelector?n:(b=new o.google.firestore.v1.StructuredQuery.CollectionSelector,n.collectionId!=null&&(b.collectionId=String(n.collectionId)),n.allDescendants!=null&&(b.allDescendants=!!n.allDescendants),b)},_e.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.collectionId="",T.allDescendants=!1),n.collectionId!=null&&n.hasOwnProperty("collectionId")&&(T.collectionId=n.collectionId),n.allDescendants!=null&&n.hasOwnProperty("allDescendants")&&(T.allDescendants=n.allDescendants),T},_e.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},_e.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.CollectionSelector"},_e),oe.Filter=(He.prototype.compositeFilter=null,He.prototype.fieldFilter=null,He.prototype.unaryFilter=null,Object.defineProperty(He.prototype,"filterType",{get:a.oneOfGetter(r=["compositeFilter","fieldFilter","unaryFilter"]),set:a.oneOfSetter(r)}),He.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery.Filter)return n;var b=new o.google.firestore.v1.StructuredQuery.Filter;if(n.compositeFilter!=null){if(typeof n.compositeFilter!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Filter.compositeFilter: object expected");b.compositeFilter=o.google.firestore.v1.StructuredQuery.CompositeFilter.fromObject(n.compositeFilter)}if(n.fieldFilter!=null){if(typeof n.fieldFilter!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Filter.fieldFilter: object expected");b.fieldFilter=o.google.firestore.v1.StructuredQuery.FieldFilter.fromObject(n.fieldFilter)}if(n.unaryFilter!=null){if(typeof n.unaryFilter!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Filter.unaryFilter: object expected");b.unaryFilter=o.google.firestore.v1.StructuredQuery.UnaryFilter.fromObject(n.unaryFilter)}return b},He.toObject=function(n,b){b=b||{};var T={};return n.compositeFilter!=null&&n.hasOwnProperty("compositeFilter")&&(T.compositeFilter=o.google.firestore.v1.StructuredQuery.CompositeFilter.toObject(n.compositeFilter,b),b.oneofs)&&(T.filterType="compositeFilter"),n.fieldFilter!=null&&n.hasOwnProperty("fieldFilter")&&(T.fieldFilter=o.google.firestore.v1.StructuredQuery.FieldFilter.toObject(n.fieldFilter,b),b.oneofs)&&(T.filterType="fieldFilter"),n.unaryFilter!=null&&n.hasOwnProperty("unaryFilter")&&(T.unaryFilter=o.google.firestore.v1.StructuredQuery.UnaryFilter.toObject(n.unaryFilter,b),b.oneofs)&&(T.filterType="unaryFilter"),T},He.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},He.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.Filter"},He),oe.CompositeFilter=(nt.prototype.op=0,nt.prototype.filters=a.emptyArray,nt.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery.CompositeFilter)return n;var b=new o.google.firestore.v1.StructuredQuery.CompositeFilter;switch(n.op){default:typeof n.op=="number"&&(b.op=n.op);break;case"OPERATOR_UNSPECIFIED":case 0:b.op=0;break;case"AND":case 1:b.op=1;break;case"OR":case 2:b.op=2}if(n.filters){if(!Array.isArray(n.filters))throw TypeError(".google.firestore.v1.StructuredQuery.CompositeFilter.filters: array expected");b.filters=[];for(var T=0;T<n.filters.length;++T){if(typeof n.filters[T]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.CompositeFilter.filters: object expected");b.filters[T]=o.google.firestore.v1.StructuredQuery.Filter.fromObject(n.filters[T])}}return b},nt.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.filters=[]),b.defaults&&(T.op=b.enums===String?"OPERATOR_UNSPECIFIED":0),n.op!=null&&n.hasOwnProperty("op")&&(T.op=b.enums!==String||o.google.firestore.v1.StructuredQuery.CompositeFilter.Operator[n.op]===void 0?n.op:o.google.firestore.v1.StructuredQuery.CompositeFilter.Operator[n.op]),n.filters&&n.filters.length){T.filters=[];for(var Ne=0;Ne<n.filters.length;++Ne)T.filters[Ne]=o.google.firestore.v1.StructuredQuery.Filter.toObject(n.filters[Ne],b)}return T},nt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},nt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.CompositeFilter"},nt.Operator=(r={},(m=Object.create(r))[r[0]="OPERATOR_UNSPECIFIED"]="OPERATOR_UNSPECIFIED",m[r[1]="AND"]="AND",m[r[2]="OR"]="OR",m),nt),oe.FieldFilter=(It.prototype.field=null,It.prototype.op=0,It.prototype.value=null,It.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery.FieldFilter)return n;var b=new o.google.firestore.v1.StructuredQuery.FieldFilter;if(n.field!=null){if(typeof n.field!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FieldFilter.field: object expected");b.field=o.google.firestore.v1.StructuredQuery.FieldReference.fromObject(n.field)}switch(n.op){default:typeof n.op=="number"&&(b.op=n.op);break;case"OPERATOR_UNSPECIFIED":case 0:b.op=0;break;case"LESS_THAN":case 1:b.op=1;break;case"LESS_THAN_OR_EQUAL":case 2:b.op=2;break;case"GREATER_THAN":case 3:b.op=3;break;case"GREATER_THAN_OR_EQUAL":case 4:b.op=4;break;case"EQUAL":case 5:b.op=5;break;case"NOT_EQUAL":case 6:b.op=6;break;case"ARRAY_CONTAINS":case 7:b.op=7;break;case"IN":case 8:b.op=8;break;case"ARRAY_CONTAINS_ANY":case 9:b.op=9;break;case"NOT_IN":case 10:b.op=10}if(n.value!=null){if(typeof n.value!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FieldFilter.value: object expected");b.value=o.google.firestore.v1.Value.fromObject(n.value)}return b},It.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.field=null,T.op=b.enums===String?"OPERATOR_UNSPECIFIED":0,T.value=null),n.field!=null&&n.hasOwnProperty("field")&&(T.field=o.google.firestore.v1.StructuredQuery.FieldReference.toObject(n.field,b)),n.op!=null&&n.hasOwnProperty("op")&&(T.op=b.enums!==String||o.google.firestore.v1.StructuredQuery.FieldFilter.Operator[n.op]===void 0?n.op:o.google.firestore.v1.StructuredQuery.FieldFilter.Operator[n.op]),n.value!=null&&n.hasOwnProperty("value")&&(T.value=o.google.firestore.v1.Value.toObject(n.value,b)),T},It.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},It.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.FieldFilter"},It.Operator=(r={},(m=Object.create(r))[r[0]="OPERATOR_UNSPECIFIED"]="OPERATOR_UNSPECIFIED",m[r[1]="LESS_THAN"]="LESS_THAN",m[r[2]="LESS_THAN_OR_EQUAL"]="LESS_THAN_OR_EQUAL",m[r[3]="GREATER_THAN"]="GREATER_THAN",m[r[4]="GREATER_THAN_OR_EQUAL"]="GREATER_THAN_OR_EQUAL",m[r[5]="EQUAL"]="EQUAL",m[r[6]="NOT_EQUAL"]="NOT_EQUAL",m[r[7]="ARRAY_CONTAINS"]="ARRAY_CONTAINS",m[r[8]="IN"]="IN",m[r[9]="ARRAY_CONTAINS_ANY"]="ARRAY_CONTAINS_ANY",m[r[10]="NOT_IN"]="NOT_IN",m),It),oe.UnaryFilter=(wt.prototype.op=0,wt.prototype.field=null,Object.defineProperty(wt.prototype,"operandType",{get:a.oneOfGetter(r=["field"]),set:a.oneOfSetter(r)}),wt.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery.UnaryFilter)return n;var b=new o.google.firestore.v1.StructuredQuery.UnaryFilter;switch(n.op){default:typeof n.op=="number"&&(b.op=n.op);break;case"OPERATOR_UNSPECIFIED":case 0:b.op=0;break;case"IS_NAN":case 2:b.op=2;break;case"IS_NULL":case 3:b.op=3;break;case"IS_NOT_NAN":case 4:b.op=4;break;case"IS_NOT_NULL":case 5:b.op=5}if(n.field!=null){if(typeof n.field!="object")throw TypeError(".google.firestore.v1.StructuredQuery.UnaryFilter.field: object expected");b.field=o.google.firestore.v1.StructuredQuery.FieldReference.fromObject(n.field)}return b},wt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.op=b.enums===String?"OPERATOR_UNSPECIFIED":0),n.op!=null&&n.hasOwnProperty("op")&&(T.op=b.enums!==String||o.google.firestore.v1.StructuredQuery.UnaryFilter.Operator[n.op]===void 0?n.op:o.google.firestore.v1.StructuredQuery.UnaryFilter.Operator[n.op]),n.field!=null&&n.hasOwnProperty("field")&&(T.field=o.google.firestore.v1.StructuredQuery.FieldReference.toObject(n.field,b),b.oneofs)&&(T.operandType="field"),T},wt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},wt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.UnaryFilter"},wt.Operator=(r={},(m=Object.create(r))[r[0]="OPERATOR_UNSPECIFIED"]="OPERATOR_UNSPECIFIED",m[r[2]="IS_NAN"]="IS_NAN",m[r[3]="IS_NULL"]="IS_NULL",m[r[4]="IS_NOT_NAN"]="IS_NOT_NAN",m[r[5]="IS_NOT_NULL"]="IS_NOT_NULL",m),wt),oe.Order=(ir.prototype.field=null,ir.prototype.direction=0,ir.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery.Order)return n;var b=new o.google.firestore.v1.StructuredQuery.Order;if(n.field!=null){if(typeof n.field!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Order.field: object expected");b.field=o.google.firestore.v1.StructuredQuery.FieldReference.fromObject(n.field)}switch(n.direction){default:typeof n.direction=="number"&&(b.direction=n.direction);break;case"DIRECTION_UNSPECIFIED":case 0:b.direction=0;break;case"ASCENDING":case 1:b.direction=1;break;case"DESCENDING":case 2:b.direction=2}return b},ir.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.field=null,T.direction=b.enums===String?"DIRECTION_UNSPECIFIED":0),n.field!=null&&n.hasOwnProperty("field")&&(T.field=o.google.firestore.v1.StructuredQuery.FieldReference.toObject(n.field,b)),n.direction!=null&&n.hasOwnProperty("direction")&&(T.direction=b.enums!==String||o.google.firestore.v1.StructuredQuery.Direction[n.direction]===void 0?n.direction:o.google.firestore.v1.StructuredQuery.Direction[n.direction]),T},ir.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ir.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.Order"},ir),oe.Direction=(r={},(m=Object.create(r))[r[0]="DIRECTION_UNSPECIFIED"]="DIRECTION_UNSPECIFIED",m[r[1]="ASCENDING"]="ASCENDING",m[r[2]="DESCENDING"]="DESCENDING",m),oe.FieldReference=(_r.prototype.fieldPath="",_r.fromObject=function(n){var b;return n instanceof o.google.firestore.v1.StructuredQuery.FieldReference?n:(b=new o.google.firestore.v1.StructuredQuery.FieldReference,n.fieldPath!=null&&(b.fieldPath=String(n.fieldPath)),b)},_r.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.fieldPath=""),n.fieldPath!=null&&n.hasOwnProperty("fieldPath")&&(T.fieldPath=n.fieldPath),T},_r.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},_r.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.FieldReference"},_r),oe.Projection=(Rr.prototype.fields=a.emptyArray,Rr.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery.Projection)return n;var b=new o.google.firestore.v1.StructuredQuery.Projection;if(n.fields){if(!Array.isArray(n.fields))throw TypeError(".google.firestore.v1.StructuredQuery.Projection.fields: array expected");b.fields=[];for(var T=0;T<n.fields.length;++T){if(typeof n.fields[T]!="object")throw TypeError(".google.firestore.v1.StructuredQuery.Projection.fields: object expected");b.fields[T]=o.google.firestore.v1.StructuredQuery.FieldReference.fromObject(n.fields[T])}}return b},Rr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.fields=[]),n.fields&&n.fields.length){T.fields=[];for(var Ne=0;Ne<n.fields.length;++Ne)T.fields[Ne]=o.google.firestore.v1.StructuredQuery.FieldReference.toObject(n.fields[Ne],b)}return T},Rr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Rr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.Projection"},Rr),oe.FindNearest=(Hr.prototype.vectorField=null,Hr.prototype.queryVector=null,Hr.prototype.distanceMeasure=0,Hr.prototype.limit=null,Hr.prototype.distanceResultField="",Hr.prototype.distanceThreshold=null,Hr.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredQuery.FindNearest)return n;var b=new o.google.firestore.v1.StructuredQuery.FindNearest;if(n.vectorField!=null){if(typeof n.vectorField!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.vectorField: object expected");b.vectorField=o.google.firestore.v1.StructuredQuery.FieldReference.fromObject(n.vectorField)}if(n.queryVector!=null){if(typeof n.queryVector!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.queryVector: object expected");b.queryVector=o.google.firestore.v1.Value.fromObject(n.queryVector)}switch(n.distanceMeasure){default:typeof n.distanceMeasure=="number"&&(b.distanceMeasure=n.distanceMeasure);break;case"DISTANCE_MEASURE_UNSPECIFIED":case 0:b.distanceMeasure=0;break;case"EUCLIDEAN":case 1:b.distanceMeasure=1;break;case"COSINE":case 2:b.distanceMeasure=2;break;case"DOT_PRODUCT":case 3:b.distanceMeasure=3}if(n.limit!=null){if(typeof n.limit!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.limit: object expected");b.limit=o.google.protobuf.Int32Value.fromObject(n.limit)}if(n.distanceResultField!=null&&(b.distanceResultField=String(n.distanceResultField)),n.distanceThreshold!=null){if(typeof n.distanceThreshold!="object")throw TypeError(".google.firestore.v1.StructuredQuery.FindNearest.distanceThreshold: object expected");b.distanceThreshold=o.google.protobuf.DoubleValue.fromObject(n.distanceThreshold)}return b},Hr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.vectorField=null,T.queryVector=null,T.distanceMeasure=b.enums===String?"DISTANCE_MEASURE_UNSPECIFIED":0,T.limit=null,T.distanceResultField="",T.distanceThreshold=null),n.vectorField!=null&&n.hasOwnProperty("vectorField")&&(T.vectorField=o.google.firestore.v1.StructuredQuery.FieldReference.toObject(n.vectorField,b)),n.queryVector!=null&&n.hasOwnProperty("queryVector")&&(T.queryVector=o.google.firestore.v1.Value.toObject(n.queryVector,b)),n.distanceMeasure!=null&&n.hasOwnProperty("distanceMeasure")&&(T.distanceMeasure=b.enums!==String||o.google.firestore.v1.StructuredQuery.FindNearest.DistanceMeasure[n.distanceMeasure]===void 0?n.distanceMeasure:o.google.firestore.v1.StructuredQuery.FindNearest.DistanceMeasure[n.distanceMeasure]),n.limit!=null&&n.hasOwnProperty("limit")&&(T.limit=o.google.protobuf.Int32Value.toObject(n.limit,b)),n.distanceResultField!=null&&n.hasOwnProperty("distanceResultField")&&(T.distanceResultField=n.distanceResultField),n.distanceThreshold!=null&&n.hasOwnProperty("distanceThreshold")&&(T.distanceThreshold=o.google.protobuf.DoubleValue.toObject(n.distanceThreshold,b)),T},Hr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Hr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredQuery.FindNearest"},Hr.DistanceMeasure=(r={},(m=Object.create(r))[r[0]="DISTANCE_MEASURE_UNSPECIFIED"]="DISTANCE_MEASURE_UNSPECIFIED",m[r[1]="EUCLIDEAN"]="EUCLIDEAN",m[r[2]="COSINE"]="COSINE",m[r[3]="DOT_PRODUCT"]="DOT_PRODUCT",m),Hr),oe),d.StructuredAggregationQuery=(Vr.prototype.structuredQuery=null,Vr.prototype.aggregations=a.emptyArray,Object.defineProperty(Vr.prototype,"queryType",{get:a.oneOfGetter(r=["structuredQuery"]),set:a.oneOfSetter(r)}),Vr.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredAggregationQuery)return n;var b=new o.google.firestore.v1.StructuredAggregationQuery;if(n.structuredQuery!=null){if(typeof n.structuredQuery!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.structuredQuery: object expected");b.structuredQuery=o.google.firestore.v1.StructuredQuery.fromObject(n.structuredQuery)}if(n.aggregations){if(!Array.isArray(n.aggregations))throw TypeError(".google.firestore.v1.StructuredAggregationQuery.aggregations: array expected");b.aggregations=[];for(var T=0;T<n.aggregations.length;++T){if(typeof n.aggregations[T]!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.aggregations: object expected");b.aggregations[T]=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.fromObject(n.aggregations[T])}}return b},Vr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.aggregations=[]),n.structuredQuery!=null&&n.hasOwnProperty("structuredQuery")&&(T.structuredQuery=o.google.firestore.v1.StructuredQuery.toObject(n.structuredQuery,b),b.oneofs)&&(T.queryType="structuredQuery"),n.aggregations&&n.aggregations.length){T.aggregations=[];for(var Ne=0;Ne<n.aggregations.length;++Ne)T.aggregations[Ne]=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.toObject(n.aggregations[Ne],b)}return T},Vr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Vr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredAggregationQuery"},Vr.Aggregation=(Tr.prototype.count=null,Tr.prototype.sum=null,Tr.prototype.avg=null,Tr.prototype.alias="",Object.defineProperty(Tr.prototype,"operator",{get:a.oneOfGetter(r=["count","sum","avg"]),set:a.oneOfSetter(r)}),Tr.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredAggregationQuery.Aggregation)return n;var b=new o.google.firestore.v1.StructuredAggregationQuery.Aggregation;if(n.count!=null){if(typeof n.count!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.count: object expected");b.count=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.fromObject(n.count)}if(n.sum!=null){if(typeof n.sum!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.sum: object expected");b.sum=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.fromObject(n.sum)}if(n.avg!=null){if(typeof n.avg!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.avg: object expected");b.avg=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.fromObject(n.avg)}return n.alias!=null&&(b.alias=String(n.alias)),b},Tr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.alias=""),n.count!=null&&n.hasOwnProperty("count")&&(T.count=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.toObject(n.count,b),b.oneofs)&&(T.operator="count"),n.sum!=null&&n.hasOwnProperty("sum")&&(T.sum=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.toObject(n.sum,b),b.oneofs)&&(T.operator="sum"),n.avg!=null&&n.hasOwnProperty("avg")&&(T.avg=o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.toObject(n.avg,b),b.oneofs)&&(T.operator="avg"),n.alias!=null&&n.hasOwnProperty("alias")&&(T.alias=n.alias),T},Tr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Tr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation"},Tr.Count=($t.prototype.upTo=null,$t.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count)return n;var b=new o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Count;if(n.upTo!=null){if(typeof n.upTo!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.Count.upTo: object expected");b.upTo=o.google.protobuf.Int64Value.fromObject(n.upTo)}return b},$t.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.upTo=null),n.upTo!=null&&n.hasOwnProperty("upTo")&&(T.upTo=o.google.protobuf.Int64Value.toObject(n.upTo,b)),T},$t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},$t.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Count"},$t),Tr.Sum=(qt.prototype.field=null,qt.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum)return n;var b=new o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum;if(n.field!=null){if(typeof n.field!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum.field: object expected");b.field=o.google.firestore.v1.StructuredQuery.FieldReference.fromObject(n.field)}return b},qt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.field=null),n.field!=null&&n.hasOwnProperty("field")&&(T.field=o.google.firestore.v1.StructuredQuery.FieldReference.toObject(n.field,b)),T},qt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},qt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Sum"},qt),Tr.Avg=(Kt.prototype.field=null,Kt.fromObject=function(n){if(n instanceof o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg)return n;var b=new o.google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg;if(n.field!=null){if(typeof n.field!="object")throw TypeError(".google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg.field: object expected");b.field=o.google.firestore.v1.StructuredQuery.FieldReference.fromObject(n.field)}return b},Kt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.field=null),n.field!=null&&n.hasOwnProperty("field")&&(T.field=o.google.firestore.v1.StructuredQuery.FieldReference.toObject(n.field,b)),T},Kt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Kt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.StructuredAggregationQuery.Aggregation.Avg"},Kt),Tr),Vr),d.Cursor=(nr.prototype.values=a.emptyArray,nr.prototype.before=!1,nr.fromObject=function(n){if(n instanceof o.google.firestore.v1.Cursor)return n;var b=new o.google.firestore.v1.Cursor;if(n.values){if(!Array.isArray(n.values))throw TypeError(".google.firestore.v1.Cursor.values: array expected");b.values=[];for(var T=0;T<n.values.length;++T){if(typeof n.values[T]!="object")throw TypeError(".google.firestore.v1.Cursor.values: object expected");b.values[T]=o.google.firestore.v1.Value.fromObject(n.values[T])}}return n.before!=null&&(b.before=!!n.before),b},nr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.values=[]),b.defaults&&(T.before=!1),n.values&&n.values.length){T.values=[];for(var Ne=0;Ne<n.values.length;++Ne)T.values[Ne]=o.google.firestore.v1.Value.toObject(n.values[Ne],b)}return n.before!=null&&n.hasOwnProperty("before")&&(T.before=n.before),T},nr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},nr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Cursor"},nr),d.ExplainOptions=(dr.prototype.analyze=!1,dr.fromObject=function(n){var b;return n instanceof o.google.firestore.v1.ExplainOptions?n:(b=new o.google.firestore.v1.ExplainOptions,n.analyze!=null&&(b.analyze=!!n.analyze),b)},dr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.analyze=!1),n.analyze!=null&&n.hasOwnProperty("analyze")&&(T.analyze=n.analyze),T},dr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},dr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ExplainOptions"},dr),d.ExplainMetrics=(Er.prototype.planSummary=null,Er.prototype.executionStats=null,Er.fromObject=function(n){if(n instanceof o.google.firestore.v1.ExplainMetrics)return n;var b=new o.google.firestore.v1.ExplainMetrics;if(n.planSummary!=null){if(typeof n.planSummary!="object")throw TypeError(".google.firestore.v1.ExplainMetrics.planSummary: object expected");b.planSummary=o.google.firestore.v1.PlanSummary.fromObject(n.planSummary)}if(n.executionStats!=null){if(typeof n.executionStats!="object")throw TypeError(".google.firestore.v1.ExplainMetrics.executionStats: object expected");b.executionStats=o.google.firestore.v1.ExecutionStats.fromObject(n.executionStats)}return b},Er.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.planSummary=null,T.executionStats=null),n.planSummary!=null&&n.hasOwnProperty("planSummary")&&(T.planSummary=o.google.firestore.v1.PlanSummary.toObject(n.planSummary,b)),n.executionStats!=null&&n.hasOwnProperty("executionStats")&&(T.executionStats=o.google.firestore.v1.ExecutionStats.toObject(n.executionStats,b)),T},Er.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Er.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ExplainMetrics"},Er),d.PlanSummary=(Mr.prototype.indexesUsed=a.emptyArray,Mr.fromObject=function(n){if(n instanceof o.google.firestore.v1.PlanSummary)return n;var b=new o.google.firestore.v1.PlanSummary;if(n.indexesUsed){if(!Array.isArray(n.indexesUsed))throw TypeError(".google.firestore.v1.PlanSummary.indexesUsed: array expected");b.indexesUsed=[];for(var T=0;T<n.indexesUsed.length;++T){if(typeof n.indexesUsed[T]!="object")throw TypeError(".google.firestore.v1.PlanSummary.indexesUsed: object expected");b.indexesUsed[T]=o.google.protobuf.Struct.fromObject(n.indexesUsed[T])}}return b},Mr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.indexesUsed=[]),n.indexesUsed&&n.indexesUsed.length){T.indexesUsed=[];for(var Ne=0;Ne<n.indexesUsed.length;++Ne)T.indexesUsed[Ne]=o.google.protobuf.Struct.toObject(n.indexesUsed[Ne],b)}return T},Mr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Mr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.PlanSummary"},Mr),d.ExecutionStats=(jr.prototype.resultsReturned=a.Long?a.Long.fromBits(0,0,!1):0,jr.prototype.executionDuration=null,jr.prototype.readOperations=a.Long?a.Long.fromBits(0,0,!1):0,jr.prototype.debugStats=null,jr.fromObject=function(n){if(n instanceof o.google.firestore.v1.ExecutionStats)return n;var b=new o.google.firestore.v1.ExecutionStats;if(n.resultsReturned!=null&&(a.Long?(b.resultsReturned=a.Long.fromValue(n.resultsReturned)).unsigned=!1:typeof n.resultsReturned=="string"?b.resultsReturned=parseInt(n.resultsReturned,10):typeof n.resultsReturned=="number"?b.resultsReturned=n.resultsReturned:typeof n.resultsReturned=="object"&&(b.resultsReturned=new a.LongBits(n.resultsReturned.low>>>0,n.resultsReturned.high>>>0).toNumber())),n.executionDuration!=null){if(typeof n.executionDuration!="object")throw TypeError(".google.firestore.v1.ExecutionStats.executionDuration: object expected");b.executionDuration=o.google.protobuf.Duration.fromObject(n.executionDuration)}if(n.readOperations!=null&&(a.Long?(b.readOperations=a.Long.fromValue(n.readOperations)).unsigned=!1:typeof n.readOperations=="string"?b.readOperations=parseInt(n.readOperations,10):typeof n.readOperations=="number"?b.readOperations=n.readOperations:typeof n.readOperations=="object"&&(b.readOperations=new a.LongBits(n.readOperations.low>>>0,n.readOperations.high>>>0).toNumber())),n.debugStats!=null){if(typeof n.debugStats!="object")throw TypeError(".google.firestore.v1.ExecutionStats.debugStats: object expected");b.debugStats=o.google.protobuf.Struct.fromObject(n.debugStats)}return b},jr.toObject=function(n,b){var T,Ne={};return(b=b||{}).defaults&&(a.Long?(T=new a.Long(0,0,!1),Ne.resultsReturned=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.resultsReturned=b.longs===String?"0":0,Ne.executionDuration=null,a.Long?(T=new a.Long(0,0,!1),Ne.readOperations=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.readOperations=b.longs===String?"0":0,Ne.debugStats=null),n.resultsReturned!=null&&n.hasOwnProperty("resultsReturned")&&(typeof n.resultsReturned=="number"?Ne.resultsReturned=b.longs===String?String(n.resultsReturned):n.resultsReturned:Ne.resultsReturned=b.longs===String?a.Long.prototype.toString.call(n.resultsReturned):b.longs===Number?new a.LongBits(n.resultsReturned.low>>>0,n.resultsReturned.high>>>0).toNumber():n.resultsReturned),n.executionDuration!=null&&n.hasOwnProperty("executionDuration")&&(Ne.executionDuration=o.google.protobuf.Duration.toObject(n.executionDuration,b)),n.readOperations!=null&&n.hasOwnProperty("readOperations")&&(typeof n.readOperations=="number"?Ne.readOperations=b.longs===String?String(n.readOperations):n.readOperations:Ne.readOperations=b.longs===String?a.Long.prototype.toString.call(n.readOperations):b.longs===Number?new a.LongBits(n.readOperations.low>>>0,n.readOperations.high>>>0).toNumber():n.readOperations),n.debugStats!=null&&n.hasOwnProperty("debugStats")&&(Ne.debugStats=o.google.protobuf.Struct.toObject(n.debugStats,b)),Ne},jr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},jr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ExecutionStats"},jr),d.Write=(xr.prototype.update=null,xr.prototype.delete=null,xr.prototype.transform=null,xr.prototype.updateMask=null,xr.prototype.updateTransforms=a.emptyArray,xr.prototype.currentDocument=null,Object.defineProperty(xr.prototype,"operation",{get:a.oneOfGetter(m=["update","delete","transform"]),set:a.oneOfSetter(m)}),xr.fromObject=function(n){if(n instanceof o.google.firestore.v1.Write)return n;var b=new o.google.firestore.v1.Write;if(n.update!=null){if(typeof n.update!="object")throw TypeError(".google.firestore.v1.Write.update: object expected");b.update=o.google.firestore.v1.Document.fromObject(n.update)}if(n.delete!=null&&(b.delete=String(n.delete)),n.transform!=null){if(typeof n.transform!="object")throw TypeError(".google.firestore.v1.Write.transform: object expected");b.transform=o.google.firestore.v1.DocumentTransform.fromObject(n.transform)}if(n.updateMask!=null){if(typeof n.updateMask!="object")throw TypeError(".google.firestore.v1.Write.updateMask: object expected");b.updateMask=o.google.firestore.v1.DocumentMask.fromObject(n.updateMask)}if(n.updateTransforms){if(!Array.isArray(n.updateTransforms))throw TypeError(".google.firestore.v1.Write.updateTransforms: array expected");b.updateTransforms=[];for(var T=0;T<n.updateTransforms.length;++T){if(typeof n.updateTransforms[T]!="object")throw TypeError(".google.firestore.v1.Write.updateTransforms: object expected");b.updateTransforms[T]=o.google.firestore.v1.DocumentTransform.FieldTransform.fromObject(n.updateTransforms[T])}}if(n.currentDocument!=null){if(typeof n.currentDocument!="object")throw TypeError(".google.firestore.v1.Write.currentDocument: object expected");b.currentDocument=o.google.firestore.v1.Precondition.fromObject(n.currentDocument)}return b},xr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.updateTransforms=[]),b.defaults&&(T.updateMask=null,T.currentDocument=null),n.update!=null&&n.hasOwnProperty("update")&&(T.update=o.google.firestore.v1.Document.toObject(n.update,b),b.oneofs)&&(T.operation="update"),n.delete!=null&&n.hasOwnProperty("delete")&&(T.delete=n.delete,b.oneofs)&&(T.operation="delete"),n.updateMask!=null&&n.hasOwnProperty("updateMask")&&(T.updateMask=o.google.firestore.v1.DocumentMask.toObject(n.updateMask,b)),n.currentDocument!=null&&n.hasOwnProperty("currentDocument")&&(T.currentDocument=o.google.firestore.v1.Precondition.toObject(n.currentDocument,b)),n.transform!=null&&n.hasOwnProperty("transform")&&(T.transform=o.google.firestore.v1.DocumentTransform.toObject(n.transform,b),b.oneofs)&&(T.operation="transform"),n.updateTransforms&&n.updateTransforms.length){T.updateTransforms=[];for(var Ne=0;Ne<n.updateTransforms.length;++Ne)T.updateTransforms[Ne]=o.google.firestore.v1.DocumentTransform.FieldTransform.toObject(n.updateTransforms[Ne],b)}return T},xr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.Write"},xr),d.DocumentTransform=(kn.prototype.document="",kn.prototype.fieldTransforms=a.emptyArray,kn.fromObject=function(n){if(n instanceof o.google.firestore.v1.DocumentTransform)return n;var b=new o.google.firestore.v1.DocumentTransform;if(n.document!=null&&(b.document=String(n.document)),n.fieldTransforms){if(!Array.isArray(n.fieldTransforms))throw TypeError(".google.firestore.v1.DocumentTransform.fieldTransforms: array expected");b.fieldTransforms=[];for(var T=0;T<n.fieldTransforms.length;++T){if(typeof n.fieldTransforms[T]!="object")throw TypeError(".google.firestore.v1.DocumentTransform.fieldTransforms: object expected");b.fieldTransforms[T]=o.google.firestore.v1.DocumentTransform.FieldTransform.fromObject(n.fieldTransforms[T])}}return b},kn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.fieldTransforms=[]),b.defaults&&(T.document=""),n.document!=null&&n.hasOwnProperty("document")&&(T.document=n.document),n.fieldTransforms&&n.fieldTransforms.length){T.fieldTransforms=[];for(var Ne=0;Ne<n.fieldTransforms.length;++Ne)T.fieldTransforms[Ne]=o.google.firestore.v1.DocumentTransform.FieldTransform.toObject(n.fieldTransforms[Ne],b)}return T},kn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},kn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.DocumentTransform"},kn.FieldTransform=(gn.prototype.fieldPath="",gn.prototype.setToServerValue=null,gn.prototype.increment=null,gn.prototype.maximum=null,gn.prototype.minimum=null,gn.prototype.appendMissingElements=null,gn.prototype.removeAllFromArray=null,Object.defineProperty(gn.prototype,"transformType",{get:a.oneOfGetter(r=["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]),set:a.oneOfSetter(r)}),gn.fromObject=function(n){if(n instanceof o.google.firestore.v1.DocumentTransform.FieldTransform)return n;var b=new o.google.firestore.v1.DocumentTransform.FieldTransform;switch(n.fieldPath!=null&&(b.fieldPath=String(n.fieldPath)),n.setToServerValue){default:typeof n.setToServerValue=="number"&&(b.setToServerValue=n.setToServerValue);break;case"SERVER_VALUE_UNSPECIFIED":case 0:b.setToServerValue=0;break;case"REQUEST_TIME":case 1:b.setToServerValue=1}if(n.increment!=null){if(typeof n.increment!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.increment: object expected");b.increment=o.google.firestore.v1.Value.fromObject(n.increment)}if(n.maximum!=null){if(typeof n.maximum!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.maximum: object expected");b.maximum=o.google.firestore.v1.Value.fromObject(n.maximum)}if(n.minimum!=null){if(typeof n.minimum!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.minimum: object expected");b.minimum=o.google.firestore.v1.Value.fromObject(n.minimum)}if(n.appendMissingElements!=null){if(typeof n.appendMissingElements!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.appendMissingElements: object expected");b.appendMissingElements=o.google.firestore.v1.ArrayValue.fromObject(n.appendMissingElements)}if(n.removeAllFromArray!=null){if(typeof n.removeAllFromArray!="object")throw TypeError(".google.firestore.v1.DocumentTransform.FieldTransform.removeAllFromArray: object expected");b.removeAllFromArray=o.google.firestore.v1.ArrayValue.fromObject(n.removeAllFromArray)}return b},gn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.fieldPath=""),n.fieldPath!=null&&n.hasOwnProperty("fieldPath")&&(T.fieldPath=n.fieldPath),n.setToServerValue!=null&&n.hasOwnProperty("setToServerValue")&&(T.setToServerValue=b.enums!==String||o.google.firestore.v1.DocumentTransform.FieldTransform.ServerValue[n.setToServerValue]===void 0?n.setToServerValue:o.google.firestore.v1.DocumentTransform.FieldTransform.ServerValue[n.setToServerValue],b.oneofs)&&(T.transformType="setToServerValue"),n.increment!=null&&n.hasOwnProperty("increment")&&(T.increment=o.google.firestore.v1.Value.toObject(n.increment,b),b.oneofs)&&(T.transformType="increment"),n.maximum!=null&&n.hasOwnProperty("maximum")&&(T.maximum=o.google.firestore.v1.Value.toObject(n.maximum,b),b.oneofs)&&(T.transformType="maximum"),n.minimum!=null&&n.hasOwnProperty("minimum")&&(T.minimum=o.google.firestore.v1.Value.toObject(n.minimum,b),b.oneofs)&&(T.transformType="minimum"),n.appendMissingElements!=null&&n.hasOwnProperty("appendMissingElements")&&(T.appendMissingElements=o.google.firestore.v1.ArrayValue.toObject(n.appendMissingElements,b),b.oneofs)&&(T.transformType="appendMissingElements"),n.removeAllFromArray!=null&&n.hasOwnProperty("removeAllFromArray")&&(T.removeAllFromArray=o.google.firestore.v1.ArrayValue.toObject(n.removeAllFromArray,b),b.oneofs)&&(T.transformType="removeAllFromArray"),T},gn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},gn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.DocumentTransform.FieldTransform"},gn.ServerValue=(r={},(m=Object.create(r))[r[0]="SERVER_VALUE_UNSPECIFIED"]="SERVER_VALUE_UNSPECIFIED",m[r[1]="REQUEST_TIME"]="REQUEST_TIME",m),gn),kn),d.WriteResult=(bn.prototype.updateTime=null,bn.prototype.transformResults=a.emptyArray,bn.fromObject=function(n){if(n instanceof o.google.firestore.v1.WriteResult)return n;var b=new o.google.firestore.v1.WriteResult;if(n.updateTime!=null){if(typeof n.updateTime!="object")throw TypeError(".google.firestore.v1.WriteResult.updateTime: object expected");b.updateTime=o.google.protobuf.Timestamp.fromObject(n.updateTime)}if(n.transformResults){if(!Array.isArray(n.transformResults))throw TypeError(".google.firestore.v1.WriteResult.transformResults: array expected");b.transformResults=[];for(var T=0;T<n.transformResults.length;++T){if(typeof n.transformResults[T]!="object")throw TypeError(".google.firestore.v1.WriteResult.transformResults: object expected");b.transformResults[T]=o.google.firestore.v1.Value.fromObject(n.transformResults[T])}}return b},bn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.transformResults=[]),b.defaults&&(T.updateTime=null),n.updateTime!=null&&n.hasOwnProperty("updateTime")&&(T.updateTime=o.google.protobuf.Timestamp.toObject(n.updateTime,b)),n.transformResults&&n.transformResults.length){T.transformResults=[];for(var Ne=0;Ne<n.transformResults.length;++Ne)T.transformResults[Ne]=o.google.firestore.v1.Value.toObject(n.transformResults[Ne],b)}return T},bn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},bn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.WriteResult"},bn),d.DocumentChange=(Tn.prototype.document=null,Tn.prototype.targetIds=a.emptyArray,Tn.prototype.removedTargetIds=a.emptyArray,Tn.fromObject=function(n){if(n instanceof o.google.firestore.v1.DocumentChange)return n;var b=new o.google.firestore.v1.DocumentChange;if(n.document!=null){if(typeof n.document!="object")throw TypeError(".google.firestore.v1.DocumentChange.document: object expected");b.document=o.google.firestore.v1.Document.fromObject(n.document)}if(n.targetIds){if(!Array.isArray(n.targetIds))throw TypeError(".google.firestore.v1.DocumentChange.targetIds: array expected");b.targetIds=[];for(var T=0;T<n.targetIds.length;++T)b.targetIds[T]=0|n.targetIds[T]}if(n.removedTargetIds){if(!Array.isArray(n.removedTargetIds))throw TypeError(".google.firestore.v1.DocumentChange.removedTargetIds: array expected");for(b.removedTargetIds=[],T=0;T<n.removedTargetIds.length;++T)b.removedTargetIds[T]=0|n.removedTargetIds[T]}return b},Tn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.targetIds=[],T.removedTargetIds=[]),b.defaults&&(T.document=null),n.document!=null&&n.hasOwnProperty("document")&&(T.document=o.google.firestore.v1.Document.toObject(n.document,b)),n.targetIds&&n.targetIds.length){T.targetIds=[];for(var Ne=0;Ne<n.targetIds.length;++Ne)T.targetIds[Ne]=n.targetIds[Ne]}if(n.removedTargetIds&&n.removedTargetIds.length)for(T.removedTargetIds=[],Ne=0;Ne<n.removedTargetIds.length;++Ne)T.removedTargetIds[Ne]=n.removedTargetIds[Ne];return T},Tn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Tn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.DocumentChange"},Tn),d.DocumentDelete=(yn.prototype.document="",yn.prototype.removedTargetIds=a.emptyArray,yn.prototype.readTime=null,yn.fromObject=function(n){if(n instanceof o.google.firestore.v1.DocumentDelete)return n;var b=new o.google.firestore.v1.DocumentDelete;if(n.document!=null&&(b.document=String(n.document)),n.removedTargetIds){if(!Array.isArray(n.removedTargetIds))throw TypeError(".google.firestore.v1.DocumentDelete.removedTargetIds: array expected");b.removedTargetIds=[];for(var T=0;T<n.removedTargetIds.length;++T)b.removedTargetIds[T]=0|n.removedTargetIds[T]}if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.DocumentDelete.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},yn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.removedTargetIds=[]),b.defaults&&(T.document="",T.readTime=null),n.document!=null&&n.hasOwnProperty("document")&&(T.document=n.document),n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),n.removedTargetIds&&n.removedTargetIds.length){T.removedTargetIds=[];for(var Ne=0;Ne<n.removedTargetIds.length;++Ne)T.removedTargetIds[Ne]=n.removedTargetIds[Ne]}return T},yn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},yn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.DocumentDelete"},yn),d.DocumentRemove=(Xr.prototype.document="",Xr.prototype.removedTargetIds=a.emptyArray,Xr.prototype.readTime=null,Xr.fromObject=function(n){if(n instanceof o.google.firestore.v1.DocumentRemove)return n;var b=new o.google.firestore.v1.DocumentRemove;if(n.document!=null&&(b.document=String(n.document)),n.removedTargetIds){if(!Array.isArray(n.removedTargetIds))throw TypeError(".google.firestore.v1.DocumentRemove.removedTargetIds: array expected");b.removedTargetIds=[];for(var T=0;T<n.removedTargetIds.length;++T)b.removedTargetIds[T]=0|n.removedTargetIds[T]}if(n.readTime!=null){if(typeof n.readTime!="object")throw TypeError(".google.firestore.v1.DocumentRemove.readTime: object expected");b.readTime=o.google.protobuf.Timestamp.fromObject(n.readTime)}return b},Xr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.removedTargetIds=[]),b.defaults&&(T.document="",T.readTime=null),n.document!=null&&n.hasOwnProperty("document")&&(T.document=n.document),n.removedTargetIds&&n.removedTargetIds.length){T.removedTargetIds=[];for(var Ne=0;Ne<n.removedTargetIds.length;++Ne)T.removedTargetIds[Ne]=n.removedTargetIds[Ne]}return n.readTime!=null&&n.hasOwnProperty("readTime")&&(T.readTime=o.google.protobuf.Timestamp.toObject(n.readTime,b)),T},Xr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Xr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.DocumentRemove"},Xr),d.ExistenceFilter=(Rn.prototype.targetId=0,Rn.prototype.count=0,Rn.prototype.unchangedNames=null,Rn.fromObject=function(n){if(n instanceof o.google.firestore.v1.ExistenceFilter)return n;var b=new o.google.firestore.v1.ExistenceFilter;if(n.targetId!=null&&(b.targetId=0|n.targetId),n.count!=null&&(b.count=0|n.count),n.unchangedNames!=null){if(typeof n.unchangedNames!="object")throw TypeError(".google.firestore.v1.ExistenceFilter.unchangedNames: object expected");b.unchangedNames=o.google.firestore.v1.BloomFilter.fromObject(n.unchangedNames)}return b},Rn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.targetId=0,T.count=0,T.unchangedNames=null),n.targetId!=null&&n.hasOwnProperty("targetId")&&(T.targetId=n.targetId),n.count!=null&&n.hasOwnProperty("count")&&(T.count=n.count),n.unchangedNames!=null&&n.hasOwnProperty("unchangedNames")&&(T.unchangedNames=o.google.firestore.v1.BloomFilter.toObject(n.unchangedNames,b)),T},Rn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Rn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.firestore.v1.ExistenceFilter"},Rn),d),u),c.api=((r={}).FieldBehavior=(m={},(d=Object.create(m))[m[0]="FIELD_BEHAVIOR_UNSPECIFIED"]="FIELD_BEHAVIOR_UNSPECIFIED",d[m[1]="OPTIONAL"]="OPTIONAL",d[m[2]="REQUIRED"]="REQUIRED",d[m[3]="OUTPUT_ONLY"]="OUTPUT_ONLY",d[m[4]="INPUT_ONLY"]="INPUT_ONLY",d[m[5]="IMMUTABLE"]="IMMUTABLE",d[m[6]="UNORDERED_LIST"]="UNORDERED_LIST",d[m[7]="NON_EMPTY_DEFAULT"]="NON_EMPTY_DEFAULT",d[m[8]="IDENTIFIER"]="IDENTIFIER",d),r.Http=(yr.prototype.rules=a.emptyArray,yr.prototype.fullyDecodeReservedExpansion=!1,yr.fromObject=function(n){if(n instanceof o.google.api.Http)return n;var b=new o.google.api.Http;if(n.rules){if(!Array.isArray(n.rules))throw TypeError(".google.api.Http.rules: array expected");b.rules=[];for(var T=0;T<n.rules.length;++T){if(typeof n.rules[T]!="object")throw TypeError(".google.api.Http.rules: object expected");b.rules[T]=o.google.api.HttpRule.fromObject(n.rules[T])}}return n.fullyDecodeReservedExpansion!=null&&(b.fullyDecodeReservedExpansion=!!n.fullyDecodeReservedExpansion),b},yr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.rules=[]),b.defaults&&(T.fullyDecodeReservedExpansion=!1),n.rules&&n.rules.length){T.rules=[];for(var Ne=0;Ne<n.rules.length;++Ne)T.rules[Ne]=o.google.api.HttpRule.toObject(n.rules[Ne],b)}return n.fullyDecodeReservedExpansion!=null&&n.hasOwnProperty("fullyDecodeReservedExpansion")&&(T.fullyDecodeReservedExpansion=n.fullyDecodeReservedExpansion),T},yr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},yr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.Http"},yr),r.HttpRule=(Wr.prototype.selector="",Wr.prototype.get=null,Wr.prototype.put=null,Wr.prototype.post=null,Wr.prototype.delete=null,Wr.prototype.patch=null,Wr.prototype.custom=null,Wr.prototype.body="",Wr.prototype.responseBody="",Wr.prototype.additionalBindings=a.emptyArray,Object.defineProperty(Wr.prototype,"pattern",{get:a.oneOfGetter(m=["get","put","post","delete","patch","custom"]),set:a.oneOfSetter(m)}),Wr.fromObject=function(n){if(n instanceof o.google.api.HttpRule)return n;var b=new o.google.api.HttpRule;if(n.selector!=null&&(b.selector=String(n.selector)),n.get!=null&&(b.get=String(n.get)),n.put!=null&&(b.put=String(n.put)),n.post!=null&&(b.post=String(n.post)),n.delete!=null&&(b.delete=String(n.delete)),n.patch!=null&&(b.patch=String(n.patch)),n.custom!=null){if(typeof n.custom!="object")throw TypeError(".google.api.HttpRule.custom: object expected");b.custom=o.google.api.CustomHttpPattern.fromObject(n.custom)}if(n.body!=null&&(b.body=String(n.body)),n.responseBody!=null&&(b.responseBody=String(n.responseBody)),n.additionalBindings){if(!Array.isArray(n.additionalBindings))throw TypeError(".google.api.HttpRule.additionalBindings: array expected");b.additionalBindings=[];for(var T=0;T<n.additionalBindings.length;++T){if(typeof n.additionalBindings[T]!="object")throw TypeError(".google.api.HttpRule.additionalBindings: object expected");b.additionalBindings[T]=o.google.api.HttpRule.fromObject(n.additionalBindings[T])}}return b},Wr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.additionalBindings=[]),b.defaults&&(T.selector="",T.body="",T.responseBody=""),n.selector!=null&&n.hasOwnProperty("selector")&&(T.selector=n.selector),n.get!=null&&n.hasOwnProperty("get")&&(T.get=n.get,b.oneofs)&&(T.pattern="get"),n.put!=null&&n.hasOwnProperty("put")&&(T.put=n.put,b.oneofs)&&(T.pattern="put"),n.post!=null&&n.hasOwnProperty("post")&&(T.post=n.post,b.oneofs)&&(T.pattern="post"),n.delete!=null&&n.hasOwnProperty("delete")&&(T.delete=n.delete,b.oneofs)&&(T.pattern="delete"),n.patch!=null&&n.hasOwnProperty("patch")&&(T.patch=n.patch,b.oneofs)&&(T.pattern="patch"),n.body!=null&&n.hasOwnProperty("body")&&(T.body=n.body),n.custom!=null&&n.hasOwnProperty("custom")&&(T.custom=o.google.api.CustomHttpPattern.toObject(n.custom,b),b.oneofs)&&(T.pattern="custom"),n.additionalBindings&&n.additionalBindings.length){T.additionalBindings=[];for(var Ne=0;Ne<n.additionalBindings.length;++Ne)T.additionalBindings[Ne]=o.google.api.HttpRule.toObject(n.additionalBindings[Ne],b)}return n.responseBody!=null&&n.hasOwnProperty("responseBody")&&(T.responseBody=n.responseBody),T},Wr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Wr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.HttpRule"},Wr),r.CustomHttpPattern=(Yr.prototype.kind="",Yr.prototype.path="",Yr.fromObject=function(n){var b;return n instanceof o.google.api.CustomHttpPattern?n:(b=new o.google.api.CustomHttpPattern,n.kind!=null&&(b.kind=String(n.kind)),n.path!=null&&(b.path=String(n.path)),b)},Yr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.kind="",T.path=""),n.kind!=null&&n.hasOwnProperty("kind")&&(T.kind=n.kind),n.path!=null&&n.hasOwnProperty("path")&&(T.path=n.path),T},Yr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Yr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.CustomHttpPattern"},Yr),r.CommonLanguageSettings=(vn.prototype.referenceDocsUri="",vn.prototype.destinations=a.emptyArray,vn.prototype.selectiveGapicGeneration=null,vn.fromObject=function(n){if(n instanceof o.google.api.CommonLanguageSettings)return n;var b=new o.google.api.CommonLanguageSettings;if(n.referenceDocsUri!=null&&(b.referenceDocsUri=String(n.referenceDocsUri)),n.destinations){if(!Array.isArray(n.destinations))throw TypeError(".google.api.CommonLanguageSettings.destinations: array expected");b.destinations=[];for(var T=0;T<n.destinations.length;++T)switch(n.destinations[T]){default:if(typeof n.destinations[T]=="number"){b.destinations[T]=n.destinations[T];break}case"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":case 0:b.destinations[T]=0;break;case"GITHUB":case 10:b.destinations[T]=10;break;case"PACKAGE_MANAGER":case 20:b.destinations[T]=20}}if(n.selectiveGapicGeneration!=null){if(typeof n.selectiveGapicGeneration!="object")throw TypeError(".google.api.CommonLanguageSettings.selectiveGapicGeneration: object expected");b.selectiveGapicGeneration=o.google.api.SelectiveGapicGeneration.fromObject(n.selectiveGapicGeneration)}return b},vn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.destinations=[]),b.defaults&&(T.referenceDocsUri="",T.selectiveGapicGeneration=null),n.referenceDocsUri!=null&&n.hasOwnProperty("referenceDocsUri")&&(T.referenceDocsUri=n.referenceDocsUri),n.destinations&&n.destinations.length){T.destinations=[];for(var Ne=0;Ne<n.destinations.length;++Ne)T.destinations[Ne]=b.enums!==String||o.google.api.ClientLibraryDestination[n.destinations[Ne]]===void 0?n.destinations[Ne]:o.google.api.ClientLibraryDestination[n.destinations[Ne]]}return n.selectiveGapicGeneration!=null&&n.hasOwnProperty("selectiveGapicGeneration")&&(T.selectiveGapicGeneration=o.google.api.SelectiveGapicGeneration.toObject(n.selectiveGapicGeneration,b)),T},vn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},vn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.CommonLanguageSettings"},vn),r.ClientLibrarySettings=(Ur.prototype.version="",Ur.prototype.launchStage=0,Ur.prototype.restNumericEnums=!1,Ur.prototype.javaSettings=null,Ur.prototype.cppSettings=null,Ur.prototype.phpSettings=null,Ur.prototype.pythonSettings=null,Ur.prototype.nodeSettings=null,Ur.prototype.dotnetSettings=null,Ur.prototype.rubySettings=null,Ur.prototype.goSettings=null,Ur.fromObject=function(n){if(n instanceof o.google.api.ClientLibrarySettings)return n;var b=new o.google.api.ClientLibrarySettings;switch(n.version!=null&&(b.version=String(n.version)),n.launchStage){default:typeof n.launchStage=="number"&&(b.launchStage=n.launchStage);break;case"LAUNCH_STAGE_UNSPECIFIED":case 0:b.launchStage=0;break;case"UNIMPLEMENTED":case 6:b.launchStage=6;break;case"PRELAUNCH":case 7:b.launchStage=7;break;case"EARLY_ACCESS":case 1:b.launchStage=1;break;case"ALPHA":case 2:b.launchStage=2;break;case"BETA":case 3:b.launchStage=3;break;case"GA":case 4:b.launchStage=4;break;case"DEPRECATED":case 5:b.launchStage=5}if(n.restNumericEnums!=null&&(b.restNumericEnums=!!n.restNumericEnums),n.javaSettings!=null){if(typeof n.javaSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.javaSettings: object expected");b.javaSettings=o.google.api.JavaSettings.fromObject(n.javaSettings)}if(n.cppSettings!=null){if(typeof n.cppSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.cppSettings: object expected");b.cppSettings=o.google.api.CppSettings.fromObject(n.cppSettings)}if(n.phpSettings!=null){if(typeof n.phpSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.phpSettings: object expected");b.phpSettings=o.google.api.PhpSettings.fromObject(n.phpSettings)}if(n.pythonSettings!=null){if(typeof n.pythonSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.pythonSettings: object expected");b.pythonSettings=o.google.api.PythonSettings.fromObject(n.pythonSettings)}if(n.nodeSettings!=null){if(typeof n.nodeSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.nodeSettings: object expected");b.nodeSettings=o.google.api.NodeSettings.fromObject(n.nodeSettings)}if(n.dotnetSettings!=null){if(typeof n.dotnetSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.dotnetSettings: object expected");b.dotnetSettings=o.google.api.DotnetSettings.fromObject(n.dotnetSettings)}if(n.rubySettings!=null){if(typeof n.rubySettings!="object")throw TypeError(".google.api.ClientLibrarySettings.rubySettings: object expected");b.rubySettings=o.google.api.RubySettings.fromObject(n.rubySettings)}if(n.goSettings!=null){if(typeof n.goSettings!="object")throw TypeError(".google.api.ClientLibrarySettings.goSettings: object expected");b.goSettings=o.google.api.GoSettings.fromObject(n.goSettings)}return b},Ur.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.version="",T.launchStage=b.enums===String?"LAUNCH_STAGE_UNSPECIFIED":0,T.restNumericEnums=!1,T.javaSettings=null,T.cppSettings=null,T.phpSettings=null,T.pythonSettings=null,T.nodeSettings=null,T.dotnetSettings=null,T.rubySettings=null,T.goSettings=null),n.version!=null&&n.hasOwnProperty("version")&&(T.version=n.version),n.launchStage!=null&&n.hasOwnProperty("launchStage")&&(T.launchStage=b.enums!==String||o.google.api.LaunchStage[n.launchStage]===void 0?n.launchStage:o.google.api.LaunchStage[n.launchStage]),n.restNumericEnums!=null&&n.hasOwnProperty("restNumericEnums")&&(T.restNumericEnums=n.restNumericEnums),n.javaSettings!=null&&n.hasOwnProperty("javaSettings")&&(T.javaSettings=o.google.api.JavaSettings.toObject(n.javaSettings,b)),n.cppSettings!=null&&n.hasOwnProperty("cppSettings")&&(T.cppSettings=o.google.api.CppSettings.toObject(n.cppSettings,b)),n.phpSettings!=null&&n.hasOwnProperty("phpSettings")&&(T.phpSettings=o.google.api.PhpSettings.toObject(n.phpSettings,b)),n.pythonSettings!=null&&n.hasOwnProperty("pythonSettings")&&(T.pythonSettings=o.google.api.PythonSettings.toObject(n.pythonSettings,b)),n.nodeSettings!=null&&n.hasOwnProperty("nodeSettings")&&(T.nodeSettings=o.google.api.NodeSettings.toObject(n.nodeSettings,b)),n.dotnetSettings!=null&&n.hasOwnProperty("dotnetSettings")&&(T.dotnetSettings=o.google.api.DotnetSettings.toObject(n.dotnetSettings,b)),n.rubySettings!=null&&n.hasOwnProperty("rubySettings")&&(T.rubySettings=o.google.api.RubySettings.toObject(n.rubySettings,b)),n.goSettings!=null&&n.hasOwnProperty("goSettings")&&(T.goSettings=o.google.api.GoSettings.toObject(n.goSettings,b)),T},Ur.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ur.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.ClientLibrarySettings"},Ur),r.Publishing=(Zr.prototype.methodSettings=a.emptyArray,Zr.prototype.newIssueUri="",Zr.prototype.documentationUri="",Zr.prototype.apiShortName="",Zr.prototype.githubLabel="",Zr.prototype.codeownerGithubTeams=a.emptyArray,Zr.prototype.docTagPrefix="",Zr.prototype.organization=0,Zr.prototype.librarySettings=a.emptyArray,Zr.prototype.protoReferenceDocumentationUri="",Zr.prototype.restReferenceDocumentationUri="",Zr.fromObject=function(n){if(n instanceof o.google.api.Publishing)return n;var b=new o.google.api.Publishing;if(n.methodSettings){if(!Array.isArray(n.methodSettings))throw TypeError(".google.api.Publishing.methodSettings: array expected");b.methodSettings=[];for(var T=0;T<n.methodSettings.length;++T){if(typeof n.methodSettings[T]!="object")throw TypeError(".google.api.Publishing.methodSettings: object expected");b.methodSettings[T]=o.google.api.MethodSettings.fromObject(n.methodSettings[T])}}if(n.newIssueUri!=null&&(b.newIssueUri=String(n.newIssueUri)),n.documentationUri!=null&&(b.documentationUri=String(n.documentationUri)),n.apiShortName!=null&&(b.apiShortName=String(n.apiShortName)),n.githubLabel!=null&&(b.githubLabel=String(n.githubLabel)),n.codeownerGithubTeams){if(!Array.isArray(n.codeownerGithubTeams))throw TypeError(".google.api.Publishing.codeownerGithubTeams: array expected");for(b.codeownerGithubTeams=[],T=0;T<n.codeownerGithubTeams.length;++T)b.codeownerGithubTeams[T]=String(n.codeownerGithubTeams[T])}switch(n.docTagPrefix!=null&&(b.docTagPrefix=String(n.docTagPrefix)),n.organization){default:typeof n.organization=="number"&&(b.organization=n.organization);break;case"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":case 0:b.organization=0;break;case"CLOUD":case 1:b.organization=1;break;case"ADS":case 2:b.organization=2;break;case"PHOTOS":case 3:b.organization=3;break;case"STREET_VIEW":case 4:b.organization=4;break;case"SHOPPING":case 5:b.organization=5;break;case"GEO":case 6:b.organization=6;break;case"GENERATIVE_AI":case 7:b.organization=7}if(n.librarySettings){if(!Array.isArray(n.librarySettings))throw TypeError(".google.api.Publishing.librarySettings: array expected");for(b.librarySettings=[],T=0;T<n.librarySettings.length;++T){if(typeof n.librarySettings[T]!="object")throw TypeError(".google.api.Publishing.librarySettings: object expected");b.librarySettings[T]=o.google.api.ClientLibrarySettings.fromObject(n.librarySettings[T])}}return n.protoReferenceDocumentationUri!=null&&(b.protoReferenceDocumentationUri=String(n.protoReferenceDocumentationUri)),n.restReferenceDocumentationUri!=null&&(b.restReferenceDocumentationUri=String(n.restReferenceDocumentationUri)),b},Zr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.methodSettings=[],T.codeownerGithubTeams=[],T.librarySettings=[]),b.defaults&&(T.newIssueUri="",T.documentationUri="",T.apiShortName="",T.githubLabel="",T.docTagPrefix="",T.organization=b.enums===String?"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,T.protoReferenceDocumentationUri="",T.restReferenceDocumentationUri=""),n.methodSettings&&n.methodSettings.length){T.methodSettings=[];for(var Ne=0;Ne<n.methodSettings.length;++Ne)T.methodSettings[Ne]=o.google.api.MethodSettings.toObject(n.methodSettings[Ne],b)}if(n.newIssueUri!=null&&n.hasOwnProperty("newIssueUri")&&(T.newIssueUri=n.newIssueUri),n.documentationUri!=null&&n.hasOwnProperty("documentationUri")&&(T.documentationUri=n.documentationUri),n.apiShortName!=null&&n.hasOwnProperty("apiShortName")&&(T.apiShortName=n.apiShortName),n.githubLabel!=null&&n.hasOwnProperty("githubLabel")&&(T.githubLabel=n.githubLabel),n.codeownerGithubTeams&&n.codeownerGithubTeams.length)for(T.codeownerGithubTeams=[],Ne=0;Ne<n.codeownerGithubTeams.length;++Ne)T.codeownerGithubTeams[Ne]=n.codeownerGithubTeams[Ne];if(n.docTagPrefix!=null&&n.hasOwnProperty("docTagPrefix")&&(T.docTagPrefix=n.docTagPrefix),n.organization!=null&&n.hasOwnProperty("organization")&&(T.organization=b.enums!==String||o.google.api.ClientLibraryOrganization[n.organization]===void 0?n.organization:o.google.api.ClientLibraryOrganization[n.organization]),n.librarySettings&&n.librarySettings.length)for(T.librarySettings=[],Ne=0;Ne<n.librarySettings.length;++Ne)T.librarySettings[Ne]=o.google.api.ClientLibrarySettings.toObject(n.librarySettings[Ne],b);return n.protoReferenceDocumentationUri!=null&&n.hasOwnProperty("protoReferenceDocumentationUri")&&(T.protoReferenceDocumentationUri=n.protoReferenceDocumentationUri),n.restReferenceDocumentationUri!=null&&n.hasOwnProperty("restReferenceDocumentationUri")&&(T.restReferenceDocumentationUri=n.restReferenceDocumentationUri),T},Zr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Zr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.Publishing"},Zr),r.JavaSettings=(Fr.prototype.libraryPackage="",Fr.prototype.serviceClassNames=a.emptyObject,Fr.prototype.common=null,Fr.fromObject=function(n){if(n instanceof o.google.api.JavaSettings)return n;var b=new o.google.api.JavaSettings;if(n.libraryPackage!=null&&(b.libraryPackage=String(n.libraryPackage)),n.serviceClassNames){if(typeof n.serviceClassNames!="object")throw TypeError(".google.api.JavaSettings.serviceClassNames: object expected");b.serviceClassNames={};for(var T=Object.keys(n.serviceClassNames),Ne=0;Ne<T.length;++Ne)b.serviceClassNames[T[Ne]]=String(n.serviceClassNames[T[Ne]])}if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.JavaSettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}return b},Fr.toObject=function(n,b){var T,Ne={};if(((b=b||{}).objects||b.defaults)&&(Ne.serviceClassNames={}),b.defaults&&(Ne.libraryPackage="",Ne.common=null),n.libraryPackage!=null&&n.hasOwnProperty("libraryPackage")&&(Ne.libraryPackage=n.libraryPackage),n.serviceClassNames&&(T=Object.keys(n.serviceClassNames)).length){Ne.serviceClassNames={};for(var ur=0;ur<T.length;++ur)Ne.serviceClassNames[T[ur]]=n.serviceClassNames[T[ur]]}return n.common!=null&&n.hasOwnProperty("common")&&(Ne.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),Ne},Fr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Fr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.JavaSettings"},Fr),r.CppSettings=(tt.prototype.common=null,tt.fromObject=function(n){if(n instanceof o.google.api.CppSettings)return n;var b=new o.google.api.CppSettings;if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.CppSettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}return b},tt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.common=null),n.common!=null&&n.hasOwnProperty("common")&&(T.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),T},tt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},tt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.CppSettings"},tt),r.PhpSettings=(et.prototype.common=null,et.fromObject=function(n){if(n instanceof o.google.api.PhpSettings)return n;var b=new o.google.api.PhpSettings;if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.PhpSettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}return b},et.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.common=null),n.common!=null&&n.hasOwnProperty("common")&&(T.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),T},et.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},et.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.PhpSettings"},et),r.PythonSettings=(dt.prototype.common=null,dt.prototype.experimentalFeatures=null,dt.fromObject=function(n){if(n instanceof o.google.api.PythonSettings)return n;var b=new o.google.api.PythonSettings;if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.PythonSettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}if(n.experimentalFeatures!=null){if(typeof n.experimentalFeatures!="object")throw TypeError(".google.api.PythonSettings.experimentalFeatures: object expected");b.experimentalFeatures=o.google.api.PythonSettings.ExperimentalFeatures.fromObject(n.experimentalFeatures)}return b},dt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.common=null,T.experimentalFeatures=null),n.common!=null&&n.hasOwnProperty("common")&&(T.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),n.experimentalFeatures!=null&&n.hasOwnProperty("experimentalFeatures")&&(T.experimentalFeatures=o.google.api.PythonSettings.ExperimentalFeatures.toObject(n.experimentalFeatures,b)),T},dt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},dt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.PythonSettings"},dt.ExperimentalFeatures=(Bt.prototype.restAsyncIoEnabled=!1,Bt.prototype.protobufPythonicTypesEnabled=!1,Bt.fromObject=function(n){var b;return n instanceof o.google.api.PythonSettings.ExperimentalFeatures?n:(b=new o.google.api.PythonSettings.ExperimentalFeatures,n.restAsyncIoEnabled!=null&&(b.restAsyncIoEnabled=!!n.restAsyncIoEnabled),n.protobufPythonicTypesEnabled!=null&&(b.protobufPythonicTypesEnabled=!!n.protobufPythonicTypesEnabled),b)},Bt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.restAsyncIoEnabled=!1,T.protobufPythonicTypesEnabled=!1),n.restAsyncIoEnabled!=null&&n.hasOwnProperty("restAsyncIoEnabled")&&(T.restAsyncIoEnabled=n.restAsyncIoEnabled),n.protobufPythonicTypesEnabled!=null&&n.hasOwnProperty("protobufPythonicTypesEnabled")&&(T.protobufPythonicTypesEnabled=n.protobufPythonicTypesEnabled),T},Bt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Bt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.PythonSettings.ExperimentalFeatures"},Bt),dt),r.NodeSettings=(Ct.prototype.common=null,Ct.fromObject=function(n){if(n instanceof o.google.api.NodeSettings)return n;var b=new o.google.api.NodeSettings;if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.NodeSettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}return b},Ct.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.common=null),n.common!=null&&n.hasOwnProperty("common")&&(T.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),T},Ct.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ct.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.NodeSettings"},Ct),r.DotnetSettings=(pr.prototype.common=null,pr.prototype.renamedServices=a.emptyObject,pr.prototype.renamedResources=a.emptyObject,pr.prototype.ignoredResources=a.emptyArray,pr.prototype.forcedNamespaceAliases=a.emptyArray,pr.prototype.handwrittenSignatures=a.emptyArray,pr.fromObject=function(n){if(n instanceof o.google.api.DotnetSettings)return n;var b=new o.google.api.DotnetSettings;if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.DotnetSettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}if(n.renamedServices){if(typeof n.renamedServices!="object")throw TypeError(".google.api.DotnetSettings.renamedServices: object expected");b.renamedServices={};for(var T=Object.keys(n.renamedServices),Ne=0;Ne<T.length;++Ne)b.renamedServices[T[Ne]]=String(n.renamedServices[T[Ne]])}if(n.renamedResources){if(typeof n.renamedResources!="object")throw TypeError(".google.api.DotnetSettings.renamedResources: object expected");for(b.renamedResources={},T=Object.keys(n.renamedResources),Ne=0;Ne<T.length;++Ne)b.renamedResources[T[Ne]]=String(n.renamedResources[T[Ne]])}if(n.ignoredResources){if(!Array.isArray(n.ignoredResources))throw TypeError(".google.api.DotnetSettings.ignoredResources: array expected");for(b.ignoredResources=[],Ne=0;Ne<n.ignoredResources.length;++Ne)b.ignoredResources[Ne]=String(n.ignoredResources[Ne])}if(n.forcedNamespaceAliases){if(!Array.isArray(n.forcedNamespaceAliases))throw TypeError(".google.api.DotnetSettings.forcedNamespaceAliases: array expected");for(b.forcedNamespaceAliases=[],Ne=0;Ne<n.forcedNamespaceAliases.length;++Ne)b.forcedNamespaceAliases[Ne]=String(n.forcedNamespaceAliases[Ne])}if(n.handwrittenSignatures){if(!Array.isArray(n.handwrittenSignatures))throw TypeError(".google.api.DotnetSettings.handwrittenSignatures: array expected");for(b.handwrittenSignatures=[],Ne=0;Ne<n.handwrittenSignatures.length;++Ne)b.handwrittenSignatures[Ne]=String(n.handwrittenSignatures[Ne])}return b},pr.toObject=function(n,b){var T,Ne={};if(((b=b||{}).arrays||b.defaults)&&(Ne.ignoredResources=[],Ne.forcedNamespaceAliases=[],Ne.handwrittenSignatures=[]),(b.objects||b.defaults)&&(Ne.renamedServices={},Ne.renamedResources={}),b.defaults&&(Ne.common=null),n.common!=null&&n.hasOwnProperty("common")&&(Ne.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),n.renamedServices&&(T=Object.keys(n.renamedServices)).length){Ne.renamedServices={};for(var ur=0;ur<T.length;++ur)Ne.renamedServices[T[ur]]=n.renamedServices[T[ur]]}if(n.renamedResources&&(T=Object.keys(n.renamedResources)).length)for(Ne.renamedResources={},ur=0;ur<T.length;++ur)Ne.renamedResources[T[ur]]=n.renamedResources[T[ur]];if(n.ignoredResources&&n.ignoredResources.length)for(Ne.ignoredResources=[],ur=0;ur<n.ignoredResources.length;++ur)Ne.ignoredResources[ur]=n.ignoredResources[ur];if(n.forcedNamespaceAliases&&n.forcedNamespaceAliases.length)for(Ne.forcedNamespaceAliases=[],ur=0;ur<n.forcedNamespaceAliases.length;++ur)Ne.forcedNamespaceAliases[ur]=n.forcedNamespaceAliases[ur];if(n.handwrittenSignatures&&n.handwrittenSignatures.length)for(Ne.handwrittenSignatures=[],ur=0;ur<n.handwrittenSignatures.length;++ur)Ne.handwrittenSignatures[ur]=n.handwrittenSignatures[ur];return Ne},pr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},pr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.DotnetSettings"},pr),r.RubySettings=(Sr.prototype.common=null,Sr.fromObject=function(n){if(n instanceof o.google.api.RubySettings)return n;var b=new o.google.api.RubySettings;if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.RubySettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}return b},Sr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.common=null),n.common!=null&&n.hasOwnProperty("common")&&(T.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),T},Sr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Sr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.RubySettings"},Sr),r.GoSettings=(un.prototype.common=null,un.prototype.renamedServices=a.emptyObject,un.fromObject=function(n){if(n instanceof o.google.api.GoSettings)return n;var b=new o.google.api.GoSettings;if(n.common!=null){if(typeof n.common!="object")throw TypeError(".google.api.GoSettings.common: object expected");b.common=o.google.api.CommonLanguageSettings.fromObject(n.common)}if(n.renamedServices){if(typeof n.renamedServices!="object")throw TypeError(".google.api.GoSettings.renamedServices: object expected");b.renamedServices={};for(var T=Object.keys(n.renamedServices),Ne=0;Ne<T.length;++Ne)b.renamedServices[T[Ne]]=String(n.renamedServices[T[Ne]])}return b},un.toObject=function(n,b){var T,Ne={};if(((b=b||{}).objects||b.defaults)&&(Ne.renamedServices={}),b.defaults&&(Ne.common=null),n.common!=null&&n.hasOwnProperty("common")&&(Ne.common=o.google.api.CommonLanguageSettings.toObject(n.common,b)),n.renamedServices&&(T=Object.keys(n.renamedServices)).length){Ne.renamedServices={};for(var ur=0;ur<T.length;++ur)Ne.renamedServices[T[ur]]=n.renamedServices[T[ur]]}return Ne},un.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},un.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.GoSettings"},un),r.MethodSettings=(Ln.prototype.selector="",Ln.prototype.longRunning=null,Ln.prototype.autoPopulatedFields=a.emptyArray,Ln.fromObject=function(n){if(n instanceof o.google.api.MethodSettings)return n;var b=new o.google.api.MethodSettings;if(n.selector!=null&&(b.selector=String(n.selector)),n.longRunning!=null){if(typeof n.longRunning!="object")throw TypeError(".google.api.MethodSettings.longRunning: object expected");b.longRunning=o.google.api.MethodSettings.LongRunning.fromObject(n.longRunning)}if(n.autoPopulatedFields){if(!Array.isArray(n.autoPopulatedFields))throw TypeError(".google.api.MethodSettings.autoPopulatedFields: array expected");b.autoPopulatedFields=[];for(var T=0;T<n.autoPopulatedFields.length;++T)b.autoPopulatedFields[T]=String(n.autoPopulatedFields[T])}return b},Ln.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.autoPopulatedFields=[]),b.defaults&&(T.selector="",T.longRunning=null),n.selector!=null&&n.hasOwnProperty("selector")&&(T.selector=n.selector),n.longRunning!=null&&n.hasOwnProperty("longRunning")&&(T.longRunning=o.google.api.MethodSettings.LongRunning.toObject(n.longRunning,b)),n.autoPopulatedFields&&n.autoPopulatedFields.length){T.autoPopulatedFields=[];for(var Ne=0;Ne<n.autoPopulatedFields.length;++Ne)T.autoPopulatedFields[Ne]=n.autoPopulatedFields[Ne]}return T},Ln.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ln.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.MethodSettings"},Ln.LongRunning=(In.prototype.initialPollDelay=null,In.prototype.pollDelayMultiplier=0,In.prototype.maxPollDelay=null,In.prototype.totalPollTimeout=null,In.fromObject=function(n){if(n instanceof o.google.api.MethodSettings.LongRunning)return n;var b=new o.google.api.MethodSettings.LongRunning;if(n.initialPollDelay!=null){if(typeof n.initialPollDelay!="object")throw TypeError(".google.api.MethodSettings.LongRunning.initialPollDelay: object expected");b.initialPollDelay=o.google.protobuf.Duration.fromObject(n.initialPollDelay)}if(n.pollDelayMultiplier!=null&&(b.pollDelayMultiplier=Number(n.pollDelayMultiplier)),n.maxPollDelay!=null){if(typeof n.maxPollDelay!="object")throw TypeError(".google.api.MethodSettings.LongRunning.maxPollDelay: object expected");b.maxPollDelay=o.google.protobuf.Duration.fromObject(n.maxPollDelay)}if(n.totalPollTimeout!=null){if(typeof n.totalPollTimeout!="object")throw TypeError(".google.api.MethodSettings.LongRunning.totalPollTimeout: object expected");b.totalPollTimeout=o.google.protobuf.Duration.fromObject(n.totalPollTimeout)}return b},In.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.initialPollDelay=null,T.pollDelayMultiplier=0,T.maxPollDelay=null,T.totalPollTimeout=null),n.initialPollDelay!=null&&n.hasOwnProperty("initialPollDelay")&&(T.initialPollDelay=o.google.protobuf.Duration.toObject(n.initialPollDelay,b)),n.pollDelayMultiplier!=null&&n.hasOwnProperty("pollDelayMultiplier")&&(T.pollDelayMultiplier=b.json&&!isFinite(n.pollDelayMultiplier)?String(n.pollDelayMultiplier):n.pollDelayMultiplier),n.maxPollDelay!=null&&n.hasOwnProperty("maxPollDelay")&&(T.maxPollDelay=o.google.protobuf.Duration.toObject(n.maxPollDelay,b)),n.totalPollTimeout!=null&&n.hasOwnProperty("totalPollTimeout")&&(T.totalPollTimeout=o.google.protobuf.Duration.toObject(n.totalPollTimeout,b)),T},In.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},In.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.MethodSettings.LongRunning"},In),Ln),r.ClientLibraryOrganization=(d={},(m=Object.create(d))[d[0]="CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED"]="CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED",m[d[1]="CLOUD"]="CLOUD",m[d[2]="ADS"]="ADS",m[d[3]="PHOTOS"]="PHOTOS",m[d[4]="STREET_VIEW"]="STREET_VIEW",m[d[5]="SHOPPING"]="SHOPPING",m[d[6]="GEO"]="GEO",m[d[7]="GENERATIVE_AI"]="GENERATIVE_AI",m),r.ClientLibraryDestination=(d={},(m=Object.create(d))[d[0]="CLIENT_LIBRARY_DESTINATION_UNSPECIFIED"]="CLIENT_LIBRARY_DESTINATION_UNSPECIFIED",m[d[10]="GITHUB"]="GITHUB",m[d[20]="PACKAGE_MANAGER"]="PACKAGE_MANAGER",m),r.SelectiveGapicGeneration=(Un.prototype.methods=a.emptyArray,Un.prototype.generateOmittedAsInternal=!1,Un.fromObject=function(n){if(n instanceof o.google.api.SelectiveGapicGeneration)return n;var b=new o.google.api.SelectiveGapicGeneration;if(n.methods){if(!Array.isArray(n.methods))throw TypeError(".google.api.SelectiveGapicGeneration.methods: array expected");b.methods=[];for(var T=0;T<n.methods.length;++T)b.methods[T]=String(n.methods[T])}return n.generateOmittedAsInternal!=null&&(b.generateOmittedAsInternal=!!n.generateOmittedAsInternal),b},Un.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.methods=[]),b.defaults&&(T.generateOmittedAsInternal=!1),n.methods&&n.methods.length){T.methods=[];for(var Ne=0;Ne<n.methods.length;++Ne)T.methods[Ne]=n.methods[Ne]}return n.generateOmittedAsInternal!=null&&n.hasOwnProperty("generateOmittedAsInternal")&&(T.generateOmittedAsInternal=n.generateOmittedAsInternal),T},Un.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Un.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.SelectiveGapicGeneration"},Un),r.LaunchStage=(d={},(m=Object.create(d))[d[0]="LAUNCH_STAGE_UNSPECIFIED"]="LAUNCH_STAGE_UNSPECIFIED",m[d[6]="UNIMPLEMENTED"]="UNIMPLEMENTED",m[d[7]="PRELAUNCH"]="PRELAUNCH",m[d[1]="EARLY_ACCESS"]="EARLY_ACCESS",m[d[2]="ALPHA"]="ALPHA",m[d[3]="BETA"]="BETA",m[d[4]="GA"]="GA",m[d[5]="DEPRECATED"]="DEPRECATED",m),r.ResourceDescriptor=(Pr.prototype.type="",Pr.prototype.pattern=a.emptyArray,Pr.prototype.nameField="",Pr.prototype.history=0,Pr.prototype.plural="",Pr.prototype.singular="",Pr.prototype.style=a.emptyArray,Pr.fromObject=function(n){if(n instanceof o.google.api.ResourceDescriptor)return n;var b=new o.google.api.ResourceDescriptor;if(n.type!=null&&(b.type=String(n.type)),n.pattern){if(!Array.isArray(n.pattern))throw TypeError(".google.api.ResourceDescriptor.pattern: array expected");b.pattern=[];for(var T=0;T<n.pattern.length;++T)b.pattern[T]=String(n.pattern[T])}switch(n.nameField!=null&&(b.nameField=String(n.nameField)),n.history){default:typeof n.history=="number"&&(b.history=n.history);break;case"HISTORY_UNSPECIFIED":case 0:b.history=0;break;case"ORIGINALLY_SINGLE_PATTERN":case 1:b.history=1;break;case"FUTURE_MULTI_PATTERN":case 2:b.history=2}if(n.plural!=null&&(b.plural=String(n.plural)),n.singular!=null&&(b.singular=String(n.singular)),n.style){if(!Array.isArray(n.style))throw TypeError(".google.api.ResourceDescriptor.style: array expected");for(b.style=[],T=0;T<n.style.length;++T)switch(n.style[T]){default:if(typeof n.style[T]=="number"){b.style[T]=n.style[T];break}case"STYLE_UNSPECIFIED":case 0:b.style[T]=0;break;case"DECLARATIVE_FRIENDLY":case 1:b.style[T]=1}}return b},Pr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.pattern=[],T.style=[]),b.defaults&&(T.type="",T.nameField="",T.history=b.enums===String?"HISTORY_UNSPECIFIED":0,T.plural="",T.singular=""),n.type!=null&&n.hasOwnProperty("type")&&(T.type=n.type),n.pattern&&n.pattern.length){T.pattern=[];for(var Ne=0;Ne<n.pattern.length;++Ne)T.pattern[Ne]=n.pattern[Ne]}if(n.nameField!=null&&n.hasOwnProperty("nameField")&&(T.nameField=n.nameField),n.history!=null&&n.hasOwnProperty("history")&&(T.history=b.enums!==String||o.google.api.ResourceDescriptor.History[n.history]===void 0?n.history:o.google.api.ResourceDescriptor.History[n.history]),n.plural!=null&&n.hasOwnProperty("plural")&&(T.plural=n.plural),n.singular!=null&&n.hasOwnProperty("singular")&&(T.singular=n.singular),n.style&&n.style.length)for(T.style=[],Ne=0;Ne<n.style.length;++Ne)T.style[Ne]=b.enums!==String||o.google.api.ResourceDescriptor.Style[n.style[Ne]]===void 0?n.style[Ne]:o.google.api.ResourceDescriptor.Style[n.style[Ne]];return T},Pr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Pr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.ResourceDescriptor"},Pr.History=(d={},(m=Object.create(d))[d[0]="HISTORY_UNSPECIFIED"]="HISTORY_UNSPECIFIED",m[d[1]="ORIGINALLY_SINGLE_PATTERN"]="ORIGINALLY_SINGLE_PATTERN",m[d[2]="FUTURE_MULTI_PATTERN"]="FUTURE_MULTI_PATTERN",m),Pr.Style=(d={},(m=Object.create(d))[d[0]="STYLE_UNSPECIFIED"]="STYLE_UNSPECIFIED",m[d[1]="DECLARATIVE_FRIENDLY"]="DECLARATIVE_FRIENDLY",m),Pr),r.ResourceReference=(Ir.prototype.type="",Ir.prototype.childType="",Ir.fromObject=function(n){var b;return n instanceof o.google.api.ResourceReference?n:(b=new o.google.api.ResourceReference,n.type!=null&&(b.type=String(n.type)),n.childType!=null&&(b.childType=String(n.childType)),b)},Ir.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.type="",T.childType=""),n.type!=null&&n.hasOwnProperty("type")&&(T.type=n.type),n.childType!=null&&n.hasOwnProperty("childType")&&(T.childType=n.childType),T},Ir.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ir.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.api.ResourceReference"},Ir),r),c.protobuf=((u={}).FileDescriptorSet=(si.prototype.file=a.emptyArray,si.fromObject=function(n){if(n instanceof o.google.protobuf.FileDescriptorSet)return n;var b=new o.google.protobuf.FileDescriptorSet;if(n.file){if(!Array.isArray(n.file))throw TypeError(".google.protobuf.FileDescriptorSet.file: array expected");b.file=[];for(var T=0;T<n.file.length;++T){if(typeof n.file[T]!="object")throw TypeError(".google.protobuf.FileDescriptorSet.file: object expected");b.file[T]=o.google.protobuf.FileDescriptorProto.fromObject(n.file[T])}}return b},si.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.file=[]),n.file&&n.file.length){T.file=[];for(var Ne=0;Ne<n.file.length;++Ne)T.file[Ne]=o.google.protobuf.FileDescriptorProto.toObject(n.file[Ne],b)}return T},si.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},si.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FileDescriptorSet"},si),u.Edition=(d={},(m=Object.create(d))[d[0]="EDITION_UNKNOWN"]="EDITION_UNKNOWN",m[d[998]="EDITION_PROTO2"]="EDITION_PROTO2",m[d[999]="EDITION_PROTO3"]="EDITION_PROTO3",m[d[1e3]="EDITION_2023"]="EDITION_2023",m[d[1001]="EDITION_2024"]="EDITION_2024",m[d[1]="EDITION_1_TEST_ONLY"]="EDITION_1_TEST_ONLY",m[d[2]="EDITION_2_TEST_ONLY"]="EDITION_2_TEST_ONLY",m[d[99997]="EDITION_99997_TEST_ONLY"]="EDITION_99997_TEST_ONLY",m[d[99998]="EDITION_99998_TEST_ONLY"]="EDITION_99998_TEST_ONLY",m[d[99999]="EDITION_99999_TEST_ONLY"]="EDITION_99999_TEST_ONLY",m[d[2147483647]="EDITION_MAX"]="EDITION_MAX",m),u.FileDescriptorProto=(Dr.prototype.name="",Dr.prototype.package="",Dr.prototype.dependency=a.emptyArray,Dr.prototype.publicDependency=a.emptyArray,Dr.prototype.weakDependency=a.emptyArray,Dr.prototype.messageType=a.emptyArray,Dr.prototype.enumType=a.emptyArray,Dr.prototype.service=a.emptyArray,Dr.prototype.extension=a.emptyArray,Dr.prototype.options=null,Dr.prototype.sourceCodeInfo=null,Dr.prototype.syntax="",Dr.prototype.edition=0,Dr.fromObject=function(n){if(n instanceof o.google.protobuf.FileDescriptorProto)return n;var b=new o.google.protobuf.FileDescriptorProto;if(n.name!=null&&(b.name=String(n.name)),n.package!=null&&(b.package=String(n.package)),n.dependency){if(!Array.isArray(n.dependency))throw TypeError(".google.protobuf.FileDescriptorProto.dependency: array expected");b.dependency=[];for(var T=0;T<n.dependency.length;++T)b.dependency[T]=String(n.dependency[T])}if(n.publicDependency){if(!Array.isArray(n.publicDependency))throw TypeError(".google.protobuf.FileDescriptorProto.publicDependency: array expected");for(b.publicDependency=[],T=0;T<n.publicDependency.length;++T)b.publicDependency[T]=0|n.publicDependency[T]}if(n.weakDependency){if(!Array.isArray(n.weakDependency))throw TypeError(".google.protobuf.FileDescriptorProto.weakDependency: array expected");for(b.weakDependency=[],T=0;T<n.weakDependency.length;++T)b.weakDependency[T]=0|n.weakDependency[T]}if(n.messageType){if(!Array.isArray(n.messageType))throw TypeError(".google.protobuf.FileDescriptorProto.messageType: array expected");for(b.messageType=[],T=0;T<n.messageType.length;++T){if(typeof n.messageType[T]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.messageType: object expected");b.messageType[T]=o.google.protobuf.DescriptorProto.fromObject(n.messageType[T])}}if(n.enumType){if(!Array.isArray(n.enumType))throw TypeError(".google.protobuf.FileDescriptorProto.enumType: array expected");for(b.enumType=[],T=0;T<n.enumType.length;++T){if(typeof n.enumType[T]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.enumType: object expected");b.enumType[T]=o.google.protobuf.EnumDescriptorProto.fromObject(n.enumType[T])}}if(n.service){if(!Array.isArray(n.service))throw TypeError(".google.protobuf.FileDescriptorProto.service: array expected");for(b.service=[],T=0;T<n.service.length;++T){if(typeof n.service[T]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.service: object expected");b.service[T]=o.google.protobuf.ServiceDescriptorProto.fromObject(n.service[T])}}if(n.extension){if(!Array.isArray(n.extension))throw TypeError(".google.protobuf.FileDescriptorProto.extension: array expected");for(b.extension=[],T=0;T<n.extension.length;++T){if(typeof n.extension[T]!="object")throw TypeError(".google.protobuf.FileDescriptorProto.extension: object expected");b.extension[T]=o.google.protobuf.FieldDescriptorProto.fromObject(n.extension[T])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.FileDescriptorProto.options: object expected");b.options=o.google.protobuf.FileOptions.fromObject(n.options)}if(n.sourceCodeInfo!=null){if(typeof n.sourceCodeInfo!="object")throw TypeError(".google.protobuf.FileDescriptorProto.sourceCodeInfo: object expected");b.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.fromObject(n.sourceCodeInfo)}switch(n.syntax!=null&&(b.syntax=String(n.syntax)),n.edition){default:typeof n.edition=="number"&&(b.edition=n.edition);break;case"EDITION_UNKNOWN":case 0:b.edition=0;break;case"EDITION_PROTO2":case 998:b.edition=998;break;case"EDITION_PROTO3":case 999:b.edition=999;break;case"EDITION_2023":case 1e3:b.edition=1e3;break;case"EDITION_2024":case 1001:b.edition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.edition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.edition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.edition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.edition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.edition=99999;break;case"EDITION_MAX":case 2147483647:b.edition=2147483647}return b},Dr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.dependency=[],T.messageType=[],T.enumType=[],T.service=[],T.extension=[],T.publicDependency=[],T.weakDependency=[]),b.defaults&&(T.name="",T.package="",T.options=null,T.sourceCodeInfo=null,T.syntax="",T.edition=b.enums===String?"EDITION_UNKNOWN":0),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.package!=null&&n.hasOwnProperty("package")&&(T.package=n.package),n.dependency&&n.dependency.length){T.dependency=[];for(var Ne=0;Ne<n.dependency.length;++Ne)T.dependency[Ne]=n.dependency[Ne]}if(n.messageType&&n.messageType.length)for(T.messageType=[],Ne=0;Ne<n.messageType.length;++Ne)T.messageType[Ne]=o.google.protobuf.DescriptorProto.toObject(n.messageType[Ne],b);if(n.enumType&&n.enumType.length)for(T.enumType=[],Ne=0;Ne<n.enumType.length;++Ne)T.enumType[Ne]=o.google.protobuf.EnumDescriptorProto.toObject(n.enumType[Ne],b);if(n.service&&n.service.length)for(T.service=[],Ne=0;Ne<n.service.length;++Ne)T.service[Ne]=o.google.protobuf.ServiceDescriptorProto.toObject(n.service[Ne],b);if(n.extension&&n.extension.length)for(T.extension=[],Ne=0;Ne<n.extension.length;++Ne)T.extension[Ne]=o.google.protobuf.FieldDescriptorProto.toObject(n.extension[Ne],b);if(n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.FileOptions.toObject(n.options,b)),n.sourceCodeInfo!=null&&n.hasOwnProperty("sourceCodeInfo")&&(T.sourceCodeInfo=o.google.protobuf.SourceCodeInfo.toObject(n.sourceCodeInfo,b)),n.publicDependency&&n.publicDependency.length)for(T.publicDependency=[],Ne=0;Ne<n.publicDependency.length;++Ne)T.publicDependency[Ne]=n.publicDependency[Ne];if(n.weakDependency&&n.weakDependency.length)for(T.weakDependency=[],Ne=0;Ne<n.weakDependency.length;++Ne)T.weakDependency[Ne]=n.weakDependency[Ne];return n.syntax!=null&&n.hasOwnProperty("syntax")&&(T.syntax=n.syntax),n.edition!=null&&n.hasOwnProperty("edition")&&(T.edition=b.enums!==String||o.google.protobuf.Edition[n.edition]===void 0?n.edition:o.google.protobuf.Edition[n.edition]),T},Dr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Dr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FileDescriptorProto"},Dr),u.DescriptorProto=(Bn.prototype.name="",Bn.prototype.field=a.emptyArray,Bn.prototype.extension=a.emptyArray,Bn.prototype.nestedType=a.emptyArray,Bn.prototype.enumType=a.emptyArray,Bn.prototype.extensionRange=a.emptyArray,Bn.prototype.oneofDecl=a.emptyArray,Bn.prototype.options=null,Bn.prototype.reservedRange=a.emptyArray,Bn.prototype.reservedName=a.emptyArray,Bn.fromObject=function(n){if(n instanceof o.google.protobuf.DescriptorProto)return n;var b=new o.google.protobuf.DescriptorProto;if(n.name!=null&&(b.name=String(n.name)),n.field){if(!Array.isArray(n.field))throw TypeError(".google.protobuf.DescriptorProto.field: array expected");b.field=[];for(var T=0;T<n.field.length;++T){if(typeof n.field[T]!="object")throw TypeError(".google.protobuf.DescriptorProto.field: object expected");b.field[T]=o.google.protobuf.FieldDescriptorProto.fromObject(n.field[T])}}if(n.extension){if(!Array.isArray(n.extension))throw TypeError(".google.protobuf.DescriptorProto.extension: array expected");for(b.extension=[],T=0;T<n.extension.length;++T){if(typeof n.extension[T]!="object")throw TypeError(".google.protobuf.DescriptorProto.extension: object expected");b.extension[T]=o.google.protobuf.FieldDescriptorProto.fromObject(n.extension[T])}}if(n.nestedType){if(!Array.isArray(n.nestedType))throw TypeError(".google.protobuf.DescriptorProto.nestedType: array expected");for(b.nestedType=[],T=0;T<n.nestedType.length;++T){if(typeof n.nestedType[T]!="object")throw TypeError(".google.protobuf.DescriptorProto.nestedType: object expected");b.nestedType[T]=o.google.protobuf.DescriptorProto.fromObject(n.nestedType[T])}}if(n.enumType){if(!Array.isArray(n.enumType))throw TypeError(".google.protobuf.DescriptorProto.enumType: array expected");for(b.enumType=[],T=0;T<n.enumType.length;++T){if(typeof n.enumType[T]!="object")throw TypeError(".google.protobuf.DescriptorProto.enumType: object expected");b.enumType[T]=o.google.protobuf.EnumDescriptorProto.fromObject(n.enumType[T])}}if(n.extensionRange){if(!Array.isArray(n.extensionRange))throw TypeError(".google.protobuf.DescriptorProto.extensionRange: array expected");for(b.extensionRange=[],T=0;T<n.extensionRange.length;++T){if(typeof n.extensionRange[T]!="object")throw TypeError(".google.protobuf.DescriptorProto.extensionRange: object expected");b.extensionRange[T]=o.google.protobuf.DescriptorProto.ExtensionRange.fromObject(n.extensionRange[T])}}if(n.oneofDecl){if(!Array.isArray(n.oneofDecl))throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: array expected");for(b.oneofDecl=[],T=0;T<n.oneofDecl.length;++T){if(typeof n.oneofDecl[T]!="object")throw TypeError(".google.protobuf.DescriptorProto.oneofDecl: object expected");b.oneofDecl[T]=o.google.protobuf.OneofDescriptorProto.fromObject(n.oneofDecl[T])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.DescriptorProto.options: object expected");b.options=o.google.protobuf.MessageOptions.fromObject(n.options)}if(n.reservedRange){if(!Array.isArray(n.reservedRange))throw TypeError(".google.protobuf.DescriptorProto.reservedRange: array expected");for(b.reservedRange=[],T=0;T<n.reservedRange.length;++T){if(typeof n.reservedRange[T]!="object")throw TypeError(".google.protobuf.DescriptorProto.reservedRange: object expected");b.reservedRange[T]=o.google.protobuf.DescriptorProto.ReservedRange.fromObject(n.reservedRange[T])}}if(n.reservedName){if(!Array.isArray(n.reservedName))throw TypeError(".google.protobuf.DescriptorProto.reservedName: array expected");for(b.reservedName=[],T=0;T<n.reservedName.length;++T)b.reservedName[T]=String(n.reservedName[T])}return b},Bn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.field=[],T.nestedType=[],T.enumType=[],T.extensionRange=[],T.extension=[],T.oneofDecl=[],T.reservedRange=[],T.reservedName=[]),b.defaults&&(T.name="",T.options=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.field&&n.field.length){T.field=[];for(var Ne=0;Ne<n.field.length;++Ne)T.field[Ne]=o.google.protobuf.FieldDescriptorProto.toObject(n.field[Ne],b)}if(n.nestedType&&n.nestedType.length)for(T.nestedType=[],Ne=0;Ne<n.nestedType.length;++Ne)T.nestedType[Ne]=o.google.protobuf.DescriptorProto.toObject(n.nestedType[Ne],b);if(n.enumType&&n.enumType.length)for(T.enumType=[],Ne=0;Ne<n.enumType.length;++Ne)T.enumType[Ne]=o.google.protobuf.EnumDescriptorProto.toObject(n.enumType[Ne],b);if(n.extensionRange&&n.extensionRange.length)for(T.extensionRange=[],Ne=0;Ne<n.extensionRange.length;++Ne)T.extensionRange[Ne]=o.google.protobuf.DescriptorProto.ExtensionRange.toObject(n.extensionRange[Ne],b);if(n.extension&&n.extension.length)for(T.extension=[],Ne=0;Ne<n.extension.length;++Ne)T.extension[Ne]=o.google.protobuf.FieldDescriptorProto.toObject(n.extension[Ne],b);if(n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.MessageOptions.toObject(n.options,b)),n.oneofDecl&&n.oneofDecl.length)for(T.oneofDecl=[],Ne=0;Ne<n.oneofDecl.length;++Ne)T.oneofDecl[Ne]=o.google.protobuf.OneofDescriptorProto.toObject(n.oneofDecl[Ne],b);if(n.reservedRange&&n.reservedRange.length)for(T.reservedRange=[],Ne=0;Ne<n.reservedRange.length;++Ne)T.reservedRange[Ne]=o.google.protobuf.DescriptorProto.ReservedRange.toObject(n.reservedRange[Ne],b);if(n.reservedName&&n.reservedName.length)for(T.reservedName=[],Ne=0;Ne<n.reservedName.length;++Ne)T.reservedName[Ne]=n.reservedName[Ne];return T},Bn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Bn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.DescriptorProto"},Bn.ExtensionRange=(ai.prototype.start=0,ai.prototype.end=0,ai.prototype.options=null,ai.fromObject=function(n){if(n instanceof o.google.protobuf.DescriptorProto.ExtensionRange)return n;var b=new o.google.protobuf.DescriptorProto.ExtensionRange;if(n.start!=null&&(b.start=0|n.start),n.end!=null&&(b.end=0|n.end),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.DescriptorProto.ExtensionRange.options: object expected");b.options=o.google.protobuf.ExtensionRangeOptions.fromObject(n.options)}return b},ai.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.start=0,T.end=0,T.options=null),n.start!=null&&n.hasOwnProperty("start")&&(T.start=n.start),n.end!=null&&n.hasOwnProperty("end")&&(T.end=n.end),n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.ExtensionRangeOptions.toObject(n.options,b)),T},ai.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ai.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.DescriptorProto.ExtensionRange"},ai),Bn.ReservedRange=(xn.prototype.start=0,xn.prototype.end=0,xn.fromObject=function(n){var b;return n instanceof o.google.protobuf.DescriptorProto.ReservedRange?n:(b=new o.google.protobuf.DescriptorProto.ReservedRange,n.start!=null&&(b.start=0|n.start),n.end!=null&&(b.end=0|n.end),b)},xn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.start=0,T.end=0),n.start!=null&&n.hasOwnProperty("start")&&(T.start=n.start),n.end!=null&&n.hasOwnProperty("end")&&(T.end=n.end),T},xn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},xn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.DescriptorProto.ReservedRange"},xn),Bn),u.ExtensionRangeOptions=(mn.prototype.uninterpretedOption=a.emptyArray,mn.prototype.declaration=a.emptyArray,mn.prototype.features=null,mn.prototype.verification=1,mn.fromObject=function(n){if(n instanceof o.google.protobuf.ExtensionRangeOptions)return n;var b=new o.google.protobuf.ExtensionRangeOptions;if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}if(n.declaration){if(!Array.isArray(n.declaration))throw TypeError(".google.protobuf.ExtensionRangeOptions.declaration: array expected");for(b.declaration=[],T=0;T<n.declaration.length;++T){if(typeof n.declaration[T]!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.declaration: object expected");b.declaration[T]=o.google.protobuf.ExtensionRangeOptions.Declaration.fromObject(n.declaration[T])}}if(n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.ExtensionRangeOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}switch(n.verification){case"DECLARATION":case 0:b.verification=0;break;default:typeof n.verification=="number"&&(b.verification=n.verification);break;case"UNVERIFIED":case 1:b.verification=1}return b},mn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.declaration=[],T.uninterpretedOption=[]),b.defaults&&(T.verification=b.enums===String?"UNVERIFIED":1,T.features=null),n.declaration&&n.declaration.length){T.declaration=[];for(var Ne=0;Ne<n.declaration.length;++Ne)T.declaration[Ne]=o.google.protobuf.ExtensionRangeOptions.Declaration.toObject(n.declaration[Ne],b)}if(n.verification!=null&&n.hasOwnProperty("verification")&&(T.verification=b.enums!==String||o.google.protobuf.ExtensionRangeOptions.VerificationState[n.verification]===void 0?n.verification:o.google.protobuf.ExtensionRangeOptions.VerificationState[n.verification]),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length)for(T.uninterpretedOption=[],Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b);return T},mn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},mn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.ExtensionRangeOptions"},mn.Declaration=(Wn.prototype.number=0,Wn.prototype.fullName="",Wn.prototype.type="",Wn.prototype.reserved=!1,Wn.prototype.repeated=!1,Wn.fromObject=function(n){var b;return n instanceof o.google.protobuf.ExtensionRangeOptions.Declaration?n:(b=new o.google.protobuf.ExtensionRangeOptions.Declaration,n.number!=null&&(b.number=0|n.number),n.fullName!=null&&(b.fullName=String(n.fullName)),n.type!=null&&(b.type=String(n.type)),n.reserved!=null&&(b.reserved=!!n.reserved),n.repeated!=null&&(b.repeated=!!n.repeated),b)},Wn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.number=0,T.fullName="",T.type="",T.reserved=!1,T.repeated=!1),n.number!=null&&n.hasOwnProperty("number")&&(T.number=n.number),n.fullName!=null&&n.hasOwnProperty("fullName")&&(T.fullName=n.fullName),n.type!=null&&n.hasOwnProperty("type")&&(T.type=n.type),n.reserved!=null&&n.hasOwnProperty("reserved")&&(T.reserved=n.reserved),n.repeated!=null&&n.hasOwnProperty("repeated")&&(T.repeated=n.repeated),T},Wn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Wn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.ExtensionRangeOptions.Declaration"},Wn),mn.VerificationState=(d={},(m=Object.create(d))[d[0]="DECLARATION"]="DECLARATION",m[d[1]="UNVERIFIED"]="UNVERIFIED",m),mn),u.FieldDescriptorProto=(Yn.prototype.name="",Yn.prototype.number=0,Yn.prototype.label=1,Yn.prototype.type=1,Yn.prototype.typeName="",Yn.prototype.extendee="",Yn.prototype.defaultValue="",Yn.prototype.oneofIndex=0,Yn.prototype.jsonName="",Yn.prototype.options=null,Yn.prototype.proto3Optional=!1,Yn.fromObject=function(n){if(n instanceof o.google.protobuf.FieldDescriptorProto)return n;var b=new o.google.protobuf.FieldDescriptorProto;switch(n.name!=null&&(b.name=String(n.name)),n.number!=null&&(b.number=0|n.number),n.label){default:typeof n.label=="number"&&(b.label=n.label);break;case"LABEL_OPTIONAL":case 1:b.label=1;break;case"LABEL_REPEATED":case 3:b.label=3;break;case"LABEL_REQUIRED":case 2:b.label=2}switch(n.type){default:typeof n.type=="number"&&(b.type=n.type);break;case"TYPE_DOUBLE":case 1:b.type=1;break;case"TYPE_FLOAT":case 2:b.type=2;break;case"TYPE_INT64":case 3:b.type=3;break;case"TYPE_UINT64":case 4:b.type=4;break;case"TYPE_INT32":case 5:b.type=5;break;case"TYPE_FIXED64":case 6:b.type=6;break;case"TYPE_FIXED32":case 7:b.type=7;break;case"TYPE_BOOL":case 8:b.type=8;break;case"TYPE_STRING":case 9:b.type=9;break;case"TYPE_GROUP":case 10:b.type=10;break;case"TYPE_MESSAGE":case 11:b.type=11;break;case"TYPE_BYTES":case 12:b.type=12;break;case"TYPE_UINT32":case 13:b.type=13;break;case"TYPE_ENUM":case 14:b.type=14;break;case"TYPE_SFIXED32":case 15:b.type=15;break;case"TYPE_SFIXED64":case 16:b.type=16;break;case"TYPE_SINT32":case 17:b.type=17;break;case"TYPE_SINT64":case 18:b.type=18}if(n.typeName!=null&&(b.typeName=String(n.typeName)),n.extendee!=null&&(b.extendee=String(n.extendee)),n.defaultValue!=null&&(b.defaultValue=String(n.defaultValue)),n.oneofIndex!=null&&(b.oneofIndex=0|n.oneofIndex),n.jsonName!=null&&(b.jsonName=String(n.jsonName)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.FieldDescriptorProto.options: object expected");b.options=o.google.protobuf.FieldOptions.fromObject(n.options)}return n.proto3Optional!=null&&(b.proto3Optional=!!n.proto3Optional),b},Yn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.extendee="",T.number=0,T.label=b.enums===String?"LABEL_OPTIONAL":1,T.type=b.enums===String?"TYPE_DOUBLE":1,T.typeName="",T.defaultValue="",T.options=null,T.oneofIndex=0,T.jsonName="",T.proto3Optional=!1),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.extendee!=null&&n.hasOwnProperty("extendee")&&(T.extendee=n.extendee),n.number!=null&&n.hasOwnProperty("number")&&(T.number=n.number),n.label!=null&&n.hasOwnProperty("label")&&(T.label=b.enums!==String||o.google.protobuf.FieldDescriptorProto.Label[n.label]===void 0?n.label:o.google.protobuf.FieldDescriptorProto.Label[n.label]),n.type!=null&&n.hasOwnProperty("type")&&(T.type=b.enums!==String||o.google.protobuf.FieldDescriptorProto.Type[n.type]===void 0?n.type:o.google.protobuf.FieldDescriptorProto.Type[n.type]),n.typeName!=null&&n.hasOwnProperty("typeName")&&(T.typeName=n.typeName),n.defaultValue!=null&&n.hasOwnProperty("defaultValue")&&(T.defaultValue=n.defaultValue),n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.FieldOptions.toObject(n.options,b)),n.oneofIndex!=null&&n.hasOwnProperty("oneofIndex")&&(T.oneofIndex=n.oneofIndex),n.jsonName!=null&&n.hasOwnProperty("jsonName")&&(T.jsonName=n.jsonName),n.proto3Optional!=null&&n.hasOwnProperty("proto3Optional")&&(T.proto3Optional=n.proto3Optional),T},Yn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Yn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FieldDescriptorProto"},Yn.Type=(d={},(m=Object.create(d))[d[1]="TYPE_DOUBLE"]="TYPE_DOUBLE",m[d[2]="TYPE_FLOAT"]="TYPE_FLOAT",m[d[3]="TYPE_INT64"]="TYPE_INT64",m[d[4]="TYPE_UINT64"]="TYPE_UINT64",m[d[5]="TYPE_INT32"]="TYPE_INT32",m[d[6]="TYPE_FIXED64"]="TYPE_FIXED64",m[d[7]="TYPE_FIXED32"]="TYPE_FIXED32",m[d[8]="TYPE_BOOL"]="TYPE_BOOL",m[d[9]="TYPE_STRING"]="TYPE_STRING",m[d[10]="TYPE_GROUP"]="TYPE_GROUP",m[d[11]="TYPE_MESSAGE"]="TYPE_MESSAGE",m[d[12]="TYPE_BYTES"]="TYPE_BYTES",m[d[13]="TYPE_UINT32"]="TYPE_UINT32",m[d[14]="TYPE_ENUM"]="TYPE_ENUM",m[d[15]="TYPE_SFIXED32"]="TYPE_SFIXED32",m[d[16]="TYPE_SFIXED64"]="TYPE_SFIXED64",m[d[17]="TYPE_SINT32"]="TYPE_SINT32",m[d[18]="TYPE_SINT64"]="TYPE_SINT64",m),Yn.Label=(d={},(m=Object.create(d))[d[1]="LABEL_OPTIONAL"]="LABEL_OPTIONAL",m[d[3]="LABEL_REPEATED"]="LABEL_REPEATED",m[d[2]="LABEL_REQUIRED"]="LABEL_REQUIRED",m),Yn),u.OneofDescriptorProto=(Ai.prototype.name="",Ai.prototype.options=null,Ai.fromObject=function(n){if(n instanceof o.google.protobuf.OneofDescriptorProto)return n;var b=new o.google.protobuf.OneofDescriptorProto;if(n.name!=null&&(b.name=String(n.name)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.OneofDescriptorProto.options: object expected");b.options=o.google.protobuf.OneofOptions.fromObject(n.options)}return b},Ai.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.options=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.OneofOptions.toObject(n.options,b)),T},Ai.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ai.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.OneofDescriptorProto"},Ai),u.EnumDescriptorProto=(Ue.prototype.name="",Ue.prototype.value=a.emptyArray,Ue.prototype.options=null,Ue.prototype.reservedRange=a.emptyArray,Ue.prototype.reservedName=a.emptyArray,Ue.fromObject=function(n){if(n instanceof o.google.protobuf.EnumDescriptorProto)return n;var b=new o.google.protobuf.EnumDescriptorProto;if(n.name!=null&&(b.name=String(n.name)),n.value){if(!Array.isArray(n.value))throw TypeError(".google.protobuf.EnumDescriptorProto.value: array expected");b.value=[];for(var T=0;T<n.value.length;++T){if(typeof n.value[T]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.value: object expected");b.value[T]=o.google.protobuf.EnumValueDescriptorProto.fromObject(n.value[T])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.options: object expected");b.options=o.google.protobuf.EnumOptions.fromObject(n.options)}if(n.reservedRange){if(!Array.isArray(n.reservedRange))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: array expected");for(b.reservedRange=[],T=0;T<n.reservedRange.length;++T){if(typeof n.reservedRange[T]!="object")throw TypeError(".google.protobuf.EnumDescriptorProto.reservedRange: object expected");b.reservedRange[T]=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.fromObject(n.reservedRange[T])}}if(n.reservedName){if(!Array.isArray(n.reservedName))throw TypeError(".google.protobuf.EnumDescriptorProto.reservedName: array expected");for(b.reservedName=[],T=0;T<n.reservedName.length;++T)b.reservedName[T]=String(n.reservedName[T])}return b},Ue.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.value=[],T.reservedRange=[],T.reservedName=[]),b.defaults&&(T.name="",T.options=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.value&&n.value.length){T.value=[];for(var Ne=0;Ne<n.value.length;++Ne)T.value[Ne]=o.google.protobuf.EnumValueDescriptorProto.toObject(n.value[Ne],b)}if(n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.EnumOptions.toObject(n.options,b)),n.reservedRange&&n.reservedRange.length)for(T.reservedRange=[],Ne=0;Ne<n.reservedRange.length;++Ne)T.reservedRange[Ne]=o.google.protobuf.EnumDescriptorProto.EnumReservedRange.toObject(n.reservedRange[Ne],b);if(n.reservedName&&n.reservedName.length)for(T.reservedName=[],Ne=0;Ne<n.reservedName.length;++Ne)T.reservedName[Ne]=n.reservedName[Ne];return T},Ue.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ue.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.EnumDescriptorProto"},Ue.EnumReservedRange=(We.prototype.start=0,We.prototype.end=0,We.fromObject=function(n){var b;return n instanceof o.google.protobuf.EnumDescriptorProto.EnumReservedRange?n:(b=new o.google.protobuf.EnumDescriptorProto.EnumReservedRange,n.start!=null&&(b.start=0|n.start),n.end!=null&&(b.end=0|n.end),b)},We.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.start=0,T.end=0),n.start!=null&&n.hasOwnProperty("start")&&(T.start=n.start),n.end!=null&&n.hasOwnProperty("end")&&(T.end=n.end),T},We.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},We.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.EnumDescriptorProto.EnumReservedRange"},We),Ue),u.EnumValueDescriptorProto=(ze.prototype.name="",ze.prototype.number=0,ze.prototype.options=null,ze.fromObject=function(n){if(n instanceof o.google.protobuf.EnumValueDescriptorProto)return n;var b=new o.google.protobuf.EnumValueDescriptorProto;if(n.name!=null&&(b.name=String(n.name)),n.number!=null&&(b.number=0|n.number),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.EnumValueDescriptorProto.options: object expected");b.options=o.google.protobuf.EnumValueOptions.fromObject(n.options)}return b},ze.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.number=0,T.options=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.number!=null&&n.hasOwnProperty("number")&&(T.number=n.number),n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.EnumValueOptions.toObject(n.options,b)),T},ze.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ze.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.EnumValueDescriptorProto"},ze),u.ServiceDescriptorProto=(yt.prototype.name="",yt.prototype.method=a.emptyArray,yt.prototype.options=null,yt.fromObject=function(n){if(n instanceof o.google.protobuf.ServiceDescriptorProto)return n;var b=new o.google.protobuf.ServiceDescriptorProto;if(n.name!=null&&(b.name=String(n.name)),n.method){if(!Array.isArray(n.method))throw TypeError(".google.protobuf.ServiceDescriptorProto.method: array expected");b.method=[];for(var T=0;T<n.method.length;++T){if(typeof n.method[T]!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.method: object expected");b.method[T]=o.google.protobuf.MethodDescriptorProto.fromObject(n.method[T])}}if(n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.ServiceDescriptorProto.options: object expected");b.options=o.google.protobuf.ServiceOptions.fromObject(n.options)}return b},yt.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.method=[]),b.defaults&&(T.name="",T.options=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.method&&n.method.length){T.method=[];for(var Ne=0;Ne<n.method.length;++Ne)T.method[Ne]=o.google.protobuf.MethodDescriptorProto.toObject(n.method[Ne],b)}return n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.ServiceOptions.toObject(n.options,b)),T},yt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},yt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.ServiceDescriptorProto"},yt),u.MethodDescriptorProto=(tr.prototype.name="",tr.prototype.inputType="",tr.prototype.outputType="",tr.prototype.options=null,tr.prototype.clientStreaming=!1,tr.prototype.serverStreaming=!1,tr.fromObject=function(n){if(n instanceof o.google.protobuf.MethodDescriptorProto)return n;var b=new o.google.protobuf.MethodDescriptorProto;if(n.name!=null&&(b.name=String(n.name)),n.inputType!=null&&(b.inputType=String(n.inputType)),n.outputType!=null&&(b.outputType=String(n.outputType)),n.options!=null){if(typeof n.options!="object")throw TypeError(".google.protobuf.MethodDescriptorProto.options: object expected");b.options=o.google.protobuf.MethodOptions.fromObject(n.options)}return n.clientStreaming!=null&&(b.clientStreaming=!!n.clientStreaming),n.serverStreaming!=null&&(b.serverStreaming=!!n.serverStreaming),b},tr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.inputType="",T.outputType="",T.options=null,T.clientStreaming=!1,T.serverStreaming=!1),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.inputType!=null&&n.hasOwnProperty("inputType")&&(T.inputType=n.inputType),n.outputType!=null&&n.hasOwnProperty("outputType")&&(T.outputType=n.outputType),n.options!=null&&n.hasOwnProperty("options")&&(T.options=o.google.protobuf.MethodOptions.toObject(n.options,b)),n.clientStreaming!=null&&n.hasOwnProperty("clientStreaming")&&(T.clientStreaming=n.clientStreaming),n.serverStreaming!=null&&n.hasOwnProperty("serverStreaming")&&(T.serverStreaming=n.serverStreaming),T},tr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},tr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.MethodDescriptorProto"},tr),u.FileOptions=(er.prototype.javaPackage="",er.prototype.javaOuterClassname="",er.prototype.javaMultipleFiles=!1,er.prototype.javaGenerateEqualsAndHash=!1,er.prototype.javaStringCheckUtf8=!1,er.prototype.optimizeFor=1,er.prototype.goPackage="",er.prototype.ccGenericServices=!1,er.prototype.javaGenericServices=!1,er.prototype.pyGenericServices=!1,er.prototype.deprecated=!1,er.prototype.ccEnableArenas=!0,er.prototype.objcClassPrefix="",er.prototype.csharpNamespace="",er.prototype.swiftPrefix="",er.prototype.phpClassPrefix="",er.prototype.phpNamespace="",er.prototype.phpMetadataNamespace="",er.prototype.rubyPackage="",er.prototype.features=null,er.prototype.uninterpretedOption=a.emptyArray,er.prototype[".google.api.resourceDefinition"]=a.emptyArray,er.fromObject=function(n){if(n instanceof o.google.protobuf.FileOptions)return n;var b=new o.google.protobuf.FileOptions;switch(n.javaPackage!=null&&(b.javaPackage=String(n.javaPackage)),n.javaOuterClassname!=null&&(b.javaOuterClassname=String(n.javaOuterClassname)),n.javaMultipleFiles!=null&&(b.javaMultipleFiles=!!n.javaMultipleFiles),n.javaGenerateEqualsAndHash!=null&&(b.javaGenerateEqualsAndHash=!!n.javaGenerateEqualsAndHash),n.javaStringCheckUtf8!=null&&(b.javaStringCheckUtf8=!!n.javaStringCheckUtf8),n.optimizeFor){default:typeof n.optimizeFor=="number"&&(b.optimizeFor=n.optimizeFor);break;case"SPEED":case 1:b.optimizeFor=1;break;case"CODE_SIZE":case 2:b.optimizeFor=2;break;case"LITE_RUNTIME":case 3:b.optimizeFor=3}if(n.goPackage!=null&&(b.goPackage=String(n.goPackage)),n.ccGenericServices!=null&&(b.ccGenericServices=!!n.ccGenericServices),n.javaGenericServices!=null&&(b.javaGenericServices=!!n.javaGenericServices),n.pyGenericServices!=null&&(b.pyGenericServices=!!n.pyGenericServices),n.deprecated!=null&&(b.deprecated=!!n.deprecated),n.ccEnableArenas!=null&&(b.ccEnableArenas=!!n.ccEnableArenas),n.objcClassPrefix!=null&&(b.objcClassPrefix=String(n.objcClassPrefix)),n.csharpNamespace!=null&&(b.csharpNamespace=String(n.csharpNamespace)),n.swiftPrefix!=null&&(b.swiftPrefix=String(n.swiftPrefix)),n.phpClassPrefix!=null&&(b.phpClassPrefix=String(n.phpClassPrefix)),n.phpNamespace!=null&&(b.phpNamespace=String(n.phpNamespace)),n.phpMetadataNamespace!=null&&(b.phpMetadataNamespace=String(n.phpMetadataNamespace)),n.rubyPackage!=null&&(b.rubyPackage=String(n.rubyPackage)),n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.FileOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.FileOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}if(n[".google.api.resourceDefinition"]){if(!Array.isArray(n[".google.api.resourceDefinition"]))throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: array expected");for(b[".google.api.resourceDefinition"]=[],T=0;T<n[".google.api.resourceDefinition"].length;++T){if(typeof n[".google.api.resourceDefinition"][T]!="object")throw TypeError(".google.protobuf.FileOptions..google.api.resourceDefinition: object expected");b[".google.api.resourceDefinition"][T]=o.google.api.ResourceDescriptor.fromObject(n[".google.api.resourceDefinition"][T])}}return b},er.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.uninterpretedOption=[],T[".google.api.resourceDefinition"]=[]),b.defaults&&(T.javaPackage="",T.javaOuterClassname="",T.optimizeFor=b.enums===String?"SPEED":1,T.javaMultipleFiles=!1,T.goPackage="",T.ccGenericServices=!1,T.javaGenericServices=!1,T.pyGenericServices=!1,T.javaGenerateEqualsAndHash=!1,T.deprecated=!1,T.javaStringCheckUtf8=!1,T.ccEnableArenas=!0,T.objcClassPrefix="",T.csharpNamespace="",T.swiftPrefix="",T.phpClassPrefix="",T.phpNamespace="",T.phpMetadataNamespace="",T.rubyPackage="",T.features=null),n.javaPackage!=null&&n.hasOwnProperty("javaPackage")&&(T.javaPackage=n.javaPackage),n.javaOuterClassname!=null&&n.hasOwnProperty("javaOuterClassname")&&(T.javaOuterClassname=n.javaOuterClassname),n.optimizeFor!=null&&n.hasOwnProperty("optimizeFor")&&(T.optimizeFor=b.enums!==String||o.google.protobuf.FileOptions.OptimizeMode[n.optimizeFor]===void 0?n.optimizeFor:o.google.protobuf.FileOptions.OptimizeMode[n.optimizeFor]),n.javaMultipleFiles!=null&&n.hasOwnProperty("javaMultipleFiles")&&(T.javaMultipleFiles=n.javaMultipleFiles),n.goPackage!=null&&n.hasOwnProperty("goPackage")&&(T.goPackage=n.goPackage),n.ccGenericServices!=null&&n.hasOwnProperty("ccGenericServices")&&(T.ccGenericServices=n.ccGenericServices),n.javaGenericServices!=null&&n.hasOwnProperty("javaGenericServices")&&(T.javaGenericServices=n.javaGenericServices),n.pyGenericServices!=null&&n.hasOwnProperty("pyGenericServices")&&(T.pyGenericServices=n.pyGenericServices),n.javaGenerateEqualsAndHash!=null&&n.hasOwnProperty("javaGenerateEqualsAndHash")&&(T.javaGenerateEqualsAndHash=n.javaGenerateEqualsAndHash),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(T.deprecated=n.deprecated),n.javaStringCheckUtf8!=null&&n.hasOwnProperty("javaStringCheckUtf8")&&(T.javaStringCheckUtf8=n.javaStringCheckUtf8),n.ccEnableArenas!=null&&n.hasOwnProperty("ccEnableArenas")&&(T.ccEnableArenas=n.ccEnableArenas),n.objcClassPrefix!=null&&n.hasOwnProperty("objcClassPrefix")&&(T.objcClassPrefix=n.objcClassPrefix),n.csharpNamespace!=null&&n.hasOwnProperty("csharpNamespace")&&(T.csharpNamespace=n.csharpNamespace),n.swiftPrefix!=null&&n.hasOwnProperty("swiftPrefix")&&(T.swiftPrefix=n.swiftPrefix),n.phpClassPrefix!=null&&n.hasOwnProperty("phpClassPrefix")&&(T.phpClassPrefix=n.phpClassPrefix),n.phpNamespace!=null&&n.hasOwnProperty("phpNamespace")&&(T.phpNamespace=n.phpNamespace),n.phpMetadataNamespace!=null&&n.hasOwnProperty("phpMetadataNamespace")&&(T.phpMetadataNamespace=n.phpMetadataNamespace),n.rubyPackage!=null&&n.hasOwnProperty("rubyPackage")&&(T.rubyPackage=n.rubyPackage),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length){T.uninterpretedOption=[];for(var Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b)}if(n[".google.api.resourceDefinition"]&&n[".google.api.resourceDefinition"].length)for(T[".google.api.resourceDefinition"]=[],Ne=0;Ne<n[".google.api.resourceDefinition"].length;++Ne)T[".google.api.resourceDefinition"][Ne]=o.google.api.ResourceDescriptor.toObject(n[".google.api.resourceDefinition"][Ne],b);return T},er.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},er.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FileOptions"},er.OptimizeMode=(d={},(m=Object.create(d))[d[1]="SPEED"]="SPEED",m[d[2]="CODE_SIZE"]="CODE_SIZE",m[d[3]="LITE_RUNTIME"]="LITE_RUNTIME",m),er),u.MessageOptions=(fr.prototype.messageSetWireFormat=!1,fr.prototype.noStandardDescriptorAccessor=!1,fr.prototype.deprecated=!1,fr.prototype.mapEntry=!1,fr.prototype.deprecatedLegacyJsonFieldConflicts=!1,fr.prototype.features=null,fr.prototype.uninterpretedOption=a.emptyArray,fr.prototype[".google.api.resource"]=null,fr.fromObject=function(n){if(n instanceof o.google.protobuf.MessageOptions)return n;var b=new o.google.protobuf.MessageOptions;if(n.messageSetWireFormat!=null&&(b.messageSetWireFormat=!!n.messageSetWireFormat),n.noStandardDescriptorAccessor!=null&&(b.noStandardDescriptorAccessor=!!n.noStandardDescriptorAccessor),n.deprecated!=null&&(b.deprecated=!!n.deprecated),n.mapEntry!=null&&(b.mapEntry=!!n.mapEntry),n.deprecatedLegacyJsonFieldConflicts!=null&&(b.deprecatedLegacyJsonFieldConflicts=!!n.deprecatedLegacyJsonFieldConflicts),n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.MessageOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.MessageOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}if(n[".google.api.resource"]!=null){if(typeof n[".google.api.resource"]!="object")throw TypeError(".google.protobuf.MessageOptions..google.api.resource: object expected");b[".google.api.resource"]=o.google.api.ResourceDescriptor.fromObject(n[".google.api.resource"])}return b},fr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.uninterpretedOption=[]),b.defaults&&(T.messageSetWireFormat=!1,T.noStandardDescriptorAccessor=!1,T.deprecated=!1,T.mapEntry=!1,T.deprecatedLegacyJsonFieldConflicts=!1,T.features=null,T[".google.api.resource"]=null),n.messageSetWireFormat!=null&&n.hasOwnProperty("messageSetWireFormat")&&(T.messageSetWireFormat=n.messageSetWireFormat),n.noStandardDescriptorAccessor!=null&&n.hasOwnProperty("noStandardDescriptorAccessor")&&(T.noStandardDescriptorAccessor=n.noStandardDescriptorAccessor),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(T.deprecated=n.deprecated),n.mapEntry!=null&&n.hasOwnProperty("mapEntry")&&(T.mapEntry=n.mapEntry),n.deprecatedLegacyJsonFieldConflicts!=null&&n.hasOwnProperty("deprecatedLegacyJsonFieldConflicts")&&(T.deprecatedLegacyJsonFieldConflicts=n.deprecatedLegacyJsonFieldConflicts),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length){T.uninterpretedOption=[];for(var Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b)}return n[".google.api.resource"]!=null&&n.hasOwnProperty(".google.api.resource")&&(T[".google.api.resource"]=o.google.api.ResourceDescriptor.toObject(n[".google.api.resource"],b)),T},fr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},fr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.MessageOptions"},fr),u.FieldOptions=(sr.prototype.ctype=0,sr.prototype.packed=!1,sr.prototype.jstype=0,sr.prototype.lazy=!1,sr.prototype.unverifiedLazy=!1,sr.prototype.deprecated=!1,sr.prototype.weak=!1,sr.prototype.debugRedact=!1,sr.prototype.retention=0,sr.prototype.targets=a.emptyArray,sr.prototype.editionDefaults=a.emptyArray,sr.prototype.features=null,sr.prototype.uninterpretedOption=a.emptyArray,sr.prototype[".google.api.fieldBehavior"]=a.emptyArray,sr.prototype[".google.api.resourceReference"]=null,sr.fromObject=function(n){if(n instanceof o.google.protobuf.FieldOptions)return n;var b=new o.google.protobuf.FieldOptions;switch(n.ctype){default:typeof n.ctype=="number"&&(b.ctype=n.ctype);break;case"STRING":case 0:b.ctype=0;break;case"CORD":case 1:b.ctype=1;break;case"STRING_PIECE":case 2:b.ctype=2}switch(n.packed!=null&&(b.packed=!!n.packed),n.jstype){default:typeof n.jstype=="number"&&(b.jstype=n.jstype);break;case"JS_NORMAL":case 0:b.jstype=0;break;case"JS_STRING":case 1:b.jstype=1;break;case"JS_NUMBER":case 2:b.jstype=2}switch(n.lazy!=null&&(b.lazy=!!n.lazy),n.unverifiedLazy!=null&&(b.unverifiedLazy=!!n.unverifiedLazy),n.deprecated!=null&&(b.deprecated=!!n.deprecated),n.weak!=null&&(b.weak=!!n.weak),n.debugRedact!=null&&(b.debugRedact=!!n.debugRedact),n.retention){default:typeof n.retention=="number"&&(b.retention=n.retention);break;case"RETENTION_UNKNOWN":case 0:b.retention=0;break;case"RETENTION_RUNTIME":case 1:b.retention=1;break;case"RETENTION_SOURCE":case 2:b.retention=2}if(n.targets){if(!Array.isArray(n.targets))throw TypeError(".google.protobuf.FieldOptions.targets: array expected");b.targets=[];for(var T=0;T<n.targets.length;++T)switch(n.targets[T]){default:if(typeof n.targets[T]=="number"){b.targets[T]=n.targets[T];break}case"TARGET_TYPE_UNKNOWN":case 0:b.targets[T]=0;break;case"TARGET_TYPE_FILE":case 1:b.targets[T]=1;break;case"TARGET_TYPE_EXTENSION_RANGE":case 2:b.targets[T]=2;break;case"TARGET_TYPE_MESSAGE":case 3:b.targets[T]=3;break;case"TARGET_TYPE_FIELD":case 4:b.targets[T]=4;break;case"TARGET_TYPE_ONEOF":case 5:b.targets[T]=5;break;case"TARGET_TYPE_ENUM":case 6:b.targets[T]=6;break;case"TARGET_TYPE_ENUM_ENTRY":case 7:b.targets[T]=7;break;case"TARGET_TYPE_SERVICE":case 8:b.targets[T]=8;break;case"TARGET_TYPE_METHOD":case 9:b.targets[T]=9}}if(n.editionDefaults){if(!Array.isArray(n.editionDefaults))throw TypeError(".google.protobuf.FieldOptions.editionDefaults: array expected");for(b.editionDefaults=[],T=0;T<n.editionDefaults.length;++T){if(typeof n.editionDefaults[T]!="object")throw TypeError(".google.protobuf.FieldOptions.editionDefaults: object expected");b.editionDefaults[T]=o.google.protobuf.FieldOptions.EditionDefault.fromObject(n.editionDefaults[T])}}if(n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.FieldOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: array expected");for(b.uninterpretedOption=[],T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.FieldOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}if(n[".google.api.fieldBehavior"]){if(!Array.isArray(n[".google.api.fieldBehavior"]))throw TypeError(".google.protobuf.FieldOptions..google.api.fieldBehavior: array expected");for(b[".google.api.fieldBehavior"]=[],T=0;T<n[".google.api.fieldBehavior"].length;++T)switch(n[".google.api.fieldBehavior"][T]){default:if(typeof n[".google.api.fieldBehavior"][T]=="number"){b[".google.api.fieldBehavior"][T]=n[".google.api.fieldBehavior"][T];break}case"FIELD_BEHAVIOR_UNSPECIFIED":case 0:b[".google.api.fieldBehavior"][T]=0;break;case"OPTIONAL":case 1:b[".google.api.fieldBehavior"][T]=1;break;case"REQUIRED":case 2:b[".google.api.fieldBehavior"][T]=2;break;case"OUTPUT_ONLY":case 3:b[".google.api.fieldBehavior"][T]=3;break;case"INPUT_ONLY":case 4:b[".google.api.fieldBehavior"][T]=4;break;case"IMMUTABLE":case 5:b[".google.api.fieldBehavior"][T]=5;break;case"UNORDERED_LIST":case 6:b[".google.api.fieldBehavior"][T]=6;break;case"NON_EMPTY_DEFAULT":case 7:b[".google.api.fieldBehavior"][T]=7;break;case"IDENTIFIER":case 8:b[".google.api.fieldBehavior"][T]=8}}if(n[".google.api.resourceReference"]!=null){if(typeof n[".google.api.resourceReference"]!="object")throw TypeError(".google.protobuf.FieldOptions..google.api.resourceReference: object expected");b[".google.api.resourceReference"]=o.google.api.ResourceReference.fromObject(n[".google.api.resourceReference"])}return b},sr.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.targets=[],T.editionDefaults=[],T.uninterpretedOption=[],T[".google.api.fieldBehavior"]=[]),b.defaults&&(T.ctype=b.enums===String?"STRING":0,T.packed=!1,T.deprecated=!1,T.lazy=!1,T.jstype=b.enums===String?"JS_NORMAL":0,T.weak=!1,T.unverifiedLazy=!1,T.debugRedact=!1,T.retention=b.enums===String?"RETENTION_UNKNOWN":0,T.features=null,T[".google.api.resourceReference"]=null),n.ctype!=null&&n.hasOwnProperty("ctype")&&(T.ctype=b.enums!==String||o.google.protobuf.FieldOptions.CType[n.ctype]===void 0?n.ctype:o.google.protobuf.FieldOptions.CType[n.ctype]),n.packed!=null&&n.hasOwnProperty("packed")&&(T.packed=n.packed),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(T.deprecated=n.deprecated),n.lazy!=null&&n.hasOwnProperty("lazy")&&(T.lazy=n.lazy),n.jstype!=null&&n.hasOwnProperty("jstype")&&(T.jstype=b.enums!==String||o.google.protobuf.FieldOptions.JSType[n.jstype]===void 0?n.jstype:o.google.protobuf.FieldOptions.JSType[n.jstype]),n.weak!=null&&n.hasOwnProperty("weak")&&(T.weak=n.weak),n.unverifiedLazy!=null&&n.hasOwnProperty("unverifiedLazy")&&(T.unverifiedLazy=n.unverifiedLazy),n.debugRedact!=null&&n.hasOwnProperty("debugRedact")&&(T.debugRedact=n.debugRedact),n.retention!=null&&n.hasOwnProperty("retention")&&(T.retention=b.enums!==String||o.google.protobuf.FieldOptions.OptionRetention[n.retention]===void 0?n.retention:o.google.protobuf.FieldOptions.OptionRetention[n.retention]),n.targets&&n.targets.length){T.targets=[];for(var Ne=0;Ne<n.targets.length;++Ne)T.targets[Ne]=b.enums!==String||o.google.protobuf.FieldOptions.OptionTargetType[n.targets[Ne]]===void 0?n.targets[Ne]:o.google.protobuf.FieldOptions.OptionTargetType[n.targets[Ne]]}if(n.editionDefaults&&n.editionDefaults.length)for(T.editionDefaults=[],Ne=0;Ne<n.editionDefaults.length;++Ne)T.editionDefaults[Ne]=o.google.protobuf.FieldOptions.EditionDefault.toObject(n.editionDefaults[Ne],b);if(n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length)for(T.uninterpretedOption=[],Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b);if(n[".google.api.fieldBehavior"]&&n[".google.api.fieldBehavior"].length)for(T[".google.api.fieldBehavior"]=[],Ne=0;Ne<n[".google.api.fieldBehavior"].length;++Ne)T[".google.api.fieldBehavior"][Ne]=b.enums!==String||o.google.api.FieldBehavior[n[".google.api.fieldBehavior"][Ne]]===void 0?n[".google.api.fieldBehavior"][Ne]:o.google.api.FieldBehavior[n[".google.api.fieldBehavior"][Ne]];return n[".google.api.resourceReference"]!=null&&n.hasOwnProperty(".google.api.resourceReference")&&(T[".google.api.resourceReference"]=o.google.api.ResourceReference.toObject(n[".google.api.resourceReference"],b)),T},sr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},sr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FieldOptions"},sr.CType=(d={},(m=Object.create(d))[d[0]="STRING"]="STRING",m[d[1]="CORD"]="CORD",m[d[2]="STRING_PIECE"]="STRING_PIECE",m),sr.JSType=(d={},(m=Object.create(d))[d[0]="JS_NORMAL"]="JS_NORMAL",m[d[1]="JS_STRING"]="JS_STRING",m[d[2]="JS_NUMBER"]="JS_NUMBER",m),sr.OptionRetention=(d={},(m=Object.create(d))[d[0]="RETENTION_UNKNOWN"]="RETENTION_UNKNOWN",m[d[1]="RETENTION_RUNTIME"]="RETENTION_RUNTIME",m[d[2]="RETENTION_SOURCE"]="RETENTION_SOURCE",m),sr.OptionTargetType=(d={},(m=Object.create(d))[d[0]="TARGET_TYPE_UNKNOWN"]="TARGET_TYPE_UNKNOWN",m[d[1]="TARGET_TYPE_FILE"]="TARGET_TYPE_FILE",m[d[2]="TARGET_TYPE_EXTENSION_RANGE"]="TARGET_TYPE_EXTENSION_RANGE",m[d[3]="TARGET_TYPE_MESSAGE"]="TARGET_TYPE_MESSAGE",m[d[4]="TARGET_TYPE_FIELD"]="TARGET_TYPE_FIELD",m[d[5]="TARGET_TYPE_ONEOF"]="TARGET_TYPE_ONEOF",m[d[6]="TARGET_TYPE_ENUM"]="TARGET_TYPE_ENUM",m[d[7]="TARGET_TYPE_ENUM_ENTRY"]="TARGET_TYPE_ENUM_ENTRY",m[d[8]="TARGET_TYPE_SERVICE"]="TARGET_TYPE_SERVICE",m[d[9]="TARGET_TYPE_METHOD"]="TARGET_TYPE_METHOD",m),sr.EditionDefault=(Qr.prototype.edition=0,Qr.prototype.value="",Qr.fromObject=function(n){if(n instanceof o.google.protobuf.FieldOptions.EditionDefault)return n;var b=new o.google.protobuf.FieldOptions.EditionDefault;switch(n.edition){default:typeof n.edition=="number"&&(b.edition=n.edition);break;case"EDITION_UNKNOWN":case 0:b.edition=0;break;case"EDITION_PROTO2":case 998:b.edition=998;break;case"EDITION_PROTO3":case 999:b.edition=999;break;case"EDITION_2023":case 1e3:b.edition=1e3;break;case"EDITION_2024":case 1001:b.edition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.edition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.edition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.edition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.edition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.edition=99999;break;case"EDITION_MAX":case 2147483647:b.edition=2147483647}return n.value!=null&&(b.value=String(n.value)),b},Qr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.value="",T.edition=b.enums===String?"EDITION_UNKNOWN":0),n.value!=null&&n.hasOwnProperty("value")&&(T.value=n.value),n.edition!=null&&n.hasOwnProperty("edition")&&(T.edition=b.enums!==String||o.google.protobuf.Edition[n.edition]===void 0?n.edition:o.google.protobuf.Edition[n.edition]),T},Qr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Qr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FieldOptions.EditionDefault"},Qr),sr),u.OneofOptions=(Pn.prototype.features=null,Pn.prototype.uninterpretedOption=a.emptyArray,Pn.fromObject=function(n){if(n instanceof o.google.protobuf.OneofOptions)return n;var b=new o.google.protobuf.OneofOptions;if(n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.OneofOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.OneofOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}return b},Pn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.uninterpretedOption=[]),b.defaults&&(T.features=null),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length){T.uninterpretedOption=[];for(var Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b)}return T},Pn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Pn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.OneofOptions"},Pn),u.EnumOptions=(Qn.prototype.allowAlias=!1,Qn.prototype.deprecated=!1,Qn.prototype.deprecatedLegacyJsonFieldConflicts=!1,Qn.prototype.features=null,Qn.prototype.uninterpretedOption=a.emptyArray,Qn.fromObject=function(n){if(n instanceof o.google.protobuf.EnumOptions)return n;var b=new o.google.protobuf.EnumOptions;if(n.allowAlias!=null&&(b.allowAlias=!!n.allowAlias),n.deprecated!=null&&(b.deprecated=!!n.deprecated),n.deprecatedLegacyJsonFieldConflicts!=null&&(b.deprecatedLegacyJsonFieldConflicts=!!n.deprecatedLegacyJsonFieldConflicts),n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.EnumOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.EnumOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}return b},Qn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.uninterpretedOption=[]),b.defaults&&(T.allowAlias=!1,T.deprecated=!1,T.deprecatedLegacyJsonFieldConflicts=!1,T.features=null),n.allowAlias!=null&&n.hasOwnProperty("allowAlias")&&(T.allowAlias=n.allowAlias),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(T.deprecated=n.deprecated),n.deprecatedLegacyJsonFieldConflicts!=null&&n.hasOwnProperty("deprecatedLegacyJsonFieldConflicts")&&(T.deprecatedLegacyJsonFieldConflicts=n.deprecatedLegacyJsonFieldConflicts),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length){T.uninterpretedOption=[];for(var Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b)}return T},Qn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Qn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.EnumOptions"},Qn),u.EnumValueOptions=(Sn.prototype.deprecated=!1,Sn.prototype.features=null,Sn.prototype.debugRedact=!1,Sn.prototype.uninterpretedOption=a.emptyArray,Sn.fromObject=function(n){if(n instanceof o.google.protobuf.EnumValueOptions)return n;var b=new o.google.protobuf.EnumValueOptions;if(n.deprecated!=null&&(b.deprecated=!!n.deprecated),n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.EnumValueOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.debugRedact!=null&&(b.debugRedact=!!n.debugRedact),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.EnumValueOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}return b},Sn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.uninterpretedOption=[]),b.defaults&&(T.deprecated=!1,T.features=null,T.debugRedact=!1),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(T.deprecated=n.deprecated),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.debugRedact!=null&&n.hasOwnProperty("debugRedact")&&(T.debugRedact=n.debugRedact),n.uninterpretedOption&&n.uninterpretedOption.length){T.uninterpretedOption=[];for(var Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b)}return T},Sn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Sn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.EnumValueOptions"},Sn),u.ServiceOptions=(dn.prototype.features=null,dn.prototype.deprecated=!1,dn.prototype.uninterpretedOption=a.emptyArray,dn.prototype[".google.api.defaultHost"]="",dn.prototype[".google.api.oauthScopes"]="",dn.prototype[".google.api.apiVersion"]="",dn.fromObject=function(n){if(n instanceof o.google.protobuf.ServiceOptions)return n;var b=new o.google.protobuf.ServiceOptions;if(n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.ServiceOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.deprecated!=null&&(b.deprecated=!!n.deprecated),n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.ServiceOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}return n[".google.api.defaultHost"]!=null&&(b[".google.api.defaultHost"]=String(n[".google.api.defaultHost"])),n[".google.api.oauthScopes"]!=null&&(b[".google.api.oauthScopes"]=String(n[".google.api.oauthScopes"])),n[".google.api.apiVersion"]!=null&&(b[".google.api.apiVersion"]=String(n[".google.api.apiVersion"])),b},dn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.uninterpretedOption=[]),b.defaults&&(T.deprecated=!1,T.features=null,T[".google.api.defaultHost"]="",T[".google.api.oauthScopes"]="",T[".google.api.apiVersion"]=""),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(T.deprecated=n.deprecated),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length){T.uninterpretedOption=[];for(var Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b)}return n[".google.api.defaultHost"]!=null&&n.hasOwnProperty(".google.api.defaultHost")&&(T[".google.api.defaultHost"]=n[".google.api.defaultHost"]),n[".google.api.oauthScopes"]!=null&&n.hasOwnProperty(".google.api.oauthScopes")&&(T[".google.api.oauthScopes"]=n[".google.api.oauthScopes"]),n[".google.api.apiVersion"]!=null&&n.hasOwnProperty(".google.api.apiVersion")&&(T[".google.api.apiVersion"]=n[".google.api.apiVersion"]),T},dn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},dn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.ServiceOptions"},dn),u.MethodOptions=($n.prototype.deprecated=!1,$n.prototype.idempotencyLevel=0,$n.prototype.features=null,$n.prototype.uninterpretedOption=a.emptyArray,$n.prototype[".google.api.http"]=null,$n.prototype[".google.api.methodSignature"]=a.emptyArray,$n.prototype[".google.longrunning.operationInfo"]=null,$n.fromObject=function(n){if(n instanceof o.google.protobuf.MethodOptions)return n;var b=new o.google.protobuf.MethodOptions;switch(n.deprecated!=null&&(b.deprecated=!!n.deprecated),n.idempotencyLevel){default:typeof n.idempotencyLevel=="number"&&(b.idempotencyLevel=n.idempotencyLevel);break;case"IDEMPOTENCY_UNKNOWN":case 0:b.idempotencyLevel=0;break;case"NO_SIDE_EFFECTS":case 1:b.idempotencyLevel=1;break;case"IDEMPOTENT":case 2:b.idempotencyLevel=2}if(n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.MethodOptions.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}if(n.uninterpretedOption){if(!Array.isArray(n.uninterpretedOption))throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: array expected");b.uninterpretedOption=[];for(var T=0;T<n.uninterpretedOption.length;++T){if(typeof n.uninterpretedOption[T]!="object")throw TypeError(".google.protobuf.MethodOptions.uninterpretedOption: object expected");b.uninterpretedOption[T]=o.google.protobuf.UninterpretedOption.fromObject(n.uninterpretedOption[T])}}if(n[".google.api.http"]!=null){if(typeof n[".google.api.http"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.api.http: object expected");b[".google.api.http"]=o.google.api.HttpRule.fromObject(n[".google.api.http"])}if(n[".google.api.methodSignature"]){if(!Array.isArray(n[".google.api.methodSignature"]))throw TypeError(".google.protobuf.MethodOptions..google.api.methodSignature: array expected");for(b[".google.api.methodSignature"]=[],T=0;T<n[".google.api.methodSignature"].length;++T)b[".google.api.methodSignature"][T]=String(n[".google.api.methodSignature"][T])}if(n[".google.longrunning.operationInfo"]!=null){if(typeof n[".google.longrunning.operationInfo"]!="object")throw TypeError(".google.protobuf.MethodOptions..google.longrunning.operationInfo: object expected");b[".google.longrunning.operationInfo"]=o.google.longrunning.OperationInfo.fromObject(n[".google.longrunning.operationInfo"])}return b},$n.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.uninterpretedOption=[],T[".google.api.methodSignature"]=[]),b.defaults&&(T.deprecated=!1,T.idempotencyLevel=b.enums===String?"IDEMPOTENCY_UNKNOWN":0,T.features=null,T[".google.longrunning.operationInfo"]=null,T[".google.api.http"]=null),n.deprecated!=null&&n.hasOwnProperty("deprecated")&&(T.deprecated=n.deprecated),n.idempotencyLevel!=null&&n.hasOwnProperty("idempotencyLevel")&&(T.idempotencyLevel=b.enums!==String||o.google.protobuf.MethodOptions.IdempotencyLevel[n.idempotencyLevel]===void 0?n.idempotencyLevel:o.google.protobuf.MethodOptions.IdempotencyLevel[n.idempotencyLevel]),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.uninterpretedOption&&n.uninterpretedOption.length){T.uninterpretedOption=[];for(var Ne=0;Ne<n.uninterpretedOption.length;++Ne)T.uninterpretedOption[Ne]=o.google.protobuf.UninterpretedOption.toObject(n.uninterpretedOption[Ne],b)}if(n[".google.longrunning.operationInfo"]!=null&&n.hasOwnProperty(".google.longrunning.operationInfo")&&(T[".google.longrunning.operationInfo"]=o.google.longrunning.OperationInfo.toObject(n[".google.longrunning.operationInfo"],b)),n[".google.api.methodSignature"]&&n[".google.api.methodSignature"].length)for(T[".google.api.methodSignature"]=[],Ne=0;Ne<n[".google.api.methodSignature"].length;++Ne)T[".google.api.methodSignature"][Ne]=n[".google.api.methodSignature"][Ne];return n[".google.api.http"]!=null&&n.hasOwnProperty(".google.api.http")&&(T[".google.api.http"]=o.google.api.HttpRule.toObject(n[".google.api.http"],b)),T},$n.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},$n.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.MethodOptions"},$n.IdempotencyLevel=(d={},(m=Object.create(d))[d[0]="IDEMPOTENCY_UNKNOWN"]="IDEMPOTENCY_UNKNOWN",m[d[1]="NO_SIDE_EFFECTS"]="NO_SIDE_EFFECTS",m[d[2]="IDEMPOTENT"]="IDEMPOTENT",m),$n),u.UninterpretedOption=(On.prototype.name=a.emptyArray,On.prototype.identifierValue="",On.prototype.positiveIntValue=a.Long?a.Long.fromBits(0,0,!0):0,On.prototype.negativeIntValue=a.Long?a.Long.fromBits(0,0,!1):0,On.prototype.doubleValue=0,On.prototype.stringValue=a.newBuffer([]),On.prototype.aggregateValue="",On.fromObject=function(n){if(n instanceof o.google.protobuf.UninterpretedOption)return n;var b=new o.google.protobuf.UninterpretedOption;if(n.name){if(!Array.isArray(n.name))throw TypeError(".google.protobuf.UninterpretedOption.name: array expected");b.name=[];for(var T=0;T<n.name.length;++T){if(typeof n.name[T]!="object")throw TypeError(".google.protobuf.UninterpretedOption.name: object expected");b.name[T]=o.google.protobuf.UninterpretedOption.NamePart.fromObject(n.name[T])}}return n.identifierValue!=null&&(b.identifierValue=String(n.identifierValue)),n.positiveIntValue!=null&&(a.Long?(b.positiveIntValue=a.Long.fromValue(n.positiveIntValue)).unsigned=!0:typeof n.positiveIntValue=="string"?b.positiveIntValue=parseInt(n.positiveIntValue,10):typeof n.positiveIntValue=="number"?b.positiveIntValue=n.positiveIntValue:typeof n.positiveIntValue=="object"&&(b.positiveIntValue=new a.LongBits(n.positiveIntValue.low>>>0,n.positiveIntValue.high>>>0).toNumber(!0))),n.negativeIntValue!=null&&(a.Long?(b.negativeIntValue=a.Long.fromValue(n.negativeIntValue)).unsigned=!1:typeof n.negativeIntValue=="string"?b.negativeIntValue=parseInt(n.negativeIntValue,10):typeof n.negativeIntValue=="number"?b.negativeIntValue=n.negativeIntValue:typeof n.negativeIntValue=="object"&&(b.negativeIntValue=new a.LongBits(n.negativeIntValue.low>>>0,n.negativeIntValue.high>>>0).toNumber())),n.doubleValue!=null&&(b.doubleValue=Number(n.doubleValue)),n.stringValue!=null&&(typeof n.stringValue=="string"?a.base64.decode(n.stringValue,b.stringValue=a.newBuffer(a.base64.length(n.stringValue)),0):0<=n.stringValue.length&&(b.stringValue=n.stringValue)),n.aggregateValue!=null&&(b.aggregateValue=String(n.aggregateValue)),b},On.toObject=function(n,b){var T,Ne={};if(((b=b||{}).arrays||b.defaults)&&(Ne.name=[]),b.defaults&&(Ne.identifierValue="",a.Long?(T=new a.Long(0,0,!0),Ne.positiveIntValue=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.positiveIntValue=b.longs===String?"0":0,a.Long?(T=new a.Long(0,0,!1),Ne.negativeIntValue=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.negativeIntValue=b.longs===String?"0":0,Ne.doubleValue=0,b.bytes===String?Ne.stringValue="":(Ne.stringValue=[],b.bytes!==Array&&(Ne.stringValue=a.newBuffer(Ne.stringValue))),Ne.aggregateValue=""),n.name&&n.name.length){Ne.name=[];for(var ur=0;ur<n.name.length;++ur)Ne.name[ur]=o.google.protobuf.UninterpretedOption.NamePart.toObject(n.name[ur],b)}return n.identifierValue!=null&&n.hasOwnProperty("identifierValue")&&(Ne.identifierValue=n.identifierValue),n.positiveIntValue!=null&&n.hasOwnProperty("positiveIntValue")&&(typeof n.positiveIntValue=="number"?Ne.positiveIntValue=b.longs===String?String(n.positiveIntValue):n.positiveIntValue:Ne.positiveIntValue=b.longs===String?a.Long.prototype.toString.call(n.positiveIntValue):b.longs===Number?new a.LongBits(n.positiveIntValue.low>>>0,n.positiveIntValue.high>>>0).toNumber(!0):n.positiveIntValue),n.negativeIntValue!=null&&n.hasOwnProperty("negativeIntValue")&&(typeof n.negativeIntValue=="number"?Ne.negativeIntValue=b.longs===String?String(n.negativeIntValue):n.negativeIntValue:Ne.negativeIntValue=b.longs===String?a.Long.prototype.toString.call(n.negativeIntValue):b.longs===Number?new a.LongBits(n.negativeIntValue.low>>>0,n.negativeIntValue.high>>>0).toNumber():n.negativeIntValue),n.doubleValue!=null&&n.hasOwnProperty("doubleValue")&&(Ne.doubleValue=b.json&&!isFinite(n.doubleValue)?String(n.doubleValue):n.doubleValue),n.stringValue!=null&&n.hasOwnProperty("stringValue")&&(Ne.stringValue=b.bytes===String?a.base64.encode(n.stringValue,0,n.stringValue.length):b.bytes===Array?Array.prototype.slice.call(n.stringValue):n.stringValue),n.aggregateValue!=null&&n.hasOwnProperty("aggregateValue")&&(Ne.aggregateValue=n.aggregateValue),Ne},On.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},On.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.UninterpretedOption"},On.NamePart=(qn.prototype.namePart="",qn.prototype.isExtension=!1,qn.fromObject=function(n){var b;return n instanceof o.google.protobuf.UninterpretedOption.NamePart?n:(b=new o.google.protobuf.UninterpretedOption.NamePart,n.namePart!=null&&(b.namePart=String(n.namePart)),n.isExtension!=null&&(b.isExtension=!!n.isExtension),b)},qn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.namePart="",T.isExtension=!1),n.namePart!=null&&n.hasOwnProperty("namePart")&&(T.namePart=n.namePart),n.isExtension!=null&&n.hasOwnProperty("isExtension")&&(T.isExtension=n.isExtension),T},qn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},qn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.UninterpretedOption.NamePart"},qn),On),u.FeatureSet=(vr.prototype.fieldPresence=0,vr.prototype.enumType=0,vr.prototype.repeatedFieldEncoding=0,vr.prototype.utf8Validation=0,vr.prototype.messageEncoding=0,vr.prototype.jsonFormat=0,vr.fromObject=function(n){if(n instanceof o.google.protobuf.FeatureSet)return n;var b=new o.google.protobuf.FeatureSet;switch(n.fieldPresence){default:typeof n.fieldPresence=="number"&&(b.fieldPresence=n.fieldPresence);break;case"FIELD_PRESENCE_UNKNOWN":case 0:b.fieldPresence=0;break;case"EXPLICIT":case 1:b.fieldPresence=1;break;case"IMPLICIT":case 2:b.fieldPresence=2;break;case"LEGACY_REQUIRED":case 3:b.fieldPresence=3}switch(n.enumType){default:typeof n.enumType=="number"&&(b.enumType=n.enumType);break;case"ENUM_TYPE_UNKNOWN":case 0:b.enumType=0;break;case"OPEN":case 1:b.enumType=1;break;case"CLOSED":case 2:b.enumType=2}switch(n.repeatedFieldEncoding){default:typeof n.repeatedFieldEncoding=="number"&&(b.repeatedFieldEncoding=n.repeatedFieldEncoding);break;case"REPEATED_FIELD_ENCODING_UNKNOWN":case 0:b.repeatedFieldEncoding=0;break;case"PACKED":case 1:b.repeatedFieldEncoding=1;break;case"EXPANDED":case 2:b.repeatedFieldEncoding=2}switch(n.utf8Validation){default:typeof n.utf8Validation=="number"&&(b.utf8Validation=n.utf8Validation);break;case"UTF8_VALIDATION_UNKNOWN":case 0:b.utf8Validation=0;break;case"VERIFY":case 2:b.utf8Validation=2;break;case"NONE":case 3:b.utf8Validation=3}switch(n.messageEncoding){default:typeof n.messageEncoding=="number"&&(b.messageEncoding=n.messageEncoding);break;case"MESSAGE_ENCODING_UNKNOWN":case 0:b.messageEncoding=0;break;case"LENGTH_PREFIXED":case 1:b.messageEncoding=1;break;case"DELIMITED":case 2:b.messageEncoding=2}switch(n.jsonFormat){default:typeof n.jsonFormat=="number"&&(b.jsonFormat=n.jsonFormat);break;case"JSON_FORMAT_UNKNOWN":case 0:b.jsonFormat=0;break;case"ALLOW":case 1:b.jsonFormat=1;break;case"LEGACY_BEST_EFFORT":case 2:b.jsonFormat=2}return b},vr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.fieldPresence=b.enums===String?"FIELD_PRESENCE_UNKNOWN":0,T.enumType=b.enums===String?"ENUM_TYPE_UNKNOWN":0,T.repeatedFieldEncoding=b.enums===String?"REPEATED_FIELD_ENCODING_UNKNOWN":0,T.utf8Validation=b.enums===String?"UTF8_VALIDATION_UNKNOWN":0,T.messageEncoding=b.enums===String?"MESSAGE_ENCODING_UNKNOWN":0,T.jsonFormat=b.enums===String?"JSON_FORMAT_UNKNOWN":0),n.fieldPresence!=null&&n.hasOwnProperty("fieldPresence")&&(T.fieldPresence=b.enums!==String||o.google.protobuf.FeatureSet.FieldPresence[n.fieldPresence]===void 0?n.fieldPresence:o.google.protobuf.FeatureSet.FieldPresence[n.fieldPresence]),n.enumType!=null&&n.hasOwnProperty("enumType")&&(T.enumType=b.enums!==String||o.google.protobuf.FeatureSet.EnumType[n.enumType]===void 0?n.enumType:o.google.protobuf.FeatureSet.EnumType[n.enumType]),n.repeatedFieldEncoding!=null&&n.hasOwnProperty("repeatedFieldEncoding")&&(T.repeatedFieldEncoding=b.enums!==String||o.google.protobuf.FeatureSet.RepeatedFieldEncoding[n.repeatedFieldEncoding]===void 0?n.repeatedFieldEncoding:o.google.protobuf.FeatureSet.RepeatedFieldEncoding[n.repeatedFieldEncoding]),n.utf8Validation!=null&&n.hasOwnProperty("utf8Validation")&&(T.utf8Validation=b.enums!==String||o.google.protobuf.FeatureSet.Utf8Validation[n.utf8Validation]===void 0?n.utf8Validation:o.google.protobuf.FeatureSet.Utf8Validation[n.utf8Validation]),n.messageEncoding!=null&&n.hasOwnProperty("messageEncoding")&&(T.messageEncoding=b.enums!==String||o.google.protobuf.FeatureSet.MessageEncoding[n.messageEncoding]===void 0?n.messageEncoding:o.google.protobuf.FeatureSet.MessageEncoding[n.messageEncoding]),n.jsonFormat!=null&&n.hasOwnProperty("jsonFormat")&&(T.jsonFormat=b.enums!==String||o.google.protobuf.FeatureSet.JsonFormat[n.jsonFormat]===void 0?n.jsonFormat:o.google.protobuf.FeatureSet.JsonFormat[n.jsonFormat]),T},vr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},vr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FeatureSet"},vr.FieldPresence=(d={},(m=Object.create(d))[d[0]="FIELD_PRESENCE_UNKNOWN"]="FIELD_PRESENCE_UNKNOWN",m[d[1]="EXPLICIT"]="EXPLICIT",m[d[2]="IMPLICIT"]="IMPLICIT",m[d[3]="LEGACY_REQUIRED"]="LEGACY_REQUIRED",m),vr.EnumType=(d={},(m=Object.create(d))[d[0]="ENUM_TYPE_UNKNOWN"]="ENUM_TYPE_UNKNOWN",m[d[1]="OPEN"]="OPEN",m[d[2]="CLOSED"]="CLOSED",m),vr.RepeatedFieldEncoding=(d={},(m=Object.create(d))[d[0]="REPEATED_FIELD_ENCODING_UNKNOWN"]="REPEATED_FIELD_ENCODING_UNKNOWN",m[d[1]="PACKED"]="PACKED",m[d[2]="EXPANDED"]="EXPANDED",m),vr.Utf8Validation=(d={},(m=Object.create(d))[d[0]="UTF8_VALIDATION_UNKNOWN"]="UTF8_VALIDATION_UNKNOWN",m[d[2]="VERIFY"]="VERIFY",m[d[3]="NONE"]="NONE",m),vr.MessageEncoding=(d={},(m=Object.create(d))[d[0]="MESSAGE_ENCODING_UNKNOWN"]="MESSAGE_ENCODING_UNKNOWN",m[d[1]="LENGTH_PREFIXED"]="LENGTH_PREFIXED",m[d[2]="DELIMITED"]="DELIMITED",m),vr.JsonFormat=(d={},(m=Object.create(d))[d[0]="JSON_FORMAT_UNKNOWN"]="JSON_FORMAT_UNKNOWN",m[d[1]="ALLOW"]="ALLOW",m[d[2]="LEGACY_BEST_EFFORT"]="LEGACY_BEST_EFFORT",m),vr),u.FeatureSetDefaults=(Dn.prototype.defaults=a.emptyArray,Dn.prototype.minimumEdition=0,Dn.prototype.maximumEdition=0,Dn.fromObject=function(n){if(n instanceof o.google.protobuf.FeatureSetDefaults)return n;var b=new o.google.protobuf.FeatureSetDefaults;if(n.defaults){if(!Array.isArray(n.defaults))throw TypeError(".google.protobuf.FeatureSetDefaults.defaults: array expected");b.defaults=[];for(var T=0;T<n.defaults.length;++T){if(typeof n.defaults[T]!="object")throw TypeError(".google.protobuf.FeatureSetDefaults.defaults: object expected");b.defaults[T]=o.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.fromObject(n.defaults[T])}}switch(n.minimumEdition){default:typeof n.minimumEdition=="number"&&(b.minimumEdition=n.minimumEdition);break;case"EDITION_UNKNOWN":case 0:b.minimumEdition=0;break;case"EDITION_PROTO2":case 998:b.minimumEdition=998;break;case"EDITION_PROTO3":case 999:b.minimumEdition=999;break;case"EDITION_2023":case 1e3:b.minimumEdition=1e3;break;case"EDITION_2024":case 1001:b.minimumEdition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.minimumEdition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.minimumEdition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.minimumEdition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.minimumEdition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.minimumEdition=99999;break;case"EDITION_MAX":case 2147483647:b.minimumEdition=2147483647}switch(n.maximumEdition){default:typeof n.maximumEdition=="number"&&(b.maximumEdition=n.maximumEdition);break;case"EDITION_UNKNOWN":case 0:b.maximumEdition=0;break;case"EDITION_PROTO2":case 998:b.maximumEdition=998;break;case"EDITION_PROTO3":case 999:b.maximumEdition=999;break;case"EDITION_2023":case 1e3:b.maximumEdition=1e3;break;case"EDITION_2024":case 1001:b.maximumEdition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.maximumEdition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.maximumEdition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.maximumEdition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.maximumEdition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.maximumEdition=99999;break;case"EDITION_MAX":case 2147483647:b.maximumEdition=2147483647}return b},Dn.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.defaults=[]),b.defaults&&(T.minimumEdition=b.enums===String?"EDITION_UNKNOWN":0,T.maximumEdition=b.enums===String?"EDITION_UNKNOWN":0),n.defaults&&n.defaults.length){T.defaults=[];for(var Ne=0;Ne<n.defaults.length;++Ne)T.defaults[Ne]=o.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.toObject(n.defaults[Ne],b)}return n.minimumEdition!=null&&n.hasOwnProperty("minimumEdition")&&(T.minimumEdition=b.enums!==String||o.google.protobuf.Edition[n.minimumEdition]===void 0?n.minimumEdition:o.google.protobuf.Edition[n.minimumEdition]),n.maximumEdition!=null&&n.hasOwnProperty("maximumEdition")&&(T.maximumEdition=b.enums!==String||o.google.protobuf.Edition[n.maximumEdition]===void 0?n.maximumEdition:o.google.protobuf.Edition[n.maximumEdition]),T},Dn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Dn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FeatureSetDefaults"},Dn.FeatureSetEditionDefault=(Lr.prototype.edition=0,Lr.prototype.features=null,Lr.fromObject=function(n){if(n instanceof o.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault)return n;var b=new o.google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault;switch(n.edition){default:typeof n.edition=="number"&&(b.edition=n.edition);break;case"EDITION_UNKNOWN":case 0:b.edition=0;break;case"EDITION_PROTO2":case 998:b.edition=998;break;case"EDITION_PROTO3":case 999:b.edition=999;break;case"EDITION_2023":case 1e3:b.edition=1e3;break;case"EDITION_2024":case 1001:b.edition=1001;break;case"EDITION_1_TEST_ONLY":case 1:b.edition=1;break;case"EDITION_2_TEST_ONLY":case 2:b.edition=2;break;case"EDITION_99997_TEST_ONLY":case 99997:b.edition=99997;break;case"EDITION_99998_TEST_ONLY":case 99998:b.edition=99998;break;case"EDITION_99999_TEST_ONLY":case 99999:b.edition=99999;break;case"EDITION_MAX":case 2147483647:b.edition=2147483647}if(n.features!=null){if(typeof n.features!="object")throw TypeError(".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault.features: object expected");b.features=o.google.protobuf.FeatureSet.fromObject(n.features)}return b},Lr.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.features=null,T.edition=b.enums===String?"EDITION_UNKNOWN":0),n.features!=null&&n.hasOwnProperty("features")&&(T.features=o.google.protobuf.FeatureSet.toObject(n.features,b)),n.edition!=null&&n.hasOwnProperty("edition")&&(T.edition=b.enums!==String||o.google.protobuf.Edition[n.edition]===void 0?n.edition:o.google.protobuf.Edition[n.edition]),T},Lr.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Lr.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},Lr),Dn),u.SourceCodeInfo=(mi.prototype.location=a.emptyArray,mi.fromObject=function(n){if(n instanceof o.google.protobuf.SourceCodeInfo)return n;var b=new o.google.protobuf.SourceCodeInfo;if(n.location){if(!Array.isArray(n.location))throw TypeError(".google.protobuf.SourceCodeInfo.location: array expected");b.location=[];for(var T=0;T<n.location.length;++T){if(typeof n.location[T]!="object")throw TypeError(".google.protobuf.SourceCodeInfo.location: object expected");b.location[T]=o.google.protobuf.SourceCodeInfo.Location.fromObject(n.location[T])}}return b},mi.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.location=[]),n.location&&n.location.length){T.location=[];for(var Ne=0;Ne<n.location.length;++Ne)T.location[Ne]=o.google.protobuf.SourceCodeInfo.Location.toObject(n.location[Ne],b)}return T},mi.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},mi.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.SourceCodeInfo"},mi.Location=(bi.prototype.path=a.emptyArray,bi.prototype.span=a.emptyArray,bi.prototype.leadingComments="",bi.prototype.trailingComments="",bi.prototype.leadingDetachedComments=a.emptyArray,bi.fromObject=function(n){if(n instanceof o.google.protobuf.SourceCodeInfo.Location)return n;var b=new o.google.protobuf.SourceCodeInfo.Location;if(n.path){if(!Array.isArray(n.path))throw TypeError(".google.protobuf.SourceCodeInfo.Location.path: array expected");b.path=[];for(var T=0;T<n.path.length;++T)b.path[T]=0|n.path[T]}if(n.span){if(!Array.isArray(n.span))throw TypeError(".google.protobuf.SourceCodeInfo.Location.span: array expected");for(b.span=[],T=0;T<n.span.length;++T)b.span[T]=0|n.span[T]}if(n.leadingComments!=null&&(b.leadingComments=String(n.leadingComments)),n.trailingComments!=null&&(b.trailingComments=String(n.trailingComments)),n.leadingDetachedComments){if(!Array.isArray(n.leadingDetachedComments))throw TypeError(".google.protobuf.SourceCodeInfo.Location.leadingDetachedComments: array expected");for(b.leadingDetachedComments=[],T=0;T<n.leadingDetachedComments.length;++T)b.leadingDetachedComments[T]=String(n.leadingDetachedComments[T])}return b},bi.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.path=[],T.span=[],T.leadingDetachedComments=[]),b.defaults&&(T.leadingComments="",T.trailingComments=""),n.path&&n.path.length){T.path=[];for(var Ne=0;Ne<n.path.length;++Ne)T.path[Ne]=n.path[Ne]}if(n.span&&n.span.length)for(T.span=[],Ne=0;Ne<n.span.length;++Ne)T.span[Ne]=n.span[Ne];if(n.leadingComments!=null&&n.hasOwnProperty("leadingComments")&&(T.leadingComments=n.leadingComments),n.trailingComments!=null&&n.hasOwnProperty("trailingComments")&&(T.trailingComments=n.trailingComments),n.leadingDetachedComments&&n.leadingDetachedComments.length)for(T.leadingDetachedComments=[],Ne=0;Ne<n.leadingDetachedComments.length;++Ne)T.leadingDetachedComments[Ne]=n.leadingDetachedComments[Ne];return T},bi.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},bi.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.SourceCodeInfo.Location"},bi),mi),u.GeneratedCodeInfo=(zi.prototype.annotation=a.emptyArray,zi.fromObject=function(n){if(n instanceof o.google.protobuf.GeneratedCodeInfo)return n;var b=new o.google.protobuf.GeneratedCodeInfo;if(n.annotation){if(!Array.isArray(n.annotation))throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: array expected");b.annotation=[];for(var T=0;T<n.annotation.length;++T){if(typeof n.annotation[T]!="object")throw TypeError(".google.protobuf.GeneratedCodeInfo.annotation: object expected");b.annotation[T]=o.google.protobuf.GeneratedCodeInfo.Annotation.fromObject(n.annotation[T])}}return b},zi.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.annotation=[]),n.annotation&&n.annotation.length){T.annotation=[];for(var Ne=0;Ne<n.annotation.length;++Ne)T.annotation[Ne]=o.google.protobuf.GeneratedCodeInfo.Annotation.toObject(n.annotation[Ne],b)}return T},zi.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},zi.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.GeneratedCodeInfo"},zi.Annotation=($i.prototype.path=a.emptyArray,$i.prototype.sourceFile="",$i.prototype.begin=0,$i.prototype.end=0,$i.prototype.semantic=0,$i.fromObject=function(n){if(n instanceof o.google.protobuf.GeneratedCodeInfo.Annotation)return n;var b=new o.google.protobuf.GeneratedCodeInfo.Annotation;if(n.path){if(!Array.isArray(n.path))throw TypeError(".google.protobuf.GeneratedCodeInfo.Annotation.path: array expected");b.path=[];for(var T=0;T<n.path.length;++T)b.path[T]=0|n.path[T]}switch(n.sourceFile!=null&&(b.sourceFile=String(n.sourceFile)),n.begin!=null&&(b.begin=0|n.begin),n.end!=null&&(b.end=0|n.end),n.semantic){default:typeof n.semantic=="number"&&(b.semantic=n.semantic);break;case"NONE":case 0:b.semantic=0;break;case"SET":case 1:b.semantic=1;break;case"ALIAS":case 2:b.semantic=2}return b},$i.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.path=[]),b.defaults&&(T.sourceFile="",T.begin=0,T.end=0,T.semantic=b.enums===String?"NONE":0),n.path&&n.path.length){T.path=[];for(var Ne=0;Ne<n.path.length;++Ne)T.path[Ne]=n.path[Ne]}return n.sourceFile!=null&&n.hasOwnProperty("sourceFile")&&(T.sourceFile=n.sourceFile),n.begin!=null&&n.hasOwnProperty("begin")&&(T.begin=n.begin),n.end!=null&&n.hasOwnProperty("end")&&(T.end=n.end),n.semantic!=null&&n.hasOwnProperty("semantic")&&(T.semantic=b.enums!==String||o.google.protobuf.GeneratedCodeInfo.Annotation.Semantic[n.semantic]===void 0?n.semantic:o.google.protobuf.GeneratedCodeInfo.Annotation.Semantic[n.semantic]),T},$i.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},$i.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.GeneratedCodeInfo.Annotation"},$i.Semantic=(d={},(m=Object.create(d))[d[0]="NONE"]="NONE",m[d[1]="SET"]="SET",m[d[2]="ALIAS"]="ALIAS",m),$i),zi),u.Struct=(Ao.prototype.fields=a.emptyObject,Ao.fromObject=function(n){if(n instanceof o.google.protobuf.Struct)return n;var b=new o.google.protobuf.Struct;if(n.fields){if(typeof n.fields!="object")throw TypeError(".google.protobuf.Struct.fields: object expected");b.fields={};for(var T=Object.keys(n.fields),Ne=0;Ne<T.length;++Ne){if(typeof n.fields[T[Ne]]!="object")throw TypeError(".google.protobuf.Struct.fields: object expected");b.fields[T[Ne]]=o.google.protobuf.Value.fromObject(n.fields[T[Ne]])}}return b},Ao.toObject=function(n,b){var T,Ne={};if(((b=b||{}).objects||b.defaults)&&(Ne.fields={}),n.fields&&(T=Object.keys(n.fields)).length){Ne.fields={};for(var ur=0;ur<T.length;++ur)Ne.fields[T[ur]]=o.google.protobuf.Value.toObject(n.fields[T[ur]],b)}return Ne},Ao.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ao.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Struct"},Ao),u.Value=(ki.prototype.nullValue=null,ki.prototype.numberValue=null,ki.prototype.stringValue=null,ki.prototype.boolValue=null,ki.prototype.structValue=null,ki.prototype.listValue=null,Object.defineProperty(ki.prototype,"kind",{get:a.oneOfGetter(d=["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]),set:a.oneOfSetter(d)}),ki.fromObject=function(n){if(n instanceof o.google.protobuf.Value)return n;var b=new o.google.protobuf.Value;switch(n.nullValue){default:typeof n.nullValue=="number"&&(b.nullValue=n.nullValue);break;case"NULL_VALUE":case 0:b.nullValue=0}if(n.numberValue!=null&&(b.numberValue=Number(n.numberValue)),n.stringValue!=null&&(b.stringValue=String(n.stringValue)),n.boolValue!=null&&(b.boolValue=!!n.boolValue),n.structValue!=null){if(typeof n.structValue!="object")throw TypeError(".google.protobuf.Value.structValue: object expected");b.structValue=o.google.protobuf.Struct.fromObject(n.structValue)}if(n.listValue!=null){if(typeof n.listValue!="object")throw TypeError(".google.protobuf.Value.listValue: object expected");b.listValue=o.google.protobuf.ListValue.fromObject(n.listValue)}return b},ki.toObject=function(n,b){b=b||{};var T={};return n.nullValue!=null&&n.hasOwnProperty("nullValue")&&(T.nullValue=b.enums!==String||o.google.protobuf.NullValue[n.nullValue]===void 0?n.nullValue:o.google.protobuf.NullValue[n.nullValue],b.oneofs)&&(T.kind="nullValue"),n.numberValue!=null&&n.hasOwnProperty("numberValue")&&(T.numberValue=b.json&&!isFinite(n.numberValue)?String(n.numberValue):n.numberValue,b.oneofs)&&(T.kind="numberValue"),n.stringValue!=null&&n.hasOwnProperty("stringValue")&&(T.stringValue=n.stringValue,b.oneofs)&&(T.kind="stringValue"),n.boolValue!=null&&n.hasOwnProperty("boolValue")&&(T.boolValue=n.boolValue,b.oneofs)&&(T.kind="boolValue"),n.structValue!=null&&n.hasOwnProperty("structValue")&&(T.structValue=o.google.protobuf.Struct.toObject(n.structValue,b),b.oneofs)&&(T.kind="structValue"),n.listValue!=null&&n.hasOwnProperty("listValue")&&(T.listValue=o.google.protobuf.ListValue.toObject(n.listValue,b),b.oneofs)&&(T.kind="listValue"),T},ki.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ki.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Value"},ki),u.NullValue=(m={},(d=Object.create(m))[m[0]="NULL_VALUE"]="NULL_VALUE",d),u.ListValue=(ji.prototype.values=a.emptyArray,ji.fromObject=function(n){if(n instanceof o.google.protobuf.ListValue)return n;var b=new o.google.protobuf.ListValue;if(n.values){if(!Array.isArray(n.values))throw TypeError(".google.protobuf.ListValue.values: array expected");b.values=[];for(var T=0;T<n.values.length;++T){if(typeof n.values[T]!="object")throw TypeError(".google.protobuf.ListValue.values: object expected");b.values[T]=o.google.protobuf.Value.fromObject(n.values[T])}}return b},ji.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.values=[]),n.values&&n.values.length){T.values=[];for(var Ne=0;Ne<n.values.length;++Ne)T.values[Ne]=o.google.protobuf.Value.toObject(n.values[Ne],b)}return T},ji.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ji.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.ListValue"},ji),u.Timestamp=(yi.prototype.seconds=a.Long?a.Long.fromBits(0,0,!1):0,yi.prototype.nanos=0,yi.fromObject=function(n){var b;return n instanceof o.google.protobuf.Timestamp?n:(b=new o.google.protobuf.Timestamp,n.seconds!=null&&(a.Long?(b.seconds=a.Long.fromValue(n.seconds)).unsigned=!1:typeof n.seconds=="string"?b.seconds=parseInt(n.seconds,10):typeof n.seconds=="number"?b.seconds=n.seconds:typeof n.seconds=="object"&&(b.seconds=new a.LongBits(n.seconds.low>>>0,n.seconds.high>>>0).toNumber())),n.nanos!=null&&(b.nanos=0|n.nanos),b)},yi.toObject=function(n,b){var T,Ne={};return(b=b||{}).defaults&&(a.Long?(T=new a.Long(0,0,!1),Ne.seconds=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.seconds=b.longs===String?"0":0,Ne.nanos=0),n.seconds!=null&&n.hasOwnProperty("seconds")&&(typeof n.seconds=="number"?Ne.seconds=b.longs===String?String(n.seconds):n.seconds:Ne.seconds=b.longs===String?a.Long.prototype.toString.call(n.seconds):b.longs===Number?new a.LongBits(n.seconds.low>>>0,n.seconds.high>>>0).toNumber():n.seconds),n.nanos!=null&&n.hasOwnProperty("nanos")&&(Ne.nanos=n.nanos),Ne},yi.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},yi.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Timestamp"},yi),u.Duration=(Cn.prototype.seconds=a.Long?a.Long.fromBits(0,0,!1):0,Cn.prototype.nanos=0,Cn.fromObject=function(n){var b;return n instanceof o.google.protobuf.Duration?n:(b=new o.google.protobuf.Duration,n.seconds!=null&&(a.Long?(b.seconds=a.Long.fromValue(n.seconds)).unsigned=!1:typeof n.seconds=="string"?b.seconds=parseInt(n.seconds,10):typeof n.seconds=="number"?b.seconds=n.seconds:typeof n.seconds=="object"&&(b.seconds=new a.LongBits(n.seconds.low>>>0,n.seconds.high>>>0).toNumber())),n.nanos!=null&&(b.nanos=0|n.nanos),b)},Cn.toObject=function(n,b){var T,Ne={};return(b=b||{}).defaults&&(a.Long?(T=new a.Long(0,0,!1),Ne.seconds=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.seconds=b.longs===String?"0":0,Ne.nanos=0),n.seconds!=null&&n.hasOwnProperty("seconds")&&(typeof n.seconds=="number"?Ne.seconds=b.longs===String?String(n.seconds):n.seconds:Ne.seconds=b.longs===String?a.Long.prototype.toString.call(n.seconds):b.longs===Number?new a.LongBits(n.seconds.low>>>0,n.seconds.high>>>0).toNumber():n.seconds),n.nanos!=null&&n.hasOwnProperty("nanos")&&(Ne.nanos=n.nanos),Ne},Cn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Cn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Duration"},Cn),u.DoubleValue=(ni.prototype.value=0,ni.fromObject=function(n){var b;return n instanceof o.google.protobuf.DoubleValue?n:(b=new o.google.protobuf.DoubleValue,n.value!=null&&(b.value=Number(n.value)),b)},ni.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.value=0),n.value!=null&&n.hasOwnProperty("value")&&(T.value=b.json&&!isFinite(n.value)?String(n.value):n.value),T},ni.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ni.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.DoubleValue"},ni),u.FloatValue=(Oi.prototype.value=0,Oi.fromObject=function(n){var b;return n instanceof o.google.protobuf.FloatValue?n:(b=new o.google.protobuf.FloatValue,n.value!=null&&(b.value=Number(n.value)),b)},Oi.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.value=0),n.value!=null&&n.hasOwnProperty("value")&&(T.value=b.json&&!isFinite(n.value)?String(n.value):n.value),T},Oi.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Oi.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FloatValue"},Oi),u.Int64Value=(Li.prototype.value=a.Long?a.Long.fromBits(0,0,!1):0,Li.fromObject=function(n){var b;return n instanceof o.google.protobuf.Int64Value?n:(b=new o.google.protobuf.Int64Value,n.value!=null&&(a.Long?(b.value=a.Long.fromValue(n.value)).unsigned=!1:typeof n.value=="string"?b.value=parseInt(n.value,10):typeof n.value=="number"?b.value=n.value:typeof n.value=="object"&&(b.value=new a.LongBits(n.value.low>>>0,n.value.high>>>0).toNumber())),b)},Li.toObject=function(n,b){var T,Ne={};return(b=b||{}).defaults&&(a.Long?(T=new a.Long(0,0,!1),Ne.value=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.value=b.longs===String?"0":0),n.value!=null&&n.hasOwnProperty("value")&&(typeof n.value=="number"?Ne.value=b.longs===String?String(n.value):n.value:Ne.value=b.longs===String?a.Long.prototype.toString.call(n.value):b.longs===Number?new a.LongBits(n.value.low>>>0,n.value.high>>>0).toNumber():n.value),Ne},Li.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Li.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Int64Value"},Li),u.UInt64Value=(Xn.prototype.value=a.Long?a.Long.fromBits(0,0,!0):0,Xn.fromObject=function(n){var b;return n instanceof o.google.protobuf.UInt64Value?n:(b=new o.google.protobuf.UInt64Value,n.value!=null&&(a.Long?(b.value=a.Long.fromValue(n.value)).unsigned=!0:typeof n.value=="string"?b.value=parseInt(n.value,10):typeof n.value=="number"?b.value=n.value:typeof n.value=="object"&&(b.value=new a.LongBits(n.value.low>>>0,n.value.high>>>0).toNumber(!0))),b)},Xn.toObject=function(n,b){var T,Ne={};return(b=b||{}).defaults&&(a.Long?(T=new a.Long(0,0,!0),Ne.value=b.longs===String?T.toString():b.longs===Number?T.toNumber():T):Ne.value=b.longs===String?"0":0),n.value!=null&&n.hasOwnProperty("value")&&(typeof n.value=="number"?Ne.value=b.longs===String?String(n.value):n.value:Ne.value=b.longs===String?a.Long.prototype.toString.call(n.value):b.longs===Number?new a.LongBits(n.value.low>>>0,n.value.high>>>0).toNumber(!0):n.value),Ne},Xn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Xn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.UInt64Value"},Xn),u.Int32Value=(vi.prototype.value=0,vi.fromObject=function(n){var b;return n instanceof o.google.protobuf.Int32Value?n:(b=new o.google.protobuf.Int32Value,n.value!=null&&(b.value=0|n.value),b)},vi.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.value=0),n.value!=null&&n.hasOwnProperty("value")&&(T.value=n.value),T},vi.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},vi.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Int32Value"},vi),u.UInt32Value=(Oo.prototype.value=0,Oo.fromObject=function(n){var b;return n instanceof o.google.protobuf.UInt32Value?n:(b=new o.google.protobuf.UInt32Value,n.value!=null&&(b.value=n.value>>>0),b)},Oo.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.value=0),n.value!=null&&n.hasOwnProperty("value")&&(T.value=n.value),T},Oo.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Oo.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.UInt32Value"},Oo),u.BoolValue=(lo.prototype.value=!1,lo.fromObject=function(n){var b;return n instanceof o.google.protobuf.BoolValue?n:(b=new o.google.protobuf.BoolValue,n.value!=null&&(b.value=!!n.value),b)},lo.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.value=!1),n.value!=null&&n.hasOwnProperty("value")&&(T.value=n.value),T},lo.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},lo.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.BoolValue"},lo),u.StringValue=(Gn.prototype.value="",Gn.fromObject=function(n){var b;return n instanceof o.google.protobuf.StringValue?n:(b=new o.google.protobuf.StringValue,n.value!=null&&(b.value=String(n.value)),b)},Gn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.value=""),n.value!=null&&n.hasOwnProperty("value")&&(T.value=n.value),T},Gn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Gn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.StringValue"},Gn),u.BytesValue=(yo.prototype.value=a.newBuffer([]),yo.fromObject=function(n){var b;return n instanceof o.google.protobuf.BytesValue?n:(b=new o.google.protobuf.BytesValue,n.value!=null&&(typeof n.value=="string"?a.base64.decode(n.value,b.value=a.newBuffer(a.base64.length(n.value)),0):0<=n.value.length&&(b.value=n.value)),b)},yo.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(b.bytes===String?T.value="":(T.value=[],b.bytes!==Array&&(T.value=a.newBuffer(T.value)))),n.value!=null&&n.hasOwnProperty("value")&&(T.value=b.bytes===String?a.base64.encode(n.value,0,n.value.length):b.bytes===Array?Array.prototype.slice.call(n.value):n.value),T},yo.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},yo.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.BytesValue"},yo),u.Empty=(wo.fromObject=function(n){return n instanceof o.google.protobuf.Empty?n:new o.google.protobuf.Empty},wo.toObject=function(){return{}},wo.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},wo.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Empty"},wo),u.Any=(Zn.prototype.type_url="",Zn.prototype.value=a.newBuffer([]),Zn.fromObject=function(n){var b;return n instanceof o.google.protobuf.Any?n:(b=new o.google.protobuf.Any,n.type_url!=null&&(b.type_url=String(n.type_url)),n.value!=null&&(typeof n.value=="string"?a.base64.decode(n.value,b.value=a.newBuffer(a.base64.length(n.value)),0):0<=n.value.length&&(b.value=n.value)),b)},Zn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.type_url="",b.bytes===String?T.value="":(T.value=[],b.bytes!==Array&&(T.value=a.newBuffer(T.value)))),n.type_url!=null&&n.hasOwnProperty("type_url")&&(T.type_url=n.type_url),n.value!=null&&n.hasOwnProperty("value")&&(T.value=b.bytes===String?a.base64.encode(n.value,0,n.value.length):b.bytes===Array?Array.prototype.slice.call(n.value):n.value),T},Zn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Zn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.Any"},Zn),u.FieldMask=(qi.prototype.paths=a.emptyArray,qi.fromObject=function(n){if(n instanceof o.google.protobuf.FieldMask)return n;var b=new o.google.protobuf.FieldMask;if(n.paths){if(!Array.isArray(n.paths))throw TypeError(".google.protobuf.FieldMask.paths: array expected");b.paths=[];for(var T=0;T<n.paths.length;++T)b.paths[T]=String(n.paths[T])}return b},qi.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.paths=[]),n.paths&&n.paths.length){T.paths=[];for(var Ne=0;Ne<n.paths.length;++Ne)T.paths[Ne]=n.paths[Ne]}return T},qi.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},qi.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.protobuf.FieldMask"},qi),u),c.type=((r={}).LatLng=(Ci.prototype.latitude=0,Ci.prototype.longitude=0,Ci.fromObject=function(n){var b;return n instanceof o.google.type.LatLng?n:(b=new o.google.type.LatLng,n.latitude!=null&&(b.latitude=Number(n.latitude)),n.longitude!=null&&(b.longitude=Number(n.longitude)),b)},Ci.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.latitude=0,T.longitude=0),n.latitude!=null&&n.hasOwnProperty("latitude")&&(T.latitude=b.json&&!isFinite(n.latitude)?String(n.latitude):n.latitude),n.longitude!=null&&n.hasOwnProperty("longitude")&&(T.longitude=b.json&&!isFinite(n.longitude)?String(n.longitude):n.longitude),T},Ci.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ci.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.type.LatLng"},Ci),r.DayOfWeek=(m={},(d=Object.create(m))[m[0]="DAY_OF_WEEK_UNSPECIFIED"]="DAY_OF_WEEK_UNSPECIFIED",d[m[1]="MONDAY"]="MONDAY",d[m[2]="TUESDAY"]="TUESDAY",d[m[3]="WEDNESDAY"]="WEDNESDAY",d[m[4]="THURSDAY"]="THURSDAY",d[m[5]="FRIDAY"]="FRIDAY",d[m[6]="SATURDAY"]="SATURDAY",d[m[7]="SUNDAY"]="SUNDAY",d),r),c.rpc=((u={}).Status=(li.prototype.code=0,li.prototype.message="",li.prototype.details=a.emptyArray,li.fromObject=function(n){if(n instanceof o.google.rpc.Status)return n;var b=new o.google.rpc.Status;if(n.code!=null&&(b.code=0|n.code),n.message!=null&&(b.message=String(n.message)),n.details){if(!Array.isArray(n.details))throw TypeError(".google.rpc.Status.details: array expected");b.details=[];for(var T=0;T<n.details.length;++T){if(typeof n.details[T]!="object")throw TypeError(".google.rpc.Status.details: object expected");b.details[T]=o.google.protobuf.Any.fromObject(n.details[T])}}return b},li.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.details=[]),b.defaults&&(T.code=0,T.message=""),n.code!=null&&n.hasOwnProperty("code")&&(T.code=n.code),n.message!=null&&n.hasOwnProperty("message")&&(T.message=n.message),n.details&&n.details.length){T.details=[];for(var Ne=0;Ne<n.details.length;++Ne)T.details[Ne]=o.google.protobuf.Any.toObject(n.details[Ne],b)}return T},li.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},li.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.rpc.Status"},li),u),c.longrunning=((m={}).Operations=((ui.prototype=Object.create(e.rpc.Service.prototype)).constructor=ui,Object.defineProperty(ui.prototype.listOperations=function n(b,T){return this.rpcCall(n,o.google.longrunning.ListOperationsRequest,o.google.longrunning.ListOperationsResponse,b,T)},"name",{value:"ListOperations"}),Object.defineProperty(ui.prototype.getOperation=function n(b,T){return this.rpcCall(n,o.google.longrunning.GetOperationRequest,o.google.longrunning.Operation,b,T)},"name",{value:"GetOperation"}),Object.defineProperty(ui.prototype.deleteOperation=function n(b,T){return this.rpcCall(n,o.google.longrunning.DeleteOperationRequest,o.google.protobuf.Empty,b,T)},"name",{value:"DeleteOperation"}),Object.defineProperty(ui.prototype.cancelOperation=function n(b,T){return this.rpcCall(n,o.google.longrunning.CancelOperationRequest,o.google.protobuf.Empty,b,T)},"name",{value:"CancelOperation"}),Object.defineProperty(ui.prototype.waitOperation=function n(b,T){return this.rpcCall(n,o.google.longrunning.WaitOperationRequest,o.google.longrunning.Operation,b,T)},"name",{value:"WaitOperation"}),ui),m.Operation=(Qe.prototype.name="",Qe.prototype.metadata=null,Qe.prototype.done=!1,Qe.prototype.error=null,Qe.prototype.response=null,Object.defineProperty(Qe.prototype,"result",{get:a.oneOfGetter(d=["error","response"]),set:a.oneOfSetter(d)}),Qe.fromObject=function(n){if(n instanceof o.google.longrunning.Operation)return n;var b=new o.google.longrunning.Operation;if(n.name!=null&&(b.name=String(n.name)),n.metadata!=null){if(typeof n.metadata!="object")throw TypeError(".google.longrunning.Operation.metadata: object expected");b.metadata=o.google.protobuf.Any.fromObject(n.metadata)}if(n.done!=null&&(b.done=!!n.done),n.error!=null){if(typeof n.error!="object")throw TypeError(".google.longrunning.Operation.error: object expected");b.error=o.google.rpc.Status.fromObject(n.error)}if(n.response!=null){if(typeof n.response!="object")throw TypeError(".google.longrunning.Operation.response: object expected");b.response=o.google.protobuf.Any.fromObject(n.response)}return b},Qe.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.metadata=null,T.done=!1),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.metadata!=null&&n.hasOwnProperty("metadata")&&(T.metadata=o.google.protobuf.Any.toObject(n.metadata,b)),n.done!=null&&n.hasOwnProperty("done")&&(T.done=n.done),n.error!=null&&n.hasOwnProperty("error")&&(T.error=o.google.rpc.Status.toObject(n.error,b),b.oneofs)&&(T.result="error"),n.response!=null&&n.hasOwnProperty("response")&&(T.response=o.google.protobuf.Any.toObject(n.response,b),b.oneofs)&&(T.result="response"),T},Qe.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Qe.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.Operation"},Qe),m.GetOperationRequest=(Nt.prototype.name="",Nt.fromObject=function(n){var b;return n instanceof o.google.longrunning.GetOperationRequest?n:(b=new o.google.longrunning.GetOperationRequest,n.name!=null&&(b.name=String(n.name)),b)},Nt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name=""),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),T},Nt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Nt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.GetOperationRequest"},Nt),m.ListOperationsRequest=(Dt.prototype.name="",Dt.prototype.filter="",Dt.prototype.pageSize=0,Dt.prototype.pageToken="",Dt.fromObject=function(n){var b;return n instanceof o.google.longrunning.ListOperationsRequest?n:(b=new o.google.longrunning.ListOperationsRequest,n.name!=null&&(b.name=String(n.name)),n.filter!=null&&(b.filter=String(n.filter)),n.pageSize!=null&&(b.pageSize=0|n.pageSize),n.pageToken!=null&&(b.pageToken=String(n.pageToken)),b)},Dt.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.filter="",T.pageSize=0,T.pageToken="",T.name=""),n.filter!=null&&n.hasOwnProperty("filter")&&(T.filter=n.filter),n.pageSize!=null&&n.hasOwnProperty("pageSize")&&(T.pageSize=n.pageSize),n.pageToken!=null&&n.hasOwnProperty("pageToken")&&(T.pageToken=n.pageToken),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),T},Dt.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Dt.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.ListOperationsRequest"},Dt),m.ListOperationsResponse=(Ar.prototype.operations=a.emptyArray,Ar.prototype.nextPageToken="",Ar.fromObject=function(n){if(n instanceof o.google.longrunning.ListOperationsResponse)return n;var b=new o.google.longrunning.ListOperationsResponse;if(n.operations){if(!Array.isArray(n.operations))throw TypeError(".google.longrunning.ListOperationsResponse.operations: array expected");b.operations=[];for(var T=0;T<n.operations.length;++T){if(typeof n.operations[T]!="object")throw TypeError(".google.longrunning.ListOperationsResponse.operations: object expected");b.operations[T]=o.google.longrunning.Operation.fromObject(n.operations[T])}}return n.nextPageToken!=null&&(b.nextPageToken=String(n.nextPageToken)),b},Ar.toObject=function(n,b){var T={};if(((b=b||{}).arrays||b.defaults)&&(T.operations=[]),b.defaults&&(T.nextPageToken=""),n.operations&&n.operations.length){T.operations=[];for(var Ne=0;Ne<n.operations.length;++Ne)T.operations[Ne]=o.google.longrunning.Operation.toObject(n.operations[Ne],b)}return n.nextPageToken!=null&&n.hasOwnProperty("nextPageToken")&&(T.nextPageToken=n.nextPageToken),T},Ar.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Ar.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.ListOperationsResponse"},Ar),m.CancelOperationRequest=(Hn.prototype.name="",Hn.fromObject=function(n){var b;return n instanceof o.google.longrunning.CancelOperationRequest?n:(b=new o.google.longrunning.CancelOperationRequest,n.name!=null&&(b.name=String(n.name)),b)},Hn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name=""),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),T},Hn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Hn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.CancelOperationRequest"},Hn),m.DeleteOperationRequest=(Jn.prototype.name="",Jn.fromObject=function(n){var b;return n instanceof o.google.longrunning.DeleteOperationRequest?n:(b=new o.google.longrunning.DeleteOperationRequest,n.name!=null&&(b.name=String(n.name)),b)},Jn.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name=""),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),T},Jn.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},Jn.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.DeleteOperationRequest"},Jn),m.WaitOperationRequest=(di.prototype.name="",di.prototype.timeout=null,di.fromObject=function(n){if(n instanceof o.google.longrunning.WaitOperationRequest)return n;var b=new o.google.longrunning.WaitOperationRequest;if(n.name!=null&&(b.name=String(n.name)),n.timeout!=null){if(typeof n.timeout!="object")throw TypeError(".google.longrunning.WaitOperationRequest.timeout: object expected");b.timeout=o.google.protobuf.Duration.fromObject(n.timeout)}return b},di.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.name="",T.timeout=null),n.name!=null&&n.hasOwnProperty("name")&&(T.name=n.name),n.timeout!=null&&n.hasOwnProperty("timeout")&&(T.timeout=o.google.protobuf.Duration.toObject(n.timeout,b)),T},di.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},di.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.WaitOperationRequest"},di),m.OperationInfo=(ei.prototype.responseType="",ei.prototype.metadataType="",ei.fromObject=function(n){var b;return n instanceof o.google.longrunning.OperationInfo?n:(b=new o.google.longrunning.OperationInfo,n.responseType!=null&&(b.responseType=String(n.responseType)),n.metadataType!=null&&(b.metadataType=String(n.metadataType)),b)},ei.toObject=function(n,b){var T={};return(b=b||{}).defaults&&(T.responseType="",T.metadataType=""),n.responseType!=null&&n.hasOwnProperty("responseType")&&(T.responseType=n.responseType),n.metadataType!=null&&n.hasOwnProperty("metadataType")&&(T.metadataType=n.metadataType),T},ei.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},ei.getTypeUrl=function(n){return(n=n===void 0?"type.googleapis.com":n)+"/google.longrunning.OperationInfo"},ei),m),c),o})}(firestore_v1_proto_api)),firestore_v1_proto_api.exports}var hasRequiredBundle;function requireBundle(){if(hasRequiredBundle)return bundle;hasRequiredBundle=1,Object.defineProperty(bundle,"__esModule",{value:!0}),bundle.BundleBuilder=void 0;const t=requireDocument(),e=requireQuerySnapshot(),r=requireTimestamp(),u=requireValidate(),d=1;class m{constructor(s){this.bundleId=s,this.documents=new Map,this.namedQueries=new Map,this.latestReadTime=new r.Timestamp(0,0)}add(s,h){return(0,u.validateMinNumberOfArguments)("BundleBuilder.add",arguments,1),(0,u.validateMaxNumberOfArguments)("BundleBuilder.add",arguments,2),arguments.length===1?(c("documentOrName",s),this.addBundledDocument(s)):((0,u.validateString)("documentOrName",s),a("querySnapshot",h),this.addNamedQuery(s,h)),this}addBundledDocument(s,h){const v=this.documents.get(s.ref.path),E=v?.metadata.queries;if(!v||r.Timestamp.fromProto(v.metadata.readTime)<s.readTime){const A=s.toDocumentProto();this.documents.set(s.ref.path,{document:s.exists?A:void 0,metadata:{name:A.name,readTime:s.readTime.toProto().timestampValue,exists:s.exists}})}const y=this.documents.get(s.ref.path);y.metadata.queries=E||[],h&&y.metadata.queries.push(h),s.readTime>this.latestReadTime&&(this.latestReadTime=s.readTime)}addNamedQuery(s,h){if(this.namedQueries.has(s))throw new Error(`Query name conflict: ${s} has already been added.`);this.namedQueries.set(s,{name:s,bundledQuery:h.query._toBundledQuery(),readTime:h.readTime.toProto().timestampValue});for(const v of h.docs)this.addBundledDocument(v,s);h.readTime>this.latestReadTime&&(this.latestReadTime=h.readTime)}elementToLengthPrefixedBuffer(s){const h=requireFirestore_v1_proto_api().firestore.BundleElement.fromObject(s).toJSON(),v=Buffer.from(JSON.stringify(h),"utf-8"),E=Buffer.from(v.length.toString());return Buffer.concat([E,v])}build(){let s=Buffer.alloc(0);for(const v of this.namedQueries.values())s=Buffer.concat([s,this.elementToLengthPrefixedBuffer({namedQuery:v})]);for(const v of this.documents.values()){const E=v.metadata;s=Buffer.concat([s,this.elementToLengthPrefixedBuffer({documentMetadata:E})]);const y=v.document;y&&(s=Buffer.concat([s,this.elementToLengthPrefixedBuffer({document:y})]))}const h={id:this.bundleId,createTime:this.latestReadTime.toProto().timestampValue,version:d,totalDocuments:this.documents.size,totalBytes:s.length};return s=Buffer.concat([this.elementToLengthPrefixedBuffer({metadata:h}),s]),s}}bundle.BundleBuilder=m;function c(o,s){if(!(s instanceof t.DocumentSnapshot))throw new Error((0,u.invalidArgumentMessage)(o,"DocumentSnapshot"))}function a(o,s){if(!(s instanceof e.QuerySnapshot))throw new Error((0,u.invalidArgumentMessage)(o,"QuerySnapshot"))}return bundle}var documentReader={},hasRequiredDocumentReader;function requireDocumentReader(){if(hasRequiredDocumentReader)return documentReader;hasRequiredDocumentReader=1;/*!
 * Copyright 2021 Google LLC. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(documentReader,"__esModule",{value:!0}),documentReader.DocumentReader=void 0;const t=requireDocument(),e=requireUtil(),r=requireLogger(),u=requireTimestamp();class d{constructor(c,a,o,s){this.firestore=c,this.allDocuments=a,this.fieldMask=o,this.transactionOrReadTime=s,this.outstandingDocuments=new Set,this.retrievedDocuments=new Map;for(const h of this.allDocuments)this.outstandingDocuments.add(h.formattedName)}async get(c){const{result:a}=await this._get(c);return a}async _get(c){await this.fetchDocuments(c);const a=[];for(const o of this.allDocuments){const s=this.retrievedDocuments.get(o.formattedName);if(s!==void 0){const h=new t.DocumentSnapshotBuilder(o);h.fieldsProto=s._fieldsProto,h.readTime=s.readTime,h.createTime=s.createTime,h.updateTime=s.updateTime,a.push(h.build())}else throw new Error(`Did not receive document for "${o.path}".`)}return{result:a,transaction:this.retrievedTransactionId}}async fetchDocuments(c){var a;if(!this.outstandingDocuments.size)return;const o={database:this.firestore.formattedName,documents:Array.from(this.outstandingDocuments)};if(this.transactionOrReadTime instanceof Uint8Array?o.transaction=this.transactionOrReadTime:this.transactionOrReadTime instanceof u.Timestamp?o.readTime=this.transactionOrReadTime.toProto().timestampValue:this.transactionOrReadTime&&(o.newTransaction=this.transactionOrReadTime),this.fieldMask){const h=this.fieldMask.map(v=>v.formattedName);o.mask={fieldPaths:h}}let s=0;try{const h=await this.firestore.requestStream("batchGetDocuments",!1,o,c);h.resume();for await(const v of h){!((a=v.transaction)===null||a===void 0)&&a.length&&(this.retrievedTransactionId=v.transaction);let E;if(v.found?((0,r.logger)("DocumentReader.fetchDocuments",c,"Received document: %s",v.found.name),E=this.firestore.snapshot_(v.found,v.readTime)):v.missing&&((0,r.logger)("DocumentReader.fetchDocuments",c,"Document missing: %s",v.missing),E=this.firestore.snapshot_(v.missing,v.readTime)),E){const y=E.ref.formattedName;this.outstandingDocuments.delete(y),this.retrievedDocuments.set(y,E),++s}}}catch(h){const v=!o.transaction&&!o.newTransaction&&s>0&&h.code!==void 0&&!(0,e.isPermanentRpcError)(h,"batchGetDocuments");if((0,r.logger)("DocumentReader.fetchDocuments",c,"BatchGetDocuments failed with error: %s. Retrying: %s",h,v),v)return this.fetchDocuments(c);throw h}finally{(0,r.logger)("DocumentReader.fetchDocuments",c,"Received %d results",s)}}}return documentReader.DocumentReader=d,documentReader}var pool={},hasRequiredPool;function requirePool(){return hasRequiredPool||(hasRequiredPool=1,function(t){/*!
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.ClientPool=t.CLIENT_TERMINATED_ERROR_MSG=void 0;const e=require$$1$3,r=requireLogger(),u=requireUtil();t.CLIENT_TERMINATED_ERROR_MSG="The client has already been terminated";class d{constructor(c,a,o,s=()=>Promise.resolve()){this.concurrentOperationLimit=c,this.maxIdleClients=a,this.clientFactory=o,this.clientDestructor=s,this.grpcEnabled=!1,this.activeClients=new Map,this.failedClients=new Set,this.terminated=!1,this.terminateDeferred=new u.Deferred}acquire(c,a){let o=null,s=-1;this.grpcEnabled=this.grpcEnabled||a,a=a||this.grpcEnabled;for(const[h,v]of this.activeClients)!this.failedClients.has(h)&&v.activeRequestCount>s&&v.activeRequestCount<this.concurrentOperationLimit&&(v.grpcEnabled||!a)&&(o=h,s=v.activeRequestCount);return o?(0,r.logger)("ClientPool.acquire",c,"Re-using existing client with %s remaining operations",this.concurrentOperationLimit-s):((0,r.logger)("ClientPool.acquire",c,"Creating a new client (requiresGrpc: %s)",a),o=this.clientFactory(a),s=0,e(!this.activeClients.has(o),"The provided client factory returned an existing instance")),this.activeClients.set(o,{grpcEnabled:a,activeRequestCount:s+1}),o}async release(c,a){const o=this.activeClients.get(a);e(o&&o.activeRequestCount>0,"No active requests"),this.activeClients.set(a,{grpcEnabled:o.grpcEnabled,activeRequestCount:o.activeRequestCount-1}),this.terminated&&this.opCount===0&&this.terminateDeferred.resolve(),this.shouldGarbageCollectClient(a)&&(this.activeClients.delete(a),this.failedClients.delete(a),await this.clientDestructor(a),(0,r.logger)("ClientPool.release",c,"Garbage collected 1 client"))}shouldGarbageCollectClient(c){const a=this.activeClients.get(c);if(a.activeRequestCount!==0)return!1;if(this.grpcEnabled!==a.grpcEnabled||this.failedClients.has(c))return!0;let o=0;for(const[,s]of this.activeClients)o+=this.concurrentOperationLimit-s.activeRequestCount;return o>this.maxIdleClients*this.concurrentOperationLimit}get size(){return this.activeClients.size}get opCount(){let c=0;return this.activeClients.forEach(a=>c+=a.activeRequestCount),c}get _activeClients(){return this.activeClients}run(c,a,o){if(this.terminated)return Promise.reject(new Error(t.CLIENT_TERMINATED_ERROR_MSG));const s=this.acquire(c,a);return o(s).catch(async h=>{var v;return!((v=h.message)===null||v===void 0)&&v.match(/RST_STREAM/)&&this.failedClients.add(s),await this.release(c,s),Promise.reject(h)}).then(async h=>(await this.release(c,s),h))}async terminate(){this.terminated=!0,this.opCount>0&&((0,r.logger)("ClientPool.terminate",null,"Waiting for %s pending operations to complete before terminating",this.opCount),await this.terminateDeferred.promise);for(const[c]of this.activeClients)this.activeClients.delete(c),await this.clientDestructor(c)}}t.ClientPool=d}(pool)),pool}var transaction={},hasRequiredTransaction;function requireTransaction(){if(hasRequiredTransaction)return transaction;hasRequiredTransaction=1;/*!
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(transaction,"__esModule",{value:!0}),transaction.Transaction=void 0,transaction.parseGetAllArguments=w;const t=requireBackoff(),e=requireSrc(),r=requireLogger(),u=requirePath(),d=requireAggregateQuery(),m=requireDocumentReference(),c=requireQuery(),a=requireHelpers(),o=requireUtil(),s=requireValidate(),h=requireDocumentReader(),v=requireTraceUtil();/*!
 * Error message for transactional reads that were executed after performing
 * writes.
 */const E="Firestore transactions require all reads to be executed before all writes.",y="Firestore read-only transactions cannot execute writes.";class A{constructor(K,J,H){this._maxAttempts=e.DEFAULT_MAX_TRANSACTION_ATTEMPTS,this._firestore=K,this._requestTag=J,H?.readOnly?(this._maxAttempts=1,this._readOnlyReadTime=H.readTime):(this._maxAttempts=H?.maxAttempts||e.DEFAULT_MAX_TRANSACTION_ATTEMPTS,this._writeBatch=K.batch(),this._backoff=new t.ExponentialBackoff)}get(K){if(this._writeBatch&&!this._writeBatch.isEmpty)throw new Error(E);if(K instanceof m.DocumentReference)return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_GET_DOCUMENT,()=>this.withLazyStartedTransaction(K,this.getSingleFn));if(K instanceof c.Query||K instanceof d.AggregateQuery)return this._firestore._traceUtil.startActiveSpan(K instanceof c.Query?v.SPAN_NAME_TRANSACTION_GET_QUERY:v.SPAN_NAME_TRANSACTION_GET_AGGREGATION_QUERY,()=>this.withLazyStartedTransaction(K,this.getQueryFn));throw new Error('Value for argument "refOrQuery" must be a DocumentReference, Query, or AggregateQuery.')}getAll(...K){if(this._writeBatch&&!this._writeBatch.isEmpty)throw new Error(E);return(0,s.validateMinNumberOfArguments)("Transaction.getAll",K,1),this.withLazyStartedTransaction(w(K),this.getBatchFn)}create(K,J){if(!this._writeBatch)throw new Error(y);return this._writeBatch.create(K,J),this}set(K,J,H){if(!this._writeBatch)throw new Error(y);return H?this._writeBatch.set(K,J,H):this._writeBatch.set(K,J),this}update(K,J,...H){if(!this._writeBatch)throw new Error(y);return(0,s.validateMinNumberOfArguments)("Transaction.update",arguments,2),this._writeBatch.update(K,J,...H),this}delete(K,J){if(!this._writeBatch)throw new Error(y);return this._writeBatch.delete(K,J),this}async commit(){var K;return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_COMMIT,async()=>{if(!this._writeBatch)throw new Error(y);let J;if(this._transactionIdPromise)J=await this._transactionIdPromise;else if(this._writeBatch.isEmpty)return;await this._writeBatch._commit({transactionId:J,requestTag:this._requestTag}),this._transactionIdPromise=void 0,this._prevTransactionId=J},{[v.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!0,[v.ATTRIBUTE_KEY_DOC_COUNT]:(K=this._writeBatch)===null||K===void 0?void 0:K._opCount})}async rollback(){return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_ROLLBACK,async()=>{if(!this._transactionIdPromise||!this._writeBatch)return;let K;try{K=await this._transactionIdPromise}catch{this._transactionIdPromise=void 0;return}const J={database:this._firestore.formattedName,transaction:K};this._transactionIdPromise=void 0,this._prevTransactionId=K,this._firestore.request("rollback",J,this._requestTag).catch(H=>{(0,r.logger)("Firestore.runTransaction",this._requestTag,"Best effort to rollback failed with error:",H)})})}async runTransaction(K){return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_RUN,async J=>{if(!this._writeBatch)return this.runTransactionOnce(K);let H;for(let U=0;U<this._maxAttempts;++U){J.setAttributes({[v.ATTRIBUTE_KEY_TRANSACTION_TYPE]:this._writeBatch?"READ_WRITE":"READ_ONLY",[v.ATTRIBUTE_KEY_ATTEMPTS_ALLOWED]:this._maxAttempts,[v.ATTRIBUTE_KEY_ATTEMPTS_REMAINING]:this._maxAttempts-U-1});try{return H&&((0,r.logger)("Firestore.runTransaction",this._requestTag,"Retrying transaction after error:",H),J.addEvent("Initiate transaction retry")),this._writeBatch._reset(),await S(this._backoff,H),await this.runTransactionOnce(K)}catch(P){if(H=P,!_(P))break}}return(0,r.logger)("Firestore.runTransaction",this._requestTag,"Transaction not eligible for retry, returning error: %s",H),Promise.reject(H)})}async runTransactionOnce(K){try{const J=K(this);if(!(J instanceof Promise))throw new Error("You must return a Promise in your transaction()-callback.");const H=await J;return this._writeBatch&&await this.commit(),H}catch(J){return(0,r.logger)("Firestore.runTransaction",this._requestTag,"Rolling back transaction after callback error:",J),await this.rollback(),Promise.reject(J)}}withLazyStartedTransaction(K,J){if(this._transactionIdPromise)return this._transactionIdPromise.then(H=>J.call(this,K,H)).then(H=>H.result);if(this._readOnlyReadTime)return J.call(this,K,this._readOnlyReadTime).then(H=>H.result);{const H={};this._writeBatch?H.readWrite=this._prevTransactionId?{retryTransaction:this._prevTransactionId}:{}:H.readOnly={};const U=J.call(this,K,H);return this._transactionIdPromise=U.then(P=>{if(!P.transaction)throw new Error("Transaction ID was missing from server response");return P.transaction}),U.then(P=>P.result)}}async getSingleFn(K,J){const H=new h.DocumentReader(this._firestore,[K],void 0,J),{transaction:U,result:[P]}=await H._get(this._requestTag);return{transaction:U,result:P}}async getBatchFn({documents:K,fieldMask:J},H){return this._firestore._traceUtil.startActiveSpan(v.SPAN_NAME_TRANSACTION_GET_DOCUMENTS,async()=>new h.DocumentReader(this._firestore,K,J,H)._get(this._requestTag))}async getQueryFn(K,J){return K._get(J)}}transaction.Transaction=A;function w(j){let K,J;if(Array.isArray(j[0]))throw new Error("getAll() no longer accepts an array as its first argument. Please unpack your array and call getAll() with individual arguments.");j.length>0&&(0,o.isPlainObject)(j[j.length-1])&&(J=j.pop()),K=j;for(let U=0;U<K.length;++U)(0,a.validateDocumentReference)(U,K[U]);return I("options",J,{optional:!0}),{fieldMask:J&&J.fieldMask?J.fieldMask.map(U=>u.FieldPath.fromArgument(U)):void 0,documents:K}}function I(j,K,J){if(!(0,s.validateOptional)(K,J)){if(!(0,o.isObject)(K))throw new Error(`${(0,s.invalidArgumentMessage)(j,"read option")} Input is not an object.'`);const H=K;if(H.fieldMask!==void 0){if(!Array.isArray(H.fieldMask))throw new Error(`${(0,s.invalidArgumentMessage)(j,"read option")} "fieldMask" is not an array.`);for(let U=0;U<H.fieldMask.length;++U)try{(0,u.validateFieldPath)(U,H.fieldMask[U])}catch(P){throw new Error(`${(0,s.invalidArgumentMessage)(j,"read option")} "fieldMask" is not valid: ${P.message}`)}}}}function _(j){if(j.code!==void 0)switch(j.code){case 10:case 1:case 2:case 4:case 13:case 14:case 16:case 8:return!0;case 3:return!!j.message.match(/transaction has expired/);default:return!1}return!1}async function S(j,K){K?.code===8&&j.resetToMax(),await j.backoffAndWait()}return transaction}var collectionGroup={},queryPartition={},hasRequiredQueryPartition;function requireQueryPartition(){if(hasRequiredQueryPartition)return queryPartition;hasRequiredQueryPartition=1,Object.defineProperty(queryPartition,"__esModule",{value:!0}),queryPartition.QueryPartition=void 0;const t=requireFieldOrder(),e=requireQuery(),r=requireQueryOptions(),u=requirePath(),d=requireSerializer();class m{constructor(a,o,s,h,v){this._firestore=a,this._collectionId=o,this._converter=s,this._startAt=h,this._endBefore=v,this._serializer=new d.Serializer(a)}get startAt(){return this._startAt&&!this._memoizedStartAt&&(this._memoizedStartAt=this._startAt.map(a=>this._serializer.decodeValue(a))),this._memoizedStartAt}get endBefore(){return this._endBefore&&!this._memoizedEndBefore&&(this._memoizedEndBefore=this._endBefore.map(a=>this._serializer.decodeValue(a))),this._memoizedEndBefore}toQuery(){let a=r.QueryOptions.forCollectionGroupQuery(this._collectionId,this._converter);return a=a.with({fieldOrders:[new t.FieldOrder(u.FieldPath.documentId())]}),this._startAt!==void 0&&(a=a.with({startAt:{before:!0,values:this._startAt}})),this._endBefore!==void 0&&(a=a.with({endAt:{before:!0,values:this._endBefore}})),new e.Query(this._firestore,a)}}return queryPartition.QueryPartition=m,queryPartition}var hasRequiredCollectionGroup;function requireCollectionGroup(){if(hasRequiredCollectionGroup)return collectionGroup;hasRequiredCollectionGroup=1,Object.defineProperty(collectionGroup,"__esModule",{value:!0}),collectionGroup.CollectionGroup=void 0;const t=requireQueryPartition(),e=requireUtil(),r=requireLogger(),u=requireQuery(),d=requireQueryOptions(),m=requirePath(),c=requireValidate(),a=requireTypes$1(),o=requireOrder(),s=requireTraceUtil();class h extends u.Query{constructor(E,y,A){super(E,d.QueryOptions.forCollectionGroupQuery(y,A))}async*getPartitions(E){const y=[];await this._firestore._traceUtil.startActiveSpan(s.SPAN_NAME_PARTITION_QUERY,async()=>{var A;(0,c.validateInteger)("desiredPartitionCount",E,{minValue:1});const w=(0,e.requestTag)();if(await this.firestore.initializeIfNeeded(w),E>1){const _=this.orderBy(m.FieldPath.documentId()).toProto();_.partitionCount=E-1;const S=await this.firestore.requestStream("partitionQueryStream",!1,_,w);S.resume();for await(const j of S)y.push((A=j.values)!==null&&A!==void 0?A:[])}(0,r.logger)("Firestore.getPartitions",w,"Received %d partitions",y.length),y.sort((I,_)=>(0,o.compareArrays)(I,_))});for(let A=0;A<y.length;++A)yield new t.QueryPartition(this._firestore,this._queryOptions.collectionId,this._queryOptions.converter,A>0?y[A-1]:void 0,y[A]);yield new t.QueryPartition(this._firestore,this._queryOptions.collectionId,this._queryOptions.converter,y.pop(),void 0)}withConverter(E){return new h(this.firestore,this._queryOptions.collectionId,E??(0,a.defaultConverter)())}}return collectionGroup.CollectionGroup=h,collectionGroup}var recursiveDelete={},hasRequiredRecursiveDelete;function requireRecursiveDelete(){return hasRequiredRecursiveDelete||(hasRequiredRecursiveDelete=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecursiveDelete=t.RECURSIVE_DELETE_MIN_PENDING_OPS=t.RECURSIVE_DELETE_MAX_PENDING_OPS=t.REFERENCE_NAME_MIN_ID=void 0;const e=require$$1$3,r=requireSrc(),u=requireUtil(),d=requireQueryOptions();/*!
 * Datastore allowed numeric IDs where Firestore only allows strings. Numeric
 * IDs are exposed to Firestore as __idNUM__, so this is the lowest possible
 * negative numeric value expressed in that format.
 *
 * This constant is used to specify startAt/endAt values when querying for all
 * descendants in a single collection.
 */t.REFERENCE_NAME_MIN_ID="__id-9223372036854775808__";/*!
 * The query limit used for recursive deletes when fetching all descendants of
 * the specified reference to delete. This is done to prevent the query stream
 * from streaming documents faster than Firestore can delete.
 */t.RECURSIVE_DELETE_MAX_PENDING_OPS=5e3;/*!
 * The number of pending BulkWriter operations at which RecursiveDelete
 * starts the next limit query to fetch descendants. By starting the query
 * while there are pending operations, Firestore can improve BulkWriter
 * throughput. This helps prevent BulkWriter from idling while Firestore
 * fetches the next query.
 */t.RECURSIVE_DELETE_MIN_PENDING_OPS=1e3;class m{constructor(a,o,s,h,v){this.firestore=a,this.writer=o,this.ref=s,this.maxLimit=h,this.minLimit=v,this.errorCount=0,this.documentsPending=!0,this.started=!1,this.completionDeferred=new u.Deferred,this.streamInProgress=!1,this.pendingOpsCount=0,this.errorStack="",this.maxPendingOps=h,this.minPendingOps=v}run(){return e(!this.started,"RecursiveDelete.run() should only be called once."),this.errorStack=Error().stack,this.writer._verifyNotClosed(),this.setupStream(),this.completionDeferred.promise}setupStream(){const a=this.getAllDescendants(this.ref instanceof r.CollectionReference?this.ref:this.ref);this.streamInProgress=!0;let o=0;a.on("error",s=>{s.code=14,s.stack="Failed to fetch children documents: "+s.stack,this.lastError=s,this.onQueryEnd()}).on("data",s=>{o++,this.lastDocumentSnap=s,this.deleteRef(s.ref)}).on("end",()=>{this.streamInProgress=!1,o<this.minPendingOps?this.onQueryEnd():this.pendingOpsCount===0&&this.setupStream()})}getAllDescendants(a){let o=a._resourcePath;a instanceof r.CollectionReference&&(o=o.popLast());const s=a instanceof r.CollectionReference?a.id:a.parent.id;let h=new r.Query(this.firestore,d.QueryOptions.forKindlessAllDescendants(o,s,!1));if(h=h.select(r.FieldPath.documentId()).limit(this.maxPendingOps),a instanceof r.CollectionReference){const v="\0",E=s+"/"+t.REFERENCE_NAME_MIN_ID,y=s+v+"/"+t.REFERENCE_NAME_MIN_ID;h=h.where(r.FieldPath.documentId(),">=",E).where(r.FieldPath.documentId(),"<",y)}return this.lastDocumentSnap&&(h=h.startAfter(this.lastDocumentSnap)),h.stream()}onQueryEnd(){this.documentsPending=!1,this.ref instanceof r.DocumentReference&&this.writer.delete(this.ref).catch(a=>this.incrementErrorCount(a)),this.writer.flush().then(async()=>{var a;if(this.lastError===void 0)this.completionDeferred.resolve();else{let o=new(requireFallback()).GoogleError(`${this.errorCount} ${this.errorCount!==1?"deletes":"delete"} failed. The last delete failed with: `);this.lastError.code!==void 0&&(o.code=this.lastError.code),o=(0,u.wrapError)(o,this.errorStack),this.completionDeferred.reject(this.lastError.stack?(0,u.wrapError)(o,(a=this.lastError.stack)!==null&&a!==void 0?a:""):o)}})}deleteRef(a){this.pendingOpsCount++,this.writer.delete(a).catch(o=>{this.incrementErrorCount(o)}).then(()=>{this.pendingOpsCount--,this.documentsPending&&!this.streamInProgress&&this.pendingOpsCount<this.minPendingOps&&this.setupStream()})}incrementErrorCount(a){this.errorCount++,this.lastError=a}}t.RecursiveDelete=m}(recursiveDelete)),recursiveDelete}var disabledTraceUtil={},span={},hasRequiredSpan;function requireSpan(){if(hasRequiredSpan)return span;hasRequiredSpan=1,Object.defineProperty(span,"__esModule",{value:!0}),span.Span=void 0;class t{constructor(r){this.span=r}end(){var r;(r=this.span)===null||r===void 0||r.end()}addEvent(r,u){var d;return this.span=(d=this.span)===null||d===void 0?void 0:d.addEvent(r,u),this}setAttributes(r){var u;return this.span=(u=this.span)===null||u===void 0?void 0:u.setAttributes(r),this}}return span.Span=t,span}var hasRequiredDisabledTraceUtil;function requireDisabledTraceUtil(){if(hasRequiredDisabledTraceUtil)return disabledTraceUtil;hasRequiredDisabledTraceUtil=1,Object.defineProperty(disabledTraceUtil,"__esModule",{value:!0}),disabledTraceUtil.DisabledTraceUtil=void 0;const t=requireSpan();class e{startSpan(u){return new t.Span}startActiveSpan(u,d,m){const c=new t.Span;return d(c)}currentSpan(){return new t.Span}recordProjectId(u){}}return disabledTraceUtil.DisabledTraceUtil=e,disabledTraceUtil}var enabledTraceUtil={},_globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},VERSION="1.9.0",re=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _makeCompatibilityCheck(t){var e=new Set([t]),r=new Set,u=t.match(re);if(!u)return function(){return!1};var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};if(d.prerelease!=null)return function(o){return o===t};function m(a){return r.add(a),!1}function c(a){return e.add(a),!0}return function(o){if(e.has(o))return!0;if(r.has(o))return!1;var s=o.match(re);if(!s)return m(o);var h={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};return h.prerelease!=null||d.major!==h.major?m(o):d.major===0?d.minor===h.minor&&d.patch<=h.patch?c(o):m(o):d.minor<=h.minor?c(o):m(o)}}var isCompatible=_makeCompatibilityCheck(VERSION),major=VERSION.split(".")[0],GLOBAL_OPENTELEMETRY_API_KEY=Symbol.for("opentelemetry.js.api."+major),_global=_globalThis;function registerGlobal(t,e,r,u){var d;u===void 0&&(u=!1);var m=_global[GLOBAL_OPENTELEMETRY_API_KEY]=(d=_global[GLOBAL_OPENTELEMETRY_API_KEY])!==null&&d!==void 0?d:{version:VERSION};if(!u&&m[t]){var c=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(c.stack||c.message),!1}if(m.version!==VERSION){var c=new Error("@opentelemetry/api: Registration of version v"+m.version+" for "+t+" does not match previously registered API v"+VERSION);return r.error(c.stack||c.message),!1}return m[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+VERSION+"."),!0}function getGlobal$2(t){var e,r,u=(e=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||e===void 0?void 0:e.version;if(!(!u||!isCompatible(u)))return(r=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||r===void 0?void 0:r[t]}function unregisterGlobal(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+VERSION+".");var r=_global[GLOBAL_OPENTELEMETRY_API_KEY];r&&delete r[t]}var __read$4=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var u=r.call(t),d,m=[],c;try{for(;(e===void 0||e-- >0)&&!(d=u.next()).done;)m.push(d.value)}catch(a){c={error:a}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(c)throw c.error}}return m},__spreadArray$3=function(t,e,r){if(r||arguments.length===2)for(var u=0,d=e.length,m;u<d;u++)(m||!(u in e))&&(m||(m=Array.prototype.slice.call(e,0,u)),m[u]=e[u]);return t.concat(m||Array.prototype.slice.call(e))},DiagComponentLogger=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("verbose",this._namespace,e)},t}();function logProxy(t,e,r){var u=getGlobal$2("diag");if(u)return r.unshift(e),u[t].apply(u,__spreadArray$3([],__read$4(r),!1))}var DiagLogLevel;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(DiagLogLevel||(DiagLogLevel={}));function createLogLevelDiagLogger(t,e){t<DiagLogLevel.NONE?t=DiagLogLevel.NONE:t>DiagLogLevel.ALL&&(t=DiagLogLevel.ALL),e=e||{};function r(u,d){var m=e[u];return typeof m=="function"&&t>=d?m.bind(e):function(){}}return{error:r("error",DiagLogLevel.ERROR),warn:r("warn",DiagLogLevel.WARN),info:r("info",DiagLogLevel.INFO),debug:r("debug",DiagLogLevel.DEBUG),verbose:r("verbose",DiagLogLevel.VERBOSE)}}var __read$3=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var u=r.call(t),d,m=[],c;try{for(;(e===void 0||e-- >0)&&!(d=u.next()).done;)m.push(d.value)}catch(a){c={error:a}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(c)throw c.error}}return m},__spreadArray$2=function(t,e,r){if(r||arguments.length===2)for(var u=0,d=e.length,m;u<d;u++)(m||!(u in e))&&(m||(m=Array.prototype.slice.call(e,0,u)),m[u]=e[u]);return t.concat(m||Array.prototype.slice.call(e))},API_NAME$4="diag",DiagAPI=function(){function t(){function e(d){return function(){for(var m=[],c=0;c<arguments.length;c++)m[c]=arguments[c];var a=getGlobal$2("diag");if(a)return a[d].apply(a,__spreadArray$2([],__read$3(m),!1))}}var r=this,u=function(d,m){var c,a,o;if(m===void 0&&(m={logLevel:DiagLogLevel.INFO}),d===r){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((c=s.stack)!==null&&c!==void 0?c:s.message),!1}typeof m=="number"&&(m={logLevel:m});var h=getGlobal$2("diag"),v=createLogLevelDiagLogger((a=m.logLevel)!==null&&a!==void 0?a:DiagLogLevel.INFO,d);if(h&&!m.suppressOverrideMessage){var E=(o=new Error().stack)!==null&&o!==void 0?o:"<failed to generate stacktrace>";h.warn("Current logger will be overwritten from "+E),v.warn("Current logger will overwrite one already registered from "+E)}return registerGlobal("diag",v,r,!0)};r.setLogger=u,r.disable=function(){unregisterGlobal(API_NAME$4,r)},r.createComponentLogger=function(d){return new DiagComponentLogger(d)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),__read$2=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var u=r.call(t),d,m=[],c;try{for(;(e===void 0||e-- >0)&&!(d=u.next()).done;)m.push(d.value)}catch(a){c={error:a}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(c)throw c.error}}return m},__values=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],u=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&u>=t.length&&(t=void 0),{value:t&&t[u++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BaggageImpl=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=__read$2(e,2),u=r[0],d=r[1];return[u,d]})},t.prototype.setEntry=function(e,r){var u=new t(this._entries);return u._entries.set(e,r),u},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];var m=new t(this._entries);try{for(var c=__values(u),a=c.next();!a.done;a=c.next()){var o=a.value;m._entries.delete(o)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return m},t.prototype.clear=function(){return new t},t}(),baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata"),diag$1=DiagAPI.instance();function createBaggage(t){return t===void 0&&(t={}),new BaggageImpl(new Map(Object.entries(t)))}function baggageEntryMetadataFromString(t){return typeof t!="string"&&(diag$1.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:baggageEntryMetadataSymbol,toString:function(){return t}}}function createContextKey(t){return Symbol.for(t)}var BaseContext=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(u){return r._currentContext.get(u)},r.setValue=function(u,d){var m=new t(r._currentContext);return m._currentContext.set(u,d),m},r.deleteValue=function(u){var d=new t(r._currentContext);return d._currentContext.delete(u),d}}return t}(),ROOT_CONTEXT=new BaseContext,consoleMap=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],DiagConsoleLogger=function(){function t(){function e(u){return function(){for(var d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];if(console){var c=console[u];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,d)}}}for(var r=0;r<consoleMap.length;r++)this[consoleMap[r].n]=e(consoleMap[r].c)}return t}(),__extends=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(u[m]=d[m])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function u(){this.constructor=e}e.prototype=r===null?Object.create(r):(u.prototype=r.prototype,new u)}}(),NoopMeter=function(){function t(){}return t.prototype.createGauge=function(e,r){return NOOP_GAUGE_METRIC},t.prototype.createHistogram=function(e,r){return NOOP_HISTOGRAM_METRIC},t.prototype.createCounter=function(e,r){return NOOP_COUNTER_METRIC},t.prototype.createUpDownCounter=function(e,r){return NOOP_UP_DOWN_COUNTER_METRIC},t.prototype.createObservableGauge=function(e,r){return NOOP_OBSERVABLE_GAUGE_METRIC},t.prototype.createObservableCounter=function(e,r){return NOOP_OBSERVABLE_COUNTER_METRIC},t.prototype.createObservableUpDownCounter=function(e,r){return NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t}(),NoopMetric=function(){function t(){}return t}(),NoopCounterMetric=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,u){},e}(NoopMetric),NoopUpDownCounterMetric=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,u){},e}(NoopMetric),NoopGaugeMetric=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,u){},e}(NoopMetric),NoopHistogramMetric=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,u){},e}(NoopMetric),NoopObservableMetric=function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t}(),NoopObservableCounterMetric=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(NoopObservableMetric),NoopObservableGaugeMetric=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(NoopObservableMetric),NoopObservableUpDownCounterMetric=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(NoopObservableMetric),NOOP_METER=new NoopMeter,NOOP_COUNTER_METRIC=new NoopCounterMetric,NOOP_GAUGE_METRIC=new NoopGaugeMetric,NOOP_HISTOGRAM_METRIC=new NoopHistogramMetric,NOOP_UP_DOWN_COUNTER_METRIC=new NoopUpDownCounterMetric,NOOP_OBSERVABLE_COUNTER_METRIC=new NoopObservableCounterMetric,NOOP_OBSERVABLE_GAUGE_METRIC=new NoopObservableGaugeMetric,NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new NoopObservableUpDownCounterMetric;function createNoopMeter(){return NOOP_METER}var ValueType;(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(ValueType||(ValueType={}));var defaultTextMapGetter={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},defaultTextMapSetter={set:function(t,e,r){t!=null&&(t[e]=r)}},__read$1=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var u=r.call(t),d,m=[],c;try{for(;(e===void 0||e-- >0)&&!(d=u.next()).done;)m.push(d.value)}catch(a){c={error:a}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(c)throw c.error}}return m},__spreadArray$1=function(t,e,r){if(r||arguments.length===2)for(var u=0,d=e.length,m;u<d;u++)(m||!(u in e))&&(m||(m=Array.prototype.slice.call(e,0,u)),m[u]=e[u]);return t.concat(m||Array.prototype.slice.call(e))},NoopContextManager=function(){function t(){}return t.prototype.active=function(){return ROOT_CONTEXT},t.prototype.with=function(e,r,u){for(var d=[],m=3;m<arguments.length;m++)d[m-3]=arguments[m];return r.call.apply(r,__spreadArray$1([u],__read$1(d),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),__read=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var u=r.call(t),d,m=[],c;try{for(;(e===void 0||e-- >0)&&!(d=u.next()).done;)m.push(d.value)}catch(a){c={error:a}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(c)throw c.error}}return m},__spreadArray=function(t,e,r){if(r||arguments.length===2)for(var u=0,d=e.length,m;u<d;u++)(m||!(u in e))&&(m||(m=Array.prototype.slice.call(e,0,u)),m[u]=e[u]);return t.concat(m||Array.prototype.slice.call(e))},API_NAME$3="context",NOOP_CONTEXT_MANAGER=new NoopContextManager,ContextAPI=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return registerGlobal(API_NAME$3,e,DiagAPI.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,u){for(var d,m=[],c=3;c<arguments.length;c++)m[c-3]=arguments[c];return(d=this._getContextManager()).with.apply(d,__spreadArray([e,r,u],__read(m),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return getGlobal$2(API_NAME$3)||NOOP_CONTEXT_MANAGER},t.prototype.disable=function(){this._getContextManager().disable(),unregisterGlobal(API_NAME$3,DiagAPI.instance())},t}(),TraceFlags;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(TraceFlags||(TraceFlags={}));var INVALID_SPANID="0000000000000000",INVALID_TRACEID="00000000000000000000000000000000",INVALID_SPAN_CONTEXT={traceId:INVALID_TRACEID,spanId:INVALID_SPANID,traceFlags:TraceFlags.NONE},NonRecordingSpan=function(){function t(e){e===void 0&&(e=INVALID_SPAN_CONTEXT),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}(),SPAN_KEY=createContextKey("OpenTelemetry Context Key SPAN");function getSpan(t){return t.getValue(SPAN_KEY)||void 0}function getActiveSpan(){return getSpan(ContextAPI.getInstance().active())}function setSpan(t,e){return t.setValue(SPAN_KEY,e)}function deleteSpan(t){return t.deleteValue(SPAN_KEY)}function setSpanContext(t,e){return setSpan(t,new NonRecordingSpan(e))}function getSpanContext(t){var e;return(e=getSpan(t))===null||e===void 0?void 0:e.spanContext()}var VALID_TRACEID_REGEX=/^([0-9a-f]{32})$/i,VALID_SPANID_REGEX=/^[0-9a-f]{16}$/i;function isValidTraceId(t){return VALID_TRACEID_REGEX.test(t)&&t!==INVALID_TRACEID}function isValidSpanId(t){return VALID_SPANID_REGEX.test(t)&&t!==INVALID_SPANID}function isSpanContextValid(t){return isValidTraceId(t.traceId)&&isValidSpanId(t.spanId)}function wrapSpanContext(t){return new NonRecordingSpan(t)}var contextApi=ContextAPI.getInstance(),NoopTracer=function(){function t(){}return t.prototype.startSpan=function(e,r,u){u===void 0&&(u=contextApi.active());var d=!!r?.root;if(d)return new NonRecordingSpan;var m=u&&getSpanContext(u);return isSpanContext(m)&&isSpanContextValid(m)?new NonRecordingSpan(m):new NonRecordingSpan},t.prototype.startActiveSpan=function(e,r,u,d){var m,c,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(m=r,a=u):(m=r,c=u,a=d);var o=c??contextApi.active(),s=this.startSpan(e,m,o),h=setSpan(o,s);return contextApi.with(h,a,void 0,s)}},t}();function isSpanContext(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var NOOP_TRACER=new NoopTracer,ProxyTracer=function(){function t(e,r,u,d){this._provider=e,this.name=r,this.version=u,this.options=d}return t.prototype.startSpan=function(e,r,u){return this._getTracer().startSpan(e,r,u)},t.prototype.startActiveSpan=function(e,r,u,d){var m=this._getTracer();return Reflect.apply(m.startActiveSpan,m,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):NOOP_TRACER},t}(),NoopTracerProvider=function(){function t(){}return t.prototype.getTracer=function(e,r,u){return new NoopTracer},t}(),NOOP_TRACER_PROVIDER=new NoopTracerProvider,ProxyTracerProvider=function(){function t(){}return t.prototype.getTracer=function(e,r,u){var d;return(d=this.getDelegateTracer(e,r,u))!==null&&d!==void 0?d:new ProxyTracer(this,e,r,u)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:NOOP_TRACER_PROVIDER},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,u){var d;return(d=this._delegate)===null||d===void 0?void 0:d.getTracer(e,r,u)},t}(),SamplingDecision;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(SamplingDecision||(SamplingDecision={}));var SpanKind;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(SpanKind||(SpanKind={}));var SpanStatusCode;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(SpanStatusCode||(SpanStatusCode={}));var VALID_KEY_CHAR_RANGE="[_0-9a-z-*/]",VALID_KEY="[a-z]"+VALID_KEY_CHAR_RANGE+"{0,255}",VALID_VENDOR_KEY="[a-z0-9]"+VALID_KEY_CHAR_RANGE+"{0,240}@[a-z]"+VALID_KEY_CHAR_RANGE+"{0,13}",VALID_KEY_REGEX=new RegExp("^(?:"+VALID_KEY+"|"+VALID_VENDOR_KEY+")$"),VALID_VALUE_BASE_REGEX=/^[ -~]{0,255}[!-~]$/,INVALID_VALUE_COMMA_EQUAL_REGEX=/,|=/;function validateKey(t){return VALID_KEY_REGEX.test(t)}function validateValue(t){return VALID_VALUE_BASE_REGEX.test(t)&&!INVALID_VALUE_COMMA_EQUAL_REGEX.test(t)}var MAX_TRACE_STATE_ITEMS=32,MAX_TRACE_STATE_LEN=512,LIST_MEMBERS_SEPARATOR=",",LIST_MEMBER_KEY_VALUE_SPLITTER="=",TraceStateImpl=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var u=this._clone();return u._internalState.has(e)&&u._internalState.delete(e),u._internalState.set(e,r),u},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,u){return r.push(u+LIST_MEMBER_KEY_VALUE_SPLITTER+e.get(u)),r},[]).join(LIST_MEMBERS_SEPARATOR)},t.prototype._parse=function(e){e.length>MAX_TRACE_STATE_LEN||(this._internalState=e.split(LIST_MEMBERS_SEPARATOR).reverse().reduce(function(r,u){var d=u.trim(),m=d.indexOf(LIST_MEMBER_KEY_VALUE_SPLITTER);if(m!==-1){var c=d.slice(0,m),a=d.slice(m+1,u.length);validateKey(c)&&validateValue(a)&&r.set(c,a)}return r},new Map),this._internalState.size>MAX_TRACE_STATE_ITEMS&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,MAX_TRACE_STATE_ITEMS))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}();function createTraceState(t){return new TraceStateImpl(t)}var context=ContextAPI.getInstance(),diag=DiagAPI.instance(),NoopMeterProvider=function(){function t(){}return t.prototype.getMeter=function(e,r,u){return NOOP_METER},t}(),NOOP_METER_PROVIDER=new NoopMeterProvider,API_NAME$2="metrics",MetricsAPI=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return registerGlobal(API_NAME$2,e,DiagAPI.instance())},t.prototype.getMeterProvider=function(){return getGlobal$2(API_NAME$2)||NOOP_METER_PROVIDER},t.prototype.getMeter=function(e,r,u){return this.getMeterProvider().getMeter(e,r,u)},t.prototype.disable=function(){unregisterGlobal(API_NAME$2,DiagAPI.instance())},t}(),metrics=MetricsAPI.getInstance(),NoopTextMapPropagator=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}(),BAGGAGE_KEY=createContextKey("OpenTelemetry Baggage Key");function getBaggage(t){return t.getValue(BAGGAGE_KEY)||void 0}function getActiveBaggage(){return getBaggage(ContextAPI.getInstance().active())}function setBaggage(t,e){return t.setValue(BAGGAGE_KEY,e)}function deleteBaggage(t){return t.deleteValue(BAGGAGE_KEY)}var API_NAME$1="propagation",NOOP_TEXT_MAP_PROPAGATOR=new NoopTextMapPropagator,PropagationAPI=function(){function t(){this.createBaggage=createBaggage,this.getBaggage=getBaggage,this.getActiveBaggage=getActiveBaggage,this.setBaggage=setBaggage,this.deleteBaggage=deleteBaggage}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return registerGlobal(API_NAME$1,e,DiagAPI.instance())},t.prototype.inject=function(e,r,u){return u===void 0&&(u=defaultTextMapSetter),this._getGlobalPropagator().inject(e,r,u)},t.prototype.extract=function(e,r,u){return u===void 0&&(u=defaultTextMapGetter),this._getGlobalPropagator().extract(e,r,u)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){unregisterGlobal(API_NAME$1,DiagAPI.instance())},t.prototype._getGlobalPropagator=function(){return getGlobal$2(API_NAME$1)||NOOP_TEXT_MAP_PROPAGATOR},t}(),propagation=PropagationAPI.getInstance(),API_NAME="trace",TraceAPI=function(){function t(){this._proxyTracerProvider=new ProxyTracerProvider,this.wrapSpanContext=wrapSpanContext,this.isSpanContextValid=isSpanContextValid,this.deleteSpan=deleteSpan,this.getSpan=getSpan,this.getActiveSpan=getActiveSpan,this.getSpanContext=getSpanContext,this.setSpan=setSpan,this.setSpanContext=setSpanContext}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=registerGlobal(API_NAME,this._proxyTracerProvider,DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return getGlobal$2(API_NAME)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){unregisterGlobal(API_NAME,DiagAPI.instance()),this._proxyTracerProvider=new ProxyTracerProvider},t}(),trace=TraceAPI.getInstance();const index={context,diag,metrics,propagation,trace},esm=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger,get DiagLogLevel(){return DiagLogLevel},INVALID_SPANID,INVALID_SPAN_CONTEXT,INVALID_TRACEID,ProxyTracer,ProxyTracerProvider,ROOT_CONTEXT,get SamplingDecision(){return SamplingDecision},get SpanKind(){return SpanKind},get SpanStatusCode(){return SpanStatusCode},get TraceFlags(){return TraceFlags},get ValueType(){return ValueType},baggageEntryMetadataFromString,context,createContextKey,createNoopMeter,createTraceState,default:index,defaultTextMapGetter,defaultTextMapSetter,diag,isSpanContextValid,isValidSpanId,isValidTraceId,metrics,propagation,trace},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(esm);var v1={exports:{}},firestore_admin_client={};const options$2={syntax:"proto3"},nested$2=JSON.parse('{"google":{"nested":{"firestore":{"nested":{"admin":{"nested":{"v1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.Admin.V1","go_package":"cloud.google.com/go/firestore/apiv1/admin/adminpb;adminpb","java_multiple_files":true,"java_outer_classname":"LocationProto","java_package":"com.google.firestore.admin.v1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\Admin\\\\V1","ruby_package":"Google::Cloud::Firestore::Admin::V1","(google.api.resource_definition).type":"firestore.googleapis.com/CollectionGroup","(google.api.resource_definition).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}"},"nested":{"Backup":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Backup","(google.api.resource).pattern":"projects/{project}/locations/{location}/backups/{backup}"},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"database":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"databaseUid":{"type":"string","id":7,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"snapshotTime":{"type":"google.protobuf.Timestamp","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"expireTime":{"type":"google.protobuf.Timestamp","id":4,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"stats":{"type":"Stats","id":6,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"state":{"type":"State","id":8,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}},"nested":{"Stats":{"fields":{"sizeBytes":{"type":"int64","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"documentCount":{"type":"int64","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"indexCount":{"type":"int64","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}}},"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"READY":2,"NOT_AVAILABLE":3}}}},"Database":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Database","(google.api.resource).pattern":"projects/{project}/databases/{database}","(google.api.resource).style":"DECLARATIVE_FRIENDLY"},"fields":{"name":{"type":"string","id":1},"uid":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"createTime":{"type":"google.protobuf.Timestamp","id":5,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"updateTime":{"type":"google.protobuf.Timestamp","id":6,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"deleteTime":{"type":"google.protobuf.Timestamp","id":7,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"locationId":{"type":"string","id":9},"type":{"type":"DatabaseType","id":10},"concurrencyMode":{"type":"ConcurrencyMode","id":15},"versionRetentionPeriod":{"type":"google.protobuf.Duration","id":17,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"earliestVersionTime":{"type":"google.protobuf.Timestamp","id":18,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"pointInTimeRecoveryEnablement":{"type":"PointInTimeRecoveryEnablement","id":21},"appEngineIntegrationMode":{"type":"AppEngineIntegrationMode","id":19},"keyPrefix":{"type":"string","id":20,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"deleteProtectionState":{"type":"DeleteProtectionState","id":22},"cmekConfig":{"type":"CmekConfig","id":23,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"previousId":{"type":"string","id":25,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"sourceInfo":{"type":"SourceInfo","id":26,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"etag":{"type":"string","id":99}},"nested":{"DatabaseType":{"values":{"DATABASE_TYPE_UNSPECIFIED":0,"FIRESTORE_NATIVE":1,"DATASTORE_MODE":2}},"ConcurrencyMode":{"values":{"CONCURRENCY_MODE_UNSPECIFIED":0,"OPTIMISTIC":1,"PESSIMISTIC":2,"OPTIMISTIC_WITH_ENTITY_GROUPS":3}},"PointInTimeRecoveryEnablement":{"values":{"POINT_IN_TIME_RECOVERY_ENABLEMENT_UNSPECIFIED":0,"POINT_IN_TIME_RECOVERY_ENABLED":1,"POINT_IN_TIME_RECOVERY_DISABLED":2}},"AppEngineIntegrationMode":{"values":{"APP_ENGINE_INTEGRATION_MODE_UNSPECIFIED":0,"ENABLED":1,"DISABLED":2}},"DeleteProtectionState":{"values":{"DELETE_PROTECTION_STATE_UNSPECIFIED":0,"DELETE_PROTECTION_DISABLED":1,"DELETE_PROTECTION_ENABLED":2}},"CmekConfig":{"fields":{"kmsKeyName":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"activeKeyVersion":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}}},"SourceInfo":{"oneofs":{"source":{"oneof":["backup"]}},"fields":{"backup":{"type":"BackupSource","id":1},"operation":{"type":"string","id":3,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Operation"}}},"nested":{"BackupSource":{"fields":{"backup":{"type":"string","id":1,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}}}},"EncryptionConfig":{"oneofs":{"encryptionType":{"oneof":["googleDefaultEncryption","useSourceEncryption","customerManagedEncryption"]}},"fields":{"googleDefaultEncryption":{"type":"GoogleDefaultEncryptionOptions","id":1},"useSourceEncryption":{"type":"SourceEncryptionOptions","id":2},"customerManagedEncryption":{"type":"CustomerManagedEncryptionOptions","id":3}},"nested":{"GoogleDefaultEncryptionOptions":{"fields":{}},"SourceEncryptionOptions":{"fields":{}},"CustomerManagedEncryptionOptions":{"fields":{"kmsKeyName":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}}}}}}}},"Field":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Field","(google.api.resource).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}/fields/{field}"},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"indexConfig":{"type":"IndexConfig","id":2},"ttlConfig":{"type":"TtlConfig","id":3}},"nested":{"IndexConfig":{"fields":{"indexes":{"rule":"repeated","type":"Index","id":1},"usesAncestorConfig":{"type":"bool","id":2},"ancestorField":{"type":"string","id":3},"reverting":{"type":"bool","id":4}}},"TtlConfig":{"fields":{"state":{"type":"State","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}}},"nested":{"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"ACTIVE":2,"NEEDS_REPAIR":3}}}}}},"Index":{"options":{"(google.api.resource).type":"firestore.googleapis.com/Index","(google.api.resource).pattern":"projects/{project}/databases/{database}/collectionGroups/{collection}/indexes/{index}"},"fields":{"name":{"type":"string","id":1},"queryScope":{"type":"QueryScope","id":2},"apiScope":{"type":"ApiScope","id":5},"fields":{"rule":"repeated","type":"IndexField","id":3},"state":{"type":"State","id":4}},"nested":{"QueryScope":{"values":{"QUERY_SCOPE_UNSPECIFIED":0,"COLLECTION":1,"COLLECTION_GROUP":2,"COLLECTION_RECURSIVE":3}},"ApiScope":{"values":{"ANY_API":0,"DATASTORE_MODE_API":1}},"IndexField":{"oneofs":{"valueMode":{"oneof":["order","arrayConfig","vectorConfig"]}},"fields":{"fieldPath":{"type":"string","id":1},"order":{"type":"Order","id":2},"arrayConfig":{"type":"ArrayConfig","id":3},"vectorConfig":{"type":"VectorConfig","id":4}},"nested":{"Order":{"values":{"ORDER_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}},"ArrayConfig":{"values":{"ARRAY_CONFIG_UNSPECIFIED":0,"CONTAINS":1}},"VectorConfig":{"oneofs":{"type":{"oneof":["flat"]}},"fields":{"dimension":{"type":"int32","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"flat":{"type":"FlatIndex","id":2}},"nested":{"FlatIndex":{"fields":{}}}}}},"State":{"values":{"STATE_UNSPECIFIED":0,"CREATING":1,"READY":2,"NEEDS_REPAIR":3}}}},"FirestoreAdmin":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"CreateIndex":{"requestType":"CreateIndexRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","(google.api.http).body":"index","(google.api.method_signature)":"parent,index","(google.longrunning.operation_info).response_type":"Index","(google.longrunning.operation_info).metadata_type":"IndexOperationMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","body":"index"}},{"(google.api.method_signature)":"parent,index"},{"(google.longrunning.operation_info)":{"response_type":"Index","metadata_type":"IndexOperationMetadata"}}]},"ListIndexes":{"requestType":"ListIndexesRequest","responseType":"ListIndexesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/indexes"}},{"(google.api.method_signature)":"parent"}]},"GetIndex":{"requestType":"GetIndexRequest","responseType":"Index","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}"}},{"(google.api.method_signature)":"name"}]},"DeleteIndex":{"requestType":"DeleteIndexRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/collectionGroups/*/indexes/*}"}},{"(google.api.method_signature)":"name"}]},"GetField":{"requestType":"GetFieldRequest","responseType":"Field","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/collectionGroups/*/fields/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/collectionGroups/*/fields/*}"}},{"(google.api.method_signature)":"name"}]},"UpdateField":{"requestType":"UpdateFieldRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).patch":"/v1/{field.name=projects/*/databases/*/collectionGroups/*/fields/*}","(google.api.http).body":"field","(google.api.method_signature)":"field","(google.longrunning.operation_info).response_type":"Field","(google.longrunning.operation_info).metadata_type":"FieldOperationMetadata"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{field.name=projects/*/databases/*/collectionGroups/*/fields/*}","body":"field"}},{"(google.api.method_signature)":"field"},{"(google.longrunning.operation_info)":{"response_type":"Field","metadata_type":"FieldOperationMetadata"}}]},"ListFields":{"requestType":"ListFieldsRequest","responseType":"ListFieldsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/fields","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/collectionGroups/*}/fields"}},{"(google.api.method_signature)":"parent"}]},"ExportDocuments":{"requestType":"ExportDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:exportDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"ExportDocumentsResponse","(google.longrunning.operation_info).metadata_type":"ExportDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:exportDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"ExportDocumentsResponse","metadata_type":"ExportDocumentsMetadata"}}]},"ImportDocuments":{"requestType":"ImportDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:importDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"google.protobuf.Empty","(google.longrunning.operation_info).metadata_type":"ImportDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:importDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"google.protobuf.Empty","metadata_type":"ImportDocumentsMetadata"}}]},"BulkDeleteDocuments":{"requestType":"BulkDeleteDocumentsRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{name=projects/*/databases/*}:bulkDeleteDocuments","(google.api.http).body":"*","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"BulkDeleteDocumentsResponse","(google.longrunning.operation_info).metadata_type":"BulkDeleteDocumentsMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=projects/*/databases/*}:bulkDeleteDocuments","body":"*"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"BulkDeleteDocumentsResponse","metadata_type":"BulkDeleteDocumentsMetadata"}}]},"CreateDatabase":{"requestType":"CreateDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*}/databases","(google.api.http).body":"database","(google.api.method_signature)":"parent,database,database_id","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"CreateDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*}/databases","body":"database"}},{"(google.api.method_signature)":"parent,database,database_id"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"CreateDatabaseMetadata"}}]},"GetDatabase":{"requestType":"GetDatabaseRequest","responseType":"Database","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*}"}},{"(google.api.method_signature)":"name"}]},"ListDatabases":{"requestType":"ListDatabasesRequest","responseType":"ListDatabasesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*}/databases","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*}/databases"}},{"(google.api.method_signature)":"parent"}]},"UpdateDatabase":{"requestType":"UpdateDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).patch":"/v1/{database.name=projects/*/databases/*}","(google.api.http).body":"database","(google.api.method_signature)":"database,update_mask","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"UpdateDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{database.name=projects/*/databases/*}","body":"database"}},{"(google.api.method_signature)":"database,update_mask"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"UpdateDatabaseMetadata"}}]},"DeleteDatabase":{"requestType":"DeleteDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*}","(google.api.method_signature)":"name","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"DeleteDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*}"}},{"(google.api.method_signature)":"name"},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"DeleteDatabaseMetadata"}}]},"GetBackup":{"requestType":"GetBackupRequest","responseType":"Backup","options":{"(google.api.http).get":"/v1/{name=projects/*/locations/*/backups/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/locations/*/backups/*}"}},{"(google.api.method_signature)":"name"}]},"ListBackups":{"requestType":"ListBackupsRequest","responseType":"ListBackupsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/locations/*}/backups","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/locations/*}/backups"}},{"(google.api.method_signature)":"parent"}]},"DeleteBackup":{"requestType":"DeleteBackupRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/locations/*/backups/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/locations/*/backups/*}"}},{"(google.api.method_signature)":"name"}]},"RestoreDatabase":{"requestType":"RestoreDatabaseRequest","responseType":"google.longrunning.Operation","options":{"(google.api.http).post":"/v1/{parent=projects/*}/databases:restore","(google.api.http).body":"*","(google.longrunning.operation_info).response_type":"Database","(google.longrunning.operation_info).metadata_type":"RestoreDatabaseMetadata"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*}/databases:restore","body":"*"}},{"(google.longrunning.operation_info)":{"response_type":"Database","metadata_type":"RestoreDatabaseMetadata"}}]},"CreateBackupSchedule":{"requestType":"CreateBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*}/backupSchedules","(google.api.http).body":"backup_schedule","(google.api.method_signature)":"parent,backup_schedule"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*}/backupSchedules","body":"backup_schedule"}},{"(google.api.method_signature)":"parent,backup_schedule"}]},"GetBackupSchedule":{"requestType":"GetBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/backupSchedules/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/backupSchedules/*}"}},{"(google.api.method_signature)":"name"}]},"ListBackupSchedules":{"requestType":"ListBackupSchedulesRequest","responseType":"ListBackupSchedulesResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*}/backupSchedules","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*}/backupSchedules"}},{"(google.api.method_signature)":"parent"}]},"UpdateBackupSchedule":{"requestType":"UpdateBackupScheduleRequest","responseType":"BackupSchedule","options":{"(google.api.http).patch":"/v1/{backup_schedule.name=projects/*/databases/*/backupSchedules/*}","(google.api.http).body":"backup_schedule","(google.api.method_signature)":"backup_schedule,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{backup_schedule.name=projects/*/databases/*/backupSchedules/*}","body":"backup_schedule"}},{"(google.api.method_signature)":"backup_schedule,update_mask"}]},"DeleteBackupSchedule":{"requestType":"DeleteBackupScheduleRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/backupSchedules/*}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/backupSchedules/*}"}},{"(google.api.method_signature)":"name"}]}}},"ListDatabasesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"showDeleted":{"type":"bool","id":4}}},"CreateDatabaseRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"database":{"type":"Database","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"databaseId":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"CreateDatabaseMetadata":{"fields":{}},"ListDatabasesResponse":{"fields":{"databases":{"rule":"repeated","type":"Database","id":1},"unreachable":{"rule":"repeated","type":"string","id":3}}},"GetDatabaseRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}}}},"UpdateDatabaseRequest":{"fields":{"database":{"type":"Database","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"UpdateDatabaseMetadata":{"fields":{}},"DeleteDatabaseRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"etag":{"type":"string","id":3}}},"DeleteDatabaseMetadata":{"fields":{}},"CreateBackupScheduleRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"backupSchedule":{"type":"BackupSchedule","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"GetBackupScheduleRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/BackupSchedule"}}}},"UpdateBackupScheduleRequest":{"fields":{"backupSchedule":{"type":"BackupSchedule","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"ListBackupSchedulesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}}}},"ListBackupSchedulesResponse":{"fields":{"backupSchedules":{"rule":"repeated","type":"BackupSchedule","id":1}}},"DeleteBackupScheduleRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/BackupSchedule"}}}},"CreateIndexRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"index":{"type":"Index","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"ListIndexesRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListIndexesResponse":{"fields":{"indexes":{"rule":"repeated","type":"Index","id":1},"nextPageToken":{"type":"string","id":2}}},"GetIndexRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Index"}}}},"DeleteIndexRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Index"}}}},"UpdateFieldRequest":{"fields":{"field":{"type":"Field","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"google.protobuf.FieldMask","id":2}}},"GetFieldRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Field"}}}},"ListFieldsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/CollectionGroup"}},"filter":{"type":"string","id":2},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4}}},"ListFieldsResponse":{"fields":{"fields":{"rule":"repeated","type":"Field","id":1},"nextPageToken":{"type":"string","id":2}}},"ExportDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2},"outputUriPrefix":{"type":"string","id":3},"namespaceIds":{"rule":"repeated","type":"string","id":4},"snapshotTime":{"type":"google.protobuf.Timestamp","id":5}}},"ImportDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2},"inputUriPrefix":{"type":"string","id":3},"namespaceIds":{"rule":"repeated","type":"string","id":4}}},"BulkDeleteDocumentsRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"collectionIds":{"rule":"repeated","type":"string","id":2,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"namespaceIds":{"rule":"repeated","type":"string","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"BulkDeleteDocumentsResponse":{"fields":{}},"GetBackupRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}},"ListBackupsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Location"}},"filter":{"type":"string","id":2}}},"ListBackupsResponse":{"fields":{"backups":{"rule":"repeated","type":"Backup","id":1},"unreachable":{"rule":"repeated","type":"string","id":3}}},"DeleteBackupRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}}}},"RestoreDatabaseRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).child_type":"firestore.googleapis.com/Database"}},"databaseId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"backup":{"type":"string","id":3,"options":{"(google.api.field_behavior)":"REQUIRED","(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}},"encryptionConfig":{"type":"Database.EncryptionConfig","id":9,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"IndexOperationMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"index":{"type":"string","id":3},"state":{"type":"OperationState","id":4},"progressDocuments":{"type":"Progress","id":5},"progressBytes":{"type":"Progress","id":6}}},"FieldOperationMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"field":{"type":"string","id":3},"indexConfigDeltas":{"rule":"repeated","type":"IndexConfigDelta","id":4},"state":{"type":"OperationState","id":5},"progressDocuments":{"type":"Progress","id":6},"progressBytes":{"type":"Progress","id":7},"ttlConfigDelta":{"type":"TtlConfigDelta","id":8}},"nested":{"IndexConfigDelta":{"fields":{"changeType":{"type":"ChangeType","id":1},"index":{"type":"Index","id":2}},"nested":{"ChangeType":{"values":{"CHANGE_TYPE_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}},"TtlConfigDelta":{"fields":{"changeType":{"type":"ChangeType","id":1}},"nested":{"ChangeType":{"values":{"CHANGE_TYPE_UNSPECIFIED":0,"ADD":1,"REMOVE":2}}}}}},"ExportDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"outputUriPrefix":{"type":"string","id":7},"namespaceIds":{"rule":"repeated","type":"string","id":8},"snapshotTime":{"type":"google.protobuf.Timestamp","id":9}}},"ImportDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"inputUriPrefix":{"type":"string","id":7},"namespaceIds":{"rule":"repeated","type":"string","id":8}}},"BulkDeleteDocumentsMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"progressDocuments":{"type":"Progress","id":4},"progressBytes":{"type":"Progress","id":5},"collectionIds":{"rule":"repeated","type":"string","id":6},"namespaceIds":{"rule":"repeated","type":"string","id":7},"snapshotTime":{"type":"google.protobuf.Timestamp","id":8}}},"ExportDocumentsResponse":{"fields":{"outputUriPrefix":{"type":"string","id":1}}},"RestoreDatabaseMetadata":{"fields":{"startTime":{"type":"google.protobuf.Timestamp","id":1},"endTime":{"type":"google.protobuf.Timestamp","id":2},"operationState":{"type":"OperationState","id":3},"database":{"type":"string","id":4,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Database"}},"backup":{"type":"string","id":5,"options":{"(google.api.resource_reference).type":"firestore.googleapis.com/Backup"}},"progressPercentage":{"type":"Progress","id":8}}},"Progress":{"fields":{"estimatedWork":{"type":"int64","id":1},"completedWork":{"type":"int64","id":2}}},"OperationState":{"values":{"OPERATION_STATE_UNSPECIFIED":0,"INITIALIZING":1,"PROCESSING":2,"CANCELLING":3,"FINALIZING":4,"SUCCESSFUL":5,"FAILED":6,"CANCELLED":7}},"BackupSchedule":{"options":{"(google.api.resource).type":"firestore.googleapis.com/BackupSchedule","(google.api.resource).pattern":"projects/{project}/databases/{database}/backupSchedules/{backup_schedule}"},"oneofs":{"recurrence":{"oneof":["dailyRecurrence","weeklyRecurrence"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"createTime":{"type":"google.protobuf.Timestamp","id":3,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"updateTime":{"type":"google.protobuf.Timestamp","id":10,"options":{"(google.api.field_behavior)":"OUTPUT_ONLY"}},"retention":{"type":"google.protobuf.Duration","id":6},"dailyRecurrence":{"type":"DailyRecurrence","id":7},"weeklyRecurrence":{"type":"WeeklyRecurrence","id":8}}},"DailyRecurrence":{"fields":{}},"WeeklyRecurrence":{"fields":{"day":{"type":"google.type.DayOfWeek","id":2}}},"LocationMetadata":{"fields":{}}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api;api","java_multiple_files":true,"java_outer_classname":"LaunchStageProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}},"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"Empty":{"fields":{}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}}}},"type":{"options":{"go_package":"google.golang.org/genproto/googleapis/type/latlng;latlng","java_multiple_files":true,"java_outer_classname":"LatLngProto","java_package":"com.google.type","objc_class_prefix":"GTP","cc_enable_arenas":true},"nested":{"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}},"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}}}},"longrunning":{"options":{"cc_enable_arenas":true,"csharp_namespace":"Google.LongRunning","go_package":"cloud.google.com/go/longrunning/autogen/longrunningpb;longrunningpb","java_multiple_files":true,"java_outer_classname":"OperationsProto","java_package":"com.google.longrunning","objc_class_prefix":"GLRUN","php_namespace":"Google\\\\LongRunning"},"nested":{"operationInfo":{"type":"google.longrunning.OperationInfo","id":1049,"extend":"google.protobuf.MethodOptions"},"Operations":{"options":{"(google.api.default_host)":"longrunning.googleapis.com"},"methods":{"ListOperations":{"requestType":"ListOperationsRequest","responseType":"ListOperationsResponse","options":{"(google.api.http).get":"/v1/{name=operations}","(google.api.method_signature)":"name,filter"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations}"}},{"(google.api.method_signature)":"name,filter"}]},"GetOperation":{"requestType":"GetOperationRequest","responseType":"Operation","options":{"(google.api.http).get":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"DeleteOperation":{"requestType":"DeleteOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=operations/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=operations/**}"}},{"(google.api.method_signature)":"name"}]},"CancelOperation":{"requestType":"CancelOperationRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{name=operations/**}:cancel","(google.api.http).body":"*","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{name=operations/**}:cancel","body":"*"}},{"(google.api.method_signature)":"name"}]},"WaitOperation":{"requestType":"WaitOperationRequest","responseType":"Operation"}}},"Operation":{"oneofs":{"result":{"oneof":["error","response"]}},"fields":{"name":{"type":"string","id":1},"metadata":{"type":"google.protobuf.Any","id":2},"done":{"type":"bool","id":3},"error":{"type":"google.rpc.Status","id":4},"response":{"type":"google.protobuf.Any","id":5}}},"GetOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"ListOperationsRequest":{"fields":{"name":{"type":"string","id":4},"filter":{"type":"string","id":1},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListOperationsResponse":{"fields":{"operations":{"rule":"repeated","type":"Operation","id":1},"nextPageToken":{"type":"string","id":2}}},"CancelOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"DeleteOperationRequest":{"fields":{"name":{"type":"string","id":1}}},"WaitOperationRequest":{"fields":{"name":{"type":"string","id":1},"timeout":{"type":"google.protobuf.Duration","id":2}}},"OperationInfo":{"fields":{"responseType":{"type":"string","id":1},"metadataType":{"type":"string","id":2}}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$0={options:options$2,nested:nested$2},interfaces$1={"google.firestore.admin.v1.FirestoreAdmin":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"],deadline_exceeded_internal_unavailable:["DEADLINE_EXCEEDED","INTERNAL","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{CreateIndex:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},ListIndexes:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},GetIndex:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},DeleteIndex:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},GetField:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},UpdateField:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},ListFields:{timeout_millis:6e4,retry_codes_name:"deadline_exceeded_internal_unavailable",retry_params_name:"default"},ExportDocuments:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},ImportDocuments:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},BulkDeleteDocuments:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},CreateDatabase:{timeout_millis:12e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},GetDatabase:{retry_codes_name:"non_idempotent",retry_params_name:"default"},ListDatabases:{retry_codes_name:"non_idempotent",retry_params_name:"default"},UpdateDatabase:{retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteDatabase:{retry_codes_name:"non_idempotent",retry_params_name:"default"},GetBackup:{retry_codes_name:"non_idempotent",retry_params_name:"default"},ListBackups:{retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteBackup:{retry_codes_name:"non_idempotent",retry_params_name:"default"},RestoreDatabase:{timeout_millis:12e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},CreateBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"},GetBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"},ListBackupSchedules:{retry_codes_name:"non_idempotent",retry_params_name:"default"},UpdateBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteBackupSchedule:{retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$1$2={interfaces:interfaces$1},name$s="@google-cloud/firestore",version$3="7.11.2",require$$33={name:name$s,version:version$3};var hasRequiredFirestore_admin_client;function requireFirestore_admin_client(){if(hasRequiredFirestore_admin_client)return firestore_admin_client;hasRequiredFirestore_admin_client=1;var t={};Object.defineProperty(firestore_admin_client,"__esModule",{value:!0}),firestore_admin_client.FirestoreAdminClient=void 0;const e=require$$0,r=require$$1$2,u=require$$33.version;class d{constructor(c,a){var o,s,h,v,E;this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}};const y=this.constructor;if(c?.universe_domain&&c?.universeDomain&&c?.universe_domain!==c?.universeDomain)throw new Error("Please set either universe_domain or universeDomain, but not both.");const A=typeof process=="object"&&typeof t=="object"?t.GOOGLE_CLOUD_UNIVERSE_DOMAIN:void 0;this._universeDomain=(h=(s=(o=c?.universeDomain)!==null&&o!==void 0?o:c?.universe_domain)!==null&&s!==void 0?s:A)!==null&&h!==void 0?h:"googleapis.com",this._servicePath="firestore."+this._universeDomain;const w=c?.servicePath||c?.apiEndpoint||this._servicePath;this._providedCustomServicePath=!!(c?.servicePath||c?.apiEndpoint);const I=c?.port||y.port,_=(v=c?.clientConfig)!==null&&v!==void 0?v:{},S=(E=c?.fallback)!==null&&E!==void 0?E:typeof window<"u"&&typeof window?.fetch=="function";c=Object.assign({servicePath:w,port:I,clientConfig:_,fallback:S},c),c.numericEnums=!0,w!==this._servicePath&&!("scopes"in c)&&(c.scopes=y.scopes),a||(a=requireFallback()),this._gaxModule=c.fallback?a.fallback:a,this._gaxGrpc=new this._gaxModule.GrpcClient(c),this._opts=c,this.auth=this._gaxGrpc.auth,this.auth.useJWTAccessWithScope=!0,this.auth.defaultServicePath=this._servicePath,w===this._servicePath&&(this.auth.defaultScopes=y.scopes),this.locationsClient=new this._gaxModule.LocationsClient(this._gaxGrpc,c);const j=[`gax/${this._gaxModule.version}`,`gapic/${u}`];typeof process=="object"&&"versions"in process?j.push(`gl-node/${process.versions.node}`):j.push(`gl-web/${this._gaxModule.version}`),c.fallback?j.push(`rest/${this._gaxGrpc.grpcVersion}`):j.push(`grpc/${this._gaxGrpc.grpcVersion}`),c.libName&&c.libVersion&&j.push(`${c.libName}/${c.libVersion}`),this._protos=this._gaxGrpc.loadProtoJSON(e),this.pathTemplates={backupPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/locations/{location}/backups/{backup}"),backupSchedulePathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/backupSchedules/{backup_schedule}"),collectionGroupPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/collectionGroups/{collection}"),databasePathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}"),fieldPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/collectionGroups/{collection}/fields/{field}"),indexPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/databases/{database}/collectionGroups/{collection}/indexes/{index}"),locationPathTemplate:new this._gaxModule.PathTemplate("projects/{project}/locations/{location}"),projectPathTemplate:new this._gaxModule.PathTemplate("projects/{project}")},this.descriptors.page={listIndexes:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","indexes"),listFields:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","fields")};const K=this._gaxModule.protobuf.Root.fromJSON(e),J={auth:this.auth,grpc:"grpc"in this._gaxGrpc?this._gaxGrpc.grpc:void 0};c.fallback&&(J.protoJson=K,J.httpRules=[{selector:"google.longrunning.Operations.CancelOperation",post:"/v1/{name=projects/*/databases/*/operations/*}:cancel",body:"*"},{selector:"google.longrunning.Operations.DeleteOperation",delete:"/v1/{name=projects/*/databases/*/operations/*}"},{selector:"google.longrunning.Operations.GetOperation",get:"/v1/{name=projects/*/databases/*/operations/*}"},{selector:"google.longrunning.Operations.ListOperations",get:"/v1/{name=projects/*/databases/*}/operations"}]),this.operationsClient=this._gaxModule.lro(J).operationsClient(c);const H=K.lookup(".google.firestore.admin.v1.Index"),U=K.lookup(".google.firestore.admin.v1.IndexOperationMetadata"),P=K.lookup(".google.firestore.admin.v1.Field"),Z=K.lookup(".google.firestore.admin.v1.FieldOperationMetadata"),ie=K.lookup(".google.firestore.admin.v1.ExportDocumentsResponse"),ue=K.lookup(".google.firestore.admin.v1.ExportDocumentsMetadata"),le=K.lookup(".google.protobuf.Empty"),ne=K.lookup(".google.firestore.admin.v1.ImportDocumentsMetadata"),ye=K.lookup(".google.firestore.admin.v1.BulkDeleteDocumentsResponse"),fe=K.lookup(".google.firestore.admin.v1.BulkDeleteDocumentsMetadata"),Te=K.lookup(".google.firestore.admin.v1.Database"),Ae=K.lookup(".google.firestore.admin.v1.CreateDatabaseMetadata"),Se=K.lookup(".google.firestore.admin.v1.Database"),be=K.lookup(".google.firestore.admin.v1.UpdateDatabaseMetadata"),we=K.lookup(".google.firestore.admin.v1.Database"),Ce=K.lookup(".google.firestore.admin.v1.DeleteDatabaseMetadata"),je=K.lookup(".google.firestore.admin.v1.Database"),Fe=K.lookup(".google.firestore.admin.v1.RestoreDatabaseMetadata");this.descriptors.longrunning={createIndex:new this._gaxModule.LongrunningDescriptor(this.operationsClient,H.decode.bind(H),U.decode.bind(U)),updateField:new this._gaxModule.LongrunningDescriptor(this.operationsClient,P.decode.bind(P),Z.decode.bind(Z)),exportDocuments:new this._gaxModule.LongrunningDescriptor(this.operationsClient,ie.decode.bind(ie),ue.decode.bind(ue)),importDocuments:new this._gaxModule.LongrunningDescriptor(this.operationsClient,le.decode.bind(le),ne.decode.bind(ne)),bulkDeleteDocuments:new this._gaxModule.LongrunningDescriptor(this.operationsClient,ye.decode.bind(ye),fe.decode.bind(fe)),createDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,Te.decode.bind(Te),Ae.decode.bind(Ae)),updateDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,Se.decode.bind(Se),be.decode.bind(be)),deleteDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,we.decode.bind(we),Ce.decode.bind(Ce)),restoreDatabase:new this._gaxModule.LongrunningDescriptor(this.operationsClient,je.decode.bind(je),Fe.decode.bind(Fe))},this._defaults=this._gaxGrpc.constructSettings("google.firestore.admin.v1.FirestoreAdmin",r,c.clientConfig||{},{"x-goog-api-client":j.join(" ")}),this.innerApiCalls={},this.warn=this._gaxModule.warn}initialize(){if(this.firestoreAdminStub)return this.firestoreAdminStub;this.firestoreAdminStub=this._gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.firestore.admin.v1.FirestoreAdmin"):this._protos.google.firestore.admin.v1.FirestoreAdmin,this._opts,this._providedCustomServicePath);const c=["createIndex","listIndexes","getIndex","deleteIndex","getField","updateField","listFields","exportDocuments","importDocuments","bulkDeleteDocuments","createDatabase","getDatabase","listDatabases","updateDatabase","deleteDatabase","getBackup","listBackups","deleteBackup","restoreDatabase","createBackupSchedule","getBackupSchedule","listBackupSchedules","updateBackupSchedule","deleteBackupSchedule"];for(const a of c){const o=this.firestoreAdminStub.then(v=>(...E)=>this._terminated?Promise.reject("The client has already been closed."):v[a].apply(v,E),v=>()=>{throw v}),s=this.descriptors.page[a]||this.descriptors.longrunning[a]||void 0,h=this._gaxModule.createApiCall(o,this._defaults[a],s,this._opts.fallback);this.innerApiCalls[a]=h}return this.firestoreAdminStub}static get servicePath(){return typeof process=="object"&&typeof process.emitWarning=="function"&&process.emitWarning("Static servicePath is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}static get apiEndpoint(){return typeof process=="object"&&typeof process.emitWarning=="function"&&process.emitWarning("Static apiEndpoint is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}get apiEndpoint(){return this._servicePath}get universeDomain(){return this._universeDomain}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/datastore"]}getProjectId(c){if(c){this.auth.getProjectId(c);return}return this.auth.getProjectId()}getIndex(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.getIndex(c,h,o)}deleteIndex(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.deleteIndex(c,h,o)}getField(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.getField(c,h,o)}getDatabase(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.getDatabase(c,h,o)}listDatabases(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.listDatabases(c,h,o)}getBackup(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.getBackup(c,h,o)}listBackups(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.listBackups(c,h,o)}deleteBackup(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.deleteBackup(c,h,o)}createBackupSchedule(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.createBackupSchedule(c,h,o)}getBackupSchedule(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.getBackupSchedule(c,h,o)}listBackupSchedules(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.listBackupSchedules(c,h,o)}updateBackupSchedule(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"backup_schedule.name":(s=c.backupSchedule.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.updateBackupSchedule(c,h,o)}deleteBackupSchedule(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.deleteBackupSchedule(c,h,o)}createIndex(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.createIndex(c,h,o)}async checkCreateIndexProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.createIndex,this._gaxModule.createDefaultBackoffSettings())}updateField(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"field.name":(s=c.field.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.updateField(c,h,o)}async checkUpdateFieldProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.updateField,this._gaxModule.createDefaultBackoffSettings())}exportDocuments(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.exportDocuments(c,h,o)}async checkExportDocumentsProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.exportDocuments,this._gaxModule.createDefaultBackoffSettings())}importDocuments(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.importDocuments(c,h,o)}async checkImportDocumentsProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.importDocuments,this._gaxModule.createDefaultBackoffSettings())}bulkDeleteDocuments(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.bulkDeleteDocuments(c,h,o)}async checkBulkDeleteDocumentsProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.bulkDeleteDocuments,this._gaxModule.createDefaultBackoffSettings())}createDatabase(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.createDatabase(c,h,o)}async checkCreateDatabaseProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.createDatabase,this._gaxModule.createDefaultBackoffSettings())}updateDatabase(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"database.name":(s=c.database.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.updateDatabase(c,h,o)}async checkUpdateDatabaseProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.updateDatabase,this._gaxModule.createDefaultBackoffSettings())}deleteDatabase(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.deleteDatabase(c,h,o)}async checkDeleteDatabaseProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.deleteDatabase,this._gaxModule.createDefaultBackoffSettings())}restoreDatabase(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.restoreDatabase(c,h,o)}async checkRestoreDatabaseProgress(c){const a=new this._gaxModule.operationsProtos.google.longrunning.GetOperationRequest({name:c}),[o]=await this.operationsClient.getOperation(a);return new this._gaxModule.Operation(o,this.descriptors.longrunning.restoreDatabase,this._gaxModule.createDefaultBackoffSettings())}listIndexes(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.listIndexes(c,h,o)}listIndexesStream(c,a){var o;c=c||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=c.parent)!==null&&o!==void 0?o:""});const h=this._defaults.listIndexes.merge(a);return this.initialize(),this.descriptors.page.listIndexes.createStream(this.innerApiCalls.listIndexes,c,h)}listIndexesAsync(c,a){var o;c=c||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=c.parent)!==null&&o!==void 0?o:""});const h=this._defaults.listIndexes.merge(a);return this.initialize(),this.descriptors.page.listIndexes.asyncIterate(this.innerApiCalls.listIndexes,c,h)}listFields(c,a,o){var s;c=c||{};let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=c.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.listFields(c,h,o)}listFieldsStream(c,a){var o;c=c||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=c.parent)!==null&&o!==void 0?o:""});const h=this._defaults.listFields.merge(a);return this.initialize(),this.descriptors.page.listFields.createStream(this.innerApiCalls.listFields,c,h)}listFieldsAsync(c,a){var o;c=c||{},a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(o=c.parent)!==null&&o!==void 0?o:""});const h=this._defaults.listFields.merge(a);return this.initialize(),this.descriptors.page.listFields.asyncIterate(this.innerApiCalls.listFields,c,h)}getLocation(c,a,o){return this.locationsClient.getLocation(c,a,o)}listLocationsAsync(c,a){return this.locationsClient.listLocationsAsync(c,a)}getOperation(c,a,o){var s;let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.operationsClient.getOperation(c,h,o)}listOperationsAsync(c,a){var o;return a=a||{},a.otherArgs=a.otherArgs||{},a.otherArgs.headers=a.otherArgs.headers||{},a.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(o=c.name)!==null&&o!==void 0?o:""}),this.operationsClient.listOperationsAsync(c,a)}cancelOperation(c,a,o){var s;let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.operationsClient.cancelOperation(c,h,o)}deleteOperation(c,a,o){var s;let h;return typeof a=="function"&&o===void 0?(o=a,h={}):h=a,h=h||{},h.otherArgs=h.otherArgs||{},h.otherArgs.headers=h.otherArgs.headers||{},h.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(s=c.name)!==null&&s!==void 0?s:""}),this.operationsClient.deleteOperation(c,h,o)}backupPath(c,a,o){return this.pathTemplates.backupPathTemplate.render({project:c,location:a,backup:o})}matchProjectFromBackupName(c){return this.pathTemplates.backupPathTemplate.match(c).project}matchLocationFromBackupName(c){return this.pathTemplates.backupPathTemplate.match(c).location}matchBackupFromBackupName(c){return this.pathTemplates.backupPathTemplate.match(c).backup}backupSchedulePath(c,a,o){return this.pathTemplates.backupSchedulePathTemplate.render({project:c,database:a,backup_schedule:o})}matchProjectFromBackupScheduleName(c){return this.pathTemplates.backupSchedulePathTemplate.match(c).project}matchDatabaseFromBackupScheduleName(c){return this.pathTemplates.backupSchedulePathTemplate.match(c).database}matchBackupScheduleFromBackupScheduleName(c){return this.pathTemplates.backupSchedulePathTemplate.match(c).backup_schedule}collectionGroupPath(c,a,o){return this.pathTemplates.collectionGroupPathTemplate.render({project:c,database:a,collection:o})}matchProjectFromCollectionGroupName(c){return this.pathTemplates.collectionGroupPathTemplate.match(c).project}matchDatabaseFromCollectionGroupName(c){return this.pathTemplates.collectionGroupPathTemplate.match(c).database}matchCollectionFromCollectionGroupName(c){return this.pathTemplates.collectionGroupPathTemplate.match(c).collection}databasePath(c,a){return this.pathTemplates.databasePathTemplate.render({project:c,database:a})}matchProjectFromDatabaseName(c){return this.pathTemplates.databasePathTemplate.match(c).project}matchDatabaseFromDatabaseName(c){return this.pathTemplates.databasePathTemplate.match(c).database}fieldPath(c,a,o,s){return this.pathTemplates.fieldPathTemplate.render({project:c,database:a,collection:o,field:s})}matchProjectFromFieldName(c){return this.pathTemplates.fieldPathTemplate.match(c).project}matchDatabaseFromFieldName(c){return this.pathTemplates.fieldPathTemplate.match(c).database}matchCollectionFromFieldName(c){return this.pathTemplates.fieldPathTemplate.match(c).collection}matchFieldFromFieldName(c){return this.pathTemplates.fieldPathTemplate.match(c).field}indexPath(c,a,o,s){return this.pathTemplates.indexPathTemplate.render({project:c,database:a,collection:o,index:s})}matchProjectFromIndexName(c){return this.pathTemplates.indexPathTemplate.match(c).project}matchDatabaseFromIndexName(c){return this.pathTemplates.indexPathTemplate.match(c).database}matchCollectionFromIndexName(c){return this.pathTemplates.indexPathTemplate.match(c).collection}matchIndexFromIndexName(c){return this.pathTemplates.indexPathTemplate.match(c).index}locationPath(c,a){return this.pathTemplates.locationPathTemplate.render({project:c,location:a})}matchProjectFromLocationName(c){return this.pathTemplates.locationPathTemplate.match(c).project}matchLocationFromLocationName(c){return this.pathTemplates.locationPathTemplate.match(c).location}projectPath(c){return this.pathTemplates.projectPathTemplate.render({project:c})}matchProjectFromProjectName(c){return this.pathTemplates.projectPathTemplate.match(c).project}close(){return this.firestoreAdminStub&&!this._terminated?this.firestoreAdminStub.then(c=>{this._terminated=!0,c.close(),this.locationsClient.close(),this.operationsClient.close()}):Promise.resolve()}}return firestore_admin_client.FirestoreAdminClient=d,firestore_admin_client}var firestore_client$1={};const options$1={syntax:"proto3"},nested$1=JSON.parse('{"google":{"nested":{"firestore":{"nested":{"v1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.V1","go_package":"cloud.google.com/go/firestore/apiv1/firestorepb;firestorepb","java_multiple_files":true,"java_outer_classname":"WriteProto","java_package":"com.google.firestore.v1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\V1","ruby_package":"Google::Cloud::Firestore::V1"},"nested":{"AggregationResult":{"fields":{"aggregateFields":{"keyType":"string","type":"Value","id":2}}},"Document":{"fields":{"name":{"type":"string","id":1},"fields":{"keyType":"string","type":"Value","id":2},"createTime":{"type":"google.protobuf.Timestamp","id":3},"updateTime":{"type":"google.protobuf.Timestamp","id":4}}},"Value":{"oneofs":{"valueType":{"oneof":["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},"fields":{"nullValue":{"type":"google.protobuf.NullValue","id":11},"booleanValue":{"type":"bool","id":1},"integerValue":{"type":"int64","id":2},"doubleValue":{"type":"double","id":3},"timestampValue":{"type":"google.protobuf.Timestamp","id":10},"stringValue":{"type":"string","id":17},"bytesValue":{"type":"bytes","id":18},"referenceValue":{"type":"string","id":5},"geoPointValue":{"type":"google.type.LatLng","id":8},"arrayValue":{"type":"ArrayValue","id":9},"mapValue":{"type":"MapValue","id":6}}},"ArrayValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"MapValue":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"BitSequence":{"fields":{"bitmap":{"type":"bytes","id":1},"padding":{"type":"int32","id":2}}},"BloomFilter":{"fields":{"bits":{"type":"BitSequence","id":1},"hashCount":{"type":"int32","id":2}}},"DocumentMask":{"fields":{"fieldPaths":{"rule":"repeated","type":"string","id":1}}},"Precondition":{"oneofs":{"conditionType":{"oneof":["exists","updateTime"]}},"fields":{"exists":{"type":"bool","id":1},"updateTime":{"type":"google.protobuf.Timestamp","id":2}}},"TransactionOptions":{"oneofs":{"mode":{"oneof":["readOnly","readWrite"]}},"fields":{"readOnly":{"type":"ReadOnly","id":2},"readWrite":{"type":"ReadWrite","id":3}},"nested":{"ReadWrite":{"fields":{"retryTransaction":{"type":"bytes","id":1}}},"ReadOnly":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"readTime":{"type":"google.protobuf.Timestamp","id":2}}}}},"Firestore":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"GetDocument":{"requestType":"GetDocumentRequest","responseType":"Document","options":{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},"ListDocuments":{"requestType":"ListDocumentsRequest","responseType":"ListDocumentsResponse","options":{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}","(google.api.http).additional_bindings.get":"/v1/{parent=projects/*/databases/*/documents}/{collection_id}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}","additional_bindings":{"get":"/v1/{parent=projects/*/databases/*/documents}/{collection_id}"}}}]},"UpdateDocument":{"requestType":"UpdateDocumentRequest","responseType":"Document","options":{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","body":"document"}},{"(google.api.method_signature)":"document,update_mask"}]},"DeleteDocument":{"requestType":"DeleteDocumentRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},"BatchGetDocuments":{"requestType":"BatchGetDocumentsRequest","responseType":"BatchGetDocumentsResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:batchGet","body":"*"}}]},"BeginTransaction":{"requestType":"BeginTransactionRequest","responseType":"BeginTransactionResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","body":"*"}},{"(google.api.method_signature)":"database"}]},"Commit":{"requestType":"CommitRequest","responseType":"CommitResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:commit","body":"*"}},{"(google.api.method_signature)":"database,writes"}]},"Rollback":{"requestType":"RollbackRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:rollback","body":"*"}},{"(google.api.method_signature)":"database,transaction"}]},"RunQuery":{"requestType":"RunQueryRequest","responseType":"RunQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","body":"*"}}}]},"RunAggregationQuery":{"requestType":"RunAggregationQueryRequest","responseType":"RunAggregationQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","body":"*"}}}]},"PartitionQuery":{"requestType":"PartitionQueryRequest","responseType":"PartitionQueryResponse","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","body":"*"}}}]},"Write":{"requestType":"WriteRequest","requestStream":true,"responseType":"WriteResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:write","body":"*"}}]},"Listen":{"requestType":"ListenRequest","requestStream":true,"responseType":"ListenResponse","responseStream":true,"options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:listen","body":"*"}}]},"ListCollectionIds":{"requestType":"ListCollectionIdsRequest","responseType":"ListCollectionIdsResponse","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","body":"*","additional_bindings":{"post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","body":"*"}}},{"(google.api.method_signature)":"parent"}]},"BatchWrite":{"requestType":"BatchWriteRequest","responseType":"BatchWriteResponse","options":{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","body":"*"}}]},"CreateDocument":{"requestType":"CreateDocumentRequest","responseType":"Document","options":{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},"parsedOptions":[{"(google.api.http)":{"post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","body":"document"}}]}}},"GetDocumentRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":5}}},"ListDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"pageSize":{"type":"int32","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"pageToken":{"type":"string","id":4,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"orderBy":{"type":"string","id":6,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"mask":{"type":"DocumentMask","id":7,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"transaction":{"type":"bytes","id":8},"readTime":{"type":"google.protobuf.Timestamp","id":10},"showMissing":{"type":"bool","id":12}}},"ListDocumentsResponse":{"fields":{"documents":{"rule":"repeated","type":"Document","id":1},"nextPageToken":{"type":"string","id":2}}},"CreateDocumentRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documentId":{"type":"string","id":3},"document":{"type":"Document","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":5}}},"UpdateDocumentRequest":{"fields":{"document":{"type":"Document","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"DocumentMask","id":2},"mask":{"type":"DocumentMask","id":3},"currentDocument":{"type":"Precondition","id":4}}},"DeleteDocumentRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"currentDocument":{"type":"Precondition","id":2}}},"BatchGetDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documents":{"rule":"repeated","type":"string","id":2},"mask":{"type":"DocumentMask","id":3},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"BatchGetDocumentsResponse":{"oneofs":{"result":{"oneof":["found","missing"]}},"fields":{"found":{"type":"Document","id":1},"missing":{"type":"string","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"BeginTransactionRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"options":{"type":"TransactionOptions","id":2}}},"BeginTransactionResponse":{"fields":{"transaction":{"type":"bytes","id":1}}},"CommitRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"transaction":{"type":"bytes","id":3}}},"CommitResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"commitTime":{"type":"google.protobuf.Timestamp","id":2}}},"RollbackRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"transaction":{"type":"bytes","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"RunQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"transaction":{"type":"bytes","id":5},"newTransaction":{"type":"TransactionOptions","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":7},"explainOptions":{"type":"ExplainOptions","id":10,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"RunQueryResponse":{"oneofs":{"continuationSelector":{"oneof":["done"]}},"fields":{"transaction":{"type":"bytes","id":2},"document":{"type":"Document","id":1},"readTime":{"type":"google.protobuf.Timestamp","id":3},"skippedResults":{"type":"int32","id":4},"done":{"type":"bool","id":6},"explainMetrics":{"type":"ExplainMetrics","id":11}}},"RunAggregationQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredAggregationQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredAggregationQuery":{"type":"StructuredAggregationQuery","id":2},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":6},"explainOptions":{"type":"ExplainOptions","id":8,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"RunAggregationQueryResponse":{"fields":{"result":{"type":"AggregationResult","id":1},"transaction":{"type":"bytes","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":3},"explainMetrics":{"type":"ExplainMetrics","id":10}}},"PartitionQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"partitionCount":{"type":"int64","id":3},"pageToken":{"type":"string","id":4},"pageSize":{"type":"int32","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":6}}},"PartitionQueryResponse":{"fields":{"partitions":{"rule":"repeated","type":"Cursor","id":1},"nextPageToken":{"type":"string","id":2}}},"WriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"streamId":{"type":"string","id":2},"writes":{"rule":"repeated","type":"Write","id":3},"streamToken":{"type":"bytes","id":4},"labels":{"keyType":"string","type":"string","id":5}}},"WriteResponse":{"fields":{"streamId":{"type":"string","id":1},"streamToken":{"type":"bytes","id":2},"writeResults":{"rule":"repeated","type":"WriteResult","id":3},"commitTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListenRequest":{"oneofs":{"targetChange":{"oneof":["addTarget","removeTarget"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"addTarget":{"type":"Target","id":2},"removeTarget":{"type":"int32","id":3},"labels":{"keyType":"string","type":"string","id":4}}},"ListenResponse":{"oneofs":{"responseType":{"oneof":["targetChange","documentChange","documentDelete","documentRemove","filter"]}},"fields":{"targetChange":{"type":"TargetChange","id":2},"documentChange":{"type":"DocumentChange","id":3},"documentDelete":{"type":"DocumentDelete","id":4},"documentRemove":{"type":"DocumentRemove","id":6},"filter":{"type":"ExistenceFilter","id":5}}},"Target":{"oneofs":{"targetType":{"oneof":["query","documents"]},"resumeType":{"oneof":["resumeToken","readTime"]}},"fields":{"query":{"type":"QueryTarget","id":2},"documents":{"type":"DocumentsTarget","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":11},"targetId":{"type":"int32","id":5},"once":{"type":"bool","id":6},"expectedCount":{"type":"google.protobuf.Int32Value","id":12}},"nested":{"DocumentsTarget":{"fields":{"documents":{"rule":"repeated","type":"string","id":2}}},"QueryTarget":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1},"structuredQuery":{"type":"StructuredQuery","id":2}}}}},"TargetChange":{"fields":{"targetChangeType":{"type":"TargetChangeType","id":1},"targetIds":{"rule":"repeated","type":"int32","id":2},"cause":{"type":"google.rpc.Status","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"TargetChangeType":{"values":{"NO_CHANGE":0,"ADD":1,"REMOVE":2,"CURRENT":3,"RESET":4}}}},"ListCollectionIdsRequest":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListCollectionIdsResponse":{"fields":{"collectionIds":{"rule":"repeated","type":"string","id":1},"nextPageToken":{"type":"string","id":2}}},"BatchWriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"labels":{"keyType":"string","type":"string","id":3}}},"BatchWriteResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"status":{"rule":"repeated","type":"google.rpc.Status","id":2}}},"StructuredQuery":{"fields":{"select":{"type":"Projection","id":1},"from":{"rule":"repeated","type":"CollectionSelector","id":2},"where":{"type":"Filter","id":3},"orderBy":{"rule":"repeated","type":"Order","id":4},"startAt":{"type":"Cursor","id":7},"endAt":{"type":"Cursor","id":8},"offset":{"type":"int32","id":6},"limit":{"type":"google.protobuf.Int32Value","id":5},"findNearest":{"type":"FindNearest","id":9,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"CollectionSelector":{"fields":{"collectionId":{"type":"string","id":2},"allDescendants":{"type":"bool","id":3}}},"Filter":{"oneofs":{"filterType":{"oneof":["compositeFilter","fieldFilter","unaryFilter"]}},"fields":{"compositeFilter":{"type":"CompositeFilter","id":1},"fieldFilter":{"type":"FieldFilter","id":2},"unaryFilter":{"type":"UnaryFilter","id":3}}},"CompositeFilter":{"fields":{"op":{"type":"Operator","id":1},"filters":{"rule":"repeated","type":"Filter","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"AND":1,"OR":2}}}},"FieldFilter":{"fields":{"field":{"type":"FieldReference","id":1},"op":{"type":"Operator","id":2},"value":{"type":"Value","id":3}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"LESS_THAN":1,"LESS_THAN_OR_EQUAL":2,"GREATER_THAN":3,"GREATER_THAN_OR_EQUAL":4,"EQUAL":5,"NOT_EQUAL":6,"ARRAY_CONTAINS":7,"IN":8,"ARRAY_CONTAINS_ANY":9,"NOT_IN":10}}}},"UnaryFilter":{"oneofs":{"operandType":{"oneof":["field"]}},"fields":{"op":{"type":"Operator","id":1},"field":{"type":"FieldReference","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"IS_NAN":2,"IS_NULL":3,"IS_NOT_NAN":4,"IS_NOT_NULL":5}}}},"Order":{"fields":{"field":{"type":"FieldReference","id":1},"direction":{"type":"Direction","id":2}}},"Direction":{"values":{"DIRECTION_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}},"FieldReference":{"fields":{"fieldPath":{"type":"string","id":2}}},"Projection":{"fields":{"fields":{"rule":"repeated","type":"FieldReference","id":2}}},"FindNearest":{"fields":{"vectorField":{"type":"FieldReference","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"queryVector":{"type":"Value","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"distanceMeasure":{"type":"DistanceMeasure","id":3,"options":{"(google.api.field_behavior)":"REQUIRED"}},"limit":{"type":"google.protobuf.Int32Value","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"distanceResultField":{"type":"string","id":5,"options":{"(google.api.field_behavior)":"OPTIONAL"}},"distanceThreshold":{"type":"google.protobuf.DoubleValue","id":6,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"DistanceMeasure":{"values":{"DISTANCE_MEASURE_UNSPECIFIED":0,"EUCLIDEAN":1,"COSINE":2,"DOT_PRODUCT":3}}}}}},"StructuredAggregationQuery":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"structuredQuery":{"type":"StructuredQuery","id":1},"aggregations":{"rule":"repeated","type":"Aggregation","id":3,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"Aggregation":{"oneofs":{"operator":{"oneof":["count","sum","avg"]}},"fields":{"count":{"type":"Count","id":1},"sum":{"type":"Sum","id":2},"avg":{"type":"Avg","id":3},"alias":{"type":"string","id":7,"options":{"(google.api.field_behavior)":"OPTIONAL"}}},"nested":{"Count":{"fields":{"upTo":{"type":"google.protobuf.Int64Value","id":1,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"Sum":{"fields":{"field":{"type":"StructuredQuery.FieldReference","id":1}}},"Avg":{"fields":{"field":{"type":"StructuredQuery.FieldReference","id":1}}}}}}},"Cursor":{"fields":{"values":{"rule":"repeated","type":"Value","id":1},"before":{"type":"bool","id":2}}},"ExplainOptions":{"fields":{"analyze":{"type":"bool","id":1,"options":{"(google.api.field_behavior)":"OPTIONAL"}}}},"ExplainMetrics":{"fields":{"planSummary":{"type":"PlanSummary","id":1},"executionStats":{"type":"ExecutionStats","id":2}}},"PlanSummary":{"fields":{"indexesUsed":{"rule":"repeated","type":"google.protobuf.Struct","id":1}}},"ExecutionStats":{"fields":{"resultsReturned":{"type":"int64","id":1},"executionDuration":{"type":"google.protobuf.Duration","id":3},"readOperations":{"type":"int64","id":4},"debugStats":{"type":"google.protobuf.Struct","id":5}}},"Write":{"oneofs":{"operation":{"oneof":["update","delete","transform"]}},"fields":{"update":{"type":"Document","id":1},"delete":{"type":"string","id":2},"transform":{"type":"DocumentTransform","id":6},"updateMask":{"type":"DocumentMask","id":3},"updateTransforms":{"rule":"repeated","type":"DocumentTransform.FieldTransform","id":7},"currentDocument":{"type":"Precondition","id":4}}},"DocumentTransform":{"fields":{"document":{"type":"string","id":1},"fieldTransforms":{"rule":"repeated","type":"FieldTransform","id":2}},"nested":{"FieldTransform":{"oneofs":{"transformType":{"oneof":["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},"fields":{"fieldPath":{"type":"string","id":1},"setToServerValue":{"type":"ServerValue","id":2},"increment":{"type":"Value","id":3},"maximum":{"type":"Value","id":4},"minimum":{"type":"Value","id":5},"appendMissingElements":{"type":"ArrayValue","id":6},"removeAllFromArray":{"type":"ArrayValue","id":7}},"nested":{"ServerValue":{"values":{"SERVER_VALUE_UNSPECIFIED":0,"REQUEST_TIME":1}}}}}},"WriteResult":{"fields":{"updateTime":{"type":"google.protobuf.Timestamp","id":1},"transformResults":{"rule":"repeated","type":"Value","id":2}}},"DocumentChange":{"fields":{"document":{"type":"Document","id":1},"targetIds":{"rule":"repeated","type":"int32","id":5},"removedTargetIds":{"rule":"repeated","type":"int32","id":6}}},"DocumentDelete":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"DocumentRemove":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ExistenceFilter":{"fields":{"targetId":{"type":"int32","id":1},"count":{"type":"int32","id":2},"unchangedNames":{"type":"BloomFilter","id":3}}}}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}},"Empty":{"fields":{}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}}}},"type":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/type/dayofweek;dayofweek","java_multiple_files":true,"java_outer_classname":"DayOfWeekProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}},"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$1$1={options:options$1,nested:nested$1};var hasRequiredFirestore_client$1;function requireFirestore_client$1(){if(hasRequiredFirestore_client$1)return firestore_client$1;hasRequiredFirestore_client$1=1;var t={};Object.defineProperty(firestore_client$1,"__esModule",{value:!0}),firestore_client$1.FirestoreClient=void 0;const e=require$$1$3,r=require$$1$1,u=requireLogger(),d=require$$19,m=require$$33.version;class c{constructor(o,s){var h,v,E,y,A;this._terminated=!1,this._stubFailed=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}};const w=this.constructor;if(o?.universe_domain&&o?.universeDomain&&o?.universe_domain!==o?.universeDomain)throw new Error("Please set either universe_domain or universeDomain, but not both.");const I=typeof process=="object"&&typeof t=="object"?t.GOOGLE_CLOUD_UNIVERSE_DOMAIN:void 0;this._universeDomain=(E=(v=(h=o?.universeDomain)!==null&&h!==void 0?h:o?.universe_domain)!==null&&v!==void 0?v:I)!==null&&E!==void 0?E:"googleapis.com",this._servicePath="firestore."+this._universeDomain;const _=o?.servicePath||o?.apiEndpoint||this._servicePath;this._providedCustomServicePath=!!(o?.servicePath||o?.apiEndpoint);const S=o?.port||w.port,j=(y=o?.clientConfig)!==null&&y!==void 0?y:{},K=(A=o?.fallback)!==null&&A!==void 0?A:typeof window<"u"&&typeof window?.fetch=="function";o=Object.assign({servicePath:_,port:S,clientConfig:j,fallback:K},o),o.numericEnums=!0,_!==this._servicePath&&!("scopes"in o)&&(o.scopes=w.scopes),s||(s=requireFallback()),this._gaxModule=o.fallback?s.fallback:s,this._gaxGrpc=new this._gaxModule.GrpcClient(o),this._opts=o,this.auth=this._gaxGrpc.auth,this.auth.useJWTAccessWithScope=!0,this.auth.defaultServicePath=this._servicePath,_===this._servicePath&&(this.auth.defaultScopes=w.scopes),this.locationsClient=new this._gaxModule.LocationsClient(this._gaxGrpc,o);const J=[`gax/${this._gaxModule.version}`,`gapic/${m}`];typeof process=="object"&&"versions"in process?J.push(`gl-node/${process.versions.node}`):J.push(`gl-web/${this._gaxModule.version}`),o.fallback?J.push(`rest/${this._gaxGrpc.grpcVersion}`):J.push(`grpc/${this._gaxGrpc.grpcVersion}`),o.libName&&o.libVersion&&J.push(`${o.libName}/${o.libVersion}`),this._protos=this._gaxGrpc.loadProtoJSON(r),this.descriptors.page={listDocuments:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","documents"),partitionQuery:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","partitions"),listCollectionIds:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","collectionIds")},this.descriptors.stream={batchGetDocuments:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),runQuery:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),runAggregationQuery:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),write:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries),listen:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!o.fallback,!!o.gaxServerStreamingRetries)},this._defaults=this._gaxGrpc.constructSettings("google.firestore.v1.Firestore",d,o.clientConfig||{},{"x-goog-api-client":J.join(" ")}),this.innerApiCalls={},this.warn=this._gaxModule.warn}initialize(){if(this.firestoreStub&&!this._stubFailed)return this.firestoreStub;this._stubFailed=!1,this.firestoreStub=this._gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.firestore.v1.Firestore"):this._protos.google.firestore.v1.Firestore,this._opts,this._providedCustomServicePath);const o=["getDocument","listDocuments","updateDocument","deleteDocument","batchGetDocuments","beginTransaction","commit","rollback","runQuery","runAggregationQuery","partitionQuery","write","listen","listCollectionIds","batchWrite","createDocument"];for(const s of o){const h=this.firestoreStub.then(y=>(...A)=>{if(this._terminated){if(s in this.descriptors.stream){const I=new e.PassThrough({objectMode:!0});return setImmediate(()=>{I.emit("error",new this._gaxModule.GoogleError("The client has already been closed."))}),I}return Promise.reject("The client has already been closed.")}return y[s].apply(y,A)},y=>(this._stubFailed=!0,(0,u.logger)("initialize",null,"Failed to create the gax client stub.",y),()=>{throw y})),v=this.descriptors.page[s]||this.descriptors.stream[s]||void 0,E=this._gaxModule.createApiCall(h,this._defaults[s],v,this._opts.fallback);this.innerApiCalls[s]=E}return this.firestoreStub}static get servicePath(){return typeof process=="object"&&typeof process.emitWarning=="function"&&process.emitWarning("Static servicePath is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}static get apiEndpoint(){return typeof process=="object"&&typeof process.emitWarning=="function"&&process.emitWarning("Static apiEndpoint is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}get apiEndpoint(){return this._servicePath}get universeDomain(){return this._universeDomain}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/datastore"]}getProjectId(o){if(o){this.auth.getProjectId(o);return}return this.auth.getProjectId()}getDocument(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(v=o.name)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.getDocument(o,E,h)}updateDocument(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"document.name":(v=o.document.name)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.updateDocument(o,E,h)}deleteDocument(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(v=o.name)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.deleteDocument(o,E,h)}beginTransaction(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=o.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.beginTransaction(o,E,h)}commit(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=o.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.commit(o,E,h)}rollback(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=o.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.rollback(o,E,h)}batchWrite(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(v=o.database)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.batchWrite(o,E,h)}createDocument(o,s,h){var v,E;o=o||{};let y;return typeof s=="function"&&h===void 0?(h=s,y={}):y=s,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:"",collection_id:(E=o.collectionId)!==null&&E!==void 0?E:""}),this.initialize(),this.innerApiCalls.createDocument(o,y,h)}batchGetDocuments(o,s){var h;return o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(h=o.database)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.batchGetDocuments(o,s)}runQuery(o,s){var h;return o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.runQuery(o,s)}runAggregationQuery(o,s){var h;return o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.runAggregationQuery(o,s)}write(o){return this.initialize(),this.innerApiCalls.write(null,o)}listen(o){return this.initialize(),this.innerApiCalls.listen(null,o)}listDocuments(o,s,h){var v,E;o=o||{};let y;return typeof s=="function"&&h===void 0?(h=s,y={}):y=s,y=y||{},y.otherArgs=y.otherArgs||{},y.otherArgs.headers=y.otherArgs.headers||{},y.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:"",collection_id:(E=o.collectionId)!==null&&E!==void 0?E:""}),this.initialize(),this.innerApiCalls.listDocuments(o,y,h)}listDocumentsStream(o,s){var h,v;o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:"",collection_id:(v=o.collectionId)!==null&&v!==void 0?v:""});const y=this._defaults.listDocuments.merge(s);return this.initialize(),this.descriptors.page.listDocuments.createStream(this.innerApiCalls.listDocuments,o,y)}listDocumentsAsync(o,s){var h,v;o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:"",collection_id:(v=o.collectionId)!==null&&v!==void 0?v:""});const y=this._defaults.listDocuments.merge(s);return this.initialize(),this.descriptors.page.listDocuments.asyncIterate(this.innerApiCalls.listDocuments,o,y)}partitionQuery(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.partitionQuery(o,E,h)}partitionQueryStream(o,s){var h;o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:""});const E=this._defaults.partitionQuery.merge(s);return this.initialize(),this.descriptors.page.partitionQuery.createStream(this.innerApiCalls.partitionQuery,o,E)}partitionQueryAsync(o,s){var h;o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:""});const E=this._defaults.partitionQuery.merge(s);return this.initialize(),this.descriptors.page.partitionQuery.asyncIterate(this.innerApiCalls.partitionQuery,o,E)}listCollectionIds(o,s,h){var v;o=o||{};let E;return typeof s=="function"&&h===void 0?(h=s,E={}):E=s,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(v=o.parent)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.listCollectionIds(o,E,h)}listCollectionIdsStream(o,s){var h;o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:""});const E=this._defaults.listCollectionIds.merge(s);return this.initialize(),this.descriptors.page.listCollectionIds.createStream(this.innerApiCalls.listCollectionIds,o,E)}listCollectionIdsAsync(o,s){var h;o=o||{},s=s||{},s.otherArgs=s.otherArgs||{},s.otherArgs.headers=s.otherArgs.headers||{},s.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=o.parent)!==null&&h!==void 0?h:""});const E=this._defaults.listCollectionIds.merge(s);return this.initialize(),this.descriptors.page.listCollectionIds.asyncIterate(this.innerApiCalls.listCollectionIds,o,E)}getLocation(o,s,h){return this.locationsClient.getLocation(o,s,h)}listLocationsAsync(o,s){return this.locationsClient.listLocationsAsync(o,s)}close(){return this.firestoreStub&&!this._terminated?this.firestoreStub.then(o=>{this._terminated=!0,o.close(),this.locationsClient.close()}):Promise.resolve()}}return firestore_client$1.FirestoreClient=c,firestore_client$1}var hasRequiredV1;function requireV1(){return hasRequiredV1||(hasRequiredV1=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirestoreAdminClient=e.FirestoreClient=void 0;const r=requireFirestore_admin_client();Object.defineProperty(e,"FirestoreAdminClient",{enumerable:!0,get:function(){return r.FirestoreAdminClient}});const u=requireFirestore_client$1();Object.defineProperty(e,"FirestoreClient",{enumerable:!0,get:function(){return u.FirestoreClient}});const d=t.exports;t.exports=u.FirestoreClient,t.exports=Object.assign(t.exports,d)}(v1,v1.exports)),v1.exports}var hasRequiredEnabledTraceUtil;function requireEnabledTraceUtil(){if(hasRequiredEnabledTraceUtil)return enabledTraceUtil;hasRequiredEnabledTraceUtil=1,Object.defineProperty(enabledTraceUtil,"__esModule",{value:!0}),enabledTraceUtil.EnabledTraceUtil=void 0;const t=require$$0$1,e=requireSpan(),r=requireTraceUtil(),u=require$$19,d=requireV1(),m=requirePath(),c=requireSrc(),a=u.interfaces["google.firestore.v1.Firestore"];class o{constructor(h){var v,E,y,A,w,I,_,S,j,K,J,H,U,P,Z,ie;let ue=(v=h.openTelemetry)===null||v===void 0?void 0:v.tracerProvider;if(!ue){const{trace:Se}=require$$0$1;ue=Se.getTracerProvider()}this.tracerProvider=ue;const le=require$$33.version,ne=require$$33.name;try{this.tracer=this.tracerProvider.getTracer(ne,le)}catch{throw new Error("The object provided for 'tracerProvider' does not conform to the TracerProvider interface.")}this.settingsAttributes={},this.settingsAttributes["otel.scope.name"]=ne,this.settingsAttributes["otel.scope.version"]=le,h.projectId&&(this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.project_id`]=h.projectId),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.database_id`]=h.databaseId||m.DEFAULT_DATABASE_ID;const ye=(y=(E=h.servicePath)!==null&&E!==void 0?E:h.host)!==null&&y!==void 0?y:"firestore.googleapis.com",fe=(A=h.port)!==null&&A!==void 0?A:d.FirestoreClient.port;this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.host`]=`${ye}:${fe}`,h.preferRest!==void 0&&(this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.prefer_REST`]=h.preferRest),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.max_idle_channels`]=(w=h.maxIdleChannels)!==null&&w!==void 0?w:c.DEFAULT_MAX_IDLE_CHANNELS;const Te=a.retry_params.default,Ae=(j=(S=(_=(I=h.clientConfig)===null||I===void 0?void 0:I.interfaces)===null||_===void 0?void 0:_["google.firestore.v1.Firestore"])===null||S===void 0?void 0:S.retry_params)===null||j===void 0?void 0:j.default;this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.initial_retry_delay`]=this.millisToSecondString((K=Ae?.initial_retry_delay_millis)!==null&&K!==void 0?K:Te.initial_retry_delay_millis),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.initial_rpc_timeout`]=this.millisToSecondString((J=Ae?.initial_rpc_timeout_millis)!==null&&J!==void 0?J:Te.initial_rpc_timeout_millis),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.total_timeout`]=this.millisToSecondString((H=Ae?.total_timeout_millis)!==null&&H!==void 0?H:Te.total_timeout_millis),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.max_retry_delay`]=this.millisToSecondString((U=Ae?.max_retry_delay_millis)!==null&&U!==void 0?U:Te.max_retry_delay_millis),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.max_rpc_timeout`]=this.millisToSecondString((P=Ae?.max_rpc_timeout_millis)!==null&&P!==void 0?P:Te.max_rpc_timeout_millis),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.retry_delay_multiplier`]=(Z=Ae?.retry_delay_multiplier.toString())!==null&&Z!==void 0?Z:Te.retry_delay_multiplier.toString(),this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.rpc_timeout_multiplier`]=(ie=Ae?.rpc_timeout_multiplier.toString())!==null&&ie!==void 0?ie:Te.rpc_timeout_multiplier.toString()}recordProjectId(h){this.settingsAttributes[`${r.ATTRIBUTE_SETTINGS_PREFIX}.project_id`]=h,this.currentSpan().setAttributes(this.settingsAttributes)}millisToSecondString(h){return`${h/1e3}s`}endSpan(h,v){h.setStatus({code:t.SpanStatusCode.ERROR,message:v.message}),h.recordException(v),h.end()}startActiveSpan(h,v,E){return this.tracer.startActiveSpan(h,{attributes:E},y=>{this.addCommonAttributes(y);try{let A=v(new e.Span(y));return A instanceof Promise?A=A.then(w=>(y.end(),w)).catch(w=>(this.endSpan(y,w),Promise.reject(w))):y.end(),A}catch(A){throw this.endSpan(y,A),A}})}startSpan(h){const v=this.tracer.startSpan(h,void 0,t.context.active());return this.addCommonAttributes(v),new e.Span(v)}currentSpan(){return new e.Span(t.trace.getActiveSpan())}addCommonAttributes(h){h.setAttributes(this.settingsAttributes)}}return enabledTraceUtil.EnabledTraceUtil=o,enabledTraceUtil}var v1beta1={exports:{}},firestore_client={};const options={syntax:"proto3"},nested=JSON.parse('{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"Timestamp":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"Struct":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Value":{"oneofs":{"kind":{"oneof":["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},"fields":{"nullValue":{"type":"NullValue","id":1},"numberValue":{"type":"double","id":2},"stringValue":{"type":"string","id":3},"boolValue":{"type":"bool","id":4},"structValue":{"type":"Struct","id":5},"listValue":{"type":"ListValue","id":6}}},"NullValue":{"values":{"NULL_VALUE":0}},"ListValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"Edition":{"values":{"EDITION_UNKNOWN":0,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5,"options":{"default":false}},"serverStreaming":{"type":"bool","id":6,"options":{"default":false}}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10,"options":{"default":false}},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27,"options":{"default":false}},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16,"options":{"default":false}},"javaGenericServices":{"type":"bool","id":17,"options":{"default":false}},"pyGenericServices":{"type":"bool","id":18,"options":{"default":false}},"deprecated":{"type":"bool","id":23,"options":{"default":false}},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1,"options":{"default":false}},"noStandardDescriptorAccessor":{"type":"bool","id":2,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5,"options":{"default":false}},"unverifiedLazy":{"type":"bool","id":15,"options":{"default":false}},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"weak":{"type":"bool","id":10,"options":{"default":false}},"debugRedact":{"type":"bool","id":16,"options":{"default":false}},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19,"options":{"packed":false}},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}}}},"OneofOptions":{"fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3,"options":{"default":false}},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1,"options":{"default":false}},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33,"options":{"default":false}},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33,"options":{"default":false}},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO2","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}}},"extensions":[[1000,1000],[1001,1001],[1002,1002],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}}}},"FeatureSetDefaults":{"fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"features":{"type":"FeatureSet","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"Duration":{"fields":{"seconds":{"type":"int64","id":1},"nanos":{"type":"int32","id":2}}},"DoubleValue":{"fields":{"value":{"type":"double","id":1}}},"FloatValue":{"fields":{"value":{"type":"float","id":1}}},"Int64Value":{"fields":{"value":{"type":"int64","id":1}}},"UInt64Value":{"fields":{"value":{"type":"uint64","id":1}}},"Int32Value":{"fields":{"value":{"type":"int32","id":1}}},"UInt32Value":{"fields":{"value":{"type":"uint32","id":1}}},"BoolValue":{"fields":{"value":{"type":"bool","id":1}}},"StringValue":{"fields":{"value":{"type":"string","id":1}}},"BytesValue":{"fields":{"value":{"type":"bytes","id":1}}},"Empty":{"fields":{}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"FieldMask":{"fields":{"paths":{"rule":"repeated","type":"string","id":1}}}}},"firestore":{"nested":{"v1beta1":{"options":{"csharp_namespace":"Google.Cloud.Firestore.V1Beta1","go_package":"cloud.google.com/go/firestore/apiv1beta1/firestorepb;firestorepb","java_multiple_files":true,"java_outer_classname":"UndeliverableFirstGenEventProto","java_package":"com.google.firestore.v1beta1","objc_class_prefix":"GCFS","php_namespace":"Google\\\\Cloud\\\\Firestore\\\\V1beta1","ruby_package":"Google::Cloud::Firestore::V1beta1"},"nested":{"DocumentMask":{"fields":{"fieldPaths":{"rule":"repeated","type":"string","id":1}}},"Precondition":{"oneofs":{"conditionType":{"oneof":["exists","updateTime"]}},"fields":{"exists":{"type":"bool","id":1},"updateTime":{"type":"google.protobuf.Timestamp","id":2}}},"TransactionOptions":{"oneofs":{"mode":{"oneof":["readOnly","readWrite"]}},"fields":{"readOnly":{"type":"ReadOnly","id":2},"readWrite":{"type":"ReadWrite","id":3}},"nested":{"ReadWrite":{"fields":{"retryTransaction":{"type":"bytes","id":1}}},"ReadOnly":{"oneofs":{"consistencySelector":{"oneof":["readTime"]}},"fields":{"readTime":{"type":"google.protobuf.Timestamp","id":2}}}}},"Document":{"fields":{"name":{"type":"string","id":1},"fields":{"keyType":"string","type":"Value","id":2},"createTime":{"type":"google.protobuf.Timestamp","id":3},"updateTime":{"type":"google.protobuf.Timestamp","id":4}}},"Value":{"oneofs":{"valueType":{"oneof":["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},"fields":{"nullValue":{"type":"google.protobuf.NullValue","id":11},"booleanValue":{"type":"bool","id":1},"integerValue":{"type":"int64","id":2},"doubleValue":{"type":"double","id":3},"timestampValue":{"type":"google.protobuf.Timestamp","id":10},"stringValue":{"type":"string","id":17},"bytesValue":{"type":"bytes","id":18},"referenceValue":{"type":"string","id":5},"geoPointValue":{"type":"google.type.LatLng","id":8},"arrayValue":{"type":"ArrayValue","id":9},"mapValue":{"type":"MapValue","id":6}}},"ArrayValue":{"fields":{"values":{"rule":"repeated","type":"Value","id":1}}},"MapValue":{"fields":{"fields":{"keyType":"string","type":"Value","id":1}}},"Firestore":{"options":{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},"methods":{"GetDocument":{"requestType":"GetDocumentRequest","responseType":"Document","options":{"(google.api.http).get":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"}}]},"ListDocuments":{"requestType":"ListDocumentsRequest","responseType":"ListDocumentsResponse","options":{"(google.api.http).get":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},"parsedOptions":[{"(google.api.http)":{"get":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},"UpdateDocument":{"requestType":"UpdateDocumentRequest","responseType":"Document","options":{"(google.api.http).patch":"/v1beta1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},"parsedOptions":[{"(google.api.http)":{"patch":"/v1beta1/{document.name=projects/*/databases/*/documents/*/**}","body":"document"}},{"(google.api.method_signature)":"document,update_mask"}]},"DeleteDocument":{"requestType":"DeleteDocumentRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).delete":"/v1beta1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},"parsedOptions":[{"(google.api.http)":{"delete":"/v1beta1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},"BatchGetDocuments":{"requestType":"BatchGetDocumentsRequest","responseType":"BatchGetDocumentsResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:batchGet","body":"*"}}]},"BeginTransaction":{"requestType":"BeginTransactionRequest","responseType":"BeginTransactionResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:beginTransaction","body":"*"}},{"(google.api.method_signature)":"database"}]},"Commit":{"requestType":"CommitRequest","responseType":"CommitResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:commit","body":"*"}},{"(google.api.method_signature)":"database,writes"}]},"Rollback":{"requestType":"RollbackRequest","responseType":"google.protobuf.Empty","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:rollback","body":"*"}},{"(google.api.method_signature)":"database,transaction"}]},"RunQuery":{"requestType":"RunQueryRequest","responseType":"RunQueryResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:runQuery","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:runQuery","body":"*"}}}]},"PartitionQuery":{"requestType":"PartitionQueryRequest","responseType":"PartitionQueryResponse","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:partitionQuery","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","body":"*"}}}]},"Write":{"requestType":"WriteRequest","requestStream":true,"responseType":"WriteResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:write","body":"*"}}]},"Listen":{"requestType":"ListenRequest","requestStream":true,"responseType":"ListenResponse","responseStream":true,"options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:listen","body":"*"}}]},"ListCollectionIds":{"requestType":"ListCollectionIdsRequest","responseType":"ListCollectionIdsResponse","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents}:listCollectionIds","body":"*","additional_bindings":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","body":"*"}}},{"(google.api.method_signature)":"parent"}]},"BatchWrite":{"requestType":"BatchWriteRequest","responseType":"BatchWriteResponse","options":{"(google.api.http).post":"/v1beta1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{database=projects/*/databases/*}/documents:batchWrite","body":"*"}}]},"CreateDocument":{"requestType":"CreateDocumentRequest","responseType":"Document","options":{"(google.api.http).post":"/v1beta1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},"parsedOptions":[{"(google.api.http)":{"post":"/v1beta1/{parent=projects/*/databases/*/documents/**}/{collection_id}","body":"document"}}]}}},"GetDocumentRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":5}}},"ListDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":3},"pageToken":{"type":"string","id":4},"orderBy":{"type":"string","id":6},"mask":{"type":"DocumentMask","id":7},"transaction":{"type":"bytes","id":8},"readTime":{"type":"google.protobuf.Timestamp","id":10},"showMissing":{"type":"bool","id":12}}},"ListDocumentsResponse":{"fields":{"documents":{"rule":"repeated","type":"Document","id":1},"nextPageToken":{"type":"string","id":2}}},"CreateDocumentRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"collectionId":{"type":"string","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documentId":{"type":"string","id":3},"document":{"type":"Document","id":4,"options":{"(google.api.field_behavior)":"REQUIRED"}},"mask":{"type":"DocumentMask","id":5}}},"UpdateDocumentRequest":{"fields":{"document":{"type":"Document","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"updateMask":{"type":"DocumentMask","id":2},"mask":{"type":"DocumentMask","id":3},"currentDocument":{"type":"Precondition","id":4}}},"DeleteDocumentRequest":{"fields":{"name":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"currentDocument":{"type":"Precondition","id":2}}},"BatchGetDocumentsRequest":{"oneofs":{"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"documents":{"rule":"repeated","type":"string","id":2},"mask":{"type":"DocumentMask","id":3},"transaction":{"type":"bytes","id":4},"newTransaction":{"type":"TransactionOptions","id":5},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"BatchGetDocumentsResponse":{"oneofs":{"result":{"oneof":["found","missing"]}},"fields":{"found":{"type":"Document","id":1},"missing":{"type":"string","id":2},"transaction":{"type":"bytes","id":3},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"BeginTransactionRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"options":{"type":"TransactionOptions","id":2}}},"BeginTransactionResponse":{"fields":{"transaction":{"type":"bytes","id":1}}},"CommitRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"transaction":{"type":"bytes","id":3}}},"CommitResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"commitTime":{"type":"google.protobuf.Timestamp","id":2}}},"RollbackRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"transaction":{"type":"bytes","id":2,"options":{"(google.api.field_behavior)":"REQUIRED"}}}},"RunQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]},"consistencySelector":{"oneof":["transaction","newTransaction","readTime"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"transaction":{"type":"bytes","id":5},"newTransaction":{"type":"TransactionOptions","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":7}}},"RunQueryResponse":{"fields":{"transaction":{"type":"bytes","id":2},"document":{"type":"Document","id":1},"readTime":{"type":"google.protobuf.Timestamp","id":3},"skippedResults":{"type":"int32","id":4}}},"PartitionQueryRequest":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"structuredQuery":{"type":"StructuredQuery","id":2},"partitionCount":{"type":"int64","id":3},"pageToken":{"type":"string","id":4},"pageSize":{"type":"int32","id":5}}},"PartitionQueryResponse":{"fields":{"partitions":{"rule":"repeated","type":"Cursor","id":1},"nextPageToken":{"type":"string","id":2}}},"WriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"streamId":{"type":"string","id":2},"writes":{"rule":"repeated","type":"Write","id":3},"streamToken":{"type":"bytes","id":4},"labels":{"keyType":"string","type":"string","id":5}}},"WriteResponse":{"fields":{"streamId":{"type":"string","id":1},"streamToken":{"type":"bytes","id":2},"writeResults":{"rule":"repeated","type":"WriteResult","id":3},"commitTime":{"type":"google.protobuf.Timestamp","id":4}}},"ListenRequest":{"oneofs":{"targetChange":{"oneof":["addTarget","removeTarget"]}},"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"addTarget":{"type":"Target","id":2},"removeTarget":{"type":"int32","id":3},"labels":{"keyType":"string","type":"string","id":4}}},"ListenResponse":{"oneofs":{"responseType":{"oneof":["targetChange","documentChange","documentDelete","documentRemove","filter"]}},"fields":{"targetChange":{"type":"TargetChange","id":2},"documentChange":{"type":"DocumentChange","id":3},"documentDelete":{"type":"DocumentDelete","id":4},"documentRemove":{"type":"DocumentRemove","id":6},"filter":{"type":"ExistenceFilter","id":5}}},"Target":{"oneofs":{"targetType":{"oneof":["query","documents"]},"resumeType":{"oneof":["resumeToken","readTime"]}},"fields":{"query":{"type":"QueryTarget","id":2},"documents":{"type":"DocumentsTarget","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":11},"targetId":{"type":"int32","id":5},"once":{"type":"bool","id":6}},"nested":{"DocumentsTarget":{"fields":{"documents":{"rule":"repeated","type":"string","id":2}}},"QueryTarget":{"oneofs":{"queryType":{"oneof":["structuredQuery"]}},"fields":{"parent":{"type":"string","id":1},"structuredQuery":{"type":"StructuredQuery","id":2}}}}},"TargetChange":{"fields":{"targetChangeType":{"type":"TargetChangeType","id":1},"targetIds":{"rule":"repeated","type":"int32","id":2},"cause":{"type":"google.rpc.Status","id":3},"resumeToken":{"type":"bytes","id":4},"readTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"TargetChangeType":{"values":{"NO_CHANGE":0,"ADD":1,"REMOVE":2,"CURRENT":3,"RESET":4}}}},"ListCollectionIdsRequest":{"fields":{"parent":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"pageSize":{"type":"int32","id":2},"pageToken":{"type":"string","id":3}}},"ListCollectionIdsResponse":{"fields":{"collectionIds":{"rule":"repeated","type":"string","id":1},"nextPageToken":{"type":"string","id":2}}},"BatchWriteRequest":{"fields":{"database":{"type":"string","id":1,"options":{"(google.api.field_behavior)":"REQUIRED"}},"writes":{"rule":"repeated","type":"Write","id":2},"labels":{"keyType":"string","type":"string","id":3}}},"BatchWriteResponse":{"fields":{"writeResults":{"rule":"repeated","type":"WriteResult","id":1},"status":{"rule":"repeated","type":"google.rpc.Status","id":2}}},"StructuredQuery":{"fields":{"select":{"type":"Projection","id":1},"from":{"rule":"repeated","type":"CollectionSelector","id":2},"where":{"type":"Filter","id":3},"orderBy":{"rule":"repeated","type":"Order","id":4},"startAt":{"type":"Cursor","id":7},"endAt":{"type":"Cursor","id":8},"offset":{"type":"int32","id":6},"limit":{"type":"google.protobuf.Int32Value","id":5}},"nested":{"CollectionSelector":{"fields":{"collectionId":{"type":"string","id":2},"allDescendants":{"type":"bool","id":3}}},"Filter":{"oneofs":{"filterType":{"oneof":["compositeFilter","fieldFilter","unaryFilter"]}},"fields":{"compositeFilter":{"type":"CompositeFilter","id":1},"fieldFilter":{"type":"FieldFilter","id":2},"unaryFilter":{"type":"UnaryFilter","id":3}}},"CompositeFilter":{"fields":{"op":{"type":"Operator","id":1},"filters":{"rule":"repeated","type":"Filter","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"AND":1}}}},"FieldFilter":{"fields":{"field":{"type":"FieldReference","id":1},"op":{"type":"Operator","id":2},"value":{"type":"Value","id":3}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"LESS_THAN":1,"LESS_THAN_OR_EQUAL":2,"GREATER_THAN":3,"GREATER_THAN_OR_EQUAL":4,"EQUAL":5,"NOT_EQUAL":6,"ARRAY_CONTAINS":7,"IN":8,"ARRAY_CONTAINS_ANY":9,"NOT_IN":10}}}},"UnaryFilter":{"oneofs":{"operandType":{"oneof":["field"]}},"fields":{"op":{"type":"Operator","id":1},"field":{"type":"FieldReference","id":2}},"nested":{"Operator":{"values":{"OPERATOR_UNSPECIFIED":0,"IS_NAN":2,"IS_NULL":3,"IS_NOT_NAN":4,"IS_NOT_NULL":5}}}},"FieldReference":{"fields":{"fieldPath":{"type":"string","id":2}}},"Order":{"fields":{"field":{"type":"FieldReference","id":1},"direction":{"type":"Direction","id":2}}},"Projection":{"fields":{"fields":{"rule":"repeated","type":"FieldReference","id":2}}},"Direction":{"values":{"DIRECTION_UNSPECIFIED":0,"ASCENDING":1,"DESCENDING":2}}}},"Cursor":{"fields":{"values":{"rule":"repeated","type":"Value","id":1},"before":{"type":"bool","id":2}}},"Write":{"oneofs":{"operation":{"oneof":["update","delete","transform"]}},"fields":{"update":{"type":"Document","id":1},"delete":{"type":"string","id":2},"transform":{"type":"DocumentTransform","id":6},"updateMask":{"type":"DocumentMask","id":3},"updateTransforms":{"rule":"repeated","type":"DocumentTransform.FieldTransform","id":7},"currentDocument":{"type":"Precondition","id":4}}},"DocumentTransform":{"fields":{"document":{"type":"string","id":1},"fieldTransforms":{"rule":"repeated","type":"FieldTransform","id":2}},"nested":{"FieldTransform":{"oneofs":{"transformType":{"oneof":["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},"fields":{"fieldPath":{"type":"string","id":1},"setToServerValue":{"type":"ServerValue","id":2},"increment":{"type":"Value","id":3},"maximum":{"type":"Value","id":4},"minimum":{"type":"Value","id":5},"appendMissingElements":{"type":"ArrayValue","id":6},"removeAllFromArray":{"type":"ArrayValue","id":7}},"nested":{"ServerValue":{"values":{"SERVER_VALUE_UNSPECIFIED":0,"REQUEST_TIME":1}}}}}},"WriteResult":{"fields":{"updateTime":{"type":"google.protobuf.Timestamp","id":1},"transformResults":{"rule":"repeated","type":"Value","id":2}}},"DocumentChange":{"fields":{"document":{"type":"Document","id":1},"targetIds":{"rule":"repeated","type":"int32","id":5},"removedTargetIds":{"rule":"repeated","type":"int32","id":6}}},"DocumentDelete":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":6},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"DocumentRemove":{"fields":{"document":{"type":"string","id":1},"removedTargetIds":{"rule":"repeated","type":"int32","id":2},"readTime":{"type":"google.protobuf.Timestamp","id":4}}},"ExistenceFilter":{"fields":{"targetId":{"type":"int32","id":1},"count":{"type":"int32","id":2}}},"UndeliverableFirstGenEvent":{"fields":{"message":{"type":"string","id":1},"reason":{"type":"Reason","id":2},"documentName":{"type":"string","id":3},"documentChangeType":{"type":"DocumentChangeType","id":4},"functionName":{"rule":"repeated","type":"string","id":5},"triggeredTime":{"type":"google.protobuf.Timestamp","id":6}},"nested":{"Reason":{"values":{"REASON_UNSPECIFIED":0,"EXCEEDING_SIZE_LIMIT":1}},"DocumentChangeType":{"values":{"DOCUMENT_CHANGE_TYPE_UNSPECIFIED":0,"CREATE":1,"DELETE":2,"UPDATE":3}}}}}}}},"type":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/type/dayofweek;dayofweek","java_multiple_files":true,"java_outer_classname":"DayOfWeekProto","java_package":"com.google.type","objc_class_prefix":"GTP"},"nested":{"LatLng":{"fields":{"latitude":{"type":"double","id":1},"longitude":{"type":"double","id":2}}},"DayOfWeek":{"values":{"DAY_OF_WEEK_UNSPECIFIED":0,"MONDAY":1,"TUESDAY":2,"WEDNESDAY":3,"THURSDAY":4,"FRIDAY":5,"SATURDAY":6,"SUNDAY":7}}}},"api":{"options":{"go_package":"google.golang.org/genproto/googleapis/api/annotations;annotations","java_multiple_files":true,"java_outer_classname":"ResourceProto","java_package":"com.google.api","objc_class_prefix":"GAPI","cc_enable_arenas":true},"nested":{"http":{"type":"HttpRule","id":72295728,"extend":"google.protobuf.MethodOptions"},"Http":{"fields":{"rules":{"rule":"repeated","type":"HttpRule","id":1},"fullyDecodeReservedExpansion":{"type":"bool","id":2}}},"HttpRule":{"oneofs":{"pattern":{"oneof":["get","put","post","delete","patch","custom"]}},"fields":{"selector":{"type":"string","id":1},"get":{"type":"string","id":2},"put":{"type":"string","id":3},"post":{"type":"string","id":4},"delete":{"type":"string","id":5},"patch":{"type":"string","id":6},"custom":{"type":"CustomHttpPattern","id":8},"body":{"type":"string","id":7},"responseBody":{"type":"string","id":12},"additionalBindings":{"rule":"repeated","type":"HttpRule","id":11}}},"CustomHttpPattern":{"fields":{"kind":{"type":"string","id":1},"path":{"type":"string","id":2}}},"methodSignature":{"rule":"repeated","type":"string","id":1051,"extend":"google.protobuf.MethodOptions"},"defaultHost":{"type":"string","id":1049,"extend":"google.protobuf.ServiceOptions"},"oauthScopes":{"type":"string","id":1050,"extend":"google.protobuf.ServiceOptions"},"apiVersion":{"type":"string","id":525000001,"extend":"google.protobuf.ServiceOptions"},"CommonLanguageSettings":{"fields":{"referenceDocsUri":{"type":"string","id":1,"options":{"deprecated":true}},"destinations":{"rule":"repeated","type":"ClientLibraryDestination","id":2},"selectiveGapicGeneration":{"type":"SelectiveGapicGeneration","id":3}}},"ClientLibrarySettings":{"fields":{"version":{"type":"string","id":1},"launchStage":{"type":"LaunchStage","id":2},"restNumericEnums":{"type":"bool","id":3},"javaSettings":{"type":"JavaSettings","id":21},"cppSettings":{"type":"CppSettings","id":22},"phpSettings":{"type":"PhpSettings","id":23},"pythonSettings":{"type":"PythonSettings","id":24},"nodeSettings":{"type":"NodeSettings","id":25},"dotnetSettings":{"type":"DotnetSettings","id":26},"rubySettings":{"type":"RubySettings","id":27},"goSettings":{"type":"GoSettings","id":28}}},"Publishing":{"fields":{"methodSettings":{"rule":"repeated","type":"MethodSettings","id":2},"newIssueUri":{"type":"string","id":101},"documentationUri":{"type":"string","id":102},"apiShortName":{"type":"string","id":103},"githubLabel":{"type":"string","id":104},"codeownerGithubTeams":{"rule":"repeated","type":"string","id":105},"docTagPrefix":{"type":"string","id":106},"organization":{"type":"ClientLibraryOrganization","id":107},"librarySettings":{"rule":"repeated","type":"ClientLibrarySettings","id":109},"protoReferenceDocumentationUri":{"type":"string","id":110},"restReferenceDocumentationUri":{"type":"string","id":111}}},"JavaSettings":{"fields":{"libraryPackage":{"type":"string","id":1},"serviceClassNames":{"keyType":"string","type":"string","id":2},"common":{"type":"CommonLanguageSettings","id":3}}},"CppSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PhpSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"PythonSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"experimentalFeatures":{"type":"ExperimentalFeatures","id":2}},"nested":{"ExperimentalFeatures":{"fields":{"restAsyncIoEnabled":{"type":"bool","id":1},"protobufPythonicTypesEnabled":{"type":"bool","id":2}}}}},"NodeSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"DotnetSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2},"renamedResources":{"keyType":"string","type":"string","id":3},"ignoredResources":{"rule":"repeated","type":"string","id":4},"forcedNamespaceAliases":{"rule":"repeated","type":"string","id":5},"handwrittenSignatures":{"rule":"repeated","type":"string","id":6}}},"RubySettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1}}},"GoSettings":{"fields":{"common":{"type":"CommonLanguageSettings","id":1},"renamedServices":{"keyType":"string","type":"string","id":2}}},"MethodSettings":{"fields":{"selector":{"type":"string","id":1},"longRunning":{"type":"LongRunning","id":2},"autoPopulatedFields":{"rule":"repeated","type":"string","id":3}},"nested":{"LongRunning":{"fields":{"initialPollDelay":{"type":"google.protobuf.Duration","id":1},"pollDelayMultiplier":{"type":"float","id":2},"maxPollDelay":{"type":"google.protobuf.Duration","id":3},"totalPollTimeout":{"type":"google.protobuf.Duration","id":4}}}}},"ClientLibraryOrganization":{"values":{"CLIENT_LIBRARY_ORGANIZATION_UNSPECIFIED":0,"CLOUD":1,"ADS":2,"PHOTOS":3,"STREET_VIEW":4,"SHOPPING":5,"GEO":6,"GENERATIVE_AI":7}},"ClientLibraryDestination":{"values":{"CLIENT_LIBRARY_DESTINATION_UNSPECIFIED":0,"GITHUB":10,"PACKAGE_MANAGER":20}},"SelectiveGapicGeneration":{"fields":{"methods":{"rule":"repeated","type":"string","id":1},"generateOmittedAsInternal":{"type":"bool","id":2}}},"LaunchStage":{"values":{"LAUNCH_STAGE_UNSPECIFIED":0,"UNIMPLEMENTED":6,"PRELAUNCH":7,"EARLY_ACCESS":1,"ALPHA":2,"BETA":3,"GA":4,"DEPRECATED":5}},"fieldBehavior":{"rule":"repeated","type":"google.api.FieldBehavior","id":1052,"extend":"google.protobuf.FieldOptions","options":{"packed":false}},"FieldBehavior":{"values":{"FIELD_BEHAVIOR_UNSPECIFIED":0,"OPTIONAL":1,"REQUIRED":2,"OUTPUT_ONLY":3,"INPUT_ONLY":4,"IMMUTABLE":5,"UNORDERED_LIST":6,"NON_EMPTY_DEFAULT":7,"IDENTIFIER":8}},"resourceReference":{"type":"google.api.ResourceReference","id":1055,"extend":"google.protobuf.FieldOptions"},"resourceDefinition":{"rule":"repeated","type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.FileOptions"},"resource":{"type":"google.api.ResourceDescriptor","id":1053,"extend":"google.protobuf.MessageOptions"},"ResourceDescriptor":{"fields":{"type":{"type":"string","id":1},"pattern":{"rule":"repeated","type":"string","id":2},"nameField":{"type":"string","id":3},"history":{"type":"History","id":4},"plural":{"type":"string","id":5},"singular":{"type":"string","id":6},"style":{"rule":"repeated","type":"Style","id":10}},"nested":{"History":{"values":{"HISTORY_UNSPECIFIED":0,"ORIGINALLY_SINGLE_PATTERN":1,"FUTURE_MULTI_PATTERN":2}},"Style":{"values":{"STYLE_UNSPECIFIED":0,"DECLARATIVE_FRIENDLY":1}}}},"ResourceReference":{"fields":{"type":{"type":"string","id":1},"childType":{"type":"string","id":2}}}}},"rpc":{"options":{"cc_enable_arenas":true,"go_package":"google.golang.org/genproto/googleapis/rpc/status;status","java_multiple_files":true,"java_outer_classname":"StatusProto","java_package":"com.google.rpc","objc_class_prefix":"RPC"},"nested":{"Status":{"fields":{"code":{"type":"int32","id":1},"message":{"type":"string","id":2},"details":{"rule":"repeated","type":"google.protobuf.Any","id":3}}}}}}}}'),require$$1={options,nested},interfaces={"google.firestore.v1beta1.Firestore":{retry_codes:{non_idempotent:[],idempotent:["DEADLINE_EXCEEDED","UNAVAILABLE"]},retry_params:{default:{initial_retry_delay_millis:100,retry_delay_multiplier:1.3,max_retry_delay_millis:6e4,initial_rpc_timeout_millis:6e4,rpc_timeout_multiplier:1,max_rpc_timeout_millis:6e4,total_timeout_millis:6e5}},methods:{GetDocument:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},ListDocuments:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},UpdateDocument:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},DeleteDocument:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},BatchGetDocuments:{timeout_millis:3e5,retry_codes_name:"idempotent",retry_params_name:"default"},BeginTransaction:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},Commit:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"},Rollback:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},RunQuery:{timeout_millis:3e5,retry_codes_name:"idempotent",retry_params_name:"default"},PartitionQuery:{retry_codes_name:"non_idempotent",retry_params_name:"default"},Write:{timeout_millis:864e5,retry_codes_name:"non_idempotent",retry_params_name:"default"},Listen:{timeout_millis:864e5,retry_codes_name:"idempotent",retry_params_name:"default"},ListCollectionIds:{timeout_millis:6e4,retry_codes_name:"idempotent",retry_params_name:"default"},BatchWrite:{retry_codes_name:"non_idempotent",retry_params_name:"default"},CreateDocument:{timeout_millis:6e4,retry_codes_name:"non_idempotent",retry_params_name:"default"}}}},require$$2={interfaces};var hasRequiredFirestore_client;function requireFirestore_client(){if(hasRequiredFirestore_client)return firestore_client;hasRequiredFirestore_client=1;var t={};Object.defineProperty(firestore_client,"__esModule",{value:!0}),firestore_client.FirestoreClient=void 0;const e=require$$1$3,r=require$$1,u=require$$2,d=require$$33.version;class m{constructor(a,o){var s,h,v,E,y;this._terminated=!1,this.descriptors={page:{},stream:{},longrunning:{},batching:{}};const A=this.constructor;if(a?.universe_domain&&a?.universeDomain&&a?.universe_domain!==a?.universeDomain)throw new Error("Please set either universe_domain or universeDomain, but not both.");const w=typeof process=="object"&&typeof t=="object"?t.GOOGLE_CLOUD_UNIVERSE_DOMAIN:void 0;this._universeDomain=(v=(h=(s=a?.universeDomain)!==null&&s!==void 0?s:a?.universe_domain)!==null&&h!==void 0?h:w)!==null&&v!==void 0?v:"googleapis.com",this._servicePath="firestore."+this._universeDomain;const I=a?.servicePath||a?.apiEndpoint||this._servicePath;this._providedCustomServicePath=!!(a?.servicePath||a?.apiEndpoint);const _=a?.port||A.port,S=(E=a?.clientConfig)!==null&&E!==void 0?E:{},j=(y=a?.fallback)!==null&&y!==void 0?y:typeof window<"u"&&typeof window?.fetch=="function";a=Object.assign({servicePath:I,port:_,clientConfig:S,fallback:j},a),a.numericEnums=!0,I!==this._servicePath&&!("scopes"in a)&&(a.scopes=A.scopes),o||(o=requireFallback()),this._gaxModule=a.fallback?o.fallback:o,this._gaxGrpc=new this._gaxModule.GrpcClient(a),this._opts=a,this.auth=this._gaxGrpc.auth,this.auth.useJWTAccessWithScope=!0,this.auth.defaultServicePath=this._servicePath,I===this._servicePath&&(this.auth.defaultScopes=A.scopes);const K=[`gax/${this._gaxModule.version}`,`gapic/${d}`];typeof process=="object"&&"versions"in process?K.push(`gl-node/${process.versions.node}`):K.push(`gl-web/${this._gaxModule.version}`),a.fallback?K.push(`rest/${this._gaxGrpc.grpcVersion}`):K.push(`grpc/${this._gaxGrpc.grpcVersion}`),a.libName&&a.libVersion&&K.push(`${a.libName}/${a.libVersion}`),this._protos=this._gaxGrpc.loadProtoJSON(r),this.descriptors.page={listDocuments:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","documents"),partitionQuery:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","partitions"),listCollectionIds:new this._gaxModule.PageDescriptor("pageToken","nextPageToken","collectionIds")},this.descriptors.stream={batchGetDocuments:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries),runQuery:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.SERVER_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries),write:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries),listen:new this._gaxModule.StreamDescriptor(this._gaxModule.StreamType.BIDI_STREAMING,!!a.fallback,!!a.gaxServerStreamingRetries)},this._defaults=this._gaxGrpc.constructSettings("google.firestore.v1beta1.Firestore",u,a.clientConfig||{},{"x-goog-api-client":K.join(" ")}),this.innerApiCalls={},this.warn=this._gaxModule.warn}initialize(){if(this.firestoreStub)return this.firestoreStub;this.firestoreStub=this._gaxGrpc.createStub(this._opts.fallback?this._protos.lookupService("google.firestore.v1beta1.Firestore"):this._protos.google.firestore.v1beta1.Firestore,this._opts,this._providedCustomServicePath);const a=["getDocument","listDocuments","updateDocument","deleteDocument","batchGetDocuments","beginTransaction","commit","rollback","runQuery","partitionQuery","write","listen","listCollectionIds","batchWrite","createDocument"];for(const o of a){const s=this.firestoreStub.then(E=>(...y)=>{if(this._terminated){if(o in this.descriptors.stream){const w=new e.PassThrough({objectMode:!0});return setImmediate(()=>{w.emit("error",new this._gaxModule.GoogleError("The client has already been closed."))}),w}return Promise.reject("The client has already been closed.")}return E[o].apply(E,y)},E=>()=>{throw E}),h=this.descriptors.page[o]||this.descriptors.stream[o]||void 0,v=this._gaxModule.createApiCall(s,this._defaults[o],h,this._opts.fallback);this.innerApiCalls[o]=v}return this.firestoreStub}static get servicePath(){return typeof process=="object"&&typeof process.emitWarning=="function"&&process.emitWarning("Static servicePath is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}static get apiEndpoint(){return typeof process=="object"&&typeof process.emitWarning=="function"&&process.emitWarning("Static apiEndpoint is deprecated, please use the instance method instead.","DeprecationWarning"),"firestore.googleapis.com"}get apiEndpoint(){return this._servicePath}get universeDomain(){return this._universeDomain}static get port(){return 443}static get scopes(){return["https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/datastore"]}getProjectId(a){if(a){this.auth.getProjectId(a);return}return this.auth.getProjectId()}getDocument(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=a.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.getDocument(a,v,s)}updateDocument(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({"document.name":(h=a.document.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.updateDocument(a,v,s)}deleteDocument(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({name:(h=a.name)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.deleteDocument(a,v,s)}beginTransaction(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(h=a.database)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.beginTransaction(a,v,s)}commit(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(h=a.database)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.commit(a,v,s)}rollback(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(h=a.database)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.rollback(a,v,s)}batchWrite(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(h=a.database)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.batchWrite(a,v,s)}createDocument(a,o,s){var h,v;a=a||{};let E;return typeof o=="function"&&s===void 0?(s=o,E={}):E=o,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:"",collection_id:(v=a.collectionId)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.createDocument(a,E,s)}batchGetDocuments(a,o){var s;return a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({database:(s=a.database)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.batchGetDocuments(a,o)}runQuery(a,o){var s;return a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=a.parent)!==null&&s!==void 0?s:""}),this.initialize(),this.innerApiCalls.runQuery(a,o)}write(a){return this.initialize(),this.innerApiCalls.write(null,a)}listen(a){return this.initialize(),this.innerApiCalls.listen(null,a)}listDocuments(a,o,s){var h,v;a=a||{};let E;return typeof o=="function"&&s===void 0?(s=o,E={}):E=o,E=E||{},E.otherArgs=E.otherArgs||{},E.otherArgs.headers=E.otherArgs.headers||{},E.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:"",collection_id:(v=a.collectionId)!==null&&v!==void 0?v:""}),this.initialize(),this.innerApiCalls.listDocuments(a,E,s)}listDocumentsStream(a,o){var s,h;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=a.parent)!==null&&s!==void 0?s:"",collection_id:(h=a.collectionId)!==null&&h!==void 0?h:""});const E=this._defaults.listDocuments.merge(o);return this.initialize(),this.descriptors.page.listDocuments.createStream(this.innerApiCalls.listDocuments,a,E)}listDocumentsAsync(a,o){var s,h;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=a.parent)!==null&&s!==void 0?s:"",collection_id:(h=a.collectionId)!==null&&h!==void 0?h:""});const E=this._defaults.listDocuments.merge(o);return this.initialize(),this.descriptors.page.listDocuments.asyncIterate(this.innerApiCalls.listDocuments,a,E)}partitionQuery(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.partitionQuery(a,v,s)}partitionQueryStream(a,o){var s;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=a.parent)!==null&&s!==void 0?s:""});const v=this._defaults.partitionQuery.merge(o);return this.initialize(),this.descriptors.page.partitionQuery.createStream(this.innerApiCalls.partitionQuery,a,v)}partitionQueryAsync(a,o){var s;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=a.parent)!==null&&s!==void 0?s:""});const v=this._defaults.partitionQuery.merge(o);return this.initialize(),this.descriptors.page.partitionQuery.asyncIterate(this.innerApiCalls.partitionQuery,a,v)}listCollectionIds(a,o,s){var h;a=a||{};let v;return typeof o=="function"&&s===void 0?(s=o,v={}):v=o,v=v||{},v.otherArgs=v.otherArgs||{},v.otherArgs.headers=v.otherArgs.headers||{},v.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(h=a.parent)!==null&&h!==void 0?h:""}),this.initialize(),this.innerApiCalls.listCollectionIds(a,v,s)}listCollectionIdsStream(a,o){var s;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=a.parent)!==null&&s!==void 0?s:""});const v=this._defaults.listCollectionIds.merge(o);return this.initialize(),this.descriptors.page.listCollectionIds.createStream(this.innerApiCalls.listCollectionIds,a,v)}listCollectionIdsAsync(a,o){var s;a=a||{},o=o||{},o.otherArgs=o.otherArgs||{},o.otherArgs.headers=o.otherArgs.headers||{},o.otherArgs.headers["x-goog-request-params"]=this._gaxModule.routingHeader.fromParams({parent:(s=a.parent)!==null&&s!==void 0?s:""});const v=this._defaults.listCollectionIds.merge(o);return this.initialize(),this.descriptors.page.listCollectionIds.asyncIterate(this.innerApiCalls.listCollectionIds,a,v)}close(){return this.firestoreStub&&!this._terminated?this.firestoreStub.then(a=>{this._terminated=!0,a.close()}):Promise.resolve()}}return firestore_client.FirestoreClient=m,firestore_client}var hasRequiredV1beta1;function requireV1beta1(){return hasRequiredV1beta1||(hasRequiredV1beta1=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.FirestoreClient=void 0;const r=requireFirestore_client();Object.defineProperty(e,"FirestoreClient",{enumerable:!0,get:function(){return r.FirestoreClient}});const u=t.exports;t.exports=r.FirestoreClient,t.exports=Object.assign(t.exports,u)}(v1beta1,v1beta1.exports)),v1beta1.exports}var hasRequiredSrc;function requireSrc(){return hasRequiredSrc||(hasRequiredSrc=1,function(t,e){var r={};/*!
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(e,"__esModule",{value:!0}),e.Firestore=e.DEFAULT_MAX_IDLE_CHANNELS=e.DEFAULT_MAX_TRANSACTION_ATTEMPTS=e.MAX_REQUEST_RETRIES=e.AggregateField=e.Aggregate=e.setLogFunction=e.QueryPartition=e.CollectionGroup=e.GeoPoint=e.FieldPath=e.DocumentChange=e.Timestamp=e.Transaction=e.WriteResult=e.WriteBatch=e.Filter=e.VectorValue=e.FieldValue=e.QueryDocumentSnapshot=e.DocumentSnapshot=e.BulkWriter=e.Query=e.QuerySnapshot=e.DocumentReference=e.CollectionReference=void 0;const u=require$$1$3,d=require$$1$3,m=requireBackoff(),c=requireBulkWriter(),a=requireBundle(),o=requireConvert(),s=requireDocumentReader(),h=requireDocument(),v=requireLogger(),E=requirePath(),y=requirePool(),A=requireCollectionReference(),w=requireDocumentReference(),I=requireSerializer(),_=requireTimestamp(),S=requireTransaction(),j=requireUtil(),K=requireValidate(),J=requireWriteBatch(),U=require$$19.interfaces["google.firestore.v1.Firestore"],P=requireCollectionGroup();Object.defineProperty(e,"CollectionGroup",{enumerable:!0,get:function(){return P.CollectionGroup}});const Z=requireRecursiveDelete(),ie=requireTraceUtil(),ue=requireDisabledTraceUtil(),le=requireEnabledTraceUtil();var ne=requireCollectionReference();Object.defineProperty(e,"CollectionReference",{enumerable:!0,get:function(){return ne.CollectionReference}});var ye=requireDocumentReference();Object.defineProperty(e,"DocumentReference",{enumerable:!0,get:function(){return ye.DocumentReference}});var fe=requireQuerySnapshot();Object.defineProperty(e,"QuerySnapshot",{enumerable:!0,get:function(){return fe.QuerySnapshot}});var Te=requireQuery();Object.defineProperty(e,"Query",{enumerable:!0,get:function(){return Te.Query}});var Ae=requireBulkWriter();Object.defineProperty(e,"BulkWriter",{enumerable:!0,get:function(){return Ae.BulkWriter}});var Se=requireDocument();Object.defineProperty(e,"DocumentSnapshot",{enumerable:!0,get:function(){return Se.DocumentSnapshot}}),Object.defineProperty(e,"QueryDocumentSnapshot",{enumerable:!0,get:function(){return Se.QueryDocumentSnapshot}});var be=requireFieldValue();Object.defineProperty(e,"FieldValue",{enumerable:!0,get:function(){return be.FieldValue}}),Object.defineProperty(e,"VectorValue",{enumerable:!0,get:function(){return be.VectorValue}});var we=requireFilter();Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return we.Filter}});var Ce=requireWriteBatch();Object.defineProperty(e,"WriteBatch",{enumerable:!0,get:function(){return Ce.WriteBatch}}),Object.defineProperty(e,"WriteResult",{enumerable:!0,get:function(){return Ce.WriteResult}});var je=requireTransaction();Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return je.Transaction}});var Fe=requireTimestamp();Object.defineProperty(e,"Timestamp",{enumerable:!0,get:function(){return Fe.Timestamp}});var Ve=requireDocumentChange();Object.defineProperty(e,"DocumentChange",{enumerable:!0,get:function(){return Ve.DocumentChange}});var Ge=requirePath();Object.defineProperty(e,"FieldPath",{enumerable:!0,get:function(){return Ge.FieldPath}});var Le=requireGeoPoint();Object.defineProperty(e,"GeoPoint",{enumerable:!0,get:function(){return Le.GeoPoint}});var Be=requireQueryPartition();Object.defineProperty(e,"QueryPartition",{enumerable:!0,get:function(){return Be.QueryPartition}});var $e=requireLogger();Object.defineProperty(e,"setLogFunction",{enumerable:!0,get:function(){return $e.setLogFunction}});var he=requireAggregate();Object.defineProperty(e,"Aggregate",{enumerable:!0,get:function(){return he.Aggregate}}),Object.defineProperty(e,"AggregateField",{enumerable:!0,get:function(){return he.AggregateField}});const p=require$$33.version;(0,v.setLibVersion)(p);/*!
 * DO NOT REMOVE THE FOLLOWING NAMESPACE DEFINITIONS
 *//*!
 * HTTP header for the resource prefix to improve routing and project isolation
 * by the backend.
 */const V="google-cloud-resource-prefix";e.MAX_REQUEST_RETRIES=5,e.DEFAULT_MAX_TRANSACTION_ATTEMPTS=5;/*!
 * The default number of idle GRPC channel to keep.
 */e.DEFAULT_MAX_IDLE_CHANNELS=1;/*!
 * The maximum number of concurrent requests supported by a single GRPC channel,
 * as enforced by Google's Frontend. If the SDK issues more than 100 concurrent
 * operations, we need to use more than one GAPIC client since these clients
 * multiplex all requests over a single channel.
 */const R=100;class ce{getBulkWriter(){return this._bulkWriter||(this._bulkWriter=this.bulkWriter()),this._bulkWriter}constructor(qe){this._settings={},this._settingsFrozen=!1,this._serializer=null,this._projectId=void 0,this._databaseId=void 0,this.registeredListenersCount=0,this.bulkWritersCount=0;const g={libName:"gccl",libVersion:p};qe&&qe.firebaseVersion&&(g.libVersion+=" fire/"+qe.firebaseVersion),qe&&qe.firebaseAdminVersion&&(g.libVersion+=" fire-admin/"+qe.firebaseAdminVersion),this.validateAndApplySettings({...qe,...g}),this._traceUtil=this.newTraceUtilInstance(this._settings);const ee=U.retry_params.default;this._backoffSettings={initialDelayMs:ee.initial_retry_delay_millis,maxDelayMs:ee.max_retry_delay_millis,backoffFactor:ee.retry_delay_multiplier};const ae=this._settings.maxIdleChannels===void 0?e.DEFAULT_MAX_IDLE_CHANNELS:this._settings.maxIdleChannels;this._clientPool=new y.ClientPool(R,ae,l=>{var X;let oe;const _e=!this._settings.preferRest||l?!1:"rest";let He;if(_e?this._gaxFallback?He=this._gaxFallback:He=this._gaxFallback=requireFallback():this._gax?He=this._gax:He=this._gax=requireFallback(),this._settings.ssl===!1){const wt={sslCreds:((X=this._settings.grpc)!==null&&X!==void 0?X:requireFallback().grpc).credentials.createInsecure(),...this._settings,fallback:_e};_e&&(wt.protocol="http"),oe=new t.exports.v1(wt,He)}else oe=new t.exports.v1({...this._settings,fallback:_e},He);return(0,v.logger)("clientFactory",null,"Initialized Firestore GAPIC Client (useFallback: %s)",_e),oe},l=>l.close()),(0,v.logger)("Firestore",null,"Initialized Firestore")}settings(qe){if((0,K.validateObject)("settings",qe),(0,K.validateString)("settings.projectId",qe.projectId,{optional:!0}),(0,K.validateString)("settings.databaseId",qe.databaseId,{optional:!0}),this._settingsFrozen)throw new Error("Firestore has already been initialized. You can only call settings() once, and only before calling any other methods on a Firestore object.");const g={...this._settings,...qe};this.validateAndApplySettings(g),this._traceUtil=this.newTraceUtilInstance(this._settings),this._settingsFrozen=!0}validateAndApplySettings(qe){var g;qe.projectId!==void 0&&((0,K.validateString)("settings.projectId",qe.projectId),this._projectId=qe.projectId),qe.databaseId!==void 0&&((0,K.validateString)("settings.databaseId",qe.databaseId),this._databaseId=qe.databaseId);let ee=null;const ae=(0,j.tryGetPreferRestEnvironmentVariable)();qe.preferRest===void 0&&ae!==void 0&&(qe={...qe,preferRest:ae}),r.FIRESTORE_EMULATOR_HOST?((0,K.validateHost)("FIRESTORE_EMULATOR_HOST",r.FIRESTORE_EMULATOR_HOST),qe={...qe,host:r.FIRESTORE_EMULATOR_HOST,ssl:!1},ee=new d.URL(`http://${qe.host}`)):qe.host!==void 0&&((0,K.validateHost)("settings.host",qe.host),ee=new d.URL(`http://${qe.host}`)),ee!==null&&((qe.servicePath!==void 0&&qe.servicePath!==ee.hostname||qe.apiEndpoint!==void 0&&qe.apiEndpoint!==ee.hostname)&&console.warn(`The provided host (${ee.hostname}) in "settings" does not match the existing host (${(g=qe.servicePath)!==null&&g!==void 0?g:qe.apiEndpoint}). Using the provided host.`),qe.servicePath=ee.hostname,ee.port!==""&&qe.port===void 0&&(qe.port=Number(ee.port)),delete qe.host,delete qe.apiEndpoint),qe.ssl!==void 0&&(0,K.validateBoolean)("settings.ssl",qe.ssl),qe.maxIdleChannels!==void 0&&(0,K.validateInteger)("settings.maxIdleChannels",qe.maxIdleChannels,{minValue:0}),this._settings=qe,this._settings.toJSON=function(){const l=Object.assign({},this);return l.credentials&&(l.credentials={private_key:"***",client_email:"***"}),l},this._serializer=new I.Serializer(this)}newTraceUtilInstance(qe){let g=!0;if("FIRESTORE_ENABLE_TRACING"in r){const ee=r.FIRESTORE_ENABLE_TRACING.toLowerCase();(ee==="on"||ee==="true")&&(g=!0),(ee==="off"||ee==="false")&&(g=!1)}return g?new le.EnabledTraceUtil(qe):new ue.DisabledTraceUtil}get projectId(){if(this._projectId===void 0)throw new Error("INTERNAL ERROR: Client is not yet ready to issue requests.");return this._projectId}get databaseId(){return this._databaseId||E.DEFAULT_DATABASE_ID}get formattedName(){return`projects/${this.projectId}/databases/${this.databaseId}`}doc(qe){(0,E.validateResourcePath)("documentPath",qe);const g=E.ResourcePath.EMPTY.append(qe);if(!g.isDocument)throw new Error(`Value for argument "documentPath" must point to a document, but was "${qe}". Your path does not contain an even number of components.`);return new w.DocumentReference(this,g)}collection(qe){(0,E.validateResourcePath)("collectionPath",qe);const g=E.ResourcePath.EMPTY.append(qe);if(!g.isCollection)throw new Error(`Value for argument "collectionPath" must point to a collection, but was "${qe}". Your path does not contain an odd number of components.`);return new A.CollectionReference(this,g)}collectionGroup(qe){if(qe.indexOf("/")!==-1)throw new Error(`Invalid collectionId '${qe}'. Collection IDs must not contain '/'.`);return new P.CollectionGroup(this,qe,void 0)}batch(){return new J.WriteBatch(this)}bulkWriter(qe){return new c.BulkWriter(this,qe)}snapshot_(qe,g,ee){let ae,l;if(ee===void 0||ee==="protobufJS")ae=_e=>_e,l=_e=>_e;else if(ee==="json")ae=o.timestampFromJson,l=o.fieldsFromJson;else throw new Error(`Unsupported encoding format. Expected "json" or "protobufJS", but was "${ee}".`);let X,oe;return typeof qe=="string"?(X=new w.DocumentReference(this,E.QualifiedResourcePath.fromSlashSeparatedString(qe)),oe=new h.DocumentSnapshotBuilder(X)):(X=new w.DocumentReference(this,E.QualifiedResourcePath.fromSlashSeparatedString(qe.name)),oe=new h.DocumentSnapshotBuilder(X),oe.fieldsProto=qe.fields?l(qe.fields):{},oe.createTime=_.Timestamp.fromProto(ae(qe.createTime,"documentOrName.createTime")),oe.updateTime=_.Timestamp.fromProto(ae(qe.updateTime,"documentOrName.updateTime"))),g&&(oe.readTime=_.Timestamp.fromProto(ae(g,"readTime"))),oe.build()}bundle(qe){return new a.BundleBuilder(qe||(0,j.autoId)())}runTransaction(qe,g){(0,K.validateFunction)("updateFunction",qe);const ee=(0,j.requestTag)();g&&((0,K.validateObject)("transactionOptions",g),(0,K.validateBoolean)("transactionOptions.readOnly",g.readOnly,{optional:!0}),g.readOnly?(0,K.validateTimestamp)("transactionOptions.readTime",g.readTime,{optional:!0}):(0,K.validateInteger)("transactionOptions.maxAttempts",g.maxAttempts,{optional:!0,minValue:1}));const ae=new S.Transaction(this,ee,g);return this.initializeIfNeeded(ee).then(()=>ae.runTransaction(qe))}listCollections(){return new w.DocumentReference(this,E.ResourcePath.EMPTY).listCollections()}getAll(...qe){return this._traceUtil.startActiveSpan(ie.SPAN_NAME_BATCH_GET_DOCUMENTS,()=>{(0,K.validateMinNumberOfArguments)("Firestore.getAll",qe,1);const{documents:g,fieldMask:ee}=(0,S.parseGetAllArguments)(qe);this._traceUtil.currentSpan().setAttributes({[ie.ATTRIBUTE_KEY_IS_TRANSACTIONAL]:!1,[ie.ATTRIBUTE_KEY_DOC_COUNT]:g.length});const ae=(0,j.requestTag)(),l=Error().stack;return this.initializeIfNeeded(ae).then(()=>new s.DocumentReader(this,g,ee).get(ae)).catch(X=>{throw(0,j.wrapError)(X,l)})})}registerListener(){this.registeredListenersCount+=1}unregisterListener(){this.registeredListenersCount-=1}_incrementBulkWritersCount(){this.bulkWritersCount+=1}_decrementBulkWritersCount(){this.bulkWritersCount-=1}recursiveDelete(qe,g){return this._recursiveDelete(qe,Z.RECURSIVE_DELETE_MAX_PENDING_OPS,Z.RECURSIVE_DELETE_MIN_PENDING_OPS,g)}_recursiveDelete(qe,g,ee,ae){const l=ae??this.getBulkWriter();return new Z.RecursiveDelete(this,l,qe,g,ee).run()}async terminate(){return this._bulkWriter&&(await this._bulkWriter.close(),this._bulkWriter=void 0),this.registeredListenersCount>0||this.bulkWritersCount>0?Promise.reject(`All onSnapshot() listeners must be unsubscribed, and all BulkWriter instances must be closed before terminating the client. There are ${this.registeredListenersCount} active listeners and ${this.bulkWritersCount} open BulkWriter instances.`):this._clientPool.terminate()}toJSON(){return{projectId:this._projectId}}async initializeIfNeeded(qe){if(this._settingsFrozen=!0,this._settings.ssl===!1&&(this._settings.customHeaders={Authorization:"Bearer owner",...this._settings.customHeaders}),this._projectId===void 0)try{this._projectId=await this._clientPool.run(qe,!1,g=>g.getProjectId()),(0,v.logger)("Firestore.initializeIfNeeded",null,"Detected project ID: %s",this._projectId),this._traceUtil.recordProjectId(this.projectId)}catch(g){return(0,v.logger)("Firestore.initializeIfNeeded",null,"Failed to detect project ID: %s",g),Promise.reject(g)}}createCallOptions(qe,g){var ee;const ae={otherArgs:{headers:{[V]:this.formattedName,...this._settings.customHeaders,...(ee=this._settings[qe])===null||ee===void 0?void 0:ee.customHeaders}}};if(g){const l=(0,j.getRetryParams)(qe);ae.retry=new(requireFallback()).RetryOptions(g,l)}return ae}async _retry(qe,g,ee){const ae=new m.ExponentialBackoff;let l;for(let X=0;X<e.MAX_REQUEST_RETRIES;++X){l&&(0,v.logger)("Firestore._retry",g,"Retrying request that failed with error:",l);try{return await ae.backoffAndWait(),await ee()}catch(oe){if(l=oe,(0,j.isPermanentRpcError)(oe,qe))break}}return(0,v.logger)("Firestore._retry",g,"Request failed with error:",l),Promise.reject(l)}_initializeStream(qe,g,ee,ae){const l=new u.PassThrough({objectMode:!0});l.pause();let X=!1;return new Promise((oe,_e)=>{function He(){X||(X=!0,(0,v.logger)("Firestore._initializeStream",ee,"Stream ready"),oe(l))}function nt(){(0,v.logger)("Firestore._initializeStream",ee,"Received stream end"),l.unpipe(qe),oe(l),g.resolve()}function It(wt){X?((0,v.logger)("Firestore._initializeStream",ee,"Received stream error:",wt),setImmediate(()=>{l.emit("error",wt)})):((0,v.logger)("Firestore._initializeStream",ee,"Received initial error:",wt),_e(wt))}qe.on("data",()=>He()),qe.on("error",wt=>It(wt)),qe.on("end",()=>nt()),qe.on("close",()=>nt()),qe.on("finish",()=>nt()),qe.pipe(l),ae&&((0,v.logger)("Firestore._initializeStream",ee,"Sending request: %j",ae),qe.write(ae,"utf-8",wt=>{wt?It(wt):((0,v.logger)("Firestore._initializeStream",ee,"Marking stream as healthy"),He())}))})}request(qe,g,ee,ae){const l=this.createCallOptions(qe,ae);return this._clientPool.run(ee,!1,async X=>{try{(0,v.logger)("Firestore.request",ee,"Sending request: %j",g);const[oe]=await X[qe](g,l);return(0,v.logger)("Firestore.request",ee,"Received response: %j",oe),oe}catch(oe){return(0,v.logger)("Firestore.request",ee,"Received error:",oe),Promise.reject(oe)}})}requestStream(qe,g,ee,ae){const l=this.createCallOptions(qe),X=qe==="listen";let oe=0;const _e=100;return this._retry(qe,ae,()=>{const He=new j.Deferred;return this._clientPool.run(ae,g,async nt=>{(0,v.logger)("Firestore.requestStream",ae,"Sending request: %j",ee),this._traceUtil.currentSpan().addEvent(`Firestore.${qe}: Start`);try{const It=X?nt[qe](l):nt[qe](ee,l),wt=new u.Transform({objectMode:!0,transform:(Rr,Hr,Vr)=>{(0,v.logger)("Firestore.requestStream",ae,"Received response: %j",Rr),oe++,oe===1?this._traceUtil.currentSpan().addEvent(`Firestore.${qe}: First response received`):oe%_e===0&&this._traceUtil.currentSpan().addEvent(`Firestore.${qe}: Received ${oe} responses`),Vr()}});It.pipe(wt);const ir=new j.Deferred,_r=await this._initializeStream(It,ir,ae,X?ee:void 0);return _r.on("end",()=>{It.end(),this._traceUtil.currentSpan().addEvent(`Firestore.${qe}: Completed`,{[ie.ATTRIBUTE_KEY_NUM_RESPONSES]:oe})}),He.resolve(_r),ir.promise}catch(It){He.reject(It)}}),He.promise})}}e.Firestore=ce,e.default=ce;const Re=t.exports;t.exports=ce,t.exports=Object.assign(t.exports,Re),Object.defineProperty(t.exports,"v1beta1",{get:()=>requireV1beta1()}),Object.defineProperty(t.exports,"v1",{get:()=>requireV1()}),Object.defineProperty(t.exports,"GrpcStatus",{get:()=>requireFallback().Status})}(src$2,src$2.exports)),src$2.exports}var machineLearning$1={},storage={},app={};/*! firebase-admin v13.4.0 */var hasRequiredApp;function requireApp(){return hasRequiredApp||(hasRequiredApp=1,function(t){/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_VERSION=t.AppErrorCodes=t.FirebaseAppError=t.refreshToken=t.cert=t.applicationDefault=t.deleteApp=t.getApps=t.getApp=t.initializeApp=void 0;const e=requireUtils$2();var r=requireLifecycle();Object.defineProperty(t,"initializeApp",{enumerable:!0,get:function(){return r.initializeApp}}),Object.defineProperty(t,"getApp",{enumerable:!0,get:function(){return r.getApp}}),Object.defineProperty(t,"getApps",{enumerable:!0,get:function(){return r.getApps}}),Object.defineProperty(t,"deleteApp",{enumerable:!0,get:function(){return r.deleteApp}});var u=requireCredentialFactory();Object.defineProperty(t,"applicationDefault",{enumerable:!0,get:function(){return u.applicationDefault}}),Object.defineProperty(t,"cert",{enumerable:!0,get:function(){return u.cert}}),Object.defineProperty(t,"refreshToken",{enumerable:!0,get:function(){return u.refreshToken}});var d=requireError();Object.defineProperty(t,"FirebaseAppError",{enumerable:!0,get:function(){return d.FirebaseAppError}}),Object.defineProperty(t,"AppErrorCodes",{enumerable:!0,get:function(){return d.AppErrorCodes}}),t.SDK_VERSION=(0,e.getSdkVersion)()}(app)),app}var utils={};/*! firebase-admin v13.4.0 */var hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.getFirebaseMetadata=t;function t(e,r){const u=`${e}/b/${r.bucket.name}/o/${encodeURIComponent(r.name)}`;return new Promise((d,m)=>{r.storage.makeAuthenticatedRequest({method:"GET",uri:u},(c,a)=>{c?m(c):d(a)})})}return utils}var hasRequiredStorage;function requireStorage(){return hasRequiredStorage||(hasRequiredStorage=1,function(t){var e={};/*! firebase-admin v13.4.0 *//*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0,t.getStorage=a,t.getDownloadURL=o;const r=requireApp(),u=requireStorage$1(),d=requireError(),m=requireUtils();var c=requireStorage$1();Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return c.Storage}});function a(s){return typeof s>"u"&&(s=(0,r.getApp)()),s.getOrInitService("storage",v=>new u.Storage(v))}async function o(s){const h=(e.STORAGE_EMULATOR_HOST||"https://firebasestorage.googleapis.com")+"/v0",{downloadTokens:v}=await(0,m.getFirebaseMetadata)(h,s);if(!v)throw new d.FirebaseError({code:"storage/no-download-token",message:"No download token available. Please create one in the Firebase Console."});const[E]=v.split(",");return`${h}/b/${s.bucket.name}/o/${encodeURIComponent(s.name)}?alt=media&token=${E}`}}(storage)),storage}var machineLearningApiClient={},machineLearningUtils={};/*! firebase-admin v13.4.0 */var hasRequiredMachineLearningUtils;function requireMachineLearningUtils(){if(hasRequiredMachineLearningUtils)return machineLearningUtils;hasRequiredMachineLearningUtils=1;/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(machineLearningUtils,"__esModule",{value:!0}),machineLearningUtils.FirebaseMachineLearningError=void 0;const t=requireError();class e extends t.PrefixedFirebaseError{static fromOperationError(u,d){switch(u){case 1:return new e("cancelled",d);case 2:return new e("unknown-error",d);case 3:return new e("invalid-argument",d);case 4:return new e("deadline-exceeded",d);case 5:return new e("not-found",d);case 6:return new e("already-exists",d);case 7:return new e("permission-denied",d);case 8:return new e("resource-exhausted",d);case 9:return new e("failed-precondition",d);case 10:return new e("aborted",d);case 11:return new e("out-of-range",d);case 13:return new e("internal-error",d);case 14:return new e("service-unavailable",d);case 15:return new e("data-loss",d);case 16:return new e("unauthenticated",d);default:return new e("unknown-error",d)}}constructor(u,d){super("machine-learning",u,d)}}return machineLearningUtils.FirebaseMachineLearningError=e,machineLearningUtils}/*! firebase-admin v13.4.0 */var hasRequiredMachineLearningApiClient;function requireMachineLearningApiClient(){if(hasRequiredMachineLearningApiClient)return machineLearningApiClient;hasRequiredMachineLearningApiClient=1;/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(machineLearningApiClient,"__esModule",{value:!0}),machineLearningApiClient.MachineLearningApiClient=void 0,machineLearningApiClient.isGcsTfliteModelOptions=h;const t=requireApiRequest(),e=requireError(),r=requireUtils$2(),u=requireValidator$1(),d=requireMachineLearningUtils(),m="https://firebaseml.googleapis.com/v1beta2",c={"X-Firebase-Client":`fire-admin-node/${r.getSdkVersion()}`},a=12e4,o=3e3,s=3e4;function h(A){return typeof A?.tfliteModel?.gcsTfliteUri<"u"}class v{constructor(w){if(this.app=w,!u.isNonNullObject(w)||!("options"in w))throw new d.FirebaseMachineLearningError("invalid-argument","First argument passed to admin.machineLearning() must be a valid Firebase app instance.");this.httpClient=new t.AuthorizedHttpClient(w)}createModel(w){if(!u.isNonNullObject(w)||!u.isNonEmptyString(w.displayName)){const I=new d.FirebaseMachineLearningError("invalid-argument","Invalid model content.");return Promise.reject(I)}return this.getProjectUrl().then(I=>{const _={method:"POST",url:`${I}/models`,data:w};return this.sendRequest(_)})}updateModel(w,I,_){if(!u.isNonEmptyString(w)||!u.isNonNullObject(I)||!u.isNonEmptyArray(_)){const S=new d.FirebaseMachineLearningError("invalid-argument","Invalid model or mask content.");return Promise.reject(S)}return this.getProjectUrl().then(S=>{const j={method:"PATCH",url:`${S}/models/${w}?updateMask=${_.join()}`,data:I};return this.sendRequest(j)})}getModel(w){return Promise.resolve().then(()=>this.getModelName(w)).then(I=>this.getResourceWithShortName(I))}getOperation(w){return Promise.resolve().then(()=>this.getResourceWithFullName(w))}listModels(w={}){if(!u.isNonNullObject(w)){const I=new d.FirebaseMachineLearningError("invalid-argument","Invalid ListModelsOptions");return Promise.reject(I)}if(typeof w.filter<"u"&&!u.isNonEmptyString(w.filter)){const I=new d.FirebaseMachineLearningError("invalid-argument","Invalid list filter.");return Promise.reject(I)}if(typeof w.pageSize<"u"){if(!u.isNumber(w.pageSize)){const I=new d.FirebaseMachineLearningError("invalid-argument","Invalid page size.");return Promise.reject(I)}if(w.pageSize<1||w.pageSize>100){const I=new d.FirebaseMachineLearningError("invalid-argument","Page size must be between 1 and 100.");return Promise.reject(I)}}if(typeof w.pageToken<"u"&&!u.isNonEmptyString(w.pageToken)){const I=new d.FirebaseMachineLearningError("invalid-argument","Next page token must be a non-empty string.");return Promise.reject(I)}return this.getProjectUrl().then(I=>{const _={method:"GET",url:`${I}/models`,data:w};return this.sendRequest(_)})}deleteModel(w){return this.getProjectUrl().then(I=>{const _=this.getModelName(w),S={method:"DELETE",url:`${I}/${_}`};return this.sendRequest(S)})}handleOperation(w,I){if(w.done){if(w.response)return Promise.resolve(w.response);if(w.error){const j=d.FirebaseMachineLearningError.fromOperationError(w.error.code,w.error.message);return Promise.reject(j)}throw new d.FirebaseMachineLearningError("invalid-server-response","Invalid operation response.")}if(I?.wait)return this.pollOperationWithExponentialBackoff(w.name,I);const _=w.metadata||{};if(!(_["@type"]||"").includes("ModelOperationMetadata"))throw new d.FirebaseMachineLearningError("invalid-server-response",`Unknown Metadata type: ${JSON.stringify(_)}`);return this.getModel(y(_.name))}pollOperationWithExponentialBackoff(w,I){const _=I?.maxTimeMillis??a,S=I?.baseWaitMillis??o,j=I?.maxWaitMillis??s;return new t.ExponentialBackoffPoller(S,j,_).poll(()=>this.getOperation(w).then(J=>{if(!J.done)return null;if(J.error)throw d.FirebaseMachineLearningError.fromOperationError(J.error.code,J.error.message);return J.response}))}getResourceWithShortName(w){return this.getProjectUrl().then(I=>{const _={method:"GET",url:`${I}/${w}`};return this.sendRequest(_)})}getResourceWithFullName(w){const I={method:"GET",url:`${m}/${w}`};return this.sendRequest(I)}sendRequest(w){return w.headers=c,this.httpClient.send(w).then(I=>I.data).catch(I=>{throw this.toFirebaseError(I)})}toFirebaseError(w){if(w instanceof e.PrefixedFirebaseError)return w;const I=w.response;if(!I.isJson())return new d.FirebaseMachineLearningError("unknown-error",`Unexpected response with status: ${I.status} and body: ${I.text}`);const _=I.data.error||{};let S="unknown-error";_.status&&_.status in E&&(S=E[_.status]);const j=_.message||`Unknown server error: ${I.text}`;return new d.FirebaseMachineLearningError(S,j)}getProjectUrl(){return this.getProjectIdPrefix().then(w=>`${m}/${w}`)}getProjectIdPrefix(){return this.projectIdPrefix?Promise.resolve(this.projectIdPrefix):r.findProjectId(this.app).then(w=>{if(!u.isNonEmptyString(w))throw new d.FirebaseMachineLearningError("invalid-argument","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectIdPrefix=`projects/${w}`,this.projectIdPrefix})}getModelName(w){if(!u.isNonEmptyString(w))throw new d.FirebaseMachineLearningError("invalid-argument","Model ID must be a non-empty string.");if(w.indexOf("/")!==-1)throw new d.FirebaseMachineLearningError("invalid-argument",'Model ID must not contain any "/" characters.');return`models/${w}`}}machineLearningApiClient.MachineLearningApiClient=v;const E={INVALID_ARGUMENT:"invalid-argument",NOT_FOUND:"not-found",RESOURCE_EXHAUSTED:"resource-exhausted",UNAUTHENTICATED:"authentication-error",UNKNOWN:"unknown-error"};function y(A){return A.split("/").pop()}return machineLearningApiClient}/*! firebase-admin v13.4.0 */var hasRequiredMachineLearning$1;function requireMachineLearning$1(){if(hasRequiredMachineLearning$1)return machineLearning$1;hasRequiredMachineLearning$1=1;/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(machineLearning$1,"__esModule",{value:!0}),machineLearning$1.Model=machineLearning$1.MachineLearning=void 0;const t=requireStorage(),e=requireError(),r=requireValidator$1(),u=requireDeepCopy(),d=requireUtils$2(),m=requireMachineLearningApiClient(),c=requireMachineLearningUtils();class a{constructor(v){if(!r.isNonNullObject(v)||!("options"in v))throw new e.FirebaseError({code:"machine-learning/invalid-argument",message:"First argument passed to admin.machineLearning() must be a valid Firebase app instance."});this.appInternal=v,this.client=new m.MachineLearningApiClient(v)}get app(){return this.appInternal}createModel(v){return this.signUrlIfPresent(v).then(E=>this.client.createModel(E)).then(E=>this.client.handleOperation(E)).then(E=>new o(E,this.client))}updateModel(v,E){const y=d.generateUpdateMask(E);return this.signUrlIfPresent(E).then(A=>this.client.updateModel(v,A,y)).then(A=>this.client.handleOperation(A)).then(A=>new o(A,this.client))}publishModel(v){return this.setPublishStatus(v,!0)}unpublishModel(v){return this.setPublishStatus(v,!1)}getModel(v){return this.client.getModel(v).then(E=>new o(E,this.client))}listModels(v={}){return this.client.listModels(v).then(E=>{if(!r.isNonNullObject(E))throw new c.FirebaseMachineLearningError("invalid-argument",`Invalid ListModels response: ${JSON.stringify(E)}`);let y=[];E.models&&(y=E.models.map(w=>new o(w,this.client)));const A={models:y};return E.nextPageToken&&(A.pageToken=E.nextPageToken),A})}deleteModel(v){return this.client.deleteModel(v)}setPublishStatus(v,E){const y=["state.published"],A={state:{published:E}};return this.client.updateModel(v,A,y).then(w=>this.client.handleOperation(w)).then(w=>new o(w,this.client))}signUrlIfPresent(v){const E=(0,u.deepCopy)(v);return(0,m.isGcsTfliteModelOptions)(E)?this.signUrl(E.tfliteModel.gcsTfliteUri).then(y=>(E.tfliteModel.gcsTfliteUri=y,E)).catch(y=>{throw new c.FirebaseMachineLearningError("internal-error",`Error during signing upload url: ${y.message}`)}):Promise.resolve(E)}signUrl(v){const w=/^gs:\/\/([a-z0-9_.-]{3,63})\/(.+)$/.exec(v);if(!w)throw new c.FirebaseMachineLearningError("invalid-argument",`Invalid unsigned url: ${v}`);const I=w[1],_=w[2];return(0,t.getStorage)(this.app).bucket(I).file(_).getSignedUrl({action:"read",expires:Date.now()+6e5}).then(K=>K[0])}}machineLearning$1.MachineLearning=a;class o{constructor(v,E){this.model=o.validateAndClone(v),this.client=E}get modelId(){return s(this.model.name)}get displayName(){return this.model.displayName}get tags(){return this.model.tags||[]}get createTime(){return new Date(this.model.createTime).toUTCString()}get updateTime(){return new Date(this.model.updateTime).toUTCString()}get validationError(){return this.model.state?.validationError?.message}get published(){return this.model.state?.published||!1}get etag(){return this.model.etag}get modelHash(){return this.model.modelHash}get tfliteModel(){return(0,u.deepCopy)(this.model.tfliteModel)}get locked(){return(this.model.activeOperations?.length??0)>0}toJSON(){const v={modelId:this.modelId,displayName:this.displayName,tags:this.tags,createTime:this.createTime,updateTime:this.updateTime,published:this.published,etag:this.etag,locked:this.locked};return this.validationError&&(v.validationError=this.validationError),this.modelHash&&(v.modelHash=this.modelHash),this.tfliteModel&&(v.tfliteModel=this.tfliteModel),v}waitForUnlocked(v){return(this.model.activeOperations?.length??0)>0?this.client.handleOperation(this.model.activeOperations[0],{wait:!0,maxTimeMillis:v}).then(E=>{this.model=o.validateAndClone(E)}):Promise.resolve()}static validateAndClone(v){if(!r.isNonNullObject(v)||!r.isNonEmptyString(v.name)||!r.isNonEmptyString(v.createTime)||!r.isNonEmptyString(v.updateTime)||!r.isNonEmptyString(v.displayName)||!r.isNonEmptyString(v.etag))throw new c.FirebaseMachineLearningError("invalid-server-response",`Invalid Model response: ${JSON.stringify(v)}`);const E=(0,u.deepCopy)(v);return v.tfliteModel&&!r.isNonEmptyString(v.tfliteModel.gcsTfliteUri)&&delete E.tfliteModel,E["@type"]&&delete E["@type"],E}}machineLearning$1.Model=o;function s(h){return h.split("/").pop()}return machineLearning$1}var installations$1={},installationsRequestHandler={};/*! firebase-admin v13.4.0 */var hasRequiredInstallationsRequestHandler;function requireInstallationsRequestHandler(){if(hasRequiredInstallationsRequestHandler)return installationsRequestHandler;hasRequiredInstallationsRequestHandler=1;/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(installationsRequestHandler,"__esModule",{value:!0}),installationsRequestHandler.FirebaseInstallationsRequestHandler=void 0;const t=requireError(),e=requireApiRequest(),r=requireUtils$2(),u=requireValidator$1(),d="console.firebase.google.com",m="/v1/",c=1e4,a={400:"Malformed installation ID argument.",401:"Request not authorized.",403:"Project does not match installation ID or the client does not have sufficient privileges.",404:"Failed to find the installation ID.",409:"Already deleted.",429:"Request throttled out by the backend server.",500:"Internal server error.",503:"Backend servers are over capacity. Try again later."};class o{constructor(h){this.app=h,this.host=d,this.timeout=c,this.httpClient=new e.AuthorizedHttpClient(h)}deleteInstallation(h){return u.isNonEmptyString(h)?this.invokeRequestHandler(new e.ApiSettings(h,"DELETE")):Promise.reject(new t.FirebaseInstallationsError(t.InstallationsClientErrorCode.INVALID_INSTALLATION_ID,"Installation ID must be a non-empty string."))}invokeRequestHandler(h){return this.getPathPrefix().then(v=>{const E={url:`https://${this.host}${v}${h.getEndpoint()}`,method:h.getHttpMethod(),timeout:this.timeout};return this.httpClient.send(E)}).then(()=>{}).catch(v=>{if(v instanceof e.RequestResponseError){const E=v.response,y=E.isJson()&&"error"in E.data?E.data.error:E.text,A=a[E.status],w=A?`Installation ID "${h.getEndpoint()}": ${A}`:y;throw new t.FirebaseInstallationsError(t.InstallationsClientErrorCode.API_ERROR,w)}throw v})}getPathPrefix(){return this.path?Promise.resolve(this.path):r.findProjectId(this.app).then(h=>{if(!u.isNonEmptyString(h))throw new t.FirebaseInstallationsError(t.InstallationsClientErrorCode.INVALID_PROJECT_ID,"Failed to determine project ID for Installations. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively set the GOOGLE_CLOUD_PROJECT environment variable.");return this.path=m+`project/${h}/instanceId/`,this.path})}}return installationsRequestHandler.FirebaseInstallationsRequestHandler=o,installationsRequestHandler}/*! firebase-admin v13.4.0 */var hasRequiredInstallations$1;function requireInstallations$1(){if(hasRequiredInstallations$1)return installations$1;hasRequiredInstallations$1=1;/*!
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(installations$1,"__esModule",{value:!0}),installations$1.Installations=void 0;const t=requireError(),e=requireInstallationsRequestHandler(),r=requireValidator$1();class u{constructor(m){if(!r.isNonNullObject(m)||!("options"in m))throw new t.FirebaseInstallationsError(t.InstallationsClientErrorCode.INVALID_ARGUMENT,"First argument passed to admin.installations() must be a valid Firebase app instance.");this.app_=m,this.requestHandler=new e.FirebaseInstallationsRequestHandler(m)}deleteInstallation(m){return this.requestHandler.deleteInstallation(m)}get app(){return this.app_}}return installations$1.Installations=u,installations$1}var instanceId$1={},installations={};/*! firebase-admin v13.4.0 */var hasRequiredInstallations;function requireInstallations(){return hasRequiredInstallations||(hasRequiredInstallations=1,function(t){/*!
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.InstallationsClientErrorCode=t.FirebaseInstallationsError=t.Installations=void 0,t.getInstallations=u;const e=requireApp(),r=requireInstallations$1();Object.defineProperty(t,"Installations",{enumerable:!0,get:function(){return r.Installations}});function u(m){return typeof m>"u"&&(m=(0,e.getApp)()),m.getOrInitService("installations",a=>new r.Installations(a))}var d=requireError();Object.defineProperty(t,"FirebaseInstallationsError",{enumerable:!0,get:function(){return d.FirebaseInstallationsError}}),Object.defineProperty(t,"InstallationsClientErrorCode",{enumerable:!0,get:function(){return d.InstallationsClientErrorCode}})}(installations)),installations}/*! firebase-admin v13.4.0 */var hasRequiredInstanceId$1;function requireInstanceId$1(){if(hasRequiredInstanceId$1)return instanceId$1;hasRequiredInstanceId$1=1;/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(instanceId$1,"__esModule",{value:!0}),instanceId$1.InstanceId=void 0;const t=requireInstallations(),e=requireError(),r=requireValidator$1();class u{constructor(m){if(!r.isNonNullObject(m)||!("options"in m))throw new e.FirebaseInstanceIdError(e.InstanceIdClientErrorCode.INVALID_ARGUMENT,"First argument passed to instanceId() must be a valid Firebase app instance.");this.app_=m}deleteInstanceId(m){return(0,t.getInstallations)(this.app).deleteInstallation(m).catch(c=>{if(c instanceof e.FirebaseInstallationsError){let a=c.code.replace("installations/","");throw a===e.InstallationsClientErrorCode.INVALID_INSTALLATION_ID.code&&(a=e.InstanceIdClientErrorCode.INVALID_INSTANCE_ID.code),new e.FirebaseInstanceIdError({code:a,message:c.message})}throw c})}get app(){return this.app_}}return instanceId$1.InstanceId=u,instanceId$1}var projectManagement$1={},androidApp={},projectManagementApiRequestInternal={};/*! firebase-admin v13.4.0 */var hasRequiredProjectManagementApiRequestInternal;function requireProjectManagementApiRequestInternal(){if(hasRequiredProjectManagementApiRequestInternal)return projectManagementApiRequestInternal;hasRequiredProjectManagementApiRequestInternal=1;/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(projectManagementApiRequestInternal,"__esModule",{value:!0}),projectManagementApiRequestInternal.ProjectManagementRequestHandler=void 0,projectManagementApiRequestInternal.assertServerResponse=v;const t=requireApiRequest(),e=requireError(),r=requireUtils$2(),u=requireValidator$1(),d="firebase.googleapis.com:443",m="/v1/",c="/v1beta1/",a={"X-Client-Version":`Node/Admin/${(0,r.getSdkVersion)()}`},o=1e4,s=100,h={sha1:"SHA_1",sha256:"SHA_256"};function v(y,A,w){if(!y)throw new e.FirebaseProjectManagementError("invalid-server-response",`${w} Response data: ${JSON.stringify(A,null,2)}`)}class E{static wrapAndRethrowHttpError(A,w){let I,_;switch(A){case 400:I="invalid-argument",_="Invalid argument provided.";break;case 401:case 403:I="authentication-error",_="An error occurred when trying to authenticate. Make sure the credential used to authenticate this SDK has the proper permissions. See https://firebase.google.com/docs/admin/setup for setup instructions.";break;case 404:I="not-found",_="The specified entity could not be found.";break;case 409:I="already-exists",_="The specified entity already exists.";break;case 500:I="internal-error",_="An internal error has occurred. Please retry the request.";break;case 503:I="service-unavailable",_="The server could not process the request in time. See the error documentation for more details.";break;default:I="unknown-error",_="An unknown server error was returned."}throw w||(w="<missing>"),new e.FirebaseProjectManagementError(I,`${_} Status code: ${A}. Raw server response: "${w}".`)}constructor(A){this.baseUrl=`https://${d}${m}`,this.baseBetaUrl=`https://${d}${c}`,this.httpClient=new t.AuthorizedHttpClient(A)}listAndroidApps(A){return this.invokeRequestHandler("GET",`${A}/androidApps?page_size=${s}`,null,"v1beta1")}listIosApps(A){return this.invokeRequestHandler("GET",`${A}/iosApps?page_size=${s}`,null,"v1beta1")}listAppMetadata(A){return this.invokeRequestHandler("GET",`${A}:searchApps?page_size=${s}`,null,"v1beta1")}createAndroidApp(A,w,I){const _={packageName:w};return u.isNonEmptyString(I)&&(_.displayName=I),this.invokeRequestHandler("POST",`${A}/androidApps`,_,"v1beta1").then(S=>(v(u.isNonNullObject(S),S,"createAndroidApp's responseData must be a non-null object."),v(u.isNonEmptyString(S.name),S,"createAndroidApp's responseData.name must be a non-empty string."),this.pollRemoteOperationWithExponentialBackoff(S.name)))}createIosApp(A,w,I){const _={bundleId:w};return u.isNonEmptyString(I)&&(_.displayName=I),this.invokeRequestHandler("POST",`${A}/iosApps`,_,"v1beta1").then(S=>(v(u.isNonNullObject(S),S,"createIosApp's responseData must be a non-null object."),v(u.isNonEmptyString(S.name),S,"createIosApp's responseData.name must be a non-empty string."),this.pollRemoteOperationWithExponentialBackoff(S.name)))}setDisplayName(A,w){const I={displayName:w};return this.invokeRequestHandler("PATCH",`${A}?update_mask=display_name`,I,"v1beta1").then(()=>{})}getAndroidShaCertificates(A){return this.invokeRequestHandler("GET",`${A}/sha`,null,"v1beta1")}addAndroidShaCertificate(A,w){const I={shaHash:w.shaHash,certType:h[w.certType]};return this.invokeRequestHandler("POST",`${A}/sha`,I,"v1beta1").then(()=>{})}getConfig(A){return this.invokeRequestHandler("GET",`${A}/config`,null,"v1beta1")}getResource(A){return this.invokeRequestHandler("GET",A,null,"v1beta1")}deleteResource(A){return this.invokeRequestHandler("DELETE",A,null,"v1beta1").then(()=>{})}pollRemoteOperationWithExponentialBackoff(A){return new t.ExponentialBackoffPoller().poll(()=>this.invokeRequestHandler("GET",A,null).then(I=>{if(I.error){const _=I.error.code||500,S=I.error.message||JSON.stringify(I.error);E.wrapAndRethrowHttpError(_,S)}return I.done?I.response:null}))}invokeRequestHandler(A,w,I,_="v1"){const S=_==="v1"?this.baseUrl:this.baseBetaUrl,j={method:A,url:`${S}${w}`,headers:a,data:I,timeout:o};return this.httpClient.send(j).then(K=>{if(!K.isJson())throw new t.RequestResponseError(K);return K.data}).catch(K=>{throw K instanceof t.RequestResponseError&&E.wrapAndRethrowHttpError(K.response.status,K.response.text),K})}}return projectManagementApiRequestInternal.ProjectManagementRequestHandler=E,projectManagementApiRequestInternal}var appMetadata={};/*! firebase-admin v13.4.0 */var hasRequiredAppMetadata;function requireAppMetadata(){if(hasRequiredAppMetadata)return appMetadata;hasRequiredAppMetadata=1;/*!
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(appMetadata,"__esModule",{value:!0}),appMetadata.AppPlatform=void 0;var t;return function(e){e.PLATFORM_UNKNOWN="PLATFORM_UNKNOWN",e.IOS="IOS",e.ANDROID="ANDROID"}(t||(appMetadata.AppPlatform=t={})),appMetadata}/*! firebase-admin v13.4.0 */var hasRequiredAndroidApp;function requireAndroidApp(){if(hasRequiredAndroidApp)return androidApp;hasRequiredAndroidApp=1;/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(androidApp,"__esModule",{value:!0}),androidApp.ShaCertificate=androidApp.AndroidApp=void 0;const t=requireError(),e=requireValidator$1(),r=requireProjectManagementApiRequestInternal(),u=requireAppMetadata();class d{constructor(a,o){if(this.appId=a,this.requestHandler=o,!e.isNonEmptyString(a))throw new t.FirebaseProjectManagementError("invalid-argument","appId must be a non-empty string.");this.resourceName=`projects/-/androidApps/${a}`}getMetadata(){return this.requestHandler.getResource(this.resourceName).then(a=>((0,r.assertServerResponse)(e.isNonNullObject(a),a,"getMetadata()'s responseData must be a non-null object."),["name","appId","projectId","packageName"].forEach(h=>{(0,r.assertServerResponse)(e.isNonEmptyString(a[h]),a,`getMetadata()'s responseData.${h} must be a non-empty string.`)}),{platform:u.AppPlatform.ANDROID,resourceName:a.name,appId:a.appId,displayName:a.displayName||null,projectId:a.projectId,packageName:a.packageName}))}setDisplayName(a){return this.requestHandler.setDisplayName(this.resourceName,a)}getShaCertificates(){return this.requestHandler.getAndroidShaCertificates(this.resourceName).then(a=>{if((0,r.assertServerResponse)(e.isNonNullObject(a),a,"getShaCertificates()'s responseData must be a non-null object."),!a.certificates)return[];(0,r.assertServerResponse)(e.isArray(a.certificates),a,'"certificates" field must be present in the getShaCertificates() response data.');const o=["name","shaHash"];return a.certificates.map(s=>(o.forEach(h=>{(0,r.assertServerResponse)(e.isNonEmptyString(s[h]),a,`getShaCertificates()'s responseData.certificates[].${h} must be a non-empty string.`)}),new m(s.shaHash,s.name)))})}addShaCertificate(a){return this.requestHandler.addAndroidShaCertificate(this.resourceName,a)}deleteShaCertificate(a){if(!a.resourceName)throw new t.FirebaseProjectManagementError("invalid-argument","Specified certificate does not include a resourceName. (Use AndroidApp.getShaCertificates() to retrieve certificates with a resourceName.");return this.requestHandler.deleteResource(a.resourceName)}getConfig(){return this.requestHandler.getConfig(this.resourceName).then(a=>{(0,r.assertServerResponse)(e.isNonNullObject(a),a,"getConfig()'s responseData must be a non-null object.");const o=a.configFileContents;return(0,r.assertServerResponse)(e.isBase64String(o),a,"getConfig()'s responseData.configFileContents must be a base64 string."),Buffer.from(o,"base64").toString("utf8")})}}androidApp.AndroidApp=d;class m{constructor(a,o){if(this.shaHash=a,this.resourceName=o,/^[a-fA-F0-9]{40}$/.test(a))this.certType="sha1";else if(/^[a-fA-F0-9]{64}$/.test(a))this.certType="sha256";else throw new t.FirebaseProjectManagementError("invalid-argument","shaHash must be either a sha256 hash or a sha1 hash.")}}return androidApp.ShaCertificate=m,androidApp}var iosApp={};/*! firebase-admin v13.4.0 */var hasRequiredIosApp;function requireIosApp(){if(hasRequiredIosApp)return iosApp;hasRequiredIosApp=1;/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(iosApp,"__esModule",{value:!0}),iosApp.IosApp=void 0;const t=requireError(),e=requireValidator$1(),r=requireProjectManagementApiRequestInternal(),u=requireAppMetadata();class d{constructor(c,a){if(this.appId=c,this.requestHandler=a,!e.isNonEmptyString(c))throw new t.FirebaseProjectManagementError("invalid-argument","appId must be a non-empty string.");this.resourceName=`projects/-/iosApps/${c}`}getMetadata(){return this.requestHandler.getResource(this.resourceName).then(c=>((0,r.assertServerResponse)(e.isNonNullObject(c),c,"getMetadata()'s responseData must be a non-null object."),["name","appId","projectId","bundleId"].forEach(s=>{(0,r.assertServerResponse)(e.isNonEmptyString(c[s]),c,`getMetadata()'s responseData.${s} must be a non-empty string.`)}),{platform:u.AppPlatform.IOS,resourceName:c.name,appId:c.appId,displayName:c.displayName||null,projectId:c.projectId,bundleId:c.bundleId}))}setDisplayName(c){return this.requestHandler.setDisplayName(this.resourceName,c)}getConfig(){return this.requestHandler.getConfig(this.resourceName).then(c=>{(0,r.assertServerResponse)(e.isNonNullObject(c),c,"getConfig()'s responseData must be a non-null object.");const a=c.configFileContents;return(0,r.assertServerResponse)(e.isBase64String(a),c,"getConfig()'s responseData.configFileContents must be a base64 string."),Buffer.from(a,"base64").toString("utf8")})}}return iosApp.IosApp=d,iosApp}/*! firebase-admin v13.4.0 */var hasRequiredProjectManagement$1;function requireProjectManagement$1(){if(hasRequiredProjectManagement$1)return projectManagement$1;hasRequiredProjectManagement$1=1;/*!
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(projectManagement$1,"__esModule",{value:!0}),projectManagement$1.ProjectManagement=void 0;const t=requireError(),e=requireUtils$2(),r=requireValidator$1(),u=requireAndroidApp(),d=requireIosApp(),m=requireProjectManagementApiRequestInternal(),c=requireAppMetadata();class a{constructor(s){if(this.app=s,!r.isNonNullObject(s)||!("options"in s))throw new t.FirebaseProjectManagementError("invalid-argument","First argument passed to admin.projectManagement() must be a valid Firebase app instance.");this.requestHandler=new m.ProjectManagementRequestHandler(s)}listAndroidApps(){return this.listPlatformApps("android","listAndroidApps()")}listIosApps(){return this.listPlatformApps("ios","listIosApps()")}androidApp(s){return new u.AndroidApp(s,this.requestHandler)}iosApp(s){return new d.IosApp(s,this.requestHandler)}shaCertificate(s){return new u.ShaCertificate(s)}createAndroidApp(s,h){return this.getResourceName().then(v=>this.requestHandler.createAndroidApp(v,s,h)).then(v=>((0,m.assertServerResponse)(r.isNonNullObject(v),v,"createAndroidApp()'s responseData must be a non-null object."),(0,m.assertServerResponse)(r.isNonEmptyString(v.appId),v,`"responseData.appId" field must be present in createAndroidApp()'s response data.`),new u.AndroidApp(v.appId,this.requestHandler)))}createIosApp(s,h){return this.getResourceName().then(v=>this.requestHandler.createIosApp(v,s,h)).then(v=>((0,m.assertServerResponse)(r.isNonNullObject(v),v,"createIosApp()'s responseData must be a non-null object."),(0,m.assertServerResponse)(r.isNonEmptyString(v.appId),v,`"responseData.appId" field must be present in createIosApp()'s response data.`),new d.IosApp(v.appId,this.requestHandler)))}listAppMetadata(){return this.getResourceName().then(s=>this.requestHandler.listAppMetadata(s)).then(s=>this.getProjectId().then(h=>this.transformResponseToAppMetadata(s,h)))}setDisplayName(s){return this.getResourceName().then(h=>this.requestHandler.setDisplayName(h,s))}transformResponseToAppMetadata(s,h){return this.assertListAppsResponseData(s,"listAppMetadata()"),s.apps?s.apps.map(v=>{(0,m.assertServerResponse)(r.isNonEmptyString(v.appId),s,'"apps[].appId" field must be present in the listAppMetadata() response data.'),(0,m.assertServerResponse)(r.isNonEmptyString(v.platform),s,'"apps[].platform" field must be present in the listAppMetadata() response data.');const E={appId:v.appId,platform:c.AppPlatform[v.platform]||c.AppPlatform.PLATFORM_UNKNOWN,projectId:h,resourceName:v.name};return v.displayName&&(E.displayName=v.displayName),E}):[]}getResourceName(){return this.getProjectId().then(s=>`projects/${s}`)}getProjectId(){return this.projectId?Promise.resolve(this.projectId):e.findProjectId(this.app).then(s=>{if(!r.isNonEmptyString(s))throw new t.FirebaseProjectManagementError("invalid-project-id","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectId=s,this.projectId})}listPlatformApps(s,h){return this.getResourceName().then(v=>s==="android"?this.requestHandler.listAndroidApps(v):this.requestHandler.listIosApps(v)).then(v=>(this.assertListAppsResponseData(v,h),v.apps?v.apps.map(E=>((0,m.assertServerResponse)(r.isNonEmptyString(E.appId),v,`"apps[].appId" field must be present in the ${h} response data.`),s==="android"?new u.AndroidApp(E.appId,this.requestHandler):new d.IosApp(E.appId,this.requestHandler))):[]))}assertListAppsResponseData(s,h){(0,m.assertServerResponse)(r.isNonNullObject(s),s,`${h}'s responseData must be a non-null object.`),s.apps&&(0,m.assertServerResponse)(r.isArray(s.apps),s,`"apps" field must be present in the ${h} response data.`)}}return projectManagement$1.ProjectManagement=a,projectManagement$1}var securityRules$1={},securityRulesApiClientInternal={},securityRulesInternal={};/*! firebase-admin v13.4.0 */var hasRequiredSecurityRulesInternal;function requireSecurityRulesInternal(){if(hasRequiredSecurityRulesInternal)return securityRulesInternal;hasRequiredSecurityRulesInternal=1;/*!
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(securityRulesInternal,"__esModule",{value:!0}),securityRulesInternal.FirebaseSecurityRulesError=void 0;const t=requireError();class e extends t.PrefixedFirebaseError{constructor(u,d){super("security-rules",u,d)}}return securityRulesInternal.FirebaseSecurityRulesError=e,securityRulesInternal}/*! firebase-admin v13.4.0 */var hasRequiredSecurityRulesApiClientInternal;function requireSecurityRulesApiClientInternal(){if(hasRequiredSecurityRulesApiClientInternal)return securityRulesApiClientInternal;hasRequiredSecurityRulesApiClientInternal=1;/*!
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(securityRulesApiClientInternal,"__esModule",{value:!0}),securityRulesApiClientInternal.SecurityRulesApiClient=void 0;const t=requireApiRequest(),e=requireError(),r=requireSecurityRulesInternal(),u=requireUtils$2(),d=requireValidator$1(),m="https://firebaserules.googleapis.com/v1",c={"X-Firebase-Client":`fire-admin-node/${u.getSdkVersion()}`};class a{constructor(h){if(this.app=h,!d.isNonNullObject(h)||!("options"in h))throw new r.FirebaseSecurityRulesError("invalid-argument","First argument passed to admin.securityRules() must be a valid Firebase app instance.");this.httpClient=new t.AuthorizedHttpClient(h)}getRuleset(h){return Promise.resolve().then(()=>this.getRulesetName(h)).then(v=>this.getResource(v))}createRuleset(h){if(!d.isNonNullObject(h)||!d.isNonNullObject(h.source)||!d.isNonEmptyArray(h.source.files)){const v=new r.FirebaseSecurityRulesError("invalid-argument","Invalid rules content.");return Promise.reject(v)}for(const v of h.source.files)if(!d.isNonNullObject(v)||!d.isNonEmptyString(v.name)||!d.isNonEmptyString(v.content)){const E=new r.FirebaseSecurityRulesError("invalid-argument",`Invalid rules file argument: ${JSON.stringify(v)}`);return Promise.reject(E)}return this.getUrl().then(v=>{const E={method:"POST",url:`${v}/rulesets`,data:h};return this.sendRequest(E)})}deleteRuleset(h){return this.getUrl().then(v=>{const E=this.getRulesetName(h),y={method:"DELETE",url:`${v}/${E}`};return this.sendRequest(y)})}listRulesets(h=100,v){if(!d.isNumber(h)){const y=new r.FirebaseSecurityRulesError("invalid-argument","Invalid page size.");return Promise.reject(y)}if(h<1||h>100){const y=new r.FirebaseSecurityRulesError("invalid-argument","Page size must be between 1 and 100.");return Promise.reject(y)}if(typeof v<"u"&&!d.isNonEmptyString(v)){const y=new r.FirebaseSecurityRulesError("invalid-argument","Next page token must be a non-empty string.");return Promise.reject(y)}const E={pageSize:h,pageToken:v};return v||delete E.pageToken,this.getUrl().then(y=>{const A={method:"GET",url:`${y}/rulesets`,data:E};return this.sendRequest(A)})}getRelease(h){return this.getResource(`releases/${h}`)}updateOrCreateRelease(h,v){return this.updateRelease(h,v).catch(E=>{if(E.code===`security-rules/${o.NOT_FOUND}`)return this.createRelease(h,v);throw E})}updateRelease(h,v){return this.getUrl().then(E=>this.getReleaseDescription(h,v).then(y=>{const A={method:"PATCH",url:`${E}/releases/${h}`,data:{release:y}};return this.sendRequest(A)}))}createRelease(h,v){return this.getUrl().then(E=>this.getReleaseDescription(h,v).then(y=>{const A={method:"POST",url:`${E}/releases`,data:y};return this.sendRequest(A)}))}getUrl(){return this.getProjectIdPrefix().then(h=>`${m}/${h}`)}getProjectIdPrefix(){return this.projectIdPrefix?Promise.resolve(this.projectIdPrefix):u.findProjectId(this.app).then(h=>{if(!d.isNonEmptyString(h))throw new r.FirebaseSecurityRulesError("invalid-argument","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectIdPrefix=`projects/${h}`,this.projectIdPrefix})}getResource(h){return this.getUrl().then(v=>{const E={method:"GET",url:`${v}/${h}`};return this.sendRequest(E)})}getReleaseDescription(h,v){return this.getProjectIdPrefix().then(E=>({name:`${E}/releases/${h}`,rulesetName:`${E}/${this.getRulesetName(v)}`}))}getRulesetName(h){if(!d.isNonEmptyString(h))throw new r.FirebaseSecurityRulesError("invalid-argument","Ruleset name must be a non-empty string.");if(h.indexOf("/")!==-1)throw new r.FirebaseSecurityRulesError("invalid-argument",'Ruleset name must not contain any "/" characters.');return`rulesets/${h}`}sendRequest(h){return h.headers=c,this.httpClient.send(h).then(v=>v.data).catch(v=>{throw this.toFirebaseError(v)})}toFirebaseError(h){if(h instanceof e.PrefixedFirebaseError)return h;const v=h.response;if(!v.isJson())return new r.FirebaseSecurityRulesError("unknown-error",`Unexpected response with status: ${v.status} and body: ${v.text}`);const E=v.data.error||{};let y="unknown-error";E.status&&E.status in o&&(y=o[E.status]);const A=E.message||`Unknown server error: ${v.text}`;return new r.FirebaseSecurityRulesError(y,A)}}securityRulesApiClientInternal.SecurityRulesApiClient=a;const o={INVALID_ARGUMENT:"invalid-argument",NOT_FOUND:"not-found",RESOURCE_EXHAUSTED:"resource-exhausted",UNAUTHENTICATED:"authentication-error",UNKNOWN:"unknown-error"};return securityRulesApiClientInternal}/*! firebase-admin v13.4.0 */var hasRequiredSecurityRules$1;function requireSecurityRules$1(){if(hasRequiredSecurityRules$1)return securityRules$1;hasRequiredSecurityRules$1=1;/*!
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(securityRules$1,"__esModule",{value:!0}),securityRules$1.SecurityRules=securityRules$1.Ruleset=securityRules$1.RulesetMetadataList=void 0;const t=requireValidator$1(),e=requireSecurityRulesApiClientInternal(),r=requireSecurityRulesInternal();class u{constructor(o){if(!t.isNonNullObject(o)||!t.isArray(o.rulesets))throw new r.FirebaseSecurityRulesError("invalid-argument",`Invalid ListRulesets response: ${JSON.stringify(o)}`);this.rulesets=o.rulesets.map(s=>({name:c(s.name),createTime:new Date(s.createTime).toUTCString()})),o.nextPageToken&&(this.nextPageToken=o.nextPageToken)}}securityRules$1.RulesetMetadataList=u;class d{constructor(o){if(!t.isNonNullObject(o)||!t.isNonEmptyString(o.name)||!t.isNonEmptyString(o.createTime)||!t.isNonNullObject(o.source))throw new r.FirebaseSecurityRulesError("invalid-argument",`Invalid Ruleset response: ${JSON.stringify(o)}`);this.name=c(o.name),this.createTime=new Date(o.createTime).toUTCString(),this.source=o.source.files||[]}}securityRules$1.Ruleset=d;class m{constructor(o){this.app=o,this.client=new e.SecurityRulesApiClient(o)}getRuleset(o){return this.client.getRuleset(o).then(s=>new d(s))}getFirestoreRuleset(){return this.getRulesetForRelease(m.CLOUD_FIRESTORE)}releaseFirestoreRulesetFromSource(o){return Promise.resolve().then(()=>{const s=this.createRulesFileFromSource("firestore.rules",o);return this.createRuleset(s)}).then(s=>this.releaseFirestoreRuleset(s).then(()=>s))}releaseFirestoreRuleset(o){return this.releaseRuleset(o,m.CLOUD_FIRESTORE)}getStorageRuleset(o){return Promise.resolve().then(()=>this.getBucketName(o)).then(s=>this.getRulesetForRelease(`${m.FIREBASE_STORAGE}/${s}`))}releaseStorageRulesetFromSource(o,s){return Promise.resolve().then(()=>{this.getBucketName(s);const h=this.createRulesFileFromSource("storage.rules",o);return this.createRuleset(h)}).then(h=>this.releaseStorageRuleset(h,s).then(()=>h))}releaseStorageRuleset(o,s){return Promise.resolve().then(()=>this.getBucketName(s)).then(h=>this.releaseRuleset(o,`${m.FIREBASE_STORAGE}/${h}`))}createRulesFileFromSource(o,s){if(!t.isNonEmptyString(o))throw new r.FirebaseSecurityRulesError("invalid-argument","Name must be a non-empty string.");let h;if(t.isNonEmptyString(s))h=s;else if(t.isBuffer(s))h=s.toString("utf-8");else throw new r.FirebaseSecurityRulesError("invalid-argument","Source must be a non-empty string or a Buffer.");return{name:o,content:h}}createRuleset(o){const s={source:{files:[o]}};return this.client.createRuleset(s).then(h=>new d(h))}deleteRuleset(o){return this.client.deleteRuleset(o)}listRulesetMetadata(o=100,s){return this.client.listRulesets(o,s).then(h=>new u(h))}getRulesetForRelease(o){return this.client.getRelease(o).then(s=>{const h=s.rulesetName;if(!t.isNonEmptyString(h))throw new r.FirebaseSecurityRulesError("not-found",`Ruleset name not found for ${o}.`);return this.getRuleset(c(h))})}releaseRuleset(o,s){if(!t.isNonEmptyString(o)&&(!t.isNonNullObject(o)||!t.isNonEmptyString(o.name))){const v=new r.FirebaseSecurityRulesError("invalid-argument","ruleset must be a non-empty name or a RulesetMetadata object.");return Promise.reject(v)}const h=t.isString(o)?o:o.name;return this.client.updateOrCreateRelease(s,h).then(()=>{})}getBucketName(o){const s=typeof o<"u"?o:this.app.options.storageBucket;if(!t.isNonEmptyString(s))throw new r.FirebaseSecurityRulesError("invalid-argument","Bucket name not specified or invalid. Specify a default bucket name via the storageBucket option when initializing the app, or specify the bucket name explicitly when calling the rules API.");return s}}securityRules$1.SecurityRules=m,m.CLOUD_FIRESTORE="cloud.firestore",m.FIREBASE_STORAGE="firebase.storage";function c(a){return a.split("/").pop()}return securityRules$1}var remoteConfig$1={},remoteConfigApiClientInternal={},hasRequiredRemoteConfigApiClientInternal;function requireRemoteConfigApiClientInternal(){if(hasRequiredRemoteConfigApiClientInternal)return remoteConfigApiClientInternal;hasRequiredRemoteConfigApiClientInternal=1;var t={};/*! firebase-admin v13.4.0 *//*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(remoteConfigApiClientInternal,"__esModule",{value:!0}),remoteConfigApiClientInternal.FirebaseRemoteConfigError=remoteConfigApiClientInternal.RemoteConfigApiClient=void 0;const e=requireApiRequest(),r=requireError(),u=requireUtils$2(),d=requireValidator$1(),m=requireDeepCopy(),c=t.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a={"X-Firebase-Client":`fire-admin-node/${u.getSdkVersion()}`,"Accept-Encoding":"gzip"};class o{constructor(E){if(this.app=E,!d.isNonNullObject(E)||!("options"in E))throw new h("invalid-argument","First argument passed to admin.remoteConfig() must be a valid Firebase app instance.");this.httpClient=new e.AuthorizedHttpClient(E)}getTemplate(){return this.getUrl().then(E=>{const y={method:"GET",url:`${E}/remoteConfig`,headers:a};return this.httpClient.send(y)}).then(E=>this.toRemoteConfigTemplate(E)).catch(E=>{throw this.toFirebaseError(E)})}getTemplateAtVersion(E){const y={versionNumber:this.validateVersionNumber(E)};return this.getUrl().then(A=>{const w={method:"GET",url:`${A}/remoteConfig`,headers:a,data:y};return this.httpClient.send(w)}).then(A=>this.toRemoteConfigTemplate(A)).catch(A=>{throw this.toFirebaseError(A)})}validateTemplate(E){return E=this.validateInputRemoteConfigTemplate(E),this.sendPutRequest(E,E.etag,!0).then(y=>(this.validateEtag(y.headers.etag),this.toRemoteConfigTemplate(y,E.etag))).catch(y=>{throw this.toFirebaseError(y)})}publishTemplate(E,y){E=this.validateInputRemoteConfigTemplate(E);let A=E.etag;return y&&y.force===!0&&(A="*"),this.sendPutRequest(E,A).then(w=>this.toRemoteConfigTemplate(w)).catch(w=>{throw this.toFirebaseError(w)})}rollback(E){const y={versionNumber:this.validateVersionNumber(E)};return this.getUrl().then(A=>{const w={method:"POST",url:`${A}/remoteConfig:rollback`,headers:a,data:y};return this.httpClient.send(w)}).then(A=>this.toRemoteConfigTemplate(A)).catch(A=>{throw this.toFirebaseError(A)})}listVersions(E){return typeof E<"u"&&(E=this.validateListVersionsOptions(E)),this.getUrl().then(y=>{const A={method:"GET",url:`${y}/remoteConfig:listVersions`,headers:a,data:E};return this.httpClient.send(A)}).then(y=>y.data).catch(y=>{throw this.toFirebaseError(y)})}getServerTemplate(){return this.getUrl().then(E=>{const y={method:"GET",url:`${E}/namespaces/firebase-server/serverRemoteConfig`,headers:a};return this.httpClient.send(y)}).then(E=>this.toRemoteConfigServerTemplate(E)).catch(E=>{throw this.toFirebaseError(E)})}sendPutRequest(E,y,A){let w="remoteConfig";return A&&(w+="?validate_only=true"),this.getUrl().then(I=>{const _={method:"PUT",url:`${I}/${w}`,headers:{...a,"If-Match":y},data:{conditions:E.conditions,parameters:E.parameters,parameterGroups:E.parameterGroups,version:E.version}};return this.httpClient.send(_)})}getUrl(){return this.getProjectIdPrefix().then(E=>`${c}/v1/${E}`)}getProjectIdPrefix(){return this.projectIdPrefix?Promise.resolve(this.projectIdPrefix):u.findProjectId(this.app).then(E=>{if(!d.isNonEmptyString(E))throw new h("unknown-error","Failed to determine project ID. Initialize the SDK with service account credentials, or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectIdPrefix=`projects/${E}`,this.projectIdPrefix})}toFirebaseError(E){if(E instanceof r.PrefixedFirebaseError)return E;const y=E.response;if(!y.isJson())return new h("unknown-error",`Unexpected response with status: ${y.status} and body: ${y.text}`);const A=y.data.error||{};let w="unknown-error";A.status&&A.status in s&&(w=s[A.status]);const I=A.message||`Unknown server error: ${y.text}`;return new h(w,I)}toRemoteConfigTemplate(E,y){const A=typeof y>"u"?E.headers.etag:y;return this.validateEtag(A),{conditions:E.data.conditions,parameters:E.data.parameters,parameterGroups:E.data.parameterGroups,etag:A,version:E.data.version}}toRemoteConfigServerTemplate(E,y){const A=typeof y>"u"?E.headers.etag:y;return this.validateEtag(A),{conditions:E.data.conditions,parameters:E.data.parameters,etag:A,version:E.data.version}}validateInputRemoteConfigTemplate(E){const y=(0,m.deepCopy)(E);if(!d.isNonNullObject(y))throw new h("invalid-argument",`Invalid Remote Config template: ${JSON.stringify(y)}`);if(!d.isNonEmptyString(y.etag))throw new h("invalid-argument","ETag must be a non-empty string.");if(!d.isNonNullObject(y.parameters))throw new h("invalid-argument","Remote Config parameters must be a non-null object");if(!d.isNonNullObject(y.parameterGroups))throw new h("invalid-argument","Remote Config parameter groups must be a non-null object");if(!d.isArray(y.conditions))throw new h("invalid-argument","Remote Config conditions must be an array");return typeof y.version<"u"&&(y.version={description:y.version.description}),y}validateVersionNumber(E,y="versionNumber"){if(!d.isNonEmptyString(E)&&!d.isNumber(E))throw new h("invalid-argument",`${y} must be a non-empty string in int64 format or a number`);if(!Number.isInteger(Number(E)))throw new h("invalid-argument",`${y} must be an integer or a string in int64 format`);return E.toString()}validateEtag(E){if(!d.isNonEmptyString(E))throw new h("invalid-argument","ETag header is not present in the server response.")}validateListVersionsOptions(E){const y=(0,m.deepCopy)(E);if(!d.isNonNullObject(y))throw new h("invalid-argument","ListVersionsOptions must be a non-null object.");if(typeof y.pageSize<"u"){if(!d.isNumber(y.pageSize))throw new h("invalid-argument","pageSize must be a number.");if(y.pageSize<1||y.pageSize>300)throw new h("invalid-argument","pageSize must be a number between 1 and 300 (inclusive).")}if(typeof y.pageToken<"u"&&!d.isNonEmptyString(y.pageToken))throw new h("invalid-argument","pageToken must be a string value.");if(typeof y.endVersionNumber<"u"&&(y.endVersionNumber=this.validateVersionNumber(y.endVersionNumber,"endVersionNumber")),typeof y.startTime<"u"){if(!(y.startTime instanceof Date)&&!d.isUTCDateString(y.startTime))throw new h("invalid-argument","startTime must be a valid Date object or a UTC date string.");y.startTime instanceof Date?y.startTime=y.startTime.toISOString():y.startTime=new Date(y.startTime).toISOString()}if(typeof y.endTime<"u"){if(!(y.endTime instanceof Date)&&!d.isUTCDateString(y.endTime))throw new h("invalid-argument","endTime must be a valid Date object or a UTC date string.");y.endTime instanceof Date?y.endTime=y.endTime.toISOString():y.endTime=new Date(y.endTime).toISOString()}return Object.keys(y).forEach(A=>typeof y[A]>"u"&&delete y[A]),y}}remoteConfigApiClientInternal.RemoteConfigApiClient=o;const s={ABORTED:"aborted",ALREADY_EXISTS:"already-exists",INVALID_ARGUMENT:"invalid-argument",INTERNAL:"internal-error",FAILED_PRECONDITION:"failed-precondition",NOT_FOUND:"not-found",OUT_OF_RANGE:"out-of-range",PERMISSION_DENIED:"permission-denied",RESOURCE_EXHAUSTED:"resource-exhausted",UNAUTHENTICATED:"unauthenticated",UNKNOWN:"unknown-error"};class h extends r.PrefixedFirebaseError{constructor(E,y){super("remote-config",E,y)}}return remoteConfigApiClientInternal.FirebaseRemoteConfigError=h,remoteConfigApiClientInternal}var conditionEvaluatorInternal={},remoteConfigApi={};/*! firebase-admin v13.4.0 */var hasRequiredRemoteConfigApi;function requireRemoteConfigApi(){if(hasRequiredRemoteConfigApi)return remoteConfigApi;hasRequiredRemoteConfigApi=1;/*!
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(remoteConfigApi,"__esModule",{value:!0}),remoteConfigApi.CustomSignalOperator=remoteConfigApi.PercentConditionOperator=void 0;var t;(function(r){r.UNKNOWN="UNKNOWN",r.LESS_OR_EQUAL="LESS_OR_EQUAL",r.GREATER_THAN="GREATER_THAN",r.BETWEEN="BETWEEN"})(t||(remoteConfigApi.PercentConditionOperator=t={}));var e;return function(r){r.UNKNOWN="UNKNOWN",r.NUMERIC_LESS_THAN="NUMERIC_LESS_THAN",r.NUMERIC_LESS_EQUAL="NUMERIC_LESS_EQUAL",r.NUMERIC_EQUAL="NUMERIC_EQUAL",r.NUMERIC_NOT_EQUAL="NUMERIC_NOT_EQUAL",r.NUMERIC_GREATER_THAN="NUMERIC_GREATER_THAN",r.NUMERIC_GREATER_EQUAL="NUMERIC_GREATER_EQUAL",r.STRING_CONTAINS="STRING_CONTAINS",r.STRING_DOES_NOT_CONTAIN="STRING_DOES_NOT_CONTAIN",r.STRING_EXACTLY_MATCHES="STRING_EXACTLY_MATCHES",r.STRING_CONTAINS_REGEX="STRING_CONTAINS_REGEX",r.SEMANTIC_VERSION_LESS_THAN="SEMANTIC_VERSION_LESS_THAN",r.SEMANTIC_VERSION_LESS_EQUAL="SEMANTIC_VERSION_LESS_EQUAL",r.SEMANTIC_VERSION_EQUAL="SEMANTIC_VERSION_EQUAL",r.SEMANTIC_VERSION_NOT_EQUAL="SEMANTIC_VERSION_NOT_EQUAL",r.SEMANTIC_VERSION_GREATER_THAN="SEMANTIC_VERSION_GREATER_THAN",r.SEMANTIC_VERSION_GREATER_EQUAL="SEMANTIC_VERSION_GREATER_EQUAL"}(e||(remoteConfigApi.CustomSignalOperator=e={})),remoteConfigApi}/*! firebase-admin v13.4.0 */var hasRequiredConditionEvaluatorInternal;function requireConditionEvaluatorInternal(){if(hasRequiredConditionEvaluatorInternal)return conditionEvaluatorInternal;hasRequiredConditionEvaluatorInternal=1,Object.defineProperty(conditionEvaluatorInternal,"__esModule",{value:!0}),conditionEvaluatorInternal.ConditionEvaluator=void 0;const t=requireRemoteConfigApi(),e=require$$1$3;class r{evaluateConditions(o,s){const h=new Map;for(const v of o)h.set(v.name,this.evaluateCondition(v.condition,s));return h}evaluateCondition(o,s,h=0){return h>=r.MAX_CONDITION_RECURSION_DEPTH?!1:o.orCondition?this.evaluateOrCondition(o.orCondition,s,h+1):o.andCondition?this.evaluateAndCondition(o.andCondition,s,h+1):o.true?!0:o.false?!1:o.percent?this.evaluatePercentCondition(o.percent,s):o.customSignal?this.evaluateCustomSignalCondition(o.customSignal,s):!1}evaluateOrCondition(o,s,h){const v=o.conditions||[];for(const E of v){const y=this.evaluateCondition(E,s,h+1);if(y)return y}return!1}evaluateAndCondition(o,s,h){const v=o.conditions||[];for(const E of v){const y=this.evaluateCondition(E,s,h+1);if(!y)return y}return!0}evaluatePercentCondition(o,s){if(!s.randomizationId)return!1;const{seed:h,percentOperator:v,microPercent:E,microPercentRange:y}=o;if(!v)return!1;const A=E||0,w=y?.microPercentUpperBound||0,I=y?.microPercentLowerBound||0,S=`${h&&h.length>0?`${h}.`:""}${s.randomizationId}`,K=r.hashSeededRandomizationId(S)%BigInt(100*1e6);switch(v){case t.PercentConditionOperator.LESS_OR_EQUAL:return K<=A;case t.PercentConditionOperator.GREATER_THAN:return K>A;case t.PercentConditionOperator.BETWEEN:return K>I&&K<=w;case t.PercentConditionOperator.UNKNOWN:}return!1}static hashSeededRandomizationId(o){const s=(0,e.createHash)("sha256").update(o).digest("hex");return BigInt(`0x${s}`)}evaluateCustomSignalCondition(o,s){const{customSignalOperator:h,customSignalKey:v,targetCustomSignalValues:E}=o;if(!h||!v||!E||!E.length)return!1;const y=s[v];if(y==null)return!1;switch(h){case t.CustomSignalOperator.STRING_CONTAINS:return u(E,y,(A,w)=>w.includes(A));case t.CustomSignalOperator.STRING_DOES_NOT_CONTAIN:return!u(E,y,(A,w)=>w.includes(A));case t.CustomSignalOperator.STRING_EXACTLY_MATCHES:return u(E,y,(A,w)=>w.trim()===A.trim());case t.CustomSignalOperator.STRING_CONTAINS_REGEX:return u(E,y,(A,w)=>new RegExp(A).test(w));case t.CustomSignalOperator.NUMERIC_LESS_THAN:return d(y,E[0],A=>A<0);case t.CustomSignalOperator.NUMERIC_LESS_EQUAL:return d(y,E[0],A=>A<=0);case t.CustomSignalOperator.NUMERIC_EQUAL:return d(y,E[0],A=>A===0);case t.CustomSignalOperator.NUMERIC_NOT_EQUAL:return d(y,E[0],A=>A!==0);case t.CustomSignalOperator.NUMERIC_GREATER_THAN:return d(y,E[0],A=>A>0);case t.CustomSignalOperator.NUMERIC_GREATER_EQUAL:return d(y,E[0],A=>A>=0);case t.CustomSignalOperator.SEMANTIC_VERSION_LESS_THAN:return c(y,E[0],A=>A<0);case t.CustomSignalOperator.SEMANTIC_VERSION_LESS_EQUAL:return c(y,E[0],A=>A<=0);case t.CustomSignalOperator.SEMANTIC_VERSION_EQUAL:return c(y,E[0],A=>A===0);case t.CustomSignalOperator.SEMANTIC_VERSION_NOT_EQUAL:return c(y,E[0],A=>A!==0);case t.CustomSignalOperator.SEMANTIC_VERSION_GREATER_THAN:return c(y,E[0],A=>A>0);case t.CustomSignalOperator.SEMANTIC_VERSION_GREATER_EQUAL:return c(y,E[0],A=>A>=0)}return!1}}conditionEvaluatorInternal.ConditionEvaluator=r,r.MAX_CONDITION_RECURSION_DEPTH=10;function u(a,o,s){const h=String(o);return a.some(v=>s(v,h))}function d(a,o,s){const h=Number(o),v=Number(a);return isNaN(h)||isNaN(v)?!1:s(v<h?-1:v>h?1:0)}const m=5;function c(a,o,s){const h=String(a).split(".").map(Number),v=o.split(".").map(Number);if(h.length>m||v.length>m)return!1;for(let E=0;E<m;E++){const y=h[E]!==void 0,A=v[E]!==void 0;if(y||(h[E]=0),A||(v[E]=0),isNaN(h[E])||isNaN(v[E]))return!1;if(h[E]<v[E])return s(-1);if(h[E]>v[E])return s(1)}return s(0)}return conditionEvaluatorInternal}var valueImpl={};/*! firebase-admin v13.4.0 */var hasRequiredValueImpl;function requireValueImpl(){if(hasRequiredValueImpl)return valueImpl;hasRequiredValueImpl=1,Object.defineProperty(valueImpl,"__esModule",{value:!0}),valueImpl.ValueImpl=void 0;class t{constructor(r,u=t.DEFAULT_VALUE_FOR_STRING){this.source=r,this.value=u}asString(){return this.value}asBoolean(){return this.source==="static"?t.DEFAULT_VALUE_FOR_BOOLEAN:t.BOOLEAN_TRUTHY_VALUES.indexOf(this.value.toLowerCase())>=0}asNumber(){if(this.source==="static")return t.DEFAULT_VALUE_FOR_NUMBER;const r=Number(this.value);return isNaN(r)?t.DEFAULT_VALUE_FOR_NUMBER:r}getSource(){return this.source}}return valueImpl.ValueImpl=t,t.DEFAULT_VALUE_FOR_BOOLEAN=!1,t.DEFAULT_VALUE_FOR_STRING="",t.DEFAULT_VALUE_FOR_NUMBER=0,t.BOOLEAN_TRUTHY_VALUES=["1","true","t","yes","y","on"],valueImpl}/*! firebase-admin v13.4.0 */var hasRequiredRemoteConfig$1;function requireRemoteConfig$1(){if(hasRequiredRemoteConfig$1)return remoteConfig$1;hasRequiredRemoteConfig$1=1;/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(remoteConfig$1,"__esModule",{value:!0}),remoteConfig$1.RemoteConfigFetchResponse=remoteConfig$1.RemoteConfig=void 0;const t=requireUtils$2(),e=requireValidator$1(),r=requireRemoteConfigApiClientInternal(),u=requireConditionEvaluatorInternal(),d=requireValueImpl();class m{constructor(w){this.app=w,this.client=new r.RemoteConfigApiClient(w)}getTemplate(){return this.client.getTemplate().then(w=>new c(w))}getTemplateAtVersion(w){return this.client.getTemplateAtVersion(w).then(I=>new c(I))}validateTemplate(w){return this.client.validateTemplate(w).then(I=>new c(I))}publishTemplate(w,I){return this.client.publishTemplate(w,I).then(_=>new c(_))}rollback(w){return this.client.rollback(w).then(I=>new c(I))}listVersions(w){return this.client.listVersions(w).then(I=>({versions:I.versions?.map(_=>new h(_))??[],nextPageToken:I.nextPageToken}))}createTemplateFromJSON(w){if(!e.isNonEmptyString(w))throw new r.FirebaseRemoteConfigError("invalid-argument","JSON string must be a valid non-empty string");let I;try{I=JSON.parse(w)}catch(_){throw new r.FirebaseRemoteConfigError("invalid-argument",`Failed to parse the JSON string: ${w}. `+_)}return new c(I)}async getServerTemplate(w){const I=this.initServerTemplate(w);return await I.load(),I}initServerTemplate(w){const I=new a(this.client,new u.ConditionEvaluator,w?.defaultConfig);return w?.template&&I.set(w?.template),I}}remoteConfig$1.RemoteConfig=m;class c{constructor(w){if(!e.isNonNullObject(w)||!e.isNonEmptyString(w.etag))throw new r.FirebaseRemoteConfigError("invalid-argument",`Invalid Remote Config template: ${JSON.stringify(w)}`);if(this.etagInternal=w.etag,typeof w.parameters<"u"){if(!e.isNonNullObject(w.parameters))throw new r.FirebaseRemoteConfigError("invalid-argument","Remote Config parameters must be a non-null object");this.parameters=w.parameters}else this.parameters={};if(typeof w.parameterGroups<"u"){if(!e.isNonNullObject(w.parameterGroups))throw new r.FirebaseRemoteConfigError("invalid-argument","Remote Config parameter groups must be a non-null object");this.parameterGroups=w.parameterGroups}else this.parameterGroups={};if(typeof w.conditions<"u"){if(!e.isArray(w.conditions))throw new r.FirebaseRemoteConfigError("invalid-argument","Remote Config conditions must be an array");this.conditions=w.conditions}else this.conditions=[];typeof w.version<"u"&&(this.version=new h(w.version))}get etag(){return this.etagInternal}toJSON(){return{conditions:this.conditions,parameters:this.parameters,parameterGroups:this.parameterGroups,etag:this.etag,version:this.version}}}class a{constructor(w,I,_={}){this.apiClient=w,this.conditionEvaluator=I,this.defaultConfig=_,this.stringifiedDefaultConfig={};for(const S in _)this.stringifiedDefaultConfig[S]=String(_[S])}load(){return this.apiClient.getServerTemplate().then(w=>{this.cache=new s(w)})}set(w){let I;if(e.isString(w))try{I=JSON.parse(w)}catch(_){throw new r.FirebaseRemoteConfigError("invalid-argument",`Failed to parse the JSON string: ${w}. `+_)}else I=w;this.cache=new s(I)}evaluate(w={}){if(!this.cache)throw new r.FirebaseRemoteConfigError("failed-precondition","No Remote Config Server template in cache. Call load() before calling evaluate().");const I=this.conditionEvaluator.evaluateConditions(this.cache.conditions,w),_={};for(const S in this.stringifiedDefaultConfig)_[S]=new d.ValueImpl("default",this.stringifiedDefaultConfig[S]);for(const[S,j]of Object.entries(this.cache.parameters)){const{conditionalValues:K,defaultValue:J}=j,H=K||{};let U;for(const[Z,ie]of I)if(H[Z]&&ie){U=H[Z];break}if(U&&U.useInAppDefault)continue;if(U){const Z=U.value;_[S]=new d.ValueImpl("remote",Z);continue}if(!J||J.useInAppDefault)continue;const P=J.value;_[S]=new d.ValueImpl("remote",P)}return new o(_)}toJSON(){return this.cache}}class o{constructor(w){this.configValues=w}getBoolean(w){return this.getValue(w).asBoolean()}getNumber(w){return this.getValue(w).asNumber()}getString(w){return this.getValue(w).asString()}getValue(w){return this.configValues[w]||new d.ValueImpl("static")}getAll(){return{...this.configValues}}}class s{constructor(w){if(!e.isNonNullObject(w)||!e.isNonEmptyString(w.etag))throw new r.FirebaseRemoteConfigError("invalid-argument",`Invalid Remote Config template: ${JSON.stringify(w)}`);if(this.etag=w.etag,typeof w.parameters<"u"){if(!e.isNonNullObject(w.parameters))throw new r.FirebaseRemoteConfigError("invalid-argument","Remote Config parameters must be a non-null object");this.parameters=w.parameters}else this.parameters={};if(typeof w.conditions<"u"){if(!e.isArray(w.conditions))throw new r.FirebaseRemoteConfigError("invalid-argument","Remote Config conditions must be an array");this.conditions=w.conditions}else this.conditions=[];typeof w.version<"u"&&(this.version=new h(w.version))}}class h{constructor(w){if(!e.isNonNullObject(w))throw new r.FirebaseRemoteConfigError("invalid-argument",`Invalid Remote Config version instance: ${JSON.stringify(w)}`);if(typeof w.versionNumber<"u"){if(!e.isNonEmptyString(w.versionNumber)&&!e.isNumber(w.versionNumber))throw new r.FirebaseRemoteConfigError("invalid-argument","Version number must be a non-empty string in int64 format or a number");if(!Number.isInteger(Number(w.versionNumber)))throw new r.FirebaseRemoteConfigError("invalid-argument","Version number must be an integer or a string in int64 format");this.versionNumber=w.versionNumber}if(typeof w.updateOrigin<"u"){if(!e.isNonEmptyString(w.updateOrigin))throw new r.FirebaseRemoteConfigError("invalid-argument","Version update origin must be a non-empty string");this.updateOrigin=w.updateOrigin}if(typeof w.updateType<"u"){if(!e.isNonEmptyString(w.updateType))throw new r.FirebaseRemoteConfigError("invalid-argument","Version update type must be a non-empty string");this.updateType=w.updateType}if(typeof w.updateUser<"u"){if(!e.isNonNullObject(w.updateUser))throw new r.FirebaseRemoteConfigError("invalid-argument","Version update user must be a non-null object");this.updateUser=w.updateUser}if(typeof w.description<"u"){if(!e.isNonEmptyString(w.description))throw new r.FirebaseRemoteConfigError("invalid-argument","Version description must be a non-empty string");this.description=w.description}if(typeof w.rollbackSource<"u"){if(!e.isNonEmptyString(w.rollbackSource))throw new r.FirebaseRemoteConfigError("invalid-argument","Version rollback source must be a non-empty string");this.rollbackSource=w.rollbackSource}if(typeof w.isLegacy<"u"){if(!e.isBoolean(w.isLegacy))throw new r.FirebaseRemoteConfigError("invalid-argument","Version.isLegacy must be a boolean");this.isLegacy=w.isLegacy}if(typeof w.updateTime<"u"){if(!this.isValidTimestamp(w.updateTime))throw new r.FirebaseRemoteConfigError("invalid-argument","Version update time must be a valid date string");this.updateTime=new Date(w.updateTime).toUTCString()}}toJSON(){return{versionNumber:this.versionNumber,updateOrigin:this.updateOrigin,updateType:this.updateType,updateUser:this.updateUser,description:this.description,rollbackSource:this.rollbackSource,isLegacy:this.isLegacy,updateTime:this.updateTime}}isValidTimestamp(w){return e.isNonEmptyString(w)&&new Date(w).getTime()>0}}const v=304,E=200;class y{constructor(w,I,_){const S={};for(const[K,J]of Object.entries(I.getAll()))S[K]=J.asString();const j=this.processEtag(S,w);j===_?this.response={status:v,eTag:j}:this.response={status:E,eTag:j,config:S}}toJSON(){return this.response}processEtag(w,I){const _=JSON.stringify(w);let S=0;for(let J=0;J<_.length;J++){const H=_.charCodeAt(J);S=(S<<5)-S+H,S|=0}return["etag",t.getExplicitProjectId(I),"firebase-server","fetch",S].filter(J=>!!J).join("-")}}return remoteConfig$1.RemoteConfigFetchResponse=y,remoteConfig$1}var appCheck$1={},appCheckApiClientInternal={};/*! firebase-admin v13.4.0 */var hasRequiredAppCheckApiClientInternal;function requireAppCheckApiClientInternal(){return hasRequiredAppCheckApiClientInternal||(hasRequiredAppCheckApiClientInternal=1,function(t){/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseAppCheckError=t.APP_CHECK_ERROR_CODE_MAPPING=t.AppCheckApiClient=void 0;const e=requireApiRequest(),r=requireError(),u=requireUtils$2(),d=requireValidator$1(),m="https://firebaseappcheck.googleapis.com/v1/projects/{projectId}/apps/{appId}:exchangeCustomToken",c="https://firebaseappcheck.googleapis.com/v1beta/projects/{projectId}:verifyAppCheckToken",a={"X-Firebase-Client":`fire-admin-node/${u.getSdkVersion()}`};class o{constructor(v){if(this.app=v,!d.isNonNullObject(v)||!("options"in v))throw new s("invalid-argument","First argument passed to admin.appCheck() must be a valid Firebase app instance.");this.httpClient=new e.AuthorizedHttpClient(v)}exchangeToken(v,E){if(!d.isNonEmptyString(E))throw new s("invalid-argument","`appId` must be a non-empty string.");if(!d.isNonEmptyString(v))throw new s("invalid-argument","`customToken` must be a non-empty string.");return this.getUrl(E).then(y=>{const A={method:"POST",url:y,headers:a,data:{customToken:v}};return this.httpClient.send(A)}).then(y=>this.toAppCheckToken(y)).catch(y=>{throw this.toFirebaseError(y)})}verifyReplayProtection(v){if(!d.isNonEmptyString(v))throw new s("invalid-argument","`token` must be a non-empty string.");return this.getVerifyTokenUrl().then(E=>{const y={method:"POST",url:E,headers:a,data:{app_check_token:v}};return this.httpClient.send(y)}).then(E=>{if(typeof E.data.alreadyConsumed<"u"&&!d.isBoolean(E.data?.alreadyConsumed))throw new s("invalid-argument","`alreadyConsumed` must be a boolean value.");return E.data.alreadyConsumed||!1}).catch(E=>{throw this.toFirebaseError(E)})}getUrl(v){return this.getProjectId().then(E=>{const y={projectId:E,appId:v},A=u.formatString(m,y);return u.formatString(A)})}getVerifyTokenUrl(){return this.getProjectId().then(v=>{const E={projectId:v},y=u.formatString(c,E);return u.formatString(y)})}getProjectId(){return this.projectId?Promise.resolve(this.projectId):u.findProjectId(this.app).then(v=>{if(!d.isNonEmptyString(v))throw new s("unknown-error","Failed to determine project ID. Initialize the SDK with service account credentials or set project ID as an app option. Alternatively, set the GOOGLE_CLOUD_PROJECT environment variable.");return this.projectId=v,v})}toFirebaseError(v){if(v instanceof r.PrefixedFirebaseError)return v;const E=v.response;if(!E.isJson())return new s("unknown-error",`Unexpected response with status: ${E.status} and body: ${E.text}`);const y=E.data.error||{};let A="unknown-error";y.status&&y.status in t.APP_CHECK_ERROR_CODE_MAPPING&&(A=t.APP_CHECK_ERROR_CODE_MAPPING[y.status]);const w=y.message||`Unknown server error: ${E.text}`;return new s(A,w)}toAppCheckToken(v){const E=v.data.token,y=this.stringToMilliseconds(v.data.ttl);return{token:E,ttlMillis:y}}stringToMilliseconds(v){if(!d.isNonEmptyString(v)||!v.endsWith("s"))throw new s("invalid-argument","`ttl` must be a valid duration string with the suffix `s`.");const E=v.slice(0,-1);return Math.floor(Number(E)*1e3)}}t.AppCheckApiClient=o,t.APP_CHECK_ERROR_CODE_MAPPING={ABORTED:"aborted",INVALID_ARGUMENT:"invalid-argument",INVALID_CREDENTIAL:"invalid-credential",INTERNAL:"internal-error",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",NOT_FOUND:"not-found",UNKNOWN:"unknown-error"};class s extends r.PrefixedFirebaseError{constructor(v,E){super("app-check",v,E),this.__proto__=s.prototype}}t.FirebaseAppCheckError=s}(appCheckApiClientInternal)),appCheckApiClientInternal}var tokenGenerator={};/*! firebase-admin v13.4.0 */var hasRequiredTokenGenerator;function requireTokenGenerator(){if(hasRequiredTokenGenerator)return tokenGenerator;hasRequiredTokenGenerator=1;/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(tokenGenerator,"__esModule",{value:!0}),tokenGenerator.AppCheckTokenGenerator=void 0,tokenGenerator.appCheckErrorFromCryptoSignerError=s;const t=requireValidator$1(),e=requireUtils$2(),r=requireCryptoSigner(),u=requireAppCheckApiClientInternal(),d=60,m=d*1e3,c=24*60*60*1e3,a="https://firebaseappcheck.googleapis.com/google.firebase.appcheck.v1.TokenExchangeService";class o{constructor(E){if(!t.isNonNullObject(E))throw new u.FirebaseAppCheckError("invalid-argument","INTERNAL ASSERT: Must provide a CryptoSigner to use AppCheckTokenGenerator.");this.signer=E}createCustomToken(E,y){if(!t.isNonEmptyString(E))throw new u.FirebaseAppCheckError("invalid-argument","`appId` must be a non-empty string.");let A={};return typeof y<"u"&&(A=this.validateTokenOptions(y)),this.signer.getAccountId().then(w=>{const I={alg:this.signer.algorithm,typ:"JWT"},_=Math.floor(Date.now()/1e3),S={iss:w,sub:w,app_id:E,aud:a,exp:_+d*5,iat:_,...A},j=`${this.encodeSegment(I)}.${this.encodeSegment(S)}`;return this.signer.sign(Buffer.from(j)).then(K=>`${j}.${this.encodeSegment(K)}`)}).catch(w=>{throw s(w)})}encodeSegment(E){const y=E instanceof Buffer?E:Buffer.from(JSON.stringify(E));return(0,e.toWebSafeBase64)(y).replace(/=+$/,"")}validateTokenOptions(E){if(!t.isNonNullObject(E))throw new u.FirebaseAppCheckError("invalid-argument","AppCheckTokenOptions must be a non-null object.");if(typeof E.ttlMillis<"u"){if(!t.isNumber(E.ttlMillis))throw new u.FirebaseAppCheckError("invalid-argument","ttlMillis must be a duration in milliseconds.");if(E.ttlMillis<m*30||E.ttlMillis>c*7)throw new u.FirebaseAppCheckError("invalid-argument","ttlMillis must be a duration in milliseconds between 30 minutes and 7 days (inclusive).");return{ttl:(0,e.transformMillisecondsToSecondsString)(E.ttlMillis)}}return{}}}tokenGenerator.AppCheckTokenGenerator=o;function s(v){if(!(v instanceof r.CryptoSignerError))return v;if(v.code===r.CryptoSignerErrorCode.SERVER_ERROR&&t.isNonNullObject(v.cause)){const E=v.cause,y=E.response.data;if(y?.error){const A=y.error.status,w=y.error.message||JSON.stringify(E.response);let I="unknown-error";return A&&A in u.APP_CHECK_ERROR_CODE_MAPPING&&(I=u.APP_CHECK_ERROR_CODE_MAPPING[A]),new u.FirebaseAppCheckError(I,`Error returned from server while signing a custom token: ${w}`)}return new u.FirebaseAppCheckError("internal-error","Error returned from server: "+JSON.stringify(y)+".")}return new u.FirebaseAppCheckError(h(v.code),v.message)}function h(v){switch(v){case r.CryptoSignerErrorCode.INVALID_CREDENTIAL:return"invalid-credential";case r.CryptoSignerErrorCode.INVALID_ARGUMENT:return"invalid-argument";default:return"internal-error"}}return tokenGenerator}var tokenVerifier={};/*! firebase-admin v13.4.0 */var hasRequiredTokenVerifier;function requireTokenVerifier(){if(hasRequiredTokenVerifier)return tokenVerifier;hasRequiredTokenVerifier=1;/*!
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(tokenVerifier,"__esModule",{value:!0}),tokenVerifier.AppCheckTokenVerifier=void 0;const t=requireValidator$1(),e=requireUtils$2(),r=requireAppCheckApiClientInternal(),u=requireJwt(),d="https://firebaseappcheck.googleapis.com/",m="https://firebaseappcheck.googleapis.com/v1/jwks";class c{constructor(o){this.app=o,this.signatureVerifier=u.PublicKeySignatureVerifier.withJwksUrl(m,o.options.httpAgent)}verifyToken(o){if(!t.isString(o))throw new r.FirebaseAppCheckError("invalid-argument","App check token must be a non-null string.");return this.ensureProjectId().then(s=>this.decodeAndVerify(o,s)).then(s=>{const h=s.payload;return h.app_id=h.sub,h})}ensureProjectId(){return e.findProjectId(this.app).then(o=>{if(!t.isNonEmptyString(o))throw new r.FirebaseAppCheckError("invalid-credential","Must initialize app with a cert credential or set your Firebase project ID as the GOOGLE_CLOUD_PROJECT environment variable to verify an App Check token.");return o})}decodeAndVerify(o,s){return this.safeDecode(o).then(h=>(this.verifyContent(h,s),this.verifySignature(o).then(()=>h)))}safeDecode(o){return(0,u.decodeJwt)(o).catch(()=>{const s="Decoding App Check token failed. Make sure you passed the entire string JWT which represents the Firebase App Check token.";throw new r.FirebaseAppCheckError("invalid-argument",s)})}verifyContent(o,s){const h=o.header,v=o.payload,E=" Make sure the App Check token comes from the same Firebase project as the service account used to authenticate this SDK.",y=`projects/${s}`;let A;if(h.alg!==u.ALGORITHM_RS256?A='The provided App Check token has incorrect algorithm. Expected "'+u.ALGORITHM_RS256+'" but got "'+h.alg+'".':!t.isNonEmptyArray(v.aud)||!v.aud.includes(y)?A='The provided App Check token has incorrect "aud" (audience) claim. Expected "'+y+'" but got "'+v.aud+'".'+E:typeof v.iss!="string"||!v.iss.startsWith(d)?A='The provided App Check token has incorrect "iss" (issuer) claim.':typeof v.sub!="string"?A='The provided App Check token has no "sub" (subject) claim.':v.sub===""&&(A='The provided App Check token has an empty string "sub" (subject) claim.'),A)throw new r.FirebaseAppCheckError("invalid-argument",A)}verifySignature(o){return this.signatureVerifier.verify(o).catch(s=>{throw this.mapJwtErrorToAppCheckError(s)})}mapJwtErrorToAppCheckError(o){if(o.code===u.JwtErrorCode.TOKEN_EXPIRED){const s="The provided App Check token has expired. Get a fresh App Check token from your client app and try again.";return new r.FirebaseAppCheckError("app-check-token-expired",s)}else if(o.code===u.JwtErrorCode.INVALID_SIGNATURE){const s="The provided App Check token has invalid signature.";return new r.FirebaseAppCheckError("invalid-argument",s)}else if(o.code===u.JwtErrorCode.NO_MATCHING_KID){const s='The provided App Check token has "kid" claim which does not correspond to a known public key. Most likely the provided App Check token is expired, so get a fresh token from your client app and try again.';return new r.FirebaseAppCheckError("invalid-argument",s)}return new r.FirebaseAppCheckError("invalid-argument",o.message)}}return tokenVerifier.AppCheckTokenVerifier=c,tokenVerifier}/*! firebase-admin v13.4.0 */var hasRequiredAppCheck$1;function requireAppCheck$1(){if(hasRequiredAppCheck$1)return appCheck$1;hasRequiredAppCheck$1=1;/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(appCheck$1,"__esModule",{value:!0}),appCheck$1.AppCheck=void 0;const t=requireValidator$1(),e=requireAppCheckApiClientInternal(),r=requireTokenGenerator(),u=requireTokenVerifier(),d=requireCryptoSigner();class m{constructor(a){this.app=a,this.client=new e.AppCheckApiClient(a);try{this.tokenGenerator=new r.AppCheckTokenGenerator((0,d.cryptoSignerFromApp)(a))}catch(o){throw(0,r.appCheckErrorFromCryptoSignerError)(o)}this.appCheckTokenVerifier=new u.AppCheckTokenVerifier(a)}createToken(a,o){return this.tokenGenerator.createCustomToken(a,o).then(s=>this.client.exchangeToken(s,a))}verifyToken(a,o){return this.validateVerifyAppCheckTokenOptions(o),this.appCheckTokenVerifier.verifyToken(a).then(s=>o?.consume?this.client.verifyReplayProtection(a).then(h=>({alreadyConsumed:h,appId:s.app_id,token:s})):{appId:s.app_id,token:s})}validateVerifyAppCheckTokenOptions(a){if(!(typeof a>"u")&&!t.isNonNullObject(a))throw new e.FirebaseAppCheckError("invalid-argument","VerifyAppCheckTokenOptions must be a non-null object.")}}return appCheck$1.AppCheck=m,appCheck$1}var auth={};/*! firebase-admin v13.4.0 */var hasRequiredAuth;function requireAuth(){return hasRequiredAuth||(hasRequiredAuth=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.AuthClientErrorCode=t.FirebaseAuthError=t.UserRecord=t.UserMetadata=t.UserInfo=t.PhoneMultiFactorInfo=t.MultiFactorSettings=t.MultiFactorInfo=t.ProjectConfigManager=t.ProjectConfig=t.TenantManager=t.TenantAwareAuth=t.Tenant=t.BaseAuth=t.Auth=void 0,t.getAuth=u;const e=requireApp(),r=requireAuth$1();function u(E){return typeof E>"u"&&(E=(0,e.getApp)()),E.getOrInitService("auth",A=>new r.Auth(A))}var d=requireAuth$1();Object.defineProperty(t,"Auth",{enumerable:!0,get:function(){return d.Auth}});var m=requireBaseAuth();Object.defineProperty(t,"BaseAuth",{enumerable:!0,get:function(){return m.BaseAuth}});var c=requireTenant();Object.defineProperty(t,"Tenant",{enumerable:!0,get:function(){return c.Tenant}});var a=requireTenantManager();Object.defineProperty(t,"TenantAwareAuth",{enumerable:!0,get:function(){return a.TenantAwareAuth}}),Object.defineProperty(t,"TenantManager",{enumerable:!0,get:function(){return a.TenantManager}});var o=requireProjectConfig();Object.defineProperty(t,"ProjectConfig",{enumerable:!0,get:function(){return o.ProjectConfig}});var s=requireProjectConfigManager();Object.defineProperty(t,"ProjectConfigManager",{enumerable:!0,get:function(){return s.ProjectConfigManager}});var h=requireUserRecord();Object.defineProperty(t,"MultiFactorInfo",{enumerable:!0,get:function(){return h.MultiFactorInfo}}),Object.defineProperty(t,"MultiFactorSettings",{enumerable:!0,get:function(){return h.MultiFactorSettings}}),Object.defineProperty(t,"PhoneMultiFactorInfo",{enumerable:!0,get:function(){return h.PhoneMultiFactorInfo}}),Object.defineProperty(t,"UserInfo",{enumerable:!0,get:function(){return h.UserInfo}}),Object.defineProperty(t,"UserMetadata",{enumerable:!0,get:function(){return h.UserMetadata}}),Object.defineProperty(t,"UserRecord",{enumerable:!0,get:function(){return h.UserRecord}});var v=requireError();Object.defineProperty(t,"FirebaseAuthError",{enumerable:!0,get:function(){return v.FirebaseAuthError}}),Object.defineProperty(t,"AuthClientErrorCode",{enumerable:!0,get:function(){return v.AuthClientErrorCode}})}(auth)),auth}var appCheck={};/*! firebase-admin v13.4.0 */var hasRequiredAppCheck;function requireAppCheck(){return hasRequiredAppCheck||(hasRequiredAppCheck=1,function(t){/*!
 * @license
 * Copyright 2021 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.AppCheck=void 0,t.getAppCheck=d;const e=requireApp(),r=requireAppCheck$1();var u=requireAppCheck$1();Object.defineProperty(t,"AppCheck",{enumerable:!0,get:function(){return u.AppCheck}});function d(m){return typeof m>"u"&&(m=(0,e.getApp)()),m.getOrInitService("appCheck",a=>new r.AppCheck(a))}}(appCheck)),appCheck}var database$1={},database={},hasRequiredDatabase$1;function requireDatabase$1(){if(hasRequiredDatabase$1)return database;hasRequiredDatabase$1=1;var t={};/*! firebase-admin v13.4.0 *//*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(database,"__esModule",{value:!0}),database.DatabaseService=void 0;const e=require$$1$3,r=require$$1$3,u=requireError(),d=requireValidator$1(),m=requireApiRequest(),c=requireUtils$2(),a=5*60*1e3;class o{constructor(y){if(this.databases={},!d.isNonNullObject(y)||!("options"in y))throw new u.FirebaseDatabaseError({code:"invalid-argument",message:"First argument passed to admin.database() must be a valid Firebase app instance."});this.appInternal=y}get firebaseApp(){return this.app}delete(){this.tokenListener&&(this.firebaseApp.INTERNAL.removeAuthTokenListener(this.tokenListener),clearTimeout(this.tokenRefreshTimeout));const y=[];for(const A of Object.keys(this.databases)){const w=this.databases[A];y.push(w.INTERNAL.delete())}return Promise.all(y).then(()=>{this.databases={}})}get app(){return this.appInternal}getDatabase(y){const A=this.ensureUrl(y);if(!d.isNonEmptyString(A))throw new u.FirebaseDatabaseError({code:"invalid-argument",message:"Database URL must be a valid, non-empty URL string."});let w=this.databases[A];if(typeof w>"u"){w=requireIndex_standalone().initStandalone(this.appInternal,A,(0,c.getSdkVersion)()).instance;const _=new h(this.app,A);w.getRules=()=>_.getRules(),w.getRulesJSON=()=>_.getRulesJSON(),w.setRules=S=>_.setRules(S),this.databases[A]=w}return this.tokenListener||(this.tokenListener=this.onTokenChange.bind(this),this.firebaseApp.INTERNAL.addAuthTokenListener(this.tokenListener)),w}onTokenChange(y){const A=this.firebaseApp.INTERNAL.getCachedToken();if(A){const w=A.expirationTime-a-Date.now();w>0&&this.scheduleTokenRefresh(w)}}scheduleTokenRefresh(y){clearTimeout(this.tokenRefreshTimeout),this.tokenRefreshTimeout=setTimeout(()=>{this.firebaseApp.INTERNAL.getToken(!0).catch(()=>{})},y)}ensureUrl(y){if(typeof y<"u")return y;if(typeof this.appInternal.options.databaseURL<"u")return this.appInternal.options.databaseURL;throw new u.FirebaseDatabaseError({code:"invalid-argument",message:"Can't determine Firebase Database URL."})}}database.DatabaseService=o;const s=".settings/rules.json";class h{constructor(y,A){let w=new e.URL(A);const I=t.FIREBASE_DATABASE_EMULATOR_HOST;if(I){const _=v(w);w=new e.URL(`http://${I}?ns=${_}`)}w.pathname=r.join(w.pathname,s),this.dbUrl=w.toString(),this.httpClient=new m.AuthorizedHttpClient(y)}getRules(){const y={method:"GET",url:this.dbUrl};return this.httpClient.send(y).then(A=>{if(!A.text)throw new u.FirebaseAppError(u.AppErrorCodes.INTERNAL_ERROR,"HTTP response missing data.");return A.text}).catch(A=>{throw this.handleError(A)})}getRulesJSON(){const y={method:"GET",url:this.dbUrl,data:{format:"strict"}};return this.httpClient.send(y).then(A=>A.data).catch(A=>{throw this.handleError(A)})}setRules(y){if(!d.isNonEmptyString(y)&&!d.isBuffer(y)&&!d.isNonNullObject(y)){const w=new u.FirebaseDatabaseError({code:"invalid-argument",message:"Source must be a non-empty string, Buffer or an object."});return Promise.reject(w)}const A={method:"PUT",url:this.dbUrl,data:y,headers:{"content-type":"application/json; charset=utf-8"}};return this.httpClient.send(A).then(()=>{}).catch(w=>{throw this.handleError(w)})}handleError(y){return y instanceof m.RequestResponseError?new u.FirebaseDatabaseError({code:u.AppErrorCodes.INTERNAL_ERROR,message:this.getErrorMessage(y)}):y}getErrorMessage(y){const A="Error while accessing security rules";try{const w=y.response.data;if(w&&w.error)return`${A}: ${w.error.trim()}`}catch{}return`${A}: ${y.response.text}`}}function v(E){const y=E.searchParams.get("ns");if(y)return y;const A=E.hostname,w=A.indexOf(".");return A.substring(0,w).toLowerCase()}return database}/*! firebase-admin v13.4.0 */var hasRequiredDatabase;function requireDatabase(){return hasRequiredDatabase||(hasRequiredDatabase=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseDatabaseError=t.ServerValue=t.enableLogging=void 0,t.getDatabase=d,t.getDatabaseWithUrl=m;const e=requireIndex_standalone(),r=requireApp(),u=requireDatabase$1();t.enableLogging=e.enableLogging,t.ServerValue=e.ServerValue;function d(o){return c({app:o})}function m(o,s){return c({url:o,app:s})}function c(o){let{app:s}=o;return typeof s>"u"&&(s=(0,r.getApp)()),s.getOrInitService("database",E=>new u.DatabaseService(E)).getDatabase(o.url)}var a=requireError();Object.defineProperty(t,"FirebaseDatabaseError",{enumerable:!0,get:function(){return a.FirebaseDatabaseError}})}(database$1)),database$1}var messaging={};/*! firebase-admin v13.4.0 */var hasRequiredMessaging;function requireMessaging(){return hasRequiredMessaging||(hasRequiredMessaging=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.MessagingClientErrorCode=t.FirebaseMessagingError=t.Messaging=void 0,t.getMessaging=d;const e=requireApp(),r=requireMessaging$1();var u=requireMessaging$1();Object.defineProperty(t,"Messaging",{enumerable:!0,get:function(){return u.Messaging}});function d(c){return typeof c>"u"&&(c=(0,e.getApp)()),c.getOrInitService("messaging",o=>new r.Messaging(o))}var m=requireError();Object.defineProperty(t,"FirebaseMessagingError",{enumerable:!0,get:function(){return m.FirebaseMessagingError}}),Object.defineProperty(t,"MessagingClientErrorCode",{enumerable:!0,get:function(){return m.MessagingClientErrorCode}})}(messaging)),messaging}var firestore={},firestoreInternal={};/*! firebase-admin v13.4.0 */var hasRequiredFirestoreInternal;function requireFirestoreInternal(){if(hasRequiredFirestoreInternal)return firestoreInternal;hasRequiredFirestoreInternal=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(firestoreInternal,"__esModule",{value:!0}),firestoreInternal.FirestoreService=void 0,firestoreInternal.getFirestoreOptions=m;const t=requireError(),e=requireCredentialInternal(),r=requireValidator$1(),u=requireUtils$2();class d{constructor(o){this.databases=new Map,this.firestoreSettings=new Map,this.appInternal=o}initializeDatabase(o,s){const h=this.databases.get(o);if(h){const E=this.firestoreSettings.get(o)??{};if(this.checkIfSameSettings(s,E))return h;throw new t.FirebaseFirestoreError({code:"failed-precondition",message:"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance."})}const v=c(this.app,o,s);return this.databases.set(o,v),this.firestoreSettings.set(o,s),v}getDatabase(o){let s=this.databases.get(o);return s===void 0&&(s=c(this.app,o,{}),this.databases.set(o,s),this.firestoreSettings.set(o,{})),s}checkIfSameSettings(o,s){const h=o??{},v=s??{};return h.preferRest===v.preferRest}get app(){return this.appInternal}}firestoreInternal.FirestoreService=d;function m(a,o){if(!r.isNonNullObject(a)||!("options"in a))throw new t.FirebaseFirestoreError({code:"invalid-argument",message:"First argument passed to admin.firestore() must be a valid Firebase app instance."});const s=u.getExplicitProjectId(a),h=a.options.credential,v=u.getSdkVersion(),E=o?.preferRest;if(h instanceof e.ServiceAccountCredential)return{credentials:{private_key:h.privateKey,client_email:h.clientEmail},projectId:s,firebaseVersion:v,firebaseAdminVersion:v,preferRest:E};if((0,e.isApplicationDefault)(a.options.credential))return r.isNonEmptyString(s)?{projectId:s,firebaseVersion:v,firebaseAdminVersion:v,preferRest:E}:{firebaseVersion:v,firebaseAdminVersion:v,preferRest:E};throw new t.FirebaseFirestoreError({code:"invalid-credential",message:"Failed to initialize Google Cloud Firestore client with the available credentials. Must initialize the SDK with a certificate credential or application default credentials to use Cloud Firestore API."})}function c(a,o,s){const h=m(a,s);h.databaseId=o;let v;try{v=requireSrc().Firestore}catch(E){throw new t.FirebaseFirestoreError({code:"missing-dependencies",message:`Failed to import the Cloud Firestore client library for Node.js. Make sure to install the "@google-cloud/firestore" npm package. Original error: ${E}`})}return new v(h)}return firestoreInternal}/*! firebase-admin v13.4.0 */var hasRequiredFirestore;function requireFirestore(){return hasRequiredFirestore||(hasRequiredFirestore=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseFirestoreError=t.setLogFunction=t.v1=t.WriteResult=t.WriteBatch=t.Transaction=t.Timestamp=t.QuerySnapshot=t.QueryPartition=t.QueryDocumentSnapshot=t.Query=t.GrpcStatus=t.GeoPoint=t.Firestore=t.Filter=t.FieldValue=t.FieldPath=t.DocumentSnapshot=t.DocumentReference=t.CollectionReference=t.CollectionGroup=t.BundleBuilder=t.BulkWriter=t.AggregateQuerySnapshot=t.AggregateQuery=t.AggregateField=void 0,t.getFirestore=m,t.initializeFirestore=c;const e=requireApp(),r=requireFirestoreInternal(),u=requirePath();var d=requireSrc();Object.defineProperty(t,"AggregateField",{enumerable:!0,get:function(){return d.AggregateField}}),Object.defineProperty(t,"AggregateQuery",{enumerable:!0,get:function(){return d.AggregateQuery}}),Object.defineProperty(t,"AggregateQuerySnapshot",{enumerable:!0,get:function(){return d.AggregateQuerySnapshot}}),Object.defineProperty(t,"BulkWriter",{enumerable:!0,get:function(){return d.BulkWriter}}),Object.defineProperty(t,"BundleBuilder",{enumerable:!0,get:function(){return d.BundleBuilder}}),Object.defineProperty(t,"CollectionGroup",{enumerable:!0,get:function(){return d.CollectionGroup}}),Object.defineProperty(t,"CollectionReference",{enumerable:!0,get:function(){return d.CollectionReference}}),Object.defineProperty(t,"DocumentReference",{enumerable:!0,get:function(){return d.DocumentReference}}),Object.defineProperty(t,"DocumentSnapshot",{enumerable:!0,get:function(){return d.DocumentSnapshot}}),Object.defineProperty(t,"FieldPath",{enumerable:!0,get:function(){return d.FieldPath}}),Object.defineProperty(t,"FieldValue",{enumerable:!0,get:function(){return d.FieldValue}}),Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return d.Filter}}),Object.defineProperty(t,"Firestore",{enumerable:!0,get:function(){return d.Firestore}}),Object.defineProperty(t,"GeoPoint",{enumerable:!0,get:function(){return d.GeoPoint}}),Object.defineProperty(t,"GrpcStatus",{enumerable:!0,get:function(){return d.GrpcStatus}}),Object.defineProperty(t,"Query",{enumerable:!0,get:function(){return d.Query}}),Object.defineProperty(t,"QueryDocumentSnapshot",{enumerable:!0,get:function(){return d.QueryDocumentSnapshot}}),Object.defineProperty(t,"QueryPartition",{enumerable:!0,get:function(){return d.QueryPartition}}),Object.defineProperty(t,"QuerySnapshot",{enumerable:!0,get:function(){return d.QuerySnapshot}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return d.Timestamp}}),Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return d.Transaction}}),Object.defineProperty(t,"WriteBatch",{enumerable:!0,get:function(){return d.WriteBatch}}),Object.defineProperty(t,"WriteResult",{enumerable:!0,get:function(){return d.WriteResult}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return d.v1}}),Object.defineProperty(t,"setLogFunction",{enumerable:!0,get:function(){return d.setLogFunction}});function m(o,s){const h=typeof o=="object"?o:(0,e.getApp)(),v=(typeof o=="string"?o:s)||u.DEFAULT_DATABASE_ID;return h.getOrInitService("firestore",A=>new r.FirestoreService(A)).getDatabase(v)}function c(o,s,h){return s??(s={}),h??(h=u.DEFAULT_DATABASE_ID),o.getOrInitService("firestore",y=>new r.FirestoreService(y)).initializeDatabase(h,s)}var a=requireError();Object.defineProperty(t,"FirebaseFirestoreError",{enumerable:!0,get:function(){return a.FirebaseFirestoreError}})}(firestore)),firestore}var instanceId={};/*! firebase-admin v13.4.0 */var hasRequiredInstanceId;function requireInstanceId(){return hasRequiredInstanceId||(hasRequiredInstanceId=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceIdClientErrorCode=t.FirebaseInstanceIdError=t.InstanceId=void 0,t.getInstanceId=u;const e=requireApp(),r=requireInstanceId$1();Object.defineProperty(t,"InstanceId",{enumerable:!0,get:function(){return r.InstanceId}});function u(m){return typeof m>"u"&&(m=(0,e.getApp)()),m.getOrInitService("instanceId",a=>new r.InstanceId(a))}var d=requireError();Object.defineProperty(t,"FirebaseInstanceIdError",{enumerable:!0,get:function(){return d.FirebaseInstanceIdError}}),Object.defineProperty(t,"InstanceIdClientErrorCode",{enumerable:!0,get:function(){return d.InstanceIdClientErrorCode}})}(instanceId)),instanceId}var machineLearning={};/*! firebase-admin v13.4.0 */var hasRequiredMachineLearning;function requireMachineLearning(){return hasRequiredMachineLearning||(hasRequiredMachineLearning=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.Model=t.MachineLearning=void 0,t.getMachineLearning=d;const e=requireApp(),r=requireMachineLearning$1();var u=requireMachineLearning$1();Object.defineProperty(t,"MachineLearning",{enumerable:!0,get:function(){return u.MachineLearning}}),Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return u.Model}});function d(m){return typeof m>"u"&&(m=(0,e.getApp)()),m.getOrInitService("machineLearning",a=>new r.MachineLearning(a))}}(machineLearning)),machineLearning}var projectManagement={};/*! firebase-admin v13.4.0 */var hasRequiredProjectManagement;function requireProjectManagement(){return hasRequiredProjectManagement||(hasRequiredProjectManagement=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseProjectManagementError=t.IosApp=t.ShaCertificate=t.AndroidApp=t.ProjectManagement=t.AppPlatform=void 0,t.getProjectManagement=a;const e=requireApp(),r=requireProjectManagement$1();var u=requireAppMetadata();Object.defineProperty(t,"AppPlatform",{enumerable:!0,get:function(){return u.AppPlatform}});var d=requireProjectManagement$1();Object.defineProperty(t,"ProjectManagement",{enumerable:!0,get:function(){return d.ProjectManagement}});var m=requireAndroidApp();Object.defineProperty(t,"AndroidApp",{enumerable:!0,get:function(){return m.AndroidApp}}),Object.defineProperty(t,"ShaCertificate",{enumerable:!0,get:function(){return m.ShaCertificate}});var c=requireIosApp();Object.defineProperty(t,"IosApp",{enumerable:!0,get:function(){return c.IosApp}});function a(s){return typeof s>"u"&&(s=(0,e.getApp)()),s.getOrInitService("projectManagement",v=>new r.ProjectManagement(v))}var o=requireError();Object.defineProperty(t,"FirebaseProjectManagementError",{enumerable:!0,get:function(){return o.FirebaseProjectManagementError}})}(projectManagement)),projectManagement}var securityRules={};/*! firebase-admin v13.4.0 */var hasRequiredSecurityRules;function requireSecurityRules(){return hasRequiredSecurityRules||(hasRequiredSecurityRules=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.SecurityRules=t.RulesetMetadataList=t.Ruleset=void 0,t.getSecurityRules=d;const e=requireApp(),r=requireSecurityRules$1();var u=requireSecurityRules$1();Object.defineProperty(t,"Ruleset",{enumerable:!0,get:function(){return u.Ruleset}}),Object.defineProperty(t,"RulesetMetadataList",{enumerable:!0,get:function(){return u.RulesetMetadataList}}),Object.defineProperty(t,"SecurityRules",{enumerable:!0,get:function(){return u.SecurityRules}});function d(m){return typeof m>"u"&&(m=(0,e.getApp)()),m.getOrInitService("securityRules",a=>new r.SecurityRules(a))}}(securityRules)),securityRules}var remoteConfig={};/*! firebase-admin v13.4.0 */var hasRequiredRemoteConfig;function requireRemoteConfig(){return hasRequiredRemoteConfig||(hasRequiredRemoteConfig=1,function(t){/*!
 * Copyright 2020 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteConfigFetchResponse=t.RemoteConfig=t.PercentConditionOperator=t.CustomSignalOperator=void 0,t.getRemoteConfig=m;const e=requireApp(),r=requireRemoteConfig$1();var u=requireRemoteConfigApi();Object.defineProperty(t,"CustomSignalOperator",{enumerable:!0,get:function(){return u.CustomSignalOperator}}),Object.defineProperty(t,"PercentConditionOperator",{enumerable:!0,get:function(){return u.PercentConditionOperator}});var d=requireRemoteConfig$1();Object.defineProperty(t,"RemoteConfig",{enumerable:!0,get:function(){return d.RemoteConfig}}),Object.defineProperty(t,"RemoteConfigFetchResponse",{enumerable:!0,get:function(){return d.RemoteConfigFetchResponse}});function m(c){return typeof c>"u"&&(c=(0,e.getApp)()),c.getOrInitService("remoteConfig",o=>new r.RemoteConfig(o))}}(remoteConfig)),remoteConfig}/*! firebase-admin v13.4.0 */var hasRequiredFirebaseNamespace;function requireFirebaseNamespace(){if(hasRequiredFirebaseNamespace)return firebaseNamespace;hasRequiredFirebaseNamespace=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Object.defineProperty(firebaseNamespace,"__esModule",{value:!0}),firebaseNamespace.defaultNamespace=firebaseNamespace.FirebaseNamespace=firebaseNamespace.FirebaseNamespaceInternals=void 0;const t=requireLifecycle(),e=requireCredentialFactory(),r=requireUtils$2();class u{constructor(o){this.appStore=o}initializeApp(o,s){const h=this.appStore.initializeApp(o,s);return c(h)}app(o){const s=this.appStore.getApp(o);return c(s)}get apps(){return this.appStore.getApps().map(o=>c(o))}}firebaseNamespace.FirebaseNamespaceInternals=u;const d={cert:e.cert,refreshToken:e.refreshToken,applicationDefault:e.applicationDefault};class m{constructor(o){this.__esModule=!0,this.credential=d,this.SDK_VERSION=(0,r.getSdkVersion)(),this.Promise=Promise,this.INTERNAL=new u(o??new t.AppStore)}get auth(){const o=h=>this.ensureApp(h).auth(),s=requireAuth$1().Auth;return Object.assign(o,{Auth:s})}get database(){return Object.assign(s=>this.ensureApp(s).database(),requireIndex_standalone())}get messaging(){const o=h=>this.ensureApp(h).messaging(),s=requireMessaging$1().Messaging;return Object.assign(o,{Messaging:s})}get storage(){const o=h=>this.ensureApp(h).storage(),s=requireStorage$1().Storage;return Object.assign(o,{Storage:s})}get firestore(){let o=h=>this.ensureApp(h).firestore();const s=requireSrc();return o=Object.assign(o,s.Firestore),Object.defineProperty(o,"v1beta1",{get:()=>s.v1beta1}),Object.defineProperty(o,"v1",{get:()=>s.v1}),o}get machineLearning(){const o=h=>this.ensureApp(h).machineLearning(),s=requireMachineLearning$1().MachineLearning;return Object.assign(o,{MachineLearning:s})}get installations(){const o=h=>this.ensureApp(h).installations(),s=requireInstallations$1().Installations;return Object.assign(o,{Installations:s})}get instanceId(){const o=h=>this.ensureApp(h).instanceId(),s=requireInstanceId$1().InstanceId;return Object.assign(o,{InstanceId:s})}get projectManagement(){const o=h=>this.ensureApp(h).projectManagement(),s=requireProjectManagement$1().ProjectManagement;return Object.assign(o,{ProjectManagement:s})}get securityRules(){const o=h=>this.ensureApp(h).securityRules(),s=requireSecurityRules$1().SecurityRules;return Object.assign(o,{SecurityRules:s})}get remoteConfig(){const o=h=>this.ensureApp(h).remoteConfig(),s=requireRemoteConfig$1().RemoteConfig;return Object.assign(o,{RemoteConfig:s})}get appCheck(){const o=h=>this.ensureApp(h).appCheck(),s=requireAppCheck$1().AppCheck;return Object.assign(o,{AppCheck:s})}initializeApp(o,s){return this.INTERNAL.initializeApp(o,s)}app(o){return this.INTERNAL.app(o)}get apps(){return this.INTERNAL.apps}ensureApp(o){return typeof o>"u"&&(o=this.app()),o}}firebaseNamespace.FirebaseNamespace=m,firebaseNamespace.defaultNamespace=new m(t.defaultAppStore);function c(a){const o=a;return o.__extended||(o.auth=()=>{const s=requireAuth().getAuth;return s(a)},o.appCheck=()=>{const s=requireAppCheck().getAppCheck;return s(a)},o.database=s=>{const h=requireDatabase().getDatabaseWithUrl;return h(s,a)},o.messaging=()=>{const s=requireMessaging().getMessaging;return s(a)},o.storage=()=>{const s=requireStorage().getStorage;return s(a)},o.firestore=()=>{const s=requireFirestore().getFirestore;return s(a)},o.instanceId=()=>{const s=requireInstanceId().getInstanceId;return s(a)},o.installations=()=>{const s=requireInstallations().getInstallations;return s(a)},o.machineLearning=()=>{const s=requireMachineLearning().getMachineLearning;return s(a)},o.projectManagement=()=>{const s=requireProjectManagement().getProjectManagement;return s(a)},o.securityRules=()=>{const s=requireSecurityRules().getSecurityRules;return s(a)},o.remoteConfig=()=>{const s=requireRemoteConfig().getRemoteConfig;return s(a)},o.__extended=!0),o}return firebaseNamespace}/*! firebase-admin v13.4.0 */var defaultNamespace,hasRequiredDefaultNamespace;function requireDefaultNamespace(){if(hasRequiredDefaultNamespace)return defaultNamespace;hasRequiredDefaultNamespace=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t=requireFirebaseNamespace();return t.defaultNamespace.default=t.defaultNamespace,defaultNamespace=t.defaultNamespace,defaultNamespace}/*! firebase-admin v13.4.0 */var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;/*!
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t=requireDefaultNamespace(),e=typeof process<"u"?process:0;return Object.prototype.toString.call(e)!=="[object process]"&&console.error(`
======== WARNING! ========

firebase-admin appears to have been installed in an unsupported environment.
This package should only be used in server-side or backend Node.js environments,
and should not be used in web browsers or other client-side environments.

Use the Firebase JS SDK for client-side Firebase integrations:

https://firebase.google.com/docs/web/setup
`),lib=t,lib}var libExports=requireLib();const admin=getDefaultExportFromCjs(libExports),getDefaultsFromPostinstall$1=()=>{};var define_process_env_default$2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1$1=function(t){const e=[];let r=0;for(let u=0;u<t.length;u++){let d=t.charCodeAt(u);d<128?e[r++]=d:d<2048?(e[r++]=d>>6|192,e[r++]=d&63|128):(d&64512)===55296&&u+1<t.length&&(t.charCodeAt(u+1)&64512)===56320?(d=65536+((d&1023)<<10)+(t.charCodeAt(++u)&1023),e[r++]=d>>18|240,e[r++]=d>>12&63|128,e[r++]=d>>6&63|128,e[r++]=d&63|128):(e[r++]=d>>12|224,e[r++]=d>>6&63|128,e[r++]=d&63|128)}return e},byteArrayToString$1=function(t){const e=[];let r=0,u=0;for(;r<t.length;){const d=t[r++];if(d<128)e[u++]=String.fromCharCode(d);else if(d>191&&d<224){const m=t[r++];e[u++]=String.fromCharCode((d&31)<<6|m&63)}else if(d>239&&d<365){const m=t[r++],c=t[r++],a=t[r++],o=((d&7)<<18|(m&63)<<12|(c&63)<<6|a&63)-65536;e[u++]=String.fromCharCode(55296+(o>>10)),e[u++]=String.fromCharCode(56320+(o&1023))}else{const m=t[r++],c=t[r++];e[u++]=String.fromCharCode((d&15)<<12|(m&63)<<6|c&63)}}return e.join("")},base64$1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,u=[];for(let d=0;d<t.length;d+=3){const m=t[d],c=d+1<t.length,a=c?t[d+1]:0,o=d+2<t.length,s=o?t[d+2]:0,h=m>>2,v=(m&3)<<4|a>>4;let E=(a&15)<<2|s>>6,y=s&63;o||(y=64,c||(E=64)),u.push(r[h],r[v],r[E],r[y])}return u.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString$1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,u=[];for(let d=0;d<t.length;){const m=r[t.charAt(d++)],a=d<t.length?r[t.charAt(d)]:0;++d;const s=d<t.length?r[t.charAt(d)]:64;++d;const v=d<t.length?r[t.charAt(d)]:64;if(++d,m==null||a==null||s==null||v==null)throw new DecodeBase64StringError$1;const E=m<<2|a>>4;if(u.push(E),s!==64){const y=a<<4&240|s>>2;if(u.push(y),v!==64){const A=s<<6&192|v;u.push(A)}}}return u},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};let DecodeBase64StringError$1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const base64Encode$1=function(t){const e=stringToByteArray$1$1(t);return base64$1.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding$1=function(t){return base64Encode$1(t).replace(/\./g,"")},base64Decode$1=function(t){try{return base64$1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal$1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal$1=()=>getGlobal$1().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable$1=()=>{if(typeof process>"u"||typeof define_process_env_default$2>"u")return;const t=define_process_env_default$2.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie$1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode$1(t[1]);return e&&JSON.parse(e)},getDefaults$1=()=>{try{return getDefaultsFromPostinstall$1()||getDefaultsFromGlobal$1()||getDefaultsFromEnvVariable$1()||getDefaultsFromCookie$1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>{var e,r;return(r=(e=getDefaults$1())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},getDefaultEmulatorHostnameAndPort=t=>{const e=getDefaultEmulatorHost(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const u=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),u]:[e.substring(0,r),u]},getDefaultAppConfig=()=>{var t;return(t=getDefaults$1())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,u)=>{r?this.reject(r):this.resolve(u),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation$1(t){return t.endsWith(".cloudworkstations.dev")}async function pingServer(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},u=e||"demo-project",d=t.iat||0,m=t.sub||t.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${u}`,aud:u,iat:d,exp:d+3600,auth_time:d,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}}},t);return[base64urlEncodeWithoutPadding$1(JSON.stringify(r)),base64urlEncodeWithoutPadding$1(JSON.stringify(c)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const t={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?t.emulator.push(e):t.prod.push(e);return t}function getOrCreateEl(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(t,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation$1(window.location.host)||emulatorStatus[t]===e||emulatorStatus[t]||previouslyDismissed)return;emulatorStatus[t]=e;function r(E){return`__firebase__banner__${E}`}const u="__firebase__banner",m=getEmulatorSummary().prod.length>0;function c(){const E=document.getElementById(u);E&&E.remove()}function a(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function o(E,y){E.setAttribute("width","24"),E.setAttribute("id",y),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function s(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{previouslyDismissed=!0,c()},E}function h(E,y){E.setAttribute("id",y),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=getOrCreateEl(u),y=r("text"),A=document.getElementById(y)||document.createElement("span"),w=r("learnmore"),I=document.getElementById(w)||document.createElement("a"),_=r("preprendIcon"),S=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const j=E.element;a(j),h(I,w);const K=s();o(S,_),j.append(S,A,I,K),document.body.appendChild(j)}m?(A.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function isIndexedDBAvailable$1(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable$1(){return new Promise((t,e)=>{try{let r=!0;const u="validate-browser-context-for-indexeddb-analytics-module",d=self.indexedDB.open(u);d.onsuccess=()=>{d.result.close(),r||self.indexedDB.deleteDatabase(u),t(!0)},d.onupgradeneeded=()=>{r=!1},d.onerror=()=>{var m;e(((m=d.error)===null||m===void 0?void 0:m.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME$1="FirebaseError";let FirebaseError$1=class Eh extends Error{constructor(e,r,u){super(r),this.code=e,this.customData=u,this.name=ERROR_NAME$1,Object.setPrototypeOf(this,Eh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory$1.prototype.create)}},ErrorFactory$1=class{constructor(e,r,u){this.service=e,this.serviceName=r,this.errors=u}create(e,...r){const u=r[0]||{},d=`${this.service}/${e}`,m=this.errors[e],c=m?replaceTemplate$1(m,u):"Error",a=`${this.serviceName}: ${c} (${d}).`;return new FirebaseError$1(d,a,u)}};function replaceTemplate$1(t,e){return t.replace(PATTERN$1,(r,u)=>{const d=e[u];return d!=null?String(d):`<${u}?>`})}const PATTERN$1=/\{\$([^}]+)}/g;function deepEqual(t,e){if(t===e)return!0;const r=Object.keys(t),u=Object.keys(e);for(const d of r){if(!u.includes(d))return!1;const m=t[d],c=e[d];if(isObject(m)&&isObject(c)){if(!deepEqual(m,c))return!1}else if(m!==c)return!1}for(const d of u)if(!r.includes(d))return!1;return!0}function isObject(t){return t!==null&&typeof t=="object"}let Component$1=class{constructor(e,r,u){this.name=e,this.instanceFactory=r,this.type=u,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const u=new Deferred;if(this.instancesDeferred.set(r,u),this.isInitialized(r)||this.shouldAutoInitialize())try{const d=this.getOrInitializeService({instanceIdentifier:r});d&&u.resolve(d)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const u=this.normalizeInstanceIdentifier(e?.identifier),d=(r=e?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(u)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:u})}catch(m){if(d)return null;throw m}else{if(d)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[r,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(r);try{const m=this.getOrInitializeService({instanceIdentifier:d});u.resolve(m)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,u=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(u))throw Error(`${this.name}(${u}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const d=this.getOrInitializeService({instanceIdentifier:u,options:r});for(const[m,c]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(m);u===a&&c.resolve(d)}return d}onInit(e,r){var u;const d=this.normalizeInstanceIdentifier(r),m=(u=this.onInitCallbacks.get(d))!==null&&u!==void 0?u:new Set;m.add(e),this.onInitCallbacks.set(d,m);const c=this.instances.get(d);return c&&e(c,d),()=>{m.delete(e)}}invokeOnInitCallbacks(e,r){const u=this.onInitCallbacks.get(r);if(u)for(const d of u)try{d(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let u=this.instances.get(e);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:r}),this.instances.set(e,u),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(u,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,u)}catch{}return u||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Provider(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel$1;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel$1||(LogLevel$1={}));const levelStringToEnum$1={debug:LogLevel$1.DEBUG,verbose:LogLevel$1.VERBOSE,info:LogLevel$1.INFO,warn:LogLevel$1.WARN,error:LogLevel$1.ERROR,silent:LogLevel$1.SILENT},defaultLogLevel$1=LogLevel$1.INFO,ConsoleMethod$1={[LogLevel$1.DEBUG]:"log",[LogLevel$1.VERBOSE]:"log",[LogLevel$1.INFO]:"info",[LogLevel$1.WARN]:"warn",[LogLevel$1.ERROR]:"error"},defaultLogHandler$1=(t,e,...r)=>{if(e<t.logLevel)return;const u=new Date().toISOString(),d=ConsoleMethod$1[e];if(d)console[d](`[${u}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Logger$1=class{constructor(e){this.name=e,this._logLevel=defaultLogLevel$1,this._logHandler=defaultLogHandler$1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel$1))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum$1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.DEBUG,...e),this._logHandler(this,LogLevel$1.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.VERBOSE,...e),this._logHandler(this,LogLevel$1.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.INFO,...e),this._logHandler(this,LogLevel$1.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.WARN,...e),this._logHandler(this,LogLevel$1.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.ERROR,...e),this._logHandler(this,LogLevel$1.ERROR,...e)}};const instanceOfAny$1=(t,e)=>e.some(r=>t instanceof r);let idbProxyableTypes$1,cursorAdvanceMethods$1;function getIdbProxyableTypes$1(){return idbProxyableTypes$1||(idbProxyableTypes$1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods$1(){return cursorAdvanceMethods$1||(cursorAdvanceMethods$1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap$1=new WeakMap,transactionDoneMap$1=new WeakMap,transactionStoreNamesMap$1=new WeakMap,transformCache$1=new WeakMap,reverseTransformCache$1=new WeakMap;function promisifyRequest$1(t){const e=new Promise((r,u)=>{const d=()=>{t.removeEventListener("success",m),t.removeEventListener("error",c)},m=()=>{r(wrap$1(t.result)),d()},c=()=>{u(t.error),d()};t.addEventListener("success",m),t.addEventListener("error",c)});return e.then(r=>{r instanceof IDBCursor&&cursorRequestMap$1.set(r,t)}).catch(()=>{}),reverseTransformCache$1.set(e,t),e}function cacheDonePromiseForTransaction$1(t){if(transactionDoneMap$1.has(t))return;const e=new Promise((r,u)=>{const d=()=>{t.removeEventListener("complete",m),t.removeEventListener("error",c),t.removeEventListener("abort",c)},m=()=>{r(),d()},c=()=>{u(t.error||new DOMException("AbortError","AbortError")),d()};t.addEventListener("complete",m),t.addEventListener("error",c),t.addEventListener("abort",c)});transactionDoneMap$1.set(t,e)}let idbProxyTraps$1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap$1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap$1.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap$1(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps$1(t){idbProxyTraps$1=t(idbProxyTraps$1)}function wrapFunction$1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const u=t.call(unwrap$1(this),e,...r);return transactionStoreNamesMap$1.set(u,e.sort?e.sort():[e]),wrap$1(u)}:getCursorAdvanceMethods$1().includes(t)?function(...e){return t.apply(unwrap$1(this),e),wrap$1(cursorRequestMap$1.get(this))}:function(...e){return wrap$1(t.apply(unwrap$1(this),e))}}function transformCachableValue$1(t){return typeof t=="function"?wrapFunction$1(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction$1(t),instanceOfAny$1(t,getIdbProxyableTypes$1())?new Proxy(t,idbProxyTraps$1):t)}function wrap$1(t){if(t instanceof IDBRequest)return promisifyRequest$1(t);if(transformCache$1.has(t))return transformCache$1.get(t);const e=transformCachableValue$1(t);return e!==t&&(transformCache$1.set(t,e),reverseTransformCache$1.set(e,t)),e}const unwrap$1=t=>reverseTransformCache$1.get(t);function openDB$1(t,e,{blocked:r,upgrade:u,blocking:d,terminated:m}={}){const c=indexedDB.open(t,e),a=wrap$1(c);return u&&c.addEventListener("upgradeneeded",o=>{u(wrap$1(c.result),o.oldVersion,o.newVersion,wrap$1(c.transaction),o)}),r&&c.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{m&&o.addEventListener("close",()=>m()),d&&o.addEventListener("versionchange",s=>d(s.oldVersion,s.newVersion,s))}).catch(()=>{}),a}const readMethods$1=["get","getKey","getAll","getAllKeys","count"],writeMethods$1=["put","add","delete","clear"],cachedMethods$1=new Map;function getMethod$1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods$1.get(e))return cachedMethods$1.get(e);const r=e.replace(/FromIndex$/,""),u=e!==r,d=writeMethods$1.includes(r);if(!(r in(u?IDBIndex:IDBObjectStore).prototype)||!(d||readMethods$1.includes(r)))return;const m=async function(c,...a){const o=this.transaction(c,d?"readwrite":"readonly");let s=o.store;return u&&(s=s.index(a.shift())),(await Promise.all([s[r](...a),d&&o.done]))[0]};return cachedMethods$1.set(e,m),m}replaceTraps$1(t=>({...t,get:(e,r,u)=>getMethod$1(e,r)||t.get(e,r,u),has:(e,r)=>!!getMethod$1(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PlatformLoggerServiceImpl$1=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(isVersionServiceProvider$1(r)){const u=r.getImmediate();return`${u.library}/${u.version}`}else return null}).filter(r=>r).join(" ")}};function isVersionServiceProvider$1(t){const e=t.getComponent();return e?.type==="VERSION"}const name$q$1="@firebase/app",version$1$1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger$1("@firebase/app"),name$p$1="@firebase/app-compat",name$o$1="@firebase/analytics-compat",name$n$1="@firebase/analytics",name$m$1="@firebase/app-check-compat",name$l$1="@firebase/app-check",name$k$1="@firebase/auth",name$j$1="@firebase/auth-compat",name$i$1="@firebase/database",name$h$1="@firebase/data-connect",name$g$1="@firebase/database-compat",name$f$1="@firebase/functions",name$e$1="@firebase/functions-compat",name$d$1="@firebase/installations",name$c$1="@firebase/installations-compat",name$b$1="@firebase/messaging",name$a$1="@firebase/messaging-compat",name$9$1="@firebase/performance",name$8$1="@firebase/performance-compat",name$7$1="@firebase/remote-config",name$6$1="@firebase/remote-config-compat",name$5$1="@firebase/storage",name$4$1="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$2="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING$1={[name$q$1]:"fire-core",[name$p$1]:"fire-core-compat",[name$n$1]:"fire-analytics",[name$o$1]:"fire-analytics-compat",[name$l$1]:"fire-app-check",[name$m$1]:"fire-app-check-compat",[name$k$1]:"fire-auth",[name$j$1]:"fire-auth-compat",[name$i$1]:"fire-rtdb",[name$h$1]:"fire-data-connect",[name$g$1]:"fire-rtdb-compat",[name$f$1]:"fire-fn",[name$e$1]:"fire-fn-compat",[name$d$1]:"fire-iid",[name$c$1]:"fire-iid-compat",[name$b$1]:"fire-fcm",[name$a$1]:"fire-fcm-compat",[name$9$1]:"fire-perf",[name$8$1]:"fire-perf-compat",[name$7$1]:"fire-rc",[name$6$1]:"fire-rc-compat",[name$5$1]:"fire-gcs",[name$4$1]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps$1=new Map,_serverApps$1=new Map,_components$1=new Map;function _addComponent$1(t,e){try{t.container.addComponent(e)}catch(r){logger$1.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _registerComponent$1(t){const e=t.name;if(_components$1.has(e))return logger$1.debug(`There were multiple attempts to register component ${e}.`),!1;_components$1.set(e,t);for(const r of _apps$1.values())_addComponent$1(r,t);for(const r of _serverApps$1.values())_addComponent$1(r,t);return!0}function _getProvider(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function _isFirebaseServerApp$1(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS$1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$1=new ErrorFactory$1("app","Firebase",ERRORS$1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,r,u){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=u,this.container.addComponent(new Component$1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$1.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$2;function initializeApp(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const u=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},e),d=u.name;if(typeof d!="string"||!d)throw ERROR_FACTORY$1.create("bad-app-name",{appName:String(d)});if(r||(r=getDefaultAppConfig()),!r)throw ERROR_FACTORY$1.create("no-options");const m=_apps$1.get(d);if(m){if(deepEqual(r,m.options)&&deepEqual(u,m.config))return m;throw ERROR_FACTORY$1.create("duplicate-app",{appName:d})}const c=new ComponentContainer(d);for(const o of _components$1.values())c.addComponent(o);const a=new FirebaseAppImpl(r,u,c);return _apps$1.set(d,a),a}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps$1.get(t);if(!e&&t===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY$1.create("no-app",{appName:t});return e}function registerVersion$1(t,e,r){var u;let d=(u=PLATFORM_LOG_STRING$1[t])!==null&&u!==void 0?u:t;r&&(d+=`-${r}`);const m=d.match(/\s|\//),c=e.match(/\s|\//);if(m||c){const a=[`Unable to register library "${d}" with version "${e}":`];m&&a.push(`library name "${d}" contains illegal characters (whitespace or "/")`),m&&c&&a.push("and"),c&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger$1.warn(a.join(" "));return}_registerComponent$1(new Component$1(`${d}-version`,()=>({library:d,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME$1="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB$1(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME$1)}catch(r){console.warn(r)}}}}).catch(t=>{throw ERROR_FACTORY$1.create("idb-open",{originalErrorMessage:t.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB$1(t){try{const r=(await getDbPromise$1()).transaction(STORE_NAME$1),u=await r.objectStore(STORE_NAME$1).get(computeKey$1(t));return await r.done,u}catch(e){if(e instanceof FirebaseError$1)logger$1.warn(e.message);else{const r=ERROR_FACTORY$1.create("idb-get",{originalErrorMessage:e?.message});logger$1.warn(r.message)}}}async function writeHeartbeatsToIndexedDB$1(t,e){try{const u=(await getDbPromise$1()).transaction(STORE_NAME$1,"readwrite");await u.objectStore(STORE_NAME$1).put(e,computeKey$1(t)),await u.done}catch(r){if(r instanceof FirebaseError$1)logger$1.warn(r.message);else{const u=ERROR_FACTORY$1.create("idb-set",{originalErrorMessage:r?.message});logger$1.warn(u.message)}}}function computeKey$1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES$1=1024,MAX_NUM_STORED_HEARTBEATS$1=30;let HeartbeatServiceImpl$1=class{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl$1(r),this._heartbeatsCachePromise=this._storage.read().then(u=>(this._heartbeatsCache=u,u))}async triggerHeartbeat(){var e,r;try{const d=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),m=getUTCDateString$1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===m||this._heartbeatsCache.heartbeats.some(c=>c.date===m))return;if(this._heartbeatsCache.heartbeats.push({date:m,agent:d}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS$1){const c=getEarliestHeartbeatIdx$1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(u){logger$1.warn(u)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=getUTCDateString$1(),{heartbeatsToSend:u,unsentEntries:d}=extractHeartbeatsForHeader$1(this._heartbeatsCache.heartbeats),m=base64urlEncodeWithoutPadding$1(JSON.stringify({version:2,heartbeats:u}));return this._heartbeatsCache.lastSentHeartbeatDate=r,d.length>0?(this._heartbeatsCache.heartbeats=d,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),m}catch(r){return logger$1.warn(r),""}}};function getUTCDateString$1(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader$1(t,e=MAX_HEADER_BYTES$1){const r=[];let u=t.slice();for(const d of t){const m=r.find(c=>c.agent===d.agent);if(m){if(m.dates.push(d.date),countBytes$1(r)>e){m.dates.pop();break}}else if(r.push({agent:d.agent,dates:[d.date]}),countBytes$1(r)>e){r.pop();break}u=u.slice(1)}return{heartbeatsToSend:r,unsentEntries:u}}let HeartbeatStorageImpl$1=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable$1()?validateIndexedDBOpenable$1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await readHeartbeatsFromIndexedDB$1(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const d=await this.read();return writeHeartbeatsToIndexedDB$1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:d.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const d=await this.read();return writeHeartbeatsToIndexedDB$1(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:d.lastSentHeartbeatDate,heartbeats:[...d.heartbeats,...e.heartbeats]})}else return}};function countBytes$1(t){return base64urlEncodeWithoutPadding$1(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx$1(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let u=1;u<t.length;u++)t[u].date<r&&(r=t[u].date,e=u);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents$1(t){_registerComponent$1(new Component$1("platform-logger",e=>new PlatformLoggerServiceImpl$1(e),"PRIVATE")),_registerComponent$1(new Component$1("heartbeat",e=>new HeartbeatServiceImpl$1(e),"PRIVATE")),registerVersion$1(name$q$1,version$1$1,t),registerVersion$1(name$q$1,version$1$1,"esm2017"),registerVersion$1("fire-js","")}registerCoreComponents$1("");var commonjsGlobal$3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer$1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,P){function Z(){}Z.prototype=P.prototype,U.D=P.prototype,U.prototype=new Z,U.prototype.constructor=U,U.C=function(ie,ue,le){for(var ne=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)ne[ye-2]=arguments[ye];return P.prototype[ue].apply(ie,ne)}}function r(){this.blockSize=-1}function u(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(u,r),u.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function d(U,P,Z){Z||(Z=0);var ie=Array(16);if(typeof P=="string")for(var ue=0;16>ue;++ue)ie[ue]=P.charCodeAt(Z++)|P.charCodeAt(Z++)<<8|P.charCodeAt(Z++)<<16|P.charCodeAt(Z++)<<24;else for(ue=0;16>ue;++ue)ie[ue]=P[Z++]|P[Z++]<<8|P[Z++]<<16|P[Z++]<<24;P=U.g[0],Z=U.g[1],ue=U.g[2];var le=U.g[3],ne=P+(le^Z&(ue^le))+ie[0]+3614090360&4294967295;P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[1]+3905402710&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[2]+606105819&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[3]+3250441966&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(le^Z&(ue^le))+ie[4]+4118548399&4294967295,P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[5]+1200080426&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[6]+2821735955&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[7]+4249261313&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(le^Z&(ue^le))+ie[8]+1770035416&4294967295,P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[9]+2336552879&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[10]+4294925233&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[11]+2304563134&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(le^Z&(ue^le))+ie[12]+1804603682&4294967295,P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[13]+4254626195&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[14]+2792965006&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[15]+1236535329&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(ue^le&(Z^ue))+ie[1]+4129170786&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[6]+3225465664&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[11]+643717713&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[0]+3921069994&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(ue^le&(Z^ue))+ie[5]+3593408605&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[10]+38016083&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[15]+3634488961&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[4]+3889429448&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(ue^le&(Z^ue))+ie[9]+568446438&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[14]+3275163606&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[3]+4107603335&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[8]+1163531501&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(ue^le&(Z^ue))+ie[13]+2850285829&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[2]+4243563512&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[7]+1735328473&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[12]+2368359562&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(Z^ue^le)+ie[5]+4294588738&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[8]+2272392833&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[11]+1839030562&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[14]+4259657740&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(Z^ue^le)+ie[1]+2763975236&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[4]+1272893353&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[7]+4139469664&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[10]+3200236656&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(Z^ue^le)+ie[13]+681279174&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[0]+3936430074&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[3]+3572445317&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[6]+76029189&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(Z^ue^le)+ie[9]+3654602809&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[12]+3873151461&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[15]+530742520&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[2]+3299628645&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(ue^(Z|~le))+ie[0]+4096336452&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[7]+1126891415&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[14]+2878612391&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[5]+4237533241&4294967295,Z=ue+(ne<<21&4294967295|ne>>>11),ne=P+(ue^(Z|~le))+ie[12]+1700485571&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[3]+2399980690&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[10]+4293915773&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[1]+2240044497&4294967295,Z=ue+(ne<<21&4294967295|ne>>>11),ne=P+(ue^(Z|~le))+ie[8]+1873313359&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[15]+4264355552&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[6]+2734768916&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[13]+1309151649&4294967295,Z=ue+(ne<<21&4294967295|ne>>>11),ne=P+(ue^(Z|~le))+ie[4]+4149444226&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[11]+3174756917&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[2]+718787259&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[9]+3951481745&4294967295,U.g[0]=U.g[0]+P&4294967295,U.g[1]=U.g[1]+(ue+(ne<<21&4294967295|ne>>>11))&4294967295,U.g[2]=U.g[2]+ue&4294967295,U.g[3]=U.g[3]+le&4294967295}u.prototype.u=function(U,P){P===void 0&&(P=U.length);for(var Z=P-this.blockSize,ie=this.B,ue=this.h,le=0;le<P;){if(ue==0)for(;le<=Z;)d(this,U,le),le+=this.blockSize;if(typeof U=="string"){for(;le<P;)if(ie[ue++]=U.charCodeAt(le++),ue==this.blockSize){d(this,ie),ue=0;break}}else for(;le<P;)if(ie[ue++]=U[le++],ue==this.blockSize){d(this,ie),ue=0;break}}this.h=ue,this.o+=P},u.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var P=1;P<U.length-8;++P)U[P]=0;var Z=8*this.o;for(P=U.length-8;P<U.length;++P)U[P]=Z&255,Z/=256;for(this.u(U),U=Array(16),P=Z=0;4>P;++P)for(var ie=0;32>ie;ie+=8)U[Z++]=this.g[P]>>>ie&255;return U};function m(U,P){var Z=a;return Object.prototype.hasOwnProperty.call(Z,U)?Z[U]:Z[U]=P(U)}function c(U,P){this.h=P;for(var Z=[],ie=!0,ue=U.length-1;0<=ue;ue--){var le=U[ue]|0;ie&&le==P||(Z[ue]=le,ie=!1)}this.g=Z}var a={};function o(U){return-128<=U&&128>U?m(U,function(P){return new c([P|0],0>P?-1:0)}):new c([U|0],0>U?-1:0)}function s(U){if(isNaN(U)||!isFinite(U))return v;if(0>U)return I(s(-U));for(var P=[],Z=1,ie=0;U>=Z;ie++)P[ie]=U/Z|0,Z*=4294967296;return new c(P,0)}function h(U,P){if(U.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(U.charAt(0)=="-")return I(h(U.substring(1),P));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var Z=s(Math.pow(P,8)),ie=v,ue=0;ue<U.length;ue+=8){var le=Math.min(8,U.length-ue),ne=parseInt(U.substring(ue,ue+le),P);8>le?(le=s(Math.pow(P,le)),ie=ie.j(le).add(s(ne))):(ie=ie.j(Z),ie=ie.add(s(ne)))}return ie}var v=o(0),E=o(1),y=o(16777216);t=c.prototype,t.m=function(){if(w(this))return-I(this).m();for(var U=0,P=1,Z=0;Z<this.g.length;Z++){var ie=this.i(Z);U+=(0<=ie?ie:4294967296+ie)*P,P*=4294967296}return U},t.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(A(this))return"0";if(w(this))return"-"+I(this).toString(U);for(var P=s(Math.pow(U,6)),Z=this,ie="";;){var ue=K(Z,P).g;Z=_(Z,ue.j(P));var le=((0<Z.g.length?Z.g[0]:Z.h)>>>0).toString(U);if(Z=ue,A(Z))return le+ie;for(;6>le.length;)le="0"+le;ie=le+ie}},t.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function A(U){if(U.h!=0)return!1;for(var P=0;P<U.g.length;P++)if(U.g[P]!=0)return!1;return!0}function w(U){return U.h==-1}t.l=function(U){return U=_(this,U),w(U)?-1:A(U)?0:1};function I(U){for(var P=U.g.length,Z=[],ie=0;ie<P;ie++)Z[ie]=~U.g[ie];return new c(Z,~U.h).add(E)}t.abs=function(){return w(this)?I(this):this},t.add=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0,ue=0;ue<=P;ue++){var le=ie+(this.i(ue)&65535)+(U.i(ue)&65535),ne=(le>>>16)+(this.i(ue)>>>16)+(U.i(ue)>>>16);ie=ne>>>16,le&=65535,ne&=65535,Z[ue]=ne<<16|le}return new c(Z,Z[Z.length-1]&-2147483648?-1:0)};function _(U,P){return U.add(I(P))}t.j=function(U){if(A(this)||A(U))return v;if(w(this))return w(U)?I(this).j(I(U)):I(I(this).j(U));if(w(U))return I(this.j(I(U)));if(0>this.l(y)&&0>U.l(y))return s(this.m()*U.m());for(var P=this.g.length+U.g.length,Z=[],ie=0;ie<2*P;ie++)Z[ie]=0;for(ie=0;ie<this.g.length;ie++)for(var ue=0;ue<U.g.length;ue++){var le=this.i(ie)>>>16,ne=this.i(ie)&65535,ye=U.i(ue)>>>16,fe=U.i(ue)&65535;Z[2*ie+2*ue]+=ne*fe,S(Z,2*ie+2*ue),Z[2*ie+2*ue+1]+=le*fe,S(Z,2*ie+2*ue+1),Z[2*ie+2*ue+1]+=ne*ye,S(Z,2*ie+2*ue+1),Z[2*ie+2*ue+2]+=le*ye,S(Z,2*ie+2*ue+2)}for(ie=0;ie<P;ie++)Z[ie]=Z[2*ie+1]<<16|Z[2*ie];for(ie=P;ie<2*P;ie++)Z[ie]=0;return new c(Z,0)};function S(U,P){for(;(U[P]&65535)!=U[P];)U[P+1]+=U[P]>>>16,U[P]&=65535,P++}function j(U,P){this.g=U,this.h=P}function K(U,P){if(A(P))throw Error("division by zero");if(A(U))return new j(v,v);if(w(U))return P=K(I(U),P),new j(I(P.g),I(P.h));if(w(P))return P=K(U,I(P)),new j(I(P.g),P.h);if(30<U.g.length){if(w(U)||w(P))throw Error("slowDivide_ only works with positive integers.");for(var Z=E,ie=P;0>=ie.l(U);)Z=J(Z),ie=J(ie);var ue=H(Z,1),le=H(ie,1);for(ie=H(ie,2),Z=H(Z,2);!A(ie);){var ne=le.add(ie);0>=ne.l(U)&&(ue=ue.add(Z),le=ne),ie=H(ie,1),Z=H(Z,1)}return P=_(U,ue.j(P)),new j(ue,P)}for(ue=v;0<=U.l(P);){for(Z=Math.max(1,Math.floor(U.m()/P.m())),ie=Math.ceil(Math.log(Z)/Math.LN2),ie=48>=ie?1:Math.pow(2,ie-48),le=s(Z),ne=le.j(P);w(ne)||0<ne.l(U);)Z-=ie,le=s(Z),ne=le.j(P);A(le)&&(le=E),ue=ue.add(le),U=_(U,ne)}return new j(ue,U)}t.A=function(U){return K(this,U).h},t.and=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0;ie<P;ie++)Z[ie]=this.i(ie)&U.i(ie);return new c(Z,this.h&U.h)},t.or=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0;ie<P;ie++)Z[ie]=this.i(ie)|U.i(ie);return new c(Z,this.h|U.h)},t.xor=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0;ie<P;ie++)Z[ie]=this.i(ie)^U.i(ie);return new c(Z,this.h^U.h)};function J(U){for(var P=U.g.length+1,Z=[],ie=0;ie<P;ie++)Z[ie]=U.i(ie)<<1|U.i(ie-1)>>>31;return new c(Z,U.h)}function H(U,P){var Z=P>>5;P%=32;for(var ie=U.g.length-Z,ue=[],le=0;le<ie;le++)ue[le]=0<P?U.i(le+Z)>>>P|U.i(le+Z+1)<<32-P:U.i(le+Z);return new c(ue,U.h)}u.prototype.digest=u.prototype.v,u.prototype.reset=u.prototype.s,u.prototype.update=u.prototype.u,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=s,c.fromString=h,Integer$1=c}).apply(typeof commonjsGlobal$3<"u"?commonjsGlobal$3:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(ge,se,me){return ge==Array.prototype||ge==Object.prototype||(ge[se]=me.value),ge};function r(ge){ge=[typeof globalThis=="object"&&globalThis,ge,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal$2=="object"&&commonjsGlobal$2];for(var se=0;se<ge.length;++se){var me=ge[se];if(me&&me.Math==Math)return me}throw Error("Cannot find global object")}var u=r(this);function d(ge,se){if(se)e:{var me=u;ge=ge.split(".");for(var Oe=0;Oe<ge.length-1;Oe++){var Me=ge[Oe];if(!(Me in me))break e;me=me[Me]}ge=ge[ge.length-1],Oe=me[ge],se=se(Oe),se!=Oe&&se!=null&&e(me,ge,{configurable:!0,writable:!0,value:se})}}function m(ge,se){ge instanceof String&&(ge+="");var me=0,Oe=!1,Me={next:function(){if(!Oe&&me<ge.length){var Xe=me++;return{value:se(Xe,ge[Xe]),done:!1}}return Oe=!0,{done:!0,value:void 0}}};return Me[Symbol.iterator]=function(){return Me},Me}d("Array.prototype.values",function(ge){return ge||function(){return m(this,function(se,me){return me})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},a=this||self;function o(ge){var se=typeof ge;return se=se!="object"?se:ge?Array.isArray(ge)?"array":se:"null",se=="array"||se=="object"&&typeof ge.length=="number"}function s(ge){var se=typeof ge;return se=="object"&&ge!=null||se=="function"}function h(ge,se,me){return ge.call.apply(ge.bind,arguments)}function v(ge,se,me){if(!ge)throw Error();if(2<arguments.length){var Oe=Array.prototype.slice.call(arguments,2);return function(){var Me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Me,Oe),ge.apply(se,Me)}}return function(){return ge.apply(se,arguments)}}function E(ge,se,me){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:v,E.apply(null,arguments)}function y(ge,se){var me=Array.prototype.slice.call(arguments,1);return function(){var Oe=me.slice();return Oe.push.apply(Oe,arguments),ge.apply(this,Oe)}}function A(ge,se){function me(){}me.prototype=se.prototype,ge.aa=se.prototype,ge.prototype=new me,ge.prototype.constructor=ge,ge.Qb=function(Oe,Me,Xe){for(var pt=Array(arguments.length-2),ar=2;ar<arguments.length;ar++)pt[ar-2]=arguments[ar];return se.prototype[Me].apply(Oe,pt)}}function w(ge){const se=ge.length;if(0<se){const me=Array(se);for(let Oe=0;Oe<se;Oe++)me[Oe]=ge[Oe];return me}return[]}function I(ge,se){for(let me=1;me<arguments.length;me++){const Oe=arguments[me];if(o(Oe)){const Me=ge.length||0,Xe=Oe.length||0;ge.length=Me+Xe;for(let pt=0;pt<Xe;pt++)ge[Me+pt]=Oe[pt]}else ge.push(Oe)}}class _{constructor(se,me){this.i=se,this.j=me,this.h=0,this.g=null}get(){let se;return 0<this.h?(this.h--,se=this.g,this.g=se.next,se.next=null):se=this.i(),se}}function S(ge){return/^[\s\xa0]*$/.test(ge)}function j(){var ge=a.navigator;return ge&&(ge=ge.userAgent)?ge:""}function K(ge){return K[" "](ge),ge}K[" "]=function(){};var J=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function H(ge,se,me){for(const Oe in ge)se.call(me,ge[Oe],Oe,ge)}function U(ge,se){for(const me in ge)se.call(void 0,ge[me],me,ge)}function P(ge){const se={};for(const me in ge)se[me]=ge[me];return se}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(ge,se){let me,Oe;for(let Me=1;Me<arguments.length;Me++){Oe=arguments[Me];for(me in Oe)ge[me]=Oe[me];for(let Xe=0;Xe<Z.length;Xe++)me=Z[Xe],Object.prototype.hasOwnProperty.call(Oe,me)&&(ge[me]=Oe[me])}}function ue(ge){var se=1;ge=ge.split(":");const me=[];for(;0<se&&ge.length;)me.push(ge.shift()),se--;return ge.length&&me.push(ge.join(":")),me}function le(ge){a.setTimeout(()=>{throw ge},0)}function ne(){var ge=be;let se=null;return ge.g&&(se=ge.g,ge.g=ge.g.next,ge.g||(ge.h=null),se.next=null),se}class ye{constructor(){this.h=this.g=null}add(se,me){const Oe=fe.get();Oe.set(se,me),this.h?this.h.next=Oe:this.g=Oe,this.h=Oe}}var fe=new _(()=>new Te,ge=>ge.reset());class Te{constructor(){this.next=this.g=this.h=null}set(se,me){this.h=se,this.g=me,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Se=!1,be=new ye,we=()=>{const ge=a.Promise.resolve(void 0);Ae=()=>{ge.then(Ce)}};var Ce=()=>{for(var ge;ge=ne();){try{ge.h.call(ge.g)}catch(me){le(me)}var se=fe;se.j(ge),100>se.h&&(se.h++,ge.next=se.g,se.g=ge)}Se=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(ge,se){this.type=ge,this.g=this.target=se,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var ge=!1,se=Object.defineProperty({},"passive",{get:function(){ge=!0}});try{const me=()=>{};a.addEventListener("test",me,se),a.removeEventListener("test",me,se)}catch{}return ge}();function Ge(ge,se){if(Fe.call(this,ge?ge.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,ge){var me=this.type=ge.type,Oe=ge.changedTouches&&ge.changedTouches.length?ge.changedTouches[0]:null;if(this.target=ge.target||ge.srcElement,this.g=se,se=ge.relatedTarget){if(J){e:{try{K(se.nodeName);var Me=!0;break e}catch{}Me=!1}Me||(se=null)}}else me=="mouseover"?se=ge.fromElement:me=="mouseout"&&(se=ge.toElement);this.relatedTarget=se,Oe?(this.clientX=Oe.clientX!==void 0?Oe.clientX:Oe.pageX,this.clientY=Oe.clientY!==void 0?Oe.clientY:Oe.pageY,this.screenX=Oe.screenX||0,this.screenY=Oe.screenY||0):(this.clientX=ge.clientX!==void 0?ge.clientX:ge.pageX,this.clientY=ge.clientY!==void 0?ge.clientY:ge.pageY,this.screenX=ge.screenX||0,this.screenY=ge.screenY||0),this.button=ge.button,this.key=ge.key||"",this.ctrlKey=ge.ctrlKey,this.altKey=ge.altKey,this.shiftKey=ge.shiftKey,this.metaKey=ge.metaKey,this.pointerId=ge.pointerId||0,this.pointerType=typeof ge.pointerType=="string"?ge.pointerType:Le[ge.pointerType]||"",this.state=ge.state,this.i=ge,ge.defaultPrevented&&Ge.aa.h.call(this)}}A(Ge,Fe);var Le={2:"touch",3:"pen",4:"mouse"};Ge.prototype.h=function(){Ge.aa.h.call(this);var ge=this.i;ge.preventDefault?ge.preventDefault():ge.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),$e=0;function he(ge,se,me,Oe,Me){this.listener=ge,this.proxy=null,this.src=se,this.type=me,this.capture=!!Oe,this.ha=Me,this.key=++$e,this.da=this.fa=!1}function p(ge){ge.da=!0,ge.listener=null,ge.proxy=null,ge.src=null,ge.ha=null}function V(ge){this.src=ge,this.g={},this.h=0}V.prototype.add=function(ge,se,me,Oe,Me){var Xe=ge.toString();ge=this.g[Xe],ge||(ge=this.g[Xe]=[],this.h++);var pt=ce(ge,se,Oe,Me);return-1<pt?(se=ge[pt],me||(se.fa=!1)):(se=new he(se,this.src,Xe,!!Oe,Me),se.fa=me,ge.push(se)),se};function R(ge,se){var me=se.type;if(me in ge.g){var Oe=ge.g[me],Me=Array.prototype.indexOf.call(Oe,se,void 0),Xe;(Xe=0<=Me)&&Array.prototype.splice.call(Oe,Me,1),Xe&&(p(se),ge.g[me].length==0&&(delete ge.g[me],ge.h--))}}function ce(ge,se,me,Oe){for(var Me=0;Me<ge.length;++Me){var Xe=ge[Me];if(!Xe.da&&Xe.listener==se&&Xe.capture==!!me&&Xe.ha==Oe)return Me}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),ke={};function qe(ge,se,me,Oe,Me){if(Array.isArray(se)){for(var Xe=0;Xe<se.length;Xe++)qe(ge,se[Xe],me,Oe,Me);return null}return me=nt(me),ge&&ge[Be]?ge.K(se,me,s(Oe)?!!Oe.capture:!1,Me):g(ge,se,me,!1,Oe,Me)}function g(ge,se,me,Oe,Me,Xe){if(!se)throw Error("Invalid event type");var pt=s(Me)?!!Me.capture:!!Me,ar=_e(ge);if(ar||(ge[Re]=ar=new V(ge)),me=ar.add(se,me,Oe,pt,Xe),me.proxy)return me;if(Oe=ee(),me.proxy=Oe,Oe.src=ge,Oe.listener=me,ge.addEventListener)Ve||(Me=pt),Me===void 0&&(Me=!1),ge.addEventListener(se.toString(),Oe,Me);else if(ge.attachEvent)ge.attachEvent(X(se.toString()),Oe);else if(ge.addListener&&ge.removeListener)ge.addListener(Oe);else throw Error("addEventListener and attachEvent are unavailable.");return me}function ee(){function ge(me){return se.call(ge.src,ge.listener,me)}const se=oe;return ge}function ae(ge,se,me,Oe,Me){if(Array.isArray(se))for(var Xe=0;Xe<se.length;Xe++)ae(ge,se[Xe],me,Oe,Me);else Oe=s(Oe)?!!Oe.capture:!!Oe,me=nt(me),ge&&ge[Be]?(ge=ge.i,se=String(se).toString(),se in ge.g&&(Xe=ge.g[se],me=ce(Xe,me,Oe,Me),-1<me&&(p(Xe[me]),Array.prototype.splice.call(Xe,me,1),Xe.length==0&&(delete ge.g[se],ge.h--)))):ge&&(ge=_e(ge))&&(se=ge.g[se.toString()],ge=-1,se&&(ge=ce(se,me,Oe,Me)),(me=-1<ge?se[ge]:null)&&l(me))}function l(ge){if(typeof ge!="number"&&ge&&!ge.da){var se=ge.src;if(se&&se[Be])R(se.i,ge);else{var me=ge.type,Oe=ge.proxy;se.removeEventListener?se.removeEventListener(me,Oe,ge.capture):se.detachEvent?se.detachEvent(X(me),Oe):se.addListener&&se.removeListener&&se.removeListener(Oe),(me=_e(se))?(R(me,ge),me.h==0&&(me.src=null,se[Re]=null)):p(ge)}}}function X(ge){return ge in ke?ke[ge]:ke[ge]="on"+ge}function oe(ge,se){if(ge.da)ge=!0;else{se=new Ge(se,this);var me=ge.listener,Oe=ge.ha||ge.src;ge.fa&&l(ge),ge=me.call(Oe,se)}return ge}function _e(ge){return ge=ge[Re],ge instanceof V?ge:null}var He="__closure_events_fn_"+(1e9*Math.random()>>>0);function nt(ge){return typeof ge=="function"?ge:(ge[He]||(ge[He]=function(se){return ge.handleEvent(se)}),ge[He])}function It(){je.call(this),this.i=new V(this),this.M=this,this.F=null}A(It,je),It.prototype[Be]=!0,It.prototype.removeEventListener=function(ge,se,me,Oe){ae(this,ge,se,me,Oe)};function wt(ge,se){var me,Oe=ge.F;if(Oe)for(me=[];Oe;Oe=Oe.F)me.push(Oe);if(ge=ge.M,Oe=se.type||se,typeof se=="string")se=new Fe(se,ge);else if(se instanceof Fe)se.target=se.target||ge;else{var Me=se;se=new Fe(Oe,ge),ie(se,Me)}if(Me=!0,me)for(var Xe=me.length-1;0<=Xe;Xe--){var pt=se.g=me[Xe];Me=ir(pt,Oe,!0,se)&&Me}if(pt=se.g=ge,Me=ir(pt,Oe,!0,se)&&Me,Me=ir(pt,Oe,!1,se)&&Me,me)for(Xe=0;Xe<me.length;Xe++)pt=se.g=me[Xe],Me=ir(pt,Oe,!1,se)&&Me}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var ge=this.i,se;for(se in ge.g){for(var me=ge.g[se],Oe=0;Oe<me.length;Oe++)p(me[Oe]);delete ge.g[se],ge.h--}}this.F=null},It.prototype.K=function(ge,se,me,Oe){return this.i.add(String(ge),se,!1,me,Oe)},It.prototype.L=function(ge,se,me,Oe){return this.i.add(String(ge),se,!0,me,Oe)};function ir(ge,se,me,Oe){if(se=ge.i.g[String(se)],!se)return!0;se=se.concat();for(var Me=!0,Xe=0;Xe<se.length;++Xe){var pt=se[Xe];if(pt&&!pt.da&&pt.capture==me){var ar=pt.listener,pn=pt.ha||pt.src;pt.fa&&R(ge.i,pt),Me=ar.call(pn,Oe)!==!1&&Me}}return Me&&!Oe.defaultPrevented}function _r(ge,se,me){if(typeof ge=="function")me&&(ge=E(ge,me));else if(ge&&typeof ge.handleEvent=="function")ge=E(ge.handleEvent,ge);else throw Error("Invalid listener argument");return 2147483647<Number(se)?-1:a.setTimeout(ge,se||0)}function Rr(ge){ge.g=_r(()=>{ge.g=null,ge.i&&(ge.i=!1,Rr(ge))},ge.l);const se=ge.h;ge.h=null,ge.m.apply(null,se)}class Hr extends je{constructor(se,me){super(),this.m=se,this.l=me,this.h=null,this.i=!1,this.g=null}j(se){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(ge){je.call(this),this.h=ge,this.g={}}A(Vr,je);var Tr=[];function $t(ge){H(ge.g,function(se,me){this.g.hasOwnProperty(me)&&l(se)},ge),ge.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),$t(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=a.JSON.stringify,Kt=a.JSON.parse,nr=class{stringify(ge){return a.JSON.stringify(ge,void 0)}parse(ge){return a.JSON.parse(ge,void 0)}};function dr(){}dr.prototype.h=null;function Er(ge){return ge.h||(ge.h=ge.i())}function Mr(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xr(){Fe.call(this,"d")}A(xr,Fe);function kn(){Fe.call(this,"c")}A(kn,Fe);var gn={},bn=null;function Tn(){return bn=bn||new It}gn.La="serverreachability";function yn(ge){Fe.call(this,gn.La,ge)}A(yn,Fe);function Xr(ge){const se=Tn();wt(se,new yn(se))}gn.STAT_EVENT="statevent";function Rn(ge,se){Fe.call(this,gn.STAT_EVENT,ge),this.stat=se}A(Rn,Fe);function yr(ge){const se=Tn();wt(se,new Rn(se,ge))}gn.Ma="timingevent";function Wr(ge,se){Fe.call(this,gn.Ma,ge),this.size=se}A(Wr,Fe);function Yr(ge,se){if(typeof ge!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){ge()},se)}function vn(){this.g=!0}vn.prototype.xa=function(){this.g=!1};function Ur(ge,se,me,Oe,Me,Xe){ge.info(function(){if(ge.g)if(Xe)for(var pt="",ar=Xe.split("&"),pn=0;pn<ar.length;pn++){var Kr=ar[pn].split("=");if(1<Kr.length){var Jr=Kr[0];Kr=Kr[1];var Nn=Jr.split("_");pt=2<=Nn.length&&Nn[1]=="type"?pt+(Jr+"="+Kr+"&"):pt+(Jr+"=redacted&")}}else pt=null;else pt=Xe;return"XMLHTTP REQ ("+Oe+") [attempt "+Me+"]: "+se+`
`+me+`
`+pt})}function Zr(ge,se,me,Oe,Me,Xe,pt){ge.info(function(){return"XMLHTTP RESP ("+Oe+") [ attempt "+Me+"]: "+se+`
`+me+`
`+Xe+" "+pt})}function Fr(ge,se,me,Oe){ge.info(function(){return"XMLHTTP TEXT ("+se+"): "+et(ge,me)+(Oe?" "+Oe:"")})}function tt(ge,se){ge.info(function(){return"TIMEOUT: "+se})}vn.prototype.info=function(){};function et(ge,se){if(!ge.g)return se;if(!se)return null;try{var me=JSON.parse(se);if(me){for(ge=0;ge<me.length;ge++)if(Array.isArray(me[ge])){var Oe=me[ge];if(!(2>Oe.length)){var Me=Oe[1];if(Array.isArray(Me)&&!(1>Me.length)){var Xe=Me[0];if(Xe!="noop"&&Xe!="stop"&&Xe!="close")for(var pt=1;pt<Me.length;pt++)Me[pt]=""}}}}return qt(me)}catch{return se}}var dt={NO_ERROR:0,TIMEOUT:8},Bt={},Ct;function pr(){}A(pr,dr),pr.prototype.g=function(){return new XMLHttpRequest},pr.prototype.i=function(){return{}},Ct=new pr;function Sr(ge,se,me,Oe){this.j=ge,this.i=se,this.l=me,this.R=Oe||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var Ln={},In={};function Un(ge,se,me){ge.L=1,ge.v=Dn(dn(se)),ge.m=me,ge.P=!0,Pr(ge,null)}function Pr(ge,se){ge.F=Date.now(),Dr(ge),ge.A=dn(ge.v);var me=ge.A,Oe=ge.R;Array.isArray(Oe)||(Oe=[String(Oe)]),Li(me.i,"t",Oe),ge.C=0,me=ge.j.J,ge.h=new un,ge.g=Ws(ge.j,me?se:null,!ge.m),0<ge.O&&(ge.M=new Hr(E(ge.Y,ge,ge.g),ge.O)),se=ge.U,me=ge.g,Oe=ge.ca;var Me="readystatechange";Array.isArray(Me)||(Me&&(Tr[0]=Me.toString()),Me=Tr);for(var Xe=0;Xe<Me.length;Xe++){var pt=qe(me,Me[Xe],Oe||se.handleEvent,!1,se.h||se);if(!pt)break;se.g[pt.key]=pt}se=ge.H?P(ge.H):{},ge.m?(ge.u||(ge.u="POST"),se["Content-Type"]="application/x-www-form-urlencoded",ge.g.ea(ge.A,ge.u,ge.m,se)):(ge.u="GET",ge.g.ea(ge.A,ge.u,null,se)),Xr(),Ur(ge.i,ge.u,ge.A,ge.l,ge.R,ge.m)}Sr.prototype.ca=function(ge){ge=ge.target;const se=this.M;se&&T(ge)==3?se.j():this.Y(ge)},Sr.prototype.Y=function(ge){try{if(ge==this.g)e:{const Nn=T(this.g);var se=this.g.Ba();const ci=this.g.Z();if(!(3>Nn)&&(Nn!=3||this.g&&(this.h.h||this.g.oa()||Ne(this.g)))){this.J||Nn!=4||se==7||(se==8||0>=ci?Xr(3):Xr(2)),ai(this);var me=this.g.Z();this.X=me;t:if(Ir(this)){var Oe=Ne(this.g);ge="";var Me=Oe.length,Xe=T(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),xn(this);var pt="";break t}this.h.i=new a.TextDecoder}for(se=0;se<Me;se++)this.h.h=!0,ge+=this.h.i.decode(Oe[se],{stream:!(Xe&&se==Me-1)});Oe.length=0,this.h.g+=ge,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=me==200,Zr(this.i,this.u,this.A,this.l,this.R,Nn,me),this.o){if(this.T&&!this.K){t:{if(this.g){var ar,pn=this.g;if((ar=pn.g?pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(ar)){var Kr=ar;break t}}Kr=null}if(me=Kr)Fr(this.i,this.l,me,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wn(this,me);else{this.o=!1,this.s=3,yr(12),mn(this),xn(this);break e}}if(this.P){me=!0;let Ti;for(;!this.J&&this.C<pt.length;)if(Ti=si(this,pt),Ti==In){Nn==4&&(this.s=4,yr(14),me=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ti==Ln){this.s=4,yr(15),Fr(this.i,this.l,pt,"[Invalid Chunk]"),me=!1;break}else Fr(this.i,this.l,Ti,null),Wn(this,Ti);if(Ir(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||pt.length!=0||this.h.h||(this.s=1,yr(16),me=!1),this.o=this.o&&me,!me)Fr(this.i,this.l,pt,"[Invalid Chunked Response]"),mn(this),xn(this);else if(0<pt.length&&!this.W){this.W=!0;var Jr=this.j;Jr.g==this&&Jr.ba&&!Jr.M&&(Jr.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),fs(Jr),Jr.M=!0,yr(11))}}else Fr(this.i,this.l,pt,null),Wn(this,pt);Nn==4&&mn(this),this.o&&!this.J&&(Nn==4?Ns(this.j,this):(this.o=!1,Dr(this)))}else ur(this.g),me==400&&0<pt.indexOf("Unknown SID")?(this.s=3,yr(12)):(this.s=0,yr(13)),mn(this),xn(this)}}}catch{}finally{}};function Ir(ge){return ge.g?ge.u=="GET"&&ge.L!=2&&ge.j.Ca:!1}function si(ge,se){var me=ge.C,Oe=se.indexOf(`
`,me);return Oe==-1?In:(me=Number(se.substring(me,Oe)),isNaN(me)?Ln:(Oe+=1,Oe+me>se.length?In:(se=se.slice(Oe,Oe+me),ge.C=Oe+me,se)))}Sr.prototype.cancel=function(){this.J=!0,mn(this)};function Dr(ge){ge.S=Date.now()+ge.I,Bn(ge,ge.I)}function Bn(ge,se){if(ge.B!=null)throw Error("WatchDog timer not null");ge.B=Yr(E(ge.ba,ge),se)}function ai(ge){ge.B&&(a.clearTimeout(ge.B),ge.B=null)}Sr.prototype.ba=function(){this.B=null;const ge=Date.now();0<=ge-this.S?(tt(this.i,this.A),this.L!=2&&(Xr(),yr(17)),mn(this),this.s=2,xn(this)):Bn(this,this.S-ge)};function xn(ge){ge.j.G==0||ge.J||Ns(ge.j,ge)}function mn(ge){ai(ge);var se=ge.M;se&&typeof se.ma=="function"&&se.ma(),ge.M=null,$t(ge.U),ge.g&&(se=ge.g,ge.g=null,se.abort(),se.ma())}function Wn(ge,se){try{var me=ge.j;if(me.G!=0&&(me.g==ge||ze(me.h,ge))){if(!ge.K&&ze(me.h,ge)&&me.G==3){try{var Oe=me.Da.g.parse(se)}catch{Oe=null}if(Array.isArray(Oe)&&Oe.length==3){var Me=Oe;if(Me[0]==0){e:if(!me.u){if(me.g)if(me.g.F+3e3<ge.F)os(me),uo(me);else break e;ps(me),yr(18)}}else me.za=Me[1],0<me.za-me.T&&37500>Me[2]&&me.F&&me.v==0&&!me.C&&(me.C=Yr(E(me.Za,me),6e3));if(1>=We(me.h)&&me.ca){try{me.ca()}catch{}me.ca=void 0}}else Gi(me,11)}else if((ge.K||me.g==ge)&&os(me),!S(se))for(Me=me.Da.g.parse(se),se=0;se<Me.length;se++){let Kr=Me[se];if(me.T=Kr[0],Kr=Kr[1],me.G==2)if(Kr[0]=="c"){me.K=Kr[1],me.ia=Kr[2];const Jr=Kr[3];Jr!=null&&(me.la=Jr,me.j.info("VER="+me.la));const Nn=Kr[4];Nn!=null&&(me.Aa=Nn,me.j.info("SVER="+me.Aa));const ci=Kr[5];ci!=null&&typeof ci=="number"&&0<ci&&(Oe=1.5*ci,me.L=Oe,me.j.info("backChannelRequestTimeoutMs_="+Oe)),Oe=me;const Ti=ge.g;if(Ti){const Ni=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ni){var Xe=Oe.h;Xe.g||Ni.indexOf("spdy")==-1&&Ni.indexOf("quic")==-1&&Ni.indexOf("h2")==-1||(Xe.j=Xe.l,Xe.g=new Set,Xe.h&&(yt(Xe,Xe.h),Xe.h=null))}if(Oe.D){const es=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;es&&(Oe.ya=es,vr(Oe.I,Oe.D,es))}}me.G=3,me.l&&me.l.ua(),me.ba&&(me.R=Date.now()-ge.F,me.j.info("Handshake RTT: "+me.R+"ms")),Oe=me;var pt=ge;if(Oe.qa=Ks(Oe,Oe.J?Oe.ia:null,Oe.W),pt.K){tr(Oe.h,pt);var ar=pt,pn=Oe.L;pn&&(ar.I=pn),ar.B&&(ai(ar),Dr(ar)),Oe.g=pt}else ds(Oe);0<me.i.length&&eo(me)}else Kr[0]!="stop"&&Kr[0]!="close"||Gi(me,7);else me.G==3&&(Kr[0]=="stop"||Kr[0]=="close"?Kr[0]=="stop"?Gi(me,7):Fi(me):Kr[0]!="noop"&&me.l&&me.l.ta(Kr),me.v=0)}}Xr(4)}catch{}}var Yn=class{constructor(ge,se){this.g=ge,this.map=se}};function Ai(ge){this.l=ge||10,a.PerformanceNavigationTiming?(ge=a.performance.getEntriesByType("navigation"),ge=0<ge.length&&(ge[0].nextHopProtocol=="hq"||ge[0].nextHopProtocol=="h2")):ge=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=ge?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ue(ge){return ge.h?!0:ge.g?ge.g.size>=ge.j:!1}function We(ge){return ge.h?1:ge.g?ge.g.size:0}function ze(ge,se){return ge.h?ge.h==se:ge.g?ge.g.has(se):!1}function yt(ge,se){ge.g?ge.g.add(se):ge.h=se}function tr(ge,se){ge.h&&ge.h==se?ge.h=null:ge.g&&ge.g.has(se)&&ge.g.delete(se)}Ai.prototype.cancel=function(){if(this.i=er(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const ge of this.g.values())ge.cancel();this.g.clear()}};function er(ge){if(ge.h!=null)return ge.i.concat(ge.h.D);if(ge.g!=null&&ge.g.size!==0){let se=ge.i;for(const me of ge.g.values())se=se.concat(me.D);return se}return w(ge.i)}function fr(ge){if(ge.V&&typeof ge.V=="function")return ge.V();if(typeof Map<"u"&&ge instanceof Map||typeof Set<"u"&&ge instanceof Set)return Array.from(ge.values());if(typeof ge=="string")return ge.split("");if(o(ge)){for(var se=[],me=ge.length,Oe=0;Oe<me;Oe++)se.push(ge[Oe]);return se}se=[],me=0;for(Oe in ge)se[me++]=ge[Oe];return se}function sr(ge){if(ge.na&&typeof ge.na=="function")return ge.na();if(!ge.V||typeof ge.V!="function"){if(typeof Map<"u"&&ge instanceof Map)return Array.from(ge.keys());if(!(typeof Set<"u"&&ge instanceof Set)){if(o(ge)||typeof ge=="string"){var se=[];ge=ge.length;for(var me=0;me<ge;me++)se.push(me);return se}se=[],me=0;for(const Oe in ge)se[me++]=Oe;return se}}}function Qr(ge,se){if(ge.forEach&&typeof ge.forEach=="function")ge.forEach(se,void 0);else if(o(ge)||typeof ge=="string")Array.prototype.forEach.call(ge,se,void 0);else for(var me=sr(ge),Oe=fr(ge),Me=Oe.length,Xe=0;Xe<Me;Xe++)se.call(void 0,Oe[Xe],me&&me[Xe],ge)}var Pn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(ge,se){if(ge){ge=ge.split("&");for(var me=0;me<ge.length;me++){var Oe=ge[me].indexOf("="),Me=null;if(0<=Oe){var Xe=ge[me].substring(0,Oe);Me=ge[me].substring(Oe+1)}else Xe=ge[me];se(Xe,Me?decodeURIComponent(Me.replace(/\+/g," ")):"")}}}function Sn(ge){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,ge instanceof Sn){this.h=ge.h,$n(this,ge.j),this.o=ge.o,this.g=ge.g,On(this,ge.s),this.l=ge.l;var se=ge.i,me=new yi;me.i=se.i,se.g&&(me.g=new Map(se.g),me.h=se.h),qn(this,me),this.m=ge.m}else ge&&(se=String(ge).match(Pn))?(this.h=!1,$n(this,se[1]||"",!0),this.o=Lr(se[2]||""),this.g=Lr(se[3]||"",!0),On(this,se[4]),this.l=Lr(se[5]||"",!0),qn(this,se[6]||"",!0),this.m=Lr(se[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}Sn.prototype.toString=function(){var ge=[],se=this.j;se&&ge.push(mi(se,zi,!0),":");var me=this.g;return(me||se=="file")&&(ge.push("//"),(se=this.o)&&ge.push(mi(se,zi,!0),"@"),ge.push(encodeURIComponent(String(me)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),me=this.s,me!=null&&ge.push(":",String(me))),(me=this.l)&&(this.g&&me.charAt(0)!="/"&&ge.push("/"),ge.push(mi(me,me.charAt(0)=="/"?Ao:$i,!0))),(me=this.i.toString())&&ge.push("?",me),(me=this.m)&&ge.push("#",mi(me,ji)),ge.join("")};function dn(ge){return new Sn(ge)}function $n(ge,se,me){ge.j=me?Lr(se,!0):se,ge.j&&(ge.j=ge.j.replace(/:$/,""))}function On(ge,se){if(se){if(se=Number(se),isNaN(se)||0>se)throw Error("Bad port number "+se);ge.s=se}else ge.s=null}function qn(ge,se,me){se instanceof yi?(ge.i=se,vi(ge.i,ge.h)):(me||(se=mi(se,ki)),ge.i=new yi(se,ge.h))}function vr(ge,se,me){ge.i.set(se,me)}function Dn(ge){return vr(ge,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),ge}function Lr(ge,se){return ge?se?decodeURI(ge.replace(/%25/g,"%2525")):decodeURIComponent(ge):""}function mi(ge,se,me){return typeof ge=="string"?(ge=encodeURI(ge).replace(se,bi),me&&(ge=ge.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ge):null}function bi(ge){return ge=ge.charCodeAt(0),"%"+(ge>>4&15).toString(16)+(ge&15).toString(16)}var zi=/[#\/\?@]/g,$i=/[#\?:]/g,Ao=/[#\?]/g,ki=/[#\?@]/g,ji=/#/g;function yi(ge,se){this.h=this.g=null,this.i=ge||null,this.j=!!se}function Cn(ge){ge.g||(ge.g=new Map,ge.h=0,ge.i&&Qn(ge.i,function(se,me){ge.add(decodeURIComponent(se.replace(/\+/g," ")),me)}))}t=yi.prototype,t.add=function(ge,se){Cn(this),this.i=null,ge=Xn(this,ge);var me=this.g.get(ge);return me||this.g.set(ge,me=[]),me.push(se),this.h+=1,this};function ni(ge,se){Cn(ge),se=Xn(ge,se),ge.g.has(se)&&(ge.i=null,ge.h-=ge.g.get(se).length,ge.g.delete(se))}function Oi(ge,se){return Cn(ge),se=Xn(ge,se),ge.g.has(se)}t.forEach=function(ge,se){Cn(this),this.g.forEach(function(me,Oe){me.forEach(function(Me){ge.call(se,Me,Oe,this)},this)},this)},t.na=function(){Cn(this);const ge=Array.from(this.g.values()),se=Array.from(this.g.keys()),me=[];for(let Oe=0;Oe<se.length;Oe++){const Me=ge[Oe];for(let Xe=0;Xe<Me.length;Xe++)me.push(se[Oe])}return me},t.V=function(ge){Cn(this);let se=[];if(typeof ge=="string")Oi(this,ge)&&(se=se.concat(this.g.get(Xn(this,ge))));else{ge=Array.from(this.g.values());for(let me=0;me<ge.length;me++)se=se.concat(ge[me])}return se},t.set=function(ge,se){return Cn(this),this.i=null,ge=Xn(this,ge),Oi(this,ge)&&(this.h-=this.g.get(ge).length),this.g.set(ge,[se]),this.h+=1,this},t.get=function(ge,se){return ge?(ge=this.V(ge),0<ge.length?String(ge[0]):se):se};function Li(ge,se,me){ni(ge,se),0<me.length&&(ge.i=null,ge.g.set(Xn(ge,se),w(me)),ge.h+=me.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const ge=[],se=Array.from(this.g.keys());for(var me=0;me<se.length;me++){var Oe=se[me];const Xe=encodeURIComponent(String(Oe)),pt=this.V(Oe);for(Oe=0;Oe<pt.length;Oe++){var Me=Xe;pt[Oe]!==""&&(Me+="="+encodeURIComponent(String(pt[Oe]))),ge.push(Me)}}return this.i=ge.join("&")};function Xn(ge,se){return se=String(se),ge.j&&(se=se.toLowerCase()),se}function vi(ge,se){se&&!ge.j&&(Cn(ge),ge.i=null,ge.g.forEach(function(me,Oe){var Me=Oe.toLowerCase();Oe!=Me&&(ni(this,Oe),Li(this,Me,me))},ge)),ge.j=se}function Oo(ge,se){const me=new vn;if(a.Image){const Oe=new Image;Oe.onload=y(Gn,me,"TestLoadImage: loaded",!0,se,Oe),Oe.onerror=y(Gn,me,"TestLoadImage: error",!1,se,Oe),Oe.onabort=y(Gn,me,"TestLoadImage: abort",!1,se,Oe),Oe.ontimeout=y(Gn,me,"TestLoadImage: timeout",!1,se,Oe),a.setTimeout(function(){Oe.ontimeout&&Oe.ontimeout()},1e4),Oe.src=ge}else se(!1)}function lo(ge,se){const me=new vn,Oe=new AbortController,Me=setTimeout(()=>{Oe.abort(),Gn(me,"TestPingServer: timeout",!1,se)},1e4);fetch(ge,{signal:Oe.signal}).then(Xe=>{clearTimeout(Me),Xe.ok?Gn(me,"TestPingServer: ok",!0,se):Gn(me,"TestPingServer: server error",!1,se)}).catch(()=>{clearTimeout(Me),Gn(me,"TestPingServer: error",!1,se)})}function Gn(ge,se,me,Oe,Me){try{Me&&(Me.onload=null,Me.onerror=null,Me.onabort=null,Me.ontimeout=null),Oe(me)}catch{}}function yo(){this.g=new nr}function wo(ge,se,me){const Oe=me||"";try{Qr(ge,function(Me,Xe){let pt=Me;s(Me)&&(pt=qt(Me)),se.push(Oe+Xe+"="+encodeURIComponent(pt))})}catch(Me){throw se.push(Oe+"type="+encodeURIComponent("_badmap")),Me}}function Zn(ge){this.l=ge.Ub||null,this.j=ge.eb||!1}A(Zn,dr),Zn.prototype.g=function(){return new qi(this.l,this.j)},Zn.prototype.i=function(ge){return function(){return ge}}({});function qi(ge,se){It.call(this),this.D=ge,this.o=se,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(qi,It),t=qi.prototype,t.open=function(ge,se){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=ge,this.A=se,this.readyState=1,ui(this)},t.send=function(ge){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const se={headers:this.u,method:this.B,credentials:this.m,cache:void 0};ge&&(se.body=ge),(this.D||a).fetch(new Request(this.A,se)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},t.Sa=function(ge){if(this.g&&(this.l=ge,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=ge.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")ge.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in ge){if(this.j=ge.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ci(this)}else ge.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ci(ge){ge.j.read().then(ge.Pa.bind(ge)).catch(ge.ga.bind(ge))}t.Pa=function(ge){if(this.g){if(this.o&&ge.value)this.response.push(ge.value);else if(!this.o){var se=ge.value?ge.value:new Uint8Array(0);(se=this.v.decode(se,{stream:!ge.done}))&&(this.response=this.responseText+=se)}ge.done?li(this):ui(this),this.readyState==3&&Ci(this)}},t.Ra=function(ge){this.g&&(this.response=this.responseText=ge,li(this))},t.Qa=function(ge){this.g&&(this.response=ge,li(this))},t.ga=function(){this.g&&li(this)};function li(ge){ge.readyState=4,ge.l=null,ge.j=null,ge.v=null,ui(ge)}t.setRequestHeader=function(ge,se){this.u.append(ge,se)},t.getResponseHeader=function(ge){return this.h&&this.h.get(ge.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const ge=[],se=this.h.entries();for(var me=se.next();!me.done;)me=me.value,ge.push(me[0]+": "+me[1]),me=se.next();return ge.join(`\r
`)};function ui(ge){ge.onreadystatechange&&ge.onreadystatechange.call(ge)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(ge){this.m=ge?"include":"same-origin"}});function Qe(ge){let se="";return H(ge,function(me,Oe){se+=Oe,se+=":",se+=me,se+=`\r
`}),se}function Nt(ge,se,me){e:{for(Oe in me){var Oe=!1;break e}Oe=!0}Oe||(me=Qe(me),typeof ge=="string"?me!=null&&encodeURIComponent(String(me)):vr(ge,se,me))}function Dt(ge){It.call(this),this.headers=new Map,this.o=ge||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Dt,It);var Ar=/^https?$/i,Hn=["POST","PUT"];t=Dt.prototype,t.Ha=function(ge){this.J=ge},t.ea=function(ge,se,me,Oe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+ge);se=se?se.toUpperCase():"GET",this.D=ge,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ct.g(),this.v=this.o?Er(this.o):Er(Ct),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(se,String(ge),!0),this.B=!1}catch(Xe){Jn(this,Xe);return}if(ge=me||"",me=new Map(this.headers),Oe)if(Object.getPrototypeOf(Oe)===Object.prototype)for(var Me in Oe)me.set(Me,Oe[Me]);else if(typeof Oe.keys=="function"&&typeof Oe.get=="function")for(const Xe of Oe.keys())me.set(Xe,Oe.get(Xe));else throw Error("Unknown input type for opt_headers: "+String(Oe));Oe=Array.from(me.keys()).find(Xe=>Xe.toLowerCase()=="content-type"),Me=a.FormData&&ge instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Hn,se,void 0))||Oe||Me||me.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Xe,pt]of me)this.g.setRequestHeader(Xe,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{b(this),this.u=!0,this.g.send(ge),this.u=!1}catch(Xe){Jn(this,Xe)}};function Jn(ge,se){ge.h=!1,ge.g&&(ge.j=!0,ge.g.abort(),ge.j=!1),ge.l=se,ge.m=5,di(ge),n(ge)}function di(ge){ge.A||(ge.A=!0,wt(ge,"complete"),wt(ge,"error"))}t.abort=function(ge){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=ge||7,wt(this,"complete"),wt(this,"abort"),n(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),n(this,!0)),Dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ei(this):this.bb())},t.bb=function(){ei(this)};function ei(ge){if(ge.h&&typeof c<"u"&&(!ge.v[1]||T(ge)!=4||ge.Z()!=2)){if(ge.u&&T(ge)==4)_r(ge.Ea,0,ge);else if(wt(ge,"readystatechange"),T(ge)==4){ge.h=!1;try{const pt=ge.Z();e:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var se=!0;break e;default:se=!1}var me;if(!(me=se)){var Oe;if(Oe=pt===0){var Me=String(ge.D).match(Pn)[1]||null;!Me&&a.self&&a.self.location&&(Me=a.self.location.protocol.slice(0,-1)),Oe=!Ar.test(Me?Me.toLowerCase():"")}me=Oe}if(me)wt(ge,"complete"),wt(ge,"success");else{ge.m=6;try{var Xe=2<T(ge)?ge.g.statusText:""}catch{Xe=""}ge.l=Xe+" ["+ge.Z()+"]",di(ge)}}finally{n(ge)}}}}function n(ge,se){if(ge.g){b(ge);const me=ge.g,Oe=ge.v[0]?()=>{}:null;ge.g=null,ge.v=null,se||wt(ge,"ready");try{me.onreadystatechange=Oe}catch{}}}function b(ge){ge.I&&(a.clearTimeout(ge.I),ge.I=null)}t.isActive=function(){return!!this.g};function T(ge){return ge.g?ge.g.readyState:0}t.Z=function(){try{return 2<T(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(ge){if(this.g){var se=this.g.responseText;return ge&&se.indexOf(ge)==0&&(se=se.substring(ge.length)),Kt(se)}};function Ne(ge){try{if(!ge.g)return null;if("response"in ge.g)return ge.g.response;switch(ge.H){case"":case"text":return ge.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in ge.g)return ge.g.mozResponseArrayBuffer}return null}catch{return null}}function ur(ge){const se={};ge=(ge.g&&2<=T(ge)&&ge.g.getAllResponseHeaders()||"").split(`\r
`);for(let Oe=0;Oe<ge.length;Oe++){if(S(ge[Oe]))continue;var me=ue(ge[Oe]);const Me=me[0];if(me=me[1],typeof me!="string")continue;me=me.trim();const Xe=se[Me]||[];se[Me]=Xe,Xe.push(me)}U(se,function(Oe){return Oe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(ge,se,me){return me&&me.internalChannelParams&&me.internalChannelParams[ge]||se}function Co(ge){this.Aa=0,this.i=[],this.j=new vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pi("failFast",!1,ge),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pi("baseRetryDelayMs",5e3,ge),this.cb=Pi("retryDelaySeedMs",1e4,ge),this.Wa=Pi("forwardChannelMaxRetries",2,ge),this.wa=Pi("forwardChannelRequestTimeoutMs",2e4,ge),this.pa=ge&&ge.xmlHttpFactory||void 0,this.Xa=ge&&ge.Tb||void 0,this.Ca=ge&&ge.useFetchStreams||!1,this.L=void 0,this.J=ge&&ge.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(ge&&ge.concurrentRequestLimit),this.Da=new yo,this.P=ge&&ge.fastHandshake||!1,this.O=ge&&ge.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=ge&&ge.Rb||!1,ge&&ge.xa&&this.j.xa(),ge&&ge.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&ge&&ge.detectBufferingProxy||!1,this.ja=void 0,ge&&ge.longPollingTimeout&&0<ge.longPollingTimeout&&(this.ja=ge.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Co.prototype,t.la=8,t.G=1,t.connect=function(ge,se,me,Oe){yr(0),this.W=ge,this.H=se||{},me&&Oe!==void 0&&(this.H.OSID=me,this.H.OAID=Oe),this.F=this.X,this.I=Ks(this,null,this.W),eo(this)};function Fi(ge){if(Ps(ge),ge.G==3){var se=ge.U++,me=dn(ge.I);if(vr(me,"SID",ge.K),vr(me,"RID",se),vr(me,"TYPE","terminate"),Mi(ge,me),se=new Sr(ge,ge.j,se),se.L=2,se.v=Dn(dn(me)),me=!1,a.navigator&&a.navigator.sendBeacon)try{me=a.navigator.sendBeacon(se.v.toString(),"")}catch{}!me&&a.Image&&(new Image().src=se.v,me=!0),me||(se.g=Ws(se.j,null),se.g.ea(se.v)),se.F=Date.now(),Dr(se)}ii(ge)}function uo(ge){ge.g&&(fs(ge),ge.g.cancel(),ge.g=null)}function Ps(ge){uo(ge),ge.u&&(a.clearTimeout(ge.u),ge.u=null),os(ge),ge.h.cancel(),ge.s&&(typeof ge.s=="number"&&a.clearTimeout(ge.s),ge.s=null)}function eo(ge){if(!Ue(ge.h)&&!ge.s){ge.s=!0;var se=ge.Ga;Ae||we(),Se||(Ae(),Se=!0),be.add(se,ge),ge.B=0}}function ql(ge,se){return We(ge.h)>=ge.h.j-(ge.s?1:0)?!1:ge.s?(ge.i=se.D.concat(ge.i),!0):ge.G==1||ge.G==2||ge.B>=(ge.Va?0:ge.Wa)?!1:(ge.s=Yr(E(ge.Ga,ge,se),Hs(ge,ge.B)),ge.B++,!0)}t.Ga=function(ge){if(this.s)if(this.s=null,this.G==1){if(!ge){this.U=Math.floor(1e5*Math.random()),ge=this.U++;const Me=new Sr(this,this.j,ge);let Xe=this.o;if(this.S&&(Xe?(Xe=P(Xe),ie(Xe,this.S)):Xe=this.S),this.m!==null||this.O||(Me.H=Xe,Xe=null),this.P)e:{for(var se=0,me=0;me<this.i.length;me++){t:{var Oe=this.i[me];if("__data__"in Oe.map&&(Oe=Oe.map.__data__,typeof Oe=="string")){Oe=Oe.length;break t}Oe=void 0}if(Oe===void 0)break;if(se+=Oe,4096<se){se=me;break e}if(se===4096||me===this.i.length-1){se=me+1;break e}}se=1e3}else se=1e3;se=Uo(this,Me,se),me=dn(this.I),vr(me,"RID",ge),vr(me,"CVER",22),this.D&&vr(me,"X-HTTP-Session-Id",this.D),Mi(this,me),Xe&&(this.O?se="headers="+encodeURIComponent(String(Qe(Xe)))+"&"+se:this.m&&Nt(me,this.m,Xe)),yt(this.h,Me),this.Ua&&vr(me,"TYPE","init"),this.P?(vr(me,"$req",se),vr(me,"SID","null"),Me.T=!0,Un(Me,me,null)):Un(Me,me,se),this.G=2}}else this.G==3&&(ge?Xo(this,ge):this.i.length==0||Ue(this.h)||Xo(this))};function Xo(ge,se){var me;se?me=se.l:me=ge.U++;const Oe=dn(ge.I);vr(Oe,"SID",ge.K),vr(Oe,"RID",me),vr(Oe,"AID",ge.T),Mi(ge,Oe),ge.m&&ge.o&&Nt(Oe,ge.m,ge.o),me=new Sr(ge,ge.j,me,ge.B+1),ge.m===null&&(me.H=ge.o),se&&(ge.i=se.D.concat(ge.i)),se=Uo(ge,me,1e3),me.I=Math.round(.5*ge.wa)+Math.round(.5*ge.wa*Math.random()),yt(ge.h,me),Un(me,Oe,se)}function Mi(ge,se){ge.H&&H(ge.H,function(me,Oe){vr(se,Oe,me)}),ge.l&&Qr({},function(me,Oe){vr(se,Oe,me)})}function Uo(ge,se,me){me=Math.min(ge.i.length,me);var Oe=ge.l?E(ge.l.Na,ge.l,ge):null;e:{var Me=ge.i;let Xe=-1;for(;;){const pt=["count="+me];Xe==-1?0<me?(Xe=Me[0].g,pt.push("ofs="+Xe)):Xe=0:pt.push("ofs="+Xe);let ar=!0;for(let pn=0;pn<me;pn++){let Kr=Me[pn].g;const Jr=Me[pn].map;if(Kr-=Xe,0>Kr)Xe=Math.max(0,Me[pn].g-100),ar=!1;else try{wo(Jr,pt,"req"+Kr+"_")}catch{Oe&&Oe(Jr)}}if(ar){Oe=pt.join("&");break e}}}return ge=ge.i.splice(0,me),se.D=ge,Oe}function ds(ge){if(!ge.g&&!ge.u){ge.Y=1;var se=ge.Fa;Ae||we(),Se||(Ae(),Se=!0),be.add(se,ge),ge.v=0}}function ps(ge){return ge.g||ge.u||3<=ge.v?!1:(ge.Y++,ge.u=Yr(E(ge.Fa,ge),Hs(ge,ge.v)),ge.v++,!0)}t.Fa=function(){if(this.u=null,ha(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var ge=2*this.R;this.j.info("BP detection timer enabled: "+ge),this.A=Yr(E(this.ab,this),ge)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yr(10),uo(this),ha(this))};function fs(ge){ge.A!=null&&(a.clearTimeout(ge.A),ge.A=null)}function ha(ge){ge.g=new Sr(ge,ge.j,"rpc",ge.Y),ge.m===null&&(ge.g.H=ge.o),ge.g.O=0;var se=dn(ge.qa);vr(se,"RID","rpc"),vr(se,"SID",ge.K),vr(se,"AID",ge.T),vr(se,"CI",ge.F?"0":"1"),!ge.F&&ge.ja&&vr(se,"TO",ge.ja),vr(se,"TYPE","xmlhttp"),Mi(ge,se),ge.m&&ge.o&&Nt(se,ge.m,ge.o),ge.L&&(ge.g.I=ge.L);var me=ge.g;ge=ge.ia,me.L=1,me.v=Dn(dn(se)),me.m=null,me.P=!0,Pr(me,ge)}t.Za=function(){this.C!=null&&(this.C=null,uo(this),ps(this),yr(19))};function os(ge){ge.C!=null&&(a.clearTimeout(ge.C),ge.C=null)}function Ns(ge,se){var me=null;if(ge.g==se){os(ge),fs(ge),ge.g=null;var Oe=2}else if(ze(ge.h,se))me=se.D,tr(ge.h,se),Oe=1;else return;if(ge.G!=0){if(se.o)if(Oe==1){me=se.m?se.m.length:0,se=Date.now()-se.F;var Me=ge.B;Oe=Tn(),wt(Oe,new Wr(Oe,me)),eo(ge)}else ds(ge);else if(Me=se.s,Me==3||Me==0&&0<se.X||!(Oe==1&&ql(ge,se)||Oe==2&&ps(ge)))switch(me&&0<me.length&&(se=ge.h,se.i=se.i.concat(me)),Me){case 1:Gi(ge,5);break;case 4:Gi(ge,10);break;case 3:Gi(ge,6);break;default:Gi(ge,2)}}}function Hs(ge,se){let me=ge.Ta+Math.floor(Math.random()*ge.cb);return ge.isActive()||(me*=2),me*se}function Gi(ge,se){if(ge.j.info("Error code "+se),se==2){var me=E(ge.fb,ge),Oe=ge.Xa;const Me=!Oe;Oe=new Sn(Oe||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$n(Oe,"https"),Dn(Oe),Me?Oo(Oe.toString(),me):lo(Oe.toString(),me)}else yr(2);ge.G=0,ge.l&&ge.l.sa(se),ii(ge),Ps(ge)}t.fb=function(ge){ge?(this.j.info("Successfully pinged google.com"),yr(2)):(this.j.info("Failed to ping google.com"),yr(1))};function ii(ge){if(ge.G=0,ge.ka=[],ge.l){const se=er(ge.h);(se.length!=0||ge.i.length!=0)&&(I(ge.ka,se),I(ge.ka,ge.i),ge.h.i.length=0,w(ge.i),ge.i.length=0),ge.l.ra()}}function Ks(ge,se,me){var Oe=me instanceof Sn?dn(me):new Sn(me);if(Oe.g!="")se&&(Oe.g=se+"."+Oe.g),On(Oe,Oe.s);else{var Me=a.location;Oe=Me.protocol,se=se?se+"."+Me.hostname:Me.hostname,Me=+Me.port;var Xe=new Sn(null);Oe&&$n(Xe,Oe),se&&(Xe.g=se),Me&&On(Xe,Me),me&&(Xe.l=me),Oe=Xe}return me=ge.D,se=ge.ya,me&&se&&vr(Oe,me,se),vr(Oe,"VER",ge.la),Mi(ge,Oe),Oe}function Ws(ge,se,me){if(se&&!ge.J)throw Error("Can't create secondary domain capable XhrIo object.");return se=ge.Ca&&!ge.pa?new Dt(new Zn({eb:me})):new Dt(ge.pa),se.Ha(ge.J),se}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xs(){}t=xs.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vi(ge,se){It.call(this),this.g=new Co(se),this.l=ge,this.h=se&&se.messageUrlParams||null,ge=se&&se.messageHeaders||null,se&&se.clientProtocolHeaderRequired&&(ge?ge["X-Client-Protocol"]="webchannel":ge={"X-Client-Protocol":"webchannel"}),this.g.o=ge,ge=se&&se.initMessageHeaders||null,se&&se.messageContentType&&(ge?ge["X-WebChannel-Content-Type"]=se.messageContentType:ge={"X-WebChannel-Content-Type":se.messageContentType}),se&&se.va&&(ge?ge["X-WebChannel-Client-Profile"]=se.va:ge={"X-WebChannel-Client-Profile":se.va}),this.g.S=ge,(ge=se&&se.Sb)&&!S(ge)&&(this.g.m=ge),this.v=se&&se.supportsCrossDomainXhr||!1,this.u=se&&se.sendRawJson||!1,(se=se&&se.httpSessionIdParam)&&!S(se)&&(this.g.D=se,ge=this.h,ge!==null&&se in ge&&(ge=this.h,se in ge&&delete ge[se])),this.j=new Zo(this)}A(Vi,It),Vi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vi.prototype.close=function(){Fi(this.g)},Vi.prototype.o=function(ge){var se=this.g;if(typeof ge=="string"){var me={};me.__data__=ge,ge=me}else this.u&&(me={},me.__data__=qt(ge),ge=me);se.i.push(new Yn(se.Ya++,ge)),se.G==3&&eo(se)},Vi.prototype.N=function(){this.g.l=null,delete this.j,Fi(this.g),delete this.g,Vi.aa.N.call(this)};function to(ge){xr.call(this),ge.__headers__&&(this.headers=ge.__headers__,this.statusCode=ge.__status__,delete ge.__headers__,delete ge.__status__);var se=ge.__sm__;if(se){e:{for(const me in se){ge=me;break e}ge=void 0}(this.i=ge)&&(ge=this.i,se=se!==null&&ge in se?se[ge]:void 0),this.data=se}else this.data=ge}A(to,xr);function ga(){kn.call(this),this.status=1}A(ga,kn);function Zo(ge){this.g=ge}A(Zo,xs),Zo.prototype.ua=function(){wt(this.g,"a")},Zo.prototype.ta=function(ge){wt(this.g,new to(ge))},Zo.prototype.sa=function(ge){wt(this.g,new ga)},Zo.prototype.ra=function(){wt(this.g,"b")},Vi.prototype.send=Vi.prototype.o,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,Bt.COMPLETE="complete",Mr.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",It.prototype.listen=It.prototype.K,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha}).apply(typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{});const F$1="@firebase/firestore",M$1="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let User$1=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};User$1.UNAUTHENTICATED=new User$1(null),User$1.GOOGLE_CREDENTIALS=new User$1("google-credentials-uid"),User$1.FIRST_PARTY=new User$1("first-party-uid"),User$1.MOCK_USER=new User$1("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$1="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger$1("@firebase/firestore");function __PRIVATE_logDebug$1(t,...e){if(O$1.logLevel<=LogLevel$1.DEBUG){const r=e.map(__PRIVATE_argToString$1);O$1.debug(`Firestore (${x$1}): ${t}`,...r)}}function __PRIVATE_logError$1(t,...e){if(O$1.logLevel<=LogLevel$1.ERROR){const r=e.map(__PRIVATE_argToString$1);O$1.error(`Firestore (${x$1}): ${t}`,...r)}}function __PRIVATE_logWarn$1(t,...e){if(O$1.logLevel<=LogLevel$1.WARN){const r=e.map(__PRIVATE_argToString$1);O$1.warn(`Firestore (${x$1}): ${t}`,...r)}}function __PRIVATE_argToString$1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail$1(t,e,r){let u="Unexpected state";typeof e=="string"?u=e:r=e,__PRIVATE__fail$1(t,u,r)}function __PRIVATE__fail$1(t,e,r){let u=`FIRESTORE (${x$1}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{u+=" CONTEXT: "+JSON.stringify(r)}catch{u+=" CONTEXT: "+r}throw __PRIVATE_logError$1(u),new Error(u)}function __PRIVATE_hardAssert$1(t,e,r,u){let d="Unexpected state";typeof r=="string"?d=r:u=r,t||__PRIVATE__fail$1(e,d,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};let FirestoreError$1=class extends FirebaseError$1{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_Deferred$1=class{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_OAuthToken$1=class{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},__PRIVATE_EmptyAuthCredentialsProvider$1=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(User$1.UNAUTHENTICATED))}shutdown(){}};class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}let __PRIVATE_FirebaseAuthCredentialsProvider$1=class{constructor(e){this.t=e,this.currentUser=User$1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){__PRIVATE_hardAssert$1(this.o===void 0,42304);let u=this.i;const d=o=>this.i!==u?(u=this.i,r(o)):Promise.resolve();let m=new __PRIVATE_Deferred$1;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new __PRIVATE_Deferred$1,e.enqueueRetryable(()=>d(this.currentUser))};const c=()=>{const o=m;e.enqueueRetryable(async()=>{await o.promise,await d(this.currentUser)})},a=o=>{__PRIVATE_logDebug$1("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(__PRIVATE_logDebug$1("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new __PRIVATE_Deferred$1)}},0),c()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(u=>this.i!==e?(__PRIVATE_logDebug$1("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(__PRIVATE_hardAssert$1(typeof u.accessToken=="string",31837,{l:u}),new __PRIVATE_OAuthToken$1(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert$1(e===null||typeof e=="string",2055,{h:e}),new User$1(e)}},__PRIVATE_FirstPartyToken$1=class{constructor(e,r,u){this.P=e,this.T=r,this.I=u,this.type="FirstParty",this.user=User$1.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},__PRIVATE_FirstPartyAuthCredentialsProvider$1=class{constructor(e,r,u){this.P=e,this.T=r,this.I=u}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken$1(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(User$1.FIRST_PARTY))}shutdown(){}invalidateToken(){}},AppCheckToken$1=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},__PRIVATE_FirebaseAppCheckTokenProvider$1=class{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp$1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){__PRIVATE_hardAssert$1(this.o===void 0,3512);const u=m=>{m.error!=null&&__PRIVATE_logDebug$1("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const c=m.token!==this.m;return this.m=m.token,__PRIVATE_logDebug$1("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?r(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>u(m))};const d=m=>{__PRIVATE_logDebug$1("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(m=>d(m)),setTimeout(()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?d(m):__PRIVATE_logDebug$1("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken$1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(__PRIVATE_hardAssert$1(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new AppCheckToken$1(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function __PRIVATE_isIndexedDbTransactionError$1(t){return t.name==="IndexedDbTransactionError"}const ut$1="(default)";let DatabaseId$1=class Pf{constructor(e,r){this.projectId=e,this.database=r||ut$1}static empty(){return new Pf("","")}get isDefaultDatabase(){return this.database===ut$1}isEqual(e){return e instanceof Pf&&e.projectId===this.projectId&&e.database===this.database}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft$1,gt$1;(gt$1=ft$1||(ft$1={}))[gt$1.OK=0]="OK",gt$1[gt$1.CANCELLED=1]="CANCELLED",gt$1[gt$1.UNKNOWN=2]="UNKNOWN",gt$1[gt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt$1[gt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt$1[gt$1.NOT_FOUND=5]="NOT_FOUND",gt$1[gt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt$1[gt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt$1[gt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt$1[gt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt$1[gt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt$1[gt$1.ABORTED=10]="ABORTED",gt$1[gt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt$1[gt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt$1[gt$1.INTERNAL=13]="INTERNAL",gt$1[gt$1.UNAVAILABLE=14]="UNAVAILABLE",gt$1[gt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Integer$1([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt$1=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot$1=1048576;function getDocument$1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __PRIVATE_ExponentialBackoff$1=class{constructor(e,r,u=1e3,d=1.5,m=6e4){this.xi=e,this.timerId=r,this.A_=u,this.R_=d,this.V_=m,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const r=Math.floor(this.m_+this.w_()),u=Math.max(0,Date.now()-this.g_),d=Math.max(0,r-u);d>0&&__PRIVATE_logDebug$1("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.m_} ms, delay with jitter: ${r} ms, last attempt: ${u} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,d,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DelayedOperation$1=class bh{constructor(e,r,u,d,m){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=u,this.op=d,this.removalCallback=m,this.deferred=new __PRIVATE_Deferred$1,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,u,d,m){const c=Date.now()+u,a=new bh(e,r,c,d,m);return a.start(u),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError$1(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var en$1,tn$1;(tn$1=en$1||(en$1={})).xa="default",tn$1.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions$1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn$1=new Map;function __PRIVATE_validateIsNotUsedTogether$1(t,e,r,u){if(e===!0&&u===!0)throw new FirestoreError$1(N$1.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function __PRIVATE_valueDescription$1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(u){return u.constructor?u.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail$1(12329,{type:typeof t})}function __PRIVATE_cast$1(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError$1(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=__PRIVATE_valueDescription$1(t);throw new FirestoreError$1(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on$1="firestore.googleapis.com",_n$1=!0;let FirestoreSettingsImpl$1=class{constructor(e){var r,u;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError$1(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on$1,this.ssl=_n$1}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:_n$1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot$1)throw new FirestoreError$1(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether$1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions$1((u=e.experimentalLongPollingOptions)!==null&&u!==void 0?u:{}),function(m){if(m.timeoutSeconds!==void 0){if(isNaN(m.timeoutSeconds))throw new FirestoreError$1(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (must not be NaN)`);if(m.timeoutSeconds<5)throw new FirestoreError$1(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (minimum allowed value is 5)`);if(m.timeoutSeconds>30)throw new FirestoreError$1(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(u,d){return u.timeoutSeconds===d.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Firestore$1$1=class{constructor(e,r,u,d){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=u,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl$1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError$1(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError$1(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl$1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(u){if(!u)return new __PRIVATE_EmptyAuthCredentialsProvider$1;switch(u.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider$1(u.sessionIndex||"0",u.iamToken||null,u.authTokenFactory||null);case"provider":return u.client;default:throw new FirestoreError$1(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const u=sn$1.get(r);u&&(__PRIVATE_logDebug$1("ComponentProvider","Removing Datastore"),sn$1.delete(r),u.terminate())}(this),Promise.resolve()}};function connectFirestoreEmulator(t,e,r,u={}){var d;t=__PRIVATE_cast$1(t,Firestore$1$1);const m=isCloudWorkstation$1(e),c=t._getSettings(),a=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),o=`${e}:${r}`;m&&(pingServer(`https://${o}`),updateEmulatorBanner("Firestore",!0)),c.host!==on$1&&c.host!==o&&__PRIVATE_logWarn$1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const s=Object.assign(Object.assign({},c),{host:o,ssl:m,emulatorOptions:u});if(!deepEqual(s,a)&&(t._setSettings(s),u.mockUserToken)){let h,v;if(typeof u.mockUserToken=="string")h=u.mockUserToken,v=User$1.MOCK_USER;else{h=createMockUserToken(u.mockUserToken,(d=t._app)===null||d===void 0?void 0:d.options.projectId);const E=u.mockUserToken.sub||u.mockUserToken.user_id;if(!E)throw new FirestoreError$1(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new User$1(E)}t._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken$1(h,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an$1="AsyncQueue";let __PRIVATE_AsyncQueueImpl$1=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new __PRIVATE_ExponentialBackoff$1(this,"async_queue_retry"),this.rc=()=>{const u=getDocument$1();u&&__PRIVATE_logDebug$1(an$1,"Visibility state changed to "+u.visibilityState),this.x_.b_()},this.sc=e;const r=getDocument$1();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const r=getDocument$1();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const r=new __PRIVATE_Deferred$1;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError$1(e))throw e;__PRIVATE_logDebug$1(an$1,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const r=this.sc.then(()=>(this.ec=!0,e().catch(u=>{throw this.Xu=u,this.ec=!1,__PRIVATE_logError$1("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack$1(u)),u}).then(u=>(this.ec=!1,u))));return this.sc=r,r}enqueueAfterDelay(e,r,u){this.oc(),this.nc.indexOf(e)>-1&&(r=0);const d=DelayedOperation$1.createAndSchedule(this,e,r,u,m=>this.uc(m));return this.Zu.push(d),d}oc(){this.Xu&&fail$1(47125,{cc:__PRIVATE_getMessageOrStack$1(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const r of this.Zu)if(r.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((r,u)=>r.targetTimeMs-u.targetTimeMs);for(const r of this.Zu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const r=this.Zu.indexOf(e);this.Zu.splice(r,1)}};function __PRIVATE_getMessageOrStack$1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}let Firestore$2=class extends Firestore$1$1{constructor(e,r,u,d){super(e,r,u,d),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl$1,this._persistenceKey=d?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl$1(e),this._firestoreClient=void 0,await e}}};function getFirestore(t,e){const r=getApp(),u=ut$1,d=_getProvider(r,"firestore").getImmediate({identifier:u});if(!d._initialized){const m=getDefaultEmulatorHostnameAndPort("firestore");m&&connectFirestoreEmulator(d,...m)}return d}(function t(e,r=!0){(function(d){x$1=d})(SDK_VERSION$1),_registerComponent$1(new Component$1("firestore",(u,{instanceIdentifier:d,options:m})=>{const c=u.getProvider("app").getImmediate(),a=new Firestore$2(new __PRIVATE_FirebaseAuthCredentialsProvider$1(u.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider$1(c,u.getProvider("app-check-internal")),function(s,h){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new FirestoreError$1(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId$1(s.options.projectId,h)}(c,d),c);return m=Object.assign({useFetchStreams:r},m),a._setSettings(m),a},"PUBLIC").setMultipleInstances(!0)),registerVersion$1(F$1,M$1,e),registerVersion$1(F$1,M$1,"esm2017")})();var define_process_env_default$1={};dotenv.config();const serviceAccount=JSON.parse(define_process_env_default$1.FIREBASE_CONFIG);admin.initializeApp({credential:admin.credential.cert(serviceAccount)});const db=getFirestore(),getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let r=0;for(let u=0;u<t.length;u++){let d=t.charCodeAt(u);d<128?e[r++]=d:d<2048?(e[r++]=d>>6|192,e[r++]=d&63|128):(d&64512)===55296&&u+1<t.length&&(t.charCodeAt(u+1)&64512)===56320?(d=65536+((d&1023)<<10)+(t.charCodeAt(++u)&1023),e[r++]=d>>18|240,e[r++]=d>>12&63|128,e[r++]=d>>6&63|128,e[r++]=d&63|128):(e[r++]=d>>12|224,e[r++]=d>>6&63|128,e[r++]=d&63|128)}return e},byteArrayToString=function(t){const e=[];let r=0,u=0;for(;r<t.length;){const d=t[r++];if(d<128)e[u++]=String.fromCharCode(d);else if(d>191&&d<224){const m=t[r++];e[u++]=String.fromCharCode((d&31)<<6|m&63)}else if(d>239&&d<365){const m=t[r++],c=t[r++],a=t[r++],o=((d&7)<<18|(m&63)<<12|(c&63)<<6|a&63)-65536;e[u++]=String.fromCharCode(55296+(o>>10)),e[u++]=String.fromCharCode(56320+(o&1023))}else{const m=t[r++],c=t[r++];e[u++]=String.fromCharCode((d&15)<<12|(m&63)<<6|c&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,u=[];for(let d=0;d<t.length;d+=3){const m=t[d],c=d+1<t.length,a=c?t[d+1]:0,o=d+2<t.length,s=o?t[d+2]:0,h=m>>2,v=(m&3)<<4|a>>4;let E=(a&15)<<2|s>>6,y=s&63;o||(y=64,c||(E=64)),u.push(r[h],r[v],r[E],r[y])}return u.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,u=[];for(let d=0;d<t.length;){const m=r[t.charAt(d++)],a=d<t.length?r[t.charAt(d)]:0;++d;const s=d<t.length?r[t.charAt(d)]:64;++d;const v=d<t.length?r[t.charAt(d)]:64;if(++d,m==null||a==null||s==null||v==null)throw new DecodeBase64StringError;const E=m<<2|a>>4;if(u.push(E),s!==64){const y=a<<4&240|s>>2;if(u.push(y),v!==64){const A=s<<6&192|v;u.push(A)}}}return u},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const t=define_process_env_default.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isNode(){var t;const e=(t=getDefaults())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let r=!0;const u="validate-browser-context-for-indexeddb-analytics-module",d=self.indexedDB.open(u);d.onsuccess=()=>{d.result.close(),r||self.indexedDB.deleteDatabase(u),t(!0)},d.onupgradeneeded=()=>{r=!1},d.onerror=()=>{var m;e(((m=d.error)===null||m===void 0?void 0:m.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,r,u){super(r),this.code=e,this.customData=u,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,r,u){this.service=e,this.serviceName=r,this.errors=u}create(e,...r){const u=r[0]||{},d=`${this.service}/${e}`,m=this.errors[e],c=m?replaceTemplate(m,u):"Error",a=`${this.serviceName}: ${c} (${d}).`;return new FirebaseError(d,a,u)}}function replaceTemplate(t,e){return t.replace(PATTERN,(r,u)=>{const d=e[u];return d!=null?String(d):`<${u}?>`})}const PATTERN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component{constructor(e,r,u){this.name=e,this.instanceFactory=r,this.type=u,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...r)=>{if(e<t.logLevel)return;const u=new Date().toISOString(),d=ConsoleMethod[e];if(d)console[d](`[${u}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(r=>t instanceof r);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((r,u)=>{const d=()=>{t.removeEventListener("success",m),t.removeEventListener("error",c)},m=()=>{r(wrap(t.result)),d()},c=()=>{u(t.error),d()};t.addEventListener("success",m),t.addEventListener("error",c)});return e.then(r=>{r instanceof IDBCursor&&cursorRequestMap.set(r,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((r,u)=>{const d=()=>{t.removeEventListener("complete",m),t.removeEventListener("error",c),t.removeEventListener("abort",c)},m=()=>{r(),d()},c=()=>{u(t.error||new DOMException("AbortError","AbortError")),d()};t.addEventListener("complete",m),t.addEventListener("error",c),t.addEventListener("abort",c)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const u=t.call(unwrap(this),e,...r);return transactionStoreNamesMap.set(u,e.sort?e.sort():[e]),wrap(u)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:r,upgrade:u,blocking:d,terminated:m}={}){const c=indexedDB.open(t,e),a=wrap(c);return u&&c.addEventListener("upgradeneeded",o=>{u(wrap(c.result),o.oldVersion,o.newVersion,wrap(c.transaction),o)}),r&&c.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{m&&o.addEventListener("close",()=>m()),d&&o.addEventListener("versionchange",s=>d(s.oldVersion,s.newVersion,s))}).catch(()=>{}),a}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const r=e.replace(/FromIndex$/,""),u=e!==r,d=writeMethods.includes(r);if(!(r in(u?IDBIndex:IDBObjectStore).prototype)||!(d||readMethods.includes(r)))return;const m=async function(c,...a){const o=this.transaction(c,d?"readwrite":"readonly");let s=o.store;return u&&(s=s.index(a.shift())),(await Promise.all([s[r](...a),d&&o.done]))[0]};return cachedMethods.set(e,m),m}replaceTraps(t=>({...t,get:(e,r,u)=>getMethod(e,r)||t.get(e,r,u),has:(e,r)=>!!getMethod(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(isVersionServiceProvider(r)){const u=r.getImmediate();return`${u.library}/${u.version}`}else return null}).filter(r=>r).join(" ")}}function isVersionServiceProvider(t){const e=t.getComponent();return e?.type==="VERSION"}const name$q="@firebase/app",version$1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/ai",name$1="@firebase/firestore-compat",name="firebase",version="11.10.0",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(r){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const r of _apps.values())_addComponent(r,t);for(const r of _serverApps.values())_addComponent(r,t);return!0}function _isFirebaseServerApp(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version;function registerVersion(t,e,r){var u;let d=(u=PLATFORM_LOG_STRING[t])!==null&&u!==void 0?u:t;r&&(d+=`-${r}`);const m=d.match(/\s|\//),c=e.match(/\s|\//);if(m||c){const a=[`Unable to register library "${d}" with version "${e}":`];m&&a.push(`library name "${d}" contains illegal characters (whitespace or "/")`),m&&c&&a.push("and"),c&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(a.join(" "));return}_registerComponent(new Component(`${d}-version`,()=>({library:d,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebase-heartbeat-database",DB_VERSION=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME,DB_VERSION,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(STORE_NAME)}catch(r){console.warn(r)}}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){try{const r=(await getDbPromise()).transaction(STORE_NAME),u=await r.objectStore(STORE_NAME).get(computeKey(t));return await r.done,u}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const r=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(r.message)}}}async function writeHeartbeatsToIndexedDB(t,e){try{const u=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await u.objectStore(STORE_NAME).put(e,computeKey(t)),await u.done}catch(r){if(r instanceof FirebaseError)logger.warn(r.message);else{const u=ERROR_FACTORY.create("idb-set",{originalErrorMessage:r?.message});logger.warn(u.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(r),this._heartbeatsCachePromise=this._storage.read().then(u=>(this._heartbeatsCache=u,u))}async triggerHeartbeat(){var e,r;try{const d=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),m=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===m||this._heartbeatsCache.heartbeats.some(c=>c.date===m))return;if(this._heartbeatsCache.heartbeats.push({date:m,agent:d}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const c=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(u){logger.warn(u)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=getUTCDateString(),{heartbeatsToSend:u,unsentEntries:d}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),m=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:u}));return this._heartbeatsCache.lastSentHeartbeatDate=r,d.length>0?(this._heartbeatsCache.heartbeats=d,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),m}catch(r){return logger.warn(r),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const r=[];let u=t.slice();for(const d of t){const m=r.find(c=>c.agent===d.agent);if(m){if(m.dates.push(d.date),countBytes(r)>e){m.dates.pop();break}}else if(r.push({agent:d.agent,dates:[d.date]}),countBytes(r)>e){r.pop();break}u=u.slice(1)}return{heartbeatsToSend:r,unsentEntries:u}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await readHeartbeatsFromIndexedDB(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const d=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:d.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const d=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:d.lastSentHeartbeatDate,heartbeats:[...d.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}function getEarliestHeartbeatIdx(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let u=1;u<t.length;u++)t[u].date<r&&(r=t[u].date,e=u);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1,t),registerVersion(name$q,version$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,P){function Z(){}Z.prototype=P.prototype,U.D=P.prototype,U.prototype=new Z,U.prototype.constructor=U,U.C=function(ie,ue,le){for(var ne=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)ne[ye-2]=arguments[ye];return P.prototype[ue].apply(ie,ne)}}function r(){this.blockSize=-1}function u(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(u,r),u.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function d(U,P,Z){Z||(Z=0);var ie=Array(16);if(typeof P=="string")for(var ue=0;16>ue;++ue)ie[ue]=P.charCodeAt(Z++)|P.charCodeAt(Z++)<<8|P.charCodeAt(Z++)<<16|P.charCodeAt(Z++)<<24;else for(ue=0;16>ue;++ue)ie[ue]=P[Z++]|P[Z++]<<8|P[Z++]<<16|P[Z++]<<24;P=U.g[0],Z=U.g[1],ue=U.g[2];var le=U.g[3],ne=P+(le^Z&(ue^le))+ie[0]+3614090360&4294967295;P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[1]+3905402710&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[2]+606105819&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[3]+3250441966&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(le^Z&(ue^le))+ie[4]+4118548399&4294967295,P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[5]+1200080426&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[6]+2821735955&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[7]+4249261313&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(le^Z&(ue^le))+ie[8]+1770035416&4294967295,P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[9]+2336552879&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[10]+4294925233&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[11]+2304563134&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(le^Z&(ue^le))+ie[12]+1804603682&4294967295,P=Z+(ne<<7&4294967295|ne>>>25),ne=le+(ue^P&(Z^ue))+ie[13]+4254626195&4294967295,le=P+(ne<<12&4294967295|ne>>>20),ne=ue+(Z^le&(P^Z))+ie[14]+2792965006&4294967295,ue=le+(ne<<17&4294967295|ne>>>15),ne=Z+(P^ue&(le^P))+ie[15]+1236535329&4294967295,Z=ue+(ne<<22&4294967295|ne>>>10),ne=P+(ue^le&(Z^ue))+ie[1]+4129170786&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[6]+3225465664&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[11]+643717713&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[0]+3921069994&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(ue^le&(Z^ue))+ie[5]+3593408605&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[10]+38016083&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[15]+3634488961&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[4]+3889429448&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(ue^le&(Z^ue))+ie[9]+568446438&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[14]+3275163606&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[3]+4107603335&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[8]+1163531501&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(ue^le&(Z^ue))+ie[13]+2850285829&4294967295,P=Z+(ne<<5&4294967295|ne>>>27),ne=le+(Z^ue&(P^Z))+ie[2]+4243563512&4294967295,le=P+(ne<<9&4294967295|ne>>>23),ne=ue+(P^Z&(le^P))+ie[7]+1735328473&4294967295,ue=le+(ne<<14&4294967295|ne>>>18),ne=Z+(le^P&(ue^le))+ie[12]+2368359562&4294967295,Z=ue+(ne<<20&4294967295|ne>>>12),ne=P+(Z^ue^le)+ie[5]+4294588738&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[8]+2272392833&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[11]+1839030562&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[14]+4259657740&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(Z^ue^le)+ie[1]+2763975236&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[4]+1272893353&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[7]+4139469664&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[10]+3200236656&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(Z^ue^le)+ie[13]+681279174&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[0]+3936430074&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[3]+3572445317&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[6]+76029189&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(Z^ue^le)+ie[9]+3654602809&4294967295,P=Z+(ne<<4&4294967295|ne>>>28),ne=le+(P^Z^ue)+ie[12]+3873151461&4294967295,le=P+(ne<<11&4294967295|ne>>>21),ne=ue+(le^P^Z)+ie[15]+530742520&4294967295,ue=le+(ne<<16&4294967295|ne>>>16),ne=Z+(ue^le^P)+ie[2]+3299628645&4294967295,Z=ue+(ne<<23&4294967295|ne>>>9),ne=P+(ue^(Z|~le))+ie[0]+4096336452&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[7]+1126891415&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[14]+2878612391&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[5]+4237533241&4294967295,Z=ue+(ne<<21&4294967295|ne>>>11),ne=P+(ue^(Z|~le))+ie[12]+1700485571&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[3]+2399980690&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[10]+4293915773&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[1]+2240044497&4294967295,Z=ue+(ne<<21&4294967295|ne>>>11),ne=P+(ue^(Z|~le))+ie[8]+1873313359&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[15]+4264355552&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[6]+2734768916&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[13]+1309151649&4294967295,Z=ue+(ne<<21&4294967295|ne>>>11),ne=P+(ue^(Z|~le))+ie[4]+4149444226&4294967295,P=Z+(ne<<6&4294967295|ne>>>26),ne=le+(Z^(P|~ue))+ie[11]+3174756917&4294967295,le=P+(ne<<10&4294967295|ne>>>22),ne=ue+(P^(le|~Z))+ie[2]+718787259&4294967295,ue=le+(ne<<15&4294967295|ne>>>17),ne=Z+(le^(ue|~P))+ie[9]+3951481745&4294967295,U.g[0]=U.g[0]+P&4294967295,U.g[1]=U.g[1]+(ue+(ne<<21&4294967295|ne>>>11))&4294967295,U.g[2]=U.g[2]+ue&4294967295,U.g[3]=U.g[3]+le&4294967295}u.prototype.u=function(U,P){P===void 0&&(P=U.length);for(var Z=P-this.blockSize,ie=this.B,ue=this.h,le=0;le<P;){if(ue==0)for(;le<=Z;)d(this,U,le),le+=this.blockSize;if(typeof U=="string"){for(;le<P;)if(ie[ue++]=U.charCodeAt(le++),ue==this.blockSize){d(this,ie),ue=0;break}}else for(;le<P;)if(ie[ue++]=U[le++],ue==this.blockSize){d(this,ie),ue=0;break}}this.h=ue,this.o+=P},u.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var P=1;P<U.length-8;++P)U[P]=0;var Z=8*this.o;for(P=U.length-8;P<U.length;++P)U[P]=Z&255,Z/=256;for(this.u(U),U=Array(16),P=Z=0;4>P;++P)for(var ie=0;32>ie;ie+=8)U[Z++]=this.g[P]>>>ie&255;return U};function m(U,P){var Z=a;return Object.prototype.hasOwnProperty.call(Z,U)?Z[U]:Z[U]=P(U)}function c(U,P){this.h=P;for(var Z=[],ie=!0,ue=U.length-1;0<=ue;ue--){var le=U[ue]|0;ie&&le==P||(Z[ue]=le,ie=!1)}this.g=Z}var a={};function o(U){return-128<=U&&128>U?m(U,function(P){return new c([P|0],0>P?-1:0)}):new c([U|0],0>U?-1:0)}function s(U){if(isNaN(U)||!isFinite(U))return v;if(0>U)return I(s(-U));for(var P=[],Z=1,ie=0;U>=Z;ie++)P[ie]=U/Z|0,Z*=4294967296;return new c(P,0)}function h(U,P){if(U.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(U.charAt(0)=="-")return I(h(U.substring(1),P));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var Z=s(Math.pow(P,8)),ie=v,ue=0;ue<U.length;ue+=8){var le=Math.min(8,U.length-ue),ne=parseInt(U.substring(ue,ue+le),P);8>le?(le=s(Math.pow(P,le)),ie=ie.j(le).add(s(ne))):(ie=ie.j(Z),ie=ie.add(s(ne)))}return ie}var v=o(0),E=o(1),y=o(16777216);t=c.prototype,t.m=function(){if(w(this))return-I(this).m();for(var U=0,P=1,Z=0;Z<this.g.length;Z++){var ie=this.i(Z);U+=(0<=ie?ie:4294967296+ie)*P,P*=4294967296}return U},t.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(A(this))return"0";if(w(this))return"-"+I(this).toString(U);for(var P=s(Math.pow(U,6)),Z=this,ie="";;){var ue=K(Z,P).g;Z=_(Z,ue.j(P));var le=((0<Z.g.length?Z.g[0]:Z.h)>>>0).toString(U);if(Z=ue,A(Z))return le+ie;for(;6>le.length;)le="0"+le;ie=le+ie}},t.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function A(U){if(U.h!=0)return!1;for(var P=0;P<U.g.length;P++)if(U.g[P]!=0)return!1;return!0}function w(U){return U.h==-1}t.l=function(U){return U=_(this,U),w(U)?-1:A(U)?0:1};function I(U){for(var P=U.g.length,Z=[],ie=0;ie<P;ie++)Z[ie]=~U.g[ie];return new c(Z,~U.h).add(E)}t.abs=function(){return w(this)?I(this):this},t.add=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0,ue=0;ue<=P;ue++){var le=ie+(this.i(ue)&65535)+(U.i(ue)&65535),ne=(le>>>16)+(this.i(ue)>>>16)+(U.i(ue)>>>16);ie=ne>>>16,le&=65535,ne&=65535,Z[ue]=ne<<16|le}return new c(Z,Z[Z.length-1]&-2147483648?-1:0)};function _(U,P){return U.add(I(P))}t.j=function(U){if(A(this)||A(U))return v;if(w(this))return w(U)?I(this).j(I(U)):I(I(this).j(U));if(w(U))return I(this.j(I(U)));if(0>this.l(y)&&0>U.l(y))return s(this.m()*U.m());for(var P=this.g.length+U.g.length,Z=[],ie=0;ie<2*P;ie++)Z[ie]=0;for(ie=0;ie<this.g.length;ie++)for(var ue=0;ue<U.g.length;ue++){var le=this.i(ie)>>>16,ne=this.i(ie)&65535,ye=U.i(ue)>>>16,fe=U.i(ue)&65535;Z[2*ie+2*ue]+=ne*fe,S(Z,2*ie+2*ue),Z[2*ie+2*ue+1]+=le*fe,S(Z,2*ie+2*ue+1),Z[2*ie+2*ue+1]+=ne*ye,S(Z,2*ie+2*ue+1),Z[2*ie+2*ue+2]+=le*ye,S(Z,2*ie+2*ue+2)}for(ie=0;ie<P;ie++)Z[ie]=Z[2*ie+1]<<16|Z[2*ie];for(ie=P;ie<2*P;ie++)Z[ie]=0;return new c(Z,0)};function S(U,P){for(;(U[P]&65535)!=U[P];)U[P+1]+=U[P]>>>16,U[P]&=65535,P++}function j(U,P){this.g=U,this.h=P}function K(U,P){if(A(P))throw Error("division by zero");if(A(U))return new j(v,v);if(w(U))return P=K(I(U),P),new j(I(P.g),I(P.h));if(w(P))return P=K(U,I(P)),new j(I(P.g),P.h);if(30<U.g.length){if(w(U)||w(P))throw Error("slowDivide_ only works with positive integers.");for(var Z=E,ie=P;0>=ie.l(U);)Z=J(Z),ie=J(ie);var ue=H(Z,1),le=H(ie,1);for(ie=H(ie,2),Z=H(Z,2);!A(ie);){var ne=le.add(ie);0>=ne.l(U)&&(ue=ue.add(Z),le=ne),ie=H(ie,1),Z=H(Z,1)}return P=_(U,ue.j(P)),new j(ue,P)}for(ue=v;0<=U.l(P);){for(Z=Math.max(1,Math.floor(U.m()/P.m())),ie=Math.ceil(Math.log(Z)/Math.LN2),ie=48>=ie?1:Math.pow(2,ie-48),le=s(Z),ne=le.j(P);w(ne)||0<ne.l(U);)Z-=ie,le=s(Z),ne=le.j(P);A(le)&&(le=E),ue=ue.add(le),U=_(U,ne)}return new j(ue,U)}t.A=function(U){return K(this,U).h},t.and=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0;ie<P;ie++)Z[ie]=this.i(ie)&U.i(ie);return new c(Z,this.h&U.h)},t.or=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0;ie<P;ie++)Z[ie]=this.i(ie)|U.i(ie);return new c(Z,this.h|U.h)},t.xor=function(U){for(var P=Math.max(this.g.length,U.g.length),Z=[],ie=0;ie<P;ie++)Z[ie]=this.i(ie)^U.i(ie);return new c(Z,this.h^U.h)};function J(U){for(var P=U.g.length+1,Z=[],ie=0;ie<P;ie++)Z[ie]=U.i(ie)<<1|U.i(ie-1)>>>31;return new c(Z,U.h)}function H(U,P){var Z=P>>5;P%=32;for(var ie=U.g.length-Z,ue=[],le=0;le<ie;le++)ue[le]=0<P?U.i(le+Z)>>>P|U.i(le+Z+1)<<32-P:U.i(le+Z);return new c(ue,U.h)}u.prototype.digest=u.prototype.v,u.prototype.reset=u.prototype.s,u.prototype.update=u.prototype.u,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=s,c.fromString=h,Integer=c}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event,getStatEventTarget,createWebChannelTransport;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(se,me,Oe){return se==Array.prototype||se==Object.prototype||(se[me]=Oe.value),se};function r(se){se=[typeof globalThis=="object"&&globalThis,se,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var me=0;me<se.length;++me){var Oe=se[me];if(Oe&&Oe.Math==Math)return Oe}throw Error("Cannot find global object")}var u=r(this);function d(se,me){if(me)e:{var Oe=u;se=se.split(".");for(var Me=0;Me<se.length-1;Me++){var Xe=se[Me];if(!(Xe in Oe))break e;Oe=Oe[Xe]}se=se[se.length-1],Me=Oe[se],me=me(Me),me!=Me&&me!=null&&e(Oe,se,{configurable:!0,writable:!0,value:me})}}function m(se,me){se instanceof String&&(se+="");var Oe=0,Me=!1,Xe={next:function(){if(!Me&&Oe<se.length){var pt=Oe++;return{value:me(pt,se[pt]),done:!1}}return Me=!0,{done:!0,value:void 0}}};return Xe[Symbol.iterator]=function(){return Xe},Xe}d("Array.prototype.values",function(se){return se||function(){return m(this,function(me,Oe){return Oe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},a=this||self;function o(se){var me=typeof se;return me=me!="object"?me:se?Array.isArray(se)?"array":me:"null",me=="array"||me=="object"&&typeof se.length=="number"}function s(se){var me=typeof se;return me=="object"&&se!=null||me=="function"}function h(se,me,Oe){return se.call.apply(se.bind,arguments)}function v(se,me,Oe){if(!se)throw Error();if(2<arguments.length){var Me=Array.prototype.slice.call(arguments,2);return function(){var Xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Xe,Me),se.apply(me,Xe)}}return function(){return se.apply(me,arguments)}}function E(se,me,Oe){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:v,E.apply(null,arguments)}function y(se,me){var Oe=Array.prototype.slice.call(arguments,1);return function(){var Me=Oe.slice();return Me.push.apply(Me,arguments),se.apply(this,Me)}}function A(se,me){function Oe(){}Oe.prototype=me.prototype,se.aa=me.prototype,se.prototype=new Oe,se.prototype.constructor=se,se.Qb=function(Me,Xe,pt){for(var ar=Array(arguments.length-2),pn=2;pn<arguments.length;pn++)ar[pn-2]=arguments[pn];return me.prototype[Xe].apply(Me,ar)}}function w(se){const me=se.length;if(0<me){const Oe=Array(me);for(let Me=0;Me<me;Me++)Oe[Me]=se[Me];return Oe}return[]}function I(se,me){for(let Oe=1;Oe<arguments.length;Oe++){const Me=arguments[Oe];if(o(Me)){const Xe=se.length||0,pt=Me.length||0;se.length=Xe+pt;for(let ar=0;ar<pt;ar++)se[Xe+ar]=Me[ar]}else se.push(Me)}}class _{constructor(me,Oe){this.i=me,this.j=Oe,this.h=0,this.g=null}get(){let me;return 0<this.h?(this.h--,me=this.g,this.g=me.next,me.next=null):me=this.i(),me}}function S(se){return/^[\s\xa0]*$/.test(se)}function j(){var se=a.navigator;return se&&(se=se.userAgent)?se:""}function K(se){return K[" "](se),se}K[" "]=function(){};var J=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function H(se,me,Oe){for(const Me in se)me.call(Oe,se[Me],Me,se)}function U(se,me){for(const Oe in se)me.call(void 0,se[Oe],Oe,se)}function P(se){const me={};for(const Oe in se)me[Oe]=se[Oe];return me}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(se,me){let Oe,Me;for(let Xe=1;Xe<arguments.length;Xe++){Me=arguments[Xe];for(Oe in Me)se[Oe]=Me[Oe];for(let pt=0;pt<Z.length;pt++)Oe=Z[pt],Object.prototype.hasOwnProperty.call(Me,Oe)&&(se[Oe]=Me[Oe])}}function ue(se){var me=1;se=se.split(":");const Oe=[];for(;0<me&&se.length;)Oe.push(se.shift()),me--;return se.length&&Oe.push(se.join(":")),Oe}function le(se){a.setTimeout(()=>{throw se},0)}function ne(){var se=be;let me=null;return se.g&&(me=se.g,se.g=se.g.next,se.g||(se.h=null),me.next=null),me}class ye{constructor(){this.h=this.g=null}add(me,Oe){const Me=fe.get();Me.set(me,Oe),this.h?this.h.next=Me:this.g=Me,this.h=Me}}var fe=new _(()=>new Te,se=>se.reset());class Te{constructor(){this.next=this.g=this.h=null}set(me,Oe){this.h=me,this.g=Oe,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Se=!1,be=new ye,we=()=>{const se=a.Promise.resolve(void 0);Ae=()=>{se.then(Ce)}};var Ce=()=>{for(var se;se=ne();){try{se.h.call(se.g)}catch(Oe){le(Oe)}var me=fe;me.j(se),100>me.h&&(me.h++,se.next=me.g,me.g=se)}Se=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(se,me){this.type=se,this.g=this.target=me,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var se=!1,me=Object.defineProperty({},"passive",{get:function(){se=!0}});try{const Oe=()=>{};a.addEventListener("test",Oe,me),a.removeEventListener("test",Oe,me)}catch{}return se}();function Ge(se,me){if(Fe.call(this,se?se.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,se){var Oe=this.type=se.type,Me=se.changedTouches&&se.changedTouches.length?se.changedTouches[0]:null;if(this.target=se.target||se.srcElement,this.g=me,me=se.relatedTarget){if(J){e:{try{K(me.nodeName);var Xe=!0;break e}catch{}Xe=!1}Xe||(me=null)}}else Oe=="mouseover"?me=se.fromElement:Oe=="mouseout"&&(me=se.toElement);this.relatedTarget=me,Me?(this.clientX=Me.clientX!==void 0?Me.clientX:Me.pageX,this.clientY=Me.clientY!==void 0?Me.clientY:Me.pageY,this.screenX=Me.screenX||0,this.screenY=Me.screenY||0):(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0),this.button=se.button,this.key=se.key||"",this.ctrlKey=se.ctrlKey,this.altKey=se.altKey,this.shiftKey=se.shiftKey,this.metaKey=se.metaKey,this.pointerId=se.pointerId||0,this.pointerType=typeof se.pointerType=="string"?se.pointerType:Le[se.pointerType]||"",this.state=se.state,this.i=se,se.defaultPrevented&&Ge.aa.h.call(this)}}A(Ge,Fe);var Le={2:"touch",3:"pen",4:"mouse"};Ge.prototype.h=function(){Ge.aa.h.call(this);var se=this.i;se.preventDefault?se.preventDefault():se.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),$e=0;function he(se,me,Oe,Me,Xe){this.listener=se,this.proxy=null,this.src=me,this.type=Oe,this.capture=!!Me,this.ha=Xe,this.key=++$e,this.da=this.fa=!1}function p(se){se.da=!0,se.listener=null,se.proxy=null,se.src=null,se.ha=null}function V(se){this.src=se,this.g={},this.h=0}V.prototype.add=function(se,me,Oe,Me,Xe){var pt=se.toString();se=this.g[pt],se||(se=this.g[pt]=[],this.h++);var ar=ce(se,me,Me,Xe);return-1<ar?(me=se[ar],Oe||(me.fa=!1)):(me=new he(me,this.src,pt,!!Me,Xe),me.fa=Oe,se.push(me)),me};function R(se,me){var Oe=me.type;if(Oe in se.g){var Me=se.g[Oe],Xe=Array.prototype.indexOf.call(Me,me,void 0),pt;(pt=0<=Xe)&&Array.prototype.splice.call(Me,Xe,1),pt&&(p(me),se.g[Oe].length==0&&(delete se.g[Oe],se.h--))}}function ce(se,me,Oe,Me){for(var Xe=0;Xe<se.length;++Xe){var pt=se[Xe];if(!pt.da&&pt.listener==me&&pt.capture==!!Oe&&pt.ha==Me)return Xe}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),ke={};function qe(se,me,Oe,Me,Xe){if(Array.isArray(me)){for(var pt=0;pt<me.length;pt++)qe(se,me[pt],Oe,Me,Xe);return null}return Oe=nt(Oe),se&&se[Be]?se.K(me,Oe,s(Me)?!!Me.capture:!1,Xe):g(se,me,Oe,!1,Me,Xe)}function g(se,me,Oe,Me,Xe,pt){if(!me)throw Error("Invalid event type");var ar=s(Xe)?!!Xe.capture:!!Xe,pn=_e(se);if(pn||(se[Re]=pn=new V(se)),Oe=pn.add(me,Oe,Me,ar,pt),Oe.proxy)return Oe;if(Me=ee(),Oe.proxy=Me,Me.src=se,Me.listener=Oe,se.addEventListener)Ve||(Xe=ar),Xe===void 0&&(Xe=!1),se.addEventListener(me.toString(),Me,Xe);else if(se.attachEvent)se.attachEvent(X(me.toString()),Me);else if(se.addListener&&se.removeListener)se.addListener(Me);else throw Error("addEventListener and attachEvent are unavailable.");return Oe}function ee(){function se(Oe){return me.call(se.src,se.listener,Oe)}const me=oe;return se}function ae(se,me,Oe,Me,Xe){if(Array.isArray(me))for(var pt=0;pt<me.length;pt++)ae(se,me[pt],Oe,Me,Xe);else Me=s(Me)?!!Me.capture:!!Me,Oe=nt(Oe),se&&se[Be]?(se=se.i,me=String(me).toString(),me in se.g&&(pt=se.g[me],Oe=ce(pt,Oe,Me,Xe),-1<Oe&&(p(pt[Oe]),Array.prototype.splice.call(pt,Oe,1),pt.length==0&&(delete se.g[me],se.h--)))):se&&(se=_e(se))&&(me=se.g[me.toString()],se=-1,me&&(se=ce(me,Oe,Me,Xe)),(Oe=-1<se?me[se]:null)&&l(Oe))}function l(se){if(typeof se!="number"&&se&&!se.da){var me=se.src;if(me&&me[Be])R(me.i,se);else{var Oe=se.type,Me=se.proxy;me.removeEventListener?me.removeEventListener(Oe,Me,se.capture):me.detachEvent?me.detachEvent(X(Oe),Me):me.addListener&&me.removeListener&&me.removeListener(Me),(Oe=_e(me))?(R(Oe,se),Oe.h==0&&(Oe.src=null,me[Re]=null)):p(se)}}}function X(se){return se in ke?ke[se]:ke[se]="on"+se}function oe(se,me){if(se.da)se=!0;else{me=new Ge(me,this);var Oe=se.listener,Me=se.ha||se.src;se.fa&&l(se),se=Oe.call(Me,me)}return se}function _e(se){return se=se[Re],se instanceof V?se:null}var He="__closure_events_fn_"+(1e9*Math.random()>>>0);function nt(se){return typeof se=="function"?se:(se[He]||(se[He]=function(me){return se.handleEvent(me)}),se[He])}function It(){je.call(this),this.i=new V(this),this.M=this,this.F=null}A(It,je),It.prototype[Be]=!0,It.prototype.removeEventListener=function(se,me,Oe,Me){ae(this,se,me,Oe,Me)};function wt(se,me){var Oe,Me=se.F;if(Me)for(Oe=[];Me;Me=Me.F)Oe.push(Me);if(se=se.M,Me=me.type||me,typeof me=="string")me=new Fe(me,se);else if(me instanceof Fe)me.target=me.target||se;else{var Xe=me;me=new Fe(Me,se),ie(me,Xe)}if(Xe=!0,Oe)for(var pt=Oe.length-1;0<=pt;pt--){var ar=me.g=Oe[pt];Xe=ir(ar,Me,!0,me)&&Xe}if(ar=me.g=se,Xe=ir(ar,Me,!0,me)&&Xe,Xe=ir(ar,Me,!1,me)&&Xe,Oe)for(pt=0;pt<Oe.length;pt++)ar=me.g=Oe[pt],Xe=ir(ar,Me,!1,me)&&Xe}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var se=this.i,me;for(me in se.g){for(var Oe=se.g[me],Me=0;Me<Oe.length;Me++)p(Oe[Me]);delete se.g[me],se.h--}}this.F=null},It.prototype.K=function(se,me,Oe,Me){return this.i.add(String(se),me,!1,Oe,Me)},It.prototype.L=function(se,me,Oe,Me){return this.i.add(String(se),me,!0,Oe,Me)};function ir(se,me,Oe,Me){if(me=se.i.g[String(me)],!me)return!0;me=me.concat();for(var Xe=!0,pt=0;pt<me.length;++pt){var ar=me[pt];if(ar&&!ar.da&&ar.capture==Oe){var pn=ar.listener,Kr=ar.ha||ar.src;ar.fa&&R(se.i,ar),Xe=pn.call(Kr,Me)!==!1&&Xe}}return Xe&&!Me.defaultPrevented}function _r(se,me,Oe){if(typeof se=="function")Oe&&(se=E(se,Oe));else if(se&&typeof se.handleEvent=="function")se=E(se.handleEvent,se);else throw Error("Invalid listener argument");return 2147483647<Number(me)?-1:a.setTimeout(se,me||0)}function Rr(se){se.g=_r(()=>{se.g=null,se.i&&(se.i=!1,Rr(se))},se.l);const me=se.h;se.h=null,se.m.apply(null,me)}class Hr extends je{constructor(me,Oe){super(),this.m=me,this.l=Oe,this.h=null,this.i=!1,this.g=null}j(me){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(se){je.call(this),this.h=se,this.g={}}A(Vr,je);var Tr=[];function $t(se){H(se.g,function(me,Oe){this.g.hasOwnProperty(Oe)&&l(me)},se),se.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),$t(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qt=a.JSON.stringify,Kt=a.JSON.parse,nr=class{stringify(se){return a.JSON.stringify(se,void 0)}parse(se){return a.JSON.parse(se,void 0)}};function dr(){}dr.prototype.h=null;function Er(se){return se.h||(se.h=se.i())}function Mr(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xr(){Fe.call(this,"d")}A(xr,Fe);function kn(){Fe.call(this,"c")}A(kn,Fe);var gn={},bn=null;function Tn(){return bn=bn||new It}gn.La="serverreachability";function yn(se){Fe.call(this,gn.La,se)}A(yn,Fe);function Xr(se){const me=Tn();wt(me,new yn(me))}gn.STAT_EVENT="statevent";function Rn(se,me){Fe.call(this,gn.STAT_EVENT,se),this.stat=me}A(Rn,Fe);function yr(se){const me=Tn();wt(me,new Rn(me,se))}gn.Ma="timingevent";function Wr(se,me){Fe.call(this,gn.Ma,se),this.size=me}A(Wr,Fe);function Yr(se,me){if(typeof se!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){se()},me)}function vn(){this.g=!0}vn.prototype.xa=function(){this.g=!1};function Ur(se,me,Oe,Me,Xe,pt){se.info(function(){if(se.g)if(pt)for(var ar="",pn=pt.split("&"),Kr=0;Kr<pn.length;Kr++){var Jr=pn[Kr].split("=");if(1<Jr.length){var Nn=Jr[0];Jr=Jr[1];var ci=Nn.split("_");ar=2<=ci.length&&ci[1]=="type"?ar+(Nn+"="+Jr+"&"):ar+(Nn+"=redacted&")}}else ar=null;else ar=pt;return"XMLHTTP REQ ("+Me+") [attempt "+Xe+"]: "+me+`
`+Oe+`
`+ar})}function Zr(se,me,Oe,Me,Xe,pt,ar){se.info(function(){return"XMLHTTP RESP ("+Me+") [ attempt "+Xe+"]: "+me+`
`+Oe+`
`+pt+" "+ar})}function Fr(se,me,Oe,Me){se.info(function(){return"XMLHTTP TEXT ("+me+"): "+et(se,Oe)+(Me?" "+Me:"")})}function tt(se,me){se.info(function(){return"TIMEOUT: "+me})}vn.prototype.info=function(){};function et(se,me){if(!se.g)return me;if(!me)return null;try{var Oe=JSON.parse(me);if(Oe){for(se=0;se<Oe.length;se++)if(Array.isArray(Oe[se])){var Me=Oe[se];if(!(2>Me.length)){var Xe=Me[1];if(Array.isArray(Xe)&&!(1>Xe.length)){var pt=Xe[0];if(pt!="noop"&&pt!="stop"&&pt!="close")for(var ar=1;ar<Xe.length;ar++)Xe[ar]=""}}}}return qt(Oe)}catch{return me}}var dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ct;function pr(){}A(pr,dr),pr.prototype.g=function(){return new XMLHttpRequest},pr.prototype.i=function(){return{}},Ct=new pr;function Sr(se,me,Oe,Me){this.j=se,this.i=me,this.l=Oe,this.R=Me||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var Ln={},In={};function Un(se,me,Oe){se.L=1,se.v=Dn(dn(me)),se.m=Oe,se.P=!0,Pr(se,null)}function Pr(se,me){se.F=Date.now(),Dr(se),se.A=dn(se.v);var Oe=se.A,Me=se.R;Array.isArray(Me)||(Me=[String(Me)]),Li(Oe.i,"t",Me),se.C=0,Oe=se.j.J,se.h=new un,se.g=Ws(se.j,Oe?me:null,!se.m),0<se.O&&(se.M=new Hr(E(se.Y,se,se.g),se.O)),me=se.U,Oe=se.g,Me=se.ca;var Xe="readystatechange";Array.isArray(Xe)||(Xe&&(Tr[0]=Xe.toString()),Xe=Tr);for(var pt=0;pt<Xe.length;pt++){var ar=qe(Oe,Xe[pt],Me||me.handleEvent,!1,me.h||me);if(!ar)break;me.g[ar.key]=ar}me=se.H?P(se.H):{},se.m?(se.u||(se.u="POST"),me["Content-Type"]="application/x-www-form-urlencoded",se.g.ea(se.A,se.u,se.m,me)):(se.u="GET",se.g.ea(se.A,se.u,null,me)),Xr(),Ur(se.i,se.u,se.A,se.l,se.R,se.m)}Sr.prototype.ca=function(se){se=se.target;const me=this.M;me&&T(se)==3?me.j():this.Y(se)},Sr.prototype.Y=function(se){try{if(se==this.g)e:{const ci=T(this.g);var me=this.g.Ba();const Ti=this.g.Z();if(!(3>ci)&&(ci!=3||this.g&&(this.h.h||this.g.oa()||Ne(this.g)))){this.J||ci!=4||me==7||(me==8||0>=Ti?Xr(3):Xr(2)),ai(this);var Oe=this.g.Z();this.X=Oe;t:if(Ir(this)){var Me=Ne(this.g);se="";var Xe=Me.length,pt=T(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),xn(this);var ar="";break t}this.h.i=new a.TextDecoder}for(me=0;me<Xe;me++)this.h.h=!0,se+=this.h.i.decode(Me[me],{stream:!(pt&&me==Xe-1)});Me.length=0,this.h.g+=se,this.C=0,ar=this.h.g}else ar=this.g.oa();if(this.o=Oe==200,Zr(this.i,this.u,this.A,this.l,this.R,ci,Oe),this.o){if(this.T&&!this.K){t:{if(this.g){var pn,Kr=this.g;if((pn=Kr.g?Kr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(pn)){var Jr=pn;break t}}Jr=null}if(Oe=Jr)Fr(this.i,this.l,Oe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wn(this,Oe);else{this.o=!1,this.s=3,yr(12),mn(this),xn(this);break e}}if(this.P){Oe=!0;let Ni;for(;!this.J&&this.C<ar.length;)if(Ni=si(this,ar),Ni==In){ci==4&&(this.s=4,yr(14),Oe=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ni==Ln){this.s=4,yr(15),Fr(this.i,this.l,ar,"[Invalid Chunk]"),Oe=!1;break}else Fr(this.i,this.l,Ni,null),Wn(this,Ni);if(Ir(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ci!=4||ar.length!=0||this.h.h||(this.s=1,yr(16),Oe=!1),this.o=this.o&&Oe,!Oe)Fr(this.i,this.l,ar,"[Invalid Chunked Response]"),mn(this),xn(this);else if(0<ar.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+ar.length),fs(Nn),Nn.M=!0,yr(11))}}else Fr(this.i,this.l,ar,null),Wn(this,ar);ci==4&&mn(this),this.o&&!this.J&&(ci==4?Ns(this.j,this):(this.o=!1,Dr(this)))}else ur(this.g),Oe==400&&0<ar.indexOf("Unknown SID")?(this.s=3,yr(12)):(this.s=0,yr(13)),mn(this),xn(this)}}}catch{}finally{}};function Ir(se){return se.g?se.u=="GET"&&se.L!=2&&se.j.Ca:!1}function si(se,me){var Oe=se.C,Me=me.indexOf(`
`,Oe);return Me==-1?In:(Oe=Number(me.substring(Oe,Me)),isNaN(Oe)?Ln:(Me+=1,Me+Oe>me.length?In:(me=me.slice(Me,Me+Oe),se.C=Me+Oe,me)))}Sr.prototype.cancel=function(){this.J=!0,mn(this)};function Dr(se){se.S=Date.now()+se.I,Bn(se,se.I)}function Bn(se,me){if(se.B!=null)throw Error("WatchDog timer not null");se.B=Yr(E(se.ba,se),me)}function ai(se){se.B&&(a.clearTimeout(se.B),se.B=null)}Sr.prototype.ba=function(){this.B=null;const se=Date.now();0<=se-this.S?(tt(this.i,this.A),this.L!=2&&(Xr(),yr(17)),mn(this),this.s=2,xn(this)):Bn(this,this.S-se)};function xn(se){se.j.G==0||se.J||Ns(se.j,se)}function mn(se){ai(se);var me=se.M;me&&typeof me.ma=="function"&&me.ma(),se.M=null,$t(se.U),se.g&&(me=se.g,se.g=null,me.abort(),me.ma())}function Wn(se,me){try{var Oe=se.j;if(Oe.G!=0&&(Oe.g==se||ze(Oe.h,se))){if(!se.K&&ze(Oe.h,se)&&Oe.G==3){try{var Me=Oe.Da.g.parse(me)}catch{Me=null}if(Array.isArray(Me)&&Me.length==3){var Xe=Me;if(Xe[0]==0){e:if(!Oe.u){if(Oe.g)if(Oe.g.F+3e3<se.F)os(Oe),uo(Oe);else break e;ps(Oe),yr(18)}}else Oe.za=Xe[1],0<Oe.za-Oe.T&&37500>Xe[2]&&Oe.F&&Oe.v==0&&!Oe.C&&(Oe.C=Yr(E(Oe.Za,Oe),6e3));if(1>=We(Oe.h)&&Oe.ca){try{Oe.ca()}catch{}Oe.ca=void 0}}else Gi(Oe,11)}else if((se.K||Oe.g==se)&&os(Oe),!S(me))for(Xe=Oe.Da.g.parse(me),me=0;me<Xe.length;me++){let Jr=Xe[me];if(Oe.T=Jr[0],Jr=Jr[1],Oe.G==2)if(Jr[0]=="c"){Oe.K=Jr[1],Oe.ia=Jr[2];const Nn=Jr[3];Nn!=null&&(Oe.la=Nn,Oe.j.info("VER="+Oe.la));const ci=Jr[4];ci!=null&&(Oe.Aa=ci,Oe.j.info("SVER="+Oe.Aa));const Ti=Jr[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(Me=1.5*Ti,Oe.L=Me,Oe.j.info("backChannelRequestTimeoutMs_="+Me)),Me=Oe;const Ni=se.g;if(Ni){const es=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(es){var pt=Me.h;pt.g||es.indexOf("spdy")==-1&&es.indexOf("quic")==-1&&es.indexOf("h2")==-1||(pt.j=pt.l,pt.g=new Set,pt.h&&(yt(pt,pt.h),pt.h=null))}if(Me.D){const ma=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;ma&&(Me.ya=ma,vr(Me.I,Me.D,ma))}}Oe.G=3,Oe.l&&Oe.l.ua(),Oe.ba&&(Oe.R=Date.now()-se.F,Oe.j.info("Handshake RTT: "+Oe.R+"ms")),Me=Oe;var ar=se;if(Me.qa=Ks(Me,Me.J?Me.ia:null,Me.W),ar.K){tr(Me.h,ar);var pn=ar,Kr=Me.L;Kr&&(pn.I=Kr),pn.B&&(ai(pn),Dr(pn)),Me.g=ar}else ds(Me);0<Oe.i.length&&eo(Oe)}else Jr[0]!="stop"&&Jr[0]!="close"||Gi(Oe,7);else Oe.G==3&&(Jr[0]=="stop"||Jr[0]=="close"?Jr[0]=="stop"?Gi(Oe,7):Fi(Oe):Jr[0]!="noop"&&Oe.l&&Oe.l.ta(Jr),Oe.v=0)}}Xr(4)}catch{}}var Yn=class{constructor(se,me){this.g=se,this.map=me}};function Ai(se){this.l=se||10,a.PerformanceNavigationTiming?(se=a.performance.getEntriesByType("navigation"),se=0<se.length&&(se[0].nextHopProtocol=="hq"||se[0].nextHopProtocol=="h2")):se=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=se?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ue(se){return se.h?!0:se.g?se.g.size>=se.j:!1}function We(se){return se.h?1:se.g?se.g.size:0}function ze(se,me){return se.h?se.h==me:se.g?se.g.has(me):!1}function yt(se,me){se.g?se.g.add(me):se.h=me}function tr(se,me){se.h&&se.h==me?se.h=null:se.g&&se.g.has(me)&&se.g.delete(me)}Ai.prototype.cancel=function(){if(this.i=er(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const se of this.g.values())se.cancel();this.g.clear()}};function er(se){if(se.h!=null)return se.i.concat(se.h.D);if(se.g!=null&&se.g.size!==0){let me=se.i;for(const Oe of se.g.values())me=me.concat(Oe.D);return me}return w(se.i)}function fr(se){if(se.V&&typeof se.V=="function")return se.V();if(typeof Map<"u"&&se instanceof Map||typeof Set<"u"&&se instanceof Set)return Array.from(se.values());if(typeof se=="string")return se.split("");if(o(se)){for(var me=[],Oe=se.length,Me=0;Me<Oe;Me++)me.push(se[Me]);return me}me=[],Oe=0;for(Me in se)me[Oe++]=se[Me];return me}function sr(se){if(se.na&&typeof se.na=="function")return se.na();if(!se.V||typeof se.V!="function"){if(typeof Map<"u"&&se instanceof Map)return Array.from(se.keys());if(!(typeof Set<"u"&&se instanceof Set)){if(o(se)||typeof se=="string"){var me=[];se=se.length;for(var Oe=0;Oe<se;Oe++)me.push(Oe);return me}me=[],Oe=0;for(const Me in se)me[Oe++]=Me;return me}}}function Qr(se,me){if(se.forEach&&typeof se.forEach=="function")se.forEach(me,void 0);else if(o(se)||typeof se=="string")Array.prototype.forEach.call(se,me,void 0);else for(var Oe=sr(se),Me=fr(se),Xe=Me.length,pt=0;pt<Xe;pt++)me.call(void 0,Me[pt],Oe&&Oe[pt],se)}var Pn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(se,me){if(se){se=se.split("&");for(var Oe=0;Oe<se.length;Oe++){var Me=se[Oe].indexOf("="),Xe=null;if(0<=Me){var pt=se[Oe].substring(0,Me);Xe=se[Oe].substring(Me+1)}else pt=se[Oe];me(pt,Xe?decodeURIComponent(Xe.replace(/\+/g," ")):"")}}}function Sn(se){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,se instanceof Sn){this.h=se.h,$n(this,se.j),this.o=se.o,this.g=se.g,On(this,se.s),this.l=se.l;var me=se.i,Oe=new yi;Oe.i=me.i,me.g&&(Oe.g=new Map(me.g),Oe.h=me.h),qn(this,Oe),this.m=se.m}else se&&(me=String(se).match(Pn))?(this.h=!1,$n(this,me[1]||"",!0),this.o=Lr(me[2]||""),this.g=Lr(me[3]||"",!0),On(this,me[4]),this.l=Lr(me[5]||"",!0),qn(this,me[6]||"",!0),this.m=Lr(me[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}Sn.prototype.toString=function(){var se=[],me=this.j;me&&se.push(mi(me,zi,!0),":");var Oe=this.g;return(Oe||me=="file")&&(se.push("//"),(me=this.o)&&se.push(mi(me,zi,!0),"@"),se.push(encodeURIComponent(String(Oe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Oe=this.s,Oe!=null&&se.push(":",String(Oe))),(Oe=this.l)&&(this.g&&Oe.charAt(0)!="/"&&se.push("/"),se.push(mi(Oe,Oe.charAt(0)=="/"?Ao:$i,!0))),(Oe=this.i.toString())&&se.push("?",Oe),(Oe=this.m)&&se.push("#",mi(Oe,ji)),se.join("")};function dn(se){return new Sn(se)}function $n(se,me,Oe){se.j=Oe?Lr(me,!0):me,se.j&&(se.j=se.j.replace(/:$/,""))}function On(se,me){if(me){if(me=Number(me),isNaN(me)||0>me)throw Error("Bad port number "+me);se.s=me}else se.s=null}function qn(se,me,Oe){me instanceof yi?(se.i=me,vi(se.i,se.h)):(Oe||(me=mi(me,ki)),se.i=new yi(me,se.h))}function vr(se,me,Oe){se.i.set(me,Oe)}function Dn(se){return vr(se,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),se}function Lr(se,me){return se?me?decodeURI(se.replace(/%25/g,"%2525")):decodeURIComponent(se):""}function mi(se,me,Oe){return typeof se=="string"?(se=encodeURI(se).replace(me,bi),Oe&&(se=se.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se):null}function bi(se){return se=se.charCodeAt(0),"%"+(se>>4&15).toString(16)+(se&15).toString(16)}var zi=/[#\/\?@]/g,$i=/[#\?:]/g,Ao=/[#\?]/g,ki=/[#\?@]/g,ji=/#/g;function yi(se,me){this.h=this.g=null,this.i=se||null,this.j=!!me}function Cn(se){se.g||(se.g=new Map,se.h=0,se.i&&Qn(se.i,function(me,Oe){se.add(decodeURIComponent(me.replace(/\+/g," ")),Oe)}))}t=yi.prototype,t.add=function(se,me){Cn(this),this.i=null,se=Xn(this,se);var Oe=this.g.get(se);return Oe||this.g.set(se,Oe=[]),Oe.push(me),this.h+=1,this};function ni(se,me){Cn(se),me=Xn(se,me),se.g.has(me)&&(se.i=null,se.h-=se.g.get(me).length,se.g.delete(me))}function Oi(se,me){return Cn(se),me=Xn(se,me),se.g.has(me)}t.forEach=function(se,me){Cn(this),this.g.forEach(function(Oe,Me){Oe.forEach(function(Xe){se.call(me,Xe,Me,this)},this)},this)},t.na=function(){Cn(this);const se=Array.from(this.g.values()),me=Array.from(this.g.keys()),Oe=[];for(let Me=0;Me<me.length;Me++){const Xe=se[Me];for(let pt=0;pt<Xe.length;pt++)Oe.push(me[Me])}return Oe},t.V=function(se){Cn(this);let me=[];if(typeof se=="string")Oi(this,se)&&(me=me.concat(this.g.get(Xn(this,se))));else{se=Array.from(this.g.values());for(let Oe=0;Oe<se.length;Oe++)me=me.concat(se[Oe])}return me},t.set=function(se,me){return Cn(this),this.i=null,se=Xn(this,se),Oi(this,se)&&(this.h-=this.g.get(se).length),this.g.set(se,[me]),this.h+=1,this},t.get=function(se,me){return se?(se=this.V(se),0<se.length?String(se[0]):me):me};function Li(se,me,Oe){ni(se,me),0<Oe.length&&(se.i=null,se.g.set(Xn(se,me),w(Oe)),se.h+=Oe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const se=[],me=Array.from(this.g.keys());for(var Oe=0;Oe<me.length;Oe++){var Me=me[Oe];const pt=encodeURIComponent(String(Me)),ar=this.V(Me);for(Me=0;Me<ar.length;Me++){var Xe=pt;ar[Me]!==""&&(Xe+="="+encodeURIComponent(String(ar[Me]))),se.push(Xe)}}return this.i=se.join("&")};function Xn(se,me){return me=String(me),se.j&&(me=me.toLowerCase()),me}function vi(se,me){me&&!se.j&&(Cn(se),se.i=null,se.g.forEach(function(Oe,Me){var Xe=Me.toLowerCase();Me!=Xe&&(ni(this,Me),Li(this,Xe,Oe))},se)),se.j=me}function Oo(se,me){const Oe=new vn;if(a.Image){const Me=new Image;Me.onload=y(Gn,Oe,"TestLoadImage: loaded",!0,me,Me),Me.onerror=y(Gn,Oe,"TestLoadImage: error",!1,me,Me),Me.onabort=y(Gn,Oe,"TestLoadImage: abort",!1,me,Me),Me.ontimeout=y(Gn,Oe,"TestLoadImage: timeout",!1,me,Me),a.setTimeout(function(){Me.ontimeout&&Me.ontimeout()},1e4),Me.src=se}else me(!1)}function lo(se,me){const Oe=new vn,Me=new AbortController,Xe=setTimeout(()=>{Me.abort(),Gn(Oe,"TestPingServer: timeout",!1,me)},1e4);fetch(se,{signal:Me.signal}).then(pt=>{clearTimeout(Xe),pt.ok?Gn(Oe,"TestPingServer: ok",!0,me):Gn(Oe,"TestPingServer: server error",!1,me)}).catch(()=>{clearTimeout(Xe),Gn(Oe,"TestPingServer: error",!1,me)})}function Gn(se,me,Oe,Me,Xe){try{Xe&&(Xe.onload=null,Xe.onerror=null,Xe.onabort=null,Xe.ontimeout=null),Me(Oe)}catch{}}function yo(){this.g=new nr}function wo(se,me,Oe){const Me=Oe||"";try{Qr(se,function(Xe,pt){let ar=Xe;s(Xe)&&(ar=qt(Xe)),me.push(Me+pt+"="+encodeURIComponent(ar))})}catch(Xe){throw me.push(Me+"type="+encodeURIComponent("_badmap")),Xe}}function Zn(se){this.l=se.Ub||null,this.j=se.eb||!1}A(Zn,dr),Zn.prototype.g=function(){return new qi(this.l,this.j)},Zn.prototype.i=function(se){return function(){return se}}({});function qi(se,me){It.call(this),this.D=se,this.o=me,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(qi,It),t=qi.prototype,t.open=function(se,me){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=se,this.A=me,this.readyState=1,ui(this)},t.send=function(se){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const me={headers:this.u,method:this.B,credentials:this.m,cache:void 0};se&&(me.body=se),(this.D||a).fetch(new Request(this.A,me)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},t.Sa=function(se){if(this.g&&(this.l=se,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=se.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")se.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in se){if(this.j=se.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ci(this)}else se.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ci(se){se.j.read().then(se.Pa.bind(se)).catch(se.ga.bind(se))}t.Pa=function(se){if(this.g){if(this.o&&se.value)this.response.push(se.value);else if(!this.o){var me=se.value?se.value:new Uint8Array(0);(me=this.v.decode(me,{stream:!se.done}))&&(this.response=this.responseText+=me)}se.done?li(this):ui(this),this.readyState==3&&Ci(this)}},t.Ra=function(se){this.g&&(this.response=this.responseText=se,li(this))},t.Qa=function(se){this.g&&(this.response=se,li(this))},t.ga=function(){this.g&&li(this)};function li(se){se.readyState=4,se.l=null,se.j=null,se.v=null,ui(se)}t.setRequestHeader=function(se,me){this.u.append(se,me)},t.getResponseHeader=function(se){return this.h&&this.h.get(se.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const se=[],me=this.h.entries();for(var Oe=me.next();!Oe.done;)Oe=Oe.value,se.push(Oe[0]+": "+Oe[1]),Oe=me.next();return se.join(`\r
`)};function ui(se){se.onreadystatechange&&se.onreadystatechange.call(se)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(se){this.m=se?"include":"same-origin"}});function Qe(se){let me="";return H(se,function(Oe,Me){me+=Me,me+=":",me+=Oe,me+=`\r
`}),me}function Nt(se,me,Oe){e:{for(Me in Oe){var Me=!1;break e}Me=!0}Me||(Oe=Qe(Oe),typeof se=="string"?Oe!=null&&encodeURIComponent(String(Oe)):vr(se,me,Oe))}function Dt(se){It.call(this),this.headers=new Map,this.o=se||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Dt,It);var Ar=/^https?$/i,Hn=["POST","PUT"];t=Dt.prototype,t.Ha=function(se){this.J=se},t.ea=function(se,me,Oe,Me){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+se);me=me?me.toUpperCase():"GET",this.D=se,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ct.g(),this.v=this.o?Er(this.o):Er(Ct),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(me,String(se),!0),this.B=!1}catch(pt){Jn(this,pt);return}if(se=Oe||"",Oe=new Map(this.headers),Me)if(Object.getPrototypeOf(Me)===Object.prototype)for(var Xe in Me)Oe.set(Xe,Me[Xe]);else if(typeof Me.keys=="function"&&typeof Me.get=="function")for(const pt of Me.keys())Oe.set(pt,Me.get(pt));else throw Error("Unknown input type for opt_headers: "+String(Me));Me=Array.from(Oe.keys()).find(pt=>pt.toLowerCase()=="content-type"),Xe=a.FormData&&se instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Hn,me,void 0))||Me||Xe||Oe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pt,ar]of Oe)this.g.setRequestHeader(pt,ar);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{b(this),this.u=!0,this.g.send(se),this.u=!1}catch(pt){Jn(this,pt)}};function Jn(se,me){se.h=!1,se.g&&(se.j=!0,se.g.abort(),se.j=!1),se.l=me,se.m=5,di(se),n(se)}function di(se){se.A||(se.A=!0,wt(se,"complete"),wt(se,"error"))}t.abort=function(se){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=se||7,wt(this,"complete"),wt(this,"abort"),n(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),n(this,!0)),Dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ei(this):this.bb())},t.bb=function(){ei(this)};function ei(se){if(se.h&&typeof c<"u"&&(!se.v[1]||T(se)!=4||se.Z()!=2)){if(se.u&&T(se)==4)_r(se.Ea,0,se);else if(wt(se,"readystatechange"),T(se)==4){se.h=!1;try{const ar=se.Z();e:switch(ar){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var me=!0;break e;default:me=!1}var Oe;if(!(Oe=me)){var Me;if(Me=ar===0){var Xe=String(se.D).match(Pn)[1]||null;!Xe&&a.self&&a.self.location&&(Xe=a.self.location.protocol.slice(0,-1)),Me=!Ar.test(Xe?Xe.toLowerCase():"")}Oe=Me}if(Oe)wt(se,"complete"),wt(se,"success");else{se.m=6;try{var pt=2<T(se)?se.g.statusText:""}catch{pt=""}se.l=pt+" ["+se.Z()+"]",di(se)}}finally{n(se)}}}}function n(se,me){if(se.g){b(se);const Oe=se.g,Me=se.v[0]?()=>{}:null;se.g=null,se.v=null,me||wt(se,"ready");try{Oe.onreadystatechange=Me}catch{}}}function b(se){se.I&&(a.clearTimeout(se.I),se.I=null)}t.isActive=function(){return!!this.g};function T(se){return se.g?se.g.readyState:0}t.Z=function(){try{return 2<T(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(se){if(this.g){var me=this.g.responseText;return se&&me.indexOf(se)==0&&(me=me.substring(se.length)),Kt(me)}};function Ne(se){try{if(!se.g)return null;if("response"in se.g)return se.g.response;switch(se.H){case"":case"text":return se.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in se.g)return se.g.mozResponseArrayBuffer}return null}catch{return null}}function ur(se){const me={};se=(se.g&&2<=T(se)&&se.g.getAllResponseHeaders()||"").split(`\r
`);for(let Me=0;Me<se.length;Me++){if(S(se[Me]))continue;var Oe=ue(se[Me]);const Xe=Oe[0];if(Oe=Oe[1],typeof Oe!="string")continue;Oe=Oe.trim();const pt=me[Xe]||[];me[Xe]=pt,pt.push(Oe)}U(me,function(Me){return Me.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(se,me,Oe){return Oe&&Oe.internalChannelParams&&Oe.internalChannelParams[se]||me}function Co(se){this.Aa=0,this.i=[],this.j=new vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pi("failFast",!1,se),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pi("baseRetryDelayMs",5e3,se),this.cb=Pi("retryDelaySeedMs",1e4,se),this.Wa=Pi("forwardChannelMaxRetries",2,se),this.wa=Pi("forwardChannelRequestTimeoutMs",2e4,se),this.pa=se&&se.xmlHttpFactory||void 0,this.Xa=se&&se.Tb||void 0,this.Ca=se&&se.useFetchStreams||!1,this.L=void 0,this.J=se&&se.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(se&&se.concurrentRequestLimit),this.Da=new yo,this.P=se&&se.fastHandshake||!1,this.O=se&&se.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=se&&se.Rb||!1,se&&se.xa&&this.j.xa(),se&&se.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&se&&se.detectBufferingProxy||!1,this.ja=void 0,se&&se.longPollingTimeout&&0<se.longPollingTimeout&&(this.ja=se.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Co.prototype,t.la=8,t.G=1,t.connect=function(se,me,Oe,Me){yr(0),this.W=se,this.H=me||{},Oe&&Me!==void 0&&(this.H.OSID=Oe,this.H.OAID=Me),this.F=this.X,this.I=Ks(this,null,this.W),eo(this)};function Fi(se){if(Ps(se),se.G==3){var me=se.U++,Oe=dn(se.I);if(vr(Oe,"SID",se.K),vr(Oe,"RID",me),vr(Oe,"TYPE","terminate"),Mi(se,Oe),me=new Sr(se,se.j,me),me.L=2,me.v=Dn(dn(Oe)),Oe=!1,a.navigator&&a.navigator.sendBeacon)try{Oe=a.navigator.sendBeacon(me.v.toString(),"")}catch{}!Oe&&a.Image&&(new Image().src=me.v,Oe=!0),Oe||(me.g=Ws(me.j,null),me.g.ea(me.v)),me.F=Date.now(),Dr(me)}ii(se)}function uo(se){se.g&&(fs(se),se.g.cancel(),se.g=null)}function Ps(se){uo(se),se.u&&(a.clearTimeout(se.u),se.u=null),os(se),se.h.cancel(),se.s&&(typeof se.s=="number"&&a.clearTimeout(se.s),se.s=null)}function eo(se){if(!Ue(se.h)&&!se.s){se.s=!0;var me=se.Ga;Ae||we(),Se||(Ae(),Se=!0),be.add(me,se),se.B=0}}function ql(se,me){return We(se.h)>=se.h.j-(se.s?1:0)?!1:se.s?(se.i=me.D.concat(se.i),!0):se.G==1||se.G==2||se.B>=(se.Va?0:se.Wa)?!1:(se.s=Yr(E(se.Ga,se,me),Hs(se,se.B)),se.B++,!0)}t.Ga=function(se){if(this.s)if(this.s=null,this.G==1){if(!se){this.U=Math.floor(1e5*Math.random()),se=this.U++;const Xe=new Sr(this,this.j,se);let pt=this.o;if(this.S&&(pt?(pt=P(pt),ie(pt,this.S)):pt=this.S),this.m!==null||this.O||(Xe.H=pt,pt=null),this.P)e:{for(var me=0,Oe=0;Oe<this.i.length;Oe++){t:{var Me=this.i[Oe];if("__data__"in Me.map&&(Me=Me.map.__data__,typeof Me=="string")){Me=Me.length;break t}Me=void 0}if(Me===void 0)break;if(me+=Me,4096<me){me=Oe;break e}if(me===4096||Oe===this.i.length-1){me=Oe+1;break e}}me=1e3}else me=1e3;me=Uo(this,Xe,me),Oe=dn(this.I),vr(Oe,"RID",se),vr(Oe,"CVER",22),this.D&&vr(Oe,"X-HTTP-Session-Id",this.D),Mi(this,Oe),pt&&(this.O?me="headers="+encodeURIComponent(String(Qe(pt)))+"&"+me:this.m&&Nt(Oe,this.m,pt)),yt(this.h,Xe),this.Ua&&vr(Oe,"TYPE","init"),this.P?(vr(Oe,"$req",me),vr(Oe,"SID","null"),Xe.T=!0,Un(Xe,Oe,null)):Un(Xe,Oe,me),this.G=2}}else this.G==3&&(se?Xo(this,se):this.i.length==0||Ue(this.h)||Xo(this))};function Xo(se,me){var Oe;me?Oe=me.l:Oe=se.U++;const Me=dn(se.I);vr(Me,"SID",se.K),vr(Me,"RID",Oe),vr(Me,"AID",se.T),Mi(se,Me),se.m&&se.o&&Nt(Me,se.m,se.o),Oe=new Sr(se,se.j,Oe,se.B+1),se.m===null&&(Oe.H=se.o),me&&(se.i=me.D.concat(se.i)),me=Uo(se,Oe,1e3),Oe.I=Math.round(.5*se.wa)+Math.round(.5*se.wa*Math.random()),yt(se.h,Oe),Un(Oe,Me,me)}function Mi(se,me){se.H&&H(se.H,function(Oe,Me){vr(me,Me,Oe)}),se.l&&Qr({},function(Oe,Me){vr(me,Me,Oe)})}function Uo(se,me,Oe){Oe=Math.min(se.i.length,Oe);var Me=se.l?E(se.l.Na,se.l,se):null;e:{var Xe=se.i;let pt=-1;for(;;){const ar=["count="+Oe];pt==-1?0<Oe?(pt=Xe[0].g,ar.push("ofs="+pt)):pt=0:ar.push("ofs="+pt);let pn=!0;for(let Kr=0;Kr<Oe;Kr++){let Jr=Xe[Kr].g;const Nn=Xe[Kr].map;if(Jr-=pt,0>Jr)pt=Math.max(0,Xe[Kr].g-100),pn=!1;else try{wo(Nn,ar,"req"+Jr+"_")}catch{Me&&Me(Nn)}}if(pn){Me=ar.join("&");break e}}}return se=se.i.splice(0,Oe),me.D=se,Me}function ds(se){if(!se.g&&!se.u){se.Y=1;var me=se.Fa;Ae||we(),Se||(Ae(),Se=!0),be.add(me,se),se.v=0}}function ps(se){return se.g||se.u||3<=se.v?!1:(se.Y++,se.u=Yr(E(se.Fa,se),Hs(se,se.v)),se.v++,!0)}t.Fa=function(){if(this.u=null,ha(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var se=2*this.R;this.j.info("BP detection timer enabled: "+se),this.A=Yr(E(this.ab,this),se)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yr(10),uo(this),ha(this))};function fs(se){se.A!=null&&(a.clearTimeout(se.A),se.A=null)}function ha(se){se.g=new Sr(se,se.j,"rpc",se.Y),se.m===null&&(se.g.H=se.o),se.g.O=0;var me=dn(se.qa);vr(me,"RID","rpc"),vr(me,"SID",se.K),vr(me,"AID",se.T),vr(me,"CI",se.F?"0":"1"),!se.F&&se.ja&&vr(me,"TO",se.ja),vr(me,"TYPE","xmlhttp"),Mi(se,me),se.m&&se.o&&Nt(me,se.m,se.o),se.L&&(se.g.I=se.L);var Oe=se.g;se=se.ia,Oe.L=1,Oe.v=Dn(dn(me)),Oe.m=null,Oe.P=!0,Pr(Oe,se)}t.Za=function(){this.C!=null&&(this.C=null,uo(this),ps(this),yr(19))};function os(se){se.C!=null&&(a.clearTimeout(se.C),se.C=null)}function Ns(se,me){var Oe=null;if(se.g==me){os(se),fs(se),se.g=null;var Me=2}else if(ze(se.h,me))Oe=me.D,tr(se.h,me),Me=1;else return;if(se.G!=0){if(me.o)if(Me==1){Oe=me.m?me.m.length:0,me=Date.now()-me.F;var Xe=se.B;Me=Tn(),wt(Me,new Wr(Me,Oe)),eo(se)}else ds(se);else if(Xe=me.s,Xe==3||Xe==0&&0<me.X||!(Me==1&&ql(se,me)||Me==2&&ps(se)))switch(Oe&&0<Oe.length&&(me=se.h,me.i=me.i.concat(Oe)),Xe){case 1:Gi(se,5);break;case 4:Gi(se,10);break;case 3:Gi(se,6);break;default:Gi(se,2)}}}function Hs(se,me){let Oe=se.Ta+Math.floor(Math.random()*se.cb);return se.isActive()||(Oe*=2),Oe*me}function Gi(se,me){if(se.j.info("Error code "+me),me==2){var Oe=E(se.fb,se),Me=se.Xa;const Xe=!Me;Me=new Sn(Me||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$n(Me,"https"),Dn(Me),Xe?Oo(Me.toString(),Oe):lo(Me.toString(),Oe)}else yr(2);se.G=0,se.l&&se.l.sa(me),ii(se),Ps(se)}t.fb=function(se){se?(this.j.info("Successfully pinged google.com"),yr(2)):(this.j.info("Failed to ping google.com"),yr(1))};function ii(se){if(se.G=0,se.ka=[],se.l){const me=er(se.h);(me.length!=0||se.i.length!=0)&&(I(se.ka,me),I(se.ka,se.i),se.h.i.length=0,w(se.i),se.i.length=0),se.l.ra()}}function Ks(se,me,Oe){var Me=Oe instanceof Sn?dn(Oe):new Sn(Oe);if(Me.g!="")me&&(Me.g=me+"."+Me.g),On(Me,Me.s);else{var Xe=a.location;Me=Xe.protocol,me=me?me+"."+Xe.hostname:Xe.hostname,Xe=+Xe.port;var pt=new Sn(null);Me&&$n(pt,Me),me&&(pt.g=me),Xe&&On(pt,Xe),Oe&&(pt.l=Oe),Me=pt}return Oe=se.D,me=se.ya,Oe&&me&&vr(Me,Oe,me),vr(Me,"VER",se.la),Mi(se,Me),Me}function Ws(se,me,Oe){if(me&&!se.J)throw Error("Can't create secondary domain capable XhrIo object.");return me=se.Ca&&!se.pa?new Dt(new Zn({eb:Oe})):new Dt(se.pa),me.Ha(se.J),me}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xs(){}t=xs.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vi(){}Vi.prototype.g=function(se,me){return new to(se,me)};function to(se,me){It.call(this),this.g=new Co(me),this.l=se,this.h=me&&me.messageUrlParams||null,se=me&&me.messageHeaders||null,me&&me.clientProtocolHeaderRequired&&(se?se["X-Client-Protocol"]="webchannel":se={"X-Client-Protocol":"webchannel"}),this.g.o=se,se=me&&me.initMessageHeaders||null,me&&me.messageContentType&&(se?se["X-WebChannel-Content-Type"]=me.messageContentType:se={"X-WebChannel-Content-Type":me.messageContentType}),me&&me.va&&(se?se["X-WebChannel-Client-Profile"]=me.va:se={"X-WebChannel-Client-Profile":me.va}),this.g.S=se,(se=me&&me.Sb)&&!S(se)&&(this.g.m=se),this.v=me&&me.supportsCrossDomainXhr||!1,this.u=me&&me.sendRawJson||!1,(me=me&&me.httpSessionIdParam)&&!S(me)&&(this.g.D=me,se=this.h,se!==null&&me in se&&(se=this.h,me in se&&delete se[me])),this.j=new ge(this)}A(to,It),to.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},to.prototype.close=function(){Fi(this.g)},to.prototype.o=function(se){var me=this.g;if(typeof se=="string"){var Oe={};Oe.__data__=se,se=Oe}else this.u&&(Oe={},Oe.__data__=qt(se),se=Oe);me.i.push(new Yn(me.Ya++,se)),me.G==3&&eo(me)},to.prototype.N=function(){this.g.l=null,delete this.j,Fi(this.g),delete this.g,to.aa.N.call(this)};function ga(se){xr.call(this),se.__headers__&&(this.headers=se.__headers__,this.statusCode=se.__status__,delete se.__headers__,delete se.__status__);var me=se.__sm__;if(me){e:{for(const Oe in me){se=Oe;break e}se=void 0}(this.i=se)&&(se=this.i,me=me!==null&&se in me?me[se]:void 0),this.data=me}else this.data=se}A(ga,xr);function Zo(){kn.call(this),this.status=1}A(Zo,kn);function ge(se){this.g=se}A(ge,xs),ge.prototype.ua=function(){wt(this.g,"a")},ge.prototype.ta=function(se){wt(this.g,new ga(se))},ge.prototype.sa=function(se){wt(this.g,new Zo)},ge.prototype.ra=function(){wt(this.g,"b")},Vi.prototype.createWebChannel=Vi.prototype.g,to.prototype.send=to.prototype.o,to.prototype.open=to.prototype.m,to.prototype.close=to.prototype.close,createWebChannelTransport=function(){return new Vi},getStatEventTarget=function(){return Tn()},Event=gn,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,ErrorCode=dt,Bt.COMPLETE="complete",EventType=Bt,Mr.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",It.prototype.listen=It.prototype.K,WebChannel=Mr,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,XhrIo=Dt}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(t,...e){if(O.logLevel<=LogLevel.DEBUG){const r=e.map(__PRIVATE_argToString);O.debug(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_logError(t,...e){if(O.logLevel<=LogLevel.ERROR){const r=e.map(__PRIVATE_argToString);O.error(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_logWarn(t,...e){if(O.logLevel<=LogLevel.WARN){const r=e.map(__PRIVATE_argToString);O.warn(`Firestore (${x}): ${t}`,...r)}}function __PRIVATE_argToString(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(t,e,r){let u="Unexpected state";typeof e=="string"?u=e:r=e,__PRIVATE__fail(t,u,r)}function __PRIVATE__fail(t,e,r){let u=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{u+=" CONTEXT: "+JSON.stringify(r)}catch{u+=" CONTEXT: "+r}throw __PRIVATE_logError(u),new Error(u)}function __PRIVATE_hardAssert(t,e,r,u){let d="Unexpected state";typeof r=="string"?d=r:u=r,t||__PRIVATE__fail(e,d,u)}function __PRIVATE_debugCast(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){__PRIVATE_hardAssert(this.o===void 0,42304);let u=this.i;const d=o=>this.i!==u?(u=this.i,r(o)):Promise.resolve();let m=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new __PRIVATE_Deferred,e.enqueueRetryable(()=>d(this.currentUser))};const c=()=>{const o=m;e.enqueueRetryable(async()=>{await o.promise,await d(this.currentUser)})},a=o=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new __PRIVATE_Deferred)}},0),c()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(u=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(__PRIVATE_hardAssert(typeof u.accessToken=="string",31837,{l:u}),new __PRIVATE_OAuthToken(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,r,u){this.P=e,this.T=r,this.I=u,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,r,u){this.P=e,this.T=r,this.I=u}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){__PRIVATE_hardAssert(this.o===void 0,3512);const u=m=>{m.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const c=m.token!==this.m;return this.m=m.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?r(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>u(m))};const d=m=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(m=>d(m)),setTimeout(()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?d(m):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(__PRIVATE_hardAssert(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new AppCheckToken(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let u=0;u<t;u++)r[u]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let u="";for(;u.length<20;){const d=__PRIVATE_randomBytes(40);for(let m=0;m<d.length;++m)u.length<20&&d[m]<r&&(u+=e.charAt(d[m]%62))}return u}}function __PRIVATE_primitiveComparator(t,e){return t<e?-1:t>e?1:0}function __PRIVATE_compareUtf8Strings(t,e){let r=0;for(;r<t.length&&r<e.length;){const u=t.codePointAt(r),d=e.codePointAt(r);if(u!==d){if(u<128&&d<128)return __PRIVATE_primitiveComparator(u,d);{const m=__PRIVATE_newTextEncoder(),c=__PRIVATE_compareByteArrays$1(m.encode(__PRIVATE_getUtf8SafeSubstring(t,r)),m.encode(__PRIVATE_getUtf8SafeSubstring(e,r)));return c!==0?c:__PRIVATE_primitiveComparator(u,d)}}r+=u>65535?2:1}return __PRIVATE_primitiveComparator(t.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(t,e){for(let r=0;r<t.length&&r<e.length;++r)if(t[r]!==e[r])return __PRIVATE_primitiveComparator(t[r],e[r]);return __PRIVATE_primitiveComparator(t.length,e.length)}function __PRIVATE_arrayEquals(t,e,r){return t.length===e.length&&t.every((u,d)=>r(u,e[d]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B="__name__";class BasePath{constructor(e,r,u){r===void 0?r=0:r>e.length&&fail(637,{offset:r,range:e.length}),u===void 0?u=e.length-r:u>e.length-r&&fail(1746,{length:u,range:e.length-r}),this.segments=e,this.offset=r,this.len=u}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(u=>{r.push(u)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,u=this.limit();r<u;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const u=Math.min(e.length,r.length);for(let d=0;d<u;d++){const m=BasePath.compareSegments(e.get(d),r.get(d));if(m!==0)return m}return __PRIVATE_primitiveComparator(e.length,r.length)}static compareSegments(e,r){const u=BasePath.isNumericId(e),d=BasePath.isNumericId(r);return u&&!d?-1:!u&&d?1:u&&d?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(r)):__PRIVATE_compareUtf8Strings(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,r,u){return new ResourcePath(e,r,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const u of e){if(u.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);r.push(...u.split("/").filter(d=>d.length>0))}return new ResourcePath(r)}static emptyPath(){return new ResourcePath([])}}const L=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,r,u){return new FieldPath$1(e,r,u)}static isValidIdentifier(e){return L.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B}static keyField(){return new FieldPath$1([B])}static fromServerFormat(e){const r=[];let u="",d=0;const m=()=>{if(u.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(u),u=""};let c=!1;for(;d<e.length;){const a=e[d];if(a==="\\"){if(d+1===e.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[d+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);u+=o,d+=2}else a==="`"?(c=!c,d++):a!=="."||c?(u+=a,d++):(m(),d++)}if(m(),c)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(r)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ResourcePath.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(t,e,r){if(!r)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(t,e,r,u){if(e===!0&&u===!0)throw new FirestoreError(N.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function __PRIVATE_validateDocumentPath(t){if(!DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_validateCollectionPath(t){if(DocumentKey.isDocumentKey(t))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function __PRIVATE_isPlainObject(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function __PRIVATE_valueDescription(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(u){return u.constructor?u.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fail(12329,{type:typeof t})}function __PRIVATE_cast(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=__PRIVATE_valueDescription(t);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(t,e){const r={typeString:t};return e&&(r.value=e),r}function __PRIVATE_validateJSON(t,e){if(!__PRIVATE_isPlainObject(t))throw new FirestoreError(N.INVALID_ARGUMENT,"JSON must be an object");let r;for(const u in e)if(e[u]){const d=e[u].typeString,m="value"in e[u]?{value:e[u].value}:void 0;if(!(u in t)){r=`JSON missing required field: '${u}'`;break}const c=t[u];if(d&&typeof c!==d){r=`JSON field '${u}' must be a ${d}.`;break}if(m!==void 0&&c!==m.value){r=`Expected '${u}' field to equal '${m.value}'`;break}}if(r)throw new FirestoreError(N.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=-62135596800,q=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),u=Math.floor((e-1e3*r)*q);return new Timestamp(r,u)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<k)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(t,e){const r=t.toTimestamp().seconds,u=t.toTimestamp().nanoseconds+1,d=SnapshotVersion.fromTimestamp(u===1e9?new Timestamp(r+1,0):new Timestamp(r,u));return new IndexOffset(d,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(t){return new IndexOffset(t.readTime,t.key,Q)}class IndexOffset{constructor(e,r,u){this.readTime=e,this.documentKey=r,this.largestBatchId=u}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q)}}function __PRIVATE_indexOffsetComparator(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=DocumentKey.comparator(t.documentKey,e.documentKey),r!==0?r:__PRIVATE_primitiveComparator(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==$)throw t;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((u,d)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(u,d)},this.catchCallback=m=>{this.wrapFailure(r,m).next(u,d)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof PersistencePromise?r:PersistencePromise.resolve(r)}catch(r){return PersistencePromise.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):PersistencePromise.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):PersistencePromise.reject(r)}static resolve(e){return new PersistencePromise((r,u)=>{r(e)})}static reject(e){return new PersistencePromise((r,u)=>{u(e)})}static waitFor(e){return new PersistencePromise((r,u)=>{let d=0,m=0,c=!1;e.forEach(a=>{++d,a.next(()=>{++m,c&&m===d&&r()},o=>u(o))}),c=!0,m===d&&r()})}static or(e){let r=PersistencePromise.resolve(!1);for(const u of e)r=r.next(d=>d?PersistencePromise.resolve(d):u());return r}static forEach(e,r){const u=[];return e.forEach((d,m)=>{u.push(r.call(this,d,m))}),this.waitFor(u)}static mapArray(e,r){return new PersistencePromise((u,d)=>{const m=e.length,c=new Array(m);let a=0;for(let o=0;o<m;o++){const s=o;r(e[s]).next(h=>{c[s]=h,++a,a===m&&u(c)},h=>d(h))}})}static doWhile(e,r){return new PersistencePromise((u,d)=>{const m=()=>{e()===!0?r().next(()=>{m()},d):u()};m()})}}function __PRIVATE_getAndroidVersion(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function __PRIVATE_isIndexedDbTransactionError(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=u=>this._e(u),this.ae=u=>r.writeSequenceNumber(u))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}__PRIVATE_ListenSequence.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=-1;function __PRIVATE_isNullOrUndefined(t){return t==null}function __PRIVATE_isNegativeZero(t){return t===0&&1/t==-1/0}function isSafeInteger(t){return typeof t=="number"&&Number.isInteger(t)&&!__PRIVATE_isNegativeZero(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z="";function __PRIVATE_encodeResourcePath(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(t.get(r),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(t,e){let r=e;const u=t.length;for(let d=0;d<u;d++){const m=t.charAt(d);switch(m){case"\0":r+="";break;case z:r+="";break;default:r+=m}}return r}function __PRIVATE_encodeSeparator(t){return t+z+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function forEach(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,r){this.comparator=e,this.root=r||LLRBNode.EMPTY}insert(e,r){return new SortedMap(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const u=this.comparator(e,r.key);if(u===0)return r.value;u<0?r=r.left:u>0&&(r=r.right)}return null}indexOf(e){let r=0,u=this.root;for(;!u.isEmpty();){const d=this.comparator(e,u.key);if(d===0)return r+u.left.size;d<0?u=u.left:(r+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,u)=>(e(r,u),!1))}toString(){const e=[];return this.inorderTraversal((r,u)=>(e.push(`${r}:${u}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,r,u,d){this.isReverse=d,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=r?u(e.key,r):1,r&&d&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(m===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,r,u,d,m){this.key=e,this.value=r,this.color=u??LLRBNode.RED,this.left=d??LLRBNode.EMPTY,this.right=m??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,u,d,m){return new LLRBNode(e??this.key,r??this.value,u??this.color,d??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,u){let d=this;const m=u(e,d.key);return d=m<0?d.copy(null,null,null,d.left.insert(e,r,u),null):m===0?d.copy(null,r,null,null,null):d.copy(null,null,null,null,d.right.insert(e,r,u)),d.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let u,d=this;if(r(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,r),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),r(e,d.key)===0){if(d.right.isEmpty())return LLRBNode.EMPTY;u=d.right.min(),d=d.copy(u.key,u.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,r))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,r,u,d,m){return this}insert(e,r,u){return new LLRBNode(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,u)=>(e(r),!1))}forEachInRange(e,r){const u=this.data.getIteratorFrom(e[0]);for(;u.hasNext();){const d=u.getNext();if(this.comparator(d.key,e[1])>=0)return;r(d.key)}}forEachWhile(e,r){let u;for(u=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();u.hasNext();)if(!e(u.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(u=>{r=r.add(u)}),r}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const r=this.data.getIterator(),u=e.data.getIterator();for(;r.hasNext();){const d=r.getNext().key,m=u.getNext().key;if(this.comparator(d,m)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new SortedSet(this.comparator);return r.data=e,r}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let r=new SortedSet(FieldPath$1.comparator);for(const u of this.fields)r=r.add(u);for(const u of e)r=r.add(u);return new FieldMask(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(r,u)=>r.isEqual(u))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(d){try{return atob(d)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+m):m}}(e);return new ByteString(r)}static fromUint8Array(e){const r=function(d){let m="";for(let c=0;c<d.length;++c)m+=String.fromCharCode(d[c]);return m}(e);return new ByteString(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const u=new Uint8Array(r.length);for(let d=0;d<r.length;d++)u[d]=r.charCodeAt(d);return u}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(t){if(__PRIVATE_hardAssert(!!t,39018),typeof t=="string"){let e=0;const r=it.exec(t);if(__PRIVATE_hardAssert(!!r,46558,{timestamp:t}),r[1]){let d=r[1];d=(d+"000000000").substr(0,9),e=Number(d)}const u=new Date(t);return{seconds:Math.floor(u.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(t.seconds),nanos:__PRIVATE_normalizeNumber(t.nanos)}}function __PRIVATE_normalizeNumber(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function __PRIVATE_normalizeByteString(t){return typeof t=="string"?ByteString.fromBase64String(t):ByteString.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="server_timestamp",ot="__type__",_t="__previous_value__",at="__local_write_time__";function __PRIVATE_isServerTimestamp(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ot])===null||r===void 0?void 0:r.stringValue)===st}function __PRIVATE_getPreviousValue(t){const e=t.mapValue.fields[_t];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(t){const e=__PRIVATE_normalizeTimestamp(t.mapValue.fields[at].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,r,u,d,m,c,a,o,s,h){this.databaseId=e,this.appId=r,this.persistenceKey=u,this.host=d,this.ssl=m,this.forceLongPolling=c,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=s,this.isUsingEmulator=h}}const ut="(default)";class DatabaseId{constructor(e,r){this.projectId=e,this.database=r||ut}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="__type__",lt="__max__",ht={mapValue:{}},Pt="__vector__",Tt="value";function __PRIVATE_typeOrder(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?__PRIVATE_isServerTimestamp(t)?4:__PRIVATE_isMaxValue(t)?9007199254740991:__PRIVATE_isVectorValue(t)?10:11:fail(28295,{value:t})}function __PRIVATE_valueEquals(t,e){if(t===e)return!0;const r=__PRIVATE_typeOrder(t);if(r!==__PRIVATE_typeOrder(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(t).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(d,m){if(typeof d.timestampValue=="string"&&typeof m.timestampValue=="string"&&d.timestampValue.length===m.timestampValue.length)return d.timestampValue===m.timestampValue;const c=__PRIVATE_normalizeTimestamp(d.timestampValue),a=__PRIVATE_normalizeTimestamp(m.timestampValue);return c.seconds===a.seconds&&c.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(d,m){return __PRIVATE_normalizeByteString(d.bytesValue).isEqual(__PRIVATE_normalizeByteString(m.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(d,m){return __PRIVATE_normalizeNumber(d.geoPointValue.latitude)===__PRIVATE_normalizeNumber(m.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(d.geoPointValue.longitude)===__PRIVATE_normalizeNumber(m.geoPointValue.longitude)}(t,e);case 2:return function(d,m){if("integerValue"in d&&"integerValue"in m)return __PRIVATE_normalizeNumber(d.integerValue)===__PRIVATE_normalizeNumber(m.integerValue);if("doubleValue"in d&&"doubleValue"in m){const c=__PRIVATE_normalizeNumber(d.doubleValue),a=__PRIVATE_normalizeNumber(m.doubleValue);return c===a?__PRIVATE_isNegativeZero(c)===__PRIVATE_isNegativeZero(a):isNaN(c)&&isNaN(a)}return!1}(t,e);case 9:return __PRIVATE_arrayEquals(t.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(d,m){const c=d.mapValue.fields||{},a=m.mapValue.fields||{};if(__PRIVATE_objectSize(c)!==__PRIVATE_objectSize(a))return!1;for(const o in c)if(c.hasOwnProperty(o)&&(a[o]===void 0||!__PRIVATE_valueEquals(c[o],a[o])))return!1;return!0}(t,e);default:return fail(52216,{left:t})}}function __PRIVATE_arrayValueContains(t,e){return(t.values||[]).find(r=>__PRIVATE_valueEquals(r,e))!==void 0}function __PRIVATE_valueCompare(t,e){if(t===e)return 0;const r=__PRIVATE_typeOrder(t),u=__PRIVATE_typeOrder(e);if(r!==u)return __PRIVATE_primitiveComparator(r,u);switch(r){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(t.booleanValue,e.booleanValue);case 2:return function(m,c){const a=__PRIVATE_normalizeNumber(m.integerValue||m.doubleValue),o=__PRIVATE_normalizeNumber(c.integerValue||c.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return __PRIVATE_compareTimestamps(t.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(t),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(t.stringValue,e.stringValue);case 6:return function(m,c){const a=__PRIVATE_normalizeByteString(m),o=__PRIVATE_normalizeByteString(c);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(m,c){const a=m.split("/"),o=c.split("/");for(let s=0;s<a.length&&s<o.length;s++){const h=__PRIVATE_primitiveComparator(a[s],o[s]);if(h!==0)return h}return __PRIVATE_primitiveComparator(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(m,c){const a=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(m.latitude),__PRIVATE_normalizeNumber(c.latitude));return a!==0?a:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(m.longitude),__PRIVATE_normalizeNumber(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(t.arrayValue,e.arrayValue);case 10:return function(m,c){var a,o,s,h;const v=m.fields||{},E=c.fields||{},y=(a=v[Tt])===null||a===void 0?void 0:a.arrayValue,A=(o=E[Tt])===null||o===void 0?void 0:o.arrayValue,w=__PRIVATE_primitiveComparator(((s=y?.values)===null||s===void 0?void 0:s.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:__PRIVATE_compareArrays(y,A)}(t.mapValue,e.mapValue);case 11:return function(m,c){if(m===ht.mapValue&&c===ht.mapValue)return 0;if(m===ht.mapValue)return 1;if(c===ht.mapValue)return-1;const a=m.fields||{},o=Object.keys(a),s=c.fields||{},h=Object.keys(s);o.sort(),h.sort();for(let v=0;v<o.length&&v<h.length;++v){const E=__PRIVATE_compareUtf8Strings(o[v],h[v]);if(E!==0)return E;const y=__PRIVATE_valueCompare(a[o[v]],s[h[v]]);if(y!==0)return y}return __PRIVATE_primitiveComparator(o.length,h.length)}(t.mapValue,e.mapValue);default:throw fail(23264,{le:r})}}function __PRIVATE_compareTimestamps(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return __PRIVATE_primitiveComparator(t,e);const r=__PRIVATE_normalizeTimestamp(t),u=__PRIVATE_normalizeTimestamp(e),d=__PRIVATE_primitiveComparator(r.seconds,u.seconds);return d!==0?d:__PRIVATE_primitiveComparator(r.nanos,u.nanos)}function __PRIVATE_compareArrays(t,e){const r=t.values||[],u=e.values||[];for(let d=0;d<r.length&&d<u.length;++d){const m=__PRIVATE_valueCompare(r[d],u[d]);if(m)return m}return __PRIVATE_primitiveComparator(r.length,u.length)}function canonicalId(t){return __PRIVATE_canonifyValue(t)}function __PRIVATE_canonifyValue(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const u=__PRIVATE_normalizeTimestamp(r);return`time(${u.seconds},${u.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return __PRIVATE_normalizeByteString(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return DocumentKey.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let u="[",d=!0;for(const m of r.values||[])d?d=!1:u+=",",u+=__PRIVATE_canonifyValue(m);return u+"]"}(t.arrayValue):"mapValue"in t?function(r){const u=Object.keys(r.fields||{}).sort();let d="{",m=!0;for(const c of u)m?m=!1:d+=",",d+=`${c}:${__PRIVATE_canonifyValue(r.fields[c])}`;return d+"}"}(t.mapValue):fail(61005,{value:t})}function __PRIVATE_estimateByteSize(t){switch(__PRIVATE_typeOrder(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(t);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*t.stringValue.length;case 6:return __PRIVATE_normalizeByteString(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(u){return(u.values||[]).reduce((d,m)=>d+__PRIVATE_estimateByteSize(m),0)}(t.arrayValue);case 10:case 11:return function(u){let d=0;return forEach(u.fields,(m,c)=>{d+=m.length+__PRIVATE_estimateByteSize(c)}),d}(t.mapValue);default:throw fail(13486,{value:t})}}function isInteger(t){return!!t&&"integerValue"in t}function isArray(t){return!!t&&"arrayValue"in t}function __PRIVATE_isMapValue(t){return!!t&&"mapValue"in t}function __PRIVATE_isVectorValue(t){var e,r;return((r=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ct])===null||r===void 0?void 0:r.stringValue)===Pt}function __PRIVATE_deepClone(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return forEach(t.mapValue.fields,(r,u)=>e.mapValue.fields[r]=__PRIVATE_deepClone(u)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=__PRIVATE_deepClone(t.arrayValue.values[r]);return e}return Object.assign({},t)}function __PRIVATE_isMaxValue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let u=0;u<e.length-1;++u)if(r=(r.mapValue.fields||{})[e.get(u)],!__PRIVATE_isMapValue(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(r)}setAll(e){let r=FieldPath$1.emptyPath(),u={},d=[];e.forEach((c,a)=>{if(!r.isImmediateParentOf(a)){const o=this.getFieldsMap(r);this.applyChanges(o,u,d),u={},d=[],r=a.popLast()}c?u[a.lastSegment()]=__PRIVATE_deepClone(c):d.push(a.lastSegment())});const m=this.getFieldsMap(r);this.applyChanges(m,u,d)}delete(e){const r=this.field(e.popLast());__PRIVATE_isMapValue(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let u=0;u<e.length;++u){let d=r.mapValue.fields[e.get(u)];__PRIVATE_isMapValue(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},r.mapValue.fields[e.get(u)]=d),r=d}return r.mapValue.fields}applyChanges(e,r,u){forEach(r,(d,m)=>e[d]=m);for(const d of u)delete e[d]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(t){const e=[];return forEach(t.fields,(r,u)=>{const d=new FieldPath$1([r]);if(__PRIVATE_isMapValue(u)){const m=__PRIVATE_extractFieldMask(u.mapValue).fields;if(m.length===0)e.push(d);else for(const c of m)e.push(d.child(c))}else e.push(d)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,r,u,d,m,c,a){this.key=e,this.documentType=r,this.version=u,this.readTime=d,this.createTime=m,this.data=c,this.documentState=a}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,r,u,d){return new MutableDocument(e,1,r,SnapshotVersion.min(),u,d,0)}static newNoDocument(e,r){return new MutableDocument(e,2,r,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,r){return new MutableDocument(e,3,r,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,r){this.position=e,this.inclusive=r}}function __PRIVATE_boundCompareToDocument(t,e,r){let u=0;for(let d=0;d<t.position.length;d++){const m=e[d],c=t.position[d];if(m.field.isKeyField()?u=DocumentKey.comparator(DocumentKey.fromName(c.referenceValue),r.key):u=__PRIVATE_valueCompare(c,r.data.field(m.field)),m.dir==="desc"&&(u*=-1),u!==0)break}return u}function __PRIVATE_boundEquals(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!__PRIVATE_valueEquals(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,r="asc"){this.field=e,this.dir=r}}function __PRIVATE_orderByEquals(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,r,u){super(),this.field=e,this.op=r,this.value=u}static create(e,r,u){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,u):new __PRIVATE_KeyFieldFilter(e,r,u):r==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,u):r==="in"?new __PRIVATE_InFilter(e,u):r==="not-in"?new __PRIVATE_NotInFilter(e,u):r==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,u):new FieldFilter(e,r,u)}static createKeyFieldInFilter(e,r,u){return r==="in"?new __PRIVATE_KeyFieldInFilter(e,u):new __PRIVATE_KeyFieldNotInFilter(e,u)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(r,this.value)):r!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(r)&&this.matchesComparison(__PRIVATE_valueCompare(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,r){super(),this.filters=e,this.op=r,this.he=null}static create(e,r){return new CompositeFilter(e,r)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(t){return t.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(t){return __PRIVATE_compositeFilterIsFlat(t)&&__PRIVATE_compositeFilterIsConjunction(t)}function __PRIVATE_compositeFilterIsFlat(t){for(const e of t.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(t){if(t instanceof FieldFilter)return t.field.canonicalString()+t.op.toString()+canonicalId(t.value);if(__PRIVATE_compositeFilterIsFlatConjunction(t))return t.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=t.filters.map(r=>__PRIVATE_canonifyFilter(r)).join(",");return`${t.op}(${e})`}}function __PRIVATE_filterEquals(t,e){return t instanceof FieldFilter?function(u,d){return d instanceof FieldFilter&&u.op===d.op&&u.field.isEqual(d.field)&&__PRIVATE_valueEquals(u.value,d.value)}(t,e):t instanceof CompositeFilter?function(u,d){return d instanceof CompositeFilter&&u.op===d.op&&u.filters.length===d.filters.length?u.filters.reduce((m,c,a)=>m&&__PRIVATE_filterEquals(c,d.filters[a]),!0):!1}(t,e):void fail(19439)}function __PRIVATE_stringifyFilter(t){return t instanceof FieldFilter?function(r){return`${r.field.canonicalString()} ${r.op} ${canonicalId(r.value)}`}(t):t instanceof CompositeFilter?function(r){return r.op.toString()+" {"+r.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(t):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,r,u){super(e,r,u),this.key=DocumentKey.fromName(u.referenceValue)}matches(e){const r=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(r)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,r){super(e,"in",r),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,r){super(e,"not-in",r),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(u=>DocumentKey.fromName(u.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return isArray(r)&&__PRIVATE_arrayValueContains(r.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,r)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,r){super(e,"not-in",r)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,r)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!isArray(r)||!r.arrayValue.values)&&r.arrayValue.values.some(u=>__PRIVATE_arrayValueContains(this.value.arrayValue,u))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,r=null,u=[],d=[],m=null,c=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=u,this.filters=d,this.limit=m,this.startAt=c,this.endAt=a,this.Pe=null}}function __PRIVATE_newTarget(t,e=null,r=[],u=[],d=null,m=null,c=null){return new __PRIVATE_TargetImpl(t,e,r,u,d,m,c)}function __PRIVATE_canonifyTarget(t){const e=__PRIVATE_debugCast(t);if(e.Pe===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(u=>__PRIVATE_canonifyFilter(u)).join(","),r+="|ob:",r+=e.orderBy.map(u=>function(m){return m.field.canonicalString()+m.dir}(u)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(u=>canonicalId(u)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(u=>canonicalId(u)).join(",")),e.Pe=r}return e.Pe}function __PRIVATE_targetEquals(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!__PRIVATE_orderByEquals(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!__PRIVATE_filterEquals(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(t.startAt,e.startAt)&&__PRIVATE_boundEquals(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,r=null,u=[],d=[],m=null,c="F",a=null,o=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=u,this.filters=d,this.limit=m,this.limitType=c,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(t,e,r,u,d,m,c,a){return new __PRIVATE_QueryImpl(t,e,r,u,d,m,c,a)}function __PRIVATE_newQueryForPath(t){return new __PRIVATE_QueryImpl(t)}function __PRIVATE_queryMatchesAllDocuments(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(t){return t.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(t){const e=__PRIVATE_debugCast(t);if(e.Te===null){e.Te=[];const r=new Set;for(const m of e.explicitOrderBy)e.Te.push(m),r.add(m.field.canonicalString());const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let a=new SortedSet(FieldPath$1.comparator);return c.filters.forEach(o=>{o.getFlattenedFilters().forEach(s=>{s.isInequality()&&(a=a.add(s.field))})}),a})(e).forEach(m=>{r.has(m.canonicalString())||m.isKeyField()||e.Te.push(new OrderBy(m,u))}),r.has(FieldPath$1.keyField().canonicalString())||e.Te.push(new OrderBy(FieldPath$1.keyField(),u))}return e.Te}function __PRIVATE_queryToTarget(t){const e=__PRIVATE_debugCast(t);return e.Ie||(e.Ie=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(t))),e.Ie}function __PRIVATE__queryToTarget(t,e){if(t.limitType==="F")return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(d=>{const m=d.dir==="desc"?"asc":"desc";return new OrderBy(d.field,m)});const r=t.endAt?new Bound(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Bound(t.startAt.position,t.startAt.inclusive):null;return __PRIVATE_newTarget(t.path,t.collectionGroup,e,t.filters,t.limit,r,u)}}function __PRIVATE_queryWithLimit(t,e,r){return new __PRIVATE_QueryImpl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function __PRIVATE_queryEquals(t,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(t),__PRIVATE_queryToTarget(e))&&t.limitType===e.limitType}function __PRIVATE_canonifyQuery(t){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(t))}|lt:${t.limitType}`}function __PRIVATE_stringifyQuery(t){return`Query(target=${function(r){let u=r.path.canonicalString();return r.collectionGroup!==null&&(u+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(u+=`, filters: [${r.filters.map(d=>__PRIVATE_stringifyFilter(d)).join(", ")}]`),__PRIVATE_isNullOrUndefined(r.limit)||(u+=", limit: "+r.limit),r.orderBy.length>0&&(u+=`, orderBy: [${r.orderBy.map(d=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(d)).join(", ")}]`),r.startAt&&(u+=", startAt: ",u+=r.startAt.inclusive?"b:":"a:",u+=r.startAt.position.map(d=>canonicalId(d)).join(",")),r.endAt&&(u+=", endAt: ",u+=r.endAt.inclusive?"a:":"b:",u+=r.endAt.position.map(d=>canonicalId(d)).join(",")),`Target(${u})`}(__PRIVATE_queryToTarget(t))}; limitType=${t.limitType})`}function __PRIVATE_queryMatches(t,e){return e.isFoundDocument()&&function(u,d){const m=d.key.path;return u.collectionGroup!==null?d.key.hasCollectionId(u.collectionGroup)&&u.path.isPrefixOf(m):DocumentKey.isDocumentKey(u.path)?u.path.isEqual(m):u.path.isImmediateParentOf(m)}(t,e)&&function(u,d){for(const m of __PRIVATE_queryNormalizedOrderBy(u))if(!m.field.isKeyField()&&d.data.field(m.field)===null)return!1;return!0}(t,e)&&function(u,d){for(const m of u.filters)if(!m.matches(d))return!1;return!0}(t,e)&&function(u,d){return!(u.startAt&&!function(c,a,o){const s=__PRIVATE_boundCompareToDocument(c,a,o);return c.inclusive?s<=0:s<0}(u.startAt,__PRIVATE_queryNormalizedOrderBy(u),d)||u.endAt&&!function(c,a,o){const s=__PRIVATE_boundCompareToDocument(c,a,o);return c.inclusive?s>=0:s>0}(u.endAt,__PRIVATE_queryNormalizedOrderBy(u),d))}(t,e)}function __PRIVATE_newQueryComparator(t){return(e,r)=>{let u=!1;for(const d of __PRIVATE_queryNormalizedOrderBy(t)){const m=__PRIVATE_compareDocs(d,e,r);if(m!==0)return m;u=u||d.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(t,e,r){const u=t.field.isKeyField()?DocumentKey.comparator(e.key,r.key):function(m,c,a){const o=c.data.field(m),s=a.data.field(m);return o!==null&&s!==null?__PRIVATE_valueCompare(o,s):fail(42886)}(t.field,e,r);switch(t.dir){case"asc":return u;case"desc":return-1*u;default:return fail(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),u=this.inner[r];if(u!==void 0){for(const[d,m]of u)if(this.equalsFn(d,e))return m}}has(e){return this.get(e)!==void 0}set(e,r){const u=this.mapKeyFn(e),d=this.inner[u];if(d===void 0)return this.inner[u]=[[e,r]],void this.innerSize++;for(let m=0;m<d.length;m++)if(this.equalsFn(d[m][0],e))return void(d[m]=[e,r]);d.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),u=this.inner[r];if(u===void 0)return!1;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return u.length===1?delete this.inner[r]:u.splice(d,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(r,u)=>{for(const[d,m]of u)e(d,m)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Et}const At=new SortedMap(DocumentKey.comparator);function documentMap(...t){let e=At;for(const r of t)e=e.insert(r.key,r);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(t){let e=At;return t.forEach((r,u)=>e=e.insert(r,u.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(t=>t.toString(),(t,e)=>t.isEqual(e))}const Rt=new SortedMap(DocumentKey.comparator),Vt=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...t){let e=Vt;for(const r of t)e=e.add(r);return e}const mt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(t){return{integerValue:""+t}}function toNumber(t,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(t,e,r){return t instanceof __PRIVATE_ServerTimestampTransform?function(d,m){const c={fields:{[ot]:{stringValue:st},[at]:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return m&&__PRIVATE_isServerTimestamp(m)&&(m=__PRIVATE_getPreviousValue(m)),m&&(c.fields[_t]=m),{mapValue:c}}(r,e):t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):function(d,m){const c=__PRIVATE_computeTransformOperationBaseValue(d,m),a=asNumber(c)+asNumber(d.Ee);return isInteger(c)&&isInteger(d.Ee)?__PRIVATE_toInteger(a):__PRIVATE_toDouble(d.serializer,a)}(t,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(t,e,r){return t instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(t,e):t instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(t,e):r}function __PRIVATE_computeTransformOperationBaseValue(t,e){return t instanceof __PRIVATE_NumericIncrementTransformOperation?function(u){return isInteger(u)||function(m){return!!m&&"doubleValue"in m}(u)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(t,e){const r=__PRIVATE_coercedFieldValuesArray(e);for(const u of t.elements)r.some(d=>__PRIVATE_valueEquals(d,u))||r.push(u);return{arrayValue:{values:r}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(t,e){let r=__PRIVATE_coercedFieldValuesArray(e);for(const u of t.elements)r=r.filter(d=>!__PRIVATE_valueEquals(d,u));return{arrayValue:{values:r}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,r){super(),this.serializer=e,this.Ee=r}}function asNumber(t){return __PRIVATE_normalizeNumber(t.integerValue||t.doubleValue)}function __PRIVATE_coercedFieldValuesArray(t){return isArray(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(t,e){return t.field.isEqual(e.field)&&function(u,d){return u instanceof __PRIVATE_ArrayUnionTransformOperation&&d instanceof __PRIVATE_ArrayUnionTransformOperation||u instanceof __PRIVATE_ArrayRemoveTransformOperation&&d instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(u.elements,d.elements,__PRIVATE_valueEquals):u instanceof __PRIVATE_NumericIncrementTransformOperation&&d instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(u.Ee,d.Ee):u instanceof __PRIVATE_ServerTimestampTransform&&d instanceof __PRIVATE_ServerTimestampTransform}(t.transform,e.transform)}class MutationResult{constructor(e,r){this.version=e,this.transformResults=r}}class Precondition{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __PRIVATE_DeleteMutation(t.key,Precondition.none()):new __PRIVATE_SetMutation(t.key,t.data,Precondition.none());{const r=t.data,u=ObjectValue.empty();let d=new SortedSet(FieldPath$1.comparator);for(let m of e.fields)if(!d.has(m)){let c=r.field(m);c===null&&m.length>1&&(m=m.popLast(),c=r.field(m)),c===null?u.delete(m):u.set(m,c),d=d.add(m)}return new __PRIVATE_PatchMutation(t.key,u,new FieldMask(d.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(t,e,r){t instanceof __PRIVATE_SetMutation?function(d,m,c){const a=d.value.clone(),o=__PRIVATE_serverTransformResults(d.fieldTransforms,m,c.transformResults);a.setAll(o),m.convertToFoundDocument(c.version,a).setHasCommittedMutations()}(t,e,r):t instanceof __PRIVATE_PatchMutation?function(d,m,c){if(!__PRIVATE_preconditionIsValidForDocument(d.precondition,m))return void m.convertToUnknownDocument(c.version);const a=__PRIVATE_serverTransformResults(d.fieldTransforms,m,c.transformResults),o=m.data;o.setAll(__PRIVATE_getPatch(d)),o.setAll(a),m.convertToFoundDocument(c.version,o).setHasCommittedMutations()}(t,e,r):function(d,m,c){m.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,r)}function __PRIVATE_mutationApplyToLocalView(t,e,r,u){return t instanceof __PRIVATE_SetMutation?function(m,c,a,o){if(!__PRIVATE_preconditionIsValidForDocument(m.precondition,c))return a;const s=m.value.clone(),h=__PRIVATE_localTransformResults(m.fieldTransforms,o,c);return s.setAll(h),c.convertToFoundDocument(c.version,s).setHasLocalMutations(),null}(t,e,r,u):t instanceof __PRIVATE_PatchMutation?function(m,c,a,o){if(!__PRIVATE_preconditionIsValidForDocument(m.precondition,c))return a;const s=__PRIVATE_localTransformResults(m.fieldTransforms,o,c),h=c.data;return h.setAll(__PRIVATE_getPatch(m)),h.setAll(s),c.convertToFoundDocument(c.version,h).setHasLocalMutations(),a===null?null:a.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map(v=>v.field))}(t,e,r,u):function(m,c,a){return __PRIVATE_preconditionIsValidForDocument(m.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):a}(t,e,r)}function __PRIVATE_mutationExtractBaseValue(t,e){let r=null;for(const u of t.fieldTransforms){const d=e.data.field(u.field),m=__PRIVATE_computeTransformOperationBaseValue(u.transform,d||null);m!=null&&(r===null&&(r=ObjectValue.empty()),r.set(u.field,m))}return r||null}function __PRIVATE_mutationEquals(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(u,d){return u===void 0&&d===void 0||!(!u||!d)&&__PRIVATE_arrayEquals(u,d,(m,c)=>__PRIVATE_fieldTransformEquals(m,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,r,u,d=[]){super(),this.key=e,this.value=r,this.precondition=u,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,r,u,d,m=[]){super(),this.key=e,this.data=r,this.fieldMask=u,this.precondition=d,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const u=t.data.field(r);e.set(r,u)}}),e}function __PRIVATE_serverTransformResults(t,e,r){const u=new Map;__PRIVATE_hardAssert(t.length===r.length,32656,{Ae:r.length,Re:t.length});for(let d=0;d<r.length;d++){const m=t[d],c=m.transform,a=e.data.field(m.field);u.set(m.field,__PRIVATE_applyTransformOperationToRemoteDocument(c,a,r[d]))}return u}function __PRIVATE_localTransformResults(t,e,r){const u=new Map;for(const d of t){const m=d.transform,c=r.data.field(d.field);u.set(d.field,__PRIVATE_applyTransformOperationToLocalView(m,c,e))}return u}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,r,u,d){this.batchId=e,this.localWriteTime=r,this.baseMutations=u,this.mutations=d}applyToRemoteDocument(e,r){const u=r.mutationResults;for(let d=0;d<this.mutations.length;d++){const m=this.mutations[d];m.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(m,e,u[d])}}applyToLocalView(e,r){for(const u of this.baseMutations)u.key.isEqual(e.key)&&(r=__PRIVATE_mutationApplyToLocalView(u,e,r,this.localWriteTime));for(const u of this.mutations)u.key.isEqual(e.key)&&(r=__PRIVATE_mutationApplyToLocalView(u,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const u=__PRIVATE_newMutationMap();return this.mutations.forEach(d=>{const m=e.get(d.key),c=m.overlayedDocument;let a=this.applyToLocalView(c,m.mutatedFields);a=r.has(d.key)?null:a;const o=__PRIVATE_calculateOverlayMutation(c,a);o!==null&&u.set(d.key,o),c.isValidDocument()||c.convertToNoDocument(SnapshotVersion.min())}),u}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(r,u)=>__PRIVATE_mutationEquals(r,u))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(r,u)=>__PRIVATE_mutationEquals(r,u))}}class MutationBatchResult{constructor(e,r,u,d){this.batch=e,this.commitVersion=r,this.mutationResults=u,this.docVersions=d}static from(e,r,u){__PRIVATE_hardAssert(e.mutations.length===u.length,58842,{Ve:e.mutations.length,me:u.length});let d=function(){return Rt}();const m=e.mutations;for(let c=0;c<m.length;c++)d=d.insert(m[c].key,u[c].version);return new MutationBatchResult(e,r,u,d)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,gt;function __PRIVATE_isPermanentError(t){switch(t){case N.OK:return fail(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return fail(15467,{code:t})}}function __PRIVATE_mapCodeFromRpcCode(t){if(t===void 0)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(t){case ft.OK:return N.OK;case ft.CANCELLED:return N.CANCELLED;case ft.UNKNOWN:return N.UNKNOWN;case ft.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ft.INTERNAL:return N.INTERNAL;case ft.UNAVAILABLE:return N.UNAVAILABLE;case ft.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ft.NOT_FOUND:return N.NOT_FOUND;case ft.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ft.ABORTED:return N.ABORTED;case ft.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ft.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:t})}}(gt=ft||(ft={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Integer([4294967295,4294967295],0);class JsonProtoSerializer{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function toTimestamp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(t,e){return toTimestamp(t,e.toTimestamp())}function __PRIVATE_fromVersion(t){return __PRIVATE_hardAssert(!!t,49232),SnapshotVersion.fromTimestamp(function(r){const u=__PRIVATE_normalizeTimestamp(r);return new Timestamp(u.seconds,u.nanos)}(t))}function __PRIVATE_toResourceName(t,e){return __PRIVATE_toResourcePath(t,e).canonicalString()}function __PRIVATE_toResourcePath(t,e){const r=function(d){return new ResourcePath(["projects",d.projectId,"databases",d.database])}(t).child("documents");return e===void 0?r:r.child(e)}function __PRIVATE_fromResourceName(t){const e=ResourcePath.fromString(t);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(t,e){return __PRIVATE_toResourceName(t.databaseId,e.path)}function __PRIVATE_fromQueryPath(t){const e=__PRIVATE_fromResourceName(t);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(t){return new ResourcePath(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(t){return __PRIVATE_hardAssert(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function __PRIVATE_toMutationDocument(t,e,r){return{name:__PRIVATE_toName(t,e),fields:r.value.mapValue.fields}}function toMutation(t,e){let r;if(e instanceof __PRIVATE_SetMutation)r={update:__PRIVATE_toMutationDocument(t,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)r={delete:__PRIVATE_toName(t,e.key)};else if(e instanceof __PRIVATE_PatchMutation)r={update:__PRIVATE_toMutationDocument(t,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Rt:e.type});r={verify:__PRIVATE_toName(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(u=>function(m,c){const a=c.transform;if(a instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:c.field.canonicalString(),increment:a.Ee};throw fail(20930,{transform:c.transform})}(0,u))),e.precondition.isNone||(r.currentDocument=function(d,m){return m.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(d,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:fail(27497)}(t,e.precondition)),r}function __PRIVATE_fromWriteResults(t,e){return t&&t.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),t.map(r=>function(d,m){let c=d.updateTime?__PRIVATE_fromVersion(d.updateTime):__PRIVATE_fromVersion(m);return c.isEqual(SnapshotVersion.min())&&(c=__PRIVATE_fromVersion(m)),new MutationResult(c,d.transformResults||[])}(r,e))):[]}function __PRIVATE_convertQueryTargetToQuery(t){let e=__PRIVATE_fromQueryPath(t.parent);const r=t.structuredQuery,u=r.from?r.from.length:0;let d=null;if(u>0){__PRIVATE_hardAssert(u===1,65062);const h=r.from[0];h.allDescendants?d=h.collectionId:e=e.child(h.collectionId)}let m=[];r.where&&(m=function(v){const E=__PRIVATE_fromFilter(v);return E instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(E)?E.getFilters():[E]}(r.where));let c=[];r.orderBy&&(c=function(v){return v.map(E=>function(A){return new OrderBy(__PRIVATE_fromFieldPathReference(A.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(E))}(r.orderBy));let a=null;r.limit&&(a=function(v){let E;return E=typeof v=="object"?v.value:v,__PRIVATE_isNullOrUndefined(E)?null:E}(r.limit));let o=null;r.startAt&&(o=function(v){const E=!!v.before,y=v.values||[];return new Bound(y,E)}(r.startAt));let s=null;return r.endAt&&(s=function(v){const E=!v.before,y=v.values||[];return new Bound(y,E)}(r.endAt)),__PRIVATE_newQuery(e,d,c,m,a,"F",o,s)}function __PRIVATE_fromFilter(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const u=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(u,"==",{doubleValue:NaN});case"IS_NULL":const d=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(d,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=__PRIVATE_fromFieldPathReference(r.unaryFilter.field);return FieldFilter.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(t):t.fieldFilter!==void 0?function(r){return FieldFilter.create(__PRIVATE_fromFieldPathReference(r.fieldFilter.field),function(d){switch(d){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return CompositeFilter.create(r.compositeFilter.filters.map(u=>__PRIVATE_fromFilter(u)),function(d){switch(d){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(r.compositeFilter.op))}(t):fail(30097,{filter:t})}function __PRIVATE_fromFieldPathReference(t){return FieldPath$1.fromServerFormat(t.fieldPath)}function __PRIVATE_toDocumentMask(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.gt=e}}function __PRIVATE_fromBundledQuery(t){const e=__PRIVATE_convertQueryTargetToQuery({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Dn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,r){return this.Dn.add(r),PersistencePromise.resolve()}getCollectionParents(e,r){return PersistencePromise.resolve(this.Dn.getEntries(r))}addFieldIndex(e,r){return PersistencePromise.resolve()}deleteFieldIndex(e,r){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,r){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,r){return PersistencePromise.resolve(null)}getIndexType(e,r){return PersistencePromise.resolve(0)}getFieldIndexes(e,r){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,r){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,r){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,r,u){return PersistencePromise.resolve()}updateIndexEntries(e,r){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const r=e.lastSegment(),u=e.popLast(),d=this.index[r]||new SortedSet(ResourcePath.comparator),m=!d.has(u);return this.index[r]=d.add(u),m}has(e){const r=e.lastSegment(),u=e.popLast(),d=this.index[r];return d&&d.has(u)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,u){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=u}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new __PRIVATE_TargetIdGenerator(0)}static ur(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="LruGarbageCollector",Ot=1048576;function __PRIVATE_bufferEntryComparator([t,e],[r,u]){const d=__PRIVATE_primitiveComparator(t,r);return d===0?__PRIVATE_primitiveComparator(e,u):d}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Tr=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Ir=0}dr(){return++this.Ir}Er(e){const r=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(r);else{const u=this.buffer.last();__PRIVATE_bufferEntryComparator(r,u)<0&&(this.buffer=this.buffer.delete(u).add(r))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,r,u){this.garbageCollector=e,this.asyncQueue=r,this.localStore=u,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){__PRIVATE_logDebug(xt,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){__PRIVATE_isIndexedDbTransactionError(r)?__PRIVATE_logDebug(xt,"Ignoring IndexedDB error during garbage collection: ",r):await __PRIVATE_ignoreIfPrimaryLeaseLoss(r)}await this.Rr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.mr(e).next(u=>Math.floor(r/100*u))}nthSequenceNumber(e,r){if(r===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ue);const u=new __PRIVATE_RollingSequenceNumberBuffer(r);return this.Vr.forEachTarget(e,d=>u.Er(d.sequenceNumber)).next(()=>this.Vr.gr(e,d=>u.Er(d))).next(()=>u.maxValue)}removeTargets(e,r,u){return this.Vr.removeTargets(e,r,u)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft)):this.getCacheSize(e).next(u=>u<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft):this.pr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,r){let u,d,m,c,a,o,s;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),d=this.params.maximumSequenceNumbersToCollect):d=v,c=Date.now(),this.nthSequenceNumber(e,d))).next(v=>(u=v,a=Date.now(),this.removeTargets(e,u,r))).next(v=>(m=v,o=Date.now(),this.removeOrphanedDocuments(e,u))).next(v=>(s=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-h}ms
	Determined least recently used ${d} in `+(a-c)+`ms
	Removed ${m} targets in `+(o-a)+`ms
	Removed ${v} documents in `+(s-o)+`ms
Total Duration: ${s-h}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:m,documentsRemoved:v})))}}function __PRIVATE_newLruGarbageCollector(t,e){return new __PRIVATE_LruGarbageCollectorImpl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const u=this.changes.get(r);return u!==void 0?PersistencePromise.resolve(u):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,r,u,d){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=u,this.indexManager=d}getDocument(e,r){let u=null;return this.documentOverlayCache.getOverlay(e,r).next(d=>(u=d,this.remoteDocumentCache.getEntry(e,r))).next(d=>(u!==null&&__PRIVATE_mutationApplyToLocalView(u.mutation,d,FieldMask.empty(),Timestamp.now()),d))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(u=>this.getLocalViewOfDocuments(e,u,__PRIVATE_documentKeySet()).next(()=>u))}getLocalViewOfDocuments(e,r,u=__PRIVATE_documentKeySet()){const d=__PRIVATE_newOverlayMap();return this.populateOverlays(e,d,r).next(()=>this.computeViews(e,r,d,u).next(m=>{let c=documentMap();return m.forEach((a,o)=>{c=c.insert(a,o.overlayedDocument)}),c}))}getOverlayedDocuments(e,r){const u=__PRIVATE_newOverlayMap();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,__PRIVATE_documentKeySet()))}populateOverlays(e,r,u){const d=[];return u.forEach(m=>{r.has(m)||d.push(m)}),this.documentOverlayCache.getOverlays(e,d).next(m=>{m.forEach((c,a)=>{r.set(c,a)})})}computeViews(e,r,u,d){let m=__PRIVATE_mutableDocumentMap();const c=__PRIVATE_newDocumentKeyMap(),a=function(){return __PRIVATE_newDocumentKeyMap()}();return r.forEach((o,s)=>{const h=u.get(s.key);d.has(s.key)&&(h===void 0||h.mutation instanceof __PRIVATE_PatchMutation)?m=m.insert(s.key,s):h!==void 0?(c.set(s.key,h.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(h.mutation,s,h.mutation.getFieldMask(),Timestamp.now())):c.set(s.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,m).next(o=>(o.forEach((s,h)=>c.set(s,h)),r.forEach((s,h)=>{var v;return a.set(s,new OverlayedDocument(h,(v=c.get(s))!==null&&v!==void 0?v:null))}),a))}recalculateAndSaveOverlays(e,r){const u=__PRIVATE_newDocumentKeyMap();let d=new SortedMap((c,a)=>c-a),m=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(c=>{for(const a of c)a.keys().forEach(o=>{const s=r.get(o);if(s===null)return;let h=u.get(o)||FieldMask.empty();h=a.applyToLocalView(s,h),u.set(o,h);const v=(d.get(a.batchId)||__PRIVATE_documentKeySet()).add(o);d=d.insert(a.batchId,v)})}).next(()=>{const c=[],a=d.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),s=o.key,h=o.value,v=__PRIVATE_newMutationMap();h.forEach(E=>{if(!m.has(E)){const y=__PRIVATE_calculateOverlayMutation(r.get(E),u.get(E));y!==null&&v.set(E,y),m=m.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,s,v))}return PersistencePromise.waitFor(c)}).next(()=>u)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(u=>this.recalculateAndSaveOverlays(e,u))}getDocumentsMatchingQuery(e,r,u,d){return function(c){return DocumentKey.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):__PRIVATE_isCollectionGroupQuery(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,u,d):this.getDocumentsMatchingCollectionQuery(e,r,u,d)}getNextDocuments(e,r,u,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,u,d).next(m=>{const c=d-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,u.largestBatchId,d-m.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let a=Q,o=m;return c.next(s=>PersistencePromise.forEach(s,(h,v)=>(a<v.largestBatchId&&(a=v.largestBatchId),m.get(h)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,h).next(E=>{o=o.insert(h,E)}))).next(()=>this.populateOverlays(e,s,m)).next(()=>this.computeViews(e,o,s,__PRIVATE_documentKeySet())).next(h=>({batchId:a,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new DocumentKey(r)).next(u=>{let d=documentMap();return u.isFoundDocument()&&(d=d.insert(u.key,u)),d})}getDocumentsMatchingCollectionGroupQuery(e,r,u,d){const m=r.collectionGroup;let c=documentMap();return this.indexManager.getCollectionParents(e,m).next(a=>PersistencePromise.forEach(a,o=>{const s=function(v,E){return new __PRIVATE_QueryImpl(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(r,o.child(m));return this.getDocumentsMatchingCollectionQuery(e,s,u,d).next(h=>{h.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,r,u,d){let m;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,u.largestBatchId).next(c=>(m=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,u,m,d))).next(c=>{m.forEach((o,s)=>{const h=s.getKey();c.get(h)===null&&(c=c.insert(h,MutableDocument.newInvalidDocument(h)))});let a=documentMap();return c.forEach((o,s)=>{const h=m.get(o);h!==void 0&&__PRIVATE_mutationApplyToLocalView(h.mutation,s,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(r,s)&&(a=a.insert(o,s))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,r){return PersistencePromise.resolve(this.Br.get(r))}saveBundleMetadata(e,r){return this.Br.set(r.id,function(d){return{id:d.id,version:d.version,createTime:__PRIVATE_fromVersion(d.createTime)}}(r)),PersistencePromise.resolve()}getNamedQuery(e,r){return PersistencePromise.resolve(this.Lr.get(r))}saveNamedQuery(e,r){return this.Lr.set(r.name,function(d){return{name:d.name,query:__PRIVATE_fromBundledQuery(d.bundledQuery),readTime:__PRIVATE_fromVersion(d.readTime)}}(r)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.kr=new Map}getOverlay(e,r){return PersistencePromise.resolve(this.overlays.get(r))}getOverlays(e,r){const u=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(r,d=>this.getOverlay(e,d).next(m=>{m!==null&&u.set(d,m)})).next(()=>u)}saveOverlays(e,r,u){return u.forEach((d,m)=>{this.wt(e,r,m)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,r,u){const d=this.kr.get(u);return d!==void 0&&(d.forEach(m=>this.overlays=this.overlays.remove(m)),this.kr.delete(u)),PersistencePromise.resolve()}getOverlaysForCollection(e,r,u){const d=__PRIVATE_newOverlayMap(),m=r.length+1,c=new DocumentKey(r.child("")),a=this.overlays.getIteratorFrom(c);for(;a.hasNext();){const o=a.getNext().value,s=o.getKey();if(!r.isPrefixOf(s.path))break;s.path.length===m&&o.largestBatchId>u&&d.set(o.getKey(),o)}return PersistencePromise.resolve(d)}getOverlaysForCollectionGroup(e,r,u,d){let m=new SortedMap((s,h)=>s-h);const c=this.overlays.getIterator();for(;c.hasNext();){const s=c.getNext().value;if(s.getKey().getCollectionGroup()===r&&s.largestBatchId>u){let h=m.get(s.largestBatchId);h===null&&(h=__PRIVATE_newOverlayMap(),m=m.insert(s.largestBatchId,h)),h.set(s.getKey(),s)}}const a=__PRIVATE_newOverlayMap(),o=m.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((s,h)=>a.set(s,h)),!(a.size()>=d)););return PersistencePromise.resolve(a)}wt(e,r,u){const d=this.overlays.get(u.key);if(d!==null){const c=this.kr.get(d.largestBatchId).delete(u.key);this.kr.set(d.largestBatchId,c)}this.overlays=this.overlays.insert(u.key,new Overlay(r,u));let m=this.kr.get(r);m===void 0&&(m=__PRIVATE_documentKeySet(),this.kr.set(r,m)),this.kr.set(r,m.add(u.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.qr=new SortedSet(__PRIVATE_DocReference.Qr),this.$r=new SortedSet(__PRIVATE_DocReference.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,r){const u=new __PRIVATE_DocReference(e,r);this.qr=this.qr.add(u),this.$r=this.$r.add(u)}Kr(e,r){e.forEach(u=>this.addReference(u,r))}removeReference(e,r){this.Wr(new __PRIVATE_DocReference(e,r))}Gr(e,r){e.forEach(u=>this.removeReference(u,r))}zr(e){const r=new DocumentKey(new ResourcePath([])),u=new __PRIVATE_DocReference(r,e),d=new __PRIVATE_DocReference(r,e+1),m=[];return this.$r.forEachInRange([u,d],c=>{this.Wr(c),m.push(c.key)}),m}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const r=new DocumentKey(new ResourcePath([])),u=new __PRIVATE_DocReference(r,e),d=new __PRIVATE_DocReference(r,e+1);let m=__PRIVATE_documentKeySet();return this.$r.forEachInRange([u,d],c=>{m=m.add(c.key)}),m}containsKey(e){const r=new __PRIVATE_DocReference(e,0),u=this.qr.firstAfterOrEqual(r);return u!==null&&e.isEqual(u.key)}}class __PRIVATE_DocReference{constructor(e,r){this.key=e,this.Hr=r}static Qr(e,r){return DocumentKey.comparator(e.key,r.key)||__PRIVATE_primitiveComparator(e.Hr,r.Hr)}static Ur(e,r){return __PRIVATE_primitiveComparator(e.Hr,r.Hr)||DocumentKey.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.er=1,this.Yr=new SortedSet(__PRIVATE_DocReference.Qr)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,u,d){const m=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new MutationBatch(m,r,u,d);this.mutationQueue.push(c);for(const a of d)this.Yr=this.Yr.add(new __PRIVATE_DocReference(a.key,m)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return PersistencePromise.resolve(c)}lookupMutationBatch(e,r){return PersistencePromise.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const u=r+1,d=this.Xr(u),m=d<0?0:d;return PersistencePromise.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G:this.er-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const u=new __PRIVATE_DocReference(r,0),d=new __PRIVATE_DocReference(r,Number.POSITIVE_INFINITY),m=[];return this.Yr.forEachInRange([u,d],c=>{const a=this.Zr(c.Hr);m.push(a)}),PersistencePromise.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,r){let u=new SortedSet(__PRIVATE_primitiveComparator);return r.forEach(d=>{const m=new __PRIVATE_DocReference(d,0),c=new __PRIVATE_DocReference(d,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([m,c],a=>{u=u.add(a.Hr)})}),PersistencePromise.resolve(this.ei(u))}getAllMutationBatchesAffectingQuery(e,r){const u=r.path,d=u.length+1;let m=u;DocumentKey.isDocumentKey(m)||(m=m.child(""));const c=new __PRIVATE_DocReference(new DocumentKey(m),0);let a=new SortedSet(__PRIVATE_primitiveComparator);return this.Yr.forEachWhile(o=>{const s=o.key.path;return!!u.isPrefixOf(s)&&(s.length===d&&(a=a.add(o.Hr)),!0)},c),PersistencePromise.resolve(this.ei(a))}ei(e){const r=[];return e.forEach(u=>{const d=this.Zr(u);d!==null&&r.push(d)}),r}removeMutationBatch(e,r){__PRIVATE_hardAssert(this.ti(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let u=this.Yr;return PersistencePromise.forEach(r.mutations,d=>{const m=new __PRIVATE_DocReference(d.key,r.batchId);return u=u.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Yr=u})}rr(e){}containsKey(e,r){const u=new __PRIVATE_DocReference(r,0),d=this.Yr.firstAfterOrEqual(u);return PersistencePromise.resolve(r.isEqual(d&&d.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ti(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ni=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const u=r.key,d=this.docs.get(u),m=d?d.size:0,c=this.ni(r);return this.docs=this.docs.insert(u,{document:r.mutableCopy(),size:c}),this.size+=c-m,this.indexManager.addToCollectionParentIndex(e,u.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const u=this.docs.get(r);return PersistencePromise.resolve(u?u.document.mutableCopy():MutableDocument.newInvalidDocument(r))}getEntries(e,r){let u=__PRIVATE_mutableDocumentMap();return r.forEach(d=>{const m=this.docs.get(d);u=u.insert(d,m?m.document.mutableCopy():MutableDocument.newInvalidDocument(d))}),PersistencePromise.resolve(u)}getDocumentsMatchingQuery(e,r,u,d){let m=__PRIVATE_mutableDocumentMap();const c=r.path,a=new DocumentKey(c.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:s,value:{document:h}}=o.getNext();if(!c.isPrefixOf(s.path))break;s.path.length>c.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(h),u)<=0||(d.has(h.key)||__PRIVATE_queryMatches(r,h))&&(m=m.insert(h.key,h.mutableCopy()))}return PersistencePromise.resolve(m)}getAllFromCollectionGroup(e,r,u,d){fail(9500)}ri(e,r){return PersistencePromise.forEach(this.docs,u=>r(u))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Or=e}applyChanges(e){const r=[];return this.changes.forEach((u,d)=>{d.isValidDocument()?r.push(this.Or.addEntry(e,d)):this.Or.removeEntry(u)}),PersistencePromise.waitFor(r)}getFromCache(e,r){return this.Or.getEntry(e,r)}getAllFromCache(e,r){return this.Or.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.ii=new ObjectMap(r=>__PRIVATE_canonifyTarget(r),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.si=0,this.oi=new __PRIVATE_ReferenceSet,this.targetCount=0,this._i=__PRIVATE_TargetIdGenerator.ar()}forEachTarget(e,r){return this.ii.forEach((u,d)=>r(d)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,r,u){return u&&(this.lastRemoteSnapshotVersion=u),r>this.si&&(this.si=r),PersistencePromise.resolve()}hr(e){this.ii.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this._i=new __PRIVATE_TargetIdGenerator(r),this.highestTargetId=r),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,r){return this.hr(r),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,r){return this.hr(r),PersistencePromise.resolve()}removeTargetData(e,r){return this.ii.delete(r.target),this.oi.zr(r.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,r,u){let d=0;const m=[];return this.ii.forEach((c,a)=>{a.sequenceNumber<=r&&u.get(a.targetId)===null&&(this.ii.delete(c),m.push(this.removeMatchingKeysForTargetId(e,a.targetId)),d++)}),PersistencePromise.waitFor(m).next(()=>d)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,r){const u=this.ii.get(r)||null;return PersistencePromise.resolve(u)}addMatchingKeys(e,r,u){return this.oi.Kr(r,u),PersistencePromise.resolve()}removeMatchingKeys(e,r,u){this.oi.Gr(r,u);const d=this.persistence.referenceDelegate,m=[];return d&&r.forEach(c=>{m.push(d.markPotentiallyOrphaned(e,c))}),PersistencePromise.waitFor(m)}removeMatchingKeysForTargetId(e,r){return this.oi.zr(r),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,r){const u=this.oi.Jr(r);return PersistencePromise.resolve(u)}containsKey(e,r){return PersistencePromise.resolve(this.oi.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,r){this.ai={},this.overlays={},this.ui=new __PRIVATE_ListenSequence(0),this.ci=!1,this.ci=!0,this.li=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.hi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(d){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(d)}(u=>this.referenceDelegate.Pi(u)),this.serializer=new __PRIVATE_LocalSerializer(r),this.Ti=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let u=this.ai[e.toKey()];return u||(u=new __PRIVATE_MemoryMutationQueue(r,this.referenceDelegate),this.ai[e.toKey()]=u),u}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,r,u){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const d=new __PRIVATE_MemoryTransaction(this.ui.next());return this.referenceDelegate.Ii(),u(d).next(m=>this.referenceDelegate.di(d).next(()=>m)).toPromise().then(m=>(d.raiseOnCommittedEvent(),m))}Ei(e,r){return PersistencePromise.or(Object.values(this.ai).map(u=>()=>u.containsKey(e,r)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ai=new __PRIVATE_ReferenceSet,this.Ri=null}static Vi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get mi(){if(this.Ri)return this.Ri;throw fail(60996)}addReference(e,r,u){return this.Ai.addReference(u,r),this.mi.delete(u.toString()),PersistencePromise.resolve()}removeReference(e,r,u){return this.Ai.removeReference(u,r),this.mi.add(u.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,r){return this.mi.add(r.toString()),PersistencePromise.resolve()}removeTarget(e,r){this.Ai.zr(r.targetId).forEach(d=>this.mi.add(d.toString()));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(e,r.targetId).next(d=>{d.forEach(m=>this.mi.add(m.toString()))}).next(()=>u.removeTargetData(e,r))}Ii(){this.Ri=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.mi,u=>{const d=DocumentKey.fromPath(u);return this.fi(e,d).next(m=>{m||r.removeEntry(d,SnapshotVersion.min())})}).next(()=>(this.Ri=null,r.apply(e)))}updateLimboDocument(e,r){return this.fi(e,r).next(u=>{u?this.mi.delete(r.toString()):this.mi.add(r.toString())})}Pi(e){return 0}fi(e,r){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ai.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,r){this.persistence=e,this.gi=new ObjectMap(u=>__PRIVATE_encodeResourcePath(u.path),(u,d)=>u.isEqual(d)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,r)}static Vi(e,r){return new __PRIVATE_MemoryLruDelegate(e,r)}Ii(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}mr(e){const r=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(u=>r.next(d=>u+d))}yr(e){let r=0;return this.gr(e,u=>{r++}).next(()=>r)}gr(e,r){return PersistencePromise.forEach(this.gi,(u,d)=>this.Sr(e,u,d).next(m=>m?PersistencePromise.resolve():r(d)))}removeTargets(e,r,u){return this.persistence.getTargetCache().removeTargets(e,r,u)}removeOrphanedDocuments(e,r){let u=0;const d=this.persistence.getRemoteDocumentCache(),m=d.newChangeBuffer();return d.ri(e,c=>this.Sr(e,c,r).next(a=>{a||(u++,m.removeEntry(c,SnapshotVersion.min()))})).next(()=>m.apply(e)).next(()=>u)}markPotentiallyOrphaned(e,r){return this.gi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,r){const u=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,u)}addReference(e,r,u){return this.gi.set(u,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,r,u){return this.gi.set(u,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,r){return this.gi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}Pi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=__PRIVATE_estimateByteSize(e.data.value)),r}Sr(e,r,u){return PersistencePromise.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const d=this.gi.get(r);return PersistencePromise.resolve(d!==void 0&&d>u)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,r,u,d){this.targetId=e,this.fromCache=r,this.Is=u,this.ds=d}static Es(e,r){let u=__PRIVATE_documentKeySet(),d=__PRIVATE_documentKeySet();for(const m of r.docChanges)switch(m.type){case 0:u=u.add(m.doc.key);break;case 1:d=d.add(m.doc.key)}return new __PRIVATE_LocalViewChanges(e,r.fromCache,u,d)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,r){this.gs=e,this.indexManager=r,this.As=!0}getDocumentsMatchingQuery(e,r,u,d){const m={result:null};return this.ps(e,r).next(c=>{m.result=c}).next(()=>{if(!m.result)return this.ys(e,r,d,u).next(c=>{m.result=c})}).next(()=>{if(m.result)return;const c=new QueryContext;return this.ws(e,r,c).next(a=>{if(m.result=a,this.Rs)return this.Ss(e,r,c,a.size)})}).next(()=>m.result)}Ss(e,r,u,d){return u.documentReadCount<this.Vs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(r),"scans",u.documentReadCount,"local documents and returns",d,"documents as results."),u.documentReadCount>this.fs*d?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(r))):PersistencePromise.resolve())}ps(e,r){if(__PRIVATE_queryMatchesAllDocuments(r))return PersistencePromise.resolve(null);let u=__PRIVATE_queryToTarget(r);return this.indexManager.getIndexType(e,u).next(d=>d===0?null:(r.limit!==null&&d===1&&(r=__PRIVATE_queryWithLimit(r,null,"F"),u=__PRIVATE_queryToTarget(r)),this.indexManager.getDocumentsMatchingTarget(e,u).next(m=>{const c=__PRIVATE_documentKeySet(...m);return this.gs.getDocuments(e,c).next(a=>this.indexManager.getMinOffset(e,u).next(o=>{const s=this.bs(r,a);return this.Ds(r,s,c,o.readTime)?this.ps(e,__PRIVATE_queryWithLimit(r,null,"F")):this.vs(e,s,r,o)}))})))}ys(e,r,u,d){return __PRIVATE_queryMatchesAllDocuments(r)||d.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.gs.getDocuments(e,u).next(m=>{const c=this.bs(r,m);return this.Ds(r,c,u,d)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),__PRIVATE_stringifyQuery(r)),this.vs(e,c,r,__PRIVATE_newIndexOffsetSuccessorFromReadTime(d,Q)).next(a=>a))})}bs(e,r){let u=new SortedSet(__PRIVATE_newQueryComparator(e));return r.forEach((d,m)=>{__PRIVATE_queryMatches(e,m)&&(u=u.add(m))}),u}Ds(e,r,u,d){if(e.limit===null)return!1;if(u.size!==r.size)return!0;const m=e.limitType==="F"?r.last():r.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(d)>0)}ws(e,r,u){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(r)),this.gs.getDocumentsMatchingQuery(e,r,IndexOffset.min(),u)}vs(e,r,u,d){return this.gs.getDocumentsMatchingQuery(e,u,d).next(m=>(r.forEach(c=>{m=m.insert(c.key,c)}),m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="LocalStore";class __PRIVATE_LocalStoreImpl{constructor(e,r,u,d){this.persistence=e,this.Cs=r,this.serializer=d,this.Fs=new SortedMap(__PRIVATE_primitiveComparator),this.Ms=new ObjectMap(m=>__PRIVATE_canonifyTarget(m),__PRIVATE_targetEquals),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(u)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Fs))}}function __PRIVATE_newLocalStore(t,e,r,u){return new __PRIVATE_LocalStoreImpl(t,e,r,u)}async function __PRIVATE_localStoreHandleUserChange(t,e){const r=__PRIVATE_debugCast(t);return await r.persistence.runTransaction("Handle user change","readonly",u=>{let d;return r.mutationQueue.getAllMutationBatches(u).next(m=>(d=m,r.Ns(e),r.mutationQueue.getAllMutationBatches(u))).next(m=>{const c=[],a=[];let o=__PRIVATE_documentKeySet();for(const s of d){c.push(s.batchId);for(const h of s.mutations)o=o.add(h.key)}for(const s of m){a.push(s.batchId);for(const h of s.mutations)o=o.add(h.key)}return r.localDocuments.getDocuments(u,o).next(s=>({Bs:s,removedBatchIds:c,addedBatchIds:a}))})})}function __PRIVATE_localStoreAcknowledgeBatch(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",u=>{const d=e.batch.keys(),m=r.Os.newChangeBuffer({trackRemovals:!0});return function(a,o,s,h){const v=s.batch,E=v.keys();let y=PersistencePromise.resolve();return E.forEach(A=>{y=y.next(()=>h.getEntry(o,A)).next(w=>{const I=s.docVersions.get(A);__PRIVATE_hardAssert(I!==null,48541),w.version.compareTo(I)<0&&(v.applyToRemoteDocument(w,s),w.isValidDocument()&&(w.setReadTime(s.commitVersion),h.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(o,v))}(r,u,e,m).next(()=>m.apply(u)).next(()=>r.mutationQueue.performConsistencyCheck(u)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(u,d,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,function(a){let o=__PRIVATE_documentKeySet();for(let s=0;s<a.mutationResults.length;++s)a.mutationResults[s].transformResults.length>0&&(o=o.add(a.batch.mutations[s].key));return o}(e))).next(()=>r.localDocuments.getDocuments(u,d))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(t){const e=__PRIVATE_debugCast(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.hi.getLastRemoteSnapshotVersion(r))}function __PRIVATE_localStoreGetNextMutationBatch(t,e){const r=__PRIVATE_debugCast(t);return r.persistence.runTransaction("Get next mutation batch","readonly",u=>(e===void 0&&(e=G),r.mutationQueue.getNextMutationBatchAfterBatchId(u,e)))}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Fo=new __PRIVATE_LocalClientState,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,u){}addLocalQueryTarget(e,r=!0){return r&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,r,u){this.Mo[e]=r}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,r,u){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){__PRIVATE_logDebug(zt,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){__PRIVATE_logDebug(zt,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt=null;function __PRIVATE_generateUniqueDebugId(){return jt===null?jt=function(){return 268435456+Math.round(2147483648*Math.random())}():jt++,"0x"+jt.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="RestConnection",Ht={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.$o=r+"://"+e.host,this.Uo=`projects/${u}/databases/${d}`,this.Ko=this.databaseId.database===ut?`project_id=${u}`:`project_id=${u}&database_id=${d}`}Wo(e,r,u,d,m){const c=__PRIVATE_generateUniqueDebugId(),a=this.Go(e,r.toUriEncodedString());__PRIVATE_logDebug(Jt,`Sending RPC '${e}' ${c}:`,a,u);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,d,m);const{host:s}=new URL(a),h=isCloudWorkstation(s);return this.jo(e,a,o,u,h).then(v=>(__PRIVATE_logDebug(Jt,`Received RPC '${e}' ${c}: `,v),v),v=>{throw __PRIVATE_logWarn(Jt,`RPC '${e}' ${c} failed with error: `,v,"url: ",a,"request:",u),v})}Jo(e,r,u,d,m,c){return this.Wo(e,r,u,d,m)}zo(e,r,u){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((d,m)=>e[m]=d),u&&u.headers.forEach((d,m)=>e[m]=d)}Go(e,r){const u=Ht[e];return`${this.$o}/v1/${r}:${u}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,r,u,d,m){const c=__PRIVATE_generateUniqueDebugId();return new Promise((a,o)=>{const s=new XhrIo;s.setWithCredentials(!0),s.listenOnce(EventType.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case ErrorCode.NO_ERROR:const v=s.getResponseJson();__PRIVATE_logDebug(Yt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),a(v);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Yt,`RPC '${e}' ${c} timed out`),o(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const E=s.getStatus();if(__PRIVATE_logDebug(Yt,`RPC '${e}' ${c} failed with status:`,E,"response text:",s.getResponseText()),E>0){let y=s.getResponseJson();Array.isArray(y)&&(y=y[0]);const A=y?.error;if(A&&A.status&&A.message){const w=function(_){const S=_.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(S)>=0?S:N.UNKNOWN}(A.status);o(new FirestoreError(w,A.message))}else o(new FirestoreError(N.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{c_:e,streamId:c,l_:s.getLastErrorCode(),h_:s.getLastError()})}}finally{__PRIVATE_logDebug(Yt,`RPC '${e}' ${c} completed.`)}});const h=JSON.stringify(d);__PRIVATE_logDebug(Yt,`RPC '${e}' ${c} sending request:`,d),s.send(r,"POST",h,u,15)})}P_(e,r,u){const d=__PRIVATE_generateUniqueDebugId(),m=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=createWebChannelTransport(),a=getStatEventTarget(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;s!==void 0&&(o.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,r,u),o.encodeInitMessageHeaders=!0;const h=m.join("");__PRIVATE_logDebug(Yt,`Creating RPC '${e}' stream ${d}: ${h}`,o);const v=c.createWebChannel(h,o);this.T_(v);let E=!1,y=!1;const A=new __PRIVATE_StreamBridge({Ho:I=>{y?__PRIVATE_logDebug(Yt,`Not sending because RPC '${e}' stream ${d} is closed:`,I):(E||(__PRIVATE_logDebug(Yt,`Opening RPC '${e}' stream ${d} transport.`),v.open(),E=!0),__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${d} sending:`,I),v.send(I))},Yo:()=>v.close()}),w=(I,_,S)=>{I.listen(_,j=>{try{S(j)}catch(K){setTimeout(()=>{throw K},0)}})};return w(v,WebChannel.EventType.OPEN,()=>{y||(__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${d} transport opened.`),A.s_())}),w(v,WebChannel.EventType.CLOSE,()=>{y||(y=!0,__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${d} transport closed`),A.__(),this.I_(v))}),w(v,WebChannel.EventType.ERROR,I=>{y||(y=!0,__PRIVATE_logWarn(Yt,`RPC '${e}' stream ${d} transport errored. Name:`,I.name,"Message:",I.message),A.__(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))}),w(v,WebChannel.EventType.MESSAGE,I=>{var _;if(!y){const S=I.data[0];__PRIVATE_hardAssert(!!S,16349);const j=S,K=j?.error||((_=j[0])===null||_===void 0?void 0:_.error);if(K){__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${d} received error:`,K);const J=K.status;let H=function(Z){const ie=ft[Z];if(ie!==void 0)return __PRIVATE_mapCodeFromRpcCode(ie)}(J),U=K.message;H===void 0&&(H=N.INTERNAL,U="Unknown error status: "+J+" with message "+K.message),y=!0,A.__(new FirestoreError(H,U)),v.close()}else __PRIVATE_logDebug(Yt,`RPC '${e}' stream ${d} received:`,S),A.a_(S)}}),w(a,Event.STAT_EVENT,I=>{I.stat===Stat.PROXY?__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${d} detected buffering proxy`):I.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(r=>r===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(t){return new JsonProtoSerializer(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,r,u=1e3,d=1.5,m=6e4){this.Fi=e,this.timerId=r,this.d_=u,this.E_=d,this.A_=m,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const r=Math.floor(this.R_+this.p_()),u=Math.max(0,Date.now()-this.m_),d=Math.max(0,r-u);d>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.R_} ms, delay with jitter: ${r} ms, last attempt: ${u} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,d,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,r,u,d,m,c,a,o){this.Fi=e,this.w_=u,this.S_=d,this.connection=m,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new __PRIVATE_ExponentialBackoff(e,r)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():r&&r.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(r.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):r&&r.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(r)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),r=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([u,d])=>{this.b_===r&&this.W_(u,d)},u=>{e(()=>{const d=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+u.message);return this.G_(d)})})}W_(e,r){const u=this.K_(this.b_);this.stream=this.z_(e,r),this.stream.Zo(()=>{u(()=>this.listener.Zo())}),this.stream.e_(()=>{u(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(d=>{u(()=>this.G_(d))}),this.stream.onMessage(d=>{u(()=>++this.C_==1?this.j_(d):this.onNext(d))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return __PRIVATE_logDebug(Zt,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return r=>{this.Fi.enqueueAndForget(()=>this.b_===e?r():(__PRIVATE_logDebug(Zt,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,r,u,d,m,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,u,d,c),this.serializer=m}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,r){return this.connection.P_("Write",e,r)}j_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const r=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),u=__PRIVATE_fromVersion(e.commitTime);return this.listener.ta(u,r)}na(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.k_(e)}X_(e){const r={streamToken:this.lastStreamToken,writes:e.map(u=>toMutation(this.serializer,u))};this.k_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,r,u,d){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=u,this.serializer=d,this.ra=!1}ia(){if(this.ra)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,u,d){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,c])=>this.connection.Wo(e,__PRIVATE_toResourcePath(r,u),d,m,c)).catch(m=>{throw m.name==="FirebaseError"?(m.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new FirestoreError(N.UNKNOWN,m.toString())})}Jo(e,r,u,d,m){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,a])=>this.connection.Jo(e,__PRIVATE_toResourcePath(r,u),d,c,a,m)).catch(c=>{throw c.name==="FirebaseError"?(c.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new FirestoreError(N.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(__PRIVATE_logError(r),this._a=!1):__PRIVATE_logDebug("OnlineStateTracker",r)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,r,u,d,m){this.localStore=e,this.datastore=r,this.asyncQueue=u,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=m,this.Ea.xo(c=>{u.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt,"Restarting streams for network reachability change."),await async function(o){const s=__PRIVATE_debugCast(o);s.Ia.add(4),await __PRIVATE_disableNetworkInternal(s),s.Aa.set("Unknown"),s.Ia.delete(4),await __PRIVATE_enableNetworkInternal(s)}(this))})}),this.Aa=new __PRIVATE_OnlineStateTracker(u,d)}}async function __PRIVATE_enableNetworkInternal(t){if(__PRIVATE_canUseNetwork(t))for(const e of t.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(t){for(const e of t.da)await e(!1)}function __PRIVATE_canUseNetwork(t){return __PRIVATE_debugCast(t).Ia.size===0}async function __PRIVATE_disableNetworkUntilRecovery(t,e,r){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;t.Ia.add(1),await __PRIVATE_disableNetworkInternal(t),t.Aa.set("Offline"),r||(r=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt,"Retrying IndexedDB access"),await r(),t.Ia.delete(1),await __PRIVATE_enableNetworkInternal(t)})}function __PRIVATE_executeWithRecovery(t,e){return e().catch(r=>__PRIVATE_disableNetworkUntilRecovery(t,r,e))}async function __PRIVATE_fillWritePipeline(t){const e=__PRIVATE_debugCast(t),r=__PRIVATE_ensureWriteStream(e);let u=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:G;for(;__PRIVATE_canAddToWritePipeline(e);)try{const d=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,u);if(d===null){e.Pa.length===0&&r.B_();break}u=d.batchId,__PRIVATE_addToWritePipeline(e,d)}catch(d){await __PRIVATE_disableNetworkUntilRecovery(e,d)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(t){return __PRIVATE_canUseNetwork(t)&&t.Pa.length<10}function __PRIVATE_addToWritePipeline(t,e){t.Pa.push(e);const r=__PRIVATE_ensureWriteStream(t);r.x_()&&r.Z_&&r.X_(e.mutations)}function __PRIVATE_shouldStartWriteStream(t){return __PRIVATE_canUseNetwork(t)&&!__PRIVATE_ensureWriteStream(t).M_()&&t.Pa.length>0}function __PRIVATE_startWriteStream(t){__PRIVATE_ensureWriteStream(t).start()}async function __PRIVATE_onWriteStreamOpen(t){__PRIVATE_ensureWriteStream(t).na()}async function __PRIVATE_onWriteHandshakeComplete(t){const e=__PRIVATE_ensureWriteStream(t);for(const r of t.Pa)e.X_(r.mutations)}async function __PRIVATE_onMutationResult(t,e,r){const u=t.Pa.shift(),d=MutationBatchResult.from(u,e,r);await __PRIVATE_executeWithRecovery(t,()=>t.remoteSyncer.applySuccessfulWrite(d)),await __PRIVATE_fillWritePipeline(t)}async function __PRIVATE_onWriteStreamClose(t,e){e&&__PRIVATE_ensureWriteStream(t).Z_&&await async function(u,d){if(function(c){return __PRIVATE_isPermanentError(c)&&c!==N.ABORTED}(d.code)){const m=u.Pa.shift();__PRIVATE_ensureWriteStream(u).N_(),await __PRIVATE_executeWithRecovery(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d)),await __PRIVATE_fillWritePipeline(u)}}(t,e),__PRIVATE_shouldStartWriteStream(t)&&__PRIVATE_startWriteStream(t)}async function __PRIVATE_remoteStoreHandleCredentialChange(t,e){const r=__PRIVATE_debugCast(t);r.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt,"RemoteStore received new credentials");const u=__PRIVATE_canUseNetwork(r);r.Ia.add(3),await __PRIVATE_disableNetworkInternal(r),u&&r.Aa.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ia.delete(3),await __PRIVATE_enableNetworkInternal(r)}async function __PRIVATE_remoteStoreApplyPrimaryState(t,e){const r=__PRIVATE_debugCast(t);e?(r.Ia.delete(2),await __PRIVATE_enableNetworkInternal(r)):e||(r.Ia.add(2),await __PRIVATE_disableNetworkInternal(r),r.Aa.set("Unknown"))}function __PRIVATE_ensureWriteStream(t){return t.ma||(t.ma=function(r,u,d){const m=__PRIVATE_debugCast(r);return m.ia(),new __PRIVATE_PersistentWriteStream(u,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,d)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:__PRIVATE_onWriteStreamOpen.bind(null,t),n_:__PRIVATE_onWriteStreamClose.bind(null,t),ea:__PRIVATE_onWriteHandshakeComplete.bind(null,t),ta:__PRIVATE_onMutationResult.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await __PRIVATE_fillWritePipeline(t)):(await t.ma.stop(),t.Pa.length>0&&(__PRIVATE_logDebug(Xt,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,r,u,d,m){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=u,this.op=d,this.removalCallback=m,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,u,d,m){const c=Date.now()+u,a=new DelayedOperation(e,r,c,d,m);return a.start(u),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(t,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${t}`),__PRIVATE_isIndexedDbTransactionError(t))return new FirestoreError(N.UNAVAILABLE,`${e}: ${t}`);throw t}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(r,u){const d=__PRIVATE_debugCast(r),m=d.queries;d.queries=__PRIVATE_newQueriesObjectMap(),m.forEach((c,a)=>{for(const o of a.wa)o.onError(u)})})(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(t=>__PRIVATE_canonifyQuery(t),__PRIVATE_queryEquals)}function __PRIVATE_raiseSnapshotsInSyncEvent(t){t.Da.forEach(e=>{e.next()})}var en,tn;(tn=en||(en={})).Fa="default",tn.Cache="cache";const nn="SyncEngine";class __PRIVATE_SyncEngineImpl{constructor(e,r,u,d,m,c){this.localStore=e,this.remoteStore=r,this.eventManager=u,this.sharedClientState=d,this.currentUser=m,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new ObjectMap(a=>__PRIVATE_canonifyQuery(a),__PRIVATE_queryEquals),this.Tu=new Map,this.Iu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.Au=new __PRIVATE_ReferenceSet,this.Ru={},this.Vu=new Map,this.mu=__PRIVATE_TargetIdGenerator.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function __PRIVATE_syncEngineWrite(t,e,r){const u=__PRIVATE_syncEngineEnsureWriteCallbacks(t);try{const d=await function(c,a){const o=__PRIVATE_debugCast(c),s=Timestamp.now(),h=a.reduce((y,A)=>y.add(A.key),__PRIVATE_documentKeySet());let v,E;return o.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=__PRIVATE_mutableDocumentMap(),w=__PRIVATE_documentKeySet();return o.Os.getEntries(y,h).next(I=>{A=I,A.forEach((_,S)=>{S.isValidDocument()||(w=w.add(_))})}).next(()=>o.localDocuments.getOverlayedDocuments(y,A)).next(I=>{v=I;const _=[];for(const S of a){const j=__PRIVATE_mutationExtractBaseValue(S,v.get(S.key).overlayedDocument);j!=null&&_.push(new __PRIVATE_PatchMutation(S.key,j,__PRIVATE_extractFieldMask(j.value.mapValue),Precondition.exists(!0)))}return o.mutationQueue.addMutationBatch(y,s,_,a)}).next(I=>{E=I;const _=I.applyToLocalDocumentSet(v,w);return o.documentOverlayCache.saveOverlays(y,I.batchId,_)})}).then(()=>({batchId:E.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(v)}))}(u.localStore,e);u.sharedClientState.addPendingMutation(d.batchId),function(c,a,o){let s=c.Ru[c.currentUser.toKey()];s||(s=new SortedMap(__PRIVATE_primitiveComparator)),s=s.insert(a,o),c.Ru[c.currentUser.toKey()]=s}(u,d.batchId,r),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(u,d.changes),await __PRIVATE_fillWritePipeline(u.remoteStore)}catch(d){const m=__PRIVATE_wrapInUserErrorIfRecoverable(d,"Failed to persist write");r.reject(m)}}function __PRIVATE_syncEngineApplyOnlineStateChange(t,e,r){const u=__PRIVATE_debugCast(t);if(u.isPrimaryClient&&r===0||!u.isPrimaryClient&&r===1){const d=[];u.Pu.forEach((m,c)=>{const a=c.view.va(e);a.snapshot&&d.push(a.snapshot)}),function(c,a){const o=__PRIVATE_debugCast(c);o.onlineState=a;let s=!1;o.queries.forEach((h,v)=>{for(const E of v.wa)E.va(a)&&(s=!0)}),s&&__PRIVATE_raiseSnapshotsInSyncEvent(o)}(u.eventManager,e),d.length&&u.hu.J_(d),u.onlineState=e,u.isPrimaryClient&&u.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineApplySuccessfulWrite(t,e){const r=__PRIVATE_debugCast(t),u=e.batch.batchId;try{const d=await __PRIVATE_localStoreAcknowledgeBatch(r.localStore,e);__PRIVATE_processUserCallback(r,u,null),__PRIVATE_triggerPendingWritesCallbacks(r,u),r.sharedClientState.updateMutationState(u,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,d)}catch(d){await __PRIVATE_ignoreIfPrimaryLeaseLoss(d)}}async function __PRIVATE_syncEngineRejectFailedWrite(t,e,r){const u=__PRIVATE_debugCast(t);try{const d=await function(c,a){const o=__PRIVATE_debugCast(c);return o.persistence.runTransaction("Reject batch","readwrite-primary",s=>{let h;return o.mutationQueue.lookupMutationBatch(s,a).next(v=>(__PRIVATE_hardAssert(v!==null,37113),h=v.keys(),o.mutationQueue.removeMutationBatch(s,v))).next(()=>o.mutationQueue.performConsistencyCheck(s)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(s,h,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,h)).next(()=>o.localDocuments.getDocuments(s,h))})}(u.localStore,e);__PRIVATE_processUserCallback(u,e,r),__PRIVATE_triggerPendingWritesCallbacks(u,e),u.sharedClientState.updateMutationState(e,"rejected",r),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(u,d)}catch(d){await __PRIVATE_ignoreIfPrimaryLeaseLoss(d)}}function __PRIVATE_triggerPendingWritesCallbacks(t,e){(t.Vu.get(e)||[]).forEach(r=>{r.resolve()}),t.Vu.delete(e)}function __PRIVATE_processUserCallback(t,e,r){const u=__PRIVATE_debugCast(t);let d=u.Ru[u.currentUser.toKey()];if(d){const m=d.get(e);m&&(r?m.reject(r):m.resolve(),d=d.remove(e)),u.Ru[u.currentUser.toKey()]=d}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,e,r){const u=__PRIVATE_debugCast(t),d=[],m=[],c=[];u.Pu.isEmpty()||(u.Pu.forEach((a,o)=>{c.push(u.gu(o,e,r).then(s=>{var h;if((s||r)&&u.isPrimaryClient){const v=s?!s.fromCache:(h=void 0)===null||h===void 0?void 0:h.current;u.sharedClientState.updateQueryState(o.targetId,v?"current":"not-current")}if(s){d.push(s);const v=__PRIVATE_LocalViewChanges.Es(o.targetId,s);m.push(v)}}))}),await Promise.all(c),u.hu.J_(d),await async function(o,s){const h=__PRIVATE_debugCast(o);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>PersistencePromise.forEach(s,E=>PersistencePromise.forEach(E.Is,y=>h.persistence.referenceDelegate.addReference(v,E.targetId,y)).next(()=>PersistencePromise.forEach(E.ds,y=>h.persistence.referenceDelegate.removeReference(v,E.targetId,y)))))}catch(v){if(!__PRIVATE_isIndexedDbTransactionError(v))throw v;__PRIVATE_logDebug(Qt,"Failed to update sequence numbers: "+v)}for(const v of s){const E=v.targetId;if(!v.fromCache){const y=h.Fs.get(E),A=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(A);h.Fs=h.Fs.insert(E,w)}}}(u.localStore,m))}async function __PRIVATE_syncEngineHandleCredentialChange(t,e){const r=__PRIVATE_debugCast(t);if(!r.currentUser.isEqual(e)){__PRIVATE_logDebug(nn,"User change. New user:",e.toKey());const u=await __PRIVATE_localStoreHandleUserChange(r.localStore,e);r.currentUser=e,function(m,c){m.Vu.forEach(a=>{a.forEach(o=>{o.reject(new FirestoreError(N.CANCELLED,c))})}),m.Vu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,u.removedBatchIds,u.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,u.Bs)}}function __PRIVATE_syncEngineEnsureWriteCallbacks(t){const e=__PRIVATE_debugCast(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,r){return null}Fu(e,r){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Du(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Vi,this.serializer)}bu(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,r){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const u=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(u,e.asyncQueue,r)}Du(e){const r=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(u=>__PRIVATE_MemoryLruDelegate.Vi(u,r),this.serializer)}}class OnlineComponentProvider{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=u=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,u,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const r=__PRIVATE_newSerializer(e.databaseInfo.databaseId),u=function(m){return new __PRIVATE_WebChannelConnection(m)}(e.databaseInfo);return function(m,c,a,o){return new __PRIVATE_DatastoreImpl(m,c,a,o)}(e.authCredentials,e.appCheckCredentials,u,r)}createRemoteStore(e){return function(u,d,m,c,a){return new __PRIVATE_RemoteStoreImpl(u,d,m,c,a)}(this.localStore,this.datastore,e.asyncQueue,r=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,r,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,r){return function(d,m,c,a,o,s,h){const v=new __PRIVATE_SyncEngineImpl(d,m,c,a,o,s);return h&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(d){const m=__PRIVATE_debugCast(d);__PRIVATE_logDebug(Xt,"RemoteStore shutting down."),m.Ia.add(5),await __PRIVATE_disableNetworkInternal(m),m.Ea.shutdown(),m.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(e,r,u,d,m){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=u,this.databaseInfo=d,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(u,async c=>{__PRIVATE_logDebug(rn,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(u,c=>(__PRIVATE_logDebug(rn,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const u=__PRIVATE_wrapInUserErrorIfRecoverable(r,"Failed to shutdown persistence");e.reject(u)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let u=r.initialUser;t.setCredentialChangeListener(async d=>{u.isEqual(d)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,d),u=d)}),e.persistence.setDatabaseDeletedListener(()=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{__PRIVATE_logDebug("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(d=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion failed",d)})}),t._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(t,e){t.asyncQueue.verifyOperationInProgress();const r=await __PRIVATE_ensureOfflineComponents(t);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(u=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,u)),t.setAppCheckTokenChangeListener((u,d)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,d)),t._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(d){return d.name==="FirebaseError"?d.code===N.FAILED_PRECONDITION||d.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||d.code===22||d.code===20||d.code===11}(r))throw r;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+r),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(t,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return t._offlineComponents}async function __PRIVATE_ensureOnlineComponents(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,t._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(t,new OnlineComponentProvider))),t._onlineComponents}function __PRIVATE_getSyncEngine(t){return __PRIVATE_ensureOnlineComponents(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(e){var r,u;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on,this.ssl=_n}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:_n;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((u=e.experimentalLongPollingOptions)!==null&&u!==void 0?u:{}),function(m){if(m.timeoutSeconds!==void 0){if(isNaN(m.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (must not be NaN)`);if(m.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (minimum allowed value is 5)`);if(m.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${m.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(u,d){return u.timeoutSeconds===d.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,r,u,d){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=u,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(u){if(!u)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(u.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(u.sessionIndex||"0",u.iamToken||null,u.authTokenFactory||null);case"provider":return u.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const u=sn.get(r);u&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(r),u.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,r,u){this.converter=r,this._query=u,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,r,u){this.converter=r,this._key=u,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,u){if(__PRIVATE_validateJSON(r,DocumentReference._jsonSchema))return new DocumentReference(e,u||null,new DocumentKey(ResourcePath.fromString(r.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,r,u){super(e,r,__PRIVATE_newQueryForPath(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(t,e,...r){if(t=getModularInstance(t),__PRIVATE_validateNonEmptyArgument("collection","path",e),t instanceof Firestore$1){const u=ResourcePath.fromString(e,...r);return __PRIVATE_validateCollectionPath(u),new CollectionReference(t,null,u)}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=t._path.child(ResourcePath.fromString(e,...r));return __PRIVATE_validateCollectionPath(u),new CollectionReference(t.firestore,null,u)}}function doc(t,e,...r){if(t=getModularInstance(t),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),t instanceof Firestore$1){const u=ResourcePath.fromString(e,...r);return __PRIVATE_validateDocumentPath(u),new DocumentReference(t,null,new DocumentKey(u))}{if(!(t instanceof DocumentReference||t instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=t._path.child(ResourcePath.fromString(e,...r));return __PRIVATE_validateDocumentPath(u),new DocumentReference(t.firestore,t instanceof CollectionReference?t.converter:null,new DocumentKey(u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.oc=()=>{const u=getDocument();u&&__PRIVATE_logDebug(an,"Visibility state changed to "+u.visibilityState),this.F_.y_()},this._c=e;const r=getDocument();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const r=getDocument();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const r=new __PRIVATE_Deferred;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const r=this._c.then(()=>(this.nc=!0,e().catch(u=>{throw this.tc=u,this.nc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(u)),u}).then(u=>(this.nc=!1,u))));return this._c=r,r}enqueueAfterDelay(e,r,u){this.ac(),this.sc.indexOf(e)>-1&&(r=0);const d=DelayedOperation.createAndSchedule(this,e,r,u,m=>this.lc(m));return this.ec.push(d),d}ac(){this.tc&&fail(47125,{hc:__PRIVATE_getMessageOrStack(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const r of this.ec)if(r.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((r,u)=>r.targetTimeMs-u.targetTimeMs);for(const r of this.ec)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const r=this.ec.indexOf(e);this.ec.splice(r,1)}}function __PRIVATE_getMessageOrStack(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Firestore extends Firestore$1{constructor(e,r,u,d){super(e,r,u,d),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=d?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function ensureFirestoreConfigured(t){if(t._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||__PRIVATE_configureFirestore(t),t._firestoreClient}function __PRIVATE_configureFirestore(t){var e,r,u;const d=t._freezeSettings(),m=function(a,o,s,h){return new DatabaseInfo(a,o,s,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,d);t._componentsProvider||!((r=d.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((u=d.localCache)===null||u===void 0)&&u._onlineComponentProvider)&&(t._componentsProvider={_offline:d.localCache._offlineComponentProvider,_online:d.localCache._onlineComponentProvider}),t._firestoreClient=new FirestoreClient(t._authCredentials,t._appCheckCredentials,t._queue,m,t._componentsProvider&&function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(r){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(u,d){if(u.length!==d.length)return!1;for(let m=0;m<u.length;++m)if(u[m]!==d[m])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new VectorValue(e.vectorValues);throw new FirestoreError(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=/^__.*__$/;class ParsedSetData{constructor(e,r,u){this.data=e,this.fieldMask=r,this.fieldTransforms=u}toMutation(e,r){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,r,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,r,this.fieldTransforms)}}function __PRIVATE_isWrite(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ec:t})}}class __PRIVATE_ParseContextImpl{constructor(e,r,u,d,m,c){this.settings=e,this.databaseId=r,this.serializer=u,this.ignoreUndefinedProperties=d,m===void 0&&this.Ac(),this.fieldTransforms=m||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var r;const u=(r=this.path)===null||r===void 0?void 0:r.child(e),d=this.Rc({path:u,mc:!1});return d.fc(e),d}gc(e){var r;const u=(r=this.path)===null||r===void 0?void 0:r.child(e),d=this.Rc({path:u,mc:!1});return d.Ac(),d}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ec)&&cn.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,r,u){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=u||__PRIVATE_newSerializer(e)}Dc(e,r,u,d=!1){return new __PRIVATE_ParseContextImpl({Ec:e,methodName:r,bc:u,path:FieldPath$1.emptyPath(),mc:!1,Sc:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(t){const e=t._freezeSettings(),r=__PRIVATE_newSerializer(t._databaseId);return new __PRIVATE_UserDataReader(t._databaseId,!!e.ignoreUndefinedProperties,r)}function __PRIVATE_parseSetData(t,e,r,u,d,m={}){const c=t.Dc(m.merge||m.mergeFields?2:0,e,r,d);__PRIVATE_validatePlainObject("Data must be an object, but it was:",c,u);const a=__PRIVATE_parseObject(u,c);let o,s;if(m.merge)o=new FieldMask(c.fieldMask),s=c.fieldTransforms;else if(m.mergeFields){const h=[];for(const v of m.mergeFields){const E=__PRIVATE_fieldPathFromArgument$1(e,v,r);if(!c.contains(E))throw new FirestoreError(N.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(h,E)||h.push(E)}o=new FieldMask(h),s=c.fieldTransforms.filter(v=>o.covers(v.field))}else o=null,s=c.fieldTransforms;return new ParsedSetData(new ObjectValue(a),o,s)}function __PRIVATE_parseData(t,e){if(__PRIVATE_looksLikeJsonObject(t=getModularInstance(t)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,t),__PRIVATE_parseObject(t,e);if(t instanceof FieldValue)return function(u,d){if(!__PRIVATE_isWrite(d.Ec))throw d.wc(`${u._methodName}() can only be used with update() and set()`);if(!d.path)throw d.wc(`${u._methodName}() is not currently supported inside arrays`);const m=u._toFieldTransform(d);m&&d.fieldTransforms.push(m)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(u,d){const m=[];let c=0;for(const a of u){let o=__PRIVATE_parseData(a,d.yc(c));o==null&&(o={nullValue:"NULL_VALUE"}),m.push(o),c++}return{arrayValue:{values:m}}}(t,e)}return function(u,d){if((u=getModularInstance(u))===null)return{nullValue:"NULL_VALUE"};if(typeof u=="number")return toNumber(d.serializer,u);if(typeof u=="boolean")return{booleanValue:u};if(typeof u=="string")return{stringValue:u};if(u instanceof Date){const m=Timestamp.fromDate(u);return{timestampValue:toTimestamp(d.serializer,m)}}if(u instanceof Timestamp){const m=new Timestamp(u.seconds,1e3*Math.floor(u.nanoseconds/1e3));return{timestampValue:toTimestamp(d.serializer,m)}}if(u instanceof GeoPoint)return{geoPointValue:{latitude:u.latitude,longitude:u.longitude}};if(u instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(d.serializer,u._byteString)};if(u instanceof DocumentReference){const m=d.databaseId,c=u.firestore._databaseId;if(!c.isEqual(m))throw d.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:__PRIVATE_toResourceName(u.firestore._databaseId||d.databaseId,u._key.path)}}if(u instanceof VectorValue)return function(c,a){return{mapValue:{fields:{[ct]:{stringValue:Pt},[Tt]:{arrayValue:{values:c.toArray().map(s=>{if(typeof s!="number")throw a.wc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(a.serializer,s)})}}}}}}(u,d);throw d.wc(`Unsupported field value: ${__PRIVATE_valueDescription(u)}`)}(t,e)}function __PRIVATE_parseObject(t,e){const r={};return isEmpty(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(t,(u,d)=>{const m=__PRIVATE_parseData(d,e.Vc(u));m!=null&&(r[u]=m)}),{mapValue:{fields:r}}}function __PRIVATE_looksLikeJsonObject(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Timestamp||t instanceof GeoPoint||t instanceof Bytes||t instanceof DocumentReference||t instanceof FieldValue||t instanceof VectorValue)}function __PRIVATE_validatePlainObject(t,e,r){if(!__PRIVATE_looksLikeJsonObject(r)||!__PRIVATE_isPlainObject(r)){const u=__PRIVATE_valueDescription(r);throw u==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+u)}}function __PRIVATE_fieldPathFromArgument$1(t,e,r){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(t,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",t,!1,void 0,r)}const ln=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(t,e,r){if(e.search(ln)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function __PRIVATE_createError(t,e,r,u,d){const m=u&&!u.isEmpty(),c=d!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(m||c)&&(o+=" (found",m&&(o+=` in field ${u}`),c&&(o+=` in document ${d}`),o+=")"),new FirestoreError(N.INVALID_ARGUMENT,a+t+o)}function __PRIVATE_fieldMaskContains(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,r,u,d,m){this._firestore=e,this._userDataWriter=r,this._key=u,this._document=d,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(t,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(t,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(t,e,r){let u;return u=t?t.toFirestore(e):e,u}class SnapshotMetadata{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,r,u,d,m,c){super(e,r,u,d,c),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const u=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(u!==null)return this._userDataWriter.convertValue(u,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=DocumentSnapshot._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,r,u,d){this._firestore=e,this._userDataWriter=r,this._snapshot=d,this.metadata=new SnapshotMetadata(d.hasPendingWrites,d.fromCache),this.query=u}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(u=>{e.call(r,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,u.key,u,new SnapshotMetadata(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(d,m){if(d._snapshot.oldDocs.isEmpty()){let c=0;return d._snapshot.docChanges.map(a=>{const o=new QueryDocumentSnapshot(d._firestore,d._userDataWriter,a.doc.key,a.doc,new SnapshotMetadata(d._snapshot.mutatedKeys.has(a.doc.key),d._snapshot.fromCache),d.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:c++}})}{let c=d._snapshot.oldDocs;return d._snapshot.docChanges.filter(a=>m||a.type!==3).map(a=>{const o=new QueryDocumentSnapshot(d._firestore,d._userDataWriter,a.doc.key,a.doc,new SnapshotMetadata(d._snapshot.mutatedKeys.has(a.doc.key),d._snapshot.fromCache),d.query.converter);let s=-1,h=-1;return a.type!==0&&(s=c.indexOf(a.doc.key),c=c.delete(a.doc.key)),a.type!==1&&(c=c.add(a.doc),h=c.indexOf(a.doc.key)),{type:__PRIVATE_resultChangeType(a.type),doc:o,oldIndex:s,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],u=[],d=[];return this.docs.forEach(m=>{m._document!==null&&(r.push(m._document),u.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),d.push(m.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:t})}}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};function addDoc(t,e){const r=__PRIVATE_cast(t.firestore,Firestore),u=doc(t),d=__PRIVATE_applyFirestoreDataConverter(t.converter,e);return executeWrite(r,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(t.firestore),"addDoc",u._key,d,t.converter!==null,{}).toMutation(u._key,Precondition.exists(!1))]).then(()=>u)}function executeWrite(t,e){return function(u,d){const m=new __PRIVATE_Deferred;return u.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(u),d,m)),m.promise}(ensureFirestoreConfigured(t),e)}(function t(e,r=!0){(function(d){x=d})(SDK_VERSION),_registerComponent(new Component("firestore",(u,{instanceIdentifier:d,options:m})=>{const c=u.getProvider("app").getImmediate(),a=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(u.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(c,u.getProvider("app-check-internal")),function(s,h){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(s.options.projectId,h)}(c,d),c);return m=Object.assign({useFetchStreams:r},m),a._setSettings(m),a},"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2017")})();db.collection("users");async function addDocument(t,e){try{const r=collection(db,t);return(await addDoc(r,e)).id}catch(r){throw console.error("Error aadiendo documento: ",r),r}}async function addUser(t){return await addDocument("users",t)}const Home=()=>{const t={uid:"123abc",email:"ejemplo@correo.com",displayName:"Usuario Ejemplo",role:"free",createdAt:new Date};return addUser(t).then(e=>console.log("Usuario aadido con id:",e)).catch(console.error),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{children:["Hola: ",t.displayName]})})};function App(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Routes,{children:jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})})}));
