function bC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function r0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ap={exports:{}},Dl={},lp={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function xC(){if(c_)return Ve;c_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function A(V,K,ce){this.props=V,this.context=K,this.refs=O,this.updater=ce||P}A.prototype.isReactComponent={},A.prototype.setState=function(V,K){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,K,"setState")},A.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function $(){}$.prototype=A.prototype;function Y(V,K,ce){this.props=V,this.context=K,this.refs=O,this.updater=ce||P}var Q=Y.prototype=new $;Q.constructor=Y,R(Q,A.prototype),Q.isPureReactComponent=!0;var ne=Array.isArray,de=Object.prototype.hasOwnProperty,ae={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(V,K,ce){var Ee,Re={},Ne=null,De=null;if(K!=null)for(Ee in K.ref!==void 0&&(De=K.ref),K.key!==void 0&&(Ne=""+K.key),K)de.call(K,Ee)&&!N.hasOwnProperty(Ee)&&(Re[Ee]=K[Ee]);var Oe=arguments.length-2;if(Oe===1)Re.children=ce;else if(1<Oe){for(var Fe=Array(Oe),lt=0;lt<Oe;lt++)Fe[lt]=arguments[lt+2];Re.children=Fe}if(V&&V.defaultProps)for(Ee in Oe=V.defaultProps,Oe)Re[Ee]===void 0&&(Re[Ee]=Oe[Ee]);return{$$typeof:n,type:V,key:Ne,ref:De,props:Re,_owner:ae.current}}function b(V,K){return{$$typeof:n,type:V.type,key:K,ref:V.ref,props:V.props,_owner:V._owner}}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function M(V){var K={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ce){return K[ce]})}var j=/\/+/g;function k(V,K){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):K.toString(36)}function je(V,K,ce,Ee,Re){var Ne=typeof V;(Ne==="undefined"||Ne==="boolean")&&(V=null);var De=!1;if(V===null)De=!0;else switch(Ne){case"string":case"number":De=!0;break;case"object":switch(V.$$typeof){case n:case e:De=!0}}if(De)return De=V,Re=Re(De),V=Ee===""?"."+k(De,0):Ee,ne(Re)?(ce="",V!=null&&(ce=V.replace(j,"$&/")+"/"),je(Re,K,ce,"",function(lt){return lt})):Re!=null&&(D(Re)&&(Re=b(Re,ce+(!Re.key||De&&De.key===Re.key?"":(""+Re.key).replace(j,"$&/")+"/")+V)),K.push(Re)),1;if(De=0,Ee=Ee===""?".":Ee+":",ne(V))for(var Oe=0;Oe<V.length;Oe++){Ne=V[Oe];var Fe=Ee+k(Ne,Oe);De+=je(Ne,K,ce,Fe,Re)}else if(Fe=T(V),typeof Fe=="function")for(V=Fe.call(V),Oe=0;!(Ne=V.next()).done;)Ne=Ne.value,Fe=Ee+k(Ne,Oe++),De+=je(Ne,K,ce,Fe,Re);else if(Ne==="object")throw K=String(V),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return De}function be(V,K,ce){if(V==null)return V;var Ee=[],Re=0;return je(V,Ee,"","",function(Ne){return K.call(ce,Ne,Re++)}),Ee}function Me(V){if(V._status===-1){var K=V._result;K=K(),K.then(function(ce){(V._status===0||V._status===-1)&&(V._status=1,V._result=ce)},function(ce){(V._status===0||V._status===-1)&&(V._status=2,V._result=ce)}),V._status===-1&&(V._status=0,V._result=K)}if(V._status===1)return V._result.default;throw V._result}var Ce={current:null},se={transition:null},ue={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:se,ReactCurrentOwner:ae};function re(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:be,forEach:function(V,K,ce){be(V,function(){K.apply(this,arguments)},ce)},count:function(V){var K=0;return be(V,function(){K++}),K},toArray:function(V){return be(V,function(K){return K})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ve.Component=A,Ve.Fragment=t,Ve.Profiler=s,Ve.PureComponent=Y,Ve.StrictMode=r,Ve.Suspense=f,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Ve.act=re,Ve.cloneElement=function(V,K,ce){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Ee=R({},V.props),Re=V.key,Ne=V.ref,De=V._owner;if(K!=null){if(K.ref!==void 0&&(Ne=K.ref,De=ae.current),K.key!==void 0&&(Re=""+K.key),V.type&&V.type.defaultProps)var Oe=V.type.defaultProps;for(Fe in K)de.call(K,Fe)&&!N.hasOwnProperty(Fe)&&(Ee[Fe]=K[Fe]===void 0&&Oe!==void 0?Oe[Fe]:K[Fe])}var Fe=arguments.length-2;if(Fe===1)Ee.children=ce;else if(1<Fe){Oe=Array(Fe);for(var lt=0;lt<Fe;lt++)Oe[lt]=arguments[lt+2];Ee.children=Oe}return{$$typeof:n,type:V.type,key:Re,ref:Ne,props:Ee,_owner:De}},Ve.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:a,_context:V},V.Consumer=V},Ve.createElement=I,Ve.createFactory=function(V){var K=I.bind(null,V);return K.type=V,K},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:d,render:V}},Ve.isValidElement=D,Ve.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:Me}},Ve.memo=function(V,K){return{$$typeof:m,type:V,compare:K===void 0?null:K}},Ve.startTransition=function(V){var K=se.transition;se.transition={};try{V()}finally{se.transition=K}},Ve.unstable_act=re,Ve.useCallback=function(V,K){return Ce.current.useCallback(V,K)},Ve.useContext=function(V){return Ce.current.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V){return Ce.current.useDeferredValue(V)},Ve.useEffect=function(V,K){return Ce.current.useEffect(V,K)},Ve.useId=function(){return Ce.current.useId()},Ve.useImperativeHandle=function(V,K,ce){return Ce.current.useImperativeHandle(V,K,ce)},Ve.useInsertionEffect=function(V,K){return Ce.current.useInsertionEffect(V,K)},Ve.useLayoutEffect=function(V,K){return Ce.current.useLayoutEffect(V,K)},Ve.useMemo=function(V,K){return Ce.current.useMemo(V,K)},Ve.useReducer=function(V,K,ce){return Ce.current.useReducer(V,K,ce)},Ve.useRef=function(V){return Ce.current.useRef(V)},Ve.useState=function(V){return Ce.current.useState(V)},Ve.useSyncExternalStore=function(V,K,ce){return Ce.current.useSyncExternalStore(V,K,ce)},Ve.useTransition=function(){return Ce.current.useTransition()},Ve.version="18.3.1",Ve}var h_;function Lm(){return h_||(h_=1,lp.exports=xC()),lp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function OC(){if(d_)return Dl;d_=1;var n=Lm(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var v,w={},T=null,P=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(P=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:T,ref:P,props:w,_owner:s.current}}return Dl.Fragment=t,Dl.jsx=u,Dl.jsxs=u,Dl}var f_;function NC(){return f_||(f_=1,ap.exports=OC()),ap.exports}var x=NC(),q=Lm();const $e=r0(q),DC=bC({__proto__:null,default:$e},[q]);var Bc={},up={exports:{}},Pn={},cp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function LC(){return p_||(p_=1,function(n){function e(se,ue){var re=se.length;se.push(ue);e:for(;0<re;){var V=re-1>>>1,K=se[V];if(0<s(K,ue))se[V]=ue,se[re]=K,re=V;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ue=se[0],re=se.pop();if(re!==ue){se[0]=re;e:for(var V=0,K=se.length,ce=K>>>1;V<ce;){var Ee=2*(V+1)-1,Re=se[Ee],Ne=Ee+1,De=se[Ne];if(0>s(Re,re))Ne<K&&0>s(De,Re)?(se[V]=De,se[Ne]=re,V=Ne):(se[V]=Re,se[Ee]=re,V=Ee);else if(Ne<K&&0>s(De,re))se[V]=De,se[Ne]=re,V=Ne;else break e}}return ue}function s(se,ue){var re=se.sortIndex-ue.sortIndex;return re!==0?re:se.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],v=1,w=null,T=3,P=!1,R=!1,O=!1,A=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(se){for(var ue=t(m);ue!==null;){if(ue.callback===null)r(m);else if(ue.startTime<=se)r(m),ue.sortIndex=ue.expirationTime,e(f,ue);else break;ue=t(m)}}function ne(se){if(O=!1,Q(se),!R)if(t(f)!==null)R=!0,Me(de);else{var ue=t(m);ue!==null&&Ce(ne,ue.startTime-se)}}function de(se,ue){R=!1,O&&(O=!1,$(I),I=-1),P=!0;var re=T;try{for(Q(ue),w=t(f);w!==null&&(!(w.expirationTime>ue)||se&&!M());){var V=w.callback;if(typeof V=="function"){w.callback=null,T=w.priorityLevel;var K=V(w.expirationTime<=ue);ue=n.unstable_now(),typeof K=="function"?w.callback=K:w===t(f)&&r(f),Q(ue)}else r(f);w=t(f)}if(w!==null)var ce=!0;else{var Ee=t(m);Ee!==null&&Ce(ne,Ee.startTime-ue),ce=!1}return ce}finally{w=null,T=re,P=!1}}var ae=!1,N=null,I=-1,b=5,D=-1;function M(){return!(n.unstable_now()-D<b)}function j(){if(N!==null){var se=n.unstable_now();D=se;var ue=!0;try{ue=N(!0,se)}finally{ue?k():(ae=!1,N=null)}}else ae=!1}var k;if(typeof Y=="function")k=function(){Y(j)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,be=je.port2;je.port1.onmessage=j,k=function(){be.postMessage(null)}}else k=function(){A(j,0)};function Me(se){N=se,ae||(ae=!0,k())}function Ce(se,ue){I=A(function(){se(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){R||P||(R=!0,Me(de))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(se){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var re=T;T=ue;try{return se()}finally{T=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ue){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var re=T;T=se;try{return ue()}finally{T=re}},n.unstable_scheduleCallback=function(se,ue,re){var V=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?V+re:V):re=V,se){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=re+K,se={id:v++,callback:ue,priorityLevel:se,startTime:re,expirationTime:K,sortIndex:-1},re>V?(se.sortIndex=re,e(m,se),t(f)===null&&se===t(m)&&(O?($(I),I=-1):O=!0,Ce(ne,re-V))):(se.sortIndex=K,e(f,se),R||P||(R=!0,Me(de))),se},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(se){var ue=T;return function(){var re=T;T=ue;try{return se.apply(this,arguments)}finally{T=re}}}}(hp)),hp}var m_;function VC(){return m_||(m_=1,cp.exports=LC()),cp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function MC(){if(g_)return Pn;g_=1;var n=Lm(),e=VC();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function T(i){return f.call(w,i)?!0:f.call(v,i)?!1:m.test(i)?w[i]=!0:(v[i]=!0,!1)}function P(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function R(i,o,l,h){if(o===null||typeof o>"u"||P(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function O(i,o,l,h,p,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new O(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];A[o]=new O(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new O(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new O(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new O(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new O(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new O(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new O(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new O(i,5,!1,i.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Y(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace($,Y);A[o]=new O(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace($,Y);A[o]=new O(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace($,Y);A[o]=new O(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new O(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new O(i,1,!1,i.toLowerCase(),null,!0,!0)});function Q(i,o,l,h){var p=A.hasOwnProperty(o)?A[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(R(o,l,p,h)&&(l=null),h||p===null?T(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,de=Symbol.for("react.element"),ae=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),M=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),se=Symbol.iterator;function ue(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var re=Object.assign,V;function K(i){if(V===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);V=o&&o[1]||""}return`
`+V+i}var ce=!1;function Ee(i,o){if(!i||ce)return"";ce=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(W){var h=W}Reflect.construct(i,[],o)}else{try{o.call()}catch(W){h=W}i.call(o.prototype)}else{try{throw Error()}catch(W){h=W}i()}}catch(W){if(W&&h&&typeof W.stack=="string"){for(var p=W.stack.split(`
`),y=h.stack.split(`
`),E=p.length-1,C=y.length-1;1<=E&&0<=C&&p[E]!==y[C];)C--;for(;1<=E&&0<=C;E--,C--)if(p[E]!==y[C]){if(E!==1||C!==1)do if(E--,C--,0>C||p[E]!==y[C]){var L=`
`+p[E].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=E&&0<=C);break}}}finally{ce=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?K(i):""}function Re(i){switch(i.tag){case 5:return K(i.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return i=Ee(i.type,!1),i;case 11:return i=Ee(i.type.render,!1),i;case 1:return i=Ee(i.type,!0),i;default:return""}}function Ne(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case ae:return"Portal";case b:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case je:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case D:return(i._context.displayName||"Context")+".Provider";case j:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case be:return o=i.displayName||null,o!==null?o:Ne(i.type)||"Memo";case Me:o=i._payload,i=i._init;try{return Ne(i(o))}catch{}}return null}function De(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(o);case 8:return o===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Oe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Fe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function lt(i){var o=Fe(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){h=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function tn(i){i._valueTracker||(i._valueTracker=lt(i))}function ut(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Fe(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function _n(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Xe(i,o){var l=o.checked;return re({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Qn(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=Oe(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function jt(i,o){o=o.checked,o!=null&&Q(i,"checked",o,!1)}function Lr(i,o){jt(i,o);var l=Oe(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?ai(i,o.type,l):o.hasOwnProperty("defaultValue")&&ai(i,o.type,Oe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Gs(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function ai(i,o,l){(o!=="number"||_n(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var ur=Array.isArray;function cr(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Oe(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function Ks(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function li(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(ur(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Oe(l)}}function zi(i,o){var l=Oe(o.value),h=Oe(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function Qs(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Tt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Tt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var hr,ui=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(hr=hr||document.createElement("div"),hr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=hr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function dr(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ci=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(i){ci.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Vr[o]=Vr[i]})});function Mr(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||Vr.hasOwnProperty(i)&&Vr[i]?(""+o).trim():o+"px"}function $i(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Mr(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Ys=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wi(i,o){if(o){if(Ys[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function qi(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fr=null;function Hi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var hi=null,wn=null,Vn=null;function It(i){if(i=_l(i)){if(typeof hi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=nc(o),hi(i.stateNode,i.type,o))}}function rt(i){wn?Vn?Vn.push(i):Vn=[i]:wn=i}function Fr(){if(wn){var i=wn,o=Vn;if(Vn=wn=null,It(i),o)for(i=0;i<o.length;i++)It(o[i])}}function Qe(i,o){return i(o)}function nn(){}var pr=!1;function di(i,o,l){if(pr)return i(o,l);pr=!0;try{return Qe(i,o,l)}finally{pr=!1,(wn!==null||Vn!==null)&&(nn(),Fr())}}function ct(i,o){var l=i.stateNode;if(l===null)return null;var h=nc(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var fi=!1;if(d)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){fi=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{fi=!1}function Yn(i,o,l,h,p,y,E,C,L){var W=Array.prototype.slice.call(arguments,3);try{o.apply(l,W)}catch(ee){this.onError(ee)}}var mr=!1,jr=null,pn=!1,Js=null,Xs={onError:function(i){mr=!0,jr=i}};function pi(i,o,l,h,p,y,E,C,L){mr=!1,jr=null,Yn.apply(Xs,arguments)}function $o(i,o,l,h,p,y,E,C,L){if(pi.apply(this,arguments),mr){if(mr){var W=jr;mr=!1,jr=null}else throw Error(t(198));pn||(pn=!0,Js=W)}}function Mn(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function Pe(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function We(i){if(Mn(i)!==i)throw Error(t(188))}function it(i){var o=i.alternate;if(!o){if(o=Mn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return We(p),i;if(y===h)return We(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var E=!1,C=p.child;C;){if(C===l){E=!0,l=p,h=y;break}if(C===h){E=!0,h=p,l=y;break}C=C.sibling}if(!E){for(C=y.child;C;){if(C===l){E=!0,l=y,h=p;break}if(C===h){E=!0,h=y,l=p;break}C=C.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function Ht(i){return i=it(i),i!==null?Ut(i):null}function Ut(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ut(i);if(o!==null)return o;i=i.sibling}return null}var Ur=e.unstable_scheduleCallback,Zs=e.unstable_cancelCallback,Wo=e.unstable_shouldYield,Ld=e.unstable_requestPaint,et=e.unstable_now,bu=e.unstable_getCurrentPriorityLevel,eo=e.unstable_ImmediatePriority,Gi=e.unstable_UserBlockingPriority,Jn=e.unstable_NormalPriority,nl=e.unstable_LowPriority,xu=e.unstable_IdlePriority,to=null,Fn=null;function Ou(i){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(to,i,void 0,(i.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:Du,rl=Math.log,Nu=Math.LN2;function Du(i){return i>>>=0,i===0?32:31-(rl(i)/Nu|0)|0}var qo=64,Ho=4194304;function Ki(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function no(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,E=l&268435455;if(E!==0){var C=E&~p;C!==0?h=Ki(C):(y&=E,y!==0&&(h=Ki(y)))}else E=l&~p,E!==0?h=Ki(E):y!==0&&(h=Ki(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-mn(o),p=1<<l,h|=i[l],o&=~p;return h}function Vd(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mi(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-mn(y),C=1<<E,L=p[E];L===-1?((C&l)===0||(C&h)!==0)&&(p[E]=Vd(C,o)):L<=o&&(i.expiredLanes|=C),y&=~C}}function jn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ro(){var i=qo;return qo<<=1,(qo&4194240)===0&&(qo=64),i}function Qi(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function Yi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-mn(o),i[o]=l}function Ze(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-mn(l),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function Ji(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-mn(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var ze=0;function Xi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Lu,Go,Vu,Mu,Fu,il=!1,Br=[],Gt=null,gr=null,yr=null,Zi=new Map,Xn=new Map,zr=[],Md="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ju(i,o){switch(i){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Zi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(o.pointerId)}}function En(i,o,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=_l(o),o!==null&&Go(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Fd(i,o,l,h,p){switch(o){case"focusin":return Gt=En(Gt,i,o,l,h,p),!0;case"dragenter":return gr=En(gr,i,o,l,h,p),!0;case"mouseover":return yr=En(yr,i,o,l,h,p),!0;case"pointerover":var y=p.pointerId;return Zi.set(y,En(Zi.get(y)||null,i,o,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Xn.set(y,En(Xn.get(y)||null,i,o,l,h,p)),!0}return!1}function Uu(i){var o=lo(i.target);if(o!==null){var l=Mn(o);if(l!==null){if(o=l.tag,o===13){if(o=Pe(l),o!==null){i.blockedOn=o,Fu(i.priority,function(){Vu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function gi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Ko(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);fr=h,l.target.dispatchEvent(h),fr=null}else return o=_l(l),o!==null&&Go(o),i.blockedOn=l,!1;o.shift()}return!0}function io(i,o,l){gi(i)&&l.delete(o)}function Bu(){il=!1,Gt!==null&&gi(Gt)&&(Gt=null),gr!==null&&gi(gr)&&(gr=null),yr!==null&&gi(yr)&&(yr=null),Zi.forEach(io),Xn.forEach(io)}function vr(i,o){i.blockedOn===o&&(i.blockedOn=null,il||(il=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bu)))}function _r(i){function o(p){return vr(p,i)}if(0<Br.length){vr(Br[0],i);for(var l=1;l<Br.length;l++){var h=Br[l];h.blockedOn===i&&(h.blockedOn=null)}}for(Gt!==null&&vr(Gt,i),gr!==null&&vr(gr,i),yr!==null&&vr(yr,i),Zi.forEach(o),Xn.forEach(o),l=0;l<zr.length;l++)h=zr[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<zr.length&&(l=zr[0],l.blockedOn===null);)Uu(l),l.blockedOn===null&&zr.shift()}var yi=ne.ReactCurrentBatchConfig,es=!0;function ht(i,o,l,h){var p=ze,y=yi.transition;yi.transition=null;try{ze=1,sl(i,o,l,h)}finally{ze=p,yi.transition=y}}function jd(i,o,l,h){var p=ze,y=yi.transition;yi.transition=null;try{ze=4,sl(i,o,l,h)}finally{ze=p,yi.transition=y}}function sl(i,o,l,h){if(es){var p=Ko(i,o,l,h);if(p===null)Yd(i,o,h,so,l),ju(i,h);else if(Fd(p,i,o,l,h))h.stopPropagation();else if(ju(i,h),o&4&&-1<Md.indexOf(i)){for(;p!==null;){var y=_l(p);if(y!==null&&Lu(y),y=Ko(i,o,l,h),y===null&&Yd(i,o,h,so,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Yd(i,o,h,null,l)}}var so=null;function Ko(i,o,l,h){if(so=null,i=Hi(h),i=lo(i),i!==null)if(o=Mn(i),o===null)i=null;else if(l=o.tag,l===13){if(i=Pe(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return so=i,null}function ol(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bu()){case eo:return 1;case Gi:return 4;case Jn:case nl:return 16;case xu:return 536870912;default:return 16}default:return 16}}var Un=null,Qo=null,Tn=null;function al(){if(Tn)return Tn;var i,o=Qo,l=o.length,h,p="value"in Un?Un.value:Un.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var E=l-i;for(h=1;h<=E&&o[l-h]===p[y-h];h++);return Tn=p.slice(i,1<h?1-h:void 0)}function Yo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function $r(){return!0}function ll(){return!1}function Kt(i){function o(l,h,p,y,E){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?$r:ll,this.isPropagationStopped=ll,this}return re(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),o}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jo=Kt(wr),Wr=re({},wr,{view:0,detail:0}),Ud=Kt(Wr),Xo,vi,ts,oo=re({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ts&&(ts&&i.type==="mousemove"?(Xo=i.screenX-ts.screenX,vi=i.screenY-ts.screenY):vi=Xo=0,ts=i),Xo)},movementY:function(i){return"movementY"in i?i.movementY:vi}}),Zo=Kt(oo),ul=re({},oo,{dataTransfer:0}),zu=Kt(ul),ea=re({},Wr,{relatedTarget:0}),ta=Kt(ea),$u=re({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),_i=Kt($u),Wu=re({},wr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),qu=Kt(Wu),Hu=re({},wr,{data:0}),cl=Kt(Hu),na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Gu[i])?!!o[i]:!1}function qr(){return Ku}var c=re({},Wr,{key:function(i){if(i.key){var o=na[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Yo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(i){return i.type==="keypress"?Yo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Yo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Kt(c),_=re({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Kt(_),U=re({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),H=Kt(U),oe=re({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Kt(oe),Lt=re({},oo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Kt(Lt),Bt=[9,13,27,32],Pt=d&&"CompositionEvent"in window,Zn=null;d&&"documentMode"in document&&(Zn=document.documentMode);var Bn=d&&"TextEvent"in window&&!Zn,ao=d&&(!Pt||Zn&&8<Zn&&11>=Zn),ra=" ",iy=!1;function sy(i,o){switch(i){case"keyup":return Bt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ia=!1;function RA(i,o){switch(i){case"compositionend":return oy(o);case"keypress":return o.which!==32?null:(iy=!0,ra);case"textInput":return i=o.data,i===ra&&iy?null:i;default:return null}}function PA(i,o){if(ia)return i==="compositionend"||!Pt&&sy(i,o)?(i=al(),Tn=Qo=Un=null,ia=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ao&&o.locale!=="ko"?null:o.data;default:return null}}var kA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!kA[i.type]:o==="textarea"}function ly(i,o,l,h){rt(h),o=Zu(o,"onChange"),0<o.length&&(l=new Jo("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var hl=null,dl=null;function bA(i){Cy(i,0)}function Qu(i){var o=ua(i);if(ut(o))return i}function xA(i,o){if(i==="change")return o}var uy=!1;if(d){var Bd;if(d){var zd="oninput"in document;if(!zd){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),zd=typeof cy.oninput=="function"}Bd=zd}else Bd=!1;uy=Bd&&(!document.documentMode||9<document.documentMode)}function hy(){hl&&(hl.detachEvent("onpropertychange",dy),dl=hl=null)}function dy(i){if(i.propertyName==="value"&&Qu(dl)){var o=[];ly(o,dl,i,Hi(i)),di(bA,o)}}function OA(i,o,l){i==="focusin"?(hy(),hl=o,dl=l,hl.attachEvent("onpropertychange",dy)):i==="focusout"&&hy()}function NA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qu(dl)}function DA(i,o){if(i==="click")return Qu(o)}function LA(i,o){if(i==="input"||i==="change")return Qu(o)}function VA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Er=typeof Object.is=="function"?Object.is:VA;function fl(i,o){if(Er(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!Er(i[p],o[p]))return!1}return!0}function fy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function py(i,o){var l=fy(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=fy(l)}}function my(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?my(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function gy(){for(var i=window,o=_n();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=_n(i.document)}return o}function $d(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function MA(i){var o=gy(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&my(l.ownerDocument.documentElement,l)){if(h!==null&&$d(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=py(l,y);var E=py(l,h);p&&E&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var FA=d&&"documentMode"in document&&11>=document.documentMode,sa=null,Wd=null,pl=null,qd=!1;function yy(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;qd||sa==null||sa!==_n(h)||(h=sa,"selectionStart"in h&&$d(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),pl&&fl(pl,h)||(pl=h,h=Zu(Wd,"onSelect"),0<h.length&&(o=new Jo("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=sa)))}function Yu(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var oa={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionend:Yu("Transition","TransitionEnd")},Hd={},vy={};d&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function Ju(i){if(Hd[i])return Hd[i];if(!oa[i])return i;var o=oa[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in vy)return Hd[i]=o[l];return i}var _y=Ju("animationend"),wy=Ju("animationiteration"),Ey=Ju("animationstart"),Ty=Ju("transitionend"),Sy=new Map,Iy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(i,o){Sy.set(i,o),a(o,[i])}for(var Gd=0;Gd<Iy.length;Gd++){var Kd=Iy[Gd],jA=Kd.toLowerCase(),UA=Kd[0].toUpperCase()+Kd.slice(1);ns(jA,"on"+UA)}ns(_y,"onAnimationEnd"),ns(wy,"onAnimationIteration"),ns(Ey,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(Ty,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("cancel close invalid load scroll toggle".split(" ").concat(ml));function Ay(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,$o(h,o,void 0,i),i.currentTarget=null}function Cy(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var E=h.length-1;0<=E;E--){var C=h[E],L=C.instance,W=C.currentTarget;if(C=C.listener,L!==y&&p.isPropagationStopped())break e;Ay(p,C,W),y=L}else for(E=0;E<h.length;E++){if(C=h[E],L=C.instance,W=C.currentTarget,C=C.listener,L!==y&&p.isPropagationStopped())break e;Ay(p,C,W),y=L}}}if(pn)throw i=Js,pn=!1,Js=null,i}function st(i,o){var l=o[nf];l===void 0&&(l=o[nf]=new Set);var h=i+"__bubble";l.has(h)||(Ry(o,i,2,!1),l.add(h))}function Qd(i,o,l){var h=0;o&&(h|=4),Ry(l,i,h,o)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function gl(i){if(!i[Xu]){i[Xu]=!0,r.forEach(function(l){l!=="selectionchange"&&(BA.has(l)||Qd(l,!1,i),Qd(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Xu]||(o[Xu]=!0,Qd("selectionchange",!1,o))}}function Ry(i,o,l,h){switch(ol(o)){case 1:var p=ht;break;case 4:p=jd;break;default:p=sl}l=p.bind(null,o,l,i),p=void 0,!fi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Yd(i,o,l,h,p){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var C=h.stateNode.containerInfo;if(C===p||C.nodeType===8&&C.parentNode===p)break;if(E===4)for(E=h.return;E!==null;){var L=E.tag;if((L===3||L===4)&&(L=E.stateNode.containerInfo,L===p||L.nodeType===8&&L.parentNode===p))return;E=E.return}for(;C!==null;){if(E=lo(C),E===null)return;if(L=E.tag,L===5||L===6){h=y=E;continue e}C=C.parentNode}}h=h.return}di(function(){var W=y,ee=Hi(l),te=[];e:{var Z=Sy.get(i);if(Z!==void 0){var he=Jo,me=i;switch(i){case"keypress":if(Yo(l)===0)break e;case"keydown":case"keyup":he=g;break;case"focusin":me="focus",he=ta;break;case"focusout":me="blur",he=ta;break;case"beforeblur":case"afterblur":he=ta;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=H;break;case _y:case wy:case Ey:he=_i;break;case Ty:he=Je;break;case"scroll":he=Ud;break;case"wheel":he=qe;break;case"copy":case"cut":case"paste":he=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=S}var ge=(o&4)!==0,At=!ge&&i==="scroll",B=ge?Z!==null?Z+"Capture":null:Z;ge=[];for(var F=W,z;F!==null;){z=F;var ie=z.stateNode;if(z.tag===5&&ie!==null&&(z=ie,B!==null&&(ie=ct(F,B),ie!=null&&ge.push(yl(F,ie,z)))),At)break;F=F.return}0<ge.length&&(Z=new he(Z,me,null,l,ee),te.push({event:Z,listeners:ge}))}}if((o&7)===0){e:{if(Z=i==="mouseover"||i==="pointerover",he=i==="mouseout"||i==="pointerout",Z&&l!==fr&&(me=l.relatedTarget||l.fromElement)&&(lo(me)||me[wi]))break e;if((he||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,he?(me=l.relatedTarget||l.toElement,he=W,me=me?lo(me):null,me!==null&&(At=Mn(me),me!==At||me.tag!==5&&me.tag!==6)&&(me=null)):(he=null,me=W),he!==me)){if(ge=Zo,ie="onMouseLeave",B="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(ge=S,ie="onPointerLeave",B="onPointerEnter",F="pointer"),At=he==null?Z:ua(he),z=me==null?Z:ua(me),Z=new ge(ie,F+"leave",he,l,ee),Z.target=At,Z.relatedTarget=z,ie=null,lo(ee)===W&&(ge=new ge(B,F+"enter",me,l,ee),ge.target=z,ge.relatedTarget=At,ie=ge),At=ie,he&&me)t:{for(ge=he,B=me,F=0,z=ge;z;z=aa(z))F++;for(z=0,ie=B;ie;ie=aa(ie))z++;for(;0<F-z;)ge=aa(ge),F--;for(;0<z-F;)B=aa(B),z--;for(;F--;){if(ge===B||B!==null&&ge===B.alternate)break t;ge=aa(ge),B=aa(B)}ge=null}else ge=null;he!==null&&Py(te,Z,he,ge,!1),me!==null&&At!==null&&Py(te,At,me,ge,!0)}}e:{if(Z=W?ua(W):window,he=Z.nodeName&&Z.nodeName.toLowerCase(),he==="select"||he==="input"&&Z.type==="file")var ye=xA;else if(ay(Z))if(uy)ye=LA;else{ye=NA;var _e=OA}else(he=Z.nodeName)&&he.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ye=DA);if(ye&&(ye=ye(i,W))){ly(te,ye,l,ee);break e}_e&&_e(i,Z,W),i==="focusout"&&(_e=Z._wrapperState)&&_e.controlled&&Z.type==="number"&&ai(Z,"number",Z.value)}switch(_e=W?ua(W):window,i){case"focusin":(ay(_e)||_e.contentEditable==="true")&&(sa=_e,Wd=W,pl=null);break;case"focusout":pl=Wd=sa=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,yy(te,l,ee);break;case"selectionchange":if(FA)break;case"keydown":case"keyup":yy(te,l,ee)}var we;if(Pt)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else ia?sy(i,l)&&(Ie="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ie="onCompositionStart");Ie&&(ao&&l.locale!=="ko"&&(ia||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&ia&&(we=al()):(Un=ee,Qo="value"in Un?Un.value:Un.textContent,ia=!0)),_e=Zu(W,Ie),0<_e.length&&(Ie=new cl(Ie,i,null,l,ee),te.push({event:Ie,listeners:_e}),we?Ie.data=we:(we=oy(l),we!==null&&(Ie.data=we)))),(we=Bn?RA(i,l):PA(i,l))&&(W=Zu(W,"onBeforeInput"),0<W.length&&(ee=new cl("onBeforeInput","beforeinput",null,l,ee),te.push({event:ee,listeners:W}),ee.data=we))}Cy(te,o)})}function yl(i,o,l){return{instance:i,listener:o,currentTarget:l}}function Zu(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ct(i,l),y!=null&&h.unshift(yl(i,y,p)),y=ct(i,o),y!=null&&h.push(yl(i,y,p))),i=i.return}return h}function aa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Py(i,o,l,h,p){for(var y=o._reactName,E=[];l!==null&&l!==h;){var C=l,L=C.alternate,W=C.stateNode;if(L!==null&&L===h)break;C.tag===5&&W!==null&&(C=W,p?(L=ct(l,y),L!=null&&E.unshift(yl(l,L,C))):p||(L=ct(l,y),L!=null&&E.push(yl(l,L,C)))),l=l.return}E.length!==0&&i.push({event:o,listeners:E})}var zA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function ky(i){return(typeof i=="string"?i:""+i).replace(zA,`
`).replace($A,"")}function ec(i,o,l){if(o=ky(o),ky(i)!==o&&l)throw Error(t(425))}function tc(){}var Jd=null,Xd=null;function Zd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,by=typeof Promise=="function"?Promise:void 0,qA=typeof queueMicrotask=="function"?queueMicrotask:typeof by<"u"?function(i){return by.resolve(null).then(i).catch(HA)}:ef;function HA(i){setTimeout(function(){throw i})}function tf(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),_r(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);_r(o)}function rs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function xy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var la=Math.random().toString(36).slice(2),Hr="__reactFiber$"+la,vl="__reactProps$"+la,wi="__reactContainer$"+la,nf="__reactEvents$"+la,GA="__reactListeners$"+la,KA="__reactHandles$"+la;function lo(i){var o=i[Hr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[wi]||l[Hr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=xy(i);i!==null;){if(l=i[Hr])return l;i=xy(i)}return o}i=l,l=i.parentNode}return null}function _l(i){return i=i[Hr]||i[wi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ua(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function nc(i){return i[vl]||null}var rf=[],ca=-1;function is(i){return{current:i}}function ot(i){0>ca||(i.current=rf[ca],rf[ca]=null,ca--)}function tt(i,o){ca++,rf[ca]=i.current,i.current=o}var ss={},rn=is(ss),Sn=is(!1),uo=ss;function ha(i,o){var l=i.type.contextTypes;if(!l)return ss;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function In(i){return i=i.childContextTypes,i!=null}function rc(){ot(Sn),ot(rn)}function Oy(i,o,l){if(rn.current!==ss)throw Error(t(168));tt(rn,o),tt(Sn,l)}function Ny(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,De(i)||"Unknown",p));return re({},l,h)}function ic(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ss,uo=rn.current,tt(rn,i),tt(Sn,Sn.current),!0}function Dy(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=Ny(i,o,uo),h.__reactInternalMemoizedMergedChildContext=i,ot(Sn),ot(rn),tt(rn,i)):ot(Sn),tt(Sn,l)}var Ei=null,sc=!1,sf=!1;function Ly(i){Ei===null?Ei=[i]:Ei.push(i)}function QA(i){sc=!0,Ly(i)}function os(){if(!sf&&Ei!==null){sf=!0;var i=0,o=ze;try{var l=Ei;for(ze=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}Ei=null,sc=!1}catch(p){throw Ei!==null&&(Ei=Ei.slice(i+1)),Ur(eo,os),p}finally{ze=o,sf=!1}}return null}var da=[],fa=0,oc=null,ac=0,er=[],tr=0,co=null,Ti=1,Si="";function ho(i,o){da[fa++]=ac,da[fa++]=oc,oc=i,ac=o}function Vy(i,o,l){er[tr++]=Ti,er[tr++]=Si,er[tr++]=co,co=i;var h=Ti;i=Si;var p=32-mn(h)-1;h&=~(1<<p),l+=1;var y=32-mn(o)+p;if(30<y){var E=p-p%5;y=(h&(1<<E)-1).toString(32),h>>=E,p-=E,Ti=1<<32-mn(o)+p|l<<p|h,Si=y+i}else Ti=1<<y|l<<p|h,Si=i}function of(i){i.return!==null&&(ho(i,1),Vy(i,1,0))}function af(i){for(;i===oc;)oc=da[--fa],da[fa]=null,ac=da[--fa],da[fa]=null;for(;i===co;)co=er[--tr],er[tr]=null,Si=er[--tr],er[tr]=null,Ti=er[--tr],er[tr]=null}var zn=null,$n=null,dt=!1,Tr=null;function My(i,o){var l=sr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function Fy(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,zn=i,$n=rs(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,zn=i,$n=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=co!==null?{id:Ti,overflow:Si}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=sr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,zn=i,$n=null,!0):!1;default:return!1}}function lf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function uf(i){if(dt){var o=$n;if(o){var l=o;if(!Fy(i,o)){if(lf(i))throw Error(t(418));o=rs(l.nextSibling);var h=zn;o&&Fy(i,o)?My(h,l):(i.flags=i.flags&-4097|2,dt=!1,zn=i)}}else{if(lf(i))throw Error(t(418));i.flags=i.flags&-4097|2,dt=!1,zn=i}}}function jy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;zn=i}function lc(i){if(i!==zn)return!1;if(!dt)return jy(i),dt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Zd(i.type,i.memoizedProps)),o&&(o=$n)){if(lf(i))throw Uy(),Error(t(418));for(;o;)My(i,o),o=rs(o.nextSibling)}if(jy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){$n=rs(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}$n=null}}else $n=zn?rs(i.stateNode.nextSibling):null;return!0}function Uy(){for(var i=$n;i;)i=rs(i.nextSibling)}function pa(){$n=zn=null,dt=!1}function cf(i){Tr===null?Tr=[i]:Tr.push(i)}var YA=ne.ReactCurrentBatchConfig;function wl(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var C=p.refs;E===null?delete C[y]:C[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function uc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function By(i){var o=i._init;return o(i._payload)}function zy(i){function o(B,F){if(i){var z=B.deletions;z===null?(B.deletions=[F],B.flags|=16):z.push(F)}}function l(B,F){if(!i)return null;for(;F!==null;)o(B,F),F=F.sibling;return null}function h(B,F){for(B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function p(B,F){return B=ps(B,F),B.index=0,B.sibling=null,B}function y(B,F,z){return B.index=z,i?(z=B.alternate,z!==null?(z=z.index,z<F?(B.flags|=2,F):z):(B.flags|=2,F)):(B.flags|=1048576,F)}function E(B){return i&&B.alternate===null&&(B.flags|=2),B}function C(B,F,z,ie){return F===null||F.tag!==6?(F=tp(z,B.mode,ie),F.return=B,F):(F=p(F,z),F.return=B,F)}function L(B,F,z,ie){var ye=z.type;return ye===N?ee(B,F,z.props.children,ie,z.key):F!==null&&(F.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Me&&By(ye)===F.type)?(ie=p(F,z.props),ie.ref=wl(B,F,z),ie.return=B,ie):(ie=Nc(z.type,z.key,z.props,null,B.mode,ie),ie.ref=wl(B,F,z),ie.return=B,ie)}function W(B,F,z,ie){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=np(z,B.mode,ie),F.return=B,F):(F=p(F,z.children||[]),F.return=B,F)}function ee(B,F,z,ie,ye){return F===null||F.tag!==7?(F=wo(z,B.mode,ie,ye),F.return=B,F):(F=p(F,z),F.return=B,F)}function te(B,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return F=tp(""+F,B.mode,z),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case de:return z=Nc(F.type,F.key,F.props,null,B.mode,z),z.ref=wl(B,null,F),z.return=B,z;case ae:return F=np(F,B.mode,z),F.return=B,F;case Me:var ie=F._init;return te(B,ie(F._payload),z)}if(ur(F)||ue(F))return F=wo(F,B.mode,z,null),F.return=B,F;uc(B,F)}return null}function Z(B,F,z,ie){var ye=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ye!==null?null:C(B,F,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case de:return z.key===ye?L(B,F,z,ie):null;case ae:return z.key===ye?W(B,F,z,ie):null;case Me:return ye=z._init,Z(B,F,ye(z._payload),ie)}if(ur(z)||ue(z))return ye!==null?null:ee(B,F,z,ie,null);uc(B,z)}return null}function he(B,F,z,ie,ye){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return B=B.get(z)||null,C(F,B,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case de:return B=B.get(ie.key===null?z:ie.key)||null,L(F,B,ie,ye);case ae:return B=B.get(ie.key===null?z:ie.key)||null,W(F,B,ie,ye);case Me:var _e=ie._init;return he(B,F,z,_e(ie._payload),ye)}if(ur(ie)||ue(ie))return B=B.get(z)||null,ee(F,B,ie,ye,null);uc(F,ie)}return null}function me(B,F,z,ie){for(var ye=null,_e=null,we=F,Ie=F=0,Wt=null;we!==null&&Ie<z.length;Ie++){we.index>Ie?(Wt=we,we=null):Wt=we.sibling;var Ke=Z(B,we,z[Ie],ie);if(Ke===null){we===null&&(we=Wt);break}i&&we&&Ke.alternate===null&&o(B,we),F=y(Ke,F,Ie),_e===null?ye=Ke:_e.sibling=Ke,_e=Ke,we=Wt}if(Ie===z.length)return l(B,we),dt&&ho(B,Ie),ye;if(we===null){for(;Ie<z.length;Ie++)we=te(B,z[Ie],ie),we!==null&&(F=y(we,F,Ie),_e===null?ye=we:_e.sibling=we,_e=we);return dt&&ho(B,Ie),ye}for(we=h(B,we);Ie<z.length;Ie++)Wt=he(we,B,Ie,z[Ie],ie),Wt!==null&&(i&&Wt.alternate!==null&&we.delete(Wt.key===null?Ie:Wt.key),F=y(Wt,F,Ie),_e===null?ye=Wt:_e.sibling=Wt,_e=Wt);return i&&we.forEach(function(ms){return o(B,ms)}),dt&&ho(B,Ie),ye}function ge(B,F,z,ie){var ye=ue(z);if(typeof ye!="function")throw Error(t(150));if(z=ye.call(z),z==null)throw Error(t(151));for(var _e=ye=null,we=F,Ie=F=0,Wt=null,Ke=z.next();we!==null&&!Ke.done;Ie++,Ke=z.next()){we.index>Ie?(Wt=we,we=null):Wt=we.sibling;var ms=Z(B,we,Ke.value,ie);if(ms===null){we===null&&(we=Wt);break}i&&we&&ms.alternate===null&&o(B,we),F=y(ms,F,Ie),_e===null?ye=ms:_e.sibling=ms,_e=ms,we=Wt}if(Ke.done)return l(B,we),dt&&ho(B,Ie),ye;if(we===null){for(;!Ke.done;Ie++,Ke=z.next())Ke=te(B,Ke.value,ie),Ke!==null&&(F=y(Ke,F,Ie),_e===null?ye=Ke:_e.sibling=Ke,_e=Ke);return dt&&ho(B,Ie),ye}for(we=h(B,we);!Ke.done;Ie++,Ke=z.next())Ke=he(we,B,Ie,Ke.value,ie),Ke!==null&&(i&&Ke.alternate!==null&&we.delete(Ke.key===null?Ie:Ke.key),F=y(Ke,F,Ie),_e===null?ye=Ke:_e.sibling=Ke,_e=Ke);return i&&we.forEach(function(kC){return o(B,kC)}),dt&&ho(B,Ie),ye}function At(B,F,z,ie){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case de:e:{for(var ye=z.key,_e=F;_e!==null;){if(_e.key===ye){if(ye=z.type,ye===N){if(_e.tag===7){l(B,_e.sibling),F=p(_e,z.props.children),F.return=B,B=F;break e}}else if(_e.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Me&&By(ye)===_e.type){l(B,_e.sibling),F=p(_e,z.props),F.ref=wl(B,_e,z),F.return=B,B=F;break e}l(B,_e);break}else o(B,_e);_e=_e.sibling}z.type===N?(F=wo(z.props.children,B.mode,ie,z.key),F.return=B,B=F):(ie=Nc(z.type,z.key,z.props,null,B.mode,ie),ie.ref=wl(B,F,z),ie.return=B,B=ie)}return E(B);case ae:e:{for(_e=z.key;F!==null;){if(F.key===_e)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(B,F.sibling),F=p(F,z.children||[]),F.return=B,B=F;break e}else{l(B,F);break}else o(B,F);F=F.sibling}F=np(z,B.mode,ie),F.return=B,B=F}return E(B);case Me:return _e=z._init,At(B,F,_e(z._payload),ie)}if(ur(z))return me(B,F,z,ie);if(ue(z))return ge(B,F,z,ie);uc(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,F!==null&&F.tag===6?(l(B,F.sibling),F=p(F,z),F.return=B,B=F):(l(B,F),F=tp(z,B.mode,ie),F.return=B,B=F),E(B)):l(B,F)}return At}var ma=zy(!0),$y=zy(!1),cc=is(null),hc=null,ga=null,hf=null;function df(){hf=ga=hc=null}function ff(i){var o=cc.current;ot(cc),i._currentValue=o}function pf(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function ya(i,o){hc=i,hf=ga=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(An=!0),i.firstContext=null)}function nr(i){var o=i._currentValue;if(hf!==i)if(i={context:i,memoizedValue:o,next:null},ga===null){if(hc===null)throw Error(t(308));ga=i,hc.dependencies={lanes:0,firstContext:i}}else ga=ga.next=i;return o}var fo=null;function mf(i){fo===null?fo=[i]:fo.push(i)}function Wy(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,mf(o)):(l.next=p.next,p.next=l),o.interleaved=l,Ii(i,h)}function Ii(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var as=!1;function gf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qy(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ai(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ls(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Ge&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,Ii(i,l)}return p=h.interleaved,p===null?(o.next=o,mf(h)):(o.next=p.next,p.next=o),h.interleaved=o,Ii(i,l)}function dc(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Ji(i,l)}}function Hy(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function fc(i,o,l,h){var p=i.updateQueue;as=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var L=C,W=L.next;L.next=null,E===null?y=W:E.next=W,E=L;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==E&&(C===null?ee.firstBaseUpdate=W:C.next=W,ee.lastBaseUpdate=L))}if(y!==null){var te=p.baseState;E=0,ee=W=L=null,C=y;do{var Z=C.lane,he=C.eventTime;if((h&Z)===Z){ee!==null&&(ee=ee.next={eventTime:he,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var me=i,ge=C;switch(Z=o,he=l,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){te=me.call(he,te,Z);break e}te=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,Z=typeof me=="function"?me.call(he,te,Z):me,Z==null)break e;te=re({},te,Z);break e;case 2:as=!0}}C.callback!==null&&C.lane!==0&&(i.flags|=64,Z=p.effects,Z===null?p.effects=[C]:Z.push(C))}else he={eventTime:he,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?(W=ee=he,L=te):ee=ee.next=he,E|=Z;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,p.lastBaseUpdate=Z,p.shared.pending=null}}while(!0);if(ee===null&&(L=te),p.baseState=L,p.firstBaseUpdate=W,p.lastBaseUpdate=ee,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);go|=E,i.lanes=E,i.memoizedState=te}}function Gy(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var El={},Gr=is(El),Tl=is(El),Sl=is(El);function po(i){if(i===El)throw Error(t(174));return i}function yf(i,o){switch(tt(Sl,o),tt(Tl,i),tt(Gr,El),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:St(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=St(o,i)}ot(Gr),tt(Gr,o)}function va(){ot(Gr),ot(Tl),ot(Sl)}function Ky(i){po(Sl.current);var o=po(Gr.current),l=St(o,i.type);o!==l&&(tt(Tl,i),tt(Gr,l))}function vf(i){Tl.current===i&&(ot(Gr),ot(Tl))}var pt=is(0);function pc(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var _f=[];function wf(){for(var i=0;i<_f.length;i++)_f[i]._workInProgressVersionPrimary=null;_f.length=0}var mc=ne.ReactCurrentDispatcher,Ef=ne.ReactCurrentBatchConfig,mo=0,mt=null,Vt=null,zt=null,gc=!1,Il=!1,Al=0,JA=0;function sn(){throw Error(t(321))}function Tf(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Er(i[l],o[l]))return!1;return!0}function Sf(i,o,l,h,p,y){if(mo=y,mt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,mc.current=i===null||i.memoizedState===null?tC:nC,i=l(h,p),Il){y=0;do{if(Il=!1,Al=0,25<=y)throw Error(t(301));y+=1,zt=Vt=null,o.updateQueue=null,mc.current=rC,i=l(h,p)}while(Il)}if(mc.current=_c,o=Vt!==null&&Vt.next!==null,mo=0,zt=Vt=mt=null,gc=!1,o)throw Error(t(300));return i}function If(){var i=Al!==0;return Al=0,i}function Kr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?mt.memoizedState=zt=i:zt=zt.next=i,zt}function rr(){if(Vt===null){var i=mt.alternate;i=i!==null?i.memoizedState:null}else i=Vt.next;var o=zt===null?mt.memoizedState:zt.next;if(o!==null)zt=o,Vt=i;else{if(i===null)throw Error(t(310));Vt=i,i={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},zt===null?mt.memoizedState=zt=i:zt=zt.next=i}return zt}function Cl(i,o){return typeof o=="function"?o(i):o}function Af(i){var o=rr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Vt,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var C=E=null,L=null,W=y;do{var ee=W.lane;if((mo&ee)===ee)L!==null&&(L=L.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),h=W.hasEagerState?W.eagerState:i(h,W.action);else{var te={lane:ee,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};L===null?(C=L=te,E=h):L=L.next=te,mt.lanes|=ee,go|=ee}W=W.next}while(W!==null&&W!==y);L===null?E=h:L.next=C,Er(h,o.memoizedState)||(An=!0),o.memoizedState=h,o.baseState=E,o.baseQueue=L,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,mt.lanes|=y,go|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function Cf(i){var o=rr(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=i(y,E.action),E=E.next;while(E!==p);Er(y,o.memoizedState)||(An=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function Qy(){}function Yy(i,o){var l=mt,h=rr(),p=o(),y=!Er(h.memoizedState,p);if(y&&(h.memoizedState=p,An=!0),h=h.queue,Rf(Zy.bind(null,l,h,i),[i]),h.getSnapshot!==o||y||zt!==null&&zt.memoizedState.tag&1){if(l.flags|=2048,Rl(9,Xy.bind(null,l,h,p,o),void 0,null),$t===null)throw Error(t(349));(mo&30)!==0||Jy(l,o,p)}return p}function Jy(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=mt.updateQueue,o===null?(o={lastEffect:null,stores:null},mt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Xy(i,o,l,h){o.value=l,o.getSnapshot=h,ev(o)&&tv(i)}function Zy(i,o,l){return l(function(){ev(o)&&tv(i)})}function ev(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Er(i,l)}catch{return!0}}function tv(i){var o=Ii(i,1);o!==null&&Cr(o,i,1,-1)}function nv(i){var o=Kr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:i},o.queue=i,i=i.dispatch=eC.bind(null,mt,i),[o.memoizedState,i]}function Rl(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=mt.updateQueue,o===null?(o={lastEffect:null,stores:null},mt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function rv(){return rr().memoizedState}function yc(i,o,l,h){var p=Kr();mt.flags|=i,p.memoizedState=Rl(1|o,l,void 0,h===void 0?null:h)}function vc(i,o,l,h){var p=rr();h=h===void 0?null:h;var y=void 0;if(Vt!==null){var E=Vt.memoizedState;if(y=E.destroy,h!==null&&Tf(h,E.deps)){p.memoizedState=Rl(o,l,y,h);return}}mt.flags|=i,p.memoizedState=Rl(1|o,l,y,h)}function iv(i,o){return yc(8390656,8,i,o)}function Rf(i,o){return vc(2048,8,i,o)}function sv(i,o){return vc(4,2,i,o)}function ov(i,o){return vc(4,4,i,o)}function av(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function lv(i,o,l){return l=l!=null?l.concat([i]):null,vc(4,4,av.bind(null,o,i),l)}function Pf(){}function uv(i,o){var l=rr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&Tf(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function cv(i,o){var l=rr();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&Tf(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function hv(i,o,l){return(mo&21)===0?(i.baseState&&(i.baseState=!1,An=!0),i.memoizedState=l):(Er(l,o)||(l=ro(),mt.lanes|=l,go|=l,i.baseState=!0),o)}function XA(i,o){var l=ze;ze=l!==0&&4>l?l:4,i(!0);var h=Ef.transition;Ef.transition={};try{i(!1),o()}finally{ze=l,Ef.transition=h}}function dv(){return rr().memoizedState}function ZA(i,o,l){var h=ds(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},fv(i))pv(o,l);else if(l=Wy(i,o,l,h),l!==null){var p=vn();Cr(l,i,h,p),mv(l,o,h)}}function eC(i,o,l){var h=ds(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(fv(i))pv(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,C=y(E,l);if(p.hasEagerState=!0,p.eagerState=C,Er(C,E)){var L=o.interleaved;L===null?(p.next=p,mf(o)):(p.next=L.next,L.next=p),o.interleaved=p;return}}catch{}finally{}l=Wy(i,o,p,h),l!==null&&(p=vn(),Cr(l,i,h,p),mv(l,o,h))}}function fv(i){var o=i.alternate;return i===mt||o!==null&&o===mt}function pv(i,o){Il=gc=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function mv(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Ji(i,l)}}var _c={readContext:nr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},tC={readContext:nr,useCallback:function(i,o){return Kr().memoizedState=[i,o===void 0?null:o],i},useContext:nr,useEffect:iv,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,yc(4194308,4,av.bind(null,o,i),l)},useLayoutEffect:function(i,o){return yc(4194308,4,i,o)},useInsertionEffect:function(i,o){return yc(4,2,i,o)},useMemo:function(i,o){var l=Kr();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=Kr();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=ZA.bind(null,mt,i),[h.memoizedState,i]},useRef:function(i){var o=Kr();return i={current:i},o.memoizedState=i},useState:nv,useDebugValue:Pf,useDeferredValue:function(i){return Kr().memoizedState=i},useTransition:function(){var i=nv(!1),o=i[0];return i=XA.bind(null,i[1]),Kr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=mt,p=Kr();if(dt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),$t===null)throw Error(t(349));(mo&30)!==0||Jy(h,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,iv(Zy.bind(null,h,y,i),[i]),h.flags|=2048,Rl(9,Xy.bind(null,h,y,l,o),void 0,null),l},useId:function(){var i=Kr(),o=$t.identifierPrefix;if(dt){var l=Si,h=Ti;l=(h&~(1<<32-mn(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=Al++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=JA++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},nC={readContext:nr,useCallback:uv,useContext:nr,useEffect:Rf,useImperativeHandle:lv,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:cv,useReducer:Af,useRef:rv,useState:function(){return Af(Cl)},useDebugValue:Pf,useDeferredValue:function(i){var o=rr();return hv(o,Vt.memoizedState,i)},useTransition:function(){var i=Af(Cl)[0],o=rr().memoizedState;return[i,o]},useMutableSource:Qy,useSyncExternalStore:Yy,useId:dv,unstable_isNewReconciler:!1},rC={readContext:nr,useCallback:uv,useContext:nr,useEffect:Rf,useImperativeHandle:lv,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:cv,useReducer:Cf,useRef:rv,useState:function(){return Cf(Cl)},useDebugValue:Pf,useDeferredValue:function(i){var o=rr();return Vt===null?o.memoizedState=i:hv(o,Vt.memoizedState,i)},useTransition:function(){var i=Cf(Cl)[0],o=rr().memoizedState;return[i,o]},useMutableSource:Qy,useSyncExternalStore:Yy,useId:dv,unstable_isNewReconciler:!1};function Sr(i,o){if(i&&i.defaultProps){o=re({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function kf(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:re({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var wc={isMounted:function(i){return(i=i._reactInternals)?Mn(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=vn(),p=ds(i),y=Ai(h,p);y.payload=o,l!=null&&(y.callback=l),o=ls(i,y,p),o!==null&&(Cr(o,i,p,h),dc(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=vn(),p=ds(i),y=Ai(h,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=ls(i,y,p),o!==null&&(Cr(o,i,p,h),dc(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=vn(),h=ds(i),p=Ai(l,h);p.tag=2,o!=null&&(p.callback=o),o=ls(i,p,h),o!==null&&(Cr(o,i,h,l),dc(o,i,h))}};function gv(i,o,l,h,p,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,E):o.prototype&&o.prototype.isPureReactComponent?!fl(l,h)||!fl(p,y):!0}function yv(i,o,l){var h=!1,p=ss,y=o.contextType;return typeof y=="object"&&y!==null?y=nr(y):(p=In(o)?uo:rn.current,h=o.contextTypes,y=(h=h!=null)?ha(i,p):ss),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wc,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function vv(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&wc.enqueueReplaceState(o,o.state,null)}function bf(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},gf(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=nr(y):(y=In(o)?uo:rn.current,p.context=ha(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(kf(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&wc.enqueueReplaceState(p,p.state,null),fc(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function _a(i,o){try{var l="",h=o;do l+=Re(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function xf(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function Of(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var iC=typeof WeakMap=="function"?WeakMap:Map;function _v(i,o,l){l=Ai(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){Rc||(Rc=!0,Gf=h),Of(i,o)},l}function wv(i,o,l){l=Ai(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){Of(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Of(i,o),typeof h!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),l}function Ev(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new iC;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=vC.bind(null,i,o,l),o.then(i,i))}function Tv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Sv(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=Ai(-1,1),o.tag=2,ls(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var sC=ne.ReactCurrentOwner,An=!1;function yn(i,o,l,h){o.child=i===null?$y(o,null,l,h):ma(o,i.child,l,h)}function Iv(i,o,l,h,p){l=l.render;var y=o.ref;return ya(o,p),h=Sf(i,o,l,h,y,p),l=If(),i!==null&&!An?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Ci(i,o,p)):(dt&&l&&of(o),o.flags|=1,yn(i,o,h,p),o.child)}function Av(i,o,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!ep(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,Cv(i,o,y,h,p)):(i=Nc(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:fl,l(E,h)&&i.ref===o.ref)return Ci(i,o,p)}return o.flags|=1,i=ps(y,h),i.ref=o.ref,i.return=o,o.child=i}function Cv(i,o,l,h,p){if(i!==null){var y=i.memoizedProps;if(fl(y,h)&&i.ref===o.ref)if(An=!1,o.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(An=!0);else return o.lanes=i.lanes,Ci(i,o,p)}return Nf(i,o,l,h,p)}function Rv(i,o,l){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Ea,Wn),Wn|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,tt(Ea,Wn),Wn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,tt(Ea,Wn),Wn|=h}else y!==null?(h=y.baseLanes|l,o.memoizedState=null):h=l,tt(Ea,Wn),Wn|=h;return yn(i,o,p,l),o.child}function Pv(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function Nf(i,o,l,h,p){var y=In(l)?uo:rn.current;return y=ha(o,y),ya(o,p),l=Sf(i,o,l,h,y,p),h=If(),i!==null&&!An?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,Ci(i,o,p)):(dt&&h&&of(o),o.flags|=1,yn(i,o,l,p),o.child)}function kv(i,o,l,h,p){if(In(l)){var y=!0;ic(o)}else y=!1;if(ya(o,p),o.stateNode===null)Tc(i,o),yv(o,l,h),bf(o,l,h,p),h=!0;else if(i===null){var E=o.stateNode,C=o.memoizedProps;E.props=C;var L=E.context,W=l.contextType;typeof W=="object"&&W!==null?W=nr(W):(W=In(l)?uo:rn.current,W=ha(o,W));var ee=l.getDerivedStateFromProps,te=typeof ee=="function"||typeof E.getSnapshotBeforeUpdate=="function";te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==h||L!==W)&&vv(o,E,h,W),as=!1;var Z=o.memoizedState;E.state=Z,fc(o,h,E,p),L=o.memoizedState,C!==h||Z!==L||Sn.current||as?(typeof ee=="function"&&(kf(o,l,ee,h),L=o.memoizedState),(C=as||gv(o,l,C,h,Z,L,W))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=L),E.props=h,E.state=L,E.context=W,h=C):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{E=o.stateNode,qy(i,o),C=o.memoizedProps,W=o.type===o.elementType?C:Sr(o.type,C),E.props=W,te=o.pendingProps,Z=E.context,L=l.contextType,typeof L=="object"&&L!==null?L=nr(L):(L=In(l)?uo:rn.current,L=ha(o,L));var he=l.getDerivedStateFromProps;(ee=typeof he=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==te||Z!==L)&&vv(o,E,h,L),as=!1,Z=o.memoizedState,E.state=Z,fc(o,h,E,p);var me=o.memoizedState;C!==te||Z!==me||Sn.current||as?(typeof he=="function"&&(kf(o,l,he,h),me=o.memoizedState),(W=as||gv(o,l,W,h,Z,me,L)||!1)?(ee||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,me,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,me,L)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=me),E.props=h,E.state=me,E.context=L,h=W):(typeof E.componentDidUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&Z===i.memoizedState||(o.flags|=1024),h=!1)}return Df(i,o,l,h,y,p)}function Df(i,o,l,h,p,y){Pv(i,o);var E=(o.flags&128)!==0;if(!h&&!E)return p&&Dy(o,l,!1),Ci(i,o,y);h=o.stateNode,sC.current=o;var C=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&E?(o.child=ma(o,i.child,null,y),o.child=ma(o,null,C,y)):yn(i,o,C,y),o.memoizedState=h.state,p&&Dy(o,l,!0),o.child}function bv(i){var o=i.stateNode;o.pendingContext?Oy(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Oy(i,o.context,!1),yf(i,o.containerInfo)}function xv(i,o,l,h,p){return pa(),cf(p),o.flags|=256,yn(i,o,l,h),o.child}var Lf={dehydrated:null,treeContext:null,retryLane:0};function Vf(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ov(i,o,l){var h=o.pendingProps,p=pt.current,y=!1,E=(o.flags&128)!==0,C;if((C=E)||(C=i!==null&&i.memoizedState===null?!1:(p&2)!==0),C?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),tt(pt,p&1),i===null)return uf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=h.children,i=h.fallback,y?(h=o.mode,y=o.child,E={mode:"hidden",children:E},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Dc(E,h,0,null),i=wo(i,h,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Vf(l),o.memoizedState=Lf,i):Mf(o,E));if(p=i.memoizedState,p!==null&&(C=p.dehydrated,C!==null))return oC(i,o,E,h,C,p,l);if(y){y=h.fallback,E=o.mode,p=i.child,C=p.sibling;var L={mode:"hidden",children:h.children};return(E&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=L,o.deletions=null):(h=ps(p,L),h.subtreeFlags=p.subtreeFlags&14680064),C!==null?y=ps(C,y):(y=wo(y,E,l,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,E=i.child.memoizedState,E=E===null?Vf(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~l,o.memoizedState=Lf,h}return y=i.child,i=y.sibling,h=ps(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function Mf(i,o){return o=Dc({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ec(i,o,l,h){return h!==null&&cf(h),ma(o,i.child,null,l),i=Mf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function oC(i,o,l,h,p,y,E){if(l)return o.flags&256?(o.flags&=-257,h=xf(Error(t(422))),Ec(i,o,E,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=Dc({mode:"visible",children:h.children},p,0,null),y=wo(y,p,E,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&ma(o,i.child,null,E),o.child.memoizedState=Vf(E),o.memoizedState=Lf,y);if((o.mode&1)===0)return Ec(i,o,E,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var C=h.dgst;return h=C,y=Error(t(419)),h=xf(y,h,void 0),Ec(i,o,E,h)}if(C=(E&i.childLanes)!==0,An||C){if(h=$t,h!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|E))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Ii(i,p),Cr(h,i,p,-1))}return Zf(),h=xf(Error(t(421))),Ec(i,o,E,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=_C.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,$n=rs(p.nextSibling),zn=o,dt=!0,Tr=null,i!==null&&(er[tr++]=Ti,er[tr++]=Si,er[tr++]=co,Ti=i.id,Si=i.overflow,co=o),o=Mf(o,h.children),o.flags|=4096,o)}function Nv(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),pf(i.return,o,l)}function Ff(i,o,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function Dv(i,o,l){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(yn(i,o,h.children,l),h=pt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Nv(i,l,o);else if(i.tag===19)Nv(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(tt(pt,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&pc(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Ff(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&pc(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Ff(o,!0,l,null,y);break;case"together":Ff(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Tc(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Ci(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),go|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=ps(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=ps(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function aC(i,o,l){switch(o.tag){case 3:bv(o),pa();break;case 5:Ky(o);break;case 1:In(o.type)&&ic(o);break;case 4:yf(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;tt(cc,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(tt(pt,pt.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?Ov(i,o,l):(tt(pt,pt.current&1),i=Ci(i,o,l),i!==null?i.sibling:null);tt(pt,pt.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return Dv(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),tt(pt,pt.current),h)break;return null;case 22:case 23:return o.lanes=0,Rv(i,o,l)}return Ci(i,o,l)}var Lv,jf,Vv,Mv;Lv=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},jf=function(){},Vv=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,po(Gr.current);var y=null;switch(l){case"input":p=Xe(i,p),h=Xe(i,h),y=[];break;case"select":p=re({},p,{value:void 0}),h=re({},h,{value:void 0}),y=[];break;case"textarea":p=Ks(i,p),h=Ks(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=tc)}Wi(l,h);var E;l=null;for(W in p)if(!h.hasOwnProperty(W)&&p.hasOwnProperty(W)&&p[W]!=null)if(W==="style"){var C=p[W];for(E in C)C.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(s.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in h){var L=h[W];if(C=p?.[W],h.hasOwnProperty(W)&&L!==C&&(L!=null||C!=null))if(W==="style")if(C){for(E in C)!C.hasOwnProperty(E)||L&&L.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in L)L.hasOwnProperty(E)&&C[E]!==L[E]&&(l||(l={}),l[E]=L[E])}else l||(y||(y=[]),y.push(W,l)),l=L;else W==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,C=C?C.__html:void 0,L!=null&&C!==L&&(y=y||[]).push(W,L)):W==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(W,""+L):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(s.hasOwnProperty(W)?(L!=null&&W==="onScroll"&&st("scroll",i),y||C===L||(y=[])):(y=y||[]).push(W,L))}l&&(y=y||[]).push("style",l);var W=y;(o.updateQueue=W)&&(o.flags|=4)}},Mv=function(i,o,l,h){l!==h&&(o.flags|=4)};function Pl(i,o){if(!dt)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function on(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function lC(i,o,l){var h=o.pendingProps;switch(af(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(o),null;case 1:return In(o.type)&&rc(),on(o),null;case 3:return h=o.stateNode,va(),ot(Sn),ot(rn),wf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(lc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Tr!==null&&(Yf(Tr),Tr=null))),jf(i,o),on(o),null;case 5:vf(o);var p=po(Sl.current);if(l=o.type,i!==null&&o.stateNode!=null)Vv(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return on(o),null}if(i=po(Gr.current),lc(o)){h=o.stateNode,l=o.type;var y=o.memoizedProps;switch(h[Hr]=o,h[vl]=y,i=(o.mode&1)!==0,l){case"dialog":st("cancel",h),st("close",h);break;case"iframe":case"object":case"embed":st("load",h);break;case"video":case"audio":for(p=0;p<ml.length;p++)st(ml[p],h);break;case"source":st("error",h);break;case"img":case"image":case"link":st("error",h),st("load",h);break;case"details":st("toggle",h);break;case"input":Qn(h,y),st("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},st("invalid",h);break;case"textarea":li(h,y),st("invalid",h)}Wi(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var C=y[E];E==="children"?typeof C=="string"?h.textContent!==C&&(y.suppressHydrationWarning!==!0&&ec(h.textContent,C,i),p=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&ec(h.textContent,C,i),p=["children",""+C]):s.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&st("scroll",h)}switch(l){case"input":tn(h),Gs(h,y,!0);break;case"textarea":tn(h),Qs(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=tc)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Tt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=E.createElement(l,{is:h.is}):(i=E.createElement(l),l==="select"&&(E=i,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):i=E.createElementNS(i,l),i[Hr]=o,i[vl]=h,Lv(i,o,!1,!1),o.stateNode=i;e:{switch(E=qi(l,h),l){case"dialog":st("cancel",i),st("close",i),p=h;break;case"iframe":case"object":case"embed":st("load",i),p=h;break;case"video":case"audio":for(p=0;p<ml.length;p++)st(ml[p],i);p=h;break;case"source":st("error",i),p=h;break;case"img":case"image":case"link":st("error",i),st("load",i),p=h;break;case"details":st("toggle",i),p=h;break;case"input":Qn(i,h),p=Xe(i,h),st("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=re({},h,{value:void 0}),st("invalid",i);break;case"textarea":li(i,h),p=Ks(i,h),st("invalid",i);break;default:p=h}Wi(l,p),C=p;for(y in C)if(C.hasOwnProperty(y)){var L=C[y];y==="style"?$i(i,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&ui(i,L)):y==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&dr(i,L):typeof L=="number"&&dr(i,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?L!=null&&y==="onScroll"&&st("scroll",i):L!=null&&Q(i,y,L,E))}switch(l){case"input":tn(i),Gs(i,h,!1);break;case"textarea":tn(i),Qs(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Oe(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?cr(i,!!h.multiple,y,!1):h.defaultValue!=null&&cr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=tc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return on(o),null;case 6:if(i&&o.stateNode!=null)Mv(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=po(Sl.current),po(Gr.current),lc(o)){if(h=o.stateNode,l=o.memoizedProps,h[Hr]=o,(y=h.nodeValue!==l)&&(i=zn,i!==null))switch(i.tag){case 3:ec(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ec(h.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Hr]=o,o.stateNode=h}return on(o),null;case 13:if(ot(pt),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(dt&&$n!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Uy(),pa(),o.flags|=98560,y=!1;else if(y=lc(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Hr]=o}else pa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;on(o),y=!1}else Tr!==null&&(Yf(Tr),Tr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(pt.current&1)!==0?Mt===0&&(Mt=3):Zf())),o.updateQueue!==null&&(o.flags|=4),on(o),null);case 4:return va(),jf(i,o),i===null&&gl(o.stateNode.containerInfo),on(o),null;case 10:return ff(o.type._context),on(o),null;case 17:return In(o.type)&&rc(),on(o),null;case 19:if(ot(pt),y=o.memoizedState,y===null)return on(o),null;if(h=(o.flags&128)!==0,E=y.rendering,E===null)if(h)Pl(y,!1);else{if(Mt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(E=pc(i),E!==null){for(o.flags|=128,Pl(y,!1),h=E.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)y=l,i=h,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return tt(pt,pt.current&1|2),o.child}i=i.sibling}y.tail!==null&&et()>Ta&&(o.flags|=128,h=!0,Pl(y,!1),o.lanes=4194304)}else{if(!h)if(i=pc(E),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),Pl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!dt)return on(o),null}else 2*et()-y.renderingStartTime>Ta&&l!==1073741824&&(o.flags|=128,h=!0,Pl(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(l=y.last,l!==null?l.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=et(),o.sibling=null,l=pt.current,tt(pt,h?l&1|2:l&1),o):(on(o),null);case 22:case 23:return Xf(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(Wn&1073741824)!==0&&(on(o),o.subtreeFlags&6&&(o.flags|=8192)):on(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function uC(i,o){switch(af(o),o.tag){case 1:return In(o.type)&&rc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return va(),ot(Sn),ot(rn),wf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return vf(o),null;case 13:if(ot(pt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));pa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ot(pt),null;case 4:return va(),null;case 10:return ff(o.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var Sc=!1,an=!1,cC=typeof WeakSet=="function"?WeakSet:Set,pe=null;function wa(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){_t(i,o,h)}else l.current=null}function Uf(i,o,l){try{l()}catch(h){_t(i,o,h)}}var Fv=!1;function hC(i,o){if(Jd=es,i=gy(),$d(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,C=-1,L=-1,W=0,ee=0,te=i,Z=null;t:for(;;){for(var he;te!==l||p!==0&&te.nodeType!==3||(C=E+p),te!==y||h!==0&&te.nodeType!==3||(L=E+h),te.nodeType===3&&(E+=te.nodeValue.length),(he=te.firstChild)!==null;)Z=te,te=he;for(;;){if(te===i)break t;if(Z===l&&++W===p&&(C=E),Z===y&&++ee===h&&(L=E),(he=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=he}l=C===-1||L===-1?null:{start:C,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xd={focusedElem:i,selectionRange:l},es=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var me=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,At=me.memoizedState,B=o.stateNode,F=B.getSnapshotBeforeUpdate(o.elementType===o.type?ge:Sr(o.type,ge),At);B.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var z=o.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){_t(o,o.return,ie)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return me=Fv,Fv=!1,me}function kl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Uf(o,l,y)}p=p.next}while(p!==h)}}function Ic(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Bf(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function jv(i){var o=i.alternate;o!==null&&(i.alternate=null,jv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Hr],delete o[vl],delete o[nf],delete o[GA],delete o[KA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uv(i){return i.tag===5||i.tag===3||i.tag===4}function Bv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zf(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=tc));else if(h!==4&&(i=i.child,i!==null))for(zf(i,o,l),i=i.sibling;i!==null;)zf(i,o,l),i=i.sibling}function $f(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for($f(i,o,l),i=i.sibling;i!==null;)$f(i,o,l),i=i.sibling}var Qt=null,Ir=!1;function us(i,o,l){for(l=l.child;l!==null;)zv(i,o,l),l=l.sibling}function zv(i,o,l){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(to,l)}catch{}switch(l.tag){case 5:an||wa(l,o);case 6:var h=Qt,p=Ir;Qt=null,us(i,o,l),Qt=h,Ir=p,Qt!==null&&(Ir?(i=Qt,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Qt.removeChild(l.stateNode));break;case 18:Qt!==null&&(Ir?(i=Qt,l=l.stateNode,i.nodeType===8?tf(i.parentNode,l):i.nodeType===1&&tf(i,l),_r(i)):tf(Qt,l.stateNode));break;case 4:h=Qt,p=Ir,Qt=l.stateNode.containerInfo,Ir=!0,us(i,o,l),Qt=h,Ir=p;break;case 0:case 11:case 14:case 15:if(!an&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&Uf(l,o,E),p=p.next}while(p!==h)}us(i,o,l);break;case 1:if(!an&&(wa(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(C){_t(l,o,C)}us(i,o,l);break;case 21:us(i,o,l);break;case 22:l.mode&1?(an=(h=an)||l.memoizedState!==null,us(i,o,l),an=h):us(i,o,l);break;default:us(i,o,l)}}function $v(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new cC),o.forEach(function(h){var p=wC.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Ar(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,E=o,C=E;e:for(;C!==null;){switch(C.tag){case 5:Qt=C.stateNode,Ir=!1;break e;case 3:Qt=C.stateNode.containerInfo,Ir=!0;break e;case 4:Qt=C.stateNode.containerInfo,Ir=!0;break e}C=C.return}if(Qt===null)throw Error(t(160));zv(y,E,p),Qt=null,Ir=!1;var L=p.alternate;L!==null&&(L.return=null),p.return=null}catch(W){_t(p,o,W)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Wv(o,i),o=o.sibling}function Wv(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ar(o,i),Qr(i),h&4){try{kl(3,i,i.return),Ic(3,i)}catch(ge){_t(i,i.return,ge)}try{kl(5,i,i.return)}catch(ge){_t(i,i.return,ge)}}break;case 1:Ar(o,i),Qr(i),h&512&&l!==null&&wa(l,l.return);break;case 5:if(Ar(o,i),Qr(i),h&512&&l!==null&&wa(l,l.return),i.flags&32){var p=i.stateNode;try{dr(p,"")}catch(ge){_t(i,i.return,ge)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,E=l!==null?l.memoizedProps:y,C=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&jt(p,y),qi(C,E);var W=qi(C,y);for(E=0;E<L.length;E+=2){var ee=L[E],te=L[E+1];ee==="style"?$i(p,te):ee==="dangerouslySetInnerHTML"?ui(p,te):ee==="children"?dr(p,te):Q(p,ee,te,W)}switch(C){case"input":Lr(p,y);break;case"textarea":zi(p,y);break;case"select":var Z=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var he=y.value;he!=null?cr(p,!!y.multiple,he,!1):Z!==!!y.multiple&&(y.defaultValue!=null?cr(p,!!y.multiple,y.defaultValue,!0):cr(p,!!y.multiple,y.multiple?[]:"",!1))}p[vl]=y}catch(ge){_t(i,i.return,ge)}}break;case 6:if(Ar(o,i),Qr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(ge){_t(i,i.return,ge)}}break;case 3:if(Ar(o,i),Qr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{_r(o.containerInfo)}catch(ge){_t(i,i.return,ge)}break;case 4:Ar(o,i),Qr(i);break;case 13:Ar(o,i),Qr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(Hf=et())),h&4&&$v(i);break;case 22:if(ee=l!==null&&l.memoizedState!==null,i.mode&1?(an=(W=an)||ee,Ar(o,i),an=W):Ar(o,i),Qr(i),h&8192){if(W=i.memoizedState!==null,(i.stateNode.isHidden=W)&&!ee&&(i.mode&1)!==0)for(pe=i,ee=i.child;ee!==null;){for(te=pe=ee;pe!==null;){switch(Z=pe,he=Z.child,Z.tag){case 0:case 11:case 14:case 15:kl(4,Z,Z.return);break;case 1:wa(Z,Z.return);var me=Z.stateNode;if(typeof me.componentWillUnmount=="function"){h=Z,l=Z.return;try{o=h,me.props=o.memoizedProps,me.state=o.memoizedState,me.componentWillUnmount()}catch(ge){_t(h,l,ge)}}break;case 5:wa(Z,Z.return);break;case 22:if(Z.memoizedState!==null){Gv(te);continue}}he!==null?(he.return=Z,pe=he):Gv(te)}ee=ee.sibling}e:for(ee=null,te=i;;){if(te.tag===5){if(ee===null){ee=te;try{p=te.stateNode,W?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=te.stateNode,L=te.memoizedProps.style,E=L!=null&&L.hasOwnProperty("display")?L.display:null,C.style.display=Mr("display",E))}catch(ge){_t(i,i.return,ge)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=W?"":te.memoizedProps}catch(ge){_t(i,i.return,ge)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Ar(o,i),Qr(i),h&4&&$v(i);break;case 21:break;default:Ar(o,i),Qr(i)}}function Qr(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(Uv(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(dr(p,""),h.flags&=-33);var y=Bv(i);$f(i,y,p);break;case 3:case 4:var E=h.stateNode.containerInfo,C=Bv(i);zf(i,C,E);break;default:throw Error(t(161))}}catch(L){_t(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function dC(i,o,l){pe=i,qv(i)}function qv(i,o,l){for(var h=(i.mode&1)!==0;pe!==null;){var p=pe,y=p.child;if(p.tag===22&&h){var E=p.memoizedState!==null||Sc;if(!E){var C=p.alternate,L=C!==null&&C.memoizedState!==null||an;C=Sc;var W=an;if(Sc=E,(an=L)&&!W)for(pe=p;pe!==null;)E=pe,L=E.child,E.tag===22&&E.memoizedState!==null?Kv(p):L!==null?(L.return=E,pe=L):Kv(p);for(;y!==null;)pe=y,qv(y),y=y.sibling;pe=p,Sc=C,an=W}Hv(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,pe=y):Hv(i)}}function Hv(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:an||Ic(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!an)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Sr(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Gy(o,y,h);break;case 3:var E=o.updateQueue;if(E!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Gy(o,E,l)}break;case 5:var C=o.stateNode;if(l===null&&o.flags&4){l=C;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var W=o.alternate;if(W!==null){var ee=W.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&_r(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||o.flags&512&&Bf(o)}catch(Z){_t(o,o.return,Z)}}if(o===i){pe=null;break}if(l=o.sibling,l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Gv(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var l=o.sibling;if(l!==null){l.return=o.return,pe=l;break}pe=o.return}}function Kv(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{Ic(4,o)}catch(L){_t(o,l,L)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(L){_t(o,p,L)}}var y=o.return;try{Bf(o)}catch(L){_t(o,y,L)}break;case 5:var E=o.return;try{Bf(o)}catch(L){_t(o,E,L)}}}catch(L){_t(o,o.return,L)}if(o===i){pe=null;break}var C=o.sibling;if(C!==null){C.return=o.return,pe=C;break}pe=o.return}}var fC=Math.ceil,Ac=ne.ReactCurrentDispatcher,Wf=ne.ReactCurrentOwner,ir=ne.ReactCurrentBatchConfig,Ge=0,$t=null,kt=null,Yt=0,Wn=0,Ea=is(0),Mt=0,bl=null,go=0,Cc=0,qf=0,xl=null,Cn=null,Hf=0,Ta=1/0,Ri=null,Rc=!1,Gf=null,cs=null,Pc=!1,hs=null,kc=0,Ol=0,Kf=null,bc=-1,xc=0;function vn(){return(Ge&6)!==0?et():bc!==-1?bc:bc=et()}function ds(i){return(i.mode&1)===0?1:(Ge&2)!==0&&Yt!==0?Yt&-Yt:YA.transition!==null?(xc===0&&(xc=ro()),xc):(i=ze,i!==0||(i=window.event,i=i===void 0?16:ol(i.type)),i)}function Cr(i,o,l,h){if(50<Ol)throw Ol=0,Kf=null,Error(t(185));Yi(i,l,h),((Ge&2)===0||i!==$t)&&(i===$t&&((Ge&2)===0&&(Cc|=l),Mt===4&&fs(i,Yt)),Rn(i,h),l===1&&Ge===0&&(o.mode&1)===0&&(Ta=et()+500,sc&&os()))}function Rn(i,o){var l=i.callbackNode;mi(i,o);var h=no(i,i===$t?Yt:0);if(h===0)l!==null&&Zs(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&Zs(l),o===1)i.tag===0?QA(Yv.bind(null,i)):Ly(Yv.bind(null,i)),qA(function(){(Ge&6)===0&&os()}),l=null;else{switch(Xi(h)){case 1:l=eo;break;case 4:l=Gi;break;case 16:l=Jn;break;case 536870912:l=xu;break;default:l=Jn}l=i_(l,Qv.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Qv(i,o){if(bc=-1,xc=0,(Ge&6)!==0)throw Error(t(327));var l=i.callbackNode;if(Sa()&&i.callbackNode!==l)return null;var h=no(i,i===$t?Yt:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Oc(i,h);else{o=h;var p=Ge;Ge|=2;var y=Xv();($t!==i||Yt!==o)&&(Ri=null,Ta=et()+500,vo(i,o));do try{gC();break}catch(C){Jv(i,C)}while(!0);df(),Ac.current=y,Ge=p,kt!==null?o=0:($t=null,Yt=0,o=Mt)}if(o!==0){if(o===2&&(p=jn(i),p!==0&&(h=p,o=Qf(i,p))),o===1)throw l=bl,vo(i,0),fs(i,h),Rn(i,et()),l;if(o===6)fs(i,h);else{if(p=i.current.alternate,(h&30)===0&&!pC(p)&&(o=Oc(i,h),o===2&&(y=jn(i),y!==0&&(h=y,o=Qf(i,y))),o===1))throw l=bl,vo(i,0),fs(i,h),Rn(i,et()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:_o(i,Cn,Ri);break;case 3:if(fs(i,h),(h&130023424)===h&&(o=Hf+500-et(),10<o)){if(no(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){vn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=ef(_o.bind(null,i,Cn,Ri),o);break}_o(i,Cn,Ri);break;case 4:if(fs(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var E=31-mn(h);y=1<<E,E=o[E],E>p&&(p=E),h&=~y}if(h=p,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*fC(h/1960))-h,10<h){i.timeoutHandle=ef(_o.bind(null,i,Cn,Ri),h);break}_o(i,Cn,Ri);break;case 5:_o(i,Cn,Ri);break;default:throw Error(t(329))}}}return Rn(i,et()),i.callbackNode===l?Qv.bind(null,i):null}function Qf(i,o){var l=xl;return i.current.memoizedState.isDehydrated&&(vo(i,o).flags|=256),i=Oc(i,o),i!==2&&(o=Cn,Cn=l,o!==null&&Yf(o)),i}function Yf(i){Cn===null?Cn=i:Cn.push.apply(Cn,i)}function pC(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Er(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fs(i,o){for(o&=~qf,o&=~Cc,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-mn(o),h=1<<l;i[l]=-1,o&=~h}}function Yv(i){if((Ge&6)!==0)throw Error(t(327));Sa();var o=no(i,0);if((o&1)===0)return Rn(i,et()),null;var l=Oc(i,o);if(i.tag!==0&&l===2){var h=jn(i);h!==0&&(o=h,l=Qf(i,h))}if(l===1)throw l=bl,vo(i,0),fs(i,o),Rn(i,et()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,_o(i,Cn,Ri),Rn(i,et()),null}function Jf(i,o){var l=Ge;Ge|=1;try{return i(o)}finally{Ge=l,Ge===0&&(Ta=et()+500,sc&&os())}}function yo(i){hs!==null&&hs.tag===0&&(Ge&6)===0&&Sa();var o=Ge;Ge|=1;var l=ir.transition,h=ze;try{if(ir.transition=null,ze=1,i)return i()}finally{ze=h,ir.transition=l,Ge=o,(Ge&6)===0&&os()}}function Xf(){Wn=Ea.current,ot(Ea)}function vo(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,WA(l)),kt!==null)for(l=kt.return;l!==null;){var h=l;switch(af(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&rc();break;case 3:va(),ot(Sn),ot(rn),wf();break;case 5:vf(h);break;case 4:va();break;case 13:ot(pt);break;case 19:ot(pt);break;case 10:ff(h.type._context);break;case 22:case 23:Xf()}l=l.return}if($t=i,kt=i=ps(i.current,null),Yt=Wn=o,Mt=0,bl=null,qf=Cc=go=0,Cn=xl=null,fo!==null){for(o=0;o<fo.length;o++)if(l=fo[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,h.next=E}l.pending=h}fo=null}return i}function Jv(i,o){do{var l=kt;try{if(df(),mc.current=_c,gc){for(var h=mt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}gc=!1}if(mo=0,zt=Vt=mt=null,Il=!1,Al=0,Wf.current=null,l===null||l.return===null){Mt=1,bl=o,kt=null;break}e:{var y=i,E=l.return,C=l,L=o;if(o=Yt,C.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var W=L,ee=C,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var he=Tv(E);if(he!==null){he.flags&=-257,Sv(he,E,C,y,o),he.mode&1&&Ev(y,W,o),o=he,L=W;var me=o.updateQueue;if(me===null){var ge=new Set;ge.add(L),o.updateQueue=ge}else me.add(L);break e}else{if((o&1)===0){Ev(y,W,o),Zf();break e}L=Error(t(426))}}else if(dt&&C.mode&1){var At=Tv(E);if(At!==null){(At.flags&65536)===0&&(At.flags|=256),Sv(At,E,C,y,o),cf(_a(L,C));break e}}y=L=_a(L,C),Mt!==4&&(Mt=2),xl===null?xl=[y]:xl.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var B=_v(y,L,o);Hy(y,B);break e;case 1:C=L;var F=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(cs===null||!cs.has(z)))){y.flags|=65536,o&=-o,y.lanes|=o;var ie=wv(y,C,o);Hy(y,ie);break e}}y=y.return}while(y!==null)}e_(l)}catch(ye){o=ye,kt===l&&l!==null&&(kt=l=l.return);continue}break}while(!0)}function Xv(){var i=Ac.current;return Ac.current=_c,i===null?_c:i}function Zf(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),$t===null||(go&268435455)===0&&(Cc&268435455)===0||fs($t,Yt)}function Oc(i,o){var l=Ge;Ge|=2;var h=Xv();($t!==i||Yt!==o)&&(Ri=null,vo(i,o));do try{mC();break}catch(p){Jv(i,p)}while(!0);if(df(),Ge=l,Ac.current=h,kt!==null)throw Error(t(261));return $t=null,Yt=0,Mt}function mC(){for(;kt!==null;)Zv(kt)}function gC(){for(;kt!==null&&!Wo();)Zv(kt)}function Zv(i){var o=r_(i.alternate,i,Wn);i.memoizedProps=i.pendingProps,o===null?e_(i):kt=o,Wf.current=null}function e_(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=lC(l,o,Wn),l!==null){kt=l;return}}else{if(l=uC(l,o),l!==null){l.flags&=32767,kt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Mt=6,kt=null;return}}if(o=o.sibling,o!==null){kt=o;return}kt=o=i}while(o!==null);Mt===0&&(Mt=5)}function _o(i,o,l){var h=ze,p=ir.transition;try{ir.transition=null,ze=1,yC(i,o,l,h)}finally{ir.transition=p,ze=h}return null}function yC(i,o,l,h){do Sa();while(hs!==null);if((Ge&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(Ze(i,y),i===$t&&(kt=$t=null,Yt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Pc||(Pc=!0,i_(Jn,function(){return Sa(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=ir.transition,ir.transition=null;var E=ze;ze=1;var C=Ge;Ge|=4,Wf.current=null,hC(i,l),Wv(l,i),MA(Xd),es=!!Jd,Xd=Jd=null,i.current=l,dC(l),Ld(),Ge=C,ze=E,ir.transition=y}else i.current=l;if(Pc&&(Pc=!1,hs=i,kc=p),y=i.pendingLanes,y===0&&(cs=null),Ou(l.stateNode),Rn(i,et()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Rc)throw Rc=!1,i=Gf,Gf=null,i;return(kc&1)!==0&&i.tag!==0&&Sa(),y=i.pendingLanes,(y&1)!==0?i===Kf?Ol++:(Ol=0,Kf=i):Ol=0,os(),null}function Sa(){if(hs!==null){var i=Xi(kc),o=ir.transition,l=ze;try{if(ir.transition=null,ze=16>i?16:i,hs===null)var h=!1;else{if(i=hs,hs=null,kc=0,(Ge&6)!==0)throw Error(t(331));var p=Ge;for(Ge|=4,pe=i.current;pe!==null;){var y=pe,E=y.child;if((pe.flags&16)!==0){var C=y.deletions;if(C!==null){for(var L=0;L<C.length;L++){var W=C[L];for(pe=W;pe!==null;){var ee=pe;switch(ee.tag){case 0:case 11:case 15:kl(8,ee,y)}var te=ee.child;if(te!==null)te.return=ee,pe=te;else for(;pe!==null;){ee=pe;var Z=ee.sibling,he=ee.return;if(jv(ee),ee===W){pe=null;break}if(Z!==null){Z.return=he,pe=Z;break}pe=he}}}var me=y.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var At=ge.sibling;ge.sibling=null,ge=At}while(ge!==null)}}pe=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,pe=E;else e:for(;pe!==null;){if(y=pe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:kl(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,pe=B;break e}pe=y.return}}var F=i.current;for(pe=F;pe!==null;){E=pe;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,pe=z;else e:for(E=F;pe!==null;){if(C=pe,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Ic(9,C)}}catch(ye){_t(C,C.return,ye)}if(C===E){pe=null;break e}var ie=C.sibling;if(ie!==null){ie.return=C.return,pe=ie;break e}pe=C.return}}if(Ge=p,os(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(to,i)}catch{}h=!0}return h}finally{ze=l,ir.transition=o}}return!1}function t_(i,o,l){o=_a(l,o),o=_v(i,o,1),i=ls(i,o,1),o=vn(),i!==null&&(Yi(i,1,o),Rn(i,o))}function _t(i,o,l){if(i.tag===3)t_(i,i,l);else for(;o!==null;){if(o.tag===3){t_(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(cs===null||!cs.has(h))){i=_a(l,i),i=wv(o,i,1),o=ls(o,i,1),i=vn(),o!==null&&(Yi(o,1,i),Rn(o,i));break}}o=o.return}}function vC(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=vn(),i.pingedLanes|=i.suspendedLanes&l,$t===i&&(Yt&l)===l&&(Mt===4||Mt===3&&(Yt&130023424)===Yt&&500>et()-Hf?vo(i,0):qf|=l),Rn(i,o)}function n_(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ho,Ho<<=1,(Ho&130023424)===0&&(Ho=4194304)));var l=vn();i=Ii(i,o),i!==null&&(Yi(i,o,l),Rn(i,l))}function _C(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),n_(i,l)}function wC(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),n_(i,l)}var r_;r_=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||Sn.current)An=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return An=!1,aC(i,o,l);An=(i.flags&131072)!==0}else An=!1,dt&&(o.flags&1048576)!==0&&Vy(o,ac,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Tc(i,o),i=o.pendingProps;var p=ha(o,rn.current);ya(o,l),p=Sf(null,o,h,i,p,l);var y=If();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,In(h)?(y=!0,ic(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,gf(o),p.updater=wc,o.stateNode=p,p._reactInternals=o,bf(o,h,i,l),o=Df(null,o,h,!0,y,l)):(o.tag=0,dt&&y&&of(o),yn(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(Tc(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=TC(h),i=Sr(h,i),p){case 0:o=Nf(null,o,h,i,l);break e;case 1:o=kv(null,o,h,i,l);break e;case 11:o=Iv(null,o,h,i,l);break e;case 14:o=Av(null,o,h,Sr(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Sr(h,p),Nf(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Sr(h,p),kv(i,o,h,p,l);case 3:e:{if(bv(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,qy(i,o),fc(o,h,null,l);var E=o.memoizedState;if(h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=_a(Error(t(423)),o),o=xv(i,o,h,l,p);break e}else if(h!==p){p=_a(Error(t(424)),o),o=xv(i,o,h,l,p);break e}else for($n=rs(o.stateNode.containerInfo.firstChild),zn=o,dt=!0,Tr=null,l=$y(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(pa(),h===p){o=Ci(i,o,l);break e}yn(i,o,h,l)}o=o.child}return o;case 5:return Ky(o),i===null&&uf(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,E=p.children,Zd(h,p)?E=null:y!==null&&Zd(h,y)&&(o.flags|=32),Pv(i,o),yn(i,o,E,l),o.child;case 6:return i===null&&uf(o),null;case 13:return Ov(i,o,l);case 4:return yf(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ma(o,null,h,l):yn(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Sr(h,p),Iv(i,o,h,p,l);case 7:return yn(i,o,o.pendingProps,l),o.child;case 8:return yn(i,o,o.pendingProps.children,l),o.child;case 12:return yn(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,E=p.value,tt(cc,h._currentValue),h._currentValue=E,y!==null)if(Er(y.value,E)){if(y.children===p.children&&!Sn.current){o=Ci(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var C=y.dependencies;if(C!==null){E=y.child;for(var L=C.firstContext;L!==null;){if(L.context===h){if(y.tag===1){L=Ai(-1,l&-l),L.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var ee=W.pending;ee===null?L.next=L:(L.next=ee.next,ee.next=L),W.pending=L}}y.lanes|=l,L=y.alternate,L!==null&&(L.lanes|=l),pf(y.return,l,o),C.lanes|=l;break}L=L.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,C=E.alternate,C!==null&&(C.lanes|=l),pf(E,l,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}yn(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,ya(o,l),p=nr(p),h=h(p),o.flags|=1,yn(i,o,h,l),o.child;case 14:return h=o.type,p=Sr(h,o.pendingProps),p=Sr(h.type,p),Av(i,o,h,p,l);case 15:return Cv(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Sr(h,p),Tc(i,o),o.tag=1,In(h)?(i=!0,ic(o)):i=!1,ya(o,l),yv(o,h,p),bf(o,h,p,l),Df(null,o,h,!0,i,l);case 19:return Dv(i,o,l);case 22:return Rv(i,o,l)}throw Error(t(156,o.tag))};function i_(i,o){return Ur(i,o)}function EC(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(i,o,l,h){return new EC(i,o,l,h)}function ep(i){return i=i.prototype,!(!i||!i.isReactComponent)}function TC(i){if(typeof i=="function")return ep(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===be)return 14}return 2}function ps(i,o){var l=i.alternate;return l===null?(l=sr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Nc(i,o,l,h,p,y){var E=2;if(h=i,typeof i=="function")ep(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case N:return wo(l.children,p,y,o);case I:E=8,p|=8;break;case b:return i=sr(12,l,o,p|2),i.elementType=b,i.lanes=y,i;case k:return i=sr(13,l,o,p),i.elementType=k,i.lanes=y,i;case je:return i=sr(19,l,o,p),i.elementType=je,i.lanes=y,i;case Ce:return Dc(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:E=10;break e;case M:E=9;break e;case j:E=11;break e;case be:E=14;break e;case Me:E=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=sr(E,l,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function wo(i,o,l,h){return i=sr(7,i,h,o),i.lanes=l,i}function Dc(i,o,l,h){return i=sr(22,i,h,o),i.elementType=Ce,i.lanes=l,i.stateNode={isHidden:!1},i}function tp(i,o,l){return i=sr(6,i,null,o),i.lanes=l,i}function np(i,o,l){return o=sr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function SC(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qi(0),this.expirationTimes=Qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function rp(i,o,l,h,p,y,E,C,L){return i=new SC(i,o,l,C,L),o===1?(o=1,y===!0&&(o|=8)):o=0,y=sr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(y),i}function IC(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function s_(i){if(!i)return ss;i=i._reactInternals;e:{if(Mn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(In(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(In(l))return Ny(i,l,o)}return o}function o_(i,o,l,h,p,y,E,C,L){return i=rp(l,h,!0,i,p,y,E,C,L),i.context=s_(null),l=i.current,h=vn(),p=ds(l),y=Ai(h,p),y.callback=o??null,ls(l,y,p),i.current.lanes=p,Yi(i,p,h),Rn(i,h),i}function Lc(i,o,l,h){var p=o.current,y=vn(),E=ds(p);return l=s_(l),o.context===null?o.context=l:o.pendingContext=l,o=Ai(y,E),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=ls(p,o,E),i!==null&&(Cr(i,p,E,y),dc(i,p,E)),E}function Vc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function a_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function ip(i,o){a_(i,o),(i=i.alternate)&&a_(i,o)}function AC(){return null}var l_=typeof reportError=="function"?reportError:function(i){console.error(i)};function sp(i){this._internalRoot=i}Mc.prototype.render=sp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Lc(i,o,null,null)},Mc.prototype.unmount=sp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;yo(function(){Lc(null,i,null,null)}),o[wi]=null}};function Mc(i){this._internalRoot=i}Mc.prototype.unstable_scheduleHydration=function(i){if(i){var o=Mu();i={blockedOn:null,target:i,priority:o};for(var l=0;l<zr.length&&o!==0&&o<zr[l].priority;l++);zr.splice(l,0,i),l===0&&Uu(i)}};function op(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Fc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function u_(){}function CC(i,o,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var W=Vc(E);y.call(W)}}var E=o_(o,h,i,0,null,!1,!1,"",u_);return i._reactRootContainer=E,i[wi]=E.current,gl(i.nodeType===8?i.parentNode:i),yo(),E}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var C=h;h=function(){var W=Vc(L);C.call(W)}}var L=rp(i,0,!1,null,null,!1,!1,"",u_);return i._reactRootContainer=L,i[wi]=L.current,gl(i.nodeType===8?i.parentNode:i),yo(function(){Lc(o,L,l,h)}),L}function jc(i,o,l,h,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var C=p;p=function(){var L=Vc(E);C.call(L)}}Lc(o,E,i,p)}else E=CC(l,o,i,p,h);return Vc(E)}Lu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=Ki(o.pendingLanes);l!==0&&(Ji(o,l|1),Rn(o,et()),(Ge&6)===0&&(Ta=et()+500,os()))}break;case 13:yo(function(){var h=Ii(i,1);if(h!==null){var p=vn();Cr(h,i,1,p)}}),ip(i,1)}},Go=function(i){if(i.tag===13){var o=Ii(i,134217728);if(o!==null){var l=vn();Cr(o,i,134217728,l)}ip(i,134217728)}},Vu=function(i){if(i.tag===13){var o=ds(i),l=Ii(i,o);if(l!==null){var h=vn();Cr(l,i,o,h)}ip(i,o)}},Mu=function(){return ze},Fu=function(i,o){var l=ze;try{return ze=i,o()}finally{ze=l}},hi=function(i,o,l){switch(o){case"input":if(Lr(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=nc(h);if(!p)throw Error(t(90));ut(h),Lr(h,p)}}}break;case"textarea":zi(i,l);break;case"select":o=l.value,o!=null&&cr(i,!!l.multiple,o,!1)}},Qe=Jf,nn=yo;var RC={usingClientEntryPoint:!1,Events:[_l,ua,nc,rt,Fr,Jf]},Nl={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PC={bundleType:Nl.bundleType,version:Nl.version,rendererPackageName:Nl.rendererPackageName,rendererConfig:Nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Ht(i),i===null?null:i.stateNode},findFiberByHostInstance:Nl.findFiberByHostInstance||AC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uc.isDisabled&&Uc.supportsFiber)try{to=Uc.inject(PC),Fn=Uc}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RC,Pn.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!op(o))throw Error(t(200));return IC(i,o,null,l)},Pn.createRoot=function(i,o){if(!op(i))throw Error(t(299));var l=!1,h="",p=l_;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=rp(i,1,!1,null,null,l,!1,h,p),i[wi]=o.current,gl(i.nodeType===8?i.parentNode:i),new sp(o)},Pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Ht(o),i=i===null?null:i.stateNode,i},Pn.flushSync=function(i){return yo(i)},Pn.hydrate=function(i,o,l){if(!Fc(o))throw Error(t(200));return jc(null,i,o,!0,l)},Pn.hydrateRoot=function(i,o,l){if(!op(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",E=l_;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),o=o_(o,null,i,1,l??null,p,!1,y,E),i[wi]=o.current,gl(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new Mc(o)},Pn.render=function(i,o,l){if(!Fc(o))throw Error(t(200));return jc(null,i,o,!1,l)},Pn.unmountComponentAtNode=function(i){if(!Fc(i))throw Error(t(40));return i._reactRootContainer?(yo(function(){jc(null,null,i,!1,function(){i._reactRootContainer=null,i[wi]=null})}),!0):!1},Pn.unstable_batchedUpdates=Jf,Pn.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!Fc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return jc(i,o,l,!1,h)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var y_;function i0(){if(y_)return up.exports;y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),up.exports=MC(),up.exports}var v_;function FC(){if(v_)return Bc;v_=1;var n=i0();return Bc.createRoot=n.createRoot,Bc.hydrateRoot=n.hydrateRoot,Bc}var jC=FC();i0();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xl.apply(this,arguments)}var Ts;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ts||(Ts={}));const __="popstate";function UC(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return Mp("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:ph(s)}return zC(e,t,null,n)}function Rt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function s0(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BC(){return Math.random().toString(36).substr(2,8)}function w_(n,e){return{usr:n.state,key:n.key,idx:e}}function Mp(n,e,t,r){return t===void 0&&(t=null),Xl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?za(e):e,{state:t,key:e&&e.key||r||BC()})}function ph(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function za(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function zC(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=Ts.Pop,f=null,m=v();m==null&&(m=0,u.replaceState(Xl({},u.state,{idx:m}),""));function v(){return(u.state||{idx:null}).idx}function w(){d=Ts.Pop;let A=v(),$=A==null?null:A-m;m=A,f&&f({action:d,location:O.location,delta:$})}function T(A,$){d=Ts.Push;let Y=Mp(O.location,A,$);m=v()+1;let Q=w_(Y,m),ne=O.createHref(Y);try{u.pushState(Q,"",ne)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;s.location.assign(ne)}a&&f&&f({action:d,location:O.location,delta:1})}function P(A,$){d=Ts.Replace;let Y=Mp(O.location,A,$);m=v();let Q=w_(Y,m),ne=O.createHref(Y);u.replaceState(Q,"",ne),a&&f&&f({action:d,location:O.location,delta:0})}function R(A){let $=s.location.origin!=="null"?s.location.origin:s.location.href,Y=typeof A=="string"?A:ph(A);return Y=Y.replace(/ $/,"%20"),Rt($,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,$)}let O={get action(){return d},get location(){return n(s,u)},listen(A){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(__,w),f=A,()=>{s.removeEventListener(__,w),f=null}},createHref(A){return e(s,A)},createURL:R,encodeLocation(A){let $=R(A);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:T,replace:P,go(A){return u.go(A)}};return O}var E_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(E_||(E_={}));function $C(n,e,t){return t===void 0&&(t="/"),WC(n,e,t)}function WC(n,e,t,r){let s=typeof e=="string"?za(e):e,a=Vm(s.pathname||"/",t);if(a==null)return null;let u=o0(n);qC(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=r1(a);d=e1(u[f],m)}return d}function o0(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Rt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=As([r,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(Rt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),o0(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:XC(m,a.index),routesMeta:v})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of a0(a.path))s(a,u,f)}),e}function a0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=a0(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function qC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ZC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const HC=/^:[\w-]+$/,GC=3,KC=2,QC=1,YC=10,JC=-2,T_=n=>n==="*";function XC(n,e){let t=n.split("/"),r=t.length;return t.some(T_)&&(r+=JC),e&&(r+=KC),t.filter(s=>!T_(s)).reduce((s,a)=>s+(HC.test(a)?GC:a===""?QC:YC),r)}function ZC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function e1(n,e,t){let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=t1({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!w)return null;Object.assign(s,w.params),u.push({params:s,pathname:As([a,w.pathname]),pathnameBase:a1(As([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=As([a,w.pathnameBase]))}return u}function t1(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=n1(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,v,w)=>{let{paramName:T,isOptional:P}=v;if(T==="*"){let O=d[w]||"";u=a.slice(0,a.length-O.length).replace(/(.)\/+$/,"$1")}const R=d[w];return P&&!R?m[T]=void 0:m[T]=(R||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function n1(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),s0(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function r1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return s0(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Vm(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function i1(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?za(n):n;return{pathname:t?t.startsWith("/")?t:s1(t,e):e,search:l1(r),hash:u1(s)}}function s1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function dp(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Mm(n,e){let t=o1(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Fm(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=za(n):(s=Xl({},n),Rt(!s.pathname||!s.pathname.includes("?"),dp("?","pathname","search",s)),Rt(!s.pathname||!s.pathname.includes("#"),dp("#","pathname","hash",s)),Rt(!s.search||!s.search.includes("#"),dp("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;s.pathname=T.join("/")}d=w>=0?e[w]:"/"}let f=i1(s,d),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}const As=n=>n.join("/").replace(/\/\/+/g,"/"),a1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),l1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,u1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function c1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const l0=["post","put","patch","delete"];new Set(l0);const h1=["get",...l0];new Set(h1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(){return Zl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zl.apply(this,arguments)}const jm=q.createContext(null),d1=q.createContext(null),js=q.createContext(null),Wh=q.createContext(null),Fi=q.createContext({outlet:null,matches:[],isDataRoute:!1}),u0=q.createContext(null);function f1(n,e){let{relative:t}=e===void 0?{}:e;$a()||Rt(!1);let{basename:r,navigator:s}=q.useContext(js),{hash:a,pathname:u,search:d}=h0(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:As([r,u])),s.createHref({pathname:f,search:d,hash:a})}function $a(){return q.useContext(Wh)!=null}function Us(){return $a()||Rt(!1),q.useContext(Wh).location}function c0(n){q.useContext(js).static||q.useLayoutEffect(n)}function ji(){let{isDataRoute:n}=q.useContext(Fi);return n?P1():p1()}function p1(){$a()||Rt(!1);let n=q.useContext(jm),{basename:e,future:t,navigator:r}=q.useContext(js),{matches:s}=q.useContext(Fi),{pathname:a}=Us(),u=JSON.stringify(Mm(s,t.v7_relativeSplatPath)),d=q.useRef(!1);return c0(()=>{d.current=!0}),q.useCallback(function(m,v){if(v===void 0&&(v={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let w=Fm(m,JSON.parse(u),a,v.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:As([e,w.pathname])),(v.replace?r.replace:r.push)(w,v.state,v)},[e,r,u,a,n])}const m1=q.createContext(null);function g1(n){let e=q.useContext(Fi).outlet;return e&&q.createElement(m1.Provider,{value:n},e)}function h0(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=q.useContext(js),{matches:s}=q.useContext(Fi),{pathname:a}=Us(),u=JSON.stringify(Mm(s,r.v7_relativeSplatPath));return q.useMemo(()=>Fm(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function y1(n,e){return v1(n,e)}function v1(n,e,t,r){$a()||Rt(!1);let{navigator:s}=q.useContext(js),{matches:a}=q.useContext(Fi),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=Us(),v;if(e){var w;let A=typeof e=="string"?za(e):e;f==="/"||(w=A.pathname)!=null&&w.startsWith(f)||Rt(!1),v=A}else v=m;let T=v.pathname||"/",P=T;if(f!=="/"){let A=f.replace(/^\//,"").split("/");P="/"+T.replace(/^\//,"").split("/").slice(A.length).join("/")}let R=$C(n,{pathname:P}),O=S1(R&&R.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:As([f,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:As([f,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),a,t,r);return e&&O?q.createElement(Wh.Provider,{value:{location:Zl({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Ts.Pop}},O):O}function _1(){let n=R1(),e=c1(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:s},t):null,null)}const w1=q.createElement(_1,null);class E1 extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?q.createElement(Fi.Provider,{value:this.props.routeContext},q.createElement(u0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function T1(n){let{routeContext:e,match:t,children:r}=n,s=q.useContext(jm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(Fi.Provider,{value:e},r)}function S1(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let v=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);v>=0||Rt(!1),u=u.slice(0,Math.min(u.length,v+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let v=0;v<u.length;v++){let w=u[v];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(m=v),w.route.id){let{loaderData:T,errors:P}=t,R=w.route.loader&&T[w.route.id]===void 0&&(!P||P[w.route.id]===void 0);if(w.route.lazy||R){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((v,w,T)=>{let P,R=!1,O=null,A=null;t&&(P=d&&w.route.id?d[w.route.id]:void 0,O=w.route.errorElement||w1,f&&(m<0&&T===0?(k1("route-fallback"),R=!0,A=null):m===T&&(R=!0,A=w.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,T+1)),Y=()=>{let Q;return P?Q=O:R?Q=A:w.route.Component?Q=q.createElement(w.route.Component,null):w.route.element?Q=w.route.element:Q=v,q.createElement(T1,{match:w,routeContext:{outlet:v,matches:$,isDataRoute:t!=null},children:Q})};return t&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?q.createElement(E1,{location:t.location,revalidation:t.revalidation,component:O,error:P,children:Y(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):Y()},null)}var d0=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(d0||{}),f0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(f0||{});function I1(n){let e=q.useContext(jm);return e||Rt(!1),e}function A1(n){let e=q.useContext(d1);return e||Rt(!1),e}function C1(n){let e=q.useContext(Fi);return e||Rt(!1),e}function p0(n){let e=C1(),t=e.matches[e.matches.length-1];return t.route.id||Rt(!1),t.route.id}function R1(){var n;let e=q.useContext(u0),t=A1(),r=p0();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function P1(){let{router:n}=I1(d0.UseNavigateStable),e=p0(f0.UseNavigateStable),t=q.useRef(!1);return c0(()=>{t.current=!0}),q.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Zl({fromRouteId:e},a)))},[n,e])}const S_={};function k1(n,e,t){S_[n]||(S_[n]=!0)}function b1(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function mh(n){let{to:e,replace:t,state:r,relative:s}=n;$a()||Rt(!1);let{future:a,static:u}=q.useContext(js),{matches:d}=q.useContext(Fi),{pathname:f}=Us(),m=ji(),v=Fm(e,Mm(d,a.v7_relativeSplatPath),f,s==="path"),w=JSON.stringify(v);return q.useEffect(()=>m(JSON.parse(w),{replace:t,state:r,relative:s}),[m,w,s,t,r]),null}function x1(n){return g1(n.context)}function Rr(n){Rt(!1)}function O1(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Ts.Pop,navigator:a,static:u=!1,future:d}=n;$a()&&Rt(!1);let f=e.replace(/^\/*/,"/"),m=q.useMemo(()=>({basename:f,navigator:a,static:u,future:Zl({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=za(r));let{pathname:v="/",search:w="",hash:T="",state:P=null,key:R="default"}=r,O=q.useMemo(()=>{let A=Vm(v,f);return A==null?null:{location:{pathname:A,search:w,hash:T,state:P,key:R},navigationType:s}},[f,v,w,T,P,R,s]);return O==null?null:q.createElement(js.Provider,{value:m},q.createElement(Wh.Provider,{children:t,value:O}))}function N1(n){let{children:e,location:t}=n;return y1(Fp(e),t)}new Promise(()=>{});function Fp(n,e){e===void 0&&(e=[]);let t=[];return q.Children.forEach(n,(r,s)=>{if(!q.isValidElement(r))return;let a=[...e,s];if(r.type===q.Fragment){t.push.apply(t,Fp(r.props.children,a));return}r.type!==Rr&&Rt(!1),!r.props.index||!r.props.children||Rt(!1);let u={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Fp(r.props.children,a)),t.push(u)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jp(){return jp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jp.apply(this,arguments)}function D1(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function L1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function V1(n,e){return n.button===0&&(!e||e==="_self")&&!L1(n)}const M1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],F1="6";try{window.__reactRouterVersion=F1}catch{}const j1="startTransition",I_=DC[j1];function U1(n){let{basename:e,children:t,future:r,window:s}=n,a=q.useRef();a.current==null&&(a.current=UC({window:s,v5Compat:!0}));let u=a.current,[d,f]=q.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},v=q.useCallback(w=>{m&&I_?I_(()=>f(w)):f(w)},[f,m]);return q.useLayoutEffect(()=>u.listen(v),[u,v]),q.useEffect(()=>b1(r),[r]),q.createElement(O1,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:r})}const B1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$1=q.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:v,viewTransition:w}=e,T=D1(e,M1),{basename:P}=q.useContext(js),R,O=!1;if(typeof m=="string"&&z1.test(m)&&(R=m,B1))try{let Q=new URL(window.location.href),ne=m.startsWith("//")?new URL(Q.protocol+m):new URL(m),de=Vm(ne.pathname,P);ne.origin===Q.origin&&de!=null?m=de+ne.search+ne.hash:O=!0}catch{}let A=f1(m,{relative:s}),$=W1(m,{replace:u,state:d,target:f,preventScrollReset:v,relative:s,viewTransition:w});function Y(Q){r&&r(Q),Q.defaultPrevented||$(Q)}return q.createElement("a",jp({},T,{href:R||A,onClick:O||a?r:Y,ref:t,target:f}))});var A_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(A_||(A_={}));var C_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(C_||(C_={}));function W1(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,f=ji(),m=Us(),v=h0(n,{relative:u});return q.useCallback(w=>{if(V1(w,t)){w.preventDefault();let T=r!==void 0?r:ph(m)===ph(v);f(n,{replace:T,state:s,preventScrollReset:a,relative:u,viewTransition:d})}},[m,f,v,r,s,t,n,a,u,d])}const q1=()=>{};var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},H1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},g0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(T=64)),r.push(t[v],t[w],t[T],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(m0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):H1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||w==null)throw new G1;const T=a<<2|d>>4;if(r.push(T),m!==64){const P=d<<4&240|m>>2;if(r.push(P),w!==64){const R=m<<6&192|w;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class G1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K1=function(n){const e=m0(n);return g0.encodeByteArray(e,!0)},gh=function(n){return K1(n).replace(/\./g,"")},y0=function(n){try{return g0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=()=>Q1().__FIREBASE_DEFAULTS__,J1=()=>{if(typeof process>"u"||typeof R_>"u")return;const n=R_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},X1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&y0(n[1]);return e&&JSON.parse(e)},qh=()=>{try{return q1()||Y1()||J1()||X1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},v0=n=>{var e,t;return(t=(e=qh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Z1=n=>{const e=v0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},_0=()=>{var n;return(n=qh())===null||n===void 0?void 0:n.config},w0=n=>{var e;return(e=qh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function E0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gh(JSON.stringify(t)),gh(JSON.stringify(u)),""].join(".")}const ql={};function nR(){const n={prod:[],emulator:[]};for(const e of Object.keys(ql))ql[e]?n.emulator.push(e):n.prod.push(e);return n}function rR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let P_=!1;function T0(n,e){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||ql[n]===e||ql[n]||P_)return;ql[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=nR().prod.length>0;function u(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,P){T.setAttribute("width","24"),T.setAttribute("id",P),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{P_=!0,u()},T}function v(T,P){T.setAttribute("id",P),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=rR(r),P=t("text"),R=document.getElementById(P)||document.createElement("span"),O=t("learnmore"),A=document.getElementById(O)||document.createElement("a"),$=t("preprendIcon"),Y=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;d(Q),v(A,O);const ne=m();f(Y,$),Q.append(Y,R,A,ne),document.body.appendChild(Q)}a?(R.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function sR(){var n;const e=(n=qh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function aR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lR(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uR(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I0(){try{return typeof indexedDB=="object"}catch{return!1}}function A0(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function cR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="FirebaseError";class Nr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hR,Object.setPrototypeOf(this,Nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?dR(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Nr(s,d,r)}}function dR(n,e){return n.replace(fR,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fR=/\{\$([^}]+)}/g;function pR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bs(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(k_(a)&&k_(u)){if(!bs(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function k_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function jl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mR(n,e){const t=new gR(n,e);return t.subscribe.bind(t)}class gR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");yR(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=fp),s.error===void 0&&(s.error=fp),s.complete===void 0&&(s.complete=fp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=1e3,_R=2,wR=4*60*60*1e3,ER=.5;function b_(n,e=vR,t=_R){const r=e*Math.pow(t,n),s=Math.round(ER*r*(Math.random()-.5)*2);return Math.min(wR,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n){return n&&n._delegate?n._delegate:n}class br{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new eR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IR(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(n){return n===Eo?void 0:n}function IR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const CR={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},RR=Ue.INFO,PR={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},kR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=PR[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hh{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=kR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const bR=(n,e)=>e.some(t=>n instanceof t);let x_,O_;function xR(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OR(){return O_||(O_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C0=new WeakMap,Up=new WeakMap,R0=new WeakMap,pp=new WeakMap,Um=new WeakMap;function NR(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Cs(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&C0.set(t,n)}).catch(()=>{}),Um.set(e,n),e}function DR(n){if(Up.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Up.set(n,e)}let Bp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||R0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LR(n){Bp=n(Bp)}function VR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(mp(this),e,...t);return R0.set(r,e.sort?e.sort():[e]),Cs(r)}:OR().includes(n)?function(...e){return n.apply(mp(this),e),Cs(C0.get(this))}:function(...e){return Cs(n.apply(mp(this),e))}}function MR(n){return typeof n=="function"?VR(n):(n instanceof IDBTransaction&&DR(n),bR(n,xR())?new Proxy(n,Bp):n)}function Cs(n){if(n instanceof IDBRequest)return NR(n);if(pp.has(n))return pp.get(n);const e=MR(n);return e!==n&&(pp.set(n,e),Um.set(e,n)),e}const mp=n=>Um.get(n);function P0(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=Cs(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Cs(u.result),f.oldVersion,f.newVersion,Cs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const FR=["get","getKey","getAll","getAllKeys","count"],jR=["put","add","delete","clear"],gp=new Map;function N_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gp.get(e))return gp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=jR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FR.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return gp.set(e,a),a}LR(n=>({...n,get:(e,t,r)=>N_(e,t)||n.get(e,t,r),has:(e,t)=>!!N_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function BR(n){const e=n.getComponent();return e?.type==="VERSION"}const zp="@firebase/app",D_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new Hh("@firebase/app"),zR="@firebase/app-compat",$R="@firebase/analytics-compat",WR="@firebase/analytics",qR="@firebase/app-check-compat",HR="@firebase/app-check",GR="@firebase/auth",KR="@firebase/auth-compat",QR="@firebase/database",YR="@firebase/data-connect",JR="@firebase/database-compat",XR="@firebase/functions",ZR="@firebase/functions-compat",eP="@firebase/installations",tP="@firebase/installations-compat",nP="@firebase/messaging",rP="@firebase/messaging-compat",iP="@firebase/performance",sP="@firebase/performance-compat",oP="@firebase/remote-config",aP="@firebase/remote-config-compat",lP="@firebase/storage",uP="@firebase/storage-compat",cP="@firebase/firestore",hP="@firebase/ai",dP="@firebase/firestore-compat",fP="firebase",pP="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="[DEFAULT]",mP={[zp]:"fire-core",[zR]:"fire-core-compat",[WR]:"fire-analytics",[$R]:"fire-analytics-compat",[HR]:"fire-app-check",[qR]:"fire-app-check-compat",[GR]:"fire-auth",[KR]:"fire-auth-compat",[QR]:"fire-rtdb",[YR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[XR]:"fire-fn",[ZR]:"fire-fn-compat",[eP]:"fire-iid",[tP]:"fire-iid-compat",[nP]:"fire-fcm",[rP]:"fire-fcm-compat",[iP]:"fire-perf",[sP]:"fire-perf-compat",[oP]:"fire-rc",[aP]:"fire-rc-compat",[lP]:"fire-gcs",[uP]:"fire-gcs-compat",[cP]:"fire-fst",[dP]:"fire-fst-compat",[hP]:"fire-vertex","fire-js":"fire-js",[fP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map,gP=new Map,Wp=new Map;function L_(n,e){try{n.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function si(n){const e=n.name;if(Wp.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;Wp.set(e,n);for(const t of yh.values())L_(t,n);for(const t of gP.values())L_(t,n);return!0}function Mo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Vo("app","Firebase",yP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=pP;function k0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$p,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Rs.create("bad-app-name",{appName:String(s)});if(t||(t=_0()),!t)throw Rs.create("no-options");const a=yh.get(s);if(a){if(bs(t,a.options)&&bs(r,a.config))return a;throw Rs.create("duplicate-app",{appName:s})}const u=new AR(s);for(const f of Wp.values())u.addComponent(f);const d=new vP(t,r,u);return yh.set(s,d),d}function Bm(n=$p){const e=yh.get(n);if(!e&&n===$p&&_0())return k0();if(!e)throw Rs.create("no-app",{appName:n});return e}function lr(n,e,t){var r;let s=(r=mP[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(d.join(" "));return}si(new br(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="firebase-heartbeat-database",wP=1,eu="firebase-heartbeat-store";let yp=null;function b0(){return yp||(yp=P0(_P,wP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(eu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Rs.create("idb-open",{originalErrorMessage:n.message})})),yp}async function EP(n){try{const t=(await b0()).transaction(eu),r=await t.objectStore(eu).get(x0(n));return await t.done,r}catch(e){if(e instanceof Nr)Di.warn(e.message);else{const t=Rs.create("idb-get",{originalErrorMessage:e?.message});Di.warn(t.message)}}}async function V_(n,e){try{const r=(await b0()).transaction(eu,"readwrite");await r.objectStore(eu).put(e,x0(n)),await r.done}catch(t){if(t instanceof Nr)Di.warn(t.message);else{const r=Rs.create("idb-set",{originalErrorMessage:t?.message});Di.warn(r.message)}}}function x0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=1024,SP=30;class IP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=M_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>SP){const u=RP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=M_(),{heartbeatsToSend:r,unsentEntries:s}=AP(this._heartbeatsCache.heartbeats),a=gh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Di.warn(t),""}}}function M_(){return new Date().toISOString().substring(0,10)}function AP(n,e=TP){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),F_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),F_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class CP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I0()?A0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return V_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function F_(n){return gh(JSON.stringify({version:2,heartbeats:n})).length}function RP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){si(new br("platform-logger",e=>new UR(e),"PRIVATE")),si(new br("heartbeat",e=>new IP(e),"PRIVATE")),lr(zp,D_,n),lr(zp,D_,"esm2017"),lr("fire-js","")}PP("");function zm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function O0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kP=O0,N0=new Vo("auth","Firebase",O0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Hh("@firebase/auth");function bP(n,...e){vh.logLevel<=Ue.WARN&&vh.warn(`Auth (${qa}): ${n}`,...e)}function Zc(n,...e){vh.logLevel<=Ue.ERROR&&vh.error(`Auth (${qa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(n,...e){throw $m(n,...e)}function Zr(n,...e){return $m(n,...e)}function D0(n,e,t){const r=Object.assign(Object.assign({},kP()),{[e]:t});return new Vo("auth","Firebase",r).create(e,{appName:n.name})}function Oi(n){return D0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $m(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return N0.create(n,...e)}function Te(n,e,...t){if(!n)throw $m(e,...t)}function Pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zc(e),new Error(e)}function Li(n,e){n||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function xP(){return j_()==="http:"||j_()==="https:"}function j_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xP()||S0()||"connection"in navigator)?navigator.onLine:!0}function NP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Li(t>e,"Short delay should be less than long delay!"),this.isMobile=iR()||aR()}get(){return OP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n,e){Li(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VP=new pu(3e4,6e4);function Bs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function zs(n,e,t,r,s={}){return V0(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=fu(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return oR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Wa(n.emulatorConfig.host)&&(m.credentials="include"),L0.fetch()(await M0(n,n.config.apiHost,t,d),m)})}async function V0(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},DP),e);try{const s=new FP(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw zc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw zc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw zc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw zc(n,"user-disabled",u);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw D0(n,v,m);xr(n,v)}}catch(s){if(s instanceof Nr)throw s;xr(n,"network-request-failed",{message:String(s)})}}async function mu(n,e,t,r,s={}){const a=await zs(n,e,t,r,s);return"mfaPendingCredential"in a&&xr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function M0(n,e,t,r){const s=`${e}${t}?${r}`,a=n,u=a.config.emulator?Wm(n.config,s):`${n.config.apiScheme}://${s}`;return LP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function MP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),VP.get())})}}function zc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Zr(n,e,r);return s.customData._tokenResponse=t,s}function U_(n){return n!==void 0&&n.enterprise!==void 0}class jP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UP(n,e){return zs(n,"GET","/v2/recaptchaConfig",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(n,e){return zs(n,"POST","/v1/accounts:delete",e)}async function _h(n,e){return zs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n,e=!1){return Et(n).getIdToken(e)}async function Kh(n,e=!1){const t=Et(n),r=await t.getIdToken(e),s=qm(r);Te(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:r,authTime:Hl(vp(s.auth_time)),issuedAtTime:Hl(vp(s.iat)),expirationTime:Hl(vp(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function vp(n){return Number(n)*1e3}function qm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Zc("JWT malformed, contained fewer than 3 sections"),null;try{const s=y0(t);return s?JSON.parse(s):(Zc("Failed to decode base64 JWT payload"),null)}catch(s){return Zc("Caught error parsing JWT payload as JSON",s?.toString()),null}}function B_(n){const e=qm(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Nr&&zP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function zP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hl(this.lastLoginAt),this.creationTime=Hl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await tu(n,_h(t,{idToken:r}));Te(s?.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?F0(a.providerUserInfo):[],d=qP(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!d?.length,v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Hp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function WP(n){const e=Et(n);await wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qP(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function F0(n){return n.map(e=>{var{providerId:t}=e,r=zm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(n,e){const t=await V0(n,{},async()=>{const r=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await M0(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&Wa(n.emulatorConfig.host)&&(f.credentials="include"),L0.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GP(n,e){return zs(n,"POST","/v2/accounts:revokeToken",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=B_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await HP(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new xa;return r&&(Te(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Te(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=zm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $P(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Hp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await tu(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Kh(this,e)}reload(){return WP(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await tu(this,BP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,v;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,R=(u=t.photoURL)!==null&&u!==void 0?u:void 0,O=(d=t.tenantId)!==null&&d!==void 0?d:void 0,A=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,$=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Q,emailVerified:ne,isAnonymous:de,providerData:ae,stsTokenManager:N}=t;Te(Q&&N,e,"internal-error");const I=xa.fromJSON(this.name,N);Te(typeof Q=="string",e,"internal-error"),gs(w,e.name),gs(T,e.name),Te(typeof ne=="boolean",e,"internal-error"),Te(typeof de=="boolean",e,"internal-error"),gs(P,e.name),gs(R,e.name),gs(O,e.name),gs(A,e.name),gs($,e.name),gs(Y,e.name);const b=new Pr({uid:Q,auth:e,email:T,emailVerified:ne,displayName:w,isAnonymous:de,photoURL:R,phoneNumber:P,tenantId:O,stsTokenManager:I,createdAt:$,lastLoginAt:Y});return ae&&Array.isArray(ae)&&(b.providerData=ae.map(D=>Object.assign({},D))),A&&(b._redirectEventId=A),b}static async _fromIdTokenResponse(e,t,r=!1){const s=new xa;s.updateFromServerResponse(t);const a=new Pr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await wh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Te(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?F0(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,d=new xa;d.updateFromIdToken(r);const f=new Pr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function ki(n){Li(n instanceof Function,"Expected a class definition");let e=z_.get(n);return e?(Li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,z_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}j0.type="NONE";const $_=j0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(n,e,t){return`firebase:${n}:${e}:${t}`}class Oa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=eh(this.userKey,s.apiKey,a),this.fullPersistenceKey=eh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _h(this.auth,{idToken:e}).catch(()=>{});return t?Pr._fromGetAccountInfoResponse(this.auth,t,e):null}return Pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Oa(ki($_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||ki($_);const u=eh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){let w;if(typeof v=="string"){const T=await _h(e,{idToken:v}).catch(()=>{});if(!T)break;w=await Pr._fromGetAccountInfoResponse(e,T,v)}else w=Pr._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Oa(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new Oa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q0(e))return"Blackberry";if(H0(e))return"Webos";if(B0(e))return"Safari";if((e.includes("chrome/")||z0(e))&&!e.includes("edge/"))return"Chrome";if(W0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function U0(n=dn()){return/firefox\//i.test(n)}function B0(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z0(n=dn()){return/crios\//i.test(n)}function $0(n=dn()){return/iemobile/i.test(n)}function W0(n=dn()){return/android/i.test(n)}function q0(n=dn()){return/blackberry/i.test(n)}function H0(n=dn()){return/webos/i.test(n)}function Hm(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KP(n=dn()){var e;return Hm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QP(){return lR()&&document.documentMode===10}function G0(n=dn()){return Hm(n)||W0(n)||H0(n)||q0(n)||/windows phone/i.test(n)||$0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(n,e=[]){let t;switch(n){case"Browser":t=W_(dn());break;case"Worker":t=`${W_(dn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(n,e={}){return zs(n,"GET","/v2/passwordPolicy",Bs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=6;class ZP{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:XP,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q_(this),this.idTokenSubscription=new q_(this),this.beforeStateQueue=new YP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ki(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Oa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _h(this,{idToken:e}),r=await Pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(Oi(this));const t=e?Et(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JP(this),t=new ZP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await GP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ki(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Oa.create(this,[ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=K0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&bP(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Fo(n){return Et(n)}class q_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mR(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tk(n){Qh=n}function Q0(n){return Qh.loadJS(n)}function nk(){return Qh.recaptchaEnterpriseScript}function rk(){return Qh.gapiScript}function ik(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sk{constructor(){this.enterprise=new ok}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ok{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ak="recaptcha-enterprise",Y0="NO_RECAPTCHA";class lk{constructor(e){this.type=ak,this.auth=Fo(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{UP(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new jP(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,u(m.siteKey)}}).catch(f=>{d(f)})})}function s(a,u,d){const f=window.grecaptcha;U_(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{u(m)}).catch(()=>{u(Y0)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sk().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(d=>{if(!t&&U_(window.grecaptcha))s(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=nk();f.length!==0&&(f+=d),Q0(f).then(()=>{s(d,a,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function H_(n,e,t,r=!1,s=!1){const a=new lk(n);let u;if(s)u=Y0;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Gp(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await H_(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await H_(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n,e){const t=Mo(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(bs(a,e??{}))return s;xr(s,"already-initialized")}return t.initialize({options:e})}function ck(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ki);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function hk(n,e,t){const r=Fo(n);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=J0(e),{host:u,port:d}=dk(e),f=d===null?"":`:${d}`,m={url:`${a}//${u}${f}/`},v=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(bs(m,r.config.emulator)&&bs(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Wa(u)?(E0(`${a}//${u}${f}`),T0("Auth",!0)):fk()}function J0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dk(n){const e=J0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:G_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:G_(u)}}}function G_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function pk(n,e){return zs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(n,e){return mu(n,"POST","/v1/accounts:signInWithPassword",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(n,e){return mu(n,"POST","/v1/accounts:signInWithEmailLink",Bs(n,e))}async function yk(n,e){return mu(n,"POST","/v1/accounts:signInWithEmailLink",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Gm{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new nu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new nu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,t,"signInWithPassword",mk);case"emailLink":return gk(e,{email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gp(e,r,"signUpPassword",pk);case"emailLink":return yk(e,{idToken:t,email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(n,e){return mu(n,"POST","/v1/accounts:signInWithIdp",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="http://localhost";class ko extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=zm(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new ko(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Na(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Na(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Na(e,t)}buildRequest(){const e={requestUri:vk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wk(n){const e=Fl(jl(n)).link,t=e?Fl(jl(e)).deep_link_id:null,r=Fl(jl(n)).deep_link_id;return(r?Fl(jl(r)).link:null)||r||t||e||n}class Km{constructor(e){var t,r,s,a,u,d;const f=Fl(jl(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,v=(r=f.oobCode)!==null&&r!==void 0?r:null,w=_k((s=f.mode)!==null&&s!==void 0?s:null);Te(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=wk(e);try{return new Km(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.providerId=Ha.PROVIDER_ID}static credential(e,t){return nu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Km.parseLink(t);return Te(r,"argument-error"),nu._fromEmailAndCode(e,r.code,r.tenantId)}}Ha.PROVIDER_ID="password";Ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends X0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends gu{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ko._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vs.credential(t,r)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends gu{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends gu{constructor(){super("twitter.com")}static credential(e,t){return ko._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ws.credential(t,r)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(n,e){return mu(n,"POST","/v1/accounts:signUp",Bs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Pr._fromIdTokenResponse(e,r,s),u=K_(r);return new bo({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=K_(r);return new bo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function K_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends Nr{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Eh(e,t,r,s)}}function Z0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(n,a,e,r):a})}async function Tk(n,e,t=!1){const r=await tu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(n,e,t=!1){const{auth:r}=n;if(or(r.app))return Promise.reject(Oi(r));const s="reauthenticate";try{const a=await tu(n,Z0(r,s,e,n),t);Te(a.idToken,r,"internal-error");const u=qm(a.idToken);Te(u,r,"internal-error");const{sub:d}=u;return Te(n.uid===d,r,"user-mismatch"),bo._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&xr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(n,e,t=!1){if(or(n.app))return Promise.reject(Oi(n));const r="signIn",s=await Z0(n,r,e),a=await bo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function Ik(n,e){return eT(Fo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(n){const e=Fo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ak(n,e,t){if(or(n.app))return Promise.reject(Oi(n));const r=Fo(n),u=await Gp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ek).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&tT(n),f}),d=await bo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function Ck(n,e,t){return or(n.app)?Promise.reject(Oi(n)):Ik(Et(n),Ha.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tT(n),r})}function Rk(n,e,t,r){return Et(n).onIdTokenChanged(e,t,r)}function Pk(n,e,t){return Et(n).beforeAuthStateChanged(e,t)}function kk(n,e,t,r){return Et(n).onAuthStateChanged(e,t,r)}function bk(n){return Et(n).signOut()}const Th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=1e3,Ok=10;class rT extends nT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);QP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ok):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rT.type="LOCAL";const Nk=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends nT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iT.type="SESSION";const sT=iT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Yh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await Dk(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Qm("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function Vk(n){ei().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function Mk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fk(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jk(){return oT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firebaseLocalStorageDb",Uk=1,Sh="firebaseLocalStorage",lT="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jh(n,e){return n.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function Bk(){const n=indexedDB.deleteDatabase(aT);return new yu(n).toPromise()}function Kp(){const n=indexedDB.open(aT,Uk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Sh,{keyPath:lT})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Sh)?e(r):(r.close(),await Bk(),e(await Kp()))})})}async function Q_(n,e,t){const r=Jh(n,!0).put({[lT]:e,value:t});return new yu(r).toPromise()}async function zk(n,e){const t=Jh(n,!1).get(e),r=await new yu(t).toPromise();return r===void 0?null:r.value}function Y_(n,e){const t=Jh(n,!0).delete(e);return new yu(t).toPromise()}const $k=800,Wk=3;class uT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Wk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(jk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Mk(),!this.activeServiceWorker)return;this.sender=new Lk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await Q_(e,Th,"1"),await Y_(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Y_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Jh(s,!1).getAll();return new yu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uT.type="LOCAL";const qk=uT;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n,e){return e?ki(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Na(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gk(n){return eT(n.auth,new Ym(n),n.bypassAuthState)}function Kk(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),Sk(t,new Ym(n),n.bypassAuthState)}async function Qk(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),Tk(t,new Ym(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gk;case"linkViaPopup":case"linkViaRedirect":return Qk;case"reauthViaPopup":case"reauthViaRedirect":return Kk;default:xr(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new pu(2e3,1e4);class Pa extends cT{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Yk.get())};e()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="pendingRedirect",th=new Map;class Xk extends cT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const r=await Zk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Zk(n,e){const t=nb(e),r=tb(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function eb(n,e){th.set(n._key(),e)}function tb(n){return ki(n._redirectPersistence)}function nb(n){return eh(Jk,n.config.apiKey,n.name)}async function rb(n,e,t=!1){if(or(n.app))return Promise.reject(Oi(n));const r=Fo(n),s=Hk(r,e),u=await new Xk(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=10*60*1e3;class sb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ob(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ib&&this.cachedEventUids.clear(),this.cachedEventUids.has(J_(e))}saveEventToCache(e){this.cachedEventUids.add(J_(e)),this.lastProcessedEventTime=Date.now()}}function J_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ob(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(n,e={}){return zs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ub=/^https?/;async function cb(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ab(n);for(const t of e)try{if(hb(t))return}catch{}xr(n,"unauthorized-domain")}function hb(n){const e=qp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!ub.test(t))return!1;if(lb.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new pu(3e4,6e4);function X_(){const n=ei().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fb(n){return new Promise((e,t)=>{var r,s,a;function u(){X_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X_(),t(Zr(n,"network-request-failed"))},timeout:db.get()})}if(!((s=(r=ei().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ei().gapi)===null||a===void 0)&&a.load)u();else{const d=ik("iframefcb");return ei()[d]=()=>{gapi.load?u():t(Zr(n,"network-request-failed"))},Q0(`${rk()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw nh=null,e})}let nh=null;function pb(n){return nh=nh||fb(n),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new pu(5e3,15e3),gb="__/auth/iframe",yb="emulator/auth/iframe",vb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_b=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wb(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wm(e,yb):`https://${n.config.authDomain}/${gb}`,r={apiKey:e.apiKey,appName:n.name,v:qa},s=_b.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${fu(r).slice(1)}`}async function Eb(n){const e=await pb(n),t=ei().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:wb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vb,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=Zr(n,"network-request-failed"),d=ei().setTimeout(()=>{a(u)},mb.get());function f(){ei().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sb=500,Ib=600,Ab="_blank",Cb="http://localhost";class Z_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rb(n,e,t,r=Sb,s=Ib){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},Tb),{width:r.toString(),height:s.toString(),top:a,left:u}),m=dn().toLowerCase();t&&(d=z0(m)?Ab:t),U0(m)&&(e=e||Cb,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[P,R])=>`${T}${P}=${R},`,"");if(KP(m)&&d!=="_self")return Pb(e||"",d),new Z_(null);const w=window.open(e||"",d,v);Te(w,n,"popup-blocked");try{w.focus()}catch{}return new Z_(w)}function Pb(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="__/auth/handler",bb="emulator/auth/handler",xb=encodeURIComponent("fac");async function ew(n,e,t,r,s,a){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qa,eventId:s};if(e instanceof X0){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",pR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof gu){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${xb}=${encodeURIComponent(f)}`:"";return`${Ob(n)}?${fu(d).slice(1)}${m}`}function Ob({config:n}){return n.emulator?Wm(n,bb):`https://${n.authDomain}/${kb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="webStorageSupport";class Nb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sT,this._completeRedirectFn=rb,this._overrideRedirectResult=eb}async _openPopup(e,t,r,s){var a;Li((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await ew(e,t,r,qp(),s);return Rb(e,u,Qm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await ew(e,t,r,qp(),s);return Vk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Li(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Eb(e),r=new sb(e);return t.register("authEvent",s=>(Te(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_p,{type:_p},s=>{var a;const u=(a=s?.[0])===null||a===void 0?void 0:a[_p];u!==void 0&&t(!!u),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return G0()||B0()||Hm()}}const Db=Nb;var tw="@firebase/auth",nw="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Mb(n){si(new br("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Te(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K0(n)},m=new ek(r,s,a,f);return ck(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),si(new br("auth-internal",e=>{const t=Fo(e.getProvider("auth").getImmediate());return(r=>new Lb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(tw,nw,Vb(n)),lr(tw,nw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=5*60,jb=w0("authIdTokenMaxAge")||Fb;let rw=null;const Ub=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>jb)return;const s=t?.token;rw!==s&&(rw=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Jm(n=Bm()){const e=Mo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=uk(n,{popupRedirectResolver:Db,persistence:[qk,Nk,sT]}),r=w0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=Ub(a.toString());Pk(t,u,()=>u(t.currentUser)),Rk(t,d=>u(d))}}const s=v0("auth");return s&&hk(t,`http://${s}`),t}function Bb(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}tk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Zr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Bb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Mb("Browser");var iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,dT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function b(){}b.prototype=I.prototype,N.D=I.prototype,N.prototype=new b,N.prototype.constructor=N,N.C=function(D,M,j){for(var k=Array(arguments.length-2),je=2;je<arguments.length;je++)k[je-2]=arguments[je];return I.prototype[M].apply(D,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,I,b){b||(b=0);var D=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)D[M]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(M=0;16>M;++M)D[M]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=N.g[0],b=N.g[1],M=N.g[2];var j=N.g[3],k=I+(j^b&(M^j))+D[0]+3614090360&4294967295;I=b+(k<<7&4294967295|k>>>25),k=j+(M^I&(b^M))+D[1]+3905402710&4294967295,j=I+(k<<12&4294967295|k>>>20),k=M+(b^j&(I^b))+D[2]+606105819&4294967295,M=j+(k<<17&4294967295|k>>>15),k=b+(I^M&(j^I))+D[3]+3250441966&4294967295,b=M+(k<<22&4294967295|k>>>10),k=I+(j^b&(M^j))+D[4]+4118548399&4294967295,I=b+(k<<7&4294967295|k>>>25),k=j+(M^I&(b^M))+D[5]+1200080426&4294967295,j=I+(k<<12&4294967295|k>>>20),k=M+(b^j&(I^b))+D[6]+2821735955&4294967295,M=j+(k<<17&4294967295|k>>>15),k=b+(I^M&(j^I))+D[7]+4249261313&4294967295,b=M+(k<<22&4294967295|k>>>10),k=I+(j^b&(M^j))+D[8]+1770035416&4294967295,I=b+(k<<7&4294967295|k>>>25),k=j+(M^I&(b^M))+D[9]+2336552879&4294967295,j=I+(k<<12&4294967295|k>>>20),k=M+(b^j&(I^b))+D[10]+4294925233&4294967295,M=j+(k<<17&4294967295|k>>>15),k=b+(I^M&(j^I))+D[11]+2304563134&4294967295,b=M+(k<<22&4294967295|k>>>10),k=I+(j^b&(M^j))+D[12]+1804603682&4294967295,I=b+(k<<7&4294967295|k>>>25),k=j+(M^I&(b^M))+D[13]+4254626195&4294967295,j=I+(k<<12&4294967295|k>>>20),k=M+(b^j&(I^b))+D[14]+2792965006&4294967295,M=j+(k<<17&4294967295|k>>>15),k=b+(I^M&(j^I))+D[15]+1236535329&4294967295,b=M+(k<<22&4294967295|k>>>10),k=I+(M^j&(b^M))+D[1]+4129170786&4294967295,I=b+(k<<5&4294967295|k>>>27),k=j+(b^M&(I^b))+D[6]+3225465664&4294967295,j=I+(k<<9&4294967295|k>>>23),k=M+(I^b&(j^I))+D[11]+643717713&4294967295,M=j+(k<<14&4294967295|k>>>18),k=b+(j^I&(M^j))+D[0]+3921069994&4294967295,b=M+(k<<20&4294967295|k>>>12),k=I+(M^j&(b^M))+D[5]+3593408605&4294967295,I=b+(k<<5&4294967295|k>>>27),k=j+(b^M&(I^b))+D[10]+38016083&4294967295,j=I+(k<<9&4294967295|k>>>23),k=M+(I^b&(j^I))+D[15]+3634488961&4294967295,M=j+(k<<14&4294967295|k>>>18),k=b+(j^I&(M^j))+D[4]+3889429448&4294967295,b=M+(k<<20&4294967295|k>>>12),k=I+(M^j&(b^M))+D[9]+568446438&4294967295,I=b+(k<<5&4294967295|k>>>27),k=j+(b^M&(I^b))+D[14]+3275163606&4294967295,j=I+(k<<9&4294967295|k>>>23),k=M+(I^b&(j^I))+D[3]+4107603335&4294967295,M=j+(k<<14&4294967295|k>>>18),k=b+(j^I&(M^j))+D[8]+1163531501&4294967295,b=M+(k<<20&4294967295|k>>>12),k=I+(M^j&(b^M))+D[13]+2850285829&4294967295,I=b+(k<<5&4294967295|k>>>27),k=j+(b^M&(I^b))+D[2]+4243563512&4294967295,j=I+(k<<9&4294967295|k>>>23),k=M+(I^b&(j^I))+D[7]+1735328473&4294967295,M=j+(k<<14&4294967295|k>>>18),k=b+(j^I&(M^j))+D[12]+2368359562&4294967295,b=M+(k<<20&4294967295|k>>>12),k=I+(b^M^j)+D[5]+4294588738&4294967295,I=b+(k<<4&4294967295|k>>>28),k=j+(I^b^M)+D[8]+2272392833&4294967295,j=I+(k<<11&4294967295|k>>>21),k=M+(j^I^b)+D[11]+1839030562&4294967295,M=j+(k<<16&4294967295|k>>>16),k=b+(M^j^I)+D[14]+4259657740&4294967295,b=M+(k<<23&4294967295|k>>>9),k=I+(b^M^j)+D[1]+2763975236&4294967295,I=b+(k<<4&4294967295|k>>>28),k=j+(I^b^M)+D[4]+1272893353&4294967295,j=I+(k<<11&4294967295|k>>>21),k=M+(j^I^b)+D[7]+4139469664&4294967295,M=j+(k<<16&4294967295|k>>>16),k=b+(M^j^I)+D[10]+3200236656&4294967295,b=M+(k<<23&4294967295|k>>>9),k=I+(b^M^j)+D[13]+681279174&4294967295,I=b+(k<<4&4294967295|k>>>28),k=j+(I^b^M)+D[0]+3936430074&4294967295,j=I+(k<<11&4294967295|k>>>21),k=M+(j^I^b)+D[3]+3572445317&4294967295,M=j+(k<<16&4294967295|k>>>16),k=b+(M^j^I)+D[6]+76029189&4294967295,b=M+(k<<23&4294967295|k>>>9),k=I+(b^M^j)+D[9]+3654602809&4294967295,I=b+(k<<4&4294967295|k>>>28),k=j+(I^b^M)+D[12]+3873151461&4294967295,j=I+(k<<11&4294967295|k>>>21),k=M+(j^I^b)+D[15]+530742520&4294967295,M=j+(k<<16&4294967295|k>>>16),k=b+(M^j^I)+D[2]+3299628645&4294967295,b=M+(k<<23&4294967295|k>>>9),k=I+(M^(b|~j))+D[0]+4096336452&4294967295,I=b+(k<<6&4294967295|k>>>26),k=j+(b^(I|~M))+D[7]+1126891415&4294967295,j=I+(k<<10&4294967295|k>>>22),k=M+(I^(j|~b))+D[14]+2878612391&4294967295,M=j+(k<<15&4294967295|k>>>17),k=b+(j^(M|~I))+D[5]+4237533241&4294967295,b=M+(k<<21&4294967295|k>>>11),k=I+(M^(b|~j))+D[12]+1700485571&4294967295,I=b+(k<<6&4294967295|k>>>26),k=j+(b^(I|~M))+D[3]+2399980690&4294967295,j=I+(k<<10&4294967295|k>>>22),k=M+(I^(j|~b))+D[10]+4293915773&4294967295,M=j+(k<<15&4294967295|k>>>17),k=b+(j^(M|~I))+D[1]+2240044497&4294967295,b=M+(k<<21&4294967295|k>>>11),k=I+(M^(b|~j))+D[8]+1873313359&4294967295,I=b+(k<<6&4294967295|k>>>26),k=j+(b^(I|~M))+D[15]+4264355552&4294967295,j=I+(k<<10&4294967295|k>>>22),k=M+(I^(j|~b))+D[6]+2734768916&4294967295,M=j+(k<<15&4294967295|k>>>17),k=b+(j^(M|~I))+D[13]+1309151649&4294967295,b=M+(k<<21&4294967295|k>>>11),k=I+(M^(b|~j))+D[4]+4149444226&4294967295,I=b+(k<<6&4294967295|k>>>26),k=j+(b^(I|~M))+D[11]+3174756917&4294967295,j=I+(k<<10&4294967295|k>>>22),k=M+(I^(j|~b))+D[2]+718787259&4294967295,M=j+(k<<15&4294967295|k>>>17),k=b+(j^(M|~I))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+j&4294967295}r.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var b=I-this.blockSize,D=this.B,M=this.h,j=0;j<I;){if(M==0)for(;j<=b;)s(this,N,j),j+=this.blockSize;if(typeof N=="string"){for(;j<I;)if(D[M++]=N.charCodeAt(j++),M==this.blockSize){s(this,D),M=0;break}}else for(;j<I;)if(D[M++]=N[j++],M==this.blockSize){s(this,D),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var b=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=b&255,b/=256;for(this.u(N),N=Array(16),I=b=0;4>I;++I)for(var D=0;32>D;D+=8)N[b++]=this.g[I]>>>D&255;return N};function a(N,I){var b=d;return Object.prototype.hasOwnProperty.call(b,N)?b[N]:b[N]=I(N)}function u(N,I){this.h=I;for(var b=[],D=!0,M=N.length-1;0<=M;M--){var j=N[M]|0;D&&j==I||(b[M]=j,D=!1)}this.g=b}var d={};function f(N){return-128<=N&&128>N?a(N,function(I){return new u([I|0],0>I?-1:0)}):new u([N|0],0>N?-1:0)}function m(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return A(m(-N));for(var I=[],b=1,D=0;N>=b;D++)I[D]=N/b|0,b*=4294967296;return new u(I,0)}function v(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return A(v(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=m(Math.pow(I,8)),D=w,M=0;M<N.length;M+=8){var j=Math.min(8,N.length-M),k=parseInt(N.substring(M,M+j),I);8>j?(j=m(Math.pow(I,j)),D=D.j(j).add(m(k))):(D=D.j(b),D=D.add(m(k)))}return D}var w=f(0),T=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(O(this))return-A(this).m();for(var N=0,I=1,b=0;b<this.g.length;b++){var D=this.i(b);N+=(0<=D?D:4294967296+D)*I,I*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(R(this))return"0";if(O(this))return"-"+A(this).toString(N);for(var I=m(Math.pow(N,6)),b=this,D="";;){var M=ne(b,I).g;b=$(b,M.j(I));var j=((0<b.g.length?b.g[0]:b.h)>>>0).toString(N);if(b=M,R(b))return j+D;for(;6>j.length;)j="0"+j;D=j+D}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function R(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function O(N){return N.h==-1}n.l=function(N){return N=$(this,N),O(N)?-1:R(N)?0:1};function A(N){for(var I=N.g.length,b=[],D=0;D<I;D++)b[D]=~N.g[D];return new u(b,~N.h).add(T)}n.abs=function(){return O(this)?A(this):this},n.add=function(N){for(var I=Math.max(this.g.length,N.g.length),b=[],D=0,M=0;M<=I;M++){var j=D+(this.i(M)&65535)+(N.i(M)&65535),k=(j>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);D=k>>>16,j&=65535,k&=65535,b[M]=k<<16|j}return new u(b,b[b.length-1]&-2147483648?-1:0)};function $(N,I){return N.add(A(I))}n.j=function(N){if(R(this)||R(N))return w;if(O(this))return O(N)?A(this).j(A(N)):A(A(this).j(N));if(O(N))return A(this.j(A(N)));if(0>this.l(P)&&0>N.l(P))return m(this.m()*N.m());for(var I=this.g.length+N.g.length,b=[],D=0;D<2*I;D++)b[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<N.g.length;M++){var j=this.i(D)>>>16,k=this.i(D)&65535,je=N.i(M)>>>16,be=N.i(M)&65535;b[2*D+2*M]+=k*be,Y(b,2*D+2*M),b[2*D+2*M+1]+=j*be,Y(b,2*D+2*M+1),b[2*D+2*M+1]+=k*je,Y(b,2*D+2*M+1),b[2*D+2*M+2]+=j*je,Y(b,2*D+2*M+2)}for(D=0;D<I;D++)b[D]=b[2*D+1]<<16|b[2*D];for(D=I;D<2*I;D++)b[D]=0;return new u(b,0)};function Y(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function Q(N,I){this.g=N,this.h=I}function ne(N,I){if(R(I))throw Error("division by zero");if(R(N))return new Q(w,w);if(O(N))return I=ne(A(N),I),new Q(A(I.g),A(I.h));if(O(I))return I=ne(N,A(I)),new Q(A(I.g),I.h);if(30<N.g.length){if(O(N)||O(I))throw Error("slowDivide_ only works with positive integers.");for(var b=T,D=I;0>=D.l(N);)b=de(b),D=de(D);var M=ae(b,1),j=ae(D,1);for(D=ae(D,2),b=ae(b,2);!R(D);){var k=j.add(D);0>=k.l(N)&&(M=M.add(b),j=k),D=ae(D,1),b=ae(b,1)}return I=$(N,M.j(I)),new Q(M,I)}for(M=w;0<=N.l(I);){for(b=Math.max(1,Math.floor(N.m()/I.m())),D=Math.ceil(Math.log(b)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),j=m(b),k=j.j(I);O(k)||0<k.l(N);)b-=D,j=m(b),k=j.j(I);R(j)&&(j=T),M=M.add(j),N=$(N,k)}return new Q(M,N)}n.A=function(N){return ne(this,N).h},n.and=function(N){for(var I=Math.max(this.g.length,N.g.length),b=[],D=0;D<I;D++)b[D]=this.i(D)&N.i(D);return new u(b,this.h&N.h)},n.or=function(N){for(var I=Math.max(this.g.length,N.g.length),b=[],D=0;D<I;D++)b[D]=this.i(D)|N.i(D);return new u(b,this.h|N.h)},n.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),b=[],D=0;D<I;D++)b[D]=this.i(D)^N.i(D);return new u(b,this.h^N.h)};function de(N){for(var I=N.g.length+1,b=[],D=0;D<I;D++)b[D]=N.i(D)<<1|N.i(D-1)>>>31;return new u(b,N.h)}function ae(N,I){var b=I>>5;I%=32;for(var D=N.g.length-b,M=[],j=0;j<D;j++)M[j]=0<I?N.i(j+b)>>>I|N.i(j+b+1)<<32-I:N.i(j+b);return new u(M,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dT=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,Ps=u}).apply(typeof iw<"u"?iw:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fT,Ul,pT,rh,Qp,mT,gT,yT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var _=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var U=c[S];if(!(U in _))break e;_=_[U]}c=c[c.length-1],S=_[c],g=g(S),g!=S&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,S=!1,U={next:function(){if(!S&&_<c.length){var H=_++;return{value:g(H,c[H]),done:!1}}return S=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,S),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function T(c,g,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function P(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function R(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(S,U,H){for(var oe=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)oe[Je-2]=arguments[Je];return g.prototype[U].apply(S,oe)}}function O(c){const g=c.length;if(0<g){const _=Array(g);for(let S=0;S<g;S++)_[S]=c[S];return _}return[]}function A(c,g){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(f(S)){const U=c.length||0,H=S.length||0;c.length=U+H;for(let oe=0;oe<H;oe++)c[U+oe]=S[oe]}else c.push(S)}}class ${constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Y(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var de=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ae(c,g,_){for(const S in c)g.call(_,c[S],S,c)}function N(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function I(c){const g={};for(const _ in c)g[_]=c[_];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let _,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(_ in S)c[_]=S[_];for(let H=0;H<b.length;H++)_=b[H],Object.prototype.hasOwnProperty.call(S,_)&&(c[_]=S[_])}}function M(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function j(c){d.setTimeout(()=>{throw c},0)}function k(){var c=ue;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class je{constructor(){this.h=this.g=null}add(g,_){const S=be.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var be=new $(()=>new Me,c=>c.reset());class Me{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,se=!1,ue=new je,re=()=>{const c=d.Promise.resolve(void 0);Ce=()=>{c.then(V)}};var V=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(_){j(_)}var g=be;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}se=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c}();function Re(c,g){if(ce.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(de){e:{try{ne(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ne[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}R(Re,ce);var Ne={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Fe(c,g,_,S,U){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=U,this.key=++Oe,this.da=this.fa=!1}function lt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function tn(c){this.src=c,this.g={},this.h=0}tn.prototype.add=function(c,g,_,S,U){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var oe=_n(c,g,S,U);return-1<oe?(g=c[oe],_||(g.fa=!1)):(g=new Fe(g,this.src,H,!!S,U),g.fa=_,c.push(g)),g};function ut(c,g){var _=g.type;if(_ in c.g){var S=c.g[_],U=Array.prototype.indexOf.call(S,g,void 0),H;(H=0<=U)&&Array.prototype.splice.call(S,U,1),H&&(lt(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function _n(c,g,_,S){for(var U=0;U<c.length;++U){var H=c[U];if(!H.da&&H.listener==g&&H.capture==!!_&&H.ha==S)return U}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),Qn={};function jt(c,g,_,S,U){if(Array.isArray(g)){for(var H=0;H<g.length;H++)jt(c,g[H],_,S,U);return null}return _=Qs(_),c&&c[De]?c.K(g,_,m(S)?!!S.capture:!1,U):Lr(c,g,_,!1,S,U)}function Lr(c,g,_,S,U,H){if(!g)throw Error("Invalid event type");var oe=m(U)?!!U.capture:!!U,Je=li(c);if(Je||(c[Xe]=Je=new tn(c)),_=Je.add(g,_,S,oe,H),_.proxy)return _;if(S=Gs(),_.proxy=S,S.src=c,S.listener=_,c.addEventListener)Ee||(U=oe),U===void 0&&(U=!1),c.addEventListener(g.toString(),S,U);else if(c.attachEvent)c.attachEvent(cr(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Gs(){function c(_){return g.call(c.src,c.listener,_)}const g=Ks;return c}function ai(c,g,_,S,U){if(Array.isArray(g))for(var H=0;H<g.length;H++)ai(c,g[H],_,S,U);else S=m(S)?!!S.capture:!!S,_=Qs(_),c&&c[De]?(c=c.i,g=String(g).toString(),g in c.g&&(H=c.g[g],_=_n(H,_,S,U),-1<_&&(lt(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete c.g[g],c.h--)))):c&&(c=li(c))&&(g=c.g[g.toString()],c=-1,g&&(c=_n(g,_,S,U)),(_=-1<c?g[c]:null)&&ur(_))}function ur(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[De])ut(g.i,c);else{var _=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(_,S,c.capture):g.detachEvent?g.detachEvent(cr(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=li(g))?(ut(_,c),_.h==0&&(_.src=null,g[Xe]=null)):lt(c)}}}function cr(c){return c in Qn?Qn[c]:Qn[c]="on"+c}function Ks(c,g){if(c.da)c=!0;else{g=new Re(g,this);var _=c.listener,S=c.ha||c.src;c.fa&&ur(c),c=_.call(S,g)}return c}function li(c){return c=c[Xe],c instanceof tn?c:null}var zi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qs(c){return typeof c=="function"?c:(c[zi]||(c[zi]=function(g){return c.handleEvent(g)}),c[zi])}function Tt(){K.call(this),this.i=new tn(this),this.M=this,this.F=null}R(Tt,K),Tt.prototype[De]=!0,Tt.prototype.removeEventListener=function(c,g,_,S){ai(this,c,g,_,S)};function St(c,g){var _,S=c.F;if(S)for(_=[];S;S=S.F)_.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new ce(g,c);else if(g instanceof ce)g.target=g.target||c;else{var U=g;g=new ce(S,c),D(g,U)}if(U=!0,_)for(var H=_.length-1;0<=H;H--){var oe=g.g=_[H];U=hr(oe,S,!0,g)&&U}if(oe=g.g=c,U=hr(oe,S,!0,g)&&U,U=hr(oe,S,!1,g)&&U,_)for(H=0;H<_.length;H++)oe=g.g=_[H],U=hr(oe,S,!1,g)&&U}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],S=0;S<_.length;S++)lt(_[S]);delete c.g[g],c.h--}}this.F=null},Tt.prototype.K=function(c,g,_,S){return this.i.add(String(c),g,!1,_,S)},Tt.prototype.L=function(c,g,_,S){return this.i.add(String(c),g,!0,_,S)};function hr(c,g,_,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,H=0;H<g.length;++H){var oe=g[H];if(oe&&!oe.da&&oe.capture==_){var Je=oe.listener,Lt=oe.ha||oe.src;oe.fa&&ut(c.i,oe),U=Je.call(Lt,S)!==!1&&U}}return U&&!S.defaultPrevented}function ui(c,g,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function dr(c){c.g=ui(()=>{c.g=null,c.i&&(c.i=!1,dr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Vr extends K{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ci(c){K.call(this),this.h=c,this.g={}}R(ci,K);var Mr=[];function $i(c){ae(c.g,function(g,_){this.g.hasOwnProperty(_)&&ur(g)},c),c.g={}}ci.prototype.N=function(){ci.aa.N.call(this),$i(this)},ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ys=d.JSON.stringify,Wi=d.JSON.parse,qi=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function fr(){}fr.prototype.h=null;function Hi(c){return c.h||(c.h=c.i())}function hi(){}var wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vn(){ce.call(this,"d")}R(Vn,ce);function It(){ce.call(this,"c")}R(It,ce);var rt={},Fr=null;function Qe(){return Fr=Fr||new Tt}rt.La="serverreachability";function nn(c){ce.call(this,rt.La,c)}R(nn,ce);function pr(c){const g=Qe();St(g,new nn(g))}rt.STAT_EVENT="statevent";function di(c,g){ce.call(this,rt.STAT_EVENT,c),this.stat=g}R(di,ce);function ct(c){const g=Qe();St(g,new di(g,c))}rt.Ma="timingevent";function fi(c,g){ce.call(this,rt.Ma,c),this.size=g}R(fi,ce);function fn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function Yn(){this.g=!0}Yn.prototype.xa=function(){this.g=!1};function mr(c,g,_,S,U,H){c.info(function(){if(c.g)if(H)for(var oe="",Je=H.split("&"),Lt=0;Lt<Je.length;Lt++){var qe=Je[Lt].split("=");if(1<qe.length){var Bt=qe[0];qe=qe[1];var Pt=Bt.split("_");oe=2<=Pt.length&&Pt[1]=="type"?oe+(Bt+"="+qe+"&"):oe+(Bt+"=redacted&")}}else oe=null;else oe=H;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+g+`
`+_+`
`+oe})}function jr(c,g,_,S,U,H,oe){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+g+`
`+_+`
`+H+" "+oe})}function pn(c,g,_,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Xs(c,_)+(S?" "+S:"")})}function Js(c,g){c.info(function(){return"TIMEOUT: "+g})}Yn.prototype.info=function(){};function Xs(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var S=_[c];if(!(2>S.length)){var U=S[1];if(Array.isArray(U)&&!(1>U.length)){var H=U[0];if(H!="noop"&&H!="stop"&&H!="close")for(var oe=1;oe<U.length;oe++)U[oe]=""}}}}return Ys(_)}catch{return g}}var pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$o={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mn;function Pe(){}R(Pe,fr),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Mn=new Pe;function We(c,g,_,S){this.j=c,this.i=g,this.l=_,this.R=S||1,this.U=new ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new it}function it(){this.i=null,this.g="",this.h=!1}var Ht={},Ut={};function Ur(c,g,_){c.L=1,c.v=Ji(jn(g)),c.m=_,c.P=!0,Zs(c,null)}function Zs(c,g){c.F=Date.now(),et(c),c.A=jn(c.v);var _=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Zi(_.i,"t",S),c.C=0,_=c.j.J,c.h=new it,c.g=Hu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Vr(T(c.Y,c,c.g),c.O)),g=c.U,_=c.g,S=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(Mr[0]=U.toString()),U=Mr);for(var H=0;H<U.length;H++){var oe=jt(_,U[H],S||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),pr(),mr(c.i,c.u,c.A,c.l,c.R,c.m)}We.prototype.ca=function(c){c=c.target;const g=this.M;g&&Tn(c)==3?g.j():this.Y(c)},We.prototype.Y=function(c){try{if(c==this.g)e:{const Pt=Tn(this.g);var g=this.g.Ba();const Zn=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||al(this.g)))){this.J||Pt!=4||g==7||(g==8||0>=Zn?pr(3):pr(2)),eo(this);var _=this.g.Z();this.X=_;t:if(Wo(this)){var S=al(this.g);c="";var U=S.length,H=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),Gi(this);var oe="";break t}this.h.i=new d.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(H&&g==U-1)});S.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,jr(this.i,this.u,this.A,this.l,this.R,Pt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Lt=this.g;if((Je=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Je)){var qe=Je;break t}}qe=null}if(_=qe)pn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nl(this,_);else{this.o=!1,this.s=3,ct(12),Jn(this),Gi(this);break e}}if(this.P){_=!0;let Bn;for(;!this.J&&this.C<oe.length;)if(Bn=Ld(this,oe),Bn==Ut){Pt==4&&(this.s=4,ct(14),_=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Ht){this.s=4,ct(15),pn(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else pn(this.i,this.l,Bn,null),nl(this,Bn);if(Wo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||oe.length!=0||this.h.h||(this.s=1,ct(16),_=!1),this.o=this.o&&_,!_)pn(this.i,this.l,oe,"[Invalid Chunked Response]"),Jn(this),Gi(this);else if(0<oe.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ul(Bt),Bt.M=!0,ct(11))}}else pn(this.i,this.l,oe,null),nl(this,oe);Pt==4&&Jn(this),this.o&&!this.J&&(Pt==4?ta(this.j,this):(this.o=!1,et(this)))}else Yo(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Jn(this),Gi(this)}}}catch{}finally{}};function Wo(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ld(c,g){var _=c.C,S=g.indexOf(`
`,_);return S==-1?Ut:(_=Number(g.substring(_,S)),isNaN(_)?Ht:(S+=1,S+_>g.length?Ut:(g=g.slice(S,S+_),c.C=S+_,g)))}We.prototype.cancel=function(){this.J=!0,Jn(this)};function et(c){c.S=Date.now()+c.I,bu(c,c.I)}function bu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fn(T(c.ba,c),g)}function eo(c){c.B&&(d.clearTimeout(c.B),c.B=null)}We.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Js(this.i,this.A),this.L!=2&&(pr(),ct(17)),Jn(this),this.s=2,Gi(this)):bu(this,this.S-c)};function Gi(c){c.j.G==0||c.J||ta(c.j,c)}function Jn(c){eo(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,$i(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function nl(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||mn(_.h,c))){if(!c.K&&mn(_.h,c)&&_.G==3){try{var S=_.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)ea(_),wr(_);else break e;Zo(_),ct(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=fn(T(_.Za,_),6e3));if(1>=Ou(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else _i(_,11)}else if((c.K||_.g==c)&&ea(_),!Y(g))for(U=_.Da.g.parse(g),g=0;g<U.length;g++){let qe=U[g];if(_.T=qe[0],qe=qe[1],_.G==2)if(qe[0]=="c"){_.K=qe[1],_.ia=qe[2];const Bt=qe[3];Bt!=null&&(_.la=Bt,_.j.info("VER="+_.la));const Pt=qe[4];Pt!=null&&(_.Aa=Pt,_.j.info("SVER="+_.Aa));const Zn=qe[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(S=1.5*Zn,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Bn=c.g;if(Bn){const ao=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var H=S.h;H.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(rl(H,H.h),H.h=null))}if(S.D){const ra=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;ra&&(S.ya=ra,Ze(S.I,S.D,ra))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var oe=c;if(S.qa=qu(S,S.J?S.ia:null,S.W),oe.K){Nu(S.h,oe);var Je=oe,Lt=S.L;Lt&&(Je.I=Lt),Je.B&&(eo(Je),et(Je)),S.g=oe}else oo(S);0<_.i.length&&Wr(_)}else qe[0]!="stop"&&qe[0]!="close"||_i(_,7);else _.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?_i(_,7):Kt(_):qe[0]!="noop"&&_.l&&_.l.ta(qe),_.v=0)}}pr(4)}catch{}}var xu=class{constructor(c,g){this.g=c,this.map=g}};function to(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ou(c){return c.h?1:c.g?c.g.size:0}function mn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function rl(c,g){c.g?c.g.add(g):c.h=g}function Nu(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}to.prototype.cancel=function(){if(this.i=Du(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Du(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return O(c.i)}function qo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,S=0;S<_;S++)g.push(c[S]);return g}g=[],_=0;for(S in c)g[_++]=c[S];return g}function Ho(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const S in c)g[_++]=S;return g}}}function Ki(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Ho(c),S=qo(c),U=S.length,H=0;H<U;H++)g.call(void 0,S[H],_&&_[H],c)}var no=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vd(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var S=c[_].indexOf("="),U=null;if(0<=S){var H=c[_].substring(0,S);U=c[_].substring(S+1)}else H=c[_];g(H,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function mi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof mi){this.h=c.h,ro(this,c.j),this.o=c.o,this.g=c.g,Qi(this,c.s),this.l=c.l;var g=c.i,_=new Br;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Yi(this,_),this.m=c.m}else c&&(g=String(c).match(no))?(this.h=!1,ro(this,g[1]||"",!0),this.o=ze(g[2]||""),this.g=ze(g[3]||"",!0),Qi(this,g[4]),this.l=ze(g[5]||"",!0),Yi(this,g[6]||"",!0),this.m=ze(g[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}mi.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Xi(g,Go,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Xi(g,Go,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Xi(_,_.charAt(0)=="/"?Mu:Vu,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Xi(_,il)),c.join("")};function jn(c){return new mi(c)}function ro(c,g,_){c.j=_?ze(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Qi(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Yi(c,g,_){g instanceof Br?(c.i=g,zr(c.i,c.h)):(_||(g=Xi(g,Fu)),c.i=new Br(g,c.h))}function Ze(c,g,_){c.i.set(g,_)}function Ji(c){return Ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ze(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Xi(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Lu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Lu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Go=/[#\/\?@]/g,Vu=/[#\?:]/g,Mu=/[#\?]/g,Fu=/[#\?@]/g,il=/#/g;function Br(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Gt(c){c.g||(c.g=new Map,c.h=0,c.i&&Vd(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Br.prototype,n.add=function(c,g){Gt(this),this.i=null,c=Xn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function gr(c,g){Gt(c),g=Xn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function yr(c,g){return Gt(c),g=Xn(c,g),c.g.has(g)}n.forEach=function(c,g){Gt(this),this.g.forEach(function(_,S){_.forEach(function(U){c.call(g,U,S,this)},this)},this)},n.na=function(){Gt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let S=0;S<g.length;S++){const U=c[S];for(let H=0;H<U.length;H++)_.push(g[S])}return _},n.V=function(c){Gt(this);let g=[];if(typeof c=="string")yr(this,c)&&(g=g.concat(this.g.get(Xn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return Gt(this),this.i=null,c=Xn(this,c),yr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Zi(c,g,_){gr(c,g),0<_.length&&(c.i=null,c.g.set(Xn(c,g),O(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var S=g[_];const H=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var U=H;oe[S]!==""&&(U+="="+encodeURIComponent(String(oe[S]))),c.push(U)}}return this.i=c.join("&")};function Xn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function zr(c,g){g&&!c.j&&(Gt(c),c.i=null,c.g.forEach(function(_,S){var U=S.toLowerCase();S!=U&&(gr(this,S),Zi(this,U,_))},c)),c.j=g}function Md(c,g){const _=new Yn;if(d.Image){const S=new Image;S.onload=P(En,_,"TestLoadImage: loaded",!0,g,S),S.onerror=P(En,_,"TestLoadImage: error",!1,g,S),S.onabort=P(En,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=P(En,_,"TestLoadImage: timeout",!1,g,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function ju(c,g){const _=new Yn,S=new AbortController,U=setTimeout(()=>{S.abort(),En(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(U),H.ok?En(_,"TestPingServer: ok",!0,g):En(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),En(_,"TestPingServer: error",!1,g)})}function En(c,g,_,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(_)}catch{}}function Fd(){this.g=new qi}function Uu(c,g,_){const S=_||"";try{Ki(c,function(U,H){let oe=U;m(U)&&(oe=Ys(U)),g.push(S+H+"="+encodeURIComponent(oe))})}catch(U){throw g.push(S+"type="+encodeURIComponent("_badmap")),U}}function gi(c){this.l=c.Ub||null,this.j=c.eb||!1}R(gi,fr),gi.prototype.g=function(){return new io(this.l,this.j)},gi.prototype.i=function(c){return function(){return c}}({});function io(c,g){Tt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(io,Tt),n=io.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,_r(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_r(this)),this.g&&(this.readyState=3,_r(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?vr(this):_r(this),this.readyState==3&&Bu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,vr(this))},n.Qa=function(c){this.g&&(this.response=c,vr(this))},n.ga=function(){this.g&&vr(this)};function vr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_r(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function _r(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function yi(c){let g="";return ae(c,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function es(c,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=yi(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ze(c,g,_))}function ht(c){Tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ht,Tt);var jd=/^https?$/i,sl=["POST","PUT"];n=ht.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mn.g(),this.v=this.o?Hi(this.o):Hi(Mn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(H){so(this,H);return}if(c=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)_.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())_.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),U=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(sl,g,void 0))||S||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,oe]of _)this.g.setRequestHeader(H,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qo(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){so(this,H)}};function so(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ko(c),Un(c)}function Ko(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),Un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ol(this):this.bb())},n.bb=function(){ol(this)};function ol(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Tn(c)!=4||c.Z()!=2)){if(c.u&&Tn(c)==4)ui(c.Ea,0,c);else if(St(c,"readystatechange"),Tn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=oe===0){var U=String(c.D).match(no)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),S=!jd.test(U?U.toLowerCase():"")}_=S}if(_)St(c,"complete"),St(c,"success");else{c.m=6;try{var H=2<Tn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Ko(c)}}finally{Un(c)}}}}function Un(c,g){if(c.g){Qo(c);const _=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||St(c,"ready");try{_.onreadystatechange=S}catch{}}}function Qo(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Tn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Wi(g)}};function al(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Yo(c){const g={};c=(c.g&&2<=Tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(Y(c[S]))continue;var _=M(c[S]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=g[U]||[];g[U]=H,H.push(_)}N(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ll(c){this.Aa=0,this.i=[],this.j=new Yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,c),this.cb=$r("retryDelaySeedMs",1e4,c),this.Wa=$r("forwardChannelMaxRetries",2,c),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new to(c&&c.concurrentRequestLimit),this.Da=new Fd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ll.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,S){ct(0),this.W=c,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=qu(this,null,this.W),Wr(this)};function Kt(c){if(Jo(c),c.G==3){var g=c.U++,_=jn(c.I);if(Ze(_,"SID",c.K),Ze(_,"RID",g),Ze(_,"TYPE","terminate"),vi(c,_),g=new We(c,c.j,g),g.L=2,g.v=Ji(jn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=Hu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),et(g)}Wu(c)}function wr(c){c.g&&(ul(c),c.g.cancel(),c.g=null)}function Jo(c){wr(c),c.u&&(d.clearTimeout(c.u),c.u=null),ea(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Wr(c){if(!Fn(c.h)&&!c.s){c.s=!0;var g=c.Ga;Ce||re(),se||(Ce(),se=!0),ue.add(g,c),c.B=0}}function Ud(c,g){return Ou(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fn(T(c.Ga,c,g),$u(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new We(this,this.j,c);let H=this.o;if(this.S&&(H?(H=I(H),D(H,this.S)):H=this.S),this.m!==null||this.O||(U.H=H,H=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ts(this,U,g),_=jn(this.I),Ze(_,"RID",c),Ze(_,"CVER",22),this.D&&Ze(_,"X-HTTP-Session-Id",this.D),vi(this,_),H&&(this.O?g="headers="+encodeURIComponent(String(yi(H)))+"&"+g:this.m&&es(_,this.m,H)),rl(this.h,U),this.Ua&&Ze(_,"TYPE","init"),this.P?(Ze(_,"$req",g),Ze(_,"SID","null"),U.T=!0,Ur(U,_,null)):Ur(U,_,g),this.G=2}}else this.G==3&&(c?Xo(this,c):this.i.length==0||Fn(this.h)||Xo(this))};function Xo(c,g){var _;g?_=g.l:_=c.U++;const S=jn(c.I);Ze(S,"SID",c.K),Ze(S,"RID",_),Ze(S,"AID",c.T),vi(c,S),c.m&&c.o&&es(S,c.m,c.o),_=new We(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=ts(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rl(c.h,_),Ur(_,S,g)}function vi(c,g){c.H&&ae(c.H,function(_,S){Ze(g,S,_)}),c.l&&Ki({},function(_,S){Ze(g,S,_)})}function ts(c,g,_){_=Math.min(c.i.length,_);var S=c.l?T(c.l.Na,c.l,c):null;e:{var U=c.i;let H=-1;for(;;){const oe=["count="+_];H==-1?0<_?(H=U[0].g,oe.push("ofs="+H)):H=0:oe.push("ofs="+H);let Je=!0;for(let Lt=0;Lt<_;Lt++){let qe=U[Lt].g;const Bt=U[Lt].map;if(qe-=H,0>qe)H=Math.max(0,U[Lt].g-100),Je=!1;else try{Uu(Bt,oe,"req"+qe+"_")}catch{S&&S(Bt)}}if(Je){S=oe.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,S}function oo(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Ce||re(),se||(Ce(),se=!0),ue.add(g,c),c.v=0}}function Zo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fn(T(c.Fa,c),$u(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fn(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),wr(this),zu(this))};function ul(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function zu(c){c.g=new We(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=jn(c.qa);Ze(g,"RID","rpc"),Ze(g,"SID",c.K),Ze(g,"AID",c.T),Ze(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ze(g,"TO",c.ja),Ze(g,"TYPE","xmlhttp"),vi(c,g),c.m&&c.o&&es(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Ji(jn(g)),_.m=null,_.P=!0,Zs(_,c)}n.Za=function(){this.C!=null&&(this.C=null,wr(this),Zo(this),ct(19))};function ea(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function ta(c,g){var _=null;if(c.g==g){ea(c),ul(c),c.g=null;var S=2}else if(mn(c.h,g))_=g.D,Nu(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;S=Qe(),St(S,new fi(S,_)),Wr(c)}else oo(c);else if(U=g.s,U==3||U==0&&0<g.X||!(S==1&&Ud(c,g)||S==2&&Zo(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),U){case 1:_i(c,5);break;case 4:_i(c,10);break;case 3:_i(c,6);break;default:_i(c,2)}}}function $u(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function _i(c,g){if(c.j.info("Error code "+g),g==2){var _=T(c.fb,c),S=c.Xa;const U=!S;S=new mi(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ro(S,"https"),Ji(S),U?Md(S.toString(),_):ju(S.toString(),_)}else ct(2);c.G=0,c.l&&c.l.sa(g),Wu(c),Jo(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Wu(c){if(c.G=0,c.ka=[],c.l){const g=Du(c.h);(g.length!=0||c.i.length!=0)&&(A(c.ka,g),A(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function qu(c,g,_){var S=_ instanceof mi?jn(_):new mi(_);if(S.g!="")g&&(S.g=g+"."+S.g),Qi(S,S.s);else{var U=d.location;S=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var H=new mi(null);S&&ro(H,S),g&&(H.g=g),U&&Qi(H,U),_&&(H.l=_),S=H}return _=c.D,g=c.ya,_&&g&&Ze(S,_,g),Ze(S,"VER",c.la),vi(c,S),S}function Hu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new ht(new gi({eb:_})):new ht(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cl(){}n=cl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function na(){}na.prototype.g=function(c,g){return new gn(c,g)};function gn(c,g){Tt.call(this),this.g=new ll(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Y(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Y(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new qr(this)}R(gn,Tt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Kt(this.g)},gn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Ys(c),c=_);g.i.push(new xu(g.Ya++,c)),g.G==3&&Wr(g)},gn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,gn.aa.N.call(this)};function Gu(c){Vn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}R(Gu,Vn);function Ku(){It.call(this),this.status=1}R(Ku,It);function qr(c){this.g=c}R(qr,cl),qr.prototype.ua=function(){St(this.g,"a")},qr.prototype.ta=function(c){St(this.g,new Gu(c))},qr.prototype.sa=function(c){St(this.g,new Ku)},qr.prototype.ra=function(){St(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,yT=function(){return new na},gT=function(){return Qe()},mT=rt,Qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,rh=pi,$o.COMPLETE="complete",pT=$o,hi.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Ul=hi,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,fT=ht}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const sw="@firebase/firestore",ow="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Hh("@firebase/firestore");function Ia(){return xo.logLevel}function fe(n,...e){if(xo.logLevel<=Ue.DEBUG){const t=e.map(Xm);xo.debug(`Firestore (${Ga}): ${n}`,...t)}}function Vi(n,...e){if(xo.logLevel<=Ue.ERROR){const t=e.map(Xm);xo.error(`Firestore (${Ga}): ${n}`,...t)}}function xs(n,...e){if(xo.logLevel<=Ue.WARN){const t=e.map(Xm);xo.warn(`Firestore (${Ga}): ${n}`,...t)}}function Xm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,vT(n,r,t)}function vT(n,e,t){let r=`FIRESTORE (${Ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Vi(r),new Error(r)}function Ye(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||vT(e,s,r)}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(un.UNAUTHENTICATED))}shutdown(){}}class $b{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wb{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ni,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},d=f=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ni)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new _T(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class qb{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hb{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const r=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new aw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new aw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Kb(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function Yp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Le(r,s);{const a=wT(),u=Qb(a.encode(lw(n,t)),a.encode(lw(e,t)));return u!==0?u:Le(r,s)}}t+=r>65535?2:1}return Le(n.length,e.length)}function lw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Qb(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Le(n[t],e[t]);return Le(n.length,e.length)}function La(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="__name__";class Xr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Se(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Xr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Le(e.length,t.length)}static compareSegments(e,t){const r=Xr.isNumericId(e),s=Xr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Xr.extractNumericId(e).compare(Xr.extractNumericId(t)):Yp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ps.fromString(e.substring(4,e.length-2))}}class nt extends Xr{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new nt(t)}static emptyPath(){return new nt([])}}const Yb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Xr{construct(e,t,r){return new Xt(e,t,r)}static isValidIdentifier(e){return Yb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uw}static keyField(){return new Xt([uw])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new le(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new le(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new le(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(nt.fromString(e))}static fromName(e){return new ve(nt.fromString(e).popFirst(5))}static empty(){return new ve(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n,e,t){if(!t)throw new le(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Jb(n,e,t,r){if(e===!0&&r===!0)throw new le(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cw(n){if(!ve.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hw(n){if(ve.isDocumentKey(n))throw new le(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function Gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xh(n);throw new le(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n,e){const t={typeString:n};return e&&(t.value=e),t}function vu(n,e){if(!TT(n))throw new le(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new le(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=-62135596800,fw=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fw);return new at(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dw)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fw}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Ot("string",at._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new at(0,0))}static max(){return new Ae(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=-1;function Xb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(r===1e9?new at(t+1,0):new at(t,r));return new Os(s,ve.empty(),e)}function Zb(n){return new Os(n.readTime,n.key,ru)}class Os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Os(Ae.min(),ve.empty(),ru)}static max(){return new Os(Ae.max(),ve.empty(),ru)}}function ex(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==tx)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let s=0,a=0,u=!1;e.forEach(d=>{++s,d.next(()=>{++a,u&&a===s&&t()},f=>r(f))}),u=!0,a===s&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(s=>s?X.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new X((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{u[m]=v,++d,d===a&&r(u)},v=>s(v))}})}static doWhile(e,t){return new X((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function rx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Zh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function ed(n){return n==null}function Ih(n){return n===0&&1/n==-1/0}function ix(n){return typeof n=="number"&&Number.isInteger(n)&&!Ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="";function sx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pw(e)),e=ox(n.get(t),e);return pw(e)}function ox(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case ST:t+="";break;default:t+=a}}return t}function pw(n){return n+ST+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $s(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wc(this.root,e,this.comparator,!0)}}class Wc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Jt.RED,this.left=s??Jt.EMPTY,this.right=a??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Jt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gw(this.data.getIterator())}getIteratorFrom(e){return new gw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class gw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Ft(Xt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new AT("Invalid base64 string: "+a):a}}(e);return new en(t)}static fromUint8Array(e){const t=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const ax=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(n){if(Ye(!!n,39018),typeof n=="string"){let e=0;const t=ax.exec(n);if(Ye(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ds(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="server_timestamp",RT="__type__",PT="__previous_value__",kT="__local_write_time__";function tg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RT])===null||t===void 0?void 0:t.stringValue)===CT}function td(n){const e=n.mapValue.fields[PT];return tg(e)?td(e):e}function iu(n){const e=Ns(n.mapValue.fields[kT].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,t,r,s,a,u,d,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Ah="(default)";class su{constructor(e,t){this.projectId=e,this.database=t||Ah}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Ah}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="__type__",ux="__max__",qc={mapValue:{}},xT="__vector__",Ch="value";function Ls(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tg(n)?4:hx(n)?9007199254740991:cx(n)?10:11:Se(28295,{value:n})}function oi(n,e){if(n===e)return!0;const t=Ls(n);if(t!==Ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return iu(n).isEqual(iu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Ns(s.timestampValue),d=Ns(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Ds(s.bytesValue).isEqual(Ds(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return Ct(s.geoPointValue.latitude)===Ct(a.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ct(s.integerValue)===Ct(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Ct(s.doubleValue),d=Ct(a.doubleValue);return u===d?Ih(u)===Ih(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return La(n.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(mw(u)!==mw(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!oi(u[f],d[f])))return!1;return!0}(n,e);default:return Se(52216,{left:n})}}function ou(n,e){return(n.values||[]).find(t=>oi(t,e))!==void 0}function Va(n,e){if(n===e)return 0;const t=Ls(n),r=Ls(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(a,u){const d=Ct(a.integerValue||a.doubleValue),f=Ct(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return yw(n.timestampValue,e.timestampValue);case 4:return yw(iu(n),iu(e));case 5:return Yp(n.stringValue,e.stringValue);case 6:return function(a,u){const d=Ds(a),f=Ds(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=Le(d[m],f[m]);if(v!==0)return v}return Le(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const d=Le(Ct(a.latitude),Ct(u.latitude));return d!==0?d:Le(Ct(a.longitude),Ct(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vw(n.arrayValue,e.arrayValue);case 10:return function(a,u){var d,f,m,v;const w=a.fields||{},T=u.fields||{},P=(d=w[Ch])===null||d===void 0?void 0:d.arrayValue,R=(f=T[Ch])===null||f===void 0?void 0:f.arrayValue,O=Le(((m=P?.values)===null||m===void 0?void 0:m.length)||0,((v=R?.values)===null||v===void 0?void 0:v.length)||0);return O!==0?O:vw(P,R)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===qc.mapValue&&u===qc.mapValue)return 0;if(a===qc.mapValue)return 1;if(u===qc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const T=Yp(f[w],v[w]);if(T!==0)return T;const P=Va(d[f[w]],m[v[w]]);if(P!==0)return P}return Le(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Se(23264,{le:t})}}function yw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Ns(n),r=Ns(e),s=Le(t.seconds,r.seconds);return s!==0?s:Le(t.nanos,r.nanos)}function vw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Va(t[s],r[s]);if(a)return a}return Le(t.length,r.length)}function Ma(n){return Jp(n)}function Jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ns(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ds(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Jp(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Jp(t.fields[u])}`;return s+"}"}(n.mapValue):Se(61005,{value:n})}function ih(n){switch(Ls(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=td(n);return e?16+ih(e):16;case 5:return 2*n.stringValue.length;case 6:return Ds(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+ih(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return $s(r.fields,(a,u)=>{s+=a.length+ih(u)}),s}(n.mapValue);default:throw Se(13486,{value:n})}}function _w(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xp(n){return!!n&&"integerValue"in n}function ng(n){return!!n&&"arrayValue"in n}function ww(n){return!!n&&"nullValue"in n}function Ew(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sh(n){return!!n&&"mapValue"in n}function cx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bT])===null||t===void 0?void 0:t.stringValue)===xT}function Gl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $s(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ux}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(t)}setAll(e){let t=Xt.emptyPath(),r={},s=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=Gl(u):s.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];sh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){$s(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new bn(Gl(this.value))}}function OT(n){const e=[];return $s(n.fields,(t,r)=>{const s=new Xt([t]);if(sh(r)){const a=OT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new cn(e,0,Ae.min(),Ae.min(),Ae.min(),bn.empty(),0)}static newFoundDocument(e,t,r,s){return new cn(e,1,t,Ae.min(),r,s,0)}static newNoDocument(e,t){return new cn(e,2,t,Ae.min(),Ae.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Ae.min(),Ae.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t){this.position=e,this.inclusive=t}}function Tw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=ve.comparator(ve.fromName(u.referenceValue),t.key):r=Va(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t="asc"){this.field=e,this.dir=t}}function dx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{}class xt extends NT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new px(e,t,r):t==="array-contains"?new yx(e,r):t==="in"?new vx(e,r):t==="not-in"?new _x(e,r):t==="array-contains-any"?new wx(e,r):new xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mx(e,r):new gx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Va(t,this.value)):t!==null&&Ls(this.value)===Ls(t)&&this.matchesComparison(Va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends NT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Or(e,t)}matches(e){return DT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function DT(n){return n.op==="and"}function LT(n){return fx(n)&&DT(n)}function fx(n){for(const e of n.filters)if(e instanceof Or)return!1;return!0}function Zp(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+Ma(n.value);if(LT(n))return n.filters.map(e=>Zp(e)).join(",");{const e=n.filters.map(t=>Zp(t)).join(",");return`${n.op}(${e})`}}function VT(n,e){return n instanceof xt?function(r,s){return s instanceof xt&&r.op===s.op&&r.field.isEqual(s.field)&&oi(r.value,s.value)}(n,e):n instanceof Or?function(r,s){return s instanceof Or&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,u,d)=>a&&VT(u,s.filters[d]),!0):!1}(n,e):void Se(19439)}function MT(n){return n instanceof xt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ma(t.value)}`}(n):n instanceof Or?function(t){return t.op.toString()+" {"+t.getFilters().map(MT).join(" ,")+"}"}(n):"Filter"}class px extends xt{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class mx extends xt{constructor(e,t){super(e,"in",t),this.keys=FT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gx extends xt{constructor(e,t){super(e,"not-in",t),this.keys=FT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ve.fromName(r.referenceValue))}class yx extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ng(t)&&ou(t.arrayValue,this.value)}}class vx extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ou(this.value.arrayValue,t)}}class _x extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ou(this.value.arrayValue,t)}}class wx extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ng(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.Pe=null}}function Iw(n,e=null,t=[],r=[],s=null,a=null,u=null){return new Ex(n,e,t,r,s,a,u)}function rg(n){const e=ke(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),ed(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ma(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ma(r)).join(",")),e.Pe=t}return e.Pe}function ig(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Sw(n.startAt,e.startAt)&&Sw(n.endAt,e.endAt)}function em(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Tx(n,e,t,r,s,a,u,d){return new Ya(n,e,t,r,s,a,u,d)}function nd(n){return new Ya(n)}function Aw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jT(n){return n.collectionGroup!==null}function Kl(n){const e=ke(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ft(Xt.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new au(a,r))}),t.has(Xt.keyField().canonicalString())||e.Te.push(new au(Xt.keyField(),r))}return e.Te}function ti(n){const e=ke(n);return e.Ie||(e.Ie=Sx(e,Kl(n))),e.Ie}function Sx(n,e){if(n.limitType==="F")return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new au(s.field,a)});const t=n.endAt?new Rh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rh(n.startAt.position,n.startAt.inclusive):null;return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function tm(n,e){const t=n.filters.concat([e]);return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ph(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rd(n,e){return ig(ti(n),ti(e))&&n.limitType===e.limitType}function UT(n){return`${rg(ti(n))}|lt:${n.limitType}`}function Aa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>MT(s)).join(", ")}]`),ed(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Ma(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Ma(s)).join(",")),`Target(${r})`}(ti(n))}; limitType=${n.limitType})`}function id(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ve.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Kl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,d,f){const m=Tw(u,d,f);return u.inclusive?m<=0:m<0}(r.startAt,Kl(r),s)||r.endAt&&!function(u,d,f){const m=Tw(u,d,f);return u.inclusive?m>=0:m>0}(r.endAt,Kl(r),s))}(n,e)}function Ix(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BT(n){return(e,t)=>{let r=!1;for(const s of Kl(n)){const a=Ax(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Ax(n,e,t){const r=n.field.isKeyField()?ve.comparator(e.key,t.key):function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Va(f,m):Se(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new yt(ve.comparator);function Mi(){return Cx}const zT=new yt(ve.comparator);function Bl(...n){let e=zT;for(const t of n)e=e.insert(t.key,t);return e}function $T(n){let e=zT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function To(){return Ql()}function WT(){return Ql()}function Ql(){return new jo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Rx=new yt(ve.comparator),Px=new Ft(ve.comparator);function Be(...n){let e=Px;for(const t of n)e=e.add(t);return e}const kx=new Ft(Le);function bx(){return kx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function qT(n){return{integerValue:""+n}}function xx(n,e){return ix(e)?qT(e):sg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function Ox(n,e,t){return n instanceof kh?function(s,a){const u={fields:{[RT]:{stringValue:CT},[kT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&tg(a)&&(a=td(a)),a&&(u.fields[PT]=a),{mapValue:u}}(t,e):n instanceof lu?GT(n,e):n instanceof uu?KT(n,e):function(s,a){const u=HT(s,a),d=Cw(u)+Cw(s.Ee);return Xp(u)&&Xp(s.Ee)?qT(d):sg(s.serializer,d)}(n,e)}function Nx(n,e,t){return n instanceof lu?GT(n,e):n instanceof uu?KT(n,e):t}function HT(n,e){return n instanceof bh?function(r){return Xp(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class kh extends sd{}class lu extends sd{constructor(e){super(),this.elements=e}}function GT(n,e){const t=QT(e);for(const r of n.elements)t.some(s=>oi(s,r))||t.push(r);return{arrayValue:{values:t}}}class uu extends sd{constructor(e){super(),this.elements=e}}function KT(n,e){let t=QT(e);for(const r of n.elements)t=t.filter(s=>!oi(s,r));return{arrayValue:{values:t}}}class bh extends sd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Cw(n){return Ct(n.integerValue||n.doubleValue)}function QT(n){return ng(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Dx(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof lu&&s instanceof lu||r instanceof uu&&s instanceof uu?La(r.elements,s.elements,oi):r instanceof bh&&s instanceof bh?oi(r.Ee,s.Ee):r instanceof kh&&s instanceof kh}(n.transform,e.transform)}class Lx{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class od{}function YT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new XT(n.key,kr.none()):new _u(n.key,n.data,kr.none());{const t=n.data,r=bn.empty();let s=new Ft(Xt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new Ws(n.key,r,new Hn(s.toArray()),kr.none())}}function Vx(n,e,t){n instanceof _u?function(s,a,u){const d=s.value.clone(),f=Pw(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ws?function(s,a,u){if(!oh(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=Pw(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(JT(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Yl(n,e,t,r){return n instanceof _u?function(a,u,d,f){if(!oh(a.precondition,u))return d;const m=a.value.clone(),v=kw(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ws?function(a,u,d,f){if(!oh(a.precondition,u))return d;const m=kw(a.fieldTransforms,f,u),v=u.data;return v.setAll(JT(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(a,u,d){return oh(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function Mx(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=HT(r.transform,s||null);a!=null&&(t===null&&(t=bn.empty()),t.set(r.field,a))}return t||null}function Rw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&La(r,s,(a,u)=>Dx(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _u extends od{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ws extends od{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function JT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Pw(n,e,t){const r=new Map;Ye(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Nx(u,d,t[s]))}return r}function kw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Ox(a,u,e))}return r}class XT extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fx extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Vx(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WT();return this.mutations.forEach(s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=YT(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(t,r)=>Rw(t,r))&&La(this.baseMutations,e.baseMutations,(t,r)=>Rw(t,r))}}class og{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return Rx}();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new og(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,He;function zx(n){switch(n){case J.OK:return Se(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function ZT(n){if(n===void 0)return Vi("GRPC error has no .code"),J.UNKNOWN;switch(n){case bt.OK:return J.OK;case bt.CANCELLED:return J.CANCELLED;case bt.UNKNOWN:return J.UNKNOWN;case bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case bt.INTERNAL:return J.INTERNAL;case bt.UNAVAILABLE:return J.UNAVAILABLE;case bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case bt.NOT_FOUND:return J.NOT_FOUND;case bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case bt.ABORTED:return J.ABORTED;case bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case bt.DATA_LOSS:return J.DATA_LOSS;default:return Se(39323,{code:n})}}(He=bt||(bt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Ps([4294967295,4294967295],0);function bw(n){const e=wT().encode(n),t=new dT;return t.update(e),new Uint8Array(t.digest())}function xw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ps([t,r],0),new Ps([s,a],0)]}class ag{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zl(`Invalid padding: ${t}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ps.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Ps.fromNumber(r)));return s.compare($x)===1&&(s=new Ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=bw(e),[r,s]=xw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);if(!this.ye(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new ag(a,s,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(this.fe===0)return;const t=bw(e),[r,s]=xw(t);for(let a=0;a<this.hashCount;a++){const u=this.pe(r,s,a);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ad(Ae.min(),s,new yt(Le),Mi(),Be())}}class wu{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wu(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class eS{constructor(e,t){this.targetId=e,this.De=t}}class tS{constructor(e,t,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ow{constructor(){this.ve=0,this.Ce=Nw(),this.Fe=en.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Be(),t=Be(),r=Be();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Se(38017,{changeType:a})}}),new wu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Nw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Wx{constructor(e){this.We=e,this.Ge=new Map,this.ze=Mi(),this.je=Hc(),this.Je=Hc(),this.He=new yt(Le)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(em(a))if(r===0){const u=new ve(a.path);this.Xe(t,u,cn.newNoDocument(u,Ae.min()))}else Ye(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const d=this._t(e),f=d?this.ut(d,e,u):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=Ds(r).toUint8Array()}catch(f){if(f instanceof AT)return xs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new ag(u,s,a)}catch(f){return xs(f instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const u=this.We.lt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((a,u)=>{const d=this.st(u);if(d){if(a.current&&em(d.target)){const f=new ve(d.target.path);this.Tt(f).has(u)||this.It(u,f)||this.Xe(u,f,cn.newNoDocument(f,e))}a.Ne&&(t.set(u,a.Le()),a.ke())}});let r=Be();this.Je.forEach((a,u)=>{let d=!0;u.forEachWhile(f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ze.forEach((a,u)=>u.setReadTime(e));const s=new ad(e,t,this.He,this.ze,r);return this.ze=Mi(),this.je=Hc(),this.Je=Hc(),this.He=new yt(Le),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Ow,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ft(Le),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ft(Le),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ow),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Hc(){return new yt(ve.comparator)}function Nw(){return new yt(ve.comparator)}const qx={asc:"ASCENDING",desc:"DESCENDING"},Hx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gx={and:"AND",or:"OR"};class Kx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nm(n,e){return n.useProto3Json||ed(e)?e:{value:e}}function xh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Qx(n,e){return xh(n,e.toTimestamp())}function ni(n){return Ye(!!n,49232),Ae.fromTimestamp(function(t){const r=Ns(t);return new at(r.seconds,r.nanos)}(n))}function lg(n,e){return rm(n,e).canonicalString()}function rm(n,e){const t=function(s){return new nt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rS(n){const e=nt.fromString(n);return Ye(lS(e),10190,{key:e.toString()}),e}function im(n,e){return lg(n.databaseId,e.path)}function wp(n,e){const t=rS(e);if(t.get(1)!==n.databaseId.projectId)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(sS(t))}function iS(n,e){return lg(n.databaseId,e)}function Yx(n){const e=rS(n);return e.length===4?nt.emptyPath():sS(e)}function sm(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sS(n){return Ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Dw(n,e,t){return{name:im(n,e),fields:t.value.mapValue.fields}}function Jx(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Se(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(Ye(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):(Ye(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(m){const v=m.code===void 0?J.UNKNOWN:ZT(m.code);return new le(v,m.message||"")}(u);t=new tS(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wp(n,r.document.name),a=ni(r.document.updateTime),u=r.document.createTime?ni(r.document.createTime):Ae.min(),d=new bn({mapValue:{fields:r.document.fields}}),f=cn.newFoundDocument(s,a,u,d),m=r.targetIds||[],v=r.removedTargetIds||[];t=new ah(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wp(n,r.document),a=r.readTime?ni(r.readTime):Ae.min(),u=cn.newNoDocument(s,a),d=r.removedTargetIds||[];t=new ah([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wp(n,r.document),a=r.removedTargetIds||[];t=new ah([],a,s,null)}else{if(!("filter"in e))return Se(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new Bx(s,a),d=r.targetId;t=new eS(d,u)}}return t}function Xx(n,e){let t;if(e instanceof _u)t={update:Dw(n,e.key,e.value)};else if(e instanceof XT)t={delete:im(n,e.key)};else if(e instanceof Ws)t={update:Dw(n,e.key,e.data),updateMask:aO(e.fieldMask)};else{if(!(e instanceof Fx))return Se(16599,{Rt:e.type});t={verify:im(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,u){const d=u.transform;if(d instanceof kh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof lu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bh)return{fieldPath:u.field.canonicalString(),increment:d.Ee};throw Se(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:Qx(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se(27497)}(n,e.precondition)),t}function Zx(n,e){return n&&n.length>0?(Ye(e!==void 0,14353),n.map(t=>function(s,a){let u=s.updateTime?ni(s.updateTime):ni(a);return u.isEqual(Ae.min())&&(u=ni(a)),new Lx(u,s.transformResults||[])}(t,e))):[]}function eO(n,e){return{documents:[iS(n,e.path)]}}function tO(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iS(n,s);const a=function(m){if(m.length!==0)return aS(Or.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(v=>function(T){return{field:Ca(T.field),direction:iO(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=nm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:s}}function nO(n){let e=Yx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ye(r===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const T=oS(w);return T instanceof Or&&LT(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(T=>function(R){return new au(Ra(R.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,ed(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(w){const T=!!w.before,P=w.values||[];return new Rh(P,T)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const T=!w.before,P=w.values||[];return new Rh(P,T)}(t.endAt)),Tx(e,s,u,a,d,"F",f,m)}function rO(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ra(t.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ra(t.unaryFilter.field);return xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ra(t.unaryFilter.field);return xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ra(t.unaryFilter.field);return xt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(n):n.fieldFilter!==void 0?function(t){return xt.create(Ra(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Or.create(t.compositeFilter.filters.map(r=>oS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(t.compositeFilter.op))}(n):Se(30097,{filter:n})}function iO(n){return qx[n]}function sO(n){return Hx[n]}function oO(n){return Gx[n]}function Ca(n){return{fieldPath:n.canonicalString()}}function Ra(n){return Xt.fromServerFormat(n.fieldPath)}function aS(n){return n instanceof xt?function(t){if(t.op==="=="){if(Ew(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NAN"}};if(ww(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ew(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NAN"}};if(ww(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(t.field),op:sO(t.op),value:t.value}}}(n):n instanceof Or?function(t){const r=t.getFilters().map(s=>aS(s));return r.length===1?r[0]:{compositeFilter:{op:oO(t.op),filters:r}}}(n):Se(54877,{filter:n})}function aO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,r,s,a=Ae.min(),u=Ae.min(),d=en.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.gt=e}}function uO(n){const e=nO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.Dn=new hO}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Os.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class hO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ft(nt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uS=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(uS,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Fa(0)}static ur(){return new Fa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="LruGarbageCollector",dO=1048576;function Mw([n,e],[t,r]){const s=Le(n,t);return s===0?Le(e,r):s}class fO{constructor(e){this.Tr=e,this.buffer=new Ft(Mw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Mw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){fe(Vw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qa(t)?fe(Vw,"Ignoring IndexedDB error during garbage collection: ",t):await Ka(t)}await this.Rr(3e5)})}}class mO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Zh.ue);const r=new fO(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Lw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lw):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,u,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,u=Date.now(),this.nthSequenceNumber(e,s))).next(w=>(r=w,d=Date.now(),this.removeTargets(e,r,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(m=Date.now(),Ia()<=Ue.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w})))}}function gO(n,e){return new mO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.changes=new jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Yl(r.mutation,s,Hn.empty(),at.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const s=To();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let u=Bl();return a.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=To();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,s){let a=Mi();const u=Ql(),d=function(){return Ql()}();return t.forEach((f,m)=>{const v=r.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Ws)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),Yl(v.mutation,m,v.mutation.getFieldMask(),at.now())):u.set(m.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>u.set(m,v)),t.forEach((m,v)=>{var w;return d.set(m,new vO(v,(w=u.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Ql();let s=new yt((u,d)=>u-d),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||Hn.empty();v=d.applyToLocalView(m,v),r.set(f,v);const w=(s.get(d.batchId)||Be()).add(f);s=s.insert(d.batchId,w)})}).next(()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,w=WT();v.forEach(T=>{if(!a.has(T)){const P=YT(t.get(T),r.get(T));P!==null&&w.set(T,P),a=a.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return X.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):X.resolve(To());let d=ru,f=a;return u.next(m=>X.forEach(m,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?X.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{f=f.insert(v,T)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,Be())).next(v=>({batchId:d,changes:$T(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let s=Bl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=Bl();return this.indexManager.getCollectionParents(e,a).next(d=>X.forEach(d,f=>{const m=function(w,T){return new Ya(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(v=>{v.forEach((w,T)=>{u=u.insert(w,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(u=>{a.forEach((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,cn.newInvalidDocument(v)))});let d=Bl();return u.forEach((f,m)=>{const v=a.get(f);v!==void 0&&Yl(v.mutation,m,Hn.empty(),at.now()),id(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ni(s.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:uO(s.bundledQuery),readTime:ni(s.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.overlays=new yt(ve.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=To();return X.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.wt(e,t,a)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const s=To(),a=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return X.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new yt((m,v)=>m-v);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=To(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=To(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=s)););return X.resolve(d)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Ux(t,r));let a=this.kr.get(t);a===void 0&&(a=Be(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.qr=new Ft(qt.Qr),this.$r=new Ft(qt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new qt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new qt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new ve(new nt([])),r=new qt(t,e),s=new qt(t,e+1),a=[];return this.$r.forEachInRange([r,s],u=>{this.Wr(u),a.push(u.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ve(new nt([])),r=new qt(t,e),s=new qt(t,e+1);let a=Be();return this.$r.forEachInRange([r,s],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new qt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ve.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ft(qt.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new jx(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Yr=this.Yr.add(new qt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return X.resolve(u)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?eg:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qt(t,0),s=new qt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],u=>{const d=this.Zr(u.Hr);a.push(d)}),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ft(Le);return t.forEach(s=>{const a=new qt(s,0),u=new qt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,u],d=>{r=r.add(d.Hr)})}),X.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;ve.isDocumentKey(a)||(a=a.child(""));const u=new qt(new ve(a),0);let d=new Ft(Le);return this.Yr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.Hr)),!0)},u),X.resolve(this.ei(d))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ye(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return X.forEach(t.mutations,s=>{const a=new qt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new qt(t,0),s=this.Yr.firstAfterOrEqual(r);return X.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.ni=e,this.docs=function(){return new yt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let r=Mi();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():cn.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Mi();const u=t.path,d=new ve(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||ex(Zb(v),r)<=0||(s.has(v.key)||id(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Se(9500)}ri(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AO(this)}getSize(e){return X.resolve(this.size)}}class AO extends yO{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.persistence=e,this.ii=new jo(t=>rg(t),ig),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new ug,this.targetCount=0,this._i=Fa.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),X.waitFor(a).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t){this.ai={},this.overlays={},this.ui=new Zh(0),this.ci=!1,this.ci=!0,this.li=new TO,this.referenceDelegate=e(this),this.hi=new CO(this),this.indexManager=new cO,this.remoteDocumentCache=function(s){return new IO(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new lO(t),this.Ti=new wO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new SO(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const s=new RO(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,t){return X.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class RO extends nx{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ai=new ug,this.Ri=null}static Vi(e){return new cg(e)}get mi(){if(this.Ri)return this.Ri;throw Se(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,r=>{const s=ve.fromPath(r);return this.fi(e,s).next(a=>{a||t.removeEntry(s,Ae.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Oh{constructor(e,t){this.persistence=e,this.gi=new jo(r=>sx(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=gO(this,t)}static Vi(e,t){return new Oh(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return X.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?X.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,u=>this.Sr(e,u,t).next(d=>{d||(r++,a.removeEntry(u,Ae.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ih(e.data.value)),t}Sr(e,t,r){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Be(),s=Be();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new hg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return uR()?8:rx(dn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ys(e,t,s,r).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new PO;return this.ws(e,t,u).next(d=>{if(a.result=d,this.Rs)return this.Ss(e,t,u,d.size)})}).next(()=>a.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ia()<=Ue.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Aa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Ia()<=Ue.DEBUG&&fe("QueryEngine","Query:",Aa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ia()<=Ue.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Aa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):X.resolve())}ps(e,t){if(Aw(t))return X.resolve(null);let r=ti(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Ph(t,null,"F"),r=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=Be(...a);return this.gs.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.bs(t,d);return this.Ds(t,m,u,f.readTime)?this.ps(e,Ph(t,null,"F")):this.vs(e,m,t,f)}))})))}ys(e,t,r,s){return Aw(t)||s.isEqual(Ae.min())?X.resolve(null):this.gs.getDocuments(e,r).next(a=>{const u=this.bs(t,a);return this.Ds(t,u,r,s)?X.resolve(null):(Ia()<=Ue.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Aa(t)),this.vs(e,u,t,Xb(s,ru)).next(d=>d))})}bs(e,t){let r=new Ft(BT(e));return t.forEach((s,a)=>{id(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Ia()<=Ue.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Aa(t)),this.gs.getDocumentsMatchingQuery(e,t,Os.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",bO=3e8;class xO{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new yt(Le),this.Ms=new jo(a=>rg(a),ig),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _O(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function OO(n,e,t,r){return new xO(n,e,t,r)}async function hS(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let f=Be();for(const m of s){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next(m=>({Bs:m,removedBatchIds:u,addedBatchIds:d}))})})}function NO(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(d,f,m,v){const w=m.batch,T=w.keys();let P=X.resolve();return T.forEach(R=>{P=P.next(()=>v.getEntry(f,R)).next(O=>{const A=m.docVersions.get(R);Ye(A!==null,48541),O.version.compareTo(A)<0&&(w.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),v.addEntry(O)))})}),P.next(()=>d.mutationQueue.removeMutationBatch(f,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=Be();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function dS(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function DO(n,e){const t=ke(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const d=[];e.targetChanges.forEach((v,w)=>{const T=s.get(w);if(!T)return;d.push(t.hi.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.hi.addMatchingKeys(a,v.addedDocuments,w)));let P=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(en.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,r)),s=s.insert(w,P),function(O,A,$){return O.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=bO?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(T,P,v)&&d.push(t.hi.updateTargetData(a,P))});let f=Mi(),m=Be();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(LO(a,u,e.documentUpdates).next(v=>{f=v.Ls,m=v.ks})),!r.isEqual(Ae.min())){const v=t.hi.getLastRemoteSnapshotVersion(a).next(w=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(v)}return X.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.Fs=s,a))}function LO(n,e,t){let r=Be(),s=Be();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=Mi();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(Ae.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):fe(dg,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Ls:u,ks:s}})}function VO(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=eg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MO(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(a=>a?(s=a,X.resolve(s)):t.hi.allocateTargetId(r).next(u=>(s=new Ss(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function om(n,e,t){const r=ke(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Qa(u))throw u;fe(dg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Fw(n,e,t){const r=ke(n);let s=Ae.min(),a=Be();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,v){const w=ke(f),T=w.Ms.get(v);return T!==void 0?X.resolve(w.Fs.get(T)):w.hi.getTargetData(m,v)}(r,u,ti(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,d.targetId).next(f=>{a=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(u,e,t?s:Ae.min(),t?a:Be())).next(d=>(FO(r,Ix(e),d),{documents:d,qs:a})))}function FO(n,e,t){let r=n.xs.get(e)||Ae.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class jw{constructor(){this.activeTargetIds=bx()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jO{constructor(){this.Fo=new jw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new jw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="ConnectivityMonitor";class Bw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){fe(Uw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){fe(Uw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc=null;function am(){return Gc===null?Gc=function(){return 268435456+Math.round(2147483648*Math.random())}():Gc++,"0x"+Gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="RestConnection",BO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zO{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ah?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const u=am(),d=this.Go(e,t.toUriEncodedString());fe(Ep,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:m}=new URL(d),v=Wa(m);return this.jo(e,d,f,r,v).then(w=>(fe(Ep,`Received RPC '${e}' ${u}: `,w),w),w=>{throw xs(Ep,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",r),w})}Jo(e,t,r,s,a,u){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ga}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,t){const r=BO[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class WO extends zO{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const u=am();return new Promise((d,f)=>{const m=new fT;m.setWithCredentials(!0),m.listenOnce(pT.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case rh.NO_ERROR:const w=m.getResponseJson();fe(ln,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case rh.TIMEOUT:fe(ln,`RPC '${e}' ${u} timed out`),f(new le(J.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const T=m.getStatus();if(fe(ln,`RPC '${e}' ${u} failed with status:`,T,"response text:",m.getResponseText()),T>0){let P=m.getResponseJson();Array.isArray(P)&&(P=P[0]);const R=P?.error;if(R&&R.status&&R.message){const O=function($){const Y=$.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN}(R.status);f(new le(O,R.message))}else f(new le(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new le(J.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{c_:e,streamId:u,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{fe(ln,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(s);fe(ln,`RPC '${e}' ${u} sending request:`,s),m.send(t,"POST",v,r,15)})}P_(e,t,r){const s=am(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=yT(),d=gT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");fe(ln,`Creating RPC '${e}' stream ${s}: ${v}`,f);const w=u.createWebChannel(v,f);this.T_(w);let T=!1,P=!1;const R=new $O({Ho:A=>{P?fe(ln,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(T||(fe(ln,`Opening RPC '${e}' stream ${s} transport.`),w.open(),T=!0),fe(ln,`RPC '${e}' stream ${s} sending:`,A),w.send(A))},Yo:()=>w.close()}),O=(A,$,Y)=>{A.listen($,Q=>{try{Y(Q)}catch(ne){setTimeout(()=>{throw ne},0)}})};return O(w,Ul.EventType.OPEN,()=>{P||(fe(ln,`RPC '${e}' stream ${s} transport opened.`),R.s_())}),O(w,Ul.EventType.CLOSE,()=>{P||(P=!0,fe(ln,`RPC '${e}' stream ${s} transport closed`),R.__(),this.I_(w))}),O(w,Ul.EventType.ERROR,A=>{P||(P=!0,xs(ln,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),R.__(new le(J.UNAVAILABLE,"The operation could not be completed")))}),O(w,Ul.EventType.MESSAGE,A=>{var $;if(!P){const Y=A.data[0];Ye(!!Y,16349);const Q=Y,ne=Q?.error||(($=Q[0])===null||$===void 0?void 0:$.error);if(ne){fe(ln,`RPC '${e}' stream ${s} received error:`,ne);const de=ne.status;let ae=function(b){const D=bt[b];if(D!==void 0)return ZT(D)}(de),N=ne.message;ae===void 0&&(ae=J.INTERNAL,N="Unknown error status: "+de+" with message "+ne.message),P=!0,R.__(new le(ae,N)),w.close()}else fe(ln,`RPC '${e}' stream ${s} received:`,Y),R.a_(Y)}}),O(d,mT.STAT_EVENT,A=>{A.stat===Qp.PROXY?fe(ln,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Qp.NOPROXY&&fe(ln,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){return new Kx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="PersistentStream";class pS{constructor(e,t,r,s,a,u,d,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Vi(t.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new le(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return fe(zw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(fe(zw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qO extends pS{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Jx(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ae.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ae.min():u.readTime?ni(u.readTime):Ae.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=sm(this.serializer),t.addTarget=function(a,u){let d;const f=u.target;if(d=em(f)?{documents:eO(a,f)}:{query:tO(a,f).Vt},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=nS(a,u.resumeToken);const m=nm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ae.min())>0){d.readTime=xh(a,u.snapshotVersion.toTimestamp());const m=nm(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=rO(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=sm(this.serializer),t.removeTarget=e,this.k_(t)}}class HO extends pS{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Zx(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=sm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xx(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{}class KO extends GO{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Wo(e,rm(t,r),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(J.UNKNOWN,a.toString())})}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Jo(e,rm(t,r),s,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new le(J.UNKNOWN,u.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class QO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Vi(t),this._a=!1):fe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="RemoteStore";class YO{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(u=>{r.enqueueAndForget(async()=>{Uo(this)&&(fe(Oo,"Restarting streams for network reachability change."),await async function(f){const m=ke(f);m.Ia.add(4),await Eu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await ud(m)}(this))})}),this.Aa=new QO(r,s)}}async function ud(n){if(Uo(n))for(const e of n.da)await e(!0)}async function Eu(n){for(const e of n.da)await e(!1)}function mS(n,e){const t=ke(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),gg(t)?mg(t):Ja(t).x_()&&pg(t,e))}function fg(n,e){const t=ke(n),r=Ja(t);t.Ta.delete(e),r.x_()&&gS(t,e),t.Ta.size===0&&(r.x_()?r.B_():Uo(t)&&t.Aa.set("Unknown"))}function pg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ja(n).H_(e)}function gS(n,e){n.Ra.$e(e),Ja(n).Y_(e)}function mg(n){n.Ra=new Wx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Ja(n).start(),n.Aa.aa()}function gg(n){return Uo(n)&&!Ja(n).M_()&&n.Ta.size>0}function Uo(n){return ke(n).Ia.size===0}function yS(n){n.Ra=void 0}async function JO(n){n.Aa.set("Online")}async function XO(n){n.Ta.forEach((e,t)=>{pg(n,e)})}async function ZO(n,e){yS(n),gg(n)?(n.Aa.la(e),mg(n)):n.Aa.set("Unknown")}async function eN(n,e,t){if(n.Aa.set("Online"),e instanceof tS&&e.state===2&&e.cause)try{await async function(s,a){const u=a.cause;for(const d of a.targetIds)s.Ta.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ta.delete(d),s.Ra.removeTarget(d))}(n,e)}catch(r){fe(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nh(n,r)}else if(e instanceof ah?n.Ra.Ye(e):e instanceof eS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ae.min()))try{const r=await dS(n.localStore);t.compareTo(r)>=0&&await function(a,u){const d=a.Ra.Pt(u);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ta.get(m);v&&a.Ta.set(m,v.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,m)=>{const v=a.Ta.get(f);if(!v)return;a.Ta.set(f,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),gS(a,f);const w=new Ss(v.target,f,m,v.sequenceNumber);pg(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){fe(Oo,"Failed to raise snapshot:",r),await Nh(n,r)}}async function Nh(n,e,t){if(!Qa(e))throw e;n.Ia.add(1),await Eu(n),n.Aa.set("Offline"),t||(t=()=>dS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{fe(Oo,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ud(n)})}function vS(n,e){return e().catch(t=>Nh(n,t,e))}async function cd(n){const e=ke(n),t=Vs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:eg;for(;tN(e);)try{const s=await VO(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,nN(e,s)}catch(s){await Nh(e,s)}_S(e)&&wS(e)}function tN(n){return Uo(n)&&n.Pa.length<10}function nN(n,e){n.Pa.push(e);const t=Vs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function _S(n){return Uo(n)&&!Vs(n).M_()&&n.Pa.length>0}function wS(n){Vs(n).start()}async function rN(n){Vs(n).na()}async function iN(n){const e=Vs(n);for(const t of n.Pa)e.X_(t.mutations)}async function sN(n,e,t){const r=n.Pa.shift(),s=og.from(r,e,t);await vS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await cd(n)}async function oN(n,e){e&&Vs(n).Z_&&await async function(r,s){if(function(u){return zx(u)&&u!==J.ABORTED}(s.code)){const a=r.Pa.shift();Vs(r).N_(),await vS(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await cd(r)}}(n,e),_S(n)&&wS(n)}async function $w(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),fe(Oo,"RemoteStore received new credentials");const r=Uo(t);t.Ia.add(3),await Eu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ud(t)}async function aN(n,e){const t=ke(n);e?(t.Ia.delete(2),await ud(t)):e||(t.Ia.add(2),await Eu(t),t.Aa.set("Unknown"))}function Ja(n){return n.Va||(n.Va=function(t,r,s){const a=ke(t);return a.ia(),new qO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:JO.bind(null,n),e_:XO.bind(null,n),n_:ZO.bind(null,n),J_:eN.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),gg(n)?mg(n):n.Aa.set("Unknown")):(await n.Va.stop(),yS(n))})),n.Va}function Vs(n){return n.ma||(n.ma=function(t,r,s){const a=ke(t);return a.ia(),new HO(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:rN.bind(null,n),n_:oN.bind(null,n),ea:iN.bind(null,n),ta:sN.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await cd(n)):(await n.ma.stop(),n.Pa.length>0&&(fe(Oo,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new yg(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vg(n,e){if(Vi("AsyncQueue",`${e}: ${n}`),Qa(n))return new le(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=Bl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Da;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.fa=new yt(ve.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Se(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class ja{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new ja(e,t,Da.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class uN{constructor(){this.queries=qw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=ke(t),a=s.queries;s.queries=qw(),a.forEach((u,d)=>{for(const f of d.wa)f.onError(r)})})(this,new le(J.ABORTED,"Firestore shutting down"))}}function qw(){return new jo(n=>UT(n),rd)}async function _g(n,e){const t=ke(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new lN,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=vg(u,`Initialization of query '${Aa(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Eg(t)}async function wg(n,e){const t=ke(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.wa.indexOf(e);u>=0&&(a.wa.splice(u,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function cN(n,e){const t=ke(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.wa)d.Ca(s)&&(r=!0);u.ya=s}}r&&Eg(t)}function hN(n,e,t){const r=ke(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function Eg(n){n.Da.forEach(e=>{e.next()})}var lm,Hw;(Hw=lm||(lm={})).Fa="default",Hw.Cache="cache";class Tg{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.key=e}}class TS{constructor(e){this.key=e}}class dN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Be(),this.mutatedKeys=Be(),this.Xa=BT(e),this.eu=new Da(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Ww,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,w)=>{const T=s.get(v),P=id(this.query,w)?w:null,R=!!T&&this.mutatedKeys.has(T.key),O=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let A=!1;T&&P?T.data.isEqual(P.data)?R!==O&&(r.track({type:3,doc:P}),A=!0):this.iu(T,P)||(r.track({type:2,doc:P}),A=!0,(f&&this.Xa(P,f)>0||m&&this.Xa(P,m)<0)&&(d=!0)):!T&&P?(r.track({type:0,doc:P}),A=!0):T&&!P&&(r.track({type:1,doc:T}),A=!0,(f||m)&&(d=!0)),A&&(P?(u=u.add(P),a=O?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{eu:u,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort((v,w)=>function(P,R){const O=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{At:A})}};return O(P)-O(R)}(v.type,w.type)||this.Xa(v.doc,w.doc)),this.su(r),s=s!=null&&s;const d=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,m=f!==this.Ya;return this.Ya=f,u.length!==0||m?{snapshot:new ja(this.query,e.eu,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ww,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Be(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new TS(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new ES(r))}),t}uu(e){this.Ha=e.qs,this.Za=Be();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ja.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Sg="SyncEngine";class fN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pN{constructor(e){this.key=e,this.lu=!1}}class mN{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new jo(d=>UT(d),rd),this.Tu=new Map,this.Iu=new Set,this.du=new yt(ve.comparator),this.Eu=new Map,this.Au=new ug,this.Ru={},this.Vu=new Map,this.mu=Fa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gN(n,e,t=!0){const r=PS(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await SS(r,e,t,!0),s}async function yN(n,e){const t=PS(n);await SS(t,e,!0,!1)}async function SS(n,e,t,r){const s=await MO(n.localStore,ti(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await vN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&mS(n.remoteStore,s),d}async function vN(n,e,t,r,s){n.gu=(w,T,P)=>async function(O,A,$,Y){let Q=A.view.nu($);Q.Ds&&(Q=await Fw(O.localStore,A.query,!1).then(({documents:N})=>A.view.nu(N,Q)));const ne=Y&&Y.targetChanges.get(A.targetId),de=Y&&Y.targetMismatches.get(A.targetId)!=null,ae=A.view.applyChanges(Q,O.isPrimaryClient,ne,de);return Kw(O,A.targetId,ae._u),ae.snapshot}(n,w,T,P);const a=await Fw(n.localStore,e,!0),u=new dN(e,a.qs),d=u.nu(a.documents),f=wu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);Kw(n,t,m._u);const v=new fN(e,t,u);return n.Pu.set(e,v),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function _N(n,e,t){const r=ke(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(u=>!rd(u,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await om(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&fg(r.remoteStore,s.targetId),um(r,s.targetId)}).catch(Ka)):(um(r,s.targetId),await om(r.localStore,s.targetId,!0))}async function wN(n,e){const t=ke(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),fg(t.remoteStore,r.targetId))}async function EN(n,e,t){const r=PN(n);try{const s=await function(u,d){const f=ke(u),m=at.now(),v=d.reduce((P,R)=>P.add(R.key),Be());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let R=Mi(),O=Be();return f.Os.getEntries(P,v).next(A=>{R=A,R.forEach(($,Y)=>{Y.isValidDocument()||(O=O.add($))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,R)).next(A=>{w=A;const $=[];for(const Y of d){const Q=Mx(Y,w.get(Y.key).overlayedDocument);Q!=null&&$.push(new Ws(Y.key,Q,OT(Q.value.mapValue),kr.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,$,d)}).next(A=>{T=A;const $=A.applyToLocalDocumentSet(w,O);return f.documentOverlayCache.saveOverlays(P,A.batchId,$)})}).then(()=>({batchId:T.batchId,changes:$T(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,f){let m=u.Ru[u.currentUser.toKey()];m||(m=new yt(Le)),m=m.insert(d,f),u.Ru[u.currentUser.toKey()]=m}(r,s.batchId,t),await Tu(r,s.changes),await cd(r.remoteStore)}catch(s){const a=vg(s,"Failed to persist write");t.reject(a)}}async function IS(n,e){const t=ke(n);try{const r=await DO(t.localStore,e);e.targetChanges.forEach((s,a)=>{const u=t.Eu.get(a);u&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.lu=!0:s.modifiedDocuments.size>0?Ye(u.lu,14607):s.removedDocuments.size>0&&(Ye(u.lu,42227),u.lu=!1))}),await Tu(t,r,e)}catch(r){await Ka(r)}}function Gw(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((a,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)}),function(u,d){const f=ke(u);f.onlineState=d;let m=!1;f.queries.forEach((v,w)=>{for(const T of w.wa)T.va(d)&&(m=!0)}),m&&Eg(f)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TN(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let u=new yt(ve.comparator);u=u.insert(a,cn.newNoDocument(a,Ae.min()));const d=Be().add(a),f=new ad(Ae.min(),new Map,new yt(Le),u,d);await IS(r,f),r.du=r.du.remove(a),r.Eu.delete(e),Ig(r)}else await om(r.localStore,e,!1).then(()=>um(r,e,t)).catch(Ka)}async function SN(n,e){const t=ke(n),r=e.batch.batchId;try{const s=await NO(t.localStore,e);CS(t,r,null),AS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(t,s)}catch(s){await Ka(s)}}async function IN(n,e,t){const r=ke(n);try{const s=await function(u,d){const f=ke(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next(w=>(Ye(w!==null,37113),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);CS(r,e,t),AS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Tu(r,s)}catch(s){await Ka(s)}}function AS(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function CS(n,e,t){const r=ke(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function um(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||RS(n,r)})}function RS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(fg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Ig(n))}function Kw(n,e,t){for(const r of t)r instanceof ES?(n.Au.addReference(r.key,e),AN(n,r)):r instanceof TS?(fe(Sg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||RS(n,r.key)):Se(19791,{yu:r})}function AN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(fe(Sg,"New document in limbo: "+t),n.Iu.add(r),Ig(n))}function Ig(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ve(nt.fromString(e)),r=n.mu.next();n.Eu.set(r,new pN(t)),n.du=n.du.insert(t,r),mS(n.remoteStore,new Ss(ti(nd(t.path)),r,"TargetPurposeLimboResolution",Zh.ue))}}async function Tu(n,e,t){const r=ke(n),s=[],a=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach((d,f)=>{u.push(r.gu(f,e,t).then(m=>{var v;if((m||t)&&r.isPrimaryClient){const w=m?!m.fromCache:(v=t?.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){s.push(m);const w=hg.Es(f.targetId,m);a.push(w)}}))}),await Promise.all(u),r.hu.J_(s),await async function(f,m){const v=ke(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>X.forEach(m,T=>X.forEach(T.Is,P=>v.persistence.referenceDelegate.addReference(w,T.targetId,P)).next(()=>X.forEach(T.ds,P=>v.persistence.referenceDelegate.removeReference(w,T.targetId,P)))))}catch(w){if(!Qa(w))throw w;fe(dg,"Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const P=v.Fs.get(T),R=P.snapshotVersion,O=P.withLastLimboFreeSnapshotVersion(R);v.Fs=v.Fs.insert(T,O)}}}(r.localStore,a))}async function CN(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){fe(Sg,"User change. New user:",e.toKey());const r=await hS(t.localStore,e);t.currentUser=e,function(a,u){a.Vu.forEach(d=>{d.forEach(f=>{f.reject(new le(J.CANCELLED,u))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tu(t,r.Bs)}}function RN(n,e){const t=ke(n),r=t.Eu.get(e);if(r&&r.lu)return Be().add(r.key);{let s=Be();const a=t.Tu.get(e);if(!a)return s;for(const u of a){const d=t.Pu.get(u);s=s.unionWith(d.view.tu)}return s}}function PS(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TN.bind(null,e),e.hu.J_=cN.bind(null,e.eventManager),e.hu.pu=hN.bind(null,e.eventManager),e}function PN(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IN.bind(null,e),e}class Dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ld(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return OO(this.persistence,new kO,e.initialUser,this.serializer)}Du(e){return new cS(cg.Vi,this.serializer)}bu(e){return new jO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dh.provider={build:()=>new Dh};class kN extends Dh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ye(this.persistence.referenceDelegate instanceof Oh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pO(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new cS(r=>Oh.Vi(r,t),this.serializer)}}class cm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CN.bind(null,this.syncEngine),await aN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uN}()}createDatastore(e){const t=ld(e.databaseInfo.databaseId),r=function(a){return new WO(a)}(e.databaseInfo);return function(a,u,d,f){return new KO(a,u,d,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,u,d){return new YO(r,s,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Gw(this.syncEngine,t,0),function(){return Bw.C()?new Bw:new UO}())}createSyncEngine(e,t){return function(s,a,u,d,f,m,v){const w=new mN(s,a,u,d,f,m);return v&&(w.fu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=ke(s);fe(Oo,"RemoteStore shutting down."),a.Ia.add(5),await Eu(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Vi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class bN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=un.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async u=>{fe(Ms,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(fe(Ms,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sp(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ms,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await hS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{xs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{fe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{xs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function Qw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await xN(n);fe(Ms,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$w(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>$w(e.remoteStore,s)),n._onlineComponents=e}async function xN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ms,"Using user provided OfflineComponentProvider");try{await Sp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;xs("Error using user provided cache. Falling back to memory cache: "+t),await Sp(n,new Dh)}}else fe(Ms,"Using default OfflineComponentProvider"),await Sp(n,new kN(void 0));return n._offlineComponents}async function kS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ms,"Using user provided OnlineComponentProvider"),await Qw(n,n._uninitializedComponentsProvider._online)):(fe(Ms,"Using default OnlineComponentProvider"),await Qw(n,new cm))),n._onlineComponents}function ON(n){return kS(n).then(e=>e.syncEngine)}async function Lh(n){const e=await kS(n),t=e.eventManager;return t.onListen=gN.bind(null,e.syncEngine),t.onUnlisten=_N.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wN.bind(null,e.syncEngine),t}function NN(n,e,t={}){const r=new Ni;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new Ag({next:T=>{v.Ou(),u.enqueueAndForget(()=>wg(a,w));const P=T.docs.has(d);!P&&T.fromCache?m.reject(new le(J.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&T.fromCache&&f&&f.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new Tg(nd(d.path),v,{includeMetadataChanges:!0,ka:!0});return _g(a,w)}(await Lh(n),n.asyncQueue,e,t,r)),r.promise}function DN(n,e,t={}){const r=new Ni;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new Ag({next:T=>{v.Ou(),u.enqueueAndForget(()=>wg(a,w)),T.fromCache&&f.source==="server"?m.reject(new le(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new Tg(d,v,{includeMetadataChanges:!0,ka:!0});return _g(a,w)}(await Lh(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firestore.googleapis.com",Jw=!0;class Xw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xS,this.ssl=Jw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Jw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dO)throw new le(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zb;switch(r.type){case"firstParty":return new Hb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Yw.get(t);r&&(fe("ComponentProvider","Removing Datastore"),Yw.delete(t),r.terminate())}(this),Promise.resolve()}}function LN(n,e,t,r={}){var s;n=Gn(n,hd);const a=Wa(e),u=n._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(E0(`https://${f}`),T0("Firestore",!0)),u.host!==xS&&u.host!==f&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:a,emulatorOptions:r});if(!bs(m,d)&&(n._setSettings(m),r.mockUserToken)){let v,w;if(typeof r.mockUserToken=="string")v=r.mockUserToken,w=un.MOCK_USER;else{v=tR(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new le(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new un(T)}n._authCredentials=new $b(new _T(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(vu(t,wt._jsonSchema))return new wt(e,r||null,new ve(nt.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Ot("string",wt._jsonSchemaVersion),referencePath:Ot("string")};class ks extends Ui{constructor(e,t,r){super(e,t,nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new ve(e))}withConverter(e){return new ks(this.firestore,e,this._path)}}function bi(n,e,...t){if(n=Et(n),ET("collection","path",e),n instanceof hd){const r=nt.fromString(e,...t);return hw(r),new ks(n,null,r)}{if(!(n instanceof wt||n instanceof ks))throw new le(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return hw(r),new ks(n.firestore,null,r)}}function Ua(n,e,...t){if(n=Et(n),arguments.length===1&&(e=Zm.newId()),ET("doc","path",e),n instanceof hd){const r=nt.fromString(e,...t);return cw(r),new wt(n,null,new ve(r))}{if(!(n instanceof wt||n instanceof ks))throw new le(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nt.fromString(e,...t));return cw(r),new wt(n.firestore,n instanceof ks?n.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="AsyncQueue";class eE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fS(this,"async_queue_retry"),this.oc=()=>{const r=Tp();r&&fe(Zw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Tp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Tp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Ni;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qa(e))throw e;fe(Zw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Vi("INTERNAL UNHANDLED ERROR: ",tE(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=yg.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&Se(47125,{hc:tE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function tE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Fs extends hd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new eE,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eE(e),this._firestoreClient=void 0,await e}}}function VN(n,e){const t=typeof n=="object"?n:Bm(),r=typeof n=="string"?n:Ah,s=Mo(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Z1("firestore");a&&LN(s,...a)}return s}function dd(n){if(n._terminated)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MN(n),n._firestoreClient}function MN(n){var e,t,r;const s=n._freezeSettings(),a=function(d,f,m,v){return new lx(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,bS(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new bN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(en.fromBase64String(e))}catch(t){throw new le(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ar(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:Ot("string",ar._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(vu(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:Ot("string",ri._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ii(e.vectorValues);throw new le(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ii._jsonSchemaVersion="firestore/vectorValue/1.0",ii._jsonSchema={type:Ot("string",ii._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=/^__.*__$/;class jN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ws(e,this.data,this.fieldMask,t,this.fieldTransforms):new _u(e,this.data,t,this.fieldTransforms)}}class OS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ws(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ec:n})}}class Rg{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(NS(this.Ec)&&FN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ld(e)}Dc(e,t,r,s=!1){return new Rg({Ec:e,methodName:t,bc:r,path:Xt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(n){const e=n._freezeSettings(),t=ld(n._databaseId);return new UN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DS(n,e,t,r,s,a={}){const u=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);Pg("Data must be an object, but it was:",u,r);const d=LS(r,u);let f,m;if(a.merge)f=new Hn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const T=hm(e,w,t);if(!u.contains(T))throw new le(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);MS(v,T)||v.push(T)}f=new Hn(v),m=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=u.fieldTransforms;return new jN(new bn(d),f,m)}class md extends Cg{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}function BN(n,e,t,r){const s=n.Dc(1,e,t);Pg("Data must be an object, but it was:",s,r);const a=[],u=bn.empty();$s(r,(f,m)=>{const v=kg(e,f,t);m=Et(m);const w=s.gc(v);if(m instanceof md)a.push(v);else{const T=Su(m,w);T!=null&&(a.push(v),u.set(v,T))}});const d=new Hn(a);return new OS(u,d,s.fieldTransforms)}function zN(n,e,t,r,s,a){const u=n.Dc(1,e,t),d=[hm(e,r,t)],f=[s];if(a.length%2!=0)throw new le(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(hm(e,a[T])),f.push(a[T+1]);const m=[],v=bn.empty();for(let T=d.length-1;T>=0;--T)if(!MS(m,d[T])){const P=d[T];let R=f[T];R=Et(R);const O=u.gc(P);if(R instanceof md)m.push(P);else{const A=Su(R,O);A!=null&&(m.push(P),v.set(P,A))}}const w=new Hn(m);return new OS(v,w,u.fieldTransforms)}function $N(n,e,t,r=!1){return Su(t,n.Dc(r?4:3,e))}function Su(n,e){if(VS(n=Et(n)))return Pg("Unsupported field value:",e,n),LS(n,e);if(n instanceof Cg)return function(r,s){if(!NS(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let u=0;for(const d of r){let f=Su(d,s.yc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=at.fromDate(r);return{timestampValue:xh(s.serializer,a)}}if(r instanceof at){const a=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xh(s.serializer,a)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ar)return{bytesValue:nS(s.serializer,r._byteString)};if(r instanceof wt){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:lg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ii)return function(u,d){return{mapValue:{fields:{[bT]:{stringValue:xT},[Ch]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return sg(d.serializer,m)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Xh(r)}`)}(n,e)}function LS(n,e){const t={};return IT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(n,(r,s)=>{const a=Su(s,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function VS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof ri||n instanceof ar||n instanceof wt||n instanceof Cg||n instanceof ii)}function Pg(n,e,t){if(!VS(t)||!TT(t)){const r=Xh(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function hm(n,e,t){if((e=Et(e))instanceof fd)return e._internalPath;if(typeof e=="string")return kg(n,e);throw Vh("Field path arguments must be of type string or ",n,!1,void 0,t)}const WN=new RegExp("[~\\*/\\[\\]]");function kg(n,e,t){if(e.search(WN)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vh(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new le(J.INVALID_ARGUMENT,d+n+f)}function MS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qN extends FS{data(){return super.data()}}function gd(n,e){return typeof e=="string"?kg(n,e):e instanceof fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bg{}class xg extends bg{}function Is(n,e,...t){let r=[];e instanceof bg&&r.push(e),r=r.concat(t),function(a){const u=a.filter(f=>f instanceof Og).length,d=a.filter(f=>f instanceof yd).length;if(u>1||u>0&&d>0)throw new le(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class yd extends xg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new yd(e,t,r)}_apply(e){const t=this._parse(e);return US(e._query,t),new Ui(e.firestore,e.converter,tm(e._query,t))}_parse(e){const t=pd(e.firestore);return function(a,u,d,f,m,v,w){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new le(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){oE(w,v);const R=[];for(const O of w)R.push(sE(f,a,O));T={arrayValue:{values:R}}}else T=sE(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||oE(w,v),T=$N(d,u,w,v==="in"||v==="not-in");return xt.create(m,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Es(n,e,t){const r=e,s=gd("where",n);return yd._create(s,r,t)}class Og extends bg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Og(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Or.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)US(u,f),u=tm(u,f)}(e._query,t),new Ui(e.firestore,e.converter,tm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ng extends xg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ng(e,t)}_apply(e){const t=function(s,a,u){if(s.startAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(a,u)}(e._query,this._field,this._direction);return new Ui(e.firestore,e.converter,function(s,a){const u=s.explicitOrderBy.concat([a]);return new Ya(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function rE(n,e="asc"){const t=e,r=gd("orderBy",n);return Ng._create(r,t)}class Dg extends xg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Dg(e,t,r)}_apply(e){return new Ui(e.firestore,e.converter,Ph(e._query,this._limit,this._limitType))}}function iE(n){return Dg._create("limit",n,"F")}function sE(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new le(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jT(e)&&t.indexOf("/")!==-1)throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nt.fromString(t));if(!ve.isDocumentKey(r))throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _w(n,new ve(r))}if(t instanceof wt)return _w(n,t._key);throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(t)}.`)}function oE(n,e){if(!Array.isArray(n)||n.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function US(n,e){const t=function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class HN{convertValue(e,t="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $s(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Ch].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Ct(u.doubleValue));return new ii(a)}convertGeoPoint(e){return new ri(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=td(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nt.fromString(e);Ye(lS(r),9688,{name:e});const s=new su(r.get(1),r.get(3)),a=new ve(r.popFirst(5));return s.isEqual(t)||Vi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class $l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ao extends FS{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ao._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ao._jsonSchema={type:Ot("string",Ao._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class lh extends Ao{data(e={}){return super.data(e)}}class Co{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new $l(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lh(this._firestore,this._userDataWriter,r.key,r,new $l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(d=>{const f=new lh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $l(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new lh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $l(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:GN(d.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){n=Gn(n,wt);const e=Gn(n.firestore,Fs);return NN(dd(e),n._key).then(t=>$S(e,n,t))}Co._jsonSchemaVersion="firestore/querySnapshot/1.0",Co._jsonSchema={type:Ot("string",Co._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Lg extends HN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function xi(n){n=Gn(n,Ui);const e=Gn(n.firestore,Fs),t=dd(e),r=new Lg(e);return jS(n._query),DN(t,n._query).then(s=>new Co(e,r,n,s))}function QN(n,e,t){n=Gn(n,wt);const r=Gn(n.firestore,Fs),s=BS(n.converter,e);return Vg(r,[DS(pd(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,kr.none())])}function zS(n,e,t,...r){n=Gn(n,wt);const s=Gn(n.firestore,Fs),a=pd(s);let u;return u=typeof(e=Et(e))=="string"||e instanceof fd?zN(a,"updateDoc",n._key,e,t,r):BN(a,"updateDoc",n._key,e),Vg(s,[u.toMutation(n._key,kr.exists(!0))])}function YN(n,e){const t=Gn(n.firestore,Fs),r=Ua(n),s=BS(n.converter,e);return Vg(t,[DS(pd(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}function JN(n,...e){var t,r,s;n=Et(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||nE(e[u])||(a=e[u++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(nE(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[u+2]=(s=w.complete)===null||s===void 0?void 0:s.bind(w)}let f,m,v;if(n instanceof wt)m=Gn(n.firestore,Fs),v=nd(n._key.path),f={next:w=>{e[u]&&e[u]($S(m,n,w))},error:e[u+1],complete:e[u+2]};else{const w=Gn(n,Ui);m=Gn(w.firestore,Fs),v=w._query;const T=new Lg(m);f={next:P=>{e[u]&&e[u](new Co(m,T,w,P))},error:e[u+1],complete:e[u+2]},jS(n._query)}return function(T,P,R,O){const A=new Ag(O),$=new Tg(P,A,R);return T.asyncQueue.enqueueAndForget(async()=>_g(await Lh(T),$)),()=>{A.Ou(),T.asyncQueue.enqueueAndForget(async()=>wg(await Lh(T),$))}}(dd(m),v,d,f)}function Vg(n,e){return function(r,s){const a=new Ni;return r.asyncQueue.enqueueAndForget(async()=>EN(await ON(r),s,a)),a.promise}(dd(n),e)}function $S(n,e,t){const r=t.docs.get(e._key),s=new Lg(n);return new Ao(n,s,e._key,r,new $l(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Ga=s})(qa),si(new br("firestore",(r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new Fs(new Wb(r.getProvider("auth-internal")),new Gb(u,r.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new le(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(m.options.projectId,v)}(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),lr(sw,ow,e),lr(sw,ow,"esm2017")})();var XN="firebase",ZN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(XN,ZN,"app");const WS="@firebase/installations",Mg="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=1e4,HS=`w:${Mg}`,GS="FIS_v2",eD="https://firebaseinstallations.googleapis.com/v1",tD=60*60*1e3,nD="installations",rD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},No=new Vo(nD,rD,iD);function KS(n){return n instanceof Nr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS({projectId:n}){return`${eD}/projects/${n}/installations`}function YS(n){return{token:n.token,requestStatus:2,expiresIn:oD(n.expiresIn),creationTime:Date.now()}}async function JS(n,e){const r=(await e.json()).error;return No.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function XS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function sD(n,{refreshToken:e}){const t=XS(n);return t.append("Authorization",aD(e)),t}async function ZS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function oD(n){return Number(n.replace("s","000"))}function aD(n){return`${GS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=QS(n),s=XS(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const u={fid:t,authVersion:GS,appId:n.appId,sdkVersion:HS},d={method:"POST",headers:s,body:JSON.stringify(u)},f=await ZS(()=>fetch(r,d));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:YS(m.authToken)}}else throw await JS("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=/^[cdef][\w-]{21}$/,dm="";function hD(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=dD(n);return cD.test(t)?t:dm}catch{return dm}}function dD(n){return uD(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Map;function nI(n,e){const t=vd(n);rI(t,e),fD(t,e)}function rI(n,e){const t=tI.get(n);if(t)for(const r of t)r(e)}function fD(n,e){const t=pD();t&&t.postMessage({key:n,fid:e}),mD()}let So=null;function pD(){return!So&&"BroadcastChannel"in self&&(So=new BroadcastChannel("[Firebase] FID Change"),So.onmessage=n=>{rI(n.data.key,n.data.fid)}),So}function mD(){tI.size===0&&So&&(So.close(),So=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="firebase-installations-database",yD=1,Do="firebase-installations-store";let Ip=null;function Fg(){return Ip||(Ip=P0(gD,yD,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Do)}}})),Ip}async function Mh(n,e){const t=vd(n),s=(await Fg()).transaction(Do,"readwrite"),a=s.objectStore(Do),u=await a.get(t);return await a.put(e,t),await s.done,(!u||u.fid!==e.fid)&&nI(n,e.fid),e}async function iI(n){const e=vd(n),r=(await Fg()).transaction(Do,"readwrite");await r.objectStore(Do).delete(e),await r.done}async function _d(n,e){const t=vd(n),s=(await Fg()).transaction(Do,"readwrite"),a=s.objectStore(Do),u=await a.get(t),d=e(u);return d===void 0?await a.delete(t):await a.put(d,t),await s.done,d&&(!u||u.fid!==d.fid)&&nI(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jg(n){let e;const t=await _d(n.appConfig,r=>{const s=vD(r),a=_D(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===dm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function vD(n){const e=n||{fid:hD(),registrationStatus:0};return sI(e)}function _D(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(No.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=wD(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ED(n)}:{installationEntry:e}}async function wD(n,e){try{const t=await lD(n,e);return Mh(n.appConfig,t)}catch(t){throw KS(t)&&t.customData.serverCode===409?await iI(n.appConfig):await Mh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function ED(n){let e=await aE(n.appConfig);for(;e.registrationStatus===1;)await eI(100),e=await aE(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await jg(n);return r||t}return e}function aE(n){return _d(n,e=>{if(!e)throw No.create("installation-not-found");return sI(e)})}function sI(n){return TD(n)?{fid:n.fid,registrationStatus:0}:n}function TD(n){return n.registrationStatus===1&&n.registrationTime+qS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD({appConfig:n,heartbeatServiceProvider:e},t){const r=ID(n,t),s=sD(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}const u={installation:{sdkVersion:HS,appId:n.appId}},d={method:"POST",headers:s,body:JSON.stringify(u)},f=await ZS(()=>fetch(r,d));if(f.ok){const m=await f.json();return YS(m)}else throw await JS("Generate Auth Token",f)}function ID(n,{fid:e}){return`${QS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ug(n,e=!1){let t;const r=await _d(n.appConfig,a=>{if(!oI(a))throw No.create("not-registered");const u=a.authToken;if(!e&&RD(u))return a;if(u.requestStatus===1)return t=AD(n,e),a;{if(!navigator.onLine)throw No.create("app-offline");const d=kD(a);return t=CD(n,d),d}});return t?await t:r.authToken}async function AD(n,e){let t=await lE(n.appConfig);for(;t.authToken.requestStatus===1;)await eI(100),t=await lE(n.appConfig);const r=t.authToken;return r.requestStatus===0?Ug(n,e):r}function lE(n){return _d(n,e=>{if(!oI(e))throw No.create("not-registered");const t=e.authToken;return bD(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function CD(n,e){try{const t=await SD(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Mh(n.appConfig,r),t}catch(t){if(KS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await iI(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Mh(n.appConfig,r)}throw t}}function oI(n){return n!==void 0&&n.registrationStatus===2}function RD(n){return n.requestStatus===2&&!PD(n)}function PD(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+tD}function kD(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function bD(n){return n.requestStatus===1&&n.requestTime+qS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(n){const e=n,{installationEntry:t,registrationPromise:r}=await jg(e);return r?r.catch(console.error):Ug(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e=!1){const t=n;return await ND(t),(await Ug(t,e)).token}async function ND(n){const{registrationPromise:e}=await jg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){if(!n||!n.options)throw Ap("App Configuration");if(!n.name)throw Ap("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ap(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Ap(n){return No.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="installations",LD="installations-internal",VD=n=>{const e=n.getProvider("app").getImmediate(),t=DD(e),r=Mo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},MD=n=>{const e=n.getProvider("app").getImmediate(),t=Mo(e,aI).getImmediate();return{getId:()=>xD(t),getToken:s=>OD(t,s)}};function FD(){si(new br(aI,VD,"PUBLIC")),si(new br(LD,MD,"PRIVATE"))}FD();lr(WS,Mg);lr(WS,Mg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="analytics",jD="firebase_id",UD="origin",BD=60*1e3,zD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=new Hh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Kn=new Vo("analytics","Analytics",$D);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(n){if(!n.startsWith(Bg)){const e=Kn.create("invalid-gtag-resource",{gtagURL:n});return On.warn(e.message),""}return n}function lI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function qD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function HD(n,e){const t=qD("firebase-js-sdk-policy",{createScriptURL:WD}),r=document.createElement("script"),s=`${Bg}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function GD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function KD(n,e,t,r,s,a){const u=r[s];try{if(u)await e[u];else{const f=(await lI(t)).find(m=>m.measurementId===s);f&&await e[f.appId]}}catch(d){On.error(d)}n("config",s,a)}async function QD(n,e,t,r,s){try{let a=[];if(s&&s.send_to){let u=s.send_to;Array.isArray(u)||(u=[u]);const d=await lI(t);for(const f of u){const m=d.find(w=>w.measurementId===f),v=m&&e[m.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,s||{})}catch(a){On.error(a)}}function YD(n,e,t,r){async function s(a,...u){try{if(a==="event"){const[d,f]=u;await QD(n,e,t,d,f)}else if(a==="config"){const[d,f]=u;await KD(n,e,t,r,d,f)}else if(a==="consent"){const[d,f]=u;n("consent",d,f)}else if(a==="get"){const[d,f,m]=u;n("get",d,f,m)}else if(a==="set"){const[d]=u;n("set",d)}else n(a,...u)}catch(d){On.error(d)}}return s}function JD(n,e,t,r,s){let a=function(...u){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=YD(a,n,e,t),{gtagCore:a,wrappedGtag:window[s]}}function XD(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Bg)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=30,e2=1e3;class t2{constructor(e={},t=e2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const uI=new t2;function n2(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function r2(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:n2(r)},a=zD.replace("{app-id}",t),u=await fetch(a,s);if(u.status!==200&&u.status!==304){let d="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(d=f.error.message)}catch{}throw Kn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:d})}return u.json()}async function i2(n,e=uI,t){const{appId:r,apiKey:s,measurementId:a}=n.options;if(!r)throw Kn.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Kn.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new a2;return setTimeout(async()=>{d.abort()},BD),cI({appId:r,apiKey:s,measurementId:a},u,d,e)}async function cI(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=uI){var a;const{appId:u,measurementId:d}=n;try{await s2(r,e)}catch(f){if(d)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{const f=await r2(n);return s.deleteThrottleMetadata(u),f}catch(f){const m=f;if(!o2(m)){if(s.deleteThrottleMetadata(u),d)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:d};throw f}const v=Number((a=m?.customData)===null||a===void 0?void 0:a.httpStatus)===503?b_(t,s.intervalMillis,ZD):b_(t,s.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return s.setThrottleMetadata(u,w),On.debug(`Calling attemptFetch again in ${v} millis`),cI(n,w,r,s)}}function s2(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(a),r(Kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function o2(n){if(!(n instanceof Nr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class a2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function l2(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const a=await e,u=Object.assign(Object.assign({},r),{send_to:a});n("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(){if(I0())try{await A0()}catch(n){return On.warn(Kn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return On.warn(Kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function c2(n,e,t,r,s,a,u){var d;const f=i2(n);f.then(P=>{t[P.measurementId]=P.appId,n.options.measurementId&&P.measurementId!==n.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${P.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(P=>On.error(P)),e.push(f);const m=u2().then(P=>{if(P)return r.getId()}),[v,w]=await Promise.all([f,m]);XD(a)||HD(a,v.measurementId),s("js",new Date);const T=(d=u?.config)!==null&&d!==void 0?d:{};return T[UD]="firebase",T.update=!0,w!=null&&(T[jD]=w),s("config",v.measurementId,T),v.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.app=e}_delete(){return delete Jl[this.app.options.appId],Promise.resolve()}}let Jl={},uE=[];const cE={};let Cp="dataLayer",d2="gtag",hE,hI,dE=!1;function f2(){const n=[];if(S0()&&n.push("This is a browser extension environment."),cR()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Kn.create("invalid-analytics-context",{errorInfo:e});On.warn(t.message)}}function p2(n,e,t){f2();const r=n.options.appId;if(!r)throw Kn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kn.create("no-api-key");if(Jl[r]!=null)throw Kn.create("already-exists",{id:r});if(!dE){GD(Cp);const{wrappedGtag:a,gtagCore:u}=JD(Jl,uE,cE,Cp,d2);hI=a,hE=u,dE=!0}return Jl[r]=c2(n,uE,cE,e,hE,Cp,t),new h2(n)}function m2(n=Bm()){n=Et(n);const e=Mo(n,Fh);return e.isInitialized()?e.getImmediate():g2(n)}function g2(n,e={}){const t=Mo(n,Fh);if(t.isInitialized()){const s=t.getImmediate();if(bs(e,t.getOptions()))return s;throw Kn.create("already-initialized")}return t.initialize({options:e})}function y2(n,e,t,r){n=Et(n),l2(hI,Jl[n.app.options.appId],e,t,r).catch(s=>On.error(s))}const fE="@firebase/analytics",pE="0.10.17";function v2(){si(new br(Fh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return p2(r,s,t)},"PUBLIC")),si(new br("analytics-internal",n,"PRIVATE")),lr(fE,pE),lr(fE,pE,"esm2017");function n(e){try{const t=e.getProvider(Fh).getImmediate();return{logEvent:(r,s,a)=>y2(t,r,s,a)}}catch(t){throw Kn.create("interop-component-reg-failed",{reason:t})}}}v2();const _2={apiKey:"AIzaSyDP57oNA8rkadmiFErvl6es2M4ghQwGRBc",authDomain:"cultura-fit-4b24a.firebaseapp.com",databaseURL:"https://cultura-fit-4b24a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cultura-fit-4b24a",storageBucket:"cultura-fit-4b24a.firebasestorage.app",messagingSenderId:"961841078967",appId:"1:961841078967:web:b8f2d63e2745c6c1566332",measurementId:"G-54Y08W8RLJ"},zg=k0(_2),xn=VN(zg);m2(zg);const Kc=Jm(zg),w2=({nextRoutine:n,onStart:e})=>(q.useEffect(()=>{console.log("nextRoutine:",n)},[n]),x.jsxs("div",{className:"workout-card",style:{border:"1px solid #ddd",padding:"20px",borderRadius:"8px",maxWidth:"400px"},children:[x.jsxs("h3",{children:["Siguiente rutina: ",n]}),x.jsx("button",{onClick:e,className:"btn",style:{padding:"10px 20px",marginTop:"10px",cursor:"pointer"},children:"Iniciar Entrenamiento"})]})),dI=q.createContext(),Ln=()=>q.useContext(dI),E2=({children:n})=>{const[e,t]=q.useState(null),[r,s]=q.useState(!0),a="users",[u,d]=q.useState({}),[f,m]=q.useState(),v=async(P,R)=>{const O=await Ck(Kc,P,R),A=await Gh(O.user);return t(O.user),m(A),localStorage.setItem("token",A),O},w=async({email:P,password:R,displayName:O})=>{const A=bi(xn,a),$=Is(A,Es("email","==",P.toLowerCase())),Y=await xi($);try{if(Y.empty){const Q=await Ak(Kc,P,R),ne=await QN(Ua(xn,a,Q.user.uid),{uid:Q.user.uid,email:P,password:R,displayName:O,role:"free",activeRutineId:"",createdAt:new Date});console.log(f);const de=await Q.user.getIdToken(!0);return t(Q.user),m(de),localStorage.setItem("token",de),Q}}catch(Q){throw console.error("Firebase error:",Q),new Error(`Error: ${Q.message}`)}},T=()=>{bk(Kc)};return q.useEffect(()=>{const P=kk(Kc,async R=>{if(t(R),!R){m(null),d({}),s(!1);return}const O=await R.getIdToken(!0);m(O);const A=await Kh(R,!0);d(A.claims),s(!1)});return()=>{P()}},[]),x.jsx(dI.Provider,{value:{user:e,claims:u,token:f,login:v,logout:T,register:w,loading:r},children:!r&&n})},fI=q.createContext(),$g=()=>q.useContext(fI),T2=({children:n})=>{const[e,t]=q.useState(null),[r,s]=q.useState(null),[a,u]=q.useState(!0),{user:d}=Ln();return q.useEffect(()=>{if(!d)return;const f=Ua(xn,"users",d.uid),m=JN(f,async v=>{if(v.exists()){const w=v.data();t(w.activeRutineId||null);const T=bi(xn,"workouts_templates"),P=Is(T,Es("rutineId","==",w.activeRutineId)),R=await xi(P);if(R.empty)s("");else{const O=R.docs[0].data().name||"";s(O)}}else t(null),s(null);u(!1)});return()=>m()},[d]),x.jsx(fI.Provider,{value:{activeRutine:e,activeRutineName:r},children:n})};function pI(n,e){return function(){return n.apply(e,arguments)}}const{toString:S2}=Object.prototype,{getPrototypeOf:Wg}=Object,{iterator:wd,toStringTag:mI}=Symbol,Ed=(n=>e=>{const t=S2.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Dr=n=>(n=n.toLowerCase(),e=>Ed(e)===n),Td=n=>e=>typeof e===n,{isArray:Xa}=Array,cu=Td("undefined");function I2(n){return n!==null&&!cu(n)&&n.constructor!==null&&!cu(n.constructor)&&Nn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const gI=Dr("ArrayBuffer");function A2(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&gI(n.buffer),e}const C2=Td("string"),Nn=Td("function"),yI=Td("number"),Sd=n=>n!==null&&typeof n=="object",R2=n=>n===!0||n===!1,uh=n=>{if(Ed(n)!=="object")return!1;const e=Wg(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mI in n)&&!(wd in n)},P2=Dr("Date"),k2=Dr("File"),b2=Dr("Blob"),x2=Dr("FileList"),O2=n=>Sd(n)&&Nn(n.pipe),N2=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Nn(n.append)&&((e=Ed(n))==="formdata"||e==="object"&&Nn(n.toString)&&n.toString()==="[object FormData]"))},D2=Dr("URLSearchParams"),[L2,V2,M2,F2]=["ReadableStream","Request","Response","Headers"].map(Dr),j2=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Iu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,s;if(typeof n!="object"&&(n=[n]),Xa(n))for(r=0,s=n.length;r<s;r++)e.call(null,n[r],r,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),u=a.length;let d;for(r=0;r<u;r++)d=a[r],e.call(null,n[d],d,n)}}function vI(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,s;for(;r-- >0;)if(s=t[r],e===s.toLowerCase())return s;return null}const Io=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_I=n=>!cu(n)&&n!==Io;function fm(){const{caseless:n}=_I(this)&&this||{},e={},t=(r,s)=>{const a=n&&vI(e,s)||s;uh(e[a])&&uh(r)?e[a]=fm(e[a],r):uh(r)?e[a]=fm({},r):Xa(r)?e[a]=r.slice():e[a]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Iu(arguments[r],t);return e}const U2=(n,e,t,{allOwnKeys:r}={})=>(Iu(e,(s,a)=>{t&&Nn(s)?n[a]=pI(s,t):n[a]=s},{allOwnKeys:r}),n),B2=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),z2=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},$2=(n,e,t,r)=>{let s,a,u;const d={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)u=s[a],(!r||r(u,n,e))&&!d[u]&&(e[u]=n[u],d[u]=!0);n=t!==!1&&Wg(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},W2=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},q2=n=>{if(!n)return null;if(Xa(n))return n;let e=n.length;if(!yI(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},H2=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Wg(Uint8Array)),G2=(n,e)=>{const r=(n&&n[wd]).call(n);let s;for(;(s=r.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},K2=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},Q2=Dr("HTMLFormElement"),Y2=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,s){return r.toUpperCase()+s}),mE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),J2=Dr("RegExp"),wI=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Iu(t,(s,a)=>{let u;(u=e(s,a,n))!==!1&&(r[a]=u||s)}),Object.defineProperties(n,r)},X2=n=>{wI(n,(e,t)=>{if(Nn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Nn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Z2=(n,e)=>{const t={},r=s=>{s.forEach(a=>{t[a]=!0})};return Xa(n)?r(n):r(String(n).split(e)),t},eL=()=>{},tL=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function nL(n){return!!(n&&Nn(n.append)&&n[mI]==="FormData"&&n[wd])}const rL=n=>{const e=new Array(10),t=(r,s)=>{if(Sd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const a=Xa(r)?[]:{};return Iu(r,(u,d)=>{const f=t(u,s+1);!cu(f)&&(a[d]=f)}),e[s]=void 0,a}}return r};return t(n,0)},iL=Dr("AsyncFunction"),sL=n=>n&&(Sd(n)||Nn(n))&&Nn(n.then)&&Nn(n.catch),EI=((n,e)=>n?setImmediate:e?((t,r)=>(Io.addEventListener("message",({source:s,data:a})=>{s===Io&&a===t&&r.length&&r.shift()()},!1),s=>{r.push(s),Io.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Nn(Io.postMessage)),oL=typeof queueMicrotask<"u"?queueMicrotask.bind(Io):typeof process<"u"&&process.nextTick||EI,aL=n=>n!=null&&Nn(n[wd]),G={isArray:Xa,isArrayBuffer:gI,isBuffer:I2,isFormData:N2,isArrayBufferView:A2,isString:C2,isNumber:yI,isBoolean:R2,isObject:Sd,isPlainObject:uh,isReadableStream:L2,isRequest:V2,isResponse:M2,isHeaders:F2,isUndefined:cu,isDate:P2,isFile:k2,isBlob:b2,isRegExp:J2,isFunction:Nn,isStream:O2,isURLSearchParams:D2,isTypedArray:H2,isFileList:x2,forEach:Iu,merge:fm,extend:U2,trim:j2,stripBOM:B2,inherits:z2,toFlatObject:$2,kindOf:Ed,kindOfTest:Dr,endsWith:W2,toArray:q2,forEachEntry:G2,matchAll:K2,isHTMLForm:Q2,hasOwnProperty:mE,hasOwnProp:mE,reduceDescriptors:wI,freezeMethods:X2,toObjectSet:Z2,toCamelCase:Y2,noop:eL,toFiniteNumber:tL,findKey:vI,global:Io,isContextDefined:_I,isSpecCompliantForm:nL,toJSONObject:rL,isAsyncFn:iL,isThenable:sL,setImmediate:EI,asap:oL,isIterable:aL};function xe(n,e,t,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}G.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const TI=xe.prototype,SI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{SI[n]={value:n}});Object.defineProperties(xe,SI);Object.defineProperty(TI,"isAxiosError",{value:!0});xe.from=(n,e,t,r,s,a)=>{const u=Object.create(TI);return G.toFlatObject(n,u,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),xe.call(u,n.message,e,t,r,s),u.cause=n,u.name=n.name,a&&Object.assign(u,a),u};const lL=null;function pm(n){return G.isPlainObject(n)||G.isArray(n)}function II(n){return G.endsWith(n,"[]")?n.slice(0,-2):n}function gE(n,e,t){return n?n.concat(e).map(function(s,a){return s=II(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function uL(n){return G.isArray(n)&&!n.some(pm)}const cL=G.toFlatObject(G,{},null,function(e){return/^is[A-Z]/.test(e)});function Id(n,e,t){if(!G.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=G.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,A){return!G.isUndefined(A[O])});const r=t.metaTokens,s=t.visitor||v,a=t.dots,u=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(e);if(!G.isFunction(s))throw new TypeError("visitor must be a function");function m(R){if(R===null)return"";if(G.isDate(R))return R.toISOString();if(G.isBoolean(R))return R.toString();if(!f&&G.isBlob(R))throw new xe("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(R)||G.isTypedArray(R)?f&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function v(R,O,A){let $=R;if(R&&!A&&typeof R=="object"){if(G.endsWith(O,"{}"))O=r?O:O.slice(0,-2),R=JSON.stringify(R);else if(G.isArray(R)&&uL(R)||(G.isFileList(R)||G.endsWith(O,"[]"))&&($=G.toArray(R)))return O=II(O),$.forEach(function(Q,ne){!(G.isUndefined(Q)||Q===null)&&e.append(u===!0?gE([O],ne,a):u===null?O:O+"[]",m(Q))}),!1}return pm(R)?!0:(e.append(gE(A,O,a),m(R)),!1)}const w=[],T=Object.assign(cL,{defaultVisitor:v,convertValue:m,isVisitable:pm});function P(R,O){if(!G.isUndefined(R)){if(w.indexOf(R)!==-1)throw Error("Circular reference detected in "+O.join("."));w.push(R),G.forEach(R,function($,Y){(!(G.isUndefined($)||$===null)&&s.call(e,$,G.isString(Y)?Y.trim():Y,O,T))===!0&&P($,O?O.concat(Y):[Y])}),w.pop()}}if(!G.isObject(n))throw new TypeError("data must be an object");return P(n),e}function yE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function qg(n,e){this._pairs=[],n&&Id(n,this,e)}const AI=qg.prototype;AI.append=function(e,t){this._pairs.push([e,t])};AI.toString=function(e){const t=e?function(r){return e.call(this,r,yE)}:yE;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function hL(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function CI(n,e,t){if(!e)return n;const r=t&&t.encode||hL;G.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=G.isURLSearchParams(e)?e.toString():new qg(e,t).toString(r),a){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class vE{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){G.forEach(this.handlers,function(r){r!==null&&e(r)})}}const RI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dL=typeof URLSearchParams<"u"?URLSearchParams:qg,fL=typeof FormData<"u"?FormData:null,pL=typeof Blob<"u"?Blob:null,mL={isBrowser:!0,classes:{URLSearchParams:dL,FormData:fL,Blob:pL},protocols:["http","https","file","blob","url","data"]},Hg=typeof window<"u"&&typeof document<"u",mm=typeof navigator=="object"&&navigator||void 0,gL=Hg&&(!mm||["ReactNative","NativeScript","NS"].indexOf(mm.product)<0),yL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vL=Hg&&window.location.href||"http://localhost",_L=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hg,hasStandardBrowserEnv:gL,hasStandardBrowserWebWorkerEnv:yL,navigator:mm,origin:vL},Symbol.toStringTag,{value:"Module"})),hn={..._L,...mL};function wL(n,e){return Id(n,new hn.classes.URLSearchParams,Object.assign({visitor:function(t,r,s,a){return hn.isNode&&G.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function EL(n){return G.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function TL(n){const e={},t=Object.keys(n);let r;const s=t.length;let a;for(r=0;r<s;r++)a=t[r],e[a]=n[a];return e}function PI(n){function e(t,r,s,a){let u=t[a++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),f=a>=t.length;return u=!u&&G.isArray(s)?s.length:u,f?(G.hasOwnProp(s,u)?s[u]=[s[u],r]:s[u]=r,!d):((!s[u]||!G.isObject(s[u]))&&(s[u]=[]),e(t,r,s[u],a)&&G.isArray(s[u])&&(s[u]=TL(s[u])),!d)}if(G.isFormData(n)&&G.isFunction(n.entries)){const t={};return G.forEachEntry(n,(r,s)=>{e(EL(r),s,t,0)}),t}return null}function SL(n,e,t){if(G.isString(n))try{return(e||JSON.parse)(n),G.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Au={transitional:RI,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,a=G.isObject(e);if(a&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return s?JSON.stringify(PI(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return wL(e,this.formSerializer).toString();if((d=G.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Id(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),SL(e)):e}],transformResponse:[function(e){const t=this.transitional||Au.transitional,r=t&&t.forcedJSONParsing,s=this.responseType==="json";if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(r&&!this.responseType||s)){const u=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(u)throw d.name==="SyntaxError"?xe.from(d,xe.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hn.classes.FormData,Blob:hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],n=>{Au.headers[n]={}});const IL=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AL=n=>{const e={};let t,r,s;return n&&n.split(`
`).forEach(function(u){s=u.indexOf(":"),t=u.substring(0,s).trim().toLowerCase(),r=u.substring(s+1).trim(),!(!t||e[t]&&IL[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},_E=Symbol("internals");function Ll(n){return n&&String(n).trim().toLowerCase()}function ch(n){return n===!1||n==null?n:G.isArray(n)?n.map(ch):String(n)}function CL(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const RL=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Rp(n,e,t,r,s){if(G.isFunction(r))return r.call(this,e,t);if(s&&(e=t),!!G.isString(e)){if(G.isString(r))return e.indexOf(r)!==-1;if(G.isRegExp(r))return r.test(e)}}function PL(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function kL(n,e){const t=G.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(s,a,u){return this[r].call(this,e,s,a,u)},configurable:!0})})}let Dn=class{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function a(d,f,m){const v=Ll(f);if(!v)throw new Error("header name must be a non-empty string");const w=G.findKey(s,v);(!w||s[w]===void 0||m===!0||m===void 0&&s[w]!==!1)&&(s[w||f]=ch(d))}const u=(d,f)=>G.forEach(d,(m,v)=>a(m,v,f));if(G.isPlainObject(e)||e instanceof this.constructor)u(e,t);else if(G.isString(e)&&(e=e.trim())&&!RL(e))u(AL(e),t);else if(G.isObject(e)&&G.isIterable(e)){let d={},f,m;for(const v of e){if(!G.isArray(v))throw TypeError("Object iterator must return a key-value pair");d[m=v[0]]=(f=d[m])?G.isArray(f)?[...f,v[1]]:[f,v[1]]:v[1]}u(d,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=Ll(e),e){const r=G.findKey(this,e);if(r){const s=this[r];if(!t)return s;if(t===!0)return CL(s);if(G.isFunction(t))return t.call(this,s,r);if(G.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ll(e),e){const r=G.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Rp(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let s=!1;function a(u){if(u=Ll(u),u){const d=G.findKey(r,u);d&&(!t||Rp(r,r[d],d,t))&&(delete r[d],s=!0)}}return G.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const a=t[r];(!e||Rp(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,r={};return G.forEach(this,(s,a)=>{const u=G.findKey(r,a);if(u){t[u]=ch(s),delete t[a];return}const d=e?PL(a):String(a).trim();d!==a&&delete t[a],t[d]=ch(s),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return G.forEach(this,(r,s)=>{r!=null&&r!==!1&&(t[s]=e&&G.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[_E]=this[_E]={accessors:{}}).accessors,s=this.prototype;function a(u){const d=Ll(u);r[d]||(kL(s,u),r[d]=!0)}return G.isArray(e)?e.forEach(a):a(e),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(Dn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});G.freezeMethods(Dn);function Pp(n,e){const t=this||Au,r=e||t,s=Dn.from(r.headers);let a=r.data;return G.forEach(n,function(d){a=d.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function kI(n){return!!(n&&n.__CANCEL__)}function Za(n,e,t){xe.call(this,n??"canceled",xe.ERR_CANCELED,e,t),this.name="CanceledError"}G.inherits(Za,xe,{__CANCEL__:!0});function bI(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new xe("Request failed with status code "+t.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function bL(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function xL(n,e){n=n||10;const t=new Array(n),r=new Array(n);let s=0,a=0,u;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),v=r[a];u||(u=m),t[s]=f,r[s]=m;let w=a,T=0;for(;w!==s;)T+=t[w++],w=w%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),m-u<e)return;const P=v&&m-v;return P?Math.round(T*1e3/P):void 0}}function OL(n,e){let t=0,r=1e3/e,s,a;const u=(m,v=Date.now())=>{t=v,s=null,a&&(clearTimeout(a),a=null),n.apply(null,m)};return[(...m)=>{const v=Date.now(),w=v-t;w>=r?u(m,v):(s=m,a||(a=setTimeout(()=>{a=null,u(s)},r-w)))},()=>s&&u(s)]}const jh=(n,e,t=3)=>{let r=0;const s=xL(50,250);return OL(a=>{const u=a.loaded,d=a.lengthComputable?a.total:void 0,f=u-r,m=s(f),v=u<=d;r=u;const w={loaded:u,total:d,progress:d?u/d:void 0,bytes:f,rate:m||void 0,estimated:m&&d&&v?(d-u)/m:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(w)},t)},wE=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},EE=n=>(...e)=>G.asap(()=>n(...e)),NL=hn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,hn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(hn.origin),hn.navigator&&/(msie|trident)/i.test(hn.navigator.userAgent)):()=>!0,DL=hn.hasStandardBrowserEnv?{write(n,e,t,r,s,a){const u=[n+"="+encodeURIComponent(e)];G.isNumber(t)&&u.push("expires="+new Date(t).toGMTString()),G.isString(r)&&u.push("path="+r),G.isString(s)&&u.push("domain="+s),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function LL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function VL(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function xI(n,e,t){let r=!LL(e);return n&&(r||t==!1)?VL(n,e):e}const TE=n=>n instanceof Dn?{...n}:n;function Lo(n,e){e=e||{};const t={};function r(m,v,w,T){return G.isPlainObject(m)&&G.isPlainObject(v)?G.merge.call({caseless:T},m,v):G.isPlainObject(v)?G.merge({},v):G.isArray(v)?v.slice():v}function s(m,v,w,T){if(G.isUndefined(v)){if(!G.isUndefined(m))return r(void 0,m,w,T)}else return r(m,v,w,T)}function a(m,v){if(!G.isUndefined(v))return r(void 0,v)}function u(m,v){if(G.isUndefined(v)){if(!G.isUndefined(m))return r(void 0,m)}else return r(void 0,v)}function d(m,v,w){if(w in e)return r(m,v);if(w in n)return r(void 0,m)}const f={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(m,v,w)=>s(TE(m),TE(v),w,!0)};return G.forEach(Object.keys(Object.assign({},n,e)),function(v){const w=f[v]||s,T=w(n[v],e[v],v);G.isUndefined(T)&&w!==d||(t[v]=T)}),t}const OI=n=>{const e=Lo({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:u,auth:d}=e;e.headers=u=Dn.from(u),e.url=CI(xI(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(G.isFormData(t)){if(hn.hasStandardBrowserEnv||hn.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((f=u.getContentType())!==!1){const[m,...v]=f?f.split(";").map(w=>w.trim()).filter(Boolean):[];u.setContentType([m||"multipart/form-data",...v].join("; "))}}if(hn.hasStandardBrowserEnv&&(r&&G.isFunction(r)&&(r=r(e)),r||r!==!1&&NL(e.url))){const m=s&&a&&DL.read(a);m&&u.set(s,m)}return e},ML=typeof XMLHttpRequest<"u",FL=ML&&function(n){return new Promise(function(t,r){const s=OI(n);let a=s.data;const u=Dn.from(s.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:m}=s,v,w,T,P,R;function O(){P&&P(),R&&R(),s.cancelToken&&s.cancelToken.unsubscribe(v),s.signal&&s.signal.removeEventListener("abort",v)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function $(){if(!A)return;const Q=Dn.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),de={data:!d||d==="text"||d==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:Q,config:n,request:A};bI(function(N){t(N),O()},function(N){r(N),O()},de),A=null}"onloadend"in A?A.onloadend=$:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout($)},A.onabort=function(){A&&(r(new xe("Request aborted",xe.ECONNABORTED,n,A)),A=null)},A.onerror=function(){r(new xe("Network Error",xe.ERR_NETWORK,n,A)),A=null},A.ontimeout=function(){let ne=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const de=s.transitional||RI;s.timeoutErrorMessage&&(ne=s.timeoutErrorMessage),r(new xe(ne,de.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,n,A)),A=null},a===void 0&&u.setContentType(null),"setRequestHeader"in A&&G.forEach(u.toJSON(),function(ne,de){A.setRequestHeader(de,ne)}),G.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),d&&d!=="json"&&(A.responseType=s.responseType),m&&([T,R]=jh(m,!0),A.addEventListener("progress",T)),f&&A.upload&&([w,P]=jh(f),A.upload.addEventListener("progress",w),A.upload.addEventListener("loadend",P)),(s.cancelToken||s.signal)&&(v=Q=>{A&&(r(!Q||Q.type?new Za(null,n,A):Q),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(v),s.signal&&(s.signal.aborted?v():s.signal.addEventListener("abort",v)));const Y=bL(s.url);if(Y&&hn.protocols.indexOf(Y)===-1){r(new xe("Unsupported protocol "+Y+":",xe.ERR_BAD_REQUEST,n));return}A.send(a||null)})},jL=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,s;const a=function(m){if(!s){s=!0,d();const v=m instanceof Error?m:this.reason;r.abort(v instanceof xe?v:new Za(v instanceof Error?v.message:v))}};let u=e&&setTimeout(()=>{u=null,a(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const d=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(a):m.removeEventListener("abort",a)}),n=null)};n.forEach(m=>m.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>G.asap(d),f}},UL=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,s;for(;r<t;)s=r+e,yield n.slice(r,s),r=s},BL=async function*(n,e){for await(const t of zL(n))yield*UL(t,e)},zL=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},SE=(n,e,t,r)=>{const s=BL(n,e);let a=0,u,d=f=>{u||(u=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:v}=await s.next();if(m){d(),f.close();return}let w=v.byteLength;if(t){let T=a+=w;t(T)}f.enqueue(new Uint8Array(v))}catch(m){throw d(m),m}},cancel(f){return d(f),s.return()}},{highWaterMark:2})},Ad=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",NI=Ad&&typeof ReadableStream=="function",$L=Ad&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),DI=(n,...e)=>{try{return!!n(...e)}catch{return!1}},WL=NI&&DI(()=>{let n=!1;const e=new Request(hn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),IE=64*1024,gm=NI&&DI(()=>G.isReadableStream(new Response("").body)),Uh={stream:gm&&(n=>n.body)};Ad&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Uh[e]&&(Uh[e]=G.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new xe(`Response type '${e}' is not supported`,xe.ERR_NOT_SUPPORT,r)})})})(new Response);const qL=async n=>{if(n==null)return 0;if(G.isBlob(n))return n.size;if(G.isSpecCompliantForm(n))return(await new Request(hn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(G.isArrayBufferView(n)||G.isArrayBuffer(n))return n.byteLength;if(G.isURLSearchParams(n)&&(n=n+""),G.isString(n))return(await $L(n)).byteLength},HL=async(n,e)=>{const t=G.toFiniteNumber(n.getContentLength());return t??qL(e)},GL=Ad&&(async n=>{let{url:e,method:t,data:r,signal:s,cancelToken:a,timeout:u,onDownloadProgress:d,onUploadProgress:f,responseType:m,headers:v,withCredentials:w="same-origin",fetchOptions:T}=OI(n);m=m?(m+"").toLowerCase():"text";let P=jL([s,a&&a.toAbortSignal()],u),R;const O=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let A;try{if(f&&WL&&t!=="get"&&t!=="head"&&(A=await HL(v,r))!==0){let de=new Request(e,{method:"POST",body:r,duplex:"half"}),ae;if(G.isFormData(r)&&(ae=de.headers.get("content-type"))&&v.setContentType(ae),de.body){const[N,I]=wE(A,jh(EE(f)));r=SE(de.body,IE,N,I)}}G.isString(w)||(w=w?"include":"omit");const $="credentials"in Request.prototype;R=new Request(e,{...T,signal:P,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:$?w:void 0});let Y=await fetch(R,T);const Q=gm&&(m==="stream"||m==="response");if(gm&&(d||Q&&O)){const de={};["status","statusText","headers"].forEach(b=>{de[b]=Y[b]});const ae=G.toFiniteNumber(Y.headers.get("content-length")),[N,I]=d&&wE(ae,jh(EE(d),!0))||[];Y=new Response(SE(Y.body,IE,N,()=>{I&&I(),O&&O()}),de)}m=m||"text";let ne=await Uh[G.findKey(Uh,m)||"text"](Y,n);return!Q&&O&&O(),await new Promise((de,ae)=>{bI(de,ae,{data:ne,headers:Dn.from(Y.headers),status:Y.status,statusText:Y.statusText,config:n,request:R})})}catch($){throw O&&O(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,n,R),{cause:$.cause||$}):xe.from($,$&&$.code,n,R)}}),ym={http:lL,xhr:FL,fetch:GL};G.forEach(ym,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const AE=n=>`- ${n}`,KL=n=>G.isFunction(n)||n===null||n===!1,LI={getAdapter:n=>{n=G.isArray(n)?n:[n];const{length:e}=n;let t,r;const s={};for(let a=0;a<e;a++){t=n[a];let u;if(r=t,!KL(t)&&(r=ym[(u=String(t)).toLowerCase()],r===void 0))throw new xe(`Unknown adapter '${u}'`);if(r)break;s[u||"#"+a]=r}if(!r){const a=Object.entries(s).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let u=e?a.length>1?`since :
`+a.map(AE).join(`
`):" "+AE(a[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:ym};function kp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Za(null,n)}function CE(n){return kp(n),n.headers=Dn.from(n.headers),n.data=Pp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),LI.getAdapter(n.adapter||Au.adapter)(n).then(function(r){return kp(n),r.data=Pp.call(n,n.transformResponse,r),r.headers=Dn.from(r.headers),r},function(r){return kI(r)||(kp(n),r&&r.response&&(r.response.data=Pp.call(n,n.transformResponse,r.response),r.response.headers=Dn.from(r.response.headers))),Promise.reject(r)})}const VI="1.10.0",Cd={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Cd[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const RE={};Cd.transitional=function(e,t,r){function s(a,u){return"[Axios v"+VI+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,d)=>{if(e===!1)throw new xe(s(u," has been removed"+(t?" in "+t:"")),xe.ERR_DEPRECATED);return t&&!RE[u]&&(RE[u]=!0,console.warn(s(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,u,d):!0}};Cd.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function QL(n,e,t){if(typeof n!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let s=r.length;for(;s-- >0;){const a=r[s],u=e[a];if(u){const d=n[a],f=d===void 0||u(d,a,n);if(f!==!0)throw new xe("option "+a+" must be "+f,xe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new xe("Unknown option "+a,xe.ERR_BAD_OPTION)}}const hh={assertOptions:QL,validators:Cd},Yr=hh.validators;let Ro=class{constructor(e){this.defaults=e||{},this.interceptors={request:new vE,response:new vE}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Lo(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:a}=t;r!==void 0&&hh.assertOptions(r,{silentJSONParsing:Yr.transitional(Yr.boolean),forcedJSONParsing:Yr.transitional(Yr.boolean),clarifyTimeoutError:Yr.transitional(Yr.boolean)},!1),s!=null&&(G.isFunction(s)?t.paramsSerializer={serialize:s}:hh.assertOptions(s,{encode:Yr.function,serialize:Yr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),hh.assertOptions(t,{baseUrl:Yr.spelling("baseURL"),withXsrfToken:Yr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let u=a&&G.merge(a.common,a[t.method]);a&&G.forEach(["delete","get","head","post","put","patch","common"],R=>{delete a[R]}),t.headers=Dn.concat(u,a);const d=[];let f=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(t)===!1||(f=f&&O.synchronous,d.unshift(O.fulfilled,O.rejected))});const m=[];this.interceptors.response.forEach(function(O){m.push(O.fulfilled,O.rejected)});let v,w=0,T;if(!f){const R=[CE.bind(this),void 0];for(R.unshift.apply(R,d),R.push.apply(R,m),T=R.length,v=Promise.resolve(t);w<T;)v=v.then(R[w++],R[w++]);return v}T=d.length;let P=t;for(w=0;w<T;){const R=d[w++],O=d[w++];try{P=R(P)}catch(A){O.call(this,A);break}}try{v=CE.call(this,P)}catch(R){return Promise.reject(R)}for(w=0,T=m.length;w<T;)v=v.then(m[w++],m[w++]);return v}getUri(e){e=Lo(this.defaults,e);const t=xI(e.baseURL,e.url,e.allowAbsoluteUrls);return CI(t,e.params,e.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(e){Ro.prototype[e]=function(t,r){return this.request(Lo(r||{},{method:e,url:t,data:(r||{}).data}))}});G.forEach(["post","put","patch"],function(e){function t(r){return function(a,u,d){return this.request(Lo(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}Ro.prototype[e]=t(),Ro.prototype[e+"Form"]=t(!0)});let YL=class MI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const u=new Promise(d=>{r.subscribe(d),a=d}).then(s);return u.cancel=function(){r.unsubscribe(a)},u},e(function(a,u,d){r.reason||(r.reason=new Za(a,u,d),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new MI(function(s){e=s}),cancel:e}}};function JL(n){return function(t){return n.apply(null,t)}}function XL(n){return G.isObject(n)&&n.isAxiosError===!0}const vm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vm).forEach(([n,e])=>{vm[e]=n});function FI(n){const e=new Ro(n),t=pI(Ro.prototype.request,e);return G.extend(t,Ro.prototype,e,{allOwnKeys:!0}),G.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return FI(Lo(n,s))},t}const vt=FI(Au);vt.Axios=Ro;vt.CanceledError=Za;vt.CancelToken=YL;vt.isCancel=kI;vt.VERSION=VI;vt.toFormData=Id;vt.AxiosError=xe;vt.Cancel=vt.CanceledError;vt.all=function(e){return Promise.all(e)};vt.spread=JL;vt.isAxiosError=XL;vt.mergeConfig=Lo;vt.AxiosHeaders=Dn;vt.formToJSON=n=>PI(G.isHTMLForm(n)?new FormData(n):n);vt.getAdapter=LI.getAdapter;vt.HttpStatusCode=vm;vt.default=vt;const{Axios:W4,AxiosError:q4,CanceledError:H4,isCancel:G4,CancelToken:K4,VERSION:Q4,all:Y4,Cancel:J4,isAxiosError:X4,spread:Z4,toFormData:eF,AxiosHeaders:tF,HttpStatusCode:nF,formToJSON:rF,getAdapter:iF,mergeConfig:sF}=vt,jI="https://cultura-fit.onrender.com",ZL=async(n,e)=>{const t=await Gh(n),r=await vt.put(`${jI}/api/users`,{role:e},{headers:{Authorization:`Bearer ${t}`},params:{email:n.email}});if(console.log(r.data),!!r)return!0},UI=async()=>{const e=Jm().currentUser,t=await Gh(e);if(!e)return;await vt.post(`${jI}/api/users/sync-user/${e.uid}`,{},{headers:{Authorization:`Bearer ${t}`}}),await e.getIdToken(!0);const r=await e.getIdToken();localStorage.setItem("token",r);const s=await Kh(e,!0);console.log(s)},eV=({exercisesPlaceholder:n=[],nextRoutine:e,sessionName:t,exercisesWorkOutTemplate:r,sessionId:s,onSubmit:a,onCancel:u})=>{const[d,f]=q.useState([]),[m,v]=q.useState(""),[w,T]=q.useState(""),{activeRutine:P}=$g();q.useEffect(()=>{if(Array.isArray(n)&&n.length>0){const $=n.map(Y=>{const Q=Array.isArray(Y.sets)?Y.sets.map(ne=>({reps:ne.reps||"",rpe:ne.rpe||"",weight:ne.weight||""})):Array.from({length:3},()=>({reps:"",rpe:"",weight:""}));return{name:Y.name,sets:Q}});f($)}else{const $=r.find(Y=>Y.id===s);if($?.exercises?.length){const Y=$.exercises.map(Q=>{const ne=Array.from({length:Q.sets||3},()=>({reps:Q.reps||"",rpe:Q.rpe||"",weight:Q.weight||""}));return{name:Q.name,sets:ne}});f(Y)}}},[n,r,s]);const R=(A,$,Y,Q)=>{f(ne=>{const de=[...ne],ae={...de[A]},N=[...ae.sets],I={...N[$]};return I[Y]=Q,N[$]=I,ae.sets=N,de[A]=ae,de})},O=async A=>{A.preventDefault(),console.log("activeRutine:",P),a({exercises:d,notes:m,durationMin:Number(w),rutineId:P,sessionId:s,sessionName:t,createdAt:new Date})};return x.jsxs("form",{onSubmit:O,style:{marginTop:"20px"},children:[x.jsxs("h3",{children:["Entrenamiento: ",t]}),d.map((A,$)=>{const Q=r.find(ae=>ae.id===s)?.exercises?.find(ae=>ae.name===A.name),ne=Q?.reps||"?",de=Q?.rpe||"?";return x.jsxs("div",{style:{marginBottom:"20px",padding:"10px",border:"1px solid #ccc"},children:[x.jsx("h4",{children:A.name}),A.sets.map((ae,N)=>x.jsxs("div",{style:{marginBottom:"8px"},children:[x.jsxs("strong",{children:["Serie ",N+1]}),x.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",marginTop:"5px"},children:[x.jsx("label",{style:{flex:1},children:`Reps (${ne})`}),x.jsx("label",{style:{flex:1},children:`RPE (${de})`}),x.jsx("label",{style:{flex:1},children:"Peso (kg)"})]}),x.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"5px"},children:[x.jsx("input",{type:"number",placeholder:"Reps",value:ae.reps||"",onChange:I=>R($,N,"reps",I.target.value)}),x.jsx("input",{type:"number",placeholder:"RPE",value:ae.rpe,onChange:I=>R($,N,"rpe",I.target.value)}),x.jsx("input",{type:"number",placeholder:"(Kg)",value:ae.weight,onChange:I=>R($,N,"weight",I.target.value)})]})]},N))]},$)}),x.jsxs("label",{children:["Notas:",x.jsx("input",{type:"text",value:m,onChange:A=>v(A.target.value),style:{width:"100%",marginBottom:"10px"}})]}),x.jsxs("label",{children:["Duración (minutos):",x.jsx("input",{type:"number",value:w,onChange:A=>T(A.target.value),required:!0})]}),x.jsx("br",{}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[x.jsx("button",{type:"submit",className:"btn",style:{marginTop:"10px"},children:"Guardar Entrenamiento"}),x.jsx("button",{type:"button",className:"btn",onClick:u,style:{marginTop:"10px"},children:"Cancelar"})]})]})};var BI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PE=$e.createContext&&$e.createContext(BI),tV=["attr","size","title"];function nV(n,e){if(n==null)return{};var t=rV(n,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function rV(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Bh(){return Bh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bh.apply(this,arguments)}function kE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function zh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kE(Object(t),!0).forEach(function(r){iV(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kE(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iV(n,e,t){return e=sV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sV(n){var e=oV(n,"string");return typeof e=="symbol"?e:e+""}function oV(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zI(n){return n&&n.map((e,t)=>$e.createElement(e.tag,zh({key:t},e.attr),zI(e.child)))}function aV(n){return e=>$e.createElement(lV,Bh({attr:zh({},n.attr)},e),zI(n.child))}function lV(n){var e=t=>{var{attr:r,size:s,title:a}=n,u=nV(n,tV),d=s||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),$e.createElement("svg",Bh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:f,style:zh(zh({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&$e.createElement("title",null,a),n.children)};return PE!==void 0?$e.createElement(PE.Consumer,null,t=>e(t)):e(BI)}function uV(n){return aV({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84-.88 2.85zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72A7.96 7.96 0 0 0 20 10zm-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6zm0 15-4 1.02v-3.1c1.18.68 2.54 1.08 4 1.08s2.82-.4 4-1.08v3.1L12 19z"},child:[]}]})(n)}function $I(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=$I(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Rd(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=$I(n))&&(r&&(r+=" "),r+=e);return r}const cV=(n,e,t,r)=>{if(t==="length"||t==="prototype"||t==="arguments"||t==="caller")return;const s=Object.getOwnPropertyDescriptor(n,t),a=Object.getOwnPropertyDescriptor(e,t);!hV(s,a)&&r||Object.defineProperty(n,t,a)},hV=function(n,e){return n===void 0||n.configurable||n.writable===e.writable&&n.enumerable===e.enumerable&&n.configurable===e.configurable&&(n.writable||n.value===e.value)},dV=(n,e)=>{const t=Object.getPrototypeOf(e);t!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,t)},fV=(n,e)=>`/* Wrapped ${n}*/
${e}`,pV=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),mV=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),gV=(n,e,t)=>{const r=t===""?"":`with ${t.trim()}() `,s=fV.bind(null,r,e.toString());Object.defineProperty(s,"name",mV);const{writable:a,enumerable:u,configurable:d}=pV;Object.defineProperty(n,"toString",{value:s,writable:a,enumerable:u,configurable:d})};function yV(n,e,{ignoreNonConfigurable:t=!1}={}){const{name:r}=n;for(const s of Reflect.ownKeys(e))cV(n,e,s,t);return dV(n,e),gV(n,e,r),n}const vV=new WeakMap,bE=new WeakMap;function WI(n,{cacheKey:e,cache:t=new Map,maxAge:r}={}){if(r===0)return n;if(typeof r=="number"){if(r>2147483647)throw new TypeError("The `maxAge` option cannot exceed 2147483647.");if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const s=function(...a){const u=e?e(a):a[0],d=t.get(u);if(d)return d.data;const f=n.apply(this,a),m=typeof r=="function"?r(...a):r;if(t.set(u,{data:f,maxAge:m?Date.now()+m:Number.POSITIVE_INFINITY}),m&&m>0&&m!==Number.POSITIVE_INFINITY){const v=setTimeout(()=>{t.delete(u)},m);v.unref?.();const w=bE.get(n)??new Set;w.add(v),bE.set(n,w)}return f};return yV(s,n,{ignoreNonConfigurable:!0}),vV.set(s,t),s}function _V(n){return typeof n=="string"}function wV(n,e,t){return t.indexOf(n)===e}function EV(n){return n.toLowerCase()===n}function xE(n){return n.indexOf(",")===-1?n:n.split(",")}function _m(n){if(!n)return n;if(n==="C"||n==="posix"||n==="POSIX")return"en-US";if(n.indexOf(".")!==-1){var e=n.split(".")[0],t=e===void 0?"":e;return _m(t)}if(n.indexOf("@")!==-1){var r=n.split("@")[0],t=r===void 0?"":r;return _m(t)}if(n.indexOf("-")===-1||!EV(n))return n;var s=n.split("-"),a=s[0],u=s[1],d=u===void 0?"":u;return"".concat(a,"-").concat(d.toUpperCase())}function TV(n){var e=n===void 0?{}:n,t=e.useFallbackLocale,r=t===void 0?!0:t,s=e.fallbackLocale,a=s===void 0?"en-US":s,u=[];if(typeof navigator<"u"){for(var d=navigator.languages||[],f=[],m=0,v=d;m<v.length;m++){var w=v[m];f=f.concat(xE(w))}var T=navigator.language,P=T&&xE(T);u=u.concat(f,P)}return r&&u.push(a),u.filter(_V).map(_m).filter(wV)}var SV=WI(TV,{cacheKey:JSON.stringify});function IV(n){return SV(n)[0]||null}var qI=WI(IV,{cacheKey:JSON.stringify});function Bi(n,e,t){return function(s,a=t){const u=n(s)+a;return e(u)}}function Cu(n){return function(t){return new Date(n(t).getTime()-1)}}function Ru(n,e){return function(r){return[n(r),e(r)]}}function ft(n){if(n instanceof Date)return n.getFullYear();if(typeof n=="number")return n;const e=Number.parseInt(n,10);if(typeof n=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${n}.`)}function qs(n){if(n instanceof Date)return n.getMonth();throw new Error(`Failed to get month from date: ${n}.`)}function Pd(n){if(n instanceof Date)return n.getDate();throw new Error(`Failed to get year from date: ${n}.`)}function el(n){const e=ft(n),t=e+(-e+1)%100,r=new Date;return r.setFullYear(t,0,1),r.setHours(0,0,0,0),r}const AV=Bi(ft,el,-100),HI=Bi(ft,el,100),Gg=Cu(HI),CV=Bi(ft,Gg,-100),GI=Ru(el,Gg);function Hs(n){const e=ft(n),t=e+(-e+1)%10,r=new Date;return r.setFullYear(t,0,1),r.setHours(0,0,0,0),r}const KI=Bi(ft,Hs,-10),Kg=Bi(ft,Hs,10),kd=Cu(Kg),QI=Bi(ft,kd,-10),YI=Ru(Hs,kd);function tl(n){const e=ft(n),t=new Date;return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}const JI=Bi(ft,tl,-1),Qg=Bi(ft,tl,1),bd=Cu(Qg),XI=Bi(ft,bd,-1),RV=Ru(tl,bd);function Yg(n,e){return function(r,s=e){const a=ft(r),u=qs(r)+s,d=new Date;return d.setFullYear(a,u,1),d.setHours(0,0,0,0),n(d)}}function Bo(n){const e=ft(n),t=qs(n),r=new Date;return r.setFullYear(e,t,1),r.setHours(0,0,0,0),r}const ZI=Yg(Bo,-1),Jg=Yg(Bo,1),Pu=Cu(Jg),eA=Yg(Pu,-1),PV=Ru(Bo,Pu);function kV(n,e){return function(r,s=e){const a=ft(r),u=qs(r),d=Pd(r)+s,f=new Date;return f.setFullYear(a,u,d),f.setHours(0,0,0,0),n(f)}}function ku(n){const e=ft(n),t=qs(n),r=Pd(n),s=new Date;return s.setFullYear(e,t,r),s.setHours(0,0,0,0),s}const bV=kV(ku,1),Xg=Cu(bV),xV=Ru(ku,Xg);function tA(n){return Pd(Pu(n))}var Zt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},OV={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Zg=[0,1,2,3,4,5,6],bp=new Map;function NV(n){return function(t,r){var s=t||qI();bp.has(s)||bp.set(s,new Map);var a=bp.get(s);return a.has(n)||a.set(n,new Intl.DateTimeFormat(s||void 0,n).format),a.get(n)(r)}}function DV(n){var e=new Date(n);return new Date(e.setHours(12))}function zo(n){return function(e,t){return NV(n)(e,DV(t))}}var LV={day:"numeric"},VV={day:"numeric",month:"long",year:"numeric"},MV={month:"long"},FV={month:"long",year:"numeric"},jV={weekday:"short"},UV={weekday:"long"},BV={year:"numeric"},zV=zo(LV),$V=zo(VV),WV=zo(MV),nA=zo(FV),qV=zo(jV),HV=zo(UV),xd=zo(BV),GV=Zg[0],KV=Zg[5],OE=Zg[6];function hu(n,e){e===void 0&&(e=Zt.ISO_8601);var t=n.getDay();switch(e){case Zt.ISO_8601:return(t+6)%7;case Zt.ISLAMIC:return(t+1)%7;case Zt.HEBREW:case Zt.GREGORY:return t;default:throw new Error("Unsupported calendar type.")}}function QV(n){var e=el(n);return ft(e)}function YV(n){var e=Hs(n);return ft(e)}function wm(n,e){e===void 0&&(e=Zt.ISO_8601);var t=ft(n),r=qs(n),s=n.getDate()-hu(n,e);return new Date(t,r,s)}function JV(n,e){e===void 0&&(e=Zt.ISO_8601);var t=e===Zt.GREGORY?Zt.GREGORY:Zt.ISO_8601,r=wm(n,e),s=ft(n)+1,a,u;do a=new Date(s,0,t===Zt.ISO_8601?4:1),u=wm(a,e),s-=1;while(n<u);return Math.round((r.getTime()-u.getTime())/(864e5*7))+1}function Po(n,e){switch(n){case"century":return el(e);case"decade":return Hs(e);case"year":return tl(e);case"month":return Bo(e);case"day":return ku(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function XV(n,e){switch(n){case"century":return AV(e);case"decade":return KI(e);case"year":return JI(e);case"month":return ZI(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function rA(n,e){switch(n){case"century":return HI(e);case"decade":return Kg(e);case"year":return Qg(e);case"month":return Jg(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function ZV(n,e){switch(n){case"decade":return KI(e,-100);case"year":return JI(e,-10);case"month":return ZI(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function eM(n,e){switch(n){case"decade":return Kg(e,100);case"year":return Qg(e,10);case"month":return Jg(e,12);default:throw new Error("Invalid rangeType: ".concat(n))}}function iA(n,e){switch(n){case"century":return Gg(e);case"decade":return kd(e);case"year":return bd(e);case"month":return Pu(e);case"day":return Xg(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function tM(n,e){switch(n){case"century":return CV(e);case"decade":return QI(e);case"year":return XI(e);case"month":return eA(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function nM(n,e){switch(n){case"decade":return QI(e,-100);case"year":return XI(e,-10);case"month":return eA(e,-12);default:throw new Error("Invalid rangeType: ".concat(n))}}function NE(n,e){switch(n){case"century":return GI(e);case"decade":return YI(e);case"year":return RV(e);case"month":return PV(e);case"day":return xV(e);default:throw new Error("Invalid rangeType: ".concat(n))}}function rM(n,e,t){var r=[e,t].sort(function(s,a){return s.getTime()-a.getTime()});return[Po(n,r[0]),iA(n,r[1])]}function sA(n,e,t){return t.map(function(r){return(e||xd)(n,r)}).join(" – ")}function iM(n,e,t){return sA(n,e,GI(t))}function oA(n,e,t){return sA(n,e,YI(t))}function sM(n){return n.getDay()===new Date().getDay()}function aA(n,e){e===void 0&&(e=Zt.ISO_8601);var t=n.getDay();switch(e){case Zt.ISLAMIC:case Zt.HEBREW:return t===KV||t===OE;case Zt.ISO_8601:case Zt.GREGORY:return t===OE||t===GV;default:throw new Error("Unsupported calendar type.")}}var Jr="react-calendar__navigation";function oM(n){var e=n.activeStartDate,t=n.drillUp,r=n.formatMonthYear,s=r===void 0?nA:r,a=n.formatYear,u=a===void 0?xd:a,d=n.locale,f=n.maxDate,m=n.minDate,v=n.navigationAriaLabel,w=v===void 0?"":v,T=n.navigationAriaLive,P=n.navigationLabel,R=n.next2AriaLabel,O=R===void 0?"":R,A=n.next2Label,$=A===void 0?"»":A,Y=n.nextAriaLabel,Q=Y===void 0?"":Y,ne=n.nextLabel,de=ne===void 0?"›":ne,ae=n.prev2AriaLabel,N=ae===void 0?"":ae,I=n.prev2Label,b=I===void 0?"«":I,D=n.prevAriaLabel,M=D===void 0?"":D,j=n.prevLabel,k=j===void 0?"‹":j,je=n.setActiveStartDate,be=n.showDoubleView,Me=n.view,Ce=n.views,se=Ce.indexOf(Me)>0,ue=Me!=="century",re=XV(Me,e),V=ue?ZV(Me,e):void 0,K=rA(Me,e),ce=ue?eM(Me,e):void 0,Ee=function(){if(re.getFullYear()<0)return!0;var Xe=tM(Me,e);return m&&m>=Xe}(),Re=ue&&function(){if(V.getFullYear()<0)return!0;var Xe=nM(Me,e);return m&&m>=Xe}(),Ne=f&&f<K,De=ue&&f&&f<ce;function Oe(){je(re,"prev")}function Fe(){je(V,"prev2")}function lt(){je(K,"next")}function tn(){je(ce,"next2")}function ut(Xe){var Qn=function(){switch(Me){case"century":return iM(d,u,Xe);case"decade":return oA(d,u,Xe);case"year":return u(d,Xe);case"month":return s(d,Xe);default:throw new Error("Invalid view: ".concat(Me,"."))}}();return P?P({date:Xe,label:Qn,locale:d||qI()||void 0,view:Me}):Qn}function _n(){var Xe="".concat(Jr,"__label");return x.jsxs("button",{"aria-label":w,"aria-live":T,className:Xe,disabled:!se,onClick:t,style:{flexGrow:1},type:"button",children:[x.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--from"),children:ut(e)}),be?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"".concat(Xe,"__divider"),children:" – "}),x.jsx("span",{className:"".concat(Xe,"__labelText ").concat(Xe,"__labelText--to"),children:ut(K)})]}):null]})}return x.jsxs("div",{className:Jr,children:[b!==null&&ue?x.jsx("button",{"aria-label":N,className:"".concat(Jr,"__arrow ").concat(Jr,"__prev2-button"),disabled:Re,onClick:Fe,type:"button",children:b}):null,k!==null&&x.jsx("button",{"aria-label":M,className:"".concat(Jr,"__arrow ").concat(Jr,"__prev-button"),disabled:Ee,onClick:Oe,type:"button",children:k}),_n(),de!==null&&x.jsx("button",{"aria-label":Q,className:"".concat(Jr,"__arrow ").concat(Jr,"__next-button"),disabled:Ne,onClick:lt,type:"button",children:de}),$!==null&&ue?x.jsx("button",{"aria-label":O,className:"".concat(Jr,"__arrow ").concat(Jr,"__next2-button"),disabled:De,onClick:tn,type:"button",children:$}):null]})}var ka=function(){return ka=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},ka.apply(this,arguments)},aM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function DE(n){return"".concat(n,"%")}function ey(n){var e=n.children,t=n.className,r=n.count,s=n.direction,a=n.offset,u=n.style,d=n.wrap,f=aM(n,["children","className","count","direction","offset","style","wrap"]);return x.jsx("div",ka({className:t,style:ka({display:"flex",flexDirection:s,flexWrap:d?"wrap":"nowrap"},u)},f,{children:q.Children.map(e,function(m,v){var w=a&&v===0?DE(100*a/r):null;return q.cloneElement(m,ka(ka({},m.props),{style:{flexBasis:DE(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:w,marginInlineStart:w,marginInlineEnd:0}}))})}))}function lM(n,e,t){return e&&e>n?e:t&&t<n?t:n}function du(n,e){return e[0]<=n&&e[1]>=n}function uM(n,e){return n[0]<=e[0]&&n[1]>=e[1]}function lA(n,e){return du(n[0],e)||du(n[1],e)}function LE(n,e,t){var r=lA(e,n),s=[];if(r){s.push(t);var a=du(n[0],e),u=du(n[1],e);a&&s.push("".concat(t,"Start")),u&&s.push("".concat(t,"End")),a&&u&&s.push("".concat(t,"BothEnds"))}return s}function cM(n){return Array.isArray(n)?n[0]!==null&&n[1]!==null:n!==null}function hM(n){if(!n)throw new Error("args is required");var e=n.value,t=n.date,r=n.hover,s="react-calendar__tile",a=[s];if(!t)return a;var u=new Date,d=function(){if(Array.isArray(t))return t;var P=n.dateType;if(!P)throw new Error("dateType is required when date is not an array of two dates");return NE(P,t)}();if(du(u,d)&&a.push("".concat(s,"--now")),!e||!cM(e))return a;var f=function(){if(Array.isArray(e))return e;var P=n.valueType;if(!P)throw new Error("valueType is required when value is not an array of two dates");return NE(P,e)}();uM(f,d)?a.push("".concat(s,"--active")):lA(f,d)&&a.push("".concat(s,"--hasActive"));var m=LE(f,d,"".concat(s,"--range"));a.push.apply(a,m);var v=Array.isArray(e)?e:[e];if(r&&v.length===1){var w=r>f[0]?[f[0],r]:[r,f[0]],T=LE(w,d,"".concat(s,"--hover"));a.push.apply(a,T)}return a}function Od(n){for(var e=n.className,t=n.count,r=t===void 0?3:t,s=n.dateTransform,a=n.dateType,u=n.end,d=n.hover,f=n.offset,m=n.renderTile,v=n.start,w=n.step,T=w===void 0?1:w,P=n.value,R=n.valueType,O=[],A=v;A<=u;A+=T){var $=s(A);O.push(m({classes:hM({date:$,dateType:a,hover:d,value:P,valueType:R}),date:$}))}return x.jsx(ey,{className:e,count:r,offset:f,wrap:!0,children:O})}function Nd(n){var e=n.activeStartDate,t=n.children,r=n.classes,s=n.date,a=n.formatAbbr,u=n.locale,d=n.maxDate,f=n.maxDateTransform,m=n.minDate,v=n.minDateTransform,w=n.onClick,T=n.onMouseOver,P=n.style,R=n.tileClassName,O=n.tileContent,A=n.tileDisabled,$=n.view,Y=q.useMemo(function(){var ne={activeStartDate:e,date:s,view:$};return typeof R=="function"?R(ne):R},[e,s,R,$]),Q=q.useMemo(function(){var ne={activeStartDate:e,date:s,view:$};return typeof O=="function"?O(ne):O},[e,s,O,$]);return x.jsxs("button",{className:Rd(r,Y),disabled:m&&v(m)>s||d&&f(d)<s||A?.({activeStartDate:e,date:s,view:$}),onClick:w?function(ne){return w(s,ne)}:void 0,onFocus:T?function(){return T(s)}:void 0,onMouseOver:T?function(){return T(s)}:void 0,style:P,type:"button",children:[a?x.jsx("abbr",{"aria-label":a(u,s),children:t}):t,Q]})}var Em=function(){return Em=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Em.apply(this,arguments)},dM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},VE="react-calendar__century-view__decades__decade";function fM(n){var e=n.classes,t=e===void 0?[]:e,r=n.currentCentury,s=n.formatYear,a=s===void 0?xd:s,u=dM(n,["classes","currentCentury","formatYear"]),d=u.date,f=u.locale,m=[];return t&&m.push.apply(m,t),m.push(VE),el(d).getFullYear()!==r&&m.push("".concat(VE,"--neighboringCentury")),x.jsx(Nd,Em({},u,{classes:m,maxDateTransform:kd,minDateTransform:Hs,view:"century",children:oA(f,a,d)}))}var Tm=function(){return Tm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Tm.apply(this,arguments)},ME=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function pM(n){var e=n.activeStartDate,t=n.hover,r=n.showNeighboringCentury,s=n.value,a=n.valueType,u=ME(n,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),d=QV(e),f=d+(r?119:99);return x.jsx(Od,{className:"react-calendar__century-view__decades",dateTransform:Hs,dateType:"decade",end:f,hover:t,renderTile:function(m){var v=m.date,w=ME(m,["date"]);return x.jsx(fM,Tm({},u,w,{activeStartDate:e,currentCentury:d,date:v}),v.getTime())},start:d,step:10,value:s,valueType:a})}var Sm=function(){return Sm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Sm.apply(this,arguments)};function mM(n){function e(){return x.jsx(pM,Sm({},n))}return x.jsx("div",{className:"react-calendar__century-view",children:e()})}var Im=function(){return Im=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Im.apply(this,arguments)},gM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},FE="react-calendar__decade-view__years__year";function yM(n){var e=n.classes,t=e===void 0?[]:e,r=n.currentDecade,s=n.formatYear,a=s===void 0?xd:s,u=gM(n,["classes","currentDecade","formatYear"]),d=u.date,f=u.locale,m=[];return t&&m.push.apply(m,t),m.push(FE),Hs(d).getFullYear()!==r&&m.push("".concat(FE,"--neighboringDecade")),x.jsx(Nd,Im({},u,{classes:m,maxDateTransform:bd,minDateTransform:tl,view:"decade",children:a(f,d)}))}var Am=function(){return Am=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Am.apply(this,arguments)},jE=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function vM(n){var e=n.activeStartDate,t=n.hover,r=n.showNeighboringDecade,s=n.value,a=n.valueType,u=jE(n,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),d=YV(e),f=d+(r?11:9);return x.jsx(Od,{className:"react-calendar__decade-view__years",dateTransform:tl,dateType:"year",end:f,hover:t,renderTile:function(m){var v=m.date,w=jE(m,["date"]);return x.jsx(yM,Am({},u,w,{activeStartDate:e,currentDecade:d,date:v}),v.getTime())},start:d,value:s,valueType:a})}var Cm=function(){return Cm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Cm.apply(this,arguments)};function _M(n){function e(){return x.jsx(vM,Cm({},n))}return x.jsx("div",{className:"react-calendar__decade-view",children:e()})}var Rm=function(){return Rm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Rm.apply(this,arguments)},wM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},UE=function(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))},EM="react-calendar__year-view__months__month";function TM(n){var e=n.classes,t=e===void 0?[]:e,r=n.formatMonth,s=r===void 0?WV:r,a=n.formatMonthYear,u=a===void 0?nA:a,d=wM(n,["classes","formatMonth","formatMonthYear"]),f=d.date,m=d.locale;return x.jsx(Nd,Rm({},d,{classes:UE(UE([],t,!0),[EM],!1),formatAbbr:u,maxDateTransform:Pu,minDateTransform:Bo,view:"year",children:s(m,f)}))}var Pm=function(){return Pm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Pm.apply(this,arguments)},BE=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function SM(n){var e=n.activeStartDate,t=n.hover,r=n.value,s=n.valueType,a=BE(n,["activeStartDate","hover","value","valueType"]),u=0,d=11,f=ft(e);return x.jsx(Od,{className:"react-calendar__year-view__months",dateTransform:function(m){var v=new Date;return v.setFullYear(f,m,1),Bo(v)},dateType:"month",end:d,hover:t,renderTile:function(m){var v=m.date,w=BE(m,["date"]);return x.jsx(TM,Pm({},a,w,{activeStartDate:e,date:v}),v.getTime())},start:u,value:r,valueType:s})}var km=function(){return km=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},km.apply(this,arguments)};function IM(n){function e(){return x.jsx(SM,km({},n))}return x.jsx("div",{className:"react-calendar__year-view",children:e()})}var bm=function(){return bm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},bm.apply(this,arguments)},AM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},xp="react-calendar__month-view__days__day";function CM(n){var e=n.calendarType,t=n.classes,r=t===void 0?[]:t,s=n.currentMonthIndex,a=n.formatDay,u=a===void 0?zV:a,d=n.formatLongDate,f=d===void 0?$V:d,m=AM(n,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),v=m.date,w=m.locale,T=[];return r&&T.push.apply(T,r),T.push(xp),aA(v,e)&&T.push("".concat(xp,"--weekend")),v.getMonth()!==s&&T.push("".concat(xp,"--neighboringMonth")),x.jsx(Nd,bm({},m,{classes:T,formatAbbr:f,maxDateTransform:Xg,minDateTransform:ku,view:"month",children:u(w,v)}))}var xm=function(){return xm=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},xm.apply(this,arguments)},zE=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function RM(n){var e=n.activeStartDate,t=n.calendarType,r=n.hover,s=n.showFixedNumberOfWeeks,a=n.showNeighboringMonth,u=n.value,d=n.valueType,f=zE(n,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),m=ft(e),v=qs(e),w=s||a,T=hu(e,t),P=w?0:T,R=(w?-T:0)+1,O=function(){if(s)return R+6*7-1;var A=tA(e);if(a){var $=new Date;$.setFullYear(m,v,A),$.setHours(0,0,0,0);var Y=7-hu($,t)-1;return A+Y}return A}();return x.jsx(Od,{className:"react-calendar__month-view__days",count:7,dateTransform:function(A){var $=new Date;return $.setFullYear(m,v,A),ku($)},dateType:"day",hover:r,end:O,renderTile:function(A){var $=A.date,Y=zE(A,["date"]);return x.jsx(CM,xm({},f,Y,{activeStartDate:e,calendarType:t,currentMonthIndex:v,date:$}),$.getTime())},offset:P,start:R,value:u,valueType:d})}var uA="react-calendar__month-view__weekdays",Op="".concat(uA,"__weekday");function PM(n){for(var e=n.calendarType,t=n.formatShortWeekday,r=t===void 0?qV:t,s=n.formatWeekday,a=s===void 0?HV:s,u=n.locale,d=n.onMouseLeave,f=new Date,m=Bo(f),v=ft(m),w=qs(m),T=[],P=1;P<=7;P+=1){var R=new Date(v,w,P-hu(m,e)),O=a(u,R);T.push(x.jsx("div",{className:Rd(Op,sM(R)&&"".concat(Op,"--current"),aA(R,e)&&"".concat(Op,"--weekend")),children:x.jsx("abbr",{"aria-label":O,title:O,children:r(u,R).replace(".","")})},P))}return x.jsx(ey,{className:uA,count:7,onFocus:d,onMouseOver:d,children:T})}var $h=function(){return $h=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},$h.apply(this,arguments)},$E=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},WE="react-calendar__tile";function kM(n){var e=n.onClickWeekNumber,t=n.weekNumber,r=x.jsx("span",{children:t});if(e){var s=n.date,a=n.onClickWeekNumber,u=n.weekNumber,d=$E(n,["date","onClickWeekNumber","weekNumber"]);return x.jsx("button",$h({},d,{className:WE,onClick:function(f){return a(u,s,f)},type:"button",children:r}))}else{n.date,n.onClickWeekNumber,n.weekNumber;var d=$E(n,["date","onClickWeekNumber","weekNumber"]);return x.jsx("div",$h({},d,{className:WE,children:r}))}}function bM(n){var e=n.activeStartDate,t=n.calendarType,r=n.onClickWeekNumber,s=n.onMouseLeave,a=n.showFixedNumberOfWeeks,u=function(){if(a)return 6;var m=tA(e),v=hu(e,t),w=m-(7-v);return 1+Math.ceil(w/7)}(),d=function(){for(var m=ft(e),v=qs(e),w=Pd(e),T=[],P=0;P<u;P+=1)T.push(wm(new Date(m,v,w+P*7),t));return T}(),f=d.map(function(m){return JV(m,t)});return x.jsx(ey,{className:"react-calendar__month-view__weekNumbers",count:u,direction:"column",onFocus:s,onMouseOver:s,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:f.map(function(m,v){var w=d[v];if(!w)throw new Error("date is not defined");return x.jsx(kM,{date:w,onClickWeekNumber:r,weekNumber:m},m)})})}var Om=function(){return Om=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Om.apply(this,arguments)},xM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};function OM(n){if(n)for(var e=0,t=Object.entries(OV);e<t.length;e++){var r=t[e],s=r[0],a=r[1];if(a.includes(n))return s}return Zt.ISO_8601}function NM(n){var e=n.activeStartDate,t=n.locale,r=n.onMouseLeave,s=n.showFixedNumberOfWeeks,a=n.calendarType,u=a===void 0?OM(t):a,d=n.formatShortWeekday,f=n.formatWeekday,m=n.onClickWeekNumber,v=n.showWeekNumbers,w=xM(n,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function T(){return x.jsx(PM,{calendarType:u,formatShortWeekday:d,formatWeekday:f,locale:t,onMouseLeave:r})}function P(){return v?x.jsx(bM,{activeStartDate:e,calendarType:u,onClickWeekNumber:m,onMouseLeave:r,showFixedNumberOfWeeks:s}):null}function R(){return x.jsx(RM,Om({calendarType:u},w))}var O="react-calendar__month-view";return x.jsx("div",{className:Rd(O,v?"".concat(O,"--weekNumbers"):""),children:x.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[P(),x.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[T(),R()]})]})})}var ba=function(){return ba=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},ba.apply(this,arguments)},Qc="react-calendar",dh=["century","decade","year","month"],DM=["decade","year","month","day"],ty=new Date;ty.setFullYear(1,0,1);ty.setHours(0,0,0,0);var LM=new Date(864e13);function Wl(n){return n instanceof Date?n:new Date(n)}function cA(n,e){return dh.slice(dh.indexOf(n),dh.indexOf(e)+1)}function VM(n,e,t){var r=cA(e,t);return r.indexOf(n)!==-1}function ny(n,e,t){return n&&VM(n,e,t)?n:t}function hA(n){var e=dh.indexOf(n);return DM[e]}function MM(n,e){var t=Array.isArray(n)?n[e]:n;if(!t)return null;var r=Wl(t);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(n));return r}function dA(n,e){var t=n.value,r=n.minDate,s=n.maxDate,a=n.maxDetail,u=MM(t,e);if(!u)return null;var d=hA(a),f=function(){switch(e){case 0:return Po(d,u);case 1:return iA(d,u);default:throw new Error("Invalid index value: ".concat(e))}}();return lM(f,r,s)}var ry=function(n){return dA(n,0)},fA=function(n){return dA(n,1)},FM=function(n){return[ry,fA].map(function(e){return e(n)})};function pA(n){var e=n.maxDate,t=n.maxDetail,r=n.minDate,s=n.minDetail,a=n.value,u=n.view,d=ny(u,s,t),f=ry({value:a,minDate:r,maxDate:e,maxDetail:t})||new Date;return Po(d,f)}function jM(n){var e=n.activeStartDate,t=n.defaultActiveStartDate,r=n.defaultValue,s=n.defaultView,a=n.maxDate,u=n.maxDetail,d=n.minDate,f=n.minDetail,m=n.value,v=n.view,w=ny(v,f,u),T=e||t;return T?Po(w,T):pA({maxDate:a,maxDetail:u,minDate:d,minDetail:f,value:m||r,view:v||s})}function Np(n){return n&&(!Array.isArray(n)||n.length===1)}function Yc(n,e){return n instanceof Date&&e instanceof Date&&n.getTime()===e.getTime()}var UM=q.forwardRef(function(e,t){var r=e.activeStartDate,s=e.allowPartialRange,a=e.calendarType,u=e.className,d=e.defaultActiveStartDate,f=e.defaultValue,m=e.defaultView,v=e.formatDay,w=e.formatLongDate,T=e.formatMonth,P=e.formatMonthYear,R=e.formatShortWeekday,O=e.formatWeekday,A=e.formatYear,$=e.goToRangeStartOnSelect,Y=$===void 0?!0:$,Q=e.inputRef,ne=e.locale,de=e.maxDate,ae=de===void 0?LM:de,N=e.maxDetail,I=N===void 0?"month":N,b=e.minDate,D=b===void 0?ty:b,M=e.minDetail,j=M===void 0?"century":M,k=e.navigationAriaLabel,je=e.navigationAriaLive,be=e.navigationLabel,Me=e.next2AriaLabel,Ce=e.next2Label,se=e.nextAriaLabel,ue=e.nextLabel,re=e.onActiveStartDateChange,V=e.onChange,K=e.onClickDay,ce=e.onClickDecade,Ee=e.onClickMonth,Re=e.onClickWeekNumber,Ne=e.onClickYear,De=e.onDrillDown,Oe=e.onDrillUp,Fe=e.onViewChange,lt=e.prev2AriaLabel,tn=e.prev2Label,ut=e.prevAriaLabel,_n=e.prevLabel,Xe=e.returnValue,Qn=Xe===void 0?"start":Xe,jt=e.selectRange,Lr=e.showDoubleView,Gs=e.showFixedNumberOfWeeks,ai=e.showNavigation,ur=ai===void 0?!0:ai,cr=e.showNeighboringCentury,Ks=e.showNeighboringDecade,li=e.showNeighboringMonth,zi=li===void 0?!0:li,Qs=e.showWeekNumbers,Tt=e.tileClassName,St=e.tileContent,hr=e.tileDisabled,ui=e.value,dr=e.view,Vr=q.useState(d),ci=Vr[0],Mr=Vr[1],$i=q.useState(null),Ys=$i[0],Wi=$i[1],qi=q.useState(Array.isArray(f)?f.map(function(Pe){return Pe!==null?Wl(Pe):null}):f!=null?Wl(f):null),fr=qi[0],Hi=qi[1],hi=q.useState(m),wn=hi[0],Vn=hi[1],It=r||ci||jM({activeStartDate:r,defaultActiveStartDate:d,defaultValue:f,defaultView:m,maxDate:ae,maxDetail:I,minDate:D,minDetail:j,value:ui,view:dr}),rt=function(){var Pe=function(){return jt&&Np(fr)?fr:ui!==void 0?ui:fr}();return Pe?Array.isArray(Pe)?Pe.map(function(We){return We!==null?Wl(We):null}):Pe!==null?Wl(Pe):null:null}(),Fr=hA(I),Qe=ny(dr||wn,j,I),nn=cA(j,I),pr=jt?Ys:null,di=nn.indexOf(Qe)<nn.length-1,ct=nn.indexOf(Qe)>0,fi=q.useCallback(function(Pe){var We=function(){switch(Qn){case"start":return ry;case"end":return fA;case"range":return FM;default:throw new Error("Invalid returnValue.")}}();return We({maxDate:ae,maxDetail:I,minDate:D,value:Pe})},[ae,I,D,Qn]),fn=q.useCallback(function(Pe,We){Mr(Pe);var it={action:We,activeStartDate:Pe,value:rt,view:Qe};re&&!Yc(It,Pe)&&re(it)},[It,re,rt,Qe]),Yn=q.useCallback(function(Pe,We){var it=function(){switch(Qe){case"century":return ce;case"decade":return Ne;case"year":return Ee;case"month":return K;default:throw new Error("Invalid view: ".concat(Qe,"."))}}();it&&it(Pe,We)},[K,ce,Ee,Ne,Qe]),mr=q.useCallback(function(Pe,We){if(di){Yn(Pe,We);var it=nn[nn.indexOf(Qe)+1];if(!it)throw new Error("Attempted to drill down from the lowest view.");Mr(Pe),Vn(it);var Ht={action:"drillDown",activeStartDate:Pe,value:rt,view:it};re&&!Yc(It,Pe)&&re(Ht),Fe&&Qe!==it&&Fe(Ht),De&&De(Ht)}},[It,di,re,Yn,De,Fe,rt,Qe,nn]),jr=q.useCallback(function(){if(ct){var Pe=nn[nn.indexOf(Qe)-1];if(!Pe)throw new Error("Attempted to drill up from the highest view.");var We=Po(Pe,It);Mr(We),Vn(Pe);var it={action:"drillUp",activeStartDate:We,value:rt,view:Pe};re&&!Yc(It,We)&&re(it),Fe&&Qe!==Pe&&Fe(it),Oe&&Oe(it)}},[It,ct,re,Oe,Fe,rt,Qe,nn]),pn=q.useCallback(function(Pe,We){var it=rt;Yn(Pe,We);var Ht=jt&&!Np(it),Ut;if(jt)if(Ht)Ut=Po(Fr,Pe);else{if(!it)throw new Error("previousValue is required");if(Array.isArray(it))throw new Error("previousValue must not be an array");Ut=rM(Fr,it,Pe)}else Ut=fi(Pe);var Ur=!jt||Ht||Y?pA({maxDate:ae,maxDetail:I,minDate:D,minDetail:j,value:Ut,view:Qe}):null;We.persist(),Mr(Ur),Hi(Ut);var Zs={action:"onChange",activeStartDate:Ur,value:Ut,view:Qe};if(re&&!Yc(It,Ur)&&re(Zs),V)if(jt){var Wo=Np(Ut);if(!Wo)V(Ut||null,We);else if(s){if(Array.isArray(Ut))throw new Error("value must not be an array");V([Ut||null,null],We)}}else V(Ut||null,We)},[It,s,fi,Y,ae,I,D,j,re,V,Yn,jt,rt,Fr,Qe]);function Js(Pe){Wi(Pe)}function Xs(){Wi(null)}q.useImperativeHandle(t,function(){return{activeStartDate:It,drillDown:mr,drillUp:jr,onChange:pn,setActiveStartDate:fn,value:rt,view:Qe}},[It,mr,jr,pn,fn,rt,Qe]);function pi(Pe){var We=Pe?rA(Qe,It):Po(Qe,It),it=di?mr:pn,Ht={activeStartDate:We,hover:pr,locale:ne,maxDate:ae,minDate:D,onClick:it,onMouseOver:jt?Js:void 0,tileClassName:Tt,tileContent:St,tileDisabled:hr,value:rt,valueType:Fr};switch(Qe){case"century":return x.jsx(mM,ba({formatYear:A,showNeighboringCentury:cr},Ht));case"decade":return x.jsx(_M,ba({formatYear:A,showNeighboringDecade:Ks},Ht));case"year":return x.jsx(IM,ba({formatMonth:T,formatMonthYear:P},Ht));case"month":return x.jsx(NM,ba({calendarType:a,formatDay:v,formatLongDate:w,formatShortWeekday:R,formatWeekday:O,onClickWeekNumber:Re,onMouseLeave:jt?Xs:void 0,showFixedNumberOfWeeks:typeof Gs<"u"?Gs:Lr,showNeighboringMonth:zi,showWeekNumbers:Qs},Ht));default:throw new Error("Invalid view: ".concat(Qe,"."))}}function $o(){return ur?x.jsx(oM,{activeStartDate:It,drillUp:jr,formatMonthYear:P,formatYear:A,locale:ne,maxDate:ae,minDate:D,navigationAriaLabel:k,navigationAriaLive:je,navigationLabel:be,next2AriaLabel:Me,next2Label:Ce,nextAriaLabel:se,nextLabel:ue,prev2AriaLabel:lt,prev2Label:tn,prevAriaLabel:ut,prevLabel:_n,setActiveStartDate:fn,showDoubleView:Lr,view:Qe,views:nn}):null}var Mn=Array.isArray(rt)?rt:[rt];return x.jsxs("div",{className:Rd(Qc,jt&&Mn.length===1&&"".concat(Qc,"--selectRange"),Lr&&"".concat(Qc,"--doubleView"),u),ref:Q,children:[$o(),x.jsxs("div",{className:"".concat(Qc,"__viewContainer"),onBlur:jt?Xs:void 0,onMouseLeave:jt?Xs:void 0,children:[pi(),Lr?pi(!0):null]})]})});const BM=({workoutId:n,onCancel:e})=>{const{user:t}=Ln(),[r,s]=q.useState(null),[a,u]=q.useState([]),[d,f]=q.useState(!0),[m,v]=q.useState([]);q.useEffect(()=>{(async()=>{if(!t||!n)return;const R=Ua(xn,"users",t.uid,"workouts_completed",n),O=await KN(R);if(O.exists()){const A=O.data(),{sessionId:$,rutineId:Y}=A;s({id:O.id,...A});const Q=A.exercises.map(N=>({name:N.name,sets:N.sets?.map(I=>({reps:I.reps||"",weight:I.weight||"",rpe:I.rpe||""}))}));u(Q);const ne=bi(xn,"workouts_templates"),de=Is(ne,Es("rutineId","==",Y)),ae=await xi(de);if(!ae.empty){const b=(ae.docs[0].data().sessions||[]).find(M=>M.id===$),D=b?b.exercises:[];v(D)}}f(!1)})()},[t,n]);const w=(P,R,O,A)=>{const $=[...a];$[P].sets[R][O]=A,u($)},T=async P=>{P.preventDefault();try{const R=Ua(xn,"users",t.uid,"workouts_completed",n);await zS(R,{exercises:a}),alert("Entrenamiento actualizado"),e()}catch(R){console.error("Error al guardar los cambios:",R),alert("Error al guardar los cambios.")}};return d?x.jsx("p",{children:"Cargando entrenamiento..."}):r?x.jsxs("div",{className:"workout-detail",children:[x.jsxs("h1",{children:["Editar entrenamiento del ",new Date(r.createdAt.seconds*1e3).toLocaleDateString()]}),x.jsxs("form",{onSubmit:T,children:[a.map((P,R)=>x.jsxs("div",{style:{marginBottom:"20px"},children:[x.jsx("h4",{children:P.name}),P.sets?.map((O,A)=>x.jsxs("div",{style:{marginBottom:"10px"},children:[x.jsxs("label",{children:["Serie ",A+1]}),x.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"10px",marginTop:"5px"},children:[x.jsx("label",{style:{flex:1},children:`Reps (${m[R].reps})`}),x.jsx("label",{style:{flex:1},children:`RPE (${m[R].rpe})`}),x.jsx("label",{style:{flex:1},children:"Peso (kg)"})]}),x.jsxs("div",{style:{display:"flex",gap:"10px"},children:[x.jsx("input",{type:"number",placeholder:"Reps",value:O.reps,onChange:$=>w(R,A,"reps",$.target.value)}),x.jsx("input",{type:"number",placeholder:"Kgs",value:O.weight,onChange:$=>w(R,A,"weight",$.target.value)}),x.jsx("input",{type:"number",placeholder:"RPE",value:O.rpe,onChange:$=>w(R,A,"rpe",$.target.value)})]})]},A))]},R)),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px"},children:[x.jsx("button",{type:"submit",className:"btn",children:"Guardar Cambios"}),x.jsx("button",{type:"button",className:"btn",onClick:e,children:"Cancelar"})]})]})]}):x.jsx("p",{children:"Entrenamiento no encontrado."})},zM=({activeRutine:n,onStart:e})=>{const[t,r]=q.useState([]),[s,a]=q.useState([]),{user:u}=Ln();ji(),q.useEffect(()=>{(async()=>{if(!u)return;const v=bi(xn,"users",u.uid,"workouts_completed"),w=Is(v),P=(await xi(w)).docs.map(O=>({id:O.id,...O.data()}));r(P);const R=P.map(O=>new Date(O.createdAt.seconds*1e3).toDateString());a(R)})()},[u]);const d=(m,v)=>{const w=t.find(T=>T.createdAt.toDate().toDateString()===m.toDateString());w&&(console.log(w.id),e(w.id))},f=({date:m,view:v})=>{if(v==="month"){const w=t.find(T=>T.createdAt.toDate().toDateString()===m.toDateString());if(w)return x.jsx("div",{className:"dot",title:w.sessionId||"Entrenamiento",children:"●"})}return null};return x.jsxs("div",{children:[x.jsx("h2",{children:"Calendario de entrenamientos"}),x.jsx(UM,{onClickDay:d,tileContent:f,locale:"es-ES"})]})},$M=({rutine:n,userRole:e})=>{const t=ji(),{user:r}=Ln(),[s,a]=q.useState(!1),{activeRutine:u}=$g(),d=n.membership==="premium",f=e==="premium"||!d,m=async()=>{if(!f){t("/upgrade");return}if(!s){a(!0);try{const v=Ua(xn,"users",r.uid);await zS(v,{activeRutineId:n.rutineId}),console.error("Rutina actualizada correctamente")}catch(v){console.error("Error al actualizar activeRutineId:",v)}finally{a(!1)}}};return x.jsxs("div",{onClick:m,className:`rutine-card 
        ${f?"":"locked"} 
        ${f&&u?"active":""}`,children:[d&&x.jsx("div",{className:"premium-badge",children:"Premium"}),x.jsx("h3",{className:"rutine-title",children:n.name}),x.jsx("p",{className:"rutine-description",children:n.description}),x.jsxs("p",{className:"rutine-days",children:["Días por semana: ",n.days]}),x.jsx("div",{children:n.sessions.map((v,w)=>x.jsxs("span",{className:"rutine-session",children:["📅 ",v.name]},w))})]})},WM=()=>{const{user:n}=Ln(),[e,t]=q.useState([]),[r,s]=q.useState("free");return q.useEffect(()=>{if(!n){s("free");return}(async()=>{const d=(await Kh(n)).claims.role||"free";s(d)})()},[n]),q.useEffect(()=>{(async()=>{const u=bi(xn,"workouts_templates"),f=(await xi(u)).docs.map(m=>({id:m.id,...m.data()}));console.log("Rutines fetched:",f),t(f)})()},[]),x.jsx("div",{className:"rutine-list",children:e.map(a=>x.jsx($M,{rutine:a,userRole:r},a.id))})},qM=()=>{const{user:n,claims:e,logout:t}=Ln(),[r,s]=q.useState(!0),a=ji(),[u,d]=q.useState(null),[f,m]=q.useState(""),[v,w]=q.useState([]),[T,P]=q.useState(""),[R,O]=q.useState(!1),[A,$]=q.useState([]),{activeRutine:Y,activeRutineName:Q}=$g(),[ne,de]=q.useState("home"),[ae,N]=q.useState(""),I=async()=>{await t(),a("/login")},b=()=>{a("/upgrade")},D=async()=>{try{const k=bi(xn,"users"),je=Is(k,Es("email","==",n.email.toLowerCase())),be=await xi(je);console.log("userSnap",be);const Me=be.docs[0].data().activeRutineId;if(!Me){console.warn("El usuario no tiene una rutina activa.");return}const Ce=bi(xn,"workouts_templates"),se=Is(Ce,Es("rutineId","==",Me)),ue=await xi(se),re=bi(xn,"users",n.uid,"workouts_completed"),V=Is(re,Es("rutineId","==",Me),rE("createdAt","desc"),iE(1)),K=await xi(V);let ce=null;if(!K.empty)ce=K.docs[0].data();else{if(!ue){console.warn("No sessions found in the first workout template.");return}const ut=ue.docs[0].data();d(ut.sessions[0].exercises),m(ut.sessions[0].id),P(ut.sessions[0].name),w(ue.docs[0].data().sessions);return}const Ee=ue.docs[0].data().sessions;w(Ee);const Re=ce&&ce.sessionId?ce.sessionId:ue.docs[0]?.data()?.sessions?.[0]?.id??null,De=(Ee.findIndex(ut=>ut.id===Re)+1)%Ee.length,Oe=Ee[De].id,Fe=Ee[De].name;m(Oe),P(Fe),d(ce?.sessions?.[0]?.exercises||[]);const lt=Is(re,Es("rutineId","==",Me),Es("sessionId","==",Oe),rE("createdAt","desc"),iE(1)),tn=await xi(lt);if(tn.empty){console.log("No se encontró entrenamiento previo para esta sesión. Usando plantilla.");const ut=Ee.find(_n=>_n.id===Oe);console.log(ut),$(ut?ut.exercises:[])}else{const ut=tn.docs[0].data();console.log("Recuperado entrenamiento anterior:",ut),$(ut.exercises||[])}}catch(k){console.error("Error al cargar entrenamientos:",k)}};q.useEffect(()=>{(async()=>{n&&(await UI(),await D(),s(!1))})()},[n,Y]);const M=k=>{N(k),O(!0)},j=async k=>{if(!n){alert("Usuario no autenticado");return}const je={...k};try{const be=bi(xn,"users",n.uid,"workouts_completed");await YN(be,je),alert("Entrenamiento guardado"),O(!1),d(je),await D()}catch(be){console.error("Error al guardar el entrenamiento:",be),alert("Ocurrió un error al guardar el entrenamiento.")}};return r?null:x.jsxs("div",{className:"container",children:[x.jsxs("div",{className:"top-bar",children:[e.role!=="premium"&&x.jsxs("button",{className:"btn",onClick:b,children:["Upgrade ",x.jsx(uV,{size:24})]}),x.jsx("button",{className:"btn",onClick:I,children:"Cerrar sesión"})]}),x.jsxs("div",{className:"home-container",children:[x.jsxs("aside",{className:"sidebar",children:[x.jsx("h2",{className:"cultura-fit",children:"Cultura Fit"}),x.jsxs("nav",{className:"nav-menu",children:[x.jsx("button",{className:"nav-btn",onClick:()=>{de("home"),O(!1)},children:"Inicio"}),x.jsx("button",{className:"nav-btn",onClick:()=>{de("calendar"),O(!1)},children:"Calendario"}),x.jsx("button",{className:"nav-btn",onClick:()=>{de("rutines"),O(!1)},children:"Rutinas"})]})]}),x.jsxs("main",{className:"main-content",children:[x.jsx("section",{children:x.jsx("h1",{children:"Bienvenido a tu espacio Cultura Fit 💪"})}),ne==="home"&&x.jsx("div",{style:{padding:"20px"},children:R?x.jsx(eV,{exercisesPlaceholder:A,exercisesWorkOutTemplate:v,sessionId:f,sessionName:T,onSubmit:j,onCancel:()=>O(!1)}):x.jsx(w2,{nextRoutine:T,onStart:M})}),ne==="calendar"&&x.jsx("div",{style:{padding:"20px"},children:R?x.jsx(BM,{workoutId:ae,onCancel:()=>O(!1)}):x.jsx(zM,{activeRutine:Y,onStart:M})}),ne==="rutines"&&x.jsx("div",{style:{padding:"20px"},children:x.jsx(WM,{})})]}),x.jsx("aside",{className:"sidebar-right",children:x.jsxs("h3",{style:{marginTop:"20px"},children:["Rutina Activa: ",Q||""]})})]})]})};function HM(){const{user:n,logout:e}=Ln();return x.jsxs("div",{children:[x.jsx("h2",{children:"Mi Perfil"}),x.jsxs("p",{children:["Email: ",n?.email]}),x.jsxs("p",{children:["Rol: ",n?.role]}),x.jsx("button",{onClick:e,children:"Cerrar sesión"})]})}const GM=({requiredRole:n="free"})=>{const{user:e}=Ln(),[t,r]=q.useState(!1);return Us(),e?n==="premium"&&e.role!=="premium"?x.jsx(mh,{to:"/upgrade"}):x.jsx(x1,{}):x.jsx(mh,{to:"/login"})};function KM(){const{register:n}=Ln(),[e,t]=q.useState({email:"",password:"",displayName:"",role:"free"}),r=ji(),s=async a=>{a.preventDefault();try{await n(e);const d=Jm().currentUser;if(!d)return;await d.getIdToken(!0),r("/home")}catch(u){alert("Error al registrar: "+u.message)}};return x.jsxs("form",{onSubmit:s,children:[x.jsx("input",{placeholder:"Nombre",onChange:a=>t({...e,displayName:a.target.value})}),x.jsx("input",{placeholder:"Email",onChange:a=>t({...e,email:a.target.value.toLowerCase()})}),x.jsx("input",{type:"password",placeholder:"Contraseña",onChange:a=>t({...e,password:a.target.value})}),x.jsx("button",{className:"btn",type:"submit",children:"Registrarse"})]})}function QM(){const{user:n,register:e}=Ln();if(!n)return x.jsxs("div",{children:[x.jsx("h1",{children:"Crear cuenta"}),x.jsx(KM,{})]})}const YM=()=>{const{login:n}=Ln(),e=ji(),[t,r]=q.useState(""),[s,a]=q.useState(""),[u,d]=q.useState(null),f=async m=>{m.preventDefault();try{await n(t,s),e("/home")}catch{d("Credenciales incorrectas. Inténtelo nuevamente.")}};return x.jsx("div",{className:"container",children:x.jsxs("div",{className:"card",children:[x.jsx("h2",{className:"cultura-fit",children:"Cultura Fit"}),u&&x.jsx("div",{className:"error",children:u}),x.jsxs("form",{onSubmit:f,className:"form.login",children:[x.jsx("input",{type:"email",id:"email",placeholder:"Correo electrónico: tucorreo@example.com",value:t,onChange:m=>r(m.target.value),required:!0}),x.jsx("input",{type:"password",id:"password",placeholder:"Contraseña",value:s,onChange:m=>a(m.target.value),required:!0}),x.jsx("button",{type:"submit",className:"btn",style:{width:"50%"},children:"Entrar"})]}),x.jsxs("p",{className:"register",children:["¿No tienes cuenta? ",x.jsx($1,{to:"/register",children:"Regístrate aquí"})]})]})})};var mA="basil",JM=function(e){return e===3?"v3":e},gA="https://js.stripe.com",XM="".concat(gA,"/").concat(mA,"/stripe.js"),ZM=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,e4=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var t4=function(e){return ZM.test(e)||e4.test(e)},n4=function(){for(var e=document.querySelectorAll('script[src^="'.concat(gA,'"]')),t=0;t<e.length;t++){var r=e[t];if(t4(r.src))return r}return null},qE=function(e){var t="",r=document.createElement("script");r.src="".concat(XM).concat(t);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},r4=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:t})},Vl=null,Jc=null,Xc=null,i4=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},s4=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},o4=function(e){return Vl!==null?Vl:(Vl=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var s=n4();if(!(s&&e)){if(!s)s=qE(e);else if(s&&Xc!==null&&Jc!==null){var a;s.removeEventListener("load",Xc),s.removeEventListener("error",Jc),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=qE(e)}}Xc=s4(t,r),Jc=i4(r),s.addEventListener("load",Xc),s.addEventListener("error",Jc)}catch(u){r(u);return}}),Vl.catch(function(t){return Vl=null,Promise.reject(t)}))},a4=function(e,t,r){if(e===null)return null;var s=t[0],a=s.match(/^pk_test/),u=JM(e.version),d=mA;a&&u!==d&&console.warn("Stripe.js@".concat(u," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(d,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var f=e.apply(void 0,t);return r4(f,r),f},Ml,yA=!1,vA=function(){return Ml||(Ml=o4(null).catch(function(e){return Ml=null,Promise.reject(e)}),Ml)};Promise.resolve().then(function(){return vA()}).catch(function(n){yA||console.warn(n)});var _A=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];yA=!0;var s=Date.now();return vA().then(function(a){return a4(a,t,s)})};_A("pk_test_51RVbJnFLiEmdxnPslJ3Yhs2tmNsi1azDOXkPzMTfE0W5O5Tn7gJJO8qNRsGh8mxdRZOlyi3Di3xlkkE498p2Okti00AbaQ5EXT");const l4="https://cultura-fit.onrender.com",u4=async n=>{const e=await Gh(n);return console.log(e),(await vt.post(`${l4}/api/checkout/create-payment-intent`,{},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).data.clientSecret},c4={theme:"stripe"},h4=()=>{const{user:n}=Ln(),[e,t]=q.useState(!1),r=ji(),s=async()=>{t(!0),r("/checkout"),t(!1)};return q.useEffect(()=>{!e&&n?.role==="premium"&&r("/home",{replace:!0})},[n,e,r]),x.jsxs("div",{className:"container-card",children:[x.jsx("h2",{className:"cultura-fit",children:"Hazte Premium"}),x.jsx("p",{children:"Accede a entrenamientos exclusivos, métricas avanzadas y más."}),x.jsxs("ul",{style:{listStyle:"none"},children:[x.jsx("li",{children:"✔️ Planes personalizados"}),x.jsx("li",{children:"✔️ Seguimiento de rendimiento"}),x.jsx("li",{children:"✔️ Soporte prioritario"})]}),x.jsx("button",{className:"btn",onClick:s,disabled:e,children:e?"Redirigiendo...":"Actualizar a Premium"})]})};var Dp={exports:{}},Lp,HE;function d4(){if(HE)return Lp;HE=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lp=n,Lp}var Vp,GE;function f4(){if(GE)return Vp;GE=1;var n=d4();function e(){}function t(){}return t.resetWarningCache=e,Vp=function(){function r(u,d,f,m,v,w){if(w!==n){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},Vp}var KE;function p4(){return KE||(KE=1,Dp.exports=f4()()),Dp.exports}var m4=p4();const gt=r0(m4);function QE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function YE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QE(Object(t),!0).forEach(function(r){wA(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):QE(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fh(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fh=function(e){return typeof e}:fh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(n)}function wA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g4(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function y4(n,e){if(n==null)return{};var t=g4(n,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function EA(n,e){return v4(n)||_4(n,e)||w4(n,e)||E4()}function v4(n){if(Array.isArray(n))return n}function _4(n,e){var t=n&&(typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var r=[],s=!0,a=!1,u,d;try{for(t=t.call(n);!(s=(u=t.next()).done)&&(r.push(u.value),!(e&&r.length===e));s=!0);}catch(f){a=!0,d=f}finally{try{!s&&t.return!=null&&t.return()}finally{if(a)throw d}}return r}}function w4(n,e){if(n){if(typeof n=="string")return JE(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return JE(n,e)}}function JE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function E4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qn=function(e,t,r){var s=!!r,a=$e.useRef(r);$e.useEffect(function(){a.current=r},[r]),$e.useEffect(function(){if(!s||!e)return function(){};var u=function(){a.current&&a.current.apply(a,arguments)};return e.on(t,u),function(){e.off(t,u)}},[s,t,e,a])},Nm=function(e){var t=$e.useRef(e);return $e.useEffect(function(){t.current=e},[e]),t.current},Ba=function(e){return e!==null&&fh(e)==="object"},T4=function(e){return Ba(e)&&typeof e.then=="function"},S4=function(e){return Ba(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},XE="[object Object]",I4=function n(e,t){if(!Ba(e)||!Ba(t))return e===t;var r=Array.isArray(e),s=Array.isArray(t);if(r!==s)return!1;var a=Object.prototype.toString.call(e)===XE,u=Object.prototype.toString.call(t)===XE;if(a!==u)return!1;if(!a&&!r)return e===t;var d=Object.keys(e),f=Object.keys(t);if(d.length!==f.length)return!1;for(var m={},v=0;v<d.length;v+=1)m[d[v]]=!0;for(var w=0;w<f.length;w+=1)m[f[w]]=!0;var T=Object.keys(m);if(T.length!==d.length)return!1;var P=e,R=t,O=function($){return n(P[$],R[$])};return T.every(O)},TA=function(e,t,r){return Ba(e)?Object.keys(e).reduce(function(s,a){var u=!Ba(t)||!I4(e[a],t[a]);return r.includes(a)?(u&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):u?YE(YE({},s||{}),{},wA({},a,e[a])):s},null):null},SA="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ZE=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:SA;if(e===null||S4(e))return e;throw new Error(t)},A4=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:SA;if(T4(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return ZE(s,t)})};var r=ZE(e,t);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},C4=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},Dd=$e.createContext(null);Dd.displayName="ElementsContext";var IA=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},AA=function(e){var t=e.stripe,r=e.options,s=e.children,a=$e.useMemo(function(){return A4(t)},[t]),u=$e.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),d=EA(u,2),f=d[0],m=d[1];$e.useEffect(function(){var T=!0,P=function(O){m(function(A){return A.stripe?A:{stripe:O,elements:O.elements(r)}})};return a.tag==="async"&&!f.stripe?a.stripePromise.then(function(R){R&&T&&P(R)}):a.tag==="sync"&&!f.stripe&&P(a.stripe),function(){T=!1}},[a,f,r]);var v=Nm(t);$e.useEffect(function(){v!==null&&v!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[v,t]);var w=Nm(r);return $e.useEffect(function(){if(f.elements){var T=TA(r,w,["clientSecret","fonts"]);T&&f.elements.update(T)}},[r,w,f.elements]),$e.useEffect(function(){C4(f.stripe)},[f.stripe]),$e.createElement(Dd.Provider,{value:f},s)};AA.propTypes={stripe:gt.any,options:gt.object};var R4=function(e){var t=$e.useContext(Dd);return IA(t,e)},P4=function(){var e=R4("calls useElements()"),t=e.elements;return t};gt.func.isRequired;var CA=$e.createContext(null);CA.displayName="CheckoutSdkContext";var k4=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},b4=$e.createContext(null);b4.displayName="CheckoutContext";gt.any,gt.shape({fetchClientSecret:gt.func.isRequired,elementsOptions:gt.object}).isRequired;var Dm=function(e){var t=$e.useContext(CA),r=$e.useContext(Dd);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?k4(t,e):IA(r,e)},x4=["mode"],O4=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Nt=function(e,t){var r="".concat(O4(e),"Element"),s=function(f){var m=f.id,v=f.className,w=f.options,T=w===void 0?{}:w,P=f.onBlur,R=f.onFocus,O=f.onReady,A=f.onChange,$=f.onEscape,Y=f.onClick,Q=f.onLoadError,ne=f.onLoaderStart,de=f.onNetworksChange,ae=f.onConfirm,N=f.onCancel,I=f.onShippingAddressChange,b=f.onShippingRateChange,D=Dm("mounts <".concat(r,">")),M="elements"in D?D.elements:null,j="checkoutSdk"in D?D.checkoutSdk:null,k=$e.useState(null),je=EA(k,2),be=je[0],Me=je[1],Ce=$e.useRef(null),se=$e.useRef(null);qn(be,"blur",P),qn(be,"focus",R),qn(be,"escape",$),qn(be,"click",Y),qn(be,"loaderror",Q),qn(be,"loaderstart",ne),qn(be,"networkschange",de),qn(be,"confirm",ae),qn(be,"cancel",N),qn(be,"shippingaddresschange",I),qn(be,"shippingratechange",b),qn(be,"change",A);var ue;O&&(e==="expressCheckout"?ue=O:ue=function(){O(be)}),qn(be,"ready",ue),$e.useLayoutEffect(function(){if(Ce.current===null&&se.current!==null&&(M||j)){var V=null;if(j)switch(e){case"payment":V=j.createPaymentElement(T);break;case"address":if("mode"in T){var K=T.mode,ce=y4(T,x4);if(K==="shipping")V=j.createShippingAddressElement(ce);else if(K==="billing")V=j.createBillingAddressElement(ce);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":V=j.createExpressCheckoutElement(T);break;case"currencySelector":V=j.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else M&&(V=M.create(e,T));Ce.current=V,Me(V),V&&V.mount(se.current)}},[M,j,T]);var re=Nm(T);return $e.useEffect(function(){if(Ce.current){var V=TA(T,re,["paymentRequest"]);V&&"update"in Ce.current&&Ce.current.update(V)}},[T,re]),$e.useLayoutEffect(function(){return function(){if(Ce.current&&typeof Ce.current.destroy=="function")try{Ce.current.destroy(),Ce.current=null}catch{}}},[]),$e.createElement("div",{id:m,className:v,ref:se})},a=function(f){Dm("mounts <".concat(r,">"));var m=f.id,v=f.className;return $e.createElement("div",{id:m,className:v})},u=t?a:s;return u.propTypes={id:gt.string,className:gt.string,onChange:gt.func,onBlur:gt.func,onFocus:gt.func,onReady:gt.func,onEscape:gt.func,onClick:gt.func,onLoadError:gt.func,onLoaderStart:gt.func,onNetworksChange:gt.func,onConfirm:gt.func,onCancel:gt.func,onShippingAddressChange:gt.func,onShippingRateChange:gt.func,options:gt.object},u.displayName=r,u.__elementType=e,u},Dt=typeof window>"u",N4=$e.createContext(null);N4.displayName="EmbeddedCheckoutProviderContext";var D4=function(){var e=Dm("calls useStripe()"),t=e.stripe;return t};Nt("auBankAccount",Dt);Nt("card",Dt);var e0=Nt("cardNumber",Dt),t0=Nt("cardExpiry",Dt),n0=Nt("cardCvc",Dt);Nt("fpxBank",Dt);Nt("iban",Dt);Nt("idealBank",Dt);Nt("p24Bank",Dt);Nt("epsBank",Dt);Nt("payment",Dt);Nt("expressCheckout",Dt);Nt("currencySelector",Dt);Nt("paymentRequestButton",Dt);Nt("linkAuthentication",Dt);Nt("address",Dt);Nt("shippingAddress",Dt);Nt("paymentMethodMessaging",Dt);Nt("affirmMessage",Dt);Nt("afterpayClearpayMessage",Dt);const L4=({clientSecret:n})=>{const e=D4(),t=P4(),[r,s]=q.useState(null),[a,u]=q.useState(!1),d=ji(),{user:f,token:m,claims:v}=Ln(),w=async P=>{if(P.preventDefault(),!e||!t)return;u(!0);const R=await e.confirmCardPayment(n,{payment_method:{card:t.getElement(e0),card:t.getElement(t0),card:t.getElement(n0)}});R.error?s(R.error.message):R.paymentIntent.status==="succeeded"&&(console.log("Pago completado 🎉"),ZL(f,"premium"),await UI(),console.log(v),d("/checkout/success")),u(!1)},T={base:{fontSize:"1rem",color:"#14171A",fontWeight:"600",fontFamily:'"Segoe UI", Tahoma, Geneva, Verdana, sans-serif',letterSpacing:"0.02em",padding:"0.75rem 0.75rem","::placeholder":{color:"#657786",fontWeight:"400"},":-webkit-autofill":{color:"#14171A"}},invalid:{color:"#E0245E",iconColor:"#E0245E"}};return x.jsxs("form",{className:"checkout",onSubmit:w,children:[x.jsx("h2",{children:"Pago con tarjeta"}),x.jsxs("div",{className:"input-group",children:[x.jsx("label",{children:"Nombre completo"}),x.jsx("input",{type:"text",name:"name",placeholder:"Nombre y Apellidos",required:!0,className:"stripe-input"})]}),x.jsxs("div",{className:"input-group",children:[x.jsx("label",{children:"Número de tarjeta"}),x.jsx(e0,{options:{style:T},className:"stripe-input"})]}),x.jsxs("div",{className:"input-group",children:[x.jsxs("div",{children:[x.jsx("label",{children:"Fecha vencimiento"}),x.jsx(t0,{options:{style:T},className:"stripe-input"})]}),x.jsxs("div",{className:"input-group",children:[x.jsx("label",{children:"CVC"}),x.jsx(n0,{options:{style:T},className:"stripe-input"})]})]}),x.jsx("button",{className:"btn",type:"submit",children:"Pagar"})]})},V4=_A("pk_test_51RVbJnFLiEmdxnPslJ3Yhs2tmNsi1azDOXkPzMTfE0W5O5Tn7gJJO8qNRsGh8mxdRZOlyi3Di3xlkkE498p2Okti00AbaQ5EXT"),M4=()=>{Us();const[n,e]=q.useState(),{user:t}=Ln();q.useEffect(()=>{if(!t)return;(async()=>{const a=await u4(t);console.log(a),e(a)})()},[]);const r={clientSecret:n,appearance:c4};return console.log(n),x.jsxs("div",{children:[x.jsx("h2",{children:"Checkout"}),n?x.jsx(AA,{stripe:V4,options:r,children:x.jsx(L4,{clientSecret:n})}):x.jsx("div",{children:"Cargando..."})]})},F4=()=>{const[n,e]=q.useState(null),[t,r]=q.useState("");return q.useEffect(()=>{const s=window.location.search,u=new URLSearchParams(s).get("session_id"),d=axios.get(`/session-status?session_id=${u}`);e(d.status),r(d.customer_email)},[]),n==="open"?x.jsx(Navigate,{to:"/checkout"}):n==="complete"?x.jsx("section",{id:"success",children:x.jsxs("p",{children:["We appreciate your business! A confirmation email will be sent to ",t,". If you have any questions, please email ",x.jsx("a",{href:"mailto:orders@cultura-fit.com",children:"orders@cultura-fit.com"}),"."]})}):null},j4=()=>Us().state?.justPaid?x.jsxs("div",{className:"container-card",children:[x.jsx("h2",{children:"¡Gracias por hacerte Premium! 🎉"}),x.jsx("p",{children:"Ahora puedes acceder a todas las funciones exclusivas."})]}):x.jsx(mh,{to:"/home"});function U4(){return x.jsx(x.Fragment,{children:x.jsx(E2,{children:x.jsx(T2,{children:x.jsxs(N1,{children:[x.jsx(Rr,{path:"/",element:x.jsx(mh,{to:"/login"})}),x.jsx(Rr,{path:"/login",element:x.jsx(YM,{})}),x.jsx(Rr,{path:"/register",element:x.jsx(QM,{})}),x.jsxs(Rr,{element:x.jsx(GM,{}),children:[x.jsx(Rr,{path:"/home",element:x.jsx(qM,{})}),x.jsx(Rr,{path:"/profile",element:x.jsx(HM,{})}),x.jsx(Rr,{path:"/upgrade",element:x.jsx(h4,{})}),x.jsx(Rr,{path:"/checkout",element:x.jsx(M4,{})}),x.jsx(Rr,{path:"/checkout/success",element:x.jsx(j4,{})}),x.jsx(Rr,{path:"/return",element:x.jsx(F4,{})})]})]})})})})}jC.createRoot(document.getElementById("root")).render(x.jsx(q.StrictMode,{children:x.jsx(U1,{children:x.jsx(U4,{})})}));
